{
    var t = 1e-6,
        i = "undefined" != typeof Float32Array ? Float32Array : Array,
        e = Math.random;
    function Tt(t) {
        i = t;
    }
    var s = Math.PI / 180;
    function It(t) {
        return t * s;
    }
    function Pt(i, e) {
        return Math.abs(i - e) <= t * Math.max(1, Math.abs(i), Math.abs(e));
    }
    Math.hypot ||
        (Math.hypot = function () {
            for (var t = 0, i = arguments.length; i--; ) t += arguments[i] * arguments[i];
            return Math.sqrt(t);
        });
    var n = {
        __proto__: null,
        EPSILON: t,
        get tMe() {
            return i;
        },
        iMe: e,
        eMe: "zyx",
        sMe: Tt,
        nMe: It,
        equals: Pt,
    };
    function Gt() {
        var t = new i(4);
        return i != Float32Array && ((t[1] = 0), (t[2] = 0)), (t[0] = 1), (t[3] = 1), t;
    }
    function At(t) {
        var e = new i(4);
        return (e[0] = t[0]), (e[1] = t[1]), (e[2] = t[2]), (e[3] = t[3]), e;
    }
    function Rt(t, i) {
        return (t[0] = i[0]), (t[1] = i[1]), (t[2] = i[2]), (t[3] = i[3]), t;
    }
    function kt(t) {
        return (t[0] = 1), (t[1] = 0), (t[2] = 0), (t[3] = 1), t;
    }
    function Ot(t, e, s, n) {
        var r = new i(4);
        return (r[0] = t), (r[1] = e), (r[2] = s), (r[3] = n), r;
    }
    function Dt(t, i, e, s, n) {
        return (t[0] = i), (t[1] = e), (t[2] = s), (t[3] = n), t;
    }
    function Ft(t, i) {
        if (t === i) {
            var e = i[1];
            (t[1] = i[2]), (t[2] = e);
        } else (t[0] = i[0]), (t[1] = i[2]), (t[2] = i[1]), (t[3] = i[3]);
        return t;
    }
    function Lt(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = i[3],
            h = e * r - n * s;
        return h ? ((h = 1 / h), (t[0] = r * h), (t[1] = -s * h), (t[2] = -n * h), (t[3] = e * h), t) : null;
    }
    function Bt(t, i) {
        var e = i[0];
        return (t[0] = i[3]), (t[1] = -i[1]), (t[2] = -i[2]), (t[3] = e), t;
    }
    function Ut(t) {
        return t[0] * t[3] - t[2] * t[1];
    }
    function Nt(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = e[0],
            a = e[1],
            l = e[2],
            u = e[3];
        return (t[0] = s * o + r * a), (t[1] = n * o + h * a), (t[2] = s * l + r * u), (t[3] = n * l + h * u), t;
    }
    function jt(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = Math.sin(e),
            a = Math.cos(e);
        return (t[0] = s * a + r * o), (t[1] = n * a + h * o), (t[2] = s * -o + r * a), (t[3] = n * -o + h * a), t;
    }
    function $t(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = e[0],
            a = e[1];
        return (t[0] = s * o), (t[1] = n * o), (t[2] = r * a), (t[3] = h * a), t;
    }
    function zt(t, i) {
        var e = Math.sin(i),
            s = Math.cos(i);
        return (t[0] = s), (t[1] = e), (t[2] = -e), (t[3] = s), t;
    }
    function Vt(t, i) {
        return (t[0] = i[0]), (t[1] = 0), (t[2] = 0), (t[3] = i[1]), t;
    }
    function Wt(t) {
        return "mat2(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + t[3] + ")";
    }
    function Ht(t) {
        return Math.hypot(t[0], t[1], t[2], t[3]);
    }
    function Kt(t, i, e, s) {
        return (t[2] = s[2] / s[0]), (e[0] = s[0]), (e[1] = s[1]), (e[3] = s[3] - t[2] * e[1]), [t, i, e];
    }
    function qt(t, i, e) {
        return (t[0] = i[0] + e[0]), (t[1] = i[1] + e[1]), (t[2] = i[2] + e[2]), (t[3] = i[3] + e[3]), t;
    }
    function Xt(t, i, e) {
        return (t[0] = i[0] - e[0]), (t[1] = i[1] - e[1]), (t[2] = i[2] - e[2]), (t[3] = i[3] - e[3]), t;
    }
    function Yt(t, i) {
        return t[0] === i[0] && t[1] === i[1] && t[2] === i[2] && t[3] === i[3];
    }
    function Jt(i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = e[0],
            a = e[1],
            l = e[2],
            u = e[3];
        return (
            Math.abs(s - o) <= t * Math.max(1, Math.abs(s), Math.abs(o)) &&
            Math.abs(n - a) <= t * Math.max(1, Math.abs(n), Math.abs(a)) &&
            Math.abs(r - l) <= t * Math.max(1, Math.abs(r), Math.abs(l)) &&
            Math.abs(h - u) <= t * Math.max(1, Math.abs(h), Math.abs(u))
        );
    }
    function Zt(t, i, e) {
        return (t[0] = i[0] * e), (t[1] = i[1] * e), (t[2] = i[2] * e), (t[3] = i[3] * e), t;
    }
    function Qt(t, i, e, s) {
        return (
            (t[0] = i[0] + e[0] * s), (t[1] = i[1] + e[1] * s), (t[2] = i[2] + e[2] * s), (t[3] = i[3] + e[3] * s), t
        );
    }
    var r = Nt,
        h = Xt,
        o = Object.freeze({
            __proto__: null,
            create: Gt,
            clone: At,
            mn: Rt,
            identity: kt,
            rMe: Ot,
            set: Dt,
            hMe: Ft,
            oMe: Lt,
            aMe: Bt,
            lMe: Ut,
            multiply: Nt,
            rotate: jt,
            scale: $t,
            uMe: zt,
            cMe: Vt,
            dMe: Wt,
            fMe: Ht,
            pMe: Kt,
            add: qt,
            mMe: Xt,
            wMe: Yt,
            equals: Jt,
            gMe: Zt,
            yMe: Qt,
            mul: r,
            sub: h,
        });
    function ti() {
        var t = new i(6);
        return i != Float32Array && ((t[1] = 0), (t[2] = 0), (t[4] = 0), (t[5] = 0)), (t[0] = 1), (t[3] = 1), t;
    }
    function ii(t) {
        var e = new i(6);
        return (e[0] = t[0]), (e[1] = t[1]), (e[2] = t[2]), (e[3] = t[3]), (e[4] = t[4]), (e[5] = t[5]), e;
    }
    function ei(t, i) {
        return (t[0] = i[0]), (t[1] = i[1]), (t[2] = i[2]), (t[3] = i[3]), (t[4] = i[4]), (t[5] = i[5]), t;
    }
    function si(t) {
        return (t[0] = 1), (t[1] = 0), (t[2] = 0), (t[3] = 1), (t[4] = 0), (t[5] = 0), t;
    }
    function ni(t, e, s, n, r, h) {
        var o = new i(6);
        return (o[0] = t), (o[1] = e), (o[2] = s), (o[3] = n), (o[4] = r), (o[5] = h), o;
    }
    function ri(t, i, e, s, n, r, h) {
        return (t[0] = i), (t[1] = e), (t[2] = s), (t[3] = n), (t[4] = r), (t[5] = h), t;
    }
    function hi(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = i[3],
            h = i[4],
            o = i[5],
            a = e * r - s * n;
        return a
            ? ((a = 1 / a),
              (t[0] = r * a),
              (t[1] = -s * a),
              (t[2] = -n * a),
              (t[3] = e * a),
              (t[4] = (n * o - r * h) * a),
              (t[5] = (s * h - e * o) * a),
              t)
            : null;
    }
    function oi(t) {
        return t[0] * t[3] - t[1] * t[2];
    }
    function ai(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = e[0],
            u = e[1],
            c = e[2],
            d = e[3],
            f = e[4],
            p = e[5];
        return (
            (t[0] = s * l + r * u),
            (t[1] = n * l + h * u),
            (t[2] = s * c + r * d),
            (t[3] = n * c + h * d),
            (t[4] = s * f + r * p + o),
            (t[5] = n * f + h * p + a),
            t
        );
    }
    function li(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = Math.sin(e),
            u = Math.cos(e);
        return (
            (t[0] = s * u + r * l),
            (t[1] = n * u + h * l),
            (t[2] = s * -l + r * u),
            (t[3] = n * -l + h * u),
            (t[4] = o),
            (t[5] = a),
            t
        );
    }
    function ui(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = e[0],
            u = e[1];
        return (t[0] = s * l), (t[1] = n * l), (t[2] = r * u), (t[3] = h * u), (t[4] = o), (t[5] = a), t;
    }
    function ci(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = e[0],
            u = e[1];
        return (
            (t[0] = s), (t[1] = n), (t[2] = r), (t[3] = h), (t[4] = s * l + r * u + o), (t[5] = n * l + h * u + a), t
        );
    }
    function di(t, i) {
        var e = Math.sin(i),
            s = Math.cos(i);
        return (t[0] = s), (t[1] = e), (t[2] = -e), (t[3] = s), (t[4] = 0), (t[5] = 0), t;
    }
    function fi(t, i) {
        return (t[0] = i[0]), (t[1] = 0), (t[2] = 0), (t[3] = i[1]), (t[4] = 0), (t[5] = 0), t;
    }
    function pi(t, i) {
        return (t[0] = 1), (t[1] = 0), (t[2] = 0), (t[3] = 1), (t[4] = i[0]), (t[5] = i[1]), t;
    }
    function mi(t) {
        return "mat2d(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + t[3] + ", " + t[4] + ", " + t[5] + ")";
    }
    function wi(t) {
        return Math.hypot(t[0], t[1], t[2], t[3], t[4], t[5], 1);
    }
    function gi(t, i, e) {
        return (
            (t[0] = i[0] + e[0]),
            (t[1] = i[1] + e[1]),
            (t[2] = i[2] + e[2]),
            (t[3] = i[3] + e[3]),
            (t[4] = i[4] + e[4]),
            (t[5] = i[5] + e[5]),
            t
        );
    }
    function yi(t, i, e) {
        return (
            (t[0] = i[0] - e[0]),
            (t[1] = i[1] - e[1]),
            (t[2] = i[2] - e[2]),
            (t[3] = i[3] - e[3]),
            (t[4] = i[4] - e[4]),
            (t[5] = i[5] - e[5]),
            t
        );
    }
    function bi(t, i, e) {
        return (
            (t[0] = i[0] * e),
            (t[1] = i[1] * e),
            (t[2] = i[2] * e),
            (t[3] = i[3] * e),
            (t[4] = i[4] * e),
            (t[5] = i[5] * e),
            t
        );
    }
    function vi(t, i, e, s) {
        return (
            (t[0] = i[0] + e[0] * s),
            (t[1] = i[1] + e[1] * s),
            (t[2] = i[2] + e[2] * s),
            (t[3] = i[3] + e[3] * s),
            (t[4] = i[4] + e[4] * s),
            (t[5] = i[5] + e[5] * s),
            t
        );
    }
    function Si(t, i) {
        return t[0] === i[0] && t[1] === i[1] && t[2] === i[2] && t[3] === i[3] && t[4] === i[4] && t[5] === i[5];
    }
    function xi(i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = e[0],
            u = e[1],
            c = e[2],
            d = e[3],
            f = e[4],
            p = e[5];
        return (
            Math.abs(s - l) <= t * Math.max(1, Math.abs(s), Math.abs(l)) &&
            Math.abs(n - u) <= t * Math.max(1, Math.abs(n), Math.abs(u)) &&
            Math.abs(r - c) <= t * Math.max(1, Math.abs(r), Math.abs(c)) &&
            Math.abs(h - d) <= t * Math.max(1, Math.abs(h), Math.abs(d)) &&
            Math.abs(o - f) <= t * Math.max(1, Math.abs(o), Math.abs(f)) &&
            Math.abs(a - p) <= t * Math.max(1, Math.abs(a), Math.abs(p))
        );
    }
    var a = ai,
        l = yi,
        u = Object.freeze({
            __proto__: null,
            create: ti,
            clone: ii,
            mn: ei,
            identity: si,
            rMe: ni,
            set: ri,
            oMe: hi,
            lMe: oi,
            multiply: ai,
            rotate: li,
            scale: ui,
            translate: ci,
            uMe: di,
            cMe: fi,
            bMe: pi,
            dMe: mi,
            fMe: wi,
            add: gi,
            mMe: yi,
            gMe: bi,
            yMe: vi,
            wMe: Si,
            equals: xi,
            mul: a,
            sub: l,
        });
    function Mi() {
        var t = new i(9);
        return (
            i != Float32Array && ((t[1] = 0), (t[2] = 0), (t[3] = 0), (t[5] = 0), (t[6] = 0), (t[7] = 0)),
            (t[0] = 1),
            (t[4] = 1),
            (t[8] = 1),
            t
        );
    }
    function Ei(t, i) {
        return (
            (t[0] = i[0]),
            (t[1] = i[1]),
            (t[2] = i[2]),
            (t[3] = i[4]),
            (t[4] = i[5]),
            (t[5] = i[6]),
            (t[6] = i[8]),
            (t[7] = i[9]),
            (t[8] = i[10]),
            t
        );
    }
    function Ci(t) {
        var e = new i(9);
        return (
            (e[0] = t[0]),
            (e[1] = t[1]),
            (e[2] = t[2]),
            (e[3] = t[3]),
            (e[4] = t[4]),
            (e[5] = t[5]),
            (e[6] = t[6]),
            (e[7] = t[7]),
            (e[8] = t[8]),
            e
        );
    }
    function _i(t, i) {
        return (
            (t[0] = i[0]),
            (t[1] = i[1]),
            (t[2] = i[2]),
            (t[3] = i[3]),
            (t[4] = i[4]),
            (t[5] = i[5]),
            (t[6] = i[6]),
            (t[7] = i[7]),
            (t[8] = i[8]),
            t
        );
    }
    function Ti(t, e, s, n, r, h, o, a, l) {
        var u = new i(9);
        return (
            (u[0] = t),
            (u[1] = e),
            (u[2] = s),
            (u[3] = n),
            (u[4] = r),
            (u[5] = h),
            (u[6] = o),
            (u[7] = a),
            (u[8] = l),
            u
        );
    }
    function Ii(t, i, e, s, n, r, h, o, a, l) {
        return (
            (t[0] = i),
            (t[1] = e),
            (t[2] = s),
            (t[3] = n),
            (t[4] = r),
            (t[5] = h),
            (t[6] = o),
            (t[7] = a),
            (t[8] = l),
            t
        );
    }
    function Pi(t) {
        return (
            (t[0] = 1),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = 1),
            (t[5] = 0),
            (t[6] = 0),
            (t[7] = 0),
            (t[8] = 1),
            t
        );
    }
    function Gi(t, i) {
        if (t === i) {
            var e = i[1],
                s = i[2],
                n = i[5];
            (t[1] = i[3]), (t[2] = i[6]), (t[3] = e), (t[5] = i[7]), (t[6] = s), (t[7] = n);
        } else
            (t[0] = i[0]),
                (t[1] = i[3]),
                (t[2] = i[6]),
                (t[3] = i[1]),
                (t[4] = i[4]),
                (t[5] = i[7]),
                (t[6] = i[2]),
                (t[7] = i[5]),
                (t[8] = i[8]);
        return t;
    }
    function Ai(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = i[3],
            h = i[4],
            o = i[5],
            a = i[6],
            l = i[7],
            u = i[8],
            c = u * h - o * l,
            d = -u * r + o * a,
            f = l * r - h * a,
            p = e * c + s * d + n * f;
        return p
            ? ((p = 1 / p),
              (t[0] = c * p),
              (t[1] = (-u * s + n * l) * p),
              (t[2] = (o * s - n * h) * p),
              (t[3] = d * p),
              (t[4] = (u * e - n * a) * p),
              (t[5] = (-o * e + n * r) * p),
              (t[6] = f * p),
              (t[7] = (-l * e + s * a) * p),
              (t[8] = (h * e - s * r) * p),
              t)
            : null;
    }
    function Ri(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = i[3],
            h = i[4],
            o = i[5],
            a = i[6],
            l = i[7],
            u = i[8];
        return (
            (t[0] = h * u - o * l),
            (t[1] = n * l - s * u),
            (t[2] = s * o - n * h),
            (t[3] = o * a - r * u),
            (t[4] = e * u - n * a),
            (t[5] = n * r - e * o),
            (t[6] = r * l - h * a),
            (t[7] = s * a - e * l),
            (t[8] = e * h - s * r),
            t
        );
    }
    function ki(t) {
        var i = t[0],
            e = t[1],
            s = t[2],
            n = t[3],
            r = t[4],
            h = t[5],
            o = t[6],
            a = t[7],
            l = t[8];
        return i * (l * r - h * a) + e * (-l * n + h * o) + s * (a * n - r * o);
    }
    function Oi(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = i[6],
            u = i[7],
            c = i[8],
            d = e[0],
            f = e[1],
            p = e[2],
            m = e[3],
            w = e[4],
            g = e[5],
            y = e[6],
            b = e[7],
            v = e[8];
        return (
            (t[0] = d * s + f * h + p * l),
            (t[1] = d * n + f * o + p * u),
            (t[2] = d * r + f * a + p * c),
            (t[3] = m * s + w * h + g * l),
            (t[4] = m * n + w * o + g * u),
            (t[5] = m * r + w * a + g * c),
            (t[6] = y * s + b * h + v * l),
            (t[7] = y * n + b * o + v * u),
            (t[8] = y * r + b * a + v * c),
            t
        );
    }
    function Di(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = i[6],
            u = i[7],
            c = i[8],
            d = e[0],
            f = e[1];
        return (
            (t[0] = s),
            (t[1] = n),
            (t[2] = r),
            (t[3] = h),
            (t[4] = o),
            (t[5] = a),
            (t[6] = d * s + f * h + l),
            (t[7] = d * n + f * o + u),
            (t[8] = d * r + f * a + c),
            t
        );
    }
    function Fi(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = i[6],
            u = i[7],
            c = i[8],
            d = Math.sin(e),
            f = Math.cos(e);
        return (
            (t[0] = f * s + d * h),
            (t[1] = f * n + d * o),
            (t[2] = f * r + d * a),
            (t[3] = f * h - d * s),
            (t[4] = f * o - d * n),
            (t[5] = f * a - d * r),
            (t[6] = l),
            (t[7] = u),
            (t[8] = c),
            t
        );
    }
    function Li(t, i, e) {
        var s = e[0],
            n = e[1];
        return (
            (t[0] = s * i[0]),
            (t[1] = s * i[1]),
            (t[2] = s * i[2]),
            (t[3] = n * i[3]),
            (t[4] = n * i[4]),
            (t[5] = n * i[5]),
            (t[6] = i[6]),
            (t[7] = i[7]),
            (t[8] = i[8]),
            t
        );
    }
    function Bi(t, i) {
        return (
            (t[0] = 1),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = 1),
            (t[5] = 0),
            (t[6] = i[0]),
            (t[7] = i[1]),
            (t[8] = 1),
            t
        );
    }
    function Ui(t, i) {
        var e = Math.sin(i),
            s = Math.cos(i);
        return (
            (t[0] = s),
            (t[1] = e),
            (t[2] = 0),
            (t[3] = -e),
            (t[4] = s),
            (t[5] = 0),
            (t[6] = 0),
            (t[7] = 0),
            (t[8] = 1),
            t
        );
    }
    function Ni(t, i) {
        return (
            (t[0] = i[0]),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = i[1]),
            (t[5] = 0),
            (t[6] = 0),
            (t[7] = 0),
            (t[8] = 1),
            t
        );
    }
    function ji(t, i) {
        return (
            (t[0] = i[0]),
            (t[1] = i[1]),
            (t[2] = 0),
            (t[3] = i[2]),
            (t[4] = i[3]),
            (t[5] = 0),
            (t[6] = i[4]),
            (t[7] = i[5]),
            (t[8] = 1),
            t
        );
    }
    function $i(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = i[3],
            h = e + e,
            o = s + s,
            a = n + n,
            l = e * h,
            u = s * h,
            c = s * o,
            d = n * h,
            f = n * o,
            p = n * a,
            m = r * h,
            w = r * o,
            g = r * a;
        return (
            (t[0] = 1 - c - p),
            (t[3] = u - g),
            (t[6] = d + w),
            (t[1] = u + g),
            (t[4] = 1 - l - p),
            (t[7] = f - m),
            (t[2] = d - w),
            (t[5] = f + m),
            (t[8] = 1 - l - c),
            t
        );
    }
    function zi(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = i[3],
            h = i[4],
            o = i[5],
            a = i[6],
            l = i[7],
            u = i[8],
            c = i[9],
            d = i[10],
            f = i[11],
            p = i[12],
            m = i[13],
            w = i[14],
            g = i[15],
            y = e * o - s * h,
            b = e * a - n * h,
            v = e * l - r * h,
            S = s * a - n * o,
            x = s * l - r * o,
            M = n * l - r * a,
            E = u * m - c * p,
            C = u * w - d * p,
            _ = u * g - f * p,
            T = c * w - d * m,
            I = c * g - f * m,
            P = d * g - f * w,
            G = y * P - b * I + v * T + S * _ - x * C + M * E;
        return G
            ? ((G = 1 / G),
              (t[0] = (o * P - a * I + l * T) * G),
              (t[1] = (a * _ - h * P - l * C) * G),
              (t[2] = (h * I - o * _ + l * E) * G),
              (t[3] = (n * I - s * P - r * T) * G),
              (t[4] = (e * P - n * _ + r * C) * G),
              (t[5] = (s * _ - e * I - r * E) * G),
              (t[6] = (m * M - w * x + g * S) * G),
              (t[7] = (w * v - p * M - g * b) * G),
              (t[8] = (p * x - m * v + g * y) * G),
              t)
            : null;
    }
    function Vi(t, i, e) {
        return (
            (t[0] = 2 / i),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = -2 / e),
            (t[5] = 0),
            (t[6] = -1),
            (t[7] = 1),
            (t[8] = 1),
            t
        );
    }
    function Wi(t) {
        return (
            "mat3(" +
            t[0] +
            ", " +
            t[1] +
            ", " +
            t[2] +
            ", " +
            t[3] +
            ", " +
            t[4] +
            ", " +
            t[5] +
            ", " +
            t[6] +
            ", " +
            t[7] +
            ", " +
            t[8] +
            ")"
        );
    }
    function Hi(t) {
        return Math.hypot(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8]);
    }
    function Ki(t, i, e) {
        return (
            (t[0] = i[0] + e[0]),
            (t[1] = i[1] + e[1]),
            (t[2] = i[2] + e[2]),
            (t[3] = i[3] + e[3]),
            (t[4] = i[4] + e[4]),
            (t[5] = i[5] + e[5]),
            (t[6] = i[6] + e[6]),
            (t[7] = i[7] + e[7]),
            (t[8] = i[8] + e[8]),
            t
        );
    }
    function qi(t, i, e) {
        return (
            (t[0] = i[0] - e[0]),
            (t[1] = i[1] - e[1]),
            (t[2] = i[2] - e[2]),
            (t[3] = i[3] - e[3]),
            (t[4] = i[4] - e[4]),
            (t[5] = i[5] - e[5]),
            (t[6] = i[6] - e[6]),
            (t[7] = i[7] - e[7]),
            (t[8] = i[8] - e[8]),
            t
        );
    }
    function Xi(t, i, e) {
        return (
            (t[0] = i[0] * e),
            (t[1] = i[1] * e),
            (t[2] = i[2] * e),
            (t[3] = i[3] * e),
            (t[4] = i[4] * e),
            (t[5] = i[5] * e),
            (t[6] = i[6] * e),
            (t[7] = i[7] * e),
            (t[8] = i[8] * e),
            t
        );
    }
    function Yi(t, i, e, s) {
        return (
            (t[0] = i[0] + e[0] * s),
            (t[1] = i[1] + e[1] * s),
            (t[2] = i[2] + e[2] * s),
            (t[3] = i[3] + e[3] * s),
            (t[4] = i[4] + e[4] * s),
            (t[5] = i[5] + e[5] * s),
            (t[6] = i[6] + e[6] * s),
            (t[7] = i[7] + e[7] * s),
            (t[8] = i[8] + e[8] * s),
            t
        );
    }
    function Ji(t, i) {
        return (
            t[0] === i[0] &&
            t[1] === i[1] &&
            t[2] === i[2] &&
            t[3] === i[3] &&
            t[4] === i[4] &&
            t[5] === i[5] &&
            t[6] === i[6] &&
            t[7] === i[7] &&
            t[8] === i[8]
        );
    }
    function Zi(i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = i[6],
            u = i[7],
            c = i[8],
            d = e[0],
            f = e[1],
            p = e[2],
            m = e[3],
            w = e[4],
            g = e[5],
            y = e[6],
            b = e[7],
            v = e[8];
        return (
            Math.abs(s - d) <= t * Math.max(1, Math.abs(s), Math.abs(d)) &&
            Math.abs(n - f) <= t * Math.max(1, Math.abs(n), Math.abs(f)) &&
            Math.abs(r - p) <= t * Math.max(1, Math.abs(r), Math.abs(p)) &&
            Math.abs(h - m) <= t * Math.max(1, Math.abs(h), Math.abs(m)) &&
            Math.abs(o - w) <= t * Math.max(1, Math.abs(o), Math.abs(w)) &&
            Math.abs(a - g) <= t * Math.max(1, Math.abs(a), Math.abs(g)) &&
            Math.abs(l - y) <= t * Math.max(1, Math.abs(l), Math.abs(y)) &&
            Math.abs(u - b) <= t * Math.max(1, Math.abs(u), Math.abs(b)) &&
            Math.abs(c - v) <= t * Math.max(1, Math.abs(c), Math.abs(v))
        );
    }
    var c = Oi,
        d = qi,
        f = Object.freeze({
            __proto__: null,
            create: Mi,
            vMe: Ei,
            clone: Ci,
            mn: _i,
            rMe: Ti,
            set: Ii,
            identity: Pi,
            hMe: Gi,
            oMe: Ai,
            aMe: Ri,
            lMe: ki,
            multiply: Oi,
            translate: Di,
            rotate: Fi,
            scale: Li,
            bMe: Bi,
            uMe: Ui,
            cMe: Ni,
            SMe: ji,
            xMe: $i,
            MMe: zi,
            EMe: Vi,
            dMe: Wi,
            fMe: Hi,
            add: Ki,
            mMe: qi,
            gMe: Xi,
            yMe: Yi,
            wMe: Ji,
            equals: Zi,
            mul: c,
            sub: d,
        });
    function Qi() {
        var t = new i(16);
        return (
            i != Float32Array &&
                ((t[1] = 0),
                (t[2] = 0),
                (t[3] = 0),
                (t[4] = 0),
                (t[6] = 0),
                (t[7] = 0),
                (t[8] = 0),
                (t[9] = 0),
                (t[11] = 0),
                (t[12] = 0),
                (t[13] = 0),
                (t[14] = 0)),
            (t[0] = 1),
            (t[5] = 1),
            (t[10] = 1),
            (t[15] = 1),
            t
        );
    }
    function te(t) {
        var e = new i(16);
        return (
            (e[0] = t[0]),
            (e[1] = t[1]),
            (e[2] = t[2]),
            (e[3] = t[3]),
            (e[4] = t[4]),
            (e[5] = t[5]),
            (e[6] = t[6]),
            (e[7] = t[7]),
            (e[8] = t[8]),
            (e[9] = t[9]),
            (e[10] = t[10]),
            (e[11] = t[11]),
            (e[12] = t[12]),
            (e[13] = t[13]),
            (e[14] = t[14]),
            (e[15] = t[15]),
            e
        );
    }
    function ie(t, i) {
        return (
            (t[0] = i[0]),
            (t[1] = i[1]),
            (t[2] = i[2]),
            (t[3] = i[3]),
            (t[4] = i[4]),
            (t[5] = i[5]),
            (t[6] = i[6]),
            (t[7] = i[7]),
            (t[8] = i[8]),
            (t[9] = i[9]),
            (t[10] = i[10]),
            (t[11] = i[11]),
            (t[12] = i[12]),
            (t[13] = i[13]),
            (t[14] = i[14]),
            (t[15] = i[15]),
            t
        );
    }
    function ee(t, e, s, n, r, h, o, a, l, u, c, d, f, p, m, w) {
        var g = new i(16);
        return (
            (g[0] = t),
            (g[1] = e),
            (g[2] = s),
            (g[3] = n),
            (g[4] = r),
            (g[5] = h),
            (g[6] = o),
            (g[7] = a),
            (g[8] = l),
            (g[9] = u),
            (g[10] = c),
            (g[11] = d),
            (g[12] = f),
            (g[13] = p),
            (g[14] = m),
            (g[15] = w),
            g
        );
    }
    function se(t, i, e, s, n, r, h, o, a, l, u, c, d, f, p, m, w) {
        return (
            (t[0] = i),
            (t[1] = e),
            (t[2] = s),
            (t[3] = n),
            (t[4] = r),
            (t[5] = h),
            (t[6] = o),
            (t[7] = a),
            (t[8] = l),
            (t[9] = u),
            (t[10] = c),
            (t[11] = d),
            (t[12] = f),
            (t[13] = p),
            (t[14] = m),
            (t[15] = w),
            t
        );
    }
    function ne(t) {
        return (
            (t[0] = 1),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = 0),
            (t[5] = 1),
            (t[6] = 0),
            (t[7] = 0),
            (t[8] = 0),
            (t[9] = 0),
            (t[10] = 1),
            (t[11] = 0),
            (t[12] = 0),
            (t[13] = 0),
            (t[14] = 0),
            (t[15] = 1),
            t
        );
    }
    function re(t, i) {
        if (t === i) {
            var e = i[1],
                s = i[2],
                n = i[3],
                r = i[6],
                h = i[7],
                o = i[11];
            (t[1] = i[4]),
                (t[2] = i[8]),
                (t[3] = i[12]),
                (t[4] = e),
                (t[6] = i[9]),
                (t[7] = i[13]),
                (t[8] = s),
                (t[9] = r),
                (t[11] = i[14]),
                (t[12] = n),
                (t[13] = h),
                (t[14] = o);
        } else
            (t[0] = i[0]),
                (t[1] = i[4]),
                (t[2] = i[8]),
                (t[3] = i[12]),
                (t[4] = i[1]),
                (t[5] = i[5]),
                (t[6] = i[9]),
                (t[7] = i[13]),
                (t[8] = i[2]),
                (t[9] = i[6]),
                (t[10] = i[10]),
                (t[11] = i[14]),
                (t[12] = i[3]),
                (t[13] = i[7]),
                (t[14] = i[11]),
                (t[15] = i[15]);
        return t;
    }
    function he(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = i[3],
            h = i[4],
            o = i[5],
            a = i[6],
            l = i[7],
            u = i[8],
            c = i[9],
            d = i[10],
            f = i[11],
            p = i[12],
            m = i[13],
            w = i[14],
            g = i[15],
            y = e * o - s * h,
            b = e * a - n * h,
            v = e * l - r * h,
            S = s * a - n * o,
            x = s * l - r * o,
            M = n * l - r * a,
            E = u * m - c * p,
            C = u * w - d * p,
            _ = u * g - f * p,
            T = c * w - d * m,
            I = c * g - f * m,
            P = d * g - f * w,
            G = y * P - b * I + v * T + S * _ - x * C + M * E;
        return G
            ? ((G = 1 / G),
              (t[0] = (o * P - a * I + l * T) * G),
              (t[1] = (n * I - s * P - r * T) * G),
              (t[2] = (m * M - w * x + g * S) * G),
              (t[3] = (d * x - c * M - f * S) * G),
              (t[4] = (a * _ - h * P - l * C) * G),
              (t[5] = (e * P - n * _ + r * C) * G),
              (t[6] = (w * v - p * M - g * b) * G),
              (t[7] = (u * M - d * v + f * b) * G),
              (t[8] = (h * I - o * _ + l * E) * G),
              (t[9] = (s * _ - e * I - r * E) * G),
              (t[10] = (p * x - m * v + g * y) * G),
              (t[11] = (c * v - u * x - f * y) * G),
              (t[12] = (o * C - h * T - a * E) * G),
              (t[13] = (e * T - s * C + n * E) * G),
              (t[14] = (m * b - p * S - w * y) * G),
              (t[15] = (u * S - c * b + d * y) * G),
              t)
            : null;
    }
    function oe(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = i[3],
            h = i[4],
            o = i[5],
            a = i[6],
            l = i[7],
            u = i[8],
            c = i[9],
            d = i[10],
            f = i[11],
            p = i[12],
            m = i[13],
            w = i[14],
            g = i[15],
            y = e * o - s * h,
            b = e * a - n * h,
            v = e * l - r * h,
            S = s * a - n * o,
            x = s * l - r * o,
            M = n * l - r * a,
            E = u * m - c * p,
            C = u * w - d * p,
            _ = u * g - f * p,
            T = c * w - d * m,
            I = c * g - f * m,
            P = d * g - f * w;
        return (
            (t[0] = o * P - a * I + l * T),
            (t[1] = n * I - s * P - r * T),
            (t[2] = m * M - w * x + g * S),
            (t[3] = d * x - c * M - f * S),
            (t[4] = a * _ - h * P - l * C),
            (t[5] = e * P - n * _ + r * C),
            (t[6] = w * v - p * M - g * b),
            (t[7] = u * M - d * v + f * b),
            (t[8] = h * I - o * _ + l * E),
            (t[9] = s * _ - e * I - r * E),
            (t[10] = p * x - m * v + g * y),
            (t[11] = c * v - u * x - f * y),
            (t[12] = o * C - h * T - a * E),
            (t[13] = e * T - s * C + n * E),
            (t[14] = m * b - p * S - w * y),
            (t[15] = u * S - c * b + d * y),
            t
        );
    }
    function ae(t) {
        var i = t[0],
            e = t[1],
            s = t[2],
            n = t[3],
            r = t[4],
            h = t[5],
            o = t[6],
            a = t[7],
            l = t[8],
            u = t[9],
            c = t[10],
            d = t[11],
            f = t[12],
            p = t[13],
            m = t[14],
            w = i * h - e * r,
            g = i * o - s * r,
            y = e * o - s * h,
            b = l * p - u * f,
            v = l * m - c * f,
            S = u * m - c * p;
        return (
            a * (i * S - e * v + s * b) -
            n * (r * S - h * v + o * b) +
            t[15] * (l * y - u * g + c * w) -
            d * (f * y - p * g + m * w)
        );
    }
    function le(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = i[6],
            u = i[7],
            c = i[8],
            d = i[9],
            f = i[10],
            p = i[11],
            m = i[12],
            w = i[13],
            g = i[14],
            y = i[15],
            b = e[0],
            v = e[1],
            S = e[2],
            x = e[3];
        return (
            (t[0] = b * s + v * o + S * c + x * m),
            (t[1] = b * n + v * a + S * d + x * w),
            (t[2] = b * r + v * l + S * f + x * g),
            (t[3] = b * h + v * u + S * p + x * y),
            (b = e[4]),
            (v = e[5]),
            (S = e[6]),
            (x = e[7]),
            (t[4] = b * s + v * o + S * c + x * m),
            (t[5] = b * n + v * a + S * d + x * w),
            (t[6] = b * r + v * l + S * f + x * g),
            (t[7] = b * h + v * u + S * p + x * y),
            (b = e[8]),
            (v = e[9]),
            (S = e[10]),
            (x = e[11]),
            (t[8] = b * s + v * o + S * c + x * m),
            (t[9] = b * n + v * a + S * d + x * w),
            (t[10] = b * r + v * l + S * f + x * g),
            (t[11] = b * h + v * u + S * p + x * y),
            (b = e[12]),
            (v = e[13]),
            (S = e[14]),
            (x = e[15]),
            (t[12] = b * s + v * o + S * c + x * m),
            (t[13] = b * n + v * a + S * d + x * w),
            (t[14] = b * r + v * l + S * f + x * g),
            (t[15] = b * h + v * u + S * p + x * y),
            t
        );
    }
    function ue(t, i, e) {
        var s,
            n,
            r,
            h,
            o,
            a,
            l,
            u,
            c,
            d,
            f,
            p,
            m = e[0],
            w = e[1],
            g = e[2];
        return (
            i === t
                ? ((t[12] = i[0] * m + i[4] * w + i[8] * g + i[12]),
                  (t[13] = i[1] * m + i[5] * w + i[9] * g + i[13]),
                  (t[14] = i[2] * m + i[6] * w + i[10] * g + i[14]),
                  (t[15] = i[3] * m + i[7] * w + i[11] * g + i[15]))
                : ((s = i[0]),
                  (n = i[1]),
                  (r = i[2]),
                  (h = i[3]),
                  (o = i[4]),
                  (a = i[5]),
                  (l = i[6]),
                  (u = i[7]),
                  (c = i[8]),
                  (d = i[9]),
                  (f = i[10]),
                  (p = i[11]),
                  (t[0] = s),
                  (t[1] = n),
                  (t[2] = r),
                  (t[3] = h),
                  (t[4] = o),
                  (t[5] = a),
                  (t[6] = l),
                  (t[7] = u),
                  (t[8] = c),
                  (t[9] = d),
                  (t[10] = f),
                  (t[11] = p),
                  (t[12] = s * m + o * w + c * g + i[12]),
                  (t[13] = n * m + a * w + d * g + i[13]),
                  (t[14] = r * m + l * w + f * g + i[14]),
                  (t[15] = h * m + u * w + p * g + i[15])),
            t
        );
    }
    function ce(t, i, e) {
        var s = e[0],
            n = e[1],
            r = e[2];
        return (
            (t[0] = i[0] * s),
            (t[1] = i[1] * s),
            (t[2] = i[2] * s),
            (t[3] = i[3] * s),
            (t[4] = i[4] * n),
            (t[5] = i[5] * n),
            (t[6] = i[6] * n),
            (t[7] = i[7] * n),
            (t[8] = i[8] * r),
            (t[9] = i[9] * r),
            (t[10] = i[10] * r),
            (t[11] = i[11] * r),
            (t[12] = i[12]),
            (t[13] = i[13]),
            (t[14] = i[14]),
            (t[15] = i[15]),
            t
        );
    }
    function de(i, e, s, n) {
        var r,
            h,
            o,
            a,
            l,
            u,
            c,
            d,
            f,
            p,
            m,
            w,
            g,
            y,
            b,
            v,
            S,
            x,
            M,
            E,
            C,
            _,
            T,
            I,
            P = n[0],
            G = n[1],
            A = n[2],
            R = Math.hypot(P, G, A);
        return R < t
            ? null
            : ((P *= R = 1 / R),
              (G *= R),
              (A *= R),
              (r = Math.sin(s)),
              (o = 1 - (h = Math.cos(s))),
              (a = e[0]),
              (l = e[1]),
              (u = e[2]),
              (c = e[3]),
              (d = e[4]),
              (f = e[5]),
              (p = e[6]),
              (m = e[7]),
              (w = e[8]),
              (g = e[9]),
              (y = e[10]),
              (b = e[11]),
              (v = P * P * o + h),
              (S = G * P * o + A * r),
              (x = A * P * o - G * r),
              (M = P * G * o - A * r),
              (E = G * G * o + h),
              (C = A * G * o + P * r),
              (_ = P * A * o + G * r),
              (T = G * A * o - P * r),
              (I = A * A * o + h),
              (i[0] = a * v + d * S + w * x),
              (i[1] = l * v + f * S + g * x),
              (i[2] = u * v + p * S + y * x),
              (i[3] = c * v + m * S + b * x),
              (i[4] = a * M + d * E + w * C),
              (i[5] = l * M + f * E + g * C),
              (i[6] = u * M + p * E + y * C),
              (i[7] = c * M + m * E + b * C),
              (i[8] = a * _ + d * T + w * I),
              (i[9] = l * _ + f * T + g * I),
              (i[10] = u * _ + p * T + y * I),
              (i[11] = c * _ + m * T + b * I),
              e !== i && ((i[12] = e[12]), (i[13] = e[13]), (i[14] = e[14]), (i[15] = e[15])),
              i);
    }
    function fe(t, i, e) {
        var s = Math.sin(e),
            n = Math.cos(e),
            r = i[4],
            h = i[5],
            o = i[6],
            a = i[7],
            l = i[8],
            u = i[9],
            c = i[10],
            d = i[11];
        return (
            i !== t &&
                ((t[0] = i[0]),
                (t[1] = i[1]),
                (t[2] = i[2]),
                (t[3] = i[3]),
                (t[12] = i[12]),
                (t[13] = i[13]),
                (t[14] = i[14]),
                (t[15] = i[15])),
            (t[4] = r * n + l * s),
            (t[5] = h * n + u * s),
            (t[6] = o * n + c * s),
            (t[7] = a * n + d * s),
            (t[8] = l * n - r * s),
            (t[9] = u * n - h * s),
            (t[10] = c * n - o * s),
            (t[11] = d * n - a * s),
            t
        );
    }
    function pe(t, i, e) {
        var s = Math.sin(e),
            n = Math.cos(e),
            r = i[0],
            h = i[1],
            o = i[2],
            a = i[3],
            l = i[8],
            u = i[9],
            c = i[10],
            d = i[11];
        return (
            i !== t &&
                ((t[4] = i[4]),
                (t[5] = i[5]),
                (t[6] = i[6]),
                (t[7] = i[7]),
                (t[12] = i[12]),
                (t[13] = i[13]),
                (t[14] = i[14]),
                (t[15] = i[15])),
            (t[0] = r * n - l * s),
            (t[1] = h * n - u * s),
            (t[2] = o * n - c * s),
            (t[3] = a * n - d * s),
            (t[8] = r * s + l * n),
            (t[9] = h * s + u * n),
            (t[10] = o * s + c * n),
            (t[11] = a * s + d * n),
            t
        );
    }
    function me(t, i, e) {
        var s = Math.sin(e),
            n = Math.cos(e),
            r = i[0],
            h = i[1],
            o = i[2],
            a = i[3],
            l = i[4],
            u = i[5],
            c = i[6],
            d = i[7];
        return (
            i !== t &&
                ((t[8] = i[8]),
                (t[9] = i[9]),
                (t[10] = i[10]),
                (t[11] = i[11]),
                (t[12] = i[12]),
                (t[13] = i[13]),
                (t[14] = i[14]),
                (t[15] = i[15])),
            (t[0] = r * n + l * s),
            (t[1] = h * n + u * s),
            (t[2] = o * n + c * s),
            (t[3] = a * n + d * s),
            (t[4] = l * n - r * s),
            (t[5] = u * n - h * s),
            (t[6] = c * n - o * s),
            (t[7] = d * n - a * s),
            t
        );
    }
    function we(t, i) {
        return (
            (t[0] = 1),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = 0),
            (t[5] = 1),
            (t[6] = 0),
            (t[7] = 0),
            (t[8] = 0),
            (t[9] = 0),
            (t[10] = 1),
            (t[11] = 0),
            (t[12] = i[0]),
            (t[13] = i[1]),
            (t[14] = i[2]),
            (t[15] = 1),
            t
        );
    }
    function ge(t, i) {
        return (
            (t[0] = i[0]),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = 0),
            (t[5] = i[1]),
            (t[6] = 0),
            (t[7] = 0),
            (t[8] = 0),
            (t[9] = 0),
            (t[10] = i[2]),
            (t[11] = 0),
            (t[12] = 0),
            (t[13] = 0),
            (t[14] = 0),
            (t[15] = 1),
            t
        );
    }
    function ye(i, e, s) {
        var n,
            r,
            h,
            o = s[0],
            a = s[1],
            l = s[2],
            u = Math.hypot(o, a, l);
        return u < t
            ? null
            : ((o *= u = 1 / u),
              (a *= u),
              (l *= u),
              (n = Math.sin(e)),
              (h = 1 - (r = Math.cos(e))),
              (i[0] = o * o * h + r),
              (i[1] = a * o * h + l * n),
              (i[2] = l * o * h - a * n),
              (i[3] = 0),
              (i[4] = o * a * h - l * n),
              (i[5] = a * a * h + r),
              (i[6] = l * a * h + o * n),
              (i[7] = 0),
              (i[8] = o * l * h + a * n),
              (i[9] = a * l * h - o * n),
              (i[10] = l * l * h + r),
              (i[11] = 0),
              (i[12] = 0),
              (i[13] = 0),
              (i[14] = 0),
              (i[15] = 1),
              i);
    }
    function be(t, i) {
        var e = Math.sin(i),
            s = Math.cos(i);
        return (
            (t[0] = 1),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = 0),
            (t[5] = s),
            (t[6] = e),
            (t[7] = 0),
            (t[8] = 0),
            (t[9] = -e),
            (t[10] = s),
            (t[11] = 0),
            (t[12] = 0),
            (t[13] = 0),
            (t[14] = 0),
            (t[15] = 1),
            t
        );
    }
    function ve(t, i) {
        var e = Math.sin(i),
            s = Math.cos(i);
        return (
            (t[0] = s),
            (t[1] = 0),
            (t[2] = -e),
            (t[3] = 0),
            (t[4] = 0),
            (t[5] = 1),
            (t[6] = 0),
            (t[7] = 0),
            (t[8] = e),
            (t[9] = 0),
            (t[10] = s),
            (t[11] = 0),
            (t[12] = 0),
            (t[13] = 0),
            (t[14] = 0),
            (t[15] = 1),
            t
        );
    }
    function Se(t, i) {
        var e = Math.sin(i),
            s = Math.cos(i);
        return (
            (t[0] = s),
            (t[1] = e),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = -e),
            (t[5] = s),
            (t[6] = 0),
            (t[7] = 0),
            (t[8] = 0),
            (t[9] = 0),
            (t[10] = 1),
            (t[11] = 0),
            (t[12] = 0),
            (t[13] = 0),
            (t[14] = 0),
            (t[15] = 1),
            t
        );
    }
    function xe(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = s + s,
            a = n + n,
            l = r + r,
            u = s * o,
            c = s * a,
            d = s * l,
            f = n * a,
            p = n * l,
            m = r * l,
            w = h * o,
            g = h * a,
            y = h * l;
        return (
            (t[0] = 1 - (f + m)),
            (t[1] = c + y),
            (t[2] = d - g),
            (t[3] = 0),
            (t[4] = c - y),
            (t[5] = 1 - (u + m)),
            (t[6] = p + w),
            (t[7] = 0),
            (t[8] = d + g),
            (t[9] = p - w),
            (t[10] = 1 - (u + f)),
            (t[11] = 0),
            (t[12] = e[0]),
            (t[13] = e[1]),
            (t[14] = e[2]),
            (t[15] = 1),
            t
        );
    }
    function Me(t, e) {
        var s = new i(3),
            n = -e[0],
            r = -e[1],
            h = -e[2],
            o = e[3],
            a = e[4],
            l = e[5],
            u = e[6],
            c = e[7],
            d = n * n + r * r + h * h + o * o;
        return (
            d > 0
                ? ((s[0] = (2 * (a * o + c * n + l * h - u * r)) / d),
                  (s[1] = (2 * (l * o + c * r + u * n - a * h)) / d),
                  (s[2] = (2 * (u * o + c * h + a * r - l * n)) / d))
                : ((s[0] = 2 * (a * o + c * n + l * h - u * r)),
                  (s[1] = 2 * (l * o + c * r + u * n - a * h)),
                  (s[2] = 2 * (u * o + c * h + a * r - l * n))),
            xe(t, e, s),
            t
        );
    }
    function Ee(t, i) {
        return (t[0] = i[12]), (t[1] = i[13]), (t[2] = i[14]), t;
    }
    function Ce(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = i[4],
            h = i[5],
            o = i[6],
            a = i[8],
            l = i[9],
            u = i[10];
        return (t[0] = Math.hypot(e, s, n)), (t[1] = Math.hypot(r, h, o)), (t[2] = Math.hypot(a, l, u)), t;
    }
    function _e(t, e) {
        var s = new i(3);
        Ce(s, e);
        var n = 1 / s[0],
            r = 1 / s[1],
            h = 1 / s[2],
            o = e[0] * n,
            a = e[1] * r,
            l = e[2] * h,
            u = e[4] * n,
            c = e[5] * r,
            d = e[6] * h,
            f = e[8] * n,
            p = e[9] * r,
            m = e[10] * h,
            w = o + c + m,
            g = 0;
        return (
            w > 0
                ? ((g = 2 * Math.sqrt(w + 1)),
                  (t[3] = 0.25 * g),
                  (t[0] = (d - p) / g),
                  (t[1] = (f - l) / g),
                  (t[2] = (a - u) / g))
                : o > c && o > m
                  ? ((g = 2 * Math.sqrt(1 + o - c - m)),
                    (t[3] = (d - p) / g),
                    (t[0] = 0.25 * g),
                    (t[1] = (a + u) / g),
                    (t[2] = (f + l) / g))
                  : c > m
                    ? ((g = 2 * Math.sqrt(1 + c - o - m)),
                      (t[3] = (f - l) / g),
                      (t[0] = (a + u) / g),
                      (t[1] = 0.25 * g),
                      (t[2] = (d + p) / g))
                    : ((g = 2 * Math.sqrt(1 + m - o - c)),
                      (t[3] = (a - u) / g),
                      (t[0] = (f + l) / g),
                      (t[1] = (d + p) / g),
                      (t[2] = 0.25 * g)),
            t
        );
    }
    function Te(t, i, e, s) {
        (i[0] = s[12]), (i[1] = s[13]), (i[2] = s[14]);
        var n = s[0],
            r = s[1],
            h = s[2],
            o = s[4],
            a = s[5],
            l = s[6],
            u = s[8],
            c = s[9],
            d = s[10];
        (e[0] = Math.hypot(n, r, h)), (e[1] = Math.hypot(o, a, l)), (e[2] = Math.hypot(u, c, d));
        var f = 1 / e[0],
            p = 1 / e[1],
            m = 1 / e[2],
            w = n * f,
            g = r * p,
            y = h * m,
            b = o * f,
            v = a * p,
            S = l * m,
            x = u * f,
            M = c * p,
            E = d * m,
            C = w + v + E,
            _ = 0;
        return (
            C > 0
                ? ((_ = 2 * Math.sqrt(C + 1)),
                  (t[3] = 0.25 * _),
                  (t[0] = (S - M) / _),
                  (t[1] = (x - y) / _),
                  (t[2] = (g - b) / _))
                : w > v && w > E
                  ? ((_ = 2 * Math.sqrt(1 + w - v - E)),
                    (t[3] = (S - M) / _),
                    (t[0] = 0.25 * _),
                    (t[1] = (g + b) / _),
                    (t[2] = (x + y) / _))
                  : v > E
                    ? ((_ = 2 * Math.sqrt(1 + v - w - E)),
                      (t[3] = (x - y) / _),
                      (t[0] = (g + b) / _),
                      (t[1] = 0.25 * _),
                      (t[2] = (S + M) / _))
                    : ((_ = 2 * Math.sqrt(1 + E - w - v)),
                      (t[3] = (g - b) / _),
                      (t[0] = (x + y) / _),
                      (t[1] = (S + M) / _),
                      (t[2] = 0.25 * _)),
            t
        );
    }
    function Ie(t, i, e, s) {
        var n = i[0],
            r = i[1],
            h = i[2],
            o = i[3],
            a = n + n,
            l = r + r,
            u = h + h,
            c = n * a,
            d = n * l,
            f = n * u,
            p = r * l,
            m = r * u,
            w = h * u,
            g = o * a,
            y = o * l,
            b = o * u,
            v = s[0],
            S = s[1],
            x = s[2];
        return (
            (t[0] = (1 - (p + w)) * v),
            (t[1] = (d + b) * v),
            (t[2] = (f - y) * v),
            (t[3] = 0),
            (t[4] = (d - b) * S),
            (t[5] = (1 - (c + w)) * S),
            (t[6] = (m + g) * S),
            (t[7] = 0),
            (t[8] = (f + y) * x),
            (t[9] = (m - g) * x),
            (t[10] = (1 - (c + p)) * x),
            (t[11] = 0),
            (t[12] = e[0]),
            (t[13] = e[1]),
            (t[14] = e[2]),
            (t[15] = 1),
            t
        );
    }
    function Pe(t, i, e, s, n) {
        var r = i[0],
            h = i[1],
            o = i[2],
            a = i[3],
            l = r + r,
            u = h + h,
            c = o + o,
            d = r * l,
            f = r * u,
            p = r * c,
            m = h * u,
            w = h * c,
            g = o * c,
            y = a * l,
            b = a * u,
            v = a * c,
            S = s[0],
            x = s[1],
            M = s[2],
            E = n[0],
            C = n[1],
            _ = n[2],
            T = (1 - (m + g)) * S,
            I = (f + v) * S,
            P = (p - b) * S,
            G = (f - v) * x,
            A = (1 - (d + g)) * x,
            R = (w + y) * x,
            k = (p + b) * M,
            O = (w - y) * M,
            D = (1 - (d + m)) * M;
        return (
            (t[0] = T),
            (t[1] = I),
            (t[2] = P),
            (t[3] = 0),
            (t[4] = G),
            (t[5] = A),
            (t[6] = R),
            (t[7] = 0),
            (t[8] = k),
            (t[9] = O),
            (t[10] = D),
            (t[11] = 0),
            (t[12] = e[0] + E - (T * E + G * C + k * _)),
            (t[13] = e[1] + C - (I * E + A * C + O * _)),
            (t[14] = e[2] + _ - (P * E + R * C + D * _)),
            (t[15] = 1),
            t
        );
    }
    function Ge(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = i[3],
            h = e + e,
            o = s + s,
            a = n + n,
            l = e * h,
            u = s * h,
            c = s * o,
            d = n * h,
            f = n * o,
            p = n * a,
            m = r * h,
            w = r * o,
            g = r * a;
        return (
            (t[0] = 1 - c - p),
            (t[1] = u + g),
            (t[2] = d - w),
            (t[3] = 0),
            (t[4] = u - g),
            (t[5] = 1 - l - p),
            (t[6] = f + m),
            (t[7] = 0),
            (t[8] = d + w),
            (t[9] = f - m),
            (t[10] = 1 - l - c),
            (t[11] = 0),
            (t[12] = 0),
            (t[13] = 0),
            (t[14] = 0),
            (t[15] = 1),
            t
        );
    }
    function Ae(t, i, e, s, n, r, h) {
        var o = 1 / (e - i),
            a = 1 / (n - s),
            l = 1 / (r - h);
        return (
            (t[0] = 2 * r * o),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = 0),
            (t[5] = 2 * r * a),
            (t[6] = 0),
            (t[7] = 0),
            (t[8] = (e + i) * o),
            (t[9] = (n + s) * a),
            (t[10] = (h + r) * l),
            (t[11] = -1),
            (t[12] = 0),
            (t[13] = 0),
            (t[14] = h * r * 2 * l),
            (t[15] = 0),
            t
        );
    }
    function Re(t, i, e, s, n) {
        var r = 1 / Math.tan(i / 2);
        if (
            ((t[0] = r / e),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = 0),
            (t[5] = r),
            (t[6] = 0),
            (t[7] = 0),
            (t[8] = 0),
            (t[9] = 0),
            (t[11] = -1),
            (t[12] = 0),
            (t[13] = 0),
            (t[15] = 0),
            null != n && n !== 1 / 0)
        ) {
            var h = 1 / (s - n);
            (t[10] = (n + s) * h), (t[14] = 2 * n * s * h);
        } else (t[10] = -1), (t[14] = -2 * s);
        return t;
    }
    var p = Re;
    function ke(t, i, e, s, n) {
        var r = 1 / Math.tan(i / 2);
        if (
            ((t[0] = r / e),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = 0),
            (t[5] = r),
            (t[6] = 0),
            (t[7] = 0),
            (t[8] = 0),
            (t[9] = 0),
            (t[11] = -1),
            (t[12] = 0),
            (t[13] = 0),
            (t[15] = 0),
            null != n && n !== 1 / 0)
        ) {
            var h = 1 / (s - n);
            (t[10] = n * h), (t[14] = n * s * h);
        } else (t[10] = -1), (t[14] = -s);
        return t;
    }
    function Oe(t, i, e, s) {
        var n = Math.tan((i.upDegrees * Math.PI) / 180),
            r = Math.tan((i.downDegrees * Math.PI) / 180),
            h = Math.tan((i.leftDegrees * Math.PI) / 180),
            o = Math.tan((i.rightDegrees * Math.PI) / 180),
            a = 2 / (h + o),
            l = 2 / (n + r);
        return (
            (t[0] = a),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = 0),
            (t[5] = l),
            (t[6] = 0),
            (t[7] = 0),
            (t[8] = -(h - o) * a * 0.5),
            (t[9] = (n - r) * l * 0.5),
            (t[10] = s / (e - s)),
            (t[11] = -1),
            (t[12] = 0),
            (t[13] = 0),
            (t[14] = (s * e) / (e - s)),
            (t[15] = 0),
            t
        );
    }
    function De(t, i, e, s, n, r, h) {
        var o = 1 / (i - e),
            a = 1 / (s - n),
            l = 1 / (r - h);
        return (
            (t[0] = -2 * o),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = 0),
            (t[5] = -2 * a),
            (t[6] = 0),
            (t[7] = 0),
            (t[8] = 0),
            (t[9] = 0),
            (t[10] = 2 * l),
            (t[11] = 0),
            (t[12] = (i + e) * o),
            (t[13] = (n + s) * a),
            (t[14] = (h + r) * l),
            (t[15] = 1),
            t
        );
    }
    var m = De;
    function Fe(t, i, e, s, n, r, h) {
        var o = 1 / (i - e),
            a = 1 / (s - n),
            l = 1 / (r - h);
        return (
            (t[0] = -2 * o),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 0),
            (t[4] = 0),
            (t[5] = -2 * a),
            (t[6] = 0),
            (t[7] = 0),
            (t[8] = 0),
            (t[9] = 0),
            (t[10] = l),
            (t[11] = 0),
            (t[12] = (i + e) * o),
            (t[13] = (n + s) * a),
            (t[14] = r * l),
            (t[15] = 1),
            t
        );
    }
    function Le(i, e, s, n) {
        var r,
            h,
            o,
            a,
            l,
            u,
            c,
            d,
            f,
            p,
            m = e[0],
            w = e[1],
            g = e[2],
            y = n[0],
            b = n[1],
            v = n[2],
            S = s[0],
            x = s[1],
            M = s[2];
        return Math.abs(m - S) < t && Math.abs(w - x) < t && Math.abs(g - M) < t
            ? ne(i)
            : ((c = m - S),
              (d = w - x),
              (f = g - M),
              (r = b * (f *= p = 1 / Math.hypot(c, d, f)) - v * (d *= p)),
              (h = v * (c *= p) - y * f),
              (o = y * d - b * c),
              (p = Math.hypot(r, h, o)) ? ((r *= p = 1 / p), (h *= p), (o *= p)) : ((r = 0), (h = 0), (o = 0)),
              (a = d * o - f * h),
              (l = f * r - c * o),
              (u = c * h - d * r),
              (p = Math.hypot(a, l, u)) ? ((a *= p = 1 / p), (l *= p), (u *= p)) : ((a = 0), (l = 0), (u = 0)),
              (i[0] = r),
              (i[1] = a),
              (i[2] = c),
              (i[3] = 0),
              (i[4] = h),
              (i[5] = l),
              (i[6] = d),
              (i[7] = 0),
              (i[8] = o),
              (i[9] = u),
              (i[10] = f),
              (i[11] = 0),
              (i[12] = -(r * m + h * w + o * g)),
              (i[13] = -(a * m + l * w + u * g)),
              (i[14] = -(c * m + d * w + f * g)),
              (i[15] = 1),
              i);
    }
    function Be(t, i, e, s) {
        var n = i[0],
            r = i[1],
            h = i[2],
            o = s[0],
            a = s[1],
            l = s[2],
            u = n - e[0],
            c = r - e[1],
            d = h - e[2],
            f = u * u + c * c + d * d;
        f > 0 && ((u *= f = 1 / Math.sqrt(f)), (c *= f), (d *= f));
        var p = a * d - l * c,
            m = l * u - o * d,
            w = o * c - a * u;
        return (
            (f = p * p + m * m + w * w) > 0 && ((p *= f = 1 / Math.sqrt(f)), (m *= f), (w *= f)),
            (t[0] = p),
            (t[1] = m),
            (t[2] = w),
            (t[3] = 0),
            (t[4] = c * w - d * m),
            (t[5] = d * p - u * w),
            (t[6] = u * m - c * p),
            (t[7] = 0),
            (t[8] = u),
            (t[9] = c),
            (t[10] = d),
            (t[11] = 0),
            (t[12] = n),
            (t[13] = r),
            (t[14] = h),
            (t[15] = 1),
            t
        );
    }
    function Ue(t) {
        return (
            "mat4(" +
            t[0] +
            ", " +
            t[1] +
            ", " +
            t[2] +
            ", " +
            t[3] +
            ", " +
            t[4] +
            ", " +
            t[5] +
            ", " +
            t[6] +
            ", " +
            t[7] +
            ", " +
            t[8] +
            ", " +
            t[9] +
            ", " +
            t[10] +
            ", " +
            t[11] +
            ", " +
            t[12] +
            ", " +
            t[13] +
            ", " +
            t[14] +
            ", " +
            t[15] +
            ")"
        );
    }
    function Ne(t) {
        return Math.hypot(
            t[0],
            t[1],
            t[2],
            t[3],
            t[4],
            t[5],
            t[6],
            t[7],
            t[8],
            t[9],
            t[10],
            t[11],
            t[12],
            t[13],
            t[14],
            t[15]
        );
    }
    function je(t, i, e) {
        return (
            (t[0] = i[0] + e[0]),
            (t[1] = i[1] + e[1]),
            (t[2] = i[2] + e[2]),
            (t[3] = i[3] + e[3]),
            (t[4] = i[4] + e[4]),
            (t[5] = i[5] + e[5]),
            (t[6] = i[6] + e[6]),
            (t[7] = i[7] + e[7]),
            (t[8] = i[8] + e[8]),
            (t[9] = i[9] + e[9]),
            (t[10] = i[10] + e[10]),
            (t[11] = i[11] + e[11]),
            (t[12] = i[12] + e[12]),
            (t[13] = i[13] + e[13]),
            (t[14] = i[14] + e[14]),
            (t[15] = i[15] + e[15]),
            t
        );
    }
    function $e(t, i, e) {
        return (
            (t[0] = i[0] - e[0]),
            (t[1] = i[1] - e[1]),
            (t[2] = i[2] - e[2]),
            (t[3] = i[3] - e[3]),
            (t[4] = i[4] - e[4]),
            (t[5] = i[5] - e[5]),
            (t[6] = i[6] - e[6]),
            (t[7] = i[7] - e[7]),
            (t[8] = i[8] - e[8]),
            (t[9] = i[9] - e[9]),
            (t[10] = i[10] - e[10]),
            (t[11] = i[11] - e[11]),
            (t[12] = i[12] - e[12]),
            (t[13] = i[13] - e[13]),
            (t[14] = i[14] - e[14]),
            (t[15] = i[15] - e[15]),
            t
        );
    }
    function ze(t, i, e) {
        return (
            (t[0] = i[0] * e),
            (t[1] = i[1] * e),
            (t[2] = i[2] * e),
            (t[3] = i[3] * e),
            (t[4] = i[4] * e),
            (t[5] = i[5] * e),
            (t[6] = i[6] * e),
            (t[7] = i[7] * e),
            (t[8] = i[8] * e),
            (t[9] = i[9] * e),
            (t[10] = i[10] * e),
            (t[11] = i[11] * e),
            (t[12] = i[12] * e),
            (t[13] = i[13] * e),
            (t[14] = i[14] * e),
            (t[15] = i[15] * e),
            t
        );
    }
    function Ve(t, i, e, s) {
        return (
            (t[0] = i[0] + e[0] * s),
            (t[1] = i[1] + e[1] * s),
            (t[2] = i[2] + e[2] * s),
            (t[3] = i[3] + e[3] * s),
            (t[4] = i[4] + e[4] * s),
            (t[5] = i[5] + e[5] * s),
            (t[6] = i[6] + e[6] * s),
            (t[7] = i[7] + e[7] * s),
            (t[8] = i[8] + e[8] * s),
            (t[9] = i[9] + e[9] * s),
            (t[10] = i[10] + e[10] * s),
            (t[11] = i[11] + e[11] * s),
            (t[12] = i[12] + e[12] * s),
            (t[13] = i[13] + e[13] * s),
            (t[14] = i[14] + e[14] * s),
            (t[15] = i[15] + e[15] * s),
            t
        );
    }
    function We(t, i) {
        return (
            t[0] === i[0] &&
            t[1] === i[1] &&
            t[2] === i[2] &&
            t[3] === i[3] &&
            t[4] === i[4] &&
            t[5] === i[5] &&
            t[6] === i[6] &&
            t[7] === i[7] &&
            t[8] === i[8] &&
            t[9] === i[9] &&
            t[10] === i[10] &&
            t[11] === i[11] &&
            t[12] === i[12] &&
            t[13] === i[13] &&
            t[14] === i[14] &&
            t[15] === i[15]
        );
    }
    function He(i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = i[6],
            u = i[7],
            c = i[8],
            d = i[9],
            f = i[10],
            p = i[11],
            m = i[12],
            w = i[13],
            g = i[14],
            y = i[15],
            b = e[0],
            v = e[1],
            S = e[2],
            x = e[3],
            M = e[4],
            E = e[5],
            C = e[6],
            _ = e[7],
            T = e[8],
            I = e[9],
            P = e[10],
            G = e[11],
            A = e[12],
            R = e[13],
            k = e[14],
            O = e[15];
        return (
            Math.abs(s - b) <= t * Math.max(1, Math.abs(s), Math.abs(b)) &&
            Math.abs(n - v) <= t * Math.max(1, Math.abs(n), Math.abs(v)) &&
            Math.abs(r - S) <= t * Math.max(1, Math.abs(r), Math.abs(S)) &&
            Math.abs(h - x) <= t * Math.max(1, Math.abs(h), Math.abs(x)) &&
            Math.abs(o - M) <= t * Math.max(1, Math.abs(o), Math.abs(M)) &&
            Math.abs(a - E) <= t * Math.max(1, Math.abs(a), Math.abs(E)) &&
            Math.abs(l - C) <= t * Math.max(1, Math.abs(l), Math.abs(C)) &&
            Math.abs(u - _) <= t * Math.max(1, Math.abs(u), Math.abs(_)) &&
            Math.abs(c - T) <= t * Math.max(1, Math.abs(c), Math.abs(T)) &&
            Math.abs(d - I) <= t * Math.max(1, Math.abs(d), Math.abs(I)) &&
            Math.abs(f - P) <= t * Math.max(1, Math.abs(f), Math.abs(P)) &&
            Math.abs(p - G) <= t * Math.max(1, Math.abs(p), Math.abs(G)) &&
            Math.abs(m - A) <= t * Math.max(1, Math.abs(m), Math.abs(A)) &&
            Math.abs(w - R) <= t * Math.max(1, Math.abs(w), Math.abs(R)) &&
            Math.abs(g - k) <= t * Math.max(1, Math.abs(g), Math.abs(k)) &&
            Math.abs(y - O) <= t * Math.max(1, Math.abs(y), Math.abs(O))
        );
    }
    var w = le,
        g = $e,
        y = Object.freeze({
            __proto__: null,
            create: Qi,
            clone: te,
            mn: ie,
            rMe: ee,
            set: se,
            identity: ne,
            hMe: re,
            oMe: he,
            aMe: oe,
            lMe: ae,
            multiply: le,
            translate: ue,
            scale: ce,
            rotate: de,
            CMe: fe,
            _Me: pe,
            TMe: me,
            bMe: we,
            cMe: ge,
            uMe: ye,
            IMe: be,
            PMe: ve,
            GMe: Se,
            AMe: xe,
            RMe: Me,
            kMe: Ee,
            OMe: Ce,
            DMe: _e,
            FMe: Te,
            LMe: Ie,
            BMe: Pe,
            xMe: Ge,
            UMe: Ae,
            NMe: Re,
            perspective: p,
            jMe: ke,
            $Me: Oe,
            zMe: De,
            VMe: m,
            WMe: Fe,
            HMe: Le,
            KMe: Be,
            dMe: Ue,
            fMe: Ne,
            add: je,
            mMe: $e,
            gMe: ze,
            yMe: Ve,
            wMe: We,
            equals: He,
            mul: w,
            sub: g,
        });
    function Ke() {
        var t = new i(3);
        return i != Float32Array && ((t[0] = 0), (t[1] = 0), (t[2] = 0)), t;
    }
    function qe(t) {
        var e = new i(3);
        return (e[0] = t[0]), (e[1] = t[1]), (e[2] = t[2]), e;
    }
    function Xe(t) {
        var i = t[0],
            e = t[1],
            s = t[2];
        return Math.hypot(i, e, s);
    }
    function Ye(t, e, s) {
        var n = new i(3);
        return (n[0] = t), (n[1] = e), (n[2] = s), n;
    }
    function Je(t, i) {
        return (t[0] = i[0]), (t[1] = i[1]), (t[2] = i[2]), t;
    }
    function Ze(t, i, e, s) {
        return (t[0] = i), (t[1] = e), (t[2] = s), t;
    }
    function Qe(t, i, e) {
        return (t[0] = i[0] + e[0]), (t[1] = i[1] + e[1]), (t[2] = i[2] + e[2]), t;
    }
    function ts(t, i, e) {
        return (t[0] = i[0] - e[0]), (t[1] = i[1] - e[1]), (t[2] = i[2] - e[2]), t;
    }
    function is(t, i, e) {
        return (t[0] = i[0] * e[0]), (t[1] = i[1] * e[1]), (t[2] = i[2] * e[2]), t;
    }
    function es(t, i, e) {
        return (t[0] = i[0] / e[0]), (t[1] = i[1] / e[1]), (t[2] = i[2] / e[2]), t;
    }
    function ss(t, i) {
        return (t[0] = Math.ceil(i[0])), (t[1] = Math.ceil(i[1])), (t[2] = Math.ceil(i[2])), t;
    }
    function ns(t, i) {
        return (t[0] = Math.floor(i[0])), (t[1] = Math.floor(i[1])), (t[2] = Math.floor(i[2])), t;
    }
    function rs(t, i, e) {
        return (t[0] = Math.min(i[0], e[0])), (t[1] = Math.min(i[1], e[1])), (t[2] = Math.min(i[2], e[2])), t;
    }
    function hs(t, i, e) {
        return (t[0] = Math.max(i[0], e[0])), (t[1] = Math.max(i[1], e[1])), (t[2] = Math.max(i[2], e[2])), t;
    }
    function os(t, i) {
        return (t[0] = Math.round(i[0])), (t[1] = Math.round(i[1])), (t[2] = Math.round(i[2])), t;
    }
    function as(t, i, e) {
        return (t[0] = i[0] * e), (t[1] = i[1] * e), (t[2] = i[2] * e), t;
    }
    function ls(t, i, e, s) {
        return (t[0] = i[0] + e[0] * s), (t[1] = i[1] + e[1] * s), (t[2] = i[2] + e[2] * s), t;
    }
    function us(t, i) {
        var e = i[0] - t[0],
            s = i[1] - t[1],
            n = i[2] - t[2];
        return Math.hypot(e, s, n);
    }
    function cs(t, i) {
        var e = i[0] - t[0],
            s = i[1] - t[1],
            n = i[2] - t[2];
        return e * e + s * s + n * n;
    }
    function ds(t) {
        var i = t[0],
            e = t[1],
            s = t[2];
        return i * i + e * e + s * s;
    }
    function fs(t, i) {
        return (t[0] = -i[0]), (t[1] = -i[1]), (t[2] = -i[2]), t;
    }
    function ps(t, i) {
        return (t[0] = 1 / i[0]), (t[1] = 1 / i[1]), (t[2] = 1 / i[2]), t;
    }
    function ms(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = e * e + s * s + n * n;
        return r > 0 && (r = 1 / Math.sqrt(r)), (t[0] = i[0] * r), (t[1] = i[1] * r), (t[2] = i[2] * r), t;
    }
    function ws(t, i) {
        return t[0] * i[0] + t[1] * i[1] + t[2] * i[2];
    }
    function gs(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = e[0],
            o = e[1],
            a = e[2];
        return (t[0] = n * a - r * o), (t[1] = r * h - s * a), (t[2] = s * o - n * h), t;
    }
    function ys(t, i, e, s) {
        var n = i[0],
            r = i[1],
            h = i[2];
        return (t[0] = n + s * (e[0] - n)), (t[1] = r + s * (e[1] - r)), (t[2] = h + s * (e[2] - h)), t;
    }
    function bs(t, i, e, s) {
        var n = Math.acos(Math.min(Math.max(ws(i, e), -1), 1)),
            r = Math.sin(n),
            h = Math.sin((1 - s) * n) / r,
            o = Math.sin(s * n) / r;
        return (t[0] = h * i[0] + o * e[0]), (t[1] = h * i[1] + o * e[1]), (t[2] = h * i[2] + o * e[2]), t;
    }
    function vs(t, i, e, s, n, r) {
        var h = r * r,
            o = h * (2 * r - 3) + 1,
            a = h * (r - 2) + r,
            l = h * (r - 1),
            u = h * (3 - 2 * r);
        return (
            (t[0] = i[0] * o + e[0] * a + s[0] * l + n[0] * u),
            (t[1] = i[1] * o + e[1] * a + s[1] * l + n[1] * u),
            (t[2] = i[2] * o + e[2] * a + s[2] * l + n[2] * u),
            t
        );
    }
    function Ss(t, i, e, s, n, r) {
        var h = 1 - r,
            o = h * h,
            a = r * r,
            l = o * h,
            u = 3 * r * o,
            c = 3 * a * h,
            d = a * r;
        return (
            (t[0] = i[0] * l + e[0] * u + s[0] * c + n[0] * d),
            (t[1] = i[1] * l + e[1] * u + s[1] * c + n[1] * d),
            (t[2] = i[2] * l + e[2] * u + s[2] * c + n[2] * d),
            t
        );
    }
    function xs(t, i) {
        i = i || 1;
        var s = 2 * e() * Math.PI,
            n = 2 * e() - 1,
            r = Math.sqrt(1 - n * n) * i;
        return (t[0] = Math.cos(s) * r), (t[1] = Math.sin(s) * r), (t[2] = n * i), t;
    }
    function Ms(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = e[3] * s + e[7] * n + e[11] * r + e[15];
        return (
            (h = h || 1),
            (t[0] = (e[0] * s + e[4] * n + e[8] * r + e[12]) / h),
            (t[1] = (e[1] * s + e[5] * n + e[9] * r + e[13]) / h),
            (t[2] = (e[2] * s + e[6] * n + e[10] * r + e[14]) / h),
            t
        );
    }
    function Es(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2];
        return (
            (t[0] = s * e[0] + n * e[3] + r * e[6]),
            (t[1] = s * e[1] + n * e[4] + r * e[7]),
            (t[2] = s * e[2] + n * e[5] + r * e[8]),
            t
        );
    }
    function Cs(t, i, e) {
        var s = e[0],
            n = e[1],
            r = e[2],
            h = e[3],
            o = i[0],
            a = i[1],
            l = i[2],
            u = n * l - r * a,
            c = r * o - s * l,
            d = s * a - n * o,
            f = n * d - r * c,
            p = r * u - s * d,
            m = s * c - n * u,
            w = 2 * h;
        return (
            (u *= w),
            (c *= w),
            (d *= w),
            (f *= 2),
            (p *= 2),
            (m *= 2),
            (t[0] = o + u + f),
            (t[1] = a + c + p),
            (t[2] = l + d + m),
            t
        );
    }
    function _s(t, i, e, s) {
        var n = [],
            r = [];
        return (
            (n[0] = i[0] - e[0]),
            (n[1] = i[1] - e[1]),
            (n[2] = i[2] - e[2]),
            (r[0] = n[0]),
            (r[1] = n[1] * Math.cos(s) - n[2] * Math.sin(s)),
            (r[2] = n[1] * Math.sin(s) + n[2] * Math.cos(s)),
            (t[0] = r[0] + e[0]),
            (t[1] = r[1] + e[1]),
            (t[2] = r[2] + e[2]),
            t
        );
    }
    function Ts(t, i, e, s) {
        var n = [],
            r = [];
        return (
            (n[0] = i[0] - e[0]),
            (n[1] = i[1] - e[1]),
            (n[2] = i[2] - e[2]),
            (r[0] = n[2] * Math.sin(s) + n[0] * Math.cos(s)),
            (r[1] = n[1]),
            (r[2] = n[2] * Math.cos(s) - n[0] * Math.sin(s)),
            (t[0] = r[0] + e[0]),
            (t[1] = r[1] + e[1]),
            (t[2] = r[2] + e[2]),
            t
        );
    }
    function Is(t, i, e, s) {
        var n = [],
            r = [];
        return (
            (n[0] = i[0] - e[0]),
            (n[1] = i[1] - e[1]),
            (n[2] = i[2] - e[2]),
            (r[0] = n[0] * Math.cos(s) - n[1] * Math.sin(s)),
            (r[1] = n[0] * Math.sin(s) + n[1] * Math.cos(s)),
            (r[2] = n[2]),
            (t[0] = r[0] + e[0]),
            (t[1] = r[1] + e[1]),
            (t[2] = r[2] + e[2]),
            t
        );
    }
    function Ps(t, i) {
        var e = t[0],
            s = t[1],
            n = t[2],
            r = i[0],
            h = i[1],
            o = i[2],
            a = Math.sqrt((e * e + s * s + n * n) * (r * r + h * h + o * o)),
            l = a && ws(t, i) / a;
        return Math.acos(Math.min(Math.max(l, -1), 1));
    }
    function Gs(t) {
        return (t[0] = 0), (t[1] = 0), (t[2] = 0), t;
    }
    function As(t) {
        return "vec3(" + t[0] + ", " + t[1] + ", " + t[2] + ")";
    }
    function Rs(t, i) {
        return t[0] === i[0] && t[1] === i[1] && t[2] === i[2];
    }
    function ks(i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = e[0],
            o = e[1],
            a = e[2];
        return (
            Math.abs(s - h) <= t * Math.max(1, Math.abs(s), Math.abs(h)) &&
            Math.abs(n - o) <= t * Math.max(1, Math.abs(n), Math.abs(o)) &&
            Math.abs(r - a) <= t * Math.max(1, Math.abs(r), Math.abs(a))
        );
    }
    var b = ts,
        v = is,
        S = es,
        x = us,
        M = cs,
        E = Xe,
        C = ds,
        _ =
            ((_t = Ke()),
            function (t, i, e, s, n, r) {
                var h, o;
                for (i || (i = 3), e || (e = 0), o = s ? Math.min(s * i + e, t.length) : t.length, h = e; h < o; h += i)
                    (_t[0] = t[h]),
                        (_t[1] = t[h + 1]),
                        (_t[2] = t[h + 2]),
                        n(_t, _t, r),
                        (t[h] = _t[0]),
                        (t[h + 1] = _t[1]),
                        (t[h + 2] = _t[2]);
                return t;
            }),
        T = Object.freeze({
            __proto__: null,
            create: Ke,
            clone: qe,
            length: Xe,
            rMe: Ye,
            mn: Je,
            set: Ze,
            add: Qe,
            mMe: ts,
            multiply: is,
            Tg: es,
            ceil: ss,
            floor: ns,
            min: rs,
            max: hs,
            round: os,
            scale: as,
            qMe: ls,
            XMe: us,
            YMe: cs,
            JMe: ds,
            ZMe: fs,
            inverse: ps,
            normalize: ms,
            dot: ws,
            QMe: gs,
            bt: ys,
            tTe: bs,
            iTe: vs,
            eTe: Ss,
            random: xs,
            sTe: Ms,
            nTe: Es,
            rTe: Cs,
            CMe: _s,
            _Me: Ts,
            TMe: Is,
            angle: Ps,
            hTe: Gs,
            dMe: As,
            wMe: Rs,
            equals: ks,
            sub: b,
            mul: v,
            div: S,
            oTe: x,
            aTe: M,
            lTe: E,
            uTe: C,
            forEach: _,
        });
    function Os() {
        var t = new i(4);
        return i != Float32Array && ((t[0] = 0), (t[1] = 0), (t[2] = 0), (t[3] = 0)), t;
    }
    function Ds(t) {
        var e = new i(4);
        return (e[0] = t[0]), (e[1] = t[1]), (e[2] = t[2]), (e[3] = t[3]), e;
    }
    function Fs(t, e, s, n) {
        var r = new i(4);
        return (r[0] = t), (r[1] = e), (r[2] = s), (r[3] = n), r;
    }
    function Ls(t, i) {
        return (t[0] = i[0]), (t[1] = i[1]), (t[2] = i[2]), (t[3] = i[3]), t;
    }
    function Bs(t, i, e, s, n) {
        return (t[0] = i), (t[1] = e), (t[2] = s), (t[3] = n), t;
    }
    function Us(t, i, e) {
        return (t[0] = i[0] + e[0]), (t[1] = i[1] + e[1]), (t[2] = i[2] + e[2]), (t[3] = i[3] + e[3]), t;
    }
    function Ns(t, i, e) {
        return (t[0] = i[0] - e[0]), (t[1] = i[1] - e[1]), (t[2] = i[2] - e[2]), (t[3] = i[3] - e[3]), t;
    }
    function js(t, i, e) {
        return (t[0] = i[0] * e[0]), (t[1] = i[1] * e[1]), (t[2] = i[2] * e[2]), (t[3] = i[3] * e[3]), t;
    }
    function $s(t, i, e) {
        return (t[0] = i[0] / e[0]), (t[1] = i[1] / e[1]), (t[2] = i[2] / e[2]), (t[3] = i[3] / e[3]), t;
    }
    function zs(t, i) {
        return (
            (t[0] = Math.ceil(i[0])), (t[1] = Math.ceil(i[1])), (t[2] = Math.ceil(i[2])), (t[3] = Math.ceil(i[3])), t
        );
    }
    function Vs(t, i) {
        return (
            (t[0] = Math.floor(i[0])),
            (t[1] = Math.floor(i[1])),
            (t[2] = Math.floor(i[2])),
            (t[3] = Math.floor(i[3])),
            t
        );
    }
    function Ws(t, i, e) {
        return (
            (t[0] = Math.min(i[0], e[0])),
            (t[1] = Math.min(i[1], e[1])),
            (t[2] = Math.min(i[2], e[2])),
            (t[3] = Math.min(i[3], e[3])),
            t
        );
    }
    function Hs(t, i, e) {
        return (
            (t[0] = Math.max(i[0], e[0])),
            (t[1] = Math.max(i[1], e[1])),
            (t[2] = Math.max(i[2], e[2])),
            (t[3] = Math.max(i[3], e[3])),
            t
        );
    }
    function Ks(t, i) {
        return (
            (t[0] = Math.round(i[0])),
            (t[1] = Math.round(i[1])),
            (t[2] = Math.round(i[2])),
            (t[3] = Math.round(i[3])),
            t
        );
    }
    function qs(t, i, e) {
        return (t[0] = i[0] * e), (t[1] = i[1] * e), (t[2] = i[2] * e), (t[3] = i[3] * e), t;
    }
    function Xs(t, i, e, s) {
        return (
            (t[0] = i[0] + e[0] * s), (t[1] = i[1] + e[1] * s), (t[2] = i[2] + e[2] * s), (t[3] = i[3] + e[3] * s), t
        );
    }
    function Ys(t, i) {
        var e = i[0] - t[0],
            s = i[1] - t[1],
            n = i[2] - t[2],
            r = i[3] - t[3];
        return Math.hypot(e, s, n, r);
    }
    function Js(t, i) {
        var e = i[0] - t[0],
            s = i[1] - t[1],
            n = i[2] - t[2],
            r = i[3] - t[3];
        return e * e + s * s + n * n + r * r;
    }
    function Zs(t) {
        var i = t[0],
            e = t[1],
            s = t[2],
            n = t[3];
        return Math.hypot(i, e, s, n);
    }
    function Qs(t) {
        var i = t[0],
            e = t[1],
            s = t[2],
            n = t[3];
        return i * i + e * e + s * s + n * n;
    }
    function tn(t, i) {
        return (t[0] = -i[0]), (t[1] = -i[1]), (t[2] = -i[2]), (t[3] = -i[3]), t;
    }
    function en(t, i) {
        return (t[0] = 1 / i[0]), (t[1] = 1 / i[1]), (t[2] = 1 / i[2]), (t[3] = 1 / i[3]), t;
    }
    function sn(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = i[3],
            h = e * e + s * s + n * n + r * r;
        return h > 0 && (h = 1 / Math.sqrt(h)), (t[0] = e * h), (t[1] = s * h), (t[2] = n * h), (t[3] = r * h), t;
    }
    function nn(t, i) {
        return t[0] * i[0] + t[1] * i[1] + t[2] * i[2] + t[3] * i[3];
    }
    function rn(t, i, e, s) {
        var n = e[0] * s[1] - e[1] * s[0],
            r = e[0] * s[2] - e[2] * s[0],
            h = e[0] * s[3] - e[3] * s[0],
            o = e[1] * s[2] - e[2] * s[1],
            a = e[1] * s[3] - e[3] * s[1],
            l = e[2] * s[3] - e[3] * s[2],
            u = i[0],
            c = i[1],
            d = i[2],
            f = i[3];
        return (
            (t[0] = c * l - d * a + f * o),
            (t[1] = -u * l + d * h - f * r),
            (t[2] = u * a - c * h + f * n),
            (t[3] = -u * o + c * r - d * n),
            t
        );
    }
    function hn(t, i, e, s) {
        var n = i[0],
            r = i[1],
            h = i[2],
            o = i[3];
        return (
            (t[0] = n + s * (e[0] - n)),
            (t[1] = r + s * (e[1] - r)),
            (t[2] = h + s * (e[2] - h)),
            (t[3] = o + s * (e[3] - o)),
            t
        );
    }
    function on(t, i) {
        var s, n, r, h, o, a;
        i = i || 1;
        do {
            o = (s = 2 * e() - 1) * s + (n = 2 * e() - 1) * n;
        } while (o >= 1);
        do {
            a = (r = 2 * e() - 1) * r + (h = 2 * e() - 1) * h;
        } while (a >= 1);
        var l = Math.sqrt((1 - o) / a);
        return (t[0] = i * s), (t[1] = i * n), (t[2] = i * r * l), (t[3] = i * h * l), t;
    }
    function an(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3];
        return (
            (t[0] = e[0] * s + e[4] * n + e[8] * r + e[12] * h),
            (t[1] = e[1] * s + e[5] * n + e[9] * r + e[13] * h),
            (t[2] = e[2] * s + e[6] * n + e[10] * r + e[14] * h),
            (t[3] = e[3] * s + e[7] * n + e[11] * r + e[15] * h),
            t
        );
    }
    function ln(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = e[0],
            o = e[1],
            a = e[2],
            l = e[3],
            u = l * s + o * r - a * n,
            c = l * n + a * s - h * r,
            d = l * r + h * n - o * s,
            f = -h * s - o * n - a * r;
        return (
            (t[0] = u * l + f * -h + c * -a - d * -o),
            (t[1] = c * l + f * -o + d * -h - u * -a),
            (t[2] = d * l + f * -a + u * -o - c * -h),
            (t[3] = i[3]),
            t
        );
    }
    function un(t) {
        return (t[0] = 0), (t[1] = 0), (t[2] = 0), (t[3] = 0), t;
    }
    function cn(t) {
        return "vec4(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + t[3] + ")";
    }
    function dn(t, i) {
        return t[0] === i[0] && t[1] === i[1] && t[2] === i[2] && t[3] === i[3];
    }
    function fn(i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = e[0],
            a = e[1],
            l = e[2],
            u = e[3];
        return (
            Math.abs(s - o) <= t * Math.max(1, Math.abs(s), Math.abs(o)) &&
            Math.abs(n - a) <= t * Math.max(1, Math.abs(n), Math.abs(a)) &&
            Math.abs(r - l) <= t * Math.max(1, Math.abs(r), Math.abs(l)) &&
            Math.abs(h - u) <= t * Math.max(1, Math.abs(h), Math.abs(u))
        );
    }
    var I = Ns,
        P = js,
        G = $s,
        A = Ys,
        R = Js,
        k = Zs,
        O = Qs,
        D = (function () {
            var t = Os();
            return function (i, e, s, n, r, h) {
                var o, a;
                for (e || (e = 4), s || (s = 0), a = n ? Math.min(n * e + s, i.length) : i.length, o = s; o < a; o += e)
                    (t[0] = i[o]),
                        (t[1] = i[o + 1]),
                        (t[2] = i[o + 2]),
                        (t[3] = i[o + 3]),
                        r(t, t, h),
                        (i[o] = t[0]),
                        (i[o + 1] = t[1]),
                        (i[o + 2] = t[2]),
                        (i[o + 3] = t[3]);
                return i;
            };
        })(),
        F = Object.freeze({
            __proto__: null,
            create: Os,
            clone: Ds,
            rMe: Fs,
            mn: Ls,
            set: Bs,
            add: Us,
            mMe: Ns,
            multiply: js,
            Tg: $s,
            ceil: zs,
            floor: Vs,
            min: Ws,
            max: Hs,
            round: Ks,
            scale: qs,
            qMe: Xs,
            XMe: Ys,
            YMe: Js,
            length: Zs,
            JMe: Qs,
            ZMe: tn,
            inverse: en,
            normalize: sn,
            dot: nn,
            QMe: rn,
            bt: hn,
            random: on,
            sTe: an,
            rTe: ln,
            hTe: un,
            dMe: cn,
            wMe: dn,
            equals: fn,
            sub: I,
            mul: P,
            div: G,
            oTe: A,
            aTe: R,
            lTe: k,
            uTe: O,
            forEach: D,
        });
    function pn() {
        var t = new i(4);
        return i != Float32Array && ((t[0] = 0), (t[1] = 0), (t[2] = 0)), (t[3] = 1), t;
    }
    function mn(t) {
        return (t[0] = 0), (t[1] = 0), (t[2] = 0), (t[3] = 1), t;
    }
    function wn(t, i, e) {
        e *= 0.5;
        var s = Math.sin(e);
        return (t[0] = s * i[0]), (t[1] = s * i[1]), (t[2] = s * i[2]), (t[3] = Math.cos(e)), t;
    }
    function gn(i, e) {
        var s = 2 * Math.acos(e[3]),
            n = Math.sin(s / 2);
        return (
            n > t ? ((i[0] = e[0] / n), (i[1] = e[1] / n), (i[2] = e[2] / n)) : ((i[0] = 1), (i[1] = 0), (i[2] = 0)), s
        );
    }
    function yn(t, i) {
        var e = V(t, i);
        return Math.acos(2 * e * e - 1);
    }
    function bn(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = e[0],
            a = e[1],
            l = e[2],
            u = e[3];
        return (
            (t[0] = s * u + h * o + n * l - r * a),
            (t[1] = n * u + h * a + r * o - s * l),
            (t[2] = r * u + h * l + s * a - n * o),
            (t[3] = h * u - s * o - n * a - r * l),
            t
        );
    }
    function vn(t, i, e) {
        e *= 0.5;
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = Math.sin(e),
            a = Math.cos(e);
        return (t[0] = s * a + h * o), (t[1] = n * a + r * o), (t[2] = r * a - n * o), (t[3] = h * a - s * o), t;
    }
    function Sn(t, i, e) {
        e *= 0.5;
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = Math.sin(e),
            a = Math.cos(e);
        return (t[0] = s * a - r * o), (t[1] = n * a + h * o), (t[2] = r * a + s * o), (t[3] = h * a - n * o), t;
    }
    function xn(t, i, e) {
        e *= 0.5;
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = Math.sin(e),
            a = Math.cos(e);
        return (t[0] = s * a + n * o), (t[1] = n * a - s * o), (t[2] = r * a + h * o), (t[3] = h * a - r * o), t;
    }
    function Mn(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2];
        return (t[0] = e), (t[1] = s), (t[2] = n), (t[3] = Math.sqrt(Math.abs(1 - e * e - s * s - n * n))), t;
    }
    function En(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = i[3],
            h = Math.sqrt(e * e + s * s + n * n),
            o = Math.exp(r),
            a = h > 0 ? (o * Math.sin(h)) / h : 0;
        return (t[0] = e * a), (t[1] = s * a), (t[2] = n * a), (t[3] = o * Math.cos(h)), t;
    }
    function Cn(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = i[3],
            h = Math.sqrt(e * e + s * s + n * n),
            o = h > 0 ? Math.atan2(h, r) / h : 0;
        return (
            (t[0] = e * o), (t[1] = s * o), (t[2] = n * o), (t[3] = 0.5 * Math.log(e * e + s * s + n * n + r * r)), t
        );
    }
    function _n(t, i, e) {
        return Cn(t, i), z(t, t, e), En(t, t), t;
    }
    function Tn(i, e, s, n) {
        var r,
            h,
            o,
            a,
            l,
            u = e[0],
            c = e[1],
            d = e[2],
            f = e[3],
            p = s[0],
            m = s[1],
            w = s[2],
            g = s[3];
        return (
            (h = u * p + c * m + d * w + f * g) < 0 && ((h = -h), (p = -p), (m = -m), (w = -w), (g = -g)),
            1 - h > t
                ? ((r = Math.acos(h)), (o = Math.sin(r)), (a = Math.sin((1 - n) * r) / o), (l = Math.sin(n * r) / o))
                : ((a = 1 - n), (l = n)),
            (i[0] = a * u + l * p),
            (i[1] = a * c + l * m),
            (i[2] = a * d + l * w),
            (i[3] = a * f + l * g),
            i
        );
    }
    function In(t) {
        var i = e(),
            s = e(),
            n = e(),
            r = Math.sqrt(1 - i),
            h = Math.sqrt(i);
        return (
            (t[0] = r * Math.sin(2 * Math.PI * s)),
            (t[1] = r * Math.cos(2 * Math.PI * s)),
            (t[2] = h * Math.sin(2 * Math.PI * n)),
            (t[3] = h * Math.cos(2 * Math.PI * n)),
            t
        );
    }
    function Pn(t, i) {
        var e = i[0],
            s = i[1],
            n = i[2],
            r = i[3],
            h = e * e + s * s + n * n + r * r,
            o = h ? 1 / h : 0;
        return (t[0] = -e * o), (t[1] = -s * o), (t[2] = -n * o), (t[3] = r * o), t;
    }
    function Gn(t, i) {
        return (t[0] = -i[0]), (t[1] = -i[1]), (t[2] = -i[2]), (t[3] = i[3]), t;
    }
    function An(t, i) {
        var e,
            s = i[0] + i[4] + i[8];
        if (s > 0)
            (e = Math.sqrt(s + 1)),
                (t[3] = 0.5 * e),
                (e = 0.5 / e),
                (t[0] = (i[5] - i[7]) * e),
                (t[1] = (i[6] - i[2]) * e),
                (t[2] = (i[1] - i[3]) * e);
        else {
            var n = 0;
            i[4] > i[0] && (n = 1), i[8] > i[3 * n + n] && (n = 2);
            var r = (n + 1) % 3,
                h = (n + 2) % 3;
            (e = Math.sqrt(i[3 * n + n] - i[3 * r + r] - i[3 * h + h] + 1)),
                (t[n] = 0.5 * e),
                (e = 0.5 / e),
                (t[3] = (i[3 * r + h] - i[3 * h + r]) * e),
                (t[r] = (i[3 * r + n] + i[3 * n + r]) * e),
                (t[h] = (i[3 * h + n] + i[3 * n + h]) * e);
        }
        return t;
    }
    function Rn(t, i, e, s) {
        var n = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : "zyx",
            r = Math.PI / 360;
        (i *= r), (s *= r), (e *= r);
        var h = Math.sin(i),
            o = Math.cos(i),
            a = Math.sin(e),
            l = Math.cos(e),
            u = Math.sin(s),
            c = Math.cos(s);
        switch (n) {
            case "xyz":
                (t[0] = h * l * c + o * a * u),
                    (t[1] = o * a * c - h * l * u),
                    (t[2] = o * l * u + h * a * c),
                    (t[3] = o * l * c - h * a * u);
                break;
            case "xzy":
                (t[0] = h * l * c - o * a * u),
                    (t[1] = o * a * c - h * l * u),
                    (t[2] = o * l * u + h * a * c),
                    (t[3] = o * l * c + h * a * u);
                break;
            case "yxz":
                (t[0] = h * l * c + o * a * u),
                    (t[1] = o * a * c - h * l * u),
                    (t[2] = o * l * u - h * a * c),
                    (t[3] = o * l * c + h * a * u);
                break;
            case "yzx":
                (t[0] = h * l * c + o * a * u),
                    (t[1] = o * a * c + h * l * u),
                    (t[2] = o * l * u - h * a * c),
                    (t[3] = o * l * c - h * a * u);
                break;
            case "zxy":
                (t[0] = h * l * c - o * a * u),
                    (t[1] = o * a * c + h * l * u),
                    (t[2] = o * l * u + h * a * c),
                    (t[3] = o * l * c - h * a * u);
                break;
            case "zyx":
                (t[0] = h * l * c - o * a * u),
                    (t[1] = o * a * c + h * l * u),
                    (t[2] = o * l * u - h * a * c),
                    (t[3] = o * l * c + h * a * u);
                break;
            default:
                throw new Error("Unknown angle order " + n);
        }
        return t;
    }
    function kn(t) {
        return "quat(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + t[3] + ")";
    }
    var L = Ds,
        B = Fs,
        U = Ls,
        N = Bs,
        j = Us,
        $ = bn,
        z = qs,
        V = nn,
        W = hn,
        H = Zs,
        K = H,
        q = Qs,
        X = q,
        Y = sn,
        J = dn;
    function On(t, i) {
        return Math.abs(nn(t, i)) >= 0.999999;
    }
    var Z =
            ((Mt = Ke()),
            (Et = Ye(1, 0, 0)),
            (Ct = Ye(0, 1, 0)),
            function (t, i, e) {
                var s = ws(i, e);
                return s < -0.999999
                    ? (gs(Mt, Et, i), E(Mt) < 1e-6 && gs(Mt, Ct, i), ms(Mt, Mt), wn(t, Mt, Math.PI), t)
                    : s > 0.999999
                      ? ((t[0] = 0), (t[1] = 0), (t[2] = 0), (t[3] = 1), t)
                      : (gs(Mt, i, e), (t[0] = Mt[0]), (t[1] = Mt[1]), (t[2] = Mt[2]), (t[3] = 1 + s), Y(t, t));
            }),
        Q =
            ((St = pn()),
            (xt = pn()),
            function (t, i, e, s, n, r) {
                return Tn(St, i, n, r), Tn(xt, e, s, r), Tn(t, St, xt, 2 * r * (1 - r)), t;
            }),
        tt =
            ((vt = Mi()),
            function (t, i, e, s) {
                return (
                    (vt[0] = e[0]),
                    (vt[3] = e[1]),
                    (vt[6] = e[2]),
                    (vt[1] = s[0]),
                    (vt[4] = s[1]),
                    (vt[7] = s[2]),
                    (vt[2] = -i[0]),
                    (vt[5] = -i[1]),
                    (vt[8] = -i[2]),
                    Y(t, An(t, vt))
                );
            }),
        it = Object.freeze({
            __proto__: null,
            create: pn,
            identity: mn,
            cTe: wn,
            dTe: gn,
            fTe: yn,
            multiply: bn,
            CMe: vn,
            _Me: Sn,
            TMe: xn,
            pTe: Mn,
            exp: En,
            ln: Cn,
            pow: _n,
            tTe: Tn,
            random: In,
            oMe: Pn,
            mTe: Gn,
            wTe: An,
            gTe: Rn,
            dMe: kn,
            clone: L,
            rMe: B,
            mn: U,
            set: N,
            add: j,
            mul: $,
            scale: z,
            dot: V,
            bt: W,
            length: H,
            lTe: K,
            JMe: q,
            uTe: X,
            normalize: Y,
            wMe: J,
            equals: On,
            yTe: Z,
            bTe: Q,
            vTe: tt,
        });
    function Dn() {
        var t = new i(8);
        return (
            i != Float32Array && ((t[0] = 0), (t[1] = 0), (t[2] = 0), (t[4] = 0), (t[5] = 0), (t[6] = 0), (t[7] = 0)),
            (t[3] = 1),
            t
        );
    }
    function Fn(t) {
        var e = new i(8);
        return (
            (e[0] = t[0]),
            (e[1] = t[1]),
            (e[2] = t[2]),
            (e[3] = t[3]),
            (e[4] = t[4]),
            (e[5] = t[5]),
            (e[6] = t[6]),
            (e[7] = t[7]),
            e
        );
    }
    function Ln(t, e, s, n, r, h, o, a) {
        var l = new i(8);
        return (l[0] = t), (l[1] = e), (l[2] = s), (l[3] = n), (l[4] = r), (l[5] = h), (l[6] = o), (l[7] = a), l;
    }
    function Bn(t, e, s, n, r, h, o) {
        var a = new i(8);
        (a[0] = t), (a[1] = e), (a[2] = s), (a[3] = n);
        var l = 0.5 * r,
            u = 0.5 * h,
            c = 0.5 * o;
        return (
            (a[4] = l * n + u * s - c * e),
            (a[5] = u * n + c * t - l * s),
            (a[6] = c * n + l * e - u * t),
            (a[7] = -l * t - u * e - c * s),
            a
        );
    }
    function Un(t, i, e) {
        var s = 0.5 * e[0],
            n = 0.5 * e[1],
            r = 0.5 * e[2],
            h = i[0],
            o = i[1],
            a = i[2],
            l = i[3];
        return (
            (t[0] = h),
            (t[1] = o),
            (t[2] = a),
            (t[3] = l),
            (t[4] = s * l + n * a - r * o),
            (t[5] = n * l + r * h - s * a),
            (t[6] = r * l + s * o - n * h),
            (t[7] = -s * h - n * o - r * a),
            t
        );
    }
    function Nn(t, i) {
        return (
            (t[0] = 0),
            (t[1] = 0),
            (t[2] = 0),
            (t[3] = 1),
            (t[4] = 0.5 * i[0]),
            (t[5] = 0.5 * i[1]),
            (t[6] = 0.5 * i[2]),
            (t[7] = 0),
            t
        );
    }
    function jn(t, i) {
        return (
            (t[0] = i[0]),
            (t[1] = i[1]),
            (t[2] = i[2]),
            (t[3] = i[3]),
            (t[4] = 0),
            (t[5] = 0),
            (t[6] = 0),
            (t[7] = 0),
            t
        );
    }
    function $n(t, e) {
        var s = pn();
        _e(s, e);
        var n = new i(3);
        return Ee(n, e), Un(t, s, n), t;
    }
    function zn(t, i) {
        return (
            (t[0] = i[0]),
            (t[1] = i[1]),
            (t[2] = i[2]),
            (t[3] = i[3]),
            (t[4] = i[4]),
            (t[5] = i[5]),
            (t[6] = i[6]),
            (t[7] = i[7]),
            t
        );
    }
    function Vn(t) {
        return (t[0] = 0), (t[1] = 0), (t[2] = 0), (t[3] = 1), (t[4] = 0), (t[5] = 0), (t[6] = 0), (t[7] = 0), t;
    }
    function Wn(t, i, e, s, n, r, h, o, a) {
        return (t[0] = i), (t[1] = e), (t[2] = s), (t[3] = n), (t[4] = r), (t[5] = h), (t[6] = o), (t[7] = a), t;
    }
    var et = U;
    function Hn(t, i) {
        return (t[0] = i[4]), (t[1] = i[5]), (t[2] = i[6]), (t[3] = i[7]), t;
    }
    var st = U;
    function Kn(t, i) {
        return (t[4] = i[0]), (t[5] = i[1]), (t[6] = i[2]), (t[7] = i[3]), t;
    }
    function qn(t, i) {
        var e = i[4],
            s = i[5],
            n = i[6],
            r = i[7],
            h = -i[0],
            o = -i[1],
            a = -i[2],
            l = i[3];
        return (
            (t[0] = 2 * (e * l + r * h + s * a - n * o)),
            (t[1] = 2 * (s * l + r * o + n * h - e * a)),
            (t[2] = 2 * (n * l + r * a + e * o - s * h)),
            t
        );
    }
    function Xn(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = 0.5 * e[0],
            a = 0.5 * e[1],
            l = 0.5 * e[2],
            u = i[4],
            c = i[5],
            d = i[6],
            f = i[7];
        return (
            (t[0] = s),
            (t[1] = n),
            (t[2] = r),
            (t[3] = h),
            (t[4] = h * o + n * l - r * a + u),
            (t[5] = h * a + r * o - s * l + c),
            (t[6] = h * l + s * a - n * o + d),
            (t[7] = -s * o - n * a - r * l + f),
            t
        );
    }
    function Yn(t, i, e) {
        var s = -i[0],
            n = -i[1],
            r = -i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = i[6],
            u = i[7],
            c = o * h + u * s + a * r - l * n,
            d = a * h + u * n + l * s - o * r,
            f = l * h + u * r + o * n - a * s,
            p = u * h - o * s - a * n - l * r;
        return (
            vn(t, i, e),
            (s = t[0]),
            (n = t[1]),
            (r = t[2]),
            (h = t[3]),
            (t[4] = c * h + p * s + d * r - f * n),
            (t[5] = d * h + p * n + f * s - c * r),
            (t[6] = f * h + p * r + c * n - d * s),
            (t[7] = p * h - c * s - d * n - f * r),
            t
        );
    }
    function Jn(t, i, e) {
        var s = -i[0],
            n = -i[1],
            r = -i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = i[6],
            u = i[7],
            c = o * h + u * s + a * r - l * n,
            d = a * h + u * n + l * s - o * r,
            f = l * h + u * r + o * n - a * s,
            p = u * h - o * s - a * n - l * r;
        return (
            Sn(t, i, e),
            (s = t[0]),
            (n = t[1]),
            (r = t[2]),
            (h = t[3]),
            (t[4] = c * h + p * s + d * r - f * n),
            (t[5] = d * h + p * n + f * s - c * r),
            (t[6] = f * h + p * r + c * n - d * s),
            (t[7] = p * h - c * s - d * n - f * r),
            t
        );
    }
    function Zn(t, i, e) {
        var s = -i[0],
            n = -i[1],
            r = -i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = i[6],
            u = i[7],
            c = o * h + u * s + a * r - l * n,
            d = a * h + u * n + l * s - o * r,
            f = l * h + u * r + o * n - a * s,
            p = u * h - o * s - a * n - l * r;
        return (
            xn(t, i, e),
            (s = t[0]),
            (n = t[1]),
            (r = t[2]),
            (h = t[3]),
            (t[4] = c * h + p * s + d * r - f * n),
            (t[5] = d * h + p * n + f * s - c * r),
            (t[6] = f * h + p * r + c * n - d * s),
            (t[7] = p * h - c * s - d * n - f * r),
            t
        );
    }
    function Qn(t, i, e) {
        var s = e[0],
            n = e[1],
            r = e[2],
            h = e[3],
            o = i[0],
            a = i[1],
            l = i[2],
            u = i[3];
        return (
            (t[0] = o * h + u * s + a * r - l * n),
            (t[1] = a * h + u * n + l * s - o * r),
            (t[2] = l * h + u * r + o * n - a * s),
            (t[3] = u * h - o * s - a * n - l * r),
            (o = i[4]),
            (a = i[5]),
            (l = i[6]),
            (u = i[7]),
            (t[4] = o * h + u * s + a * r - l * n),
            (t[5] = a * h + u * n + l * s - o * r),
            (t[6] = l * h + u * r + o * n - a * s),
            (t[7] = u * h - o * s - a * n - l * r),
            t
        );
    }
    function tr(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = e[0],
            a = e[1],
            l = e[2],
            u = e[3];
        return (
            (t[0] = s * u + h * o + n * l - r * a),
            (t[1] = n * u + h * a + r * o - s * l),
            (t[2] = r * u + h * l + s * a - n * o),
            (t[3] = h * u - s * o - n * a - r * l),
            (o = e[4]),
            (a = e[5]),
            (l = e[6]),
            (u = e[7]),
            (t[4] = s * u + h * o + n * l - r * a),
            (t[5] = n * u + h * a + r * o - s * l),
            (t[6] = r * u + h * l + s * a - n * o),
            (t[7] = h * u - s * o - n * a - r * l),
            t
        );
    }
    function ir(i, e, s, n) {
        if (Math.abs(n) < t) return zn(i, e);
        var r = Math.hypot(s[0], s[1], s[2]);
        n *= 0.5;
        var h = Math.sin(n),
            o = (h * s[0]) / r,
            a = (h * s[1]) / r,
            l = (h * s[2]) / r,
            u = Math.cos(n),
            c = e[0],
            d = e[1],
            f = e[2],
            p = e[3];
        (i[0] = c * u + p * o + d * l - f * a),
            (i[1] = d * u + p * a + f * o - c * l),
            (i[2] = f * u + p * l + c * a - d * o),
            (i[3] = p * u - c * o - d * a - f * l);
        var m = e[4],
            w = e[5],
            g = e[6],
            y = e[7];
        return (
            (i[4] = m * u + y * o + w * l - g * a),
            (i[5] = w * u + y * a + g * o - m * l),
            (i[6] = g * u + y * l + m * a - w * o),
            (i[7] = y * u - m * o - w * a - g * l),
            i
        );
    }
    function er(t, i, e) {
        return (
            (t[0] = i[0] + e[0]),
            (t[1] = i[1] + e[1]),
            (t[2] = i[2] + e[2]),
            (t[3] = i[3] + e[3]),
            (t[4] = i[4] + e[4]),
            (t[5] = i[5] + e[5]),
            (t[6] = i[6] + e[6]),
            (t[7] = i[7] + e[7]),
            t
        );
    }
    function sr(t, i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = e[4],
            a = e[5],
            l = e[6],
            u = e[7],
            c = i[4],
            d = i[5],
            f = i[6],
            p = i[7],
            m = e[0],
            w = e[1],
            g = e[2],
            y = e[3];
        return (
            (t[0] = s * y + h * m + n * g - r * w),
            (t[1] = n * y + h * w + r * m - s * g),
            (t[2] = r * y + h * g + s * w - n * m),
            (t[3] = h * y - s * m - n * w - r * g),
            (t[4] = s * u + h * o + n * l - r * a + c * y + p * m + d * g - f * w),
            (t[5] = n * u + h * a + r * o - s * l + d * y + p * w + f * m - c * g),
            (t[6] = r * u + h * l + s * a - n * o + f * y + p * g + c * w - d * m),
            (t[7] = h * u - s * o - n * a - r * l + p * y - c * m - d * w - f * g),
            t
        );
    }
    var nt = sr;
    function nr(t, i, e) {
        return (
            (t[0] = i[0] * e),
            (t[1] = i[1] * e),
            (t[2] = i[2] * e),
            (t[3] = i[3] * e),
            (t[4] = i[4] * e),
            (t[5] = i[5] * e),
            (t[6] = i[6] * e),
            (t[7] = i[7] * e),
            t
        );
    }
    var rt = V;
    function rr(t, i, e, s) {
        var n = 1 - s;
        return (
            rt(i, e) < 0 && (s = -s),
            (t[0] = i[0] * n + e[0] * s),
            (t[1] = i[1] * n + e[1] * s),
            (t[2] = i[2] * n + e[2] * s),
            (t[3] = i[3] * n + e[3] * s),
            (t[4] = i[4] * n + e[4] * s),
            (t[5] = i[5] * n + e[5] * s),
            (t[6] = i[6] * n + e[6] * s),
            (t[7] = i[7] * n + e[7] * s),
            t
        );
    }
    function hr(t, i) {
        var e = at(i);
        return (
            (t[0] = -i[0] / e),
            (t[1] = -i[1] / e),
            (t[2] = -i[2] / e),
            (t[3] = i[3] / e),
            (t[4] = -i[4] / e),
            (t[5] = -i[5] / e),
            (t[6] = -i[6] / e),
            (t[7] = i[7] / e),
            t
        );
    }
    function or(t, i) {
        return (
            (t[0] = -i[0]),
            (t[1] = -i[1]),
            (t[2] = -i[2]),
            (t[3] = i[3]),
            (t[4] = -i[4]),
            (t[5] = -i[5]),
            (t[6] = -i[6]),
            (t[7] = i[7]),
            t
        );
    }
    var ht = H,
        ot = ht,
        at = q,
        lt = at;
    function ar(t, i) {
        var e = at(i);
        if (e > 0) {
            e = Math.sqrt(e);
            var s = i[0] / e,
                n = i[1] / e,
                r = i[2] / e,
                h = i[3] / e,
                o = i[4],
                a = i[5],
                l = i[6],
                u = i[7],
                c = s * o + n * a + r * l + h * u;
            (t[0] = s),
                (t[1] = n),
                (t[2] = r),
                (t[3] = h),
                (t[4] = (o - s * c) / e),
                (t[5] = (a - n * c) / e),
                (t[6] = (l - r * c) / e),
                (t[7] = (u - h * c) / e);
        }
        return t;
    }
    function lr(t) {
        return (
            "quat2(" +
            t[0] +
            ", " +
            t[1] +
            ", " +
            t[2] +
            ", " +
            t[3] +
            ", " +
            t[4] +
            ", " +
            t[5] +
            ", " +
            t[6] +
            ", " +
            t[7] +
            ")"
        );
    }
    function ur(t, i) {
        return (
            t[0] === i[0] &&
            t[1] === i[1] &&
            t[2] === i[2] &&
            t[3] === i[3] &&
            t[4] === i[4] &&
            t[5] === i[5] &&
            t[6] === i[6] &&
            t[7] === i[7]
        );
    }
    function cr(i, e) {
        var s = i[0],
            n = i[1],
            r = i[2],
            h = i[3],
            o = i[4],
            a = i[5],
            l = i[6],
            u = i[7],
            c = e[0],
            d = e[1],
            f = e[2],
            p = e[3],
            m = e[4],
            w = e[5],
            g = e[6],
            y = e[7];
        return (
            Math.abs(s - c) <= t * Math.max(1, Math.abs(s), Math.abs(c)) &&
            Math.abs(n - d) <= t * Math.max(1, Math.abs(n), Math.abs(d)) &&
            Math.abs(r - f) <= t * Math.max(1, Math.abs(r), Math.abs(f)) &&
            Math.abs(h - p) <= t * Math.max(1, Math.abs(h), Math.abs(p)) &&
            Math.abs(o - m) <= t * Math.max(1, Math.abs(o), Math.abs(m)) &&
            Math.abs(a - w) <= t * Math.max(1, Math.abs(a), Math.abs(w)) &&
            Math.abs(l - g) <= t * Math.max(1, Math.abs(l), Math.abs(g)) &&
            Math.abs(u - y) <= t * Math.max(1, Math.abs(u), Math.abs(y))
        );
    }
    var ut = Object.freeze({
        __proto__: null,
        create: Dn,
        clone: Fn,
        rMe: Ln,
        STe: Bn,
        AMe: Un,
        bMe: Nn,
        uMe: jn,
        vMe: $n,
        mn: zn,
        identity: Vn,
        set: Wn,
        xTe: et,
        MTe: Hn,
        ETe: st,
        CTe: Kn,
        kMe: qn,
        translate: Xn,
        CMe: Yn,
        _Me: Jn,
        TMe: Zn,
        _Te: Qn,
        TTe: tr,
        ITe: ir,
        add: er,
        multiply: sr,
        mul: nt,
        scale: nr,
        dot: rt,
        bt: rr,
        oMe: hr,
        mTe: or,
        length: ht,
        lTe: ot,
        JMe: at,
        uTe: lt,
        normalize: ar,
        dMe: lr,
        wMe: ur,
        equals: cr,
    });
    function dr() {
        var t = new i(2);
        return i != Float32Array && ((t[0] = 0), (t[1] = 0)), t;
    }
    function fr(t) {
        var e = new i(2);
        return (e[0] = t[0]), (e[1] = t[1]), e;
    }
    function pr(t, e) {
        var s = new i(2);
        return (s[0] = t), (s[1] = e), s;
    }
    function mr(t, i) {
        return (t[0] = i[0]), (t[1] = i[1]), t;
    }
    function wr(t, i, e) {
        return (t[0] = i), (t[1] = e), t;
    }
    function gr(t, i, e) {
        return (t[0] = i[0] + e[0]), (t[1] = i[1] + e[1]), t;
    }
    function yr(t, i, e) {
        return (t[0] = i[0] - e[0]), (t[1] = i[1] - e[1]), t;
    }
    function br(t, i, e) {
        return (t[0] = i[0] * e[0]), (t[1] = i[1] * e[1]), t;
    }
    function vr(t, i, e) {
        return (t[0] = i[0] / e[0]), (t[1] = i[1] / e[1]), t;
    }
    function Sr(t, i) {
        return (t[0] = Math.ceil(i[0])), (t[1] = Math.ceil(i[1])), t;
    }
    function xr(t, i) {
        return (t[0] = Math.floor(i[0])), (t[1] = Math.floor(i[1])), t;
    }
    function Mr(t, i, e) {
        return (t[0] = Math.min(i[0], e[0])), (t[1] = Math.min(i[1], e[1])), t;
    }
    function Er(t, i, e) {
        return (t[0] = Math.max(i[0], e[0])), (t[1] = Math.max(i[1], e[1])), t;
    }
    function Cr(t, i) {
        return (t[0] = Math.round(i[0])), (t[1] = Math.round(i[1])), t;
    }
    function _r(t, i, e) {
        return (t[0] = i[0] * e), (t[1] = i[1] * e), t;
    }
    function Tr(t, i, e, s) {
        return (t[0] = i[0] + e[0] * s), (t[1] = i[1] + e[1] * s), t;
    }
    function Ir(t, i) {
        var e = i[0] - t[0],
            s = i[1] - t[1];
        return Math.hypot(e, s);
    }
    function Pr(t, i) {
        var e = i[0] - t[0],
            s = i[1] - t[1];
        return e * e + s * s;
    }
    function Gr(t) {
        var i = t[0],
            e = t[1];
        return Math.hypot(i, e);
    }
    function Ar(t) {
        var i = t[0],
            e = t[1];
        return i * i + e * e;
    }
    function Rr(t, i) {
        return (t[0] = -i[0]), (t[1] = -i[1]), t;
    }
    function kr(t, i) {
        return (t[0] = 1 / i[0]), (t[1] = 1 / i[1]), t;
    }
    function Or(t, i) {
        var e = i[0],
            s = i[1],
            n = e * e + s * s;
        return n > 0 && (n = 1 / Math.sqrt(n)), (t[0] = i[0] * n), (t[1] = i[1] * n), t;
    }
    function Dr(t, i) {
        return t[0] * i[0] + t[1] * i[1];
    }
    function Fr(t, i, e) {
        var s = i[0] * e[1] - i[1] * e[0];
        return (t[0] = t[1] = 0), (t[2] = s), t;
    }
    function Lr(t, i, e, s) {
        var n = i[0],
            r = i[1];
        return (t[0] = n + s * (e[0] - n)), (t[1] = r + s * (e[1] - r)), t;
    }
    function Br(t, i) {
        i = i || 1;
        var s = 2 * e() * Math.PI;
        return (t[0] = Math.cos(s) * i), (t[1] = Math.sin(s) * i), t;
    }
    function Ur(t, i, e) {
        var s = i[0],
            n = i[1];
        return (t[0] = e[0] * s + e[2] * n), (t[1] = e[1] * s + e[3] * n), t;
    }
    function Nr(t, i, e) {
        var s = i[0],
            n = i[1];
        return (t[0] = e[0] * s + e[2] * n + e[4]), (t[1] = e[1] * s + e[3] * n + e[5]), t;
    }
    function jr(t, i, e) {
        var s = i[0],
            n = i[1];
        return (t[0] = e[0] * s + e[3] * n + e[6]), (t[1] = e[1] * s + e[4] * n + e[7]), t;
    }
    function $r(t, i, e) {
        var s = i[0],
            n = i[1];
        return (t[0] = e[0] * s + e[4] * n + e[12]), (t[1] = e[1] * s + e[5] * n + e[13]), t;
    }
    function zr(t, i, e, s) {
        var n = i[0] - e[0],
            r = i[1] - e[1],
            h = Math.sin(s),
            o = Math.cos(s);
        return (t[0] = n * o - r * h + e[0]), (t[1] = n * h + r * o + e[1]), t;
    }
    function Vr(t, i) {
        var e = t[0],
            s = t[1],
            n = i[0],
            r = i[1],
            h = Math.sqrt((e * e + s * s) * (n * n + r * r)),
            o = h && (e * n + s * r) / h;
        return Math.acos(Math.min(Math.max(o, -1), 1));
    }
    function Wr(t) {
        return (t[0] = 0), (t[1] = 0), t;
    }
    function Hr(t) {
        return "vec2(" + t[0] + ", " + t[1] + ")";
    }
    function Kr(t, i) {
        return t[0] === i[0] && t[1] === i[1];
    }
    function qr(i, e) {
        var s = i[0],
            n = i[1],
            r = e[0],
            h = e[1];
        return (
            Math.abs(s - r) <= t * Math.max(1, Math.abs(s), Math.abs(r)) &&
            Math.abs(n - h) <= t * Math.max(1, Math.abs(n), Math.abs(h))
        );
    }
    var ct = Gr,
        dt = yr,
        ft = br,
        pt = vr,
        mt = Ir,
        wt = Pr,
        gt = Ar,
        yt = (function () {
            var t = dr();
            return function (i, e, s, n, r, h) {
                var o, a;
                for (e || (e = 2), s || (s = 0), a = n ? Math.min(n * e + s, i.length) : i.length, o = s; o < a; o += e)
                    (t[0] = i[o]), (t[1] = i[o + 1]), r(t, t, h), (i[o] = t[0]), (i[o + 1] = t[1]);
                return i;
            };
        })(),
        bt = Object.freeze({
            __proto__: null,
            create: dr,
            clone: fr,
            rMe: pr,
            mn: mr,
            set: wr,
            add: gr,
            mMe: yr,
            multiply: br,
            Tg: vr,
            ceil: Sr,
            floor: xr,
            min: Mr,
            max: Er,
            round: Cr,
            scale: _r,
            qMe: Tr,
            XMe: Ir,
            YMe: Pr,
            length: Gr,
            JMe: Ar,
            ZMe: Rr,
            inverse: kr,
            normalize: Or,
            dot: Dr,
            QMe: Fr,
            bt: Lr,
            random: Br,
            PTe: Ur,
            GTe: Nr,
            nTe: jr,
            sTe: $r,
            rotate: zr,
            angle: Vr,
            hTe: Wr,
            dMe: Hr,
            wMe: Kr,
            equals: qr,
            lTe: ct,
            sub: dt,
            mul: ft,
            div: pt,
            oTe: mt,
            aTe: wt,
            uTe: gt,
            forEach: yt,
        });
    (globalThis.sG = n),
        (globalThis.sG.ATe = o),
        (globalThis.sG.RTe = u),
        (globalThis.sG.kTe = f),
        (globalThis.sG.eG = y),
        (globalThis.sG.OTe = it),
        (globalThis.sG.DTe = ut),
        (globalThis.sG.FTe = bt),
        (globalThis.sG.hG = T),
        (globalThis.sG.ems = F);
}
var vt, St, xt, Mt, Et, Ct, _t;
!(function () {
    function t(t) {
        (this.mode = e.Up), (this.data = t), (this.Hp = []);
        for (var i = 0, s = this.data.length; i < s; i++) {
            var n = [],
                r = this.data.charCodeAt(i);
            r > 65536
                ? ((n[0] = 240 | ((1835008 & r) >>> 18)),
                  (n[1] = 128 | ((258048 & r) >>> 12)),
                  (n[2] = 128 | ((4032 & r) >>> 6)),
                  (n[3] = 128 | (63 & r)))
                : r > 2048
                  ? ((n[0] = 224 | ((61440 & r) >>> 12)), (n[1] = 128 | ((4032 & r) >>> 6)), (n[2] = 128 | (63 & r)))
                  : r > 128
                    ? ((n[0] = 192 | ((1984 & r) >>> 6)), (n[1] = 128 | (63 & r)))
                    : (n[0] = r),
                this.Hp.push(n);
        }
        (this.Hp = Array.prototype.concat.apply([], this.Hp)),
            this.Hp.length != this.data.length && (this.Hp.unshift(191), this.Hp.unshift(187), this.Hp.unshift(239));
    }
    function i(t, i) {
        (this.Wp = t), (this.Xp = i), (this.$p = null), (this.Yp = 0), (this.qp = null), (this.Jp = []);
    }
    (t.prototype = {
        Qp: function (t) {
            return this.Hp.length;
        },
        write: function (t) {
            for (var i = 0, e = this.Hp.length; i < e; i++) t.put(this.Hp[i], 8);
        },
    }),
        (i.prototype = {
            Kp: function (i) {
                var e = new t(i);
                this.Jp.push(e), (this.qp = null);
            },
            Zp: function (t, i) {
                if (t < 0 || this.Yp <= t || i < 0 || this.Yp <= i) throw new Error(t + "," + i);
                return this.$p[t][i];
            },
            td: function () {
                return this.Yp;
            },
            ed: function () {
                this.sd(!1, this.nd());
            },
            sd: function (t, e) {
                (this.Yp = 4 * this.Wp + 17), (this.$p = new Array(this.Yp));
                for (var s = 0; s < this.Yp; s++) {
                    this.$p[s] = new Array(this.Yp);
                    for (var n = 0; n < this.Yp; n++) this.$p[s][n] = null;
                }
                this.rd(0, 0),
                    this.rd(this.Yp - 7, 0),
                    this.rd(0, this.Yp - 7),
                    this.ad(),
                    this.ld(),
                    this.hd(t, e),
                    this.Wp >= 7 && this.od(t),
                    null == this.qp && (this.qp = i.ud(this.Wp, this.Xp, this.Jp)),
                    this.pd(this.qp, e);
            },
            rd: function (t, i) {
                for (var e = -1; e <= 7; e++)
                    if (!(t + e <= -1 || this.Yp <= t + e))
                        for (var s = -1; s <= 7; s++)
                            i + s <= -1 ||
                                this.Yp <= i + s ||
                                (this.$p[t + e][i + s] =
                                    (0 <= e && e <= 6 && (0 == s || 6 == s)) ||
                                    (0 <= s && s <= 6 && (0 == e || 6 == e)) ||
                                    (2 <= e && e <= 4 && 2 <= s && s <= 4));
            },
            nd: function () {
                for (var t = 0, i = 0, e = 0; e < 8; e++) {
                    this.sd(!0, e);
                    var s = d.dd(this);
                    (0 == e || t > s) && ((t = s), (i = e));
                }
                return i;
            },
            fd: function (t, i, e) {
                var s = t.md(i, e);
                this.ed();
                for (var n = 0; n < this.$p.length; n++)
                    for (var r = 1 * n, h = 0; h < this.$p[n].length; h++) {
                        var o = 1 * h;
                        this.$p[n][h] &&
                            (s.gd(0, 100),
                            s.moveTo(o, r),
                            s.lineTo(o + 1, r),
                            s.lineTo(o + 1, r + 1),
                            s.lineTo(o, r + 1),
                            s.wd());
                    }
                return s;
            },
            ld: function () {
                for (var t = 8; t < this.Yp - 8; t++) null == this.$p[t][6] && (this.$p[t][6] = t % 2 == 0);
                for (var i = 8; i < this.Yp - 8; i++) null == this.$p[6][i] && (this.$p[6][i] = i % 2 == 0);
            },
            ad: function () {
                for (var t = d.bd(this.Wp), i = 0; i < t.length; i++)
                    for (var e = 0; e < t.length; e++) {
                        var s = t[i],
                            n = t[e];
                        if (null == this.$p[s][n])
                            for (var r = -2; r <= 2; r++)
                                for (var h = -2; h <= 2; h++)
                                    this.$p[s + r][n + h] =
                                        -2 == r || 2 == r || -2 == h || 2 == h || (0 == r && 0 == h);
                    }
            },
            od: function (t) {
                for (var i = d.yd(this.Wp), e = 0; e < 18; e++) {
                    var s = !t && 1 == ((i >> e) & 1);
                    this.$p[Math.floor(e / 3)][(e % 3) + this.Yp - 8 - 3] = s;
                }
                for (e = 0; e < 18; e++) {
                    s = !t && 1 == ((i >> e) & 1);
                    this.$p[(e % 3) + this.Yp - 8 - 3][Math.floor(e / 3)] = s;
                }
            },
            hd: function (t, i) {
                for (var e = (this.Xp << 3) | i, s = d.xd(e), n = 0; n < 15; n++) {
                    var r = !t && 1 == ((s >> n) & 1);
                    n < 6 ? (this.$p[n][8] = r) : n < 8 ? (this.$p[n + 1][8] = r) : (this.$p[this.Yp - 15 + n][8] = r);
                }
                for (n = 0; n < 15; n++) {
                    r = !t && 1 == ((s >> n) & 1);
                    n < 8
                        ? (this.$p[8][this.Yp - n - 1] = r)
                        : n < 9
                          ? (this.$p[8][15 - n - 1 + 1] = r)
                          : (this.$p[8][15 - n - 1] = r);
                }
                this.$p[this.Yp - 8][8] = !t;
            },
            pd: function (t, i) {
                for (var e = -1, s = this.Yp - 1, n = 7, r = 0, h = this.Yp - 1; h > 0; h -= 2)
                    for (6 == h && h--; ; ) {
                        for (var o = 0; o < 2; o++)
                            if (null == this.$p[s][h - o]) {
                                var a = !1;
                                r < t.length && (a = 1 == ((t[r] >>> n) & 1)),
                                    d.Sd(i, s, h - o) && (a = !a),
                                    (this.$p[s][h - o] = a),
                                    -1 == --n && (r++, (n = 7));
                            }
                        if ((s += e) < 0 || this.Yp <= s) {
                            (s -= e), (e = -e);
                            break;
                        }
                    }
            },
        }),
        (i.Cd = 236),
        (i.vd = 17),
        (i.ud = function (t, e, s) {
            for (var n = w.Md(t, e), r = new g(), h = 0; h < s.length; h++) {
                var o = s[h];
                r.put(o.mode, 4), r.put(o.Qp(), d.Id(o.mode, t)), o.write(r);
            }
            var a = 0;
            for (h = 0; h < n.length; h++) a += n[h].Td;
            if (r.Id() > 8 * a) throw new Error("code length overflow. (" + r.Id() + ">" + 8 * a + ")");
            for (r.Id() + 4 <= 8 * a && r.put(0, 4); r.Id() % 8 != 0; ) r.Od(!1);
            for (; !(r.Id() >= 8 * a || (r.put(i.Cd, 8), r.Id() >= 8 * a)); ) r.put(i.vd, 8);
            return i.Pd(r, n);
        }),
        (i.Pd = function (t, i) {
            for (var e = 0, s = 0, n = 0, r = new Array(i.length), h = new Array(i.length), o = 0; o < i.length; o++) {
                var a = i[o].Td,
                    l = i[o].Vd - a;
                (s = Math.max(s, a)), (n = Math.max(n, l)), (r[o] = new Array(a));
                for (var u = 0; u < r[o].length; u++) r[o][u] = 255 & t.buffer[u + e];
                e += a;
                var c = d.kd(l),
                    f = new m(r[o], c.Qp() - 1).Gd(c);
                h[o] = new Array(c.Qp() - 1);
                for (u = 0; u < h[o].length; u++) {
                    var p = u + f.Qp() - h[o].length;
                    h[o][u] = p >= 0 ? f.get(p) : 0;
                }
            }
            var w = 0;
            for (u = 0; u < i.length; u++) w += i[u].Vd;
            var g = new Array(w),
                y = 0;
            for (u = 0; u < s; u++) for (o = 0; o < i.length; o++) u < r[o].length && (g[y++] = r[o][u]);
            for (u = 0; u < n; u++) for (o = 0; o < i.length; o++) u < h[o].length && (g[y++] = h[o][u]);
            return g;
        });
    for (
        var e = { jd: 1, Rd: 2, Up: 4, _d: 8 },
            s = { L: 1, M: 0, Q: 3, H: 2 },
            n = 0,
            r = 1,
            h = 2,
            o = 3,
            a = 4,
            l = 5,
            u = 6,
            c = 7,
            d = {
                Dd: [
                    [],
                    [6, 18],
                    [6, 22],
                    [6, 26],
                    [6, 30],
                    [6, 34],
                    [6, 22, 38],
                    [6, 24, 42],
                    [6, 26, 46],
                    [6, 28, 50],
                    [6, 30, 54],
                    [6, 32, 58],
                    [6, 34, 62],
                    [6, 26, 46, 66],
                    [6, 26, 48, 70],
                    [6, 26, 50, 74],
                    [6, 30, 54, 78],
                    [6, 30, 56, 82],
                    [6, 30, 58, 86],
                    [6, 34, 62, 90],
                    [6, 28, 50, 72, 94],
                    [6, 26, 50, 74, 98],
                    [6, 30, 54, 78, 102],
                    [6, 28, 54, 80, 106],
                    [6, 32, 58, 84, 110],
                    [6, 30, 58, 86, 114],
                    [6, 34, 62, 90, 118],
                    [6, 26, 50, 74, 98, 122],
                    [6, 30, 54, 78, 102, 126],
                    [6, 26, 52, 78, 104, 130],
                    [6, 30, 56, 82, 108, 134],
                    [6, 34, 60, 86, 112, 138],
                    [6, 30, 58, 86, 114, 142],
                    [6, 34, 62, 90, 118, 146],
                    [6, 30, 54, 78, 102, 126, 150],
                    [6, 24, 50, 76, 102, 128, 154],
                    [6, 28, 54, 80, 106, 132, 158],
                    [6, 32, 58, 84, 110, 136, 162],
                    [6, 26, 54, 82, 110, 138, 166],
                    [6, 30, 58, 86, 114, 142, 170],
                ],
                Ld: 1335,
                Nd: 7973,
                Ad: 21522,
                xd: function (t) {
                    for (var i = t << 10; d.Fd(i) - d.Fd(d.Ld) >= 0; ) i ^= d.Ld << (d.Fd(i) - d.Fd(d.Ld));
                    return ((t << 10) | i) ^ d.Ad;
                },
                yd: function (t) {
                    for (var i = t << 12; d.Fd(i) - d.Fd(d.Nd) >= 0; ) i ^= d.Nd << (d.Fd(i) - d.Fd(d.Nd));
                    return (t << 12) | i;
                },
                Fd: function (t) {
                    for (var i = 0; 0 != t; ) i++, (t >>>= 1);
                    return i;
                },
                bd: function (t) {
                    return d.Dd[t - 1];
                },
                Sd: function (t, i, e) {
                    switch (t) {
                        case n:
                            return (i + e) % 2 == 0;
                        case r:
                            return i % 2 == 0;
                        case h:
                            return e % 3 == 0;
                        case o:
                            return (i + e) % 3 == 0;
                        case a:
                            return (Math.floor(i / 2) + Math.floor(e / 3)) % 2 == 0;
                        case l:
                            return ((i * e) % 2) + ((i * e) % 3) == 0;
                        case u:
                            return (((i * e) % 2) + ((i * e) % 3)) % 2 == 0;
                        case c:
                            return (((i * e) % 3) + ((i + e) % 2)) % 2 == 0;
                        default:
                            throw new Error("bad maskPattern:" + t);
                    }
                },
                kd: function (t) {
                    for (var i = new m([1], 0), e = 0; e < t; e++) i = i.multiply(new m([1, f.zd(e)], 0));
                    return i;
                },
                Id: function (t, i) {
                    if (1 <= i && i < 10)
                        switch (t) {
                            case e.jd:
                                return 10;
                            case e.Rd:
                                return 9;
                            case e.Up:
                            case e._d:
                                return 8;
                            default:
                                throw new Error("mode:" + t);
                        }
                    else if (i < 27)
                        switch (t) {
                            case e.jd:
                                return 12;
                            case e.Rd:
                                return 11;
                            case e.Up:
                                return 16;
                            case e._d:
                                return 10;
                            default:
                                throw new Error("mode:" + t);
                        }
                    else {
                        if (!(i < 41)) throw new Error("type:" + i);
                        switch (t) {
                            case e.jd:
                                return 14;
                            case e.Rd:
                                return 13;
                            case e.Up:
                                return 16;
                            case e._d:
                                return 12;
                            default:
                                throw new Error("mode:" + t);
                        }
                    }
                },
                dd: function (t) {
                    for (var i = t.td(), e = 0, s = 0; s < i; s++)
                        for (var n = 0; n < i; n++) {
                            for (var r = 0, h = t.Zp(s, n), o = -1; o <= 1; o++)
                                if (!(s + o < 0 || i <= s + o))
                                    for (var a = -1; a <= 1; a++)
                                        n + a < 0 ||
                                            i <= n + a ||
                                            (0 == o && 0 == a) ||
                                            (h == t.Zp(s + o, n + a) && r++);
                            r > 5 && (e += 3 + r - 5);
                        }
                    for (s = 0; s < i - 1; s++)
                        for (n = 0; n < i - 1; n++) {
                            var l = 0;
                            t.Zp(s, n) && l++,
                                t.Zp(s + 1, n) && l++,
                                t.Zp(s, n + 1) && l++,
                                t.Zp(s + 1, n + 1) && l++,
                                (0 != l && 4 != l) || (e += 3);
                        }
                    for (s = 0; s < i; s++)
                        for (n = 0; n < i - 6; n++)
                            t.Zp(s, n) &&
                                !t.Zp(s, n + 1) &&
                                t.Zp(s, n + 2) &&
                                t.Zp(s, n + 3) &&
                                t.Zp(s, n + 4) &&
                                !t.Zp(s, n + 5) &&
                                t.Zp(s, n + 6) &&
                                (e += 40);
                    for (n = 0; n < i; n++)
                        for (s = 0; s < i - 6; s++)
                            t.Zp(s, n) &&
                                !t.Zp(s + 1, n) &&
                                t.Zp(s + 2, n) &&
                                t.Zp(s + 3, n) &&
                                t.Zp(s + 4, n) &&
                                !t.Zp(s + 5, n) &&
                                t.Zp(s + 6, n) &&
                                (e += 40);
                    var u = 0;
                    for (n = 0; n < i; n++) for (s = 0; s < i; s++) t.Zp(s, n) && u++;
                    return (e += 10 * (Math.abs((100 * u) / i / i - 50) / 5));
                },
            },
            f = {
                Ed: function (t) {
                    if (t < 1) throw new Error("glog(" + t + ")");
                    return f.Bd[t];
                },
                zd: function (t) {
                    for (; t < 0; ) t += 255;
                    for (; t >= 256; ) t -= 255;
                    return f.Ud[t];
                },
                Ud: new Array(256),
                Bd: new Array(256),
            },
            p = 0;
        p < 8;
        p++
    )
        f.Ud[p] = 1 << p;
    for (p = 8; p < 256; p++) f.Ud[p] = f.Ud[p - 4] ^ f.Ud[p - 5] ^ f.Ud[p - 6] ^ f.Ud[p - 8];
    for (p = 0; p < 255; p++) f.Bd[f.Ud[p]] = p;
    function m(t, i) {
        if (null == t.length) throw new Error(t.length + "/" + i);
        for (var e = 0; e < t.length && 0 == t[e]; ) e++;
        this.Hd = new Array(t.length - e + i);
        for (var s = 0; s < t.length - e; s++) this.Hd[s] = t[s + e];
    }
    function w(t, i) {
        (this.Vd = t), (this.Td = i);
    }
    function g() {
        (this.buffer = []), (this.length = 0);
    }
    (m.prototype = {
        get: function (t) {
            return this.Hd[t];
        },
        Qp: function () {
            return this.Hd.length;
        },
        multiply: function (t) {
            for (var i = new Array(this.Qp() + t.Qp() - 1), e = 0; e < this.Qp(); e++)
                for (var s = 0; s < t.Qp(); s++) i[e + s] ^= f.zd(f.Ed(this.get(e)) + f.Ed(t.get(s)));
            return new m(i, 0);
        },
        Gd: function (t) {
            if (this.Qp() - t.Qp() < 0) return this;
            for (var i = f.Ed(this.get(0)) - f.Ed(t.get(0)), e = new Array(this.Qp()), s = 0; s < this.Qp(); s++)
                e[s] = this.get(s);
            for (s = 0; s < t.Qp(); s++) e[s] ^= f.zd(f.Ed(t.get(s)) + i);
            return new m(e, 0).Gd(t);
        },
    }),
        (w.Wd = [
            [1, 26, 19],
            [1, 26, 16],
            [1, 26, 13],
            [1, 26, 9],
            [1, 44, 34],
            [1, 44, 28],
            [1, 44, 22],
            [1, 44, 16],
            [1, 70, 55],
            [1, 70, 44],
            [2, 35, 17],
            [2, 35, 13],
            [1, 100, 80],
            [2, 50, 32],
            [2, 50, 24],
            [4, 25, 9],
            [1, 134, 108],
            [2, 67, 43],
            [2, 33, 15, 2, 34, 16],
            [2, 33, 11, 2, 34, 12],
            [2, 86, 68],
            [4, 43, 27],
            [4, 43, 19],
            [4, 43, 15],
            [2, 98, 78],
            [4, 49, 31],
            [2, 32, 14, 4, 33, 15],
            [4, 39, 13, 1, 40, 14],
            [2, 121, 97],
            [2, 60, 38, 2, 61, 39],
            [4, 40, 18, 2, 41, 19],
            [4, 40, 14, 2, 41, 15],
            [2, 146, 116],
            [3, 58, 36, 2, 59, 37],
            [4, 36, 16, 4, 37, 17],
            [4, 36, 12, 4, 37, 13],
            [2, 86, 68, 2, 87, 69],
            [4, 69, 43, 1, 70, 44],
            [6, 43, 19, 2, 44, 20],
            [6, 43, 15, 2, 44, 16],
            [4, 101, 81],
            [1, 80, 50, 4, 81, 51],
            [4, 50, 22, 4, 51, 23],
            [3, 36, 12, 8, 37, 13],
            [2, 116, 92, 2, 117, 93],
            [6, 58, 36, 2, 59, 37],
            [4, 46, 20, 6, 47, 21],
            [7, 42, 14, 4, 43, 15],
            [4, 133, 107],
            [8, 59, 37, 1, 60, 38],
            [8, 44, 20, 4, 45, 21],
            [12, 33, 11, 4, 34, 12],
            [3, 145, 115, 1, 146, 116],
            [4, 64, 40, 5, 65, 41],
            [11, 36, 16, 5, 37, 17],
            [11, 36, 12, 5, 37, 13],
            [5, 109, 87, 1, 110, 88],
            [5, 65, 41, 5, 66, 42],
            [5, 54, 24, 7, 55, 25],
            [11, 36, 12],
            [5, 122, 98, 1, 123, 99],
            [7, 73, 45, 3, 74, 46],
            [15, 43, 19, 2, 44, 20],
            [3, 45, 15, 13, 46, 16],
            [1, 135, 107, 5, 136, 108],
            [10, 74, 46, 1, 75, 47],
            [1, 50, 22, 15, 51, 23],
            [2, 42, 14, 17, 43, 15],
            [5, 150, 120, 1, 151, 121],
            [9, 69, 43, 4, 70, 44],
            [17, 50, 22, 1, 51, 23],
            [2, 42, 14, 19, 43, 15],
            [3, 141, 113, 4, 142, 114],
            [3, 70, 44, 11, 71, 45],
            [17, 47, 21, 4, 48, 22],
            [9, 39, 13, 16, 40, 14],
            [3, 135, 107, 5, 136, 108],
            [3, 67, 41, 13, 68, 42],
            [15, 54, 24, 5, 55, 25],
            [15, 43, 15, 10, 44, 16],
            [4, 144, 116, 4, 145, 117],
            [17, 68, 42],
            [17, 50, 22, 6, 51, 23],
            [19, 46, 16, 6, 47, 17],
            [2, 139, 111, 7, 140, 112],
            [17, 74, 46],
            [7, 54, 24, 16, 55, 25],
            [34, 37, 13],
            [4, 151, 121, 5, 152, 122],
            [4, 75, 47, 14, 76, 48],
            [11, 54, 24, 14, 55, 25],
            [16, 45, 15, 14, 46, 16],
            [6, 147, 117, 4, 148, 118],
            [6, 73, 45, 14, 74, 46],
            [11, 54, 24, 16, 55, 25],
            [30, 46, 16, 2, 47, 17],
            [8, 132, 106, 4, 133, 107],
            [8, 75, 47, 13, 76, 48],
            [7, 54, 24, 22, 55, 25],
            [22, 45, 15, 13, 46, 16],
            [10, 142, 114, 2, 143, 115],
            [19, 74, 46, 4, 75, 47],
            [28, 50, 22, 6, 51, 23],
            [33, 46, 16, 4, 47, 17],
            [8, 152, 122, 4, 153, 123],
            [22, 73, 45, 3, 74, 46],
            [8, 53, 23, 26, 54, 24],
            [12, 45, 15, 28, 46, 16],
            [3, 147, 117, 10, 148, 118],
            [3, 73, 45, 23, 74, 46],
            [4, 54, 24, 31, 55, 25],
            [11, 45, 15, 31, 46, 16],
            [7, 146, 116, 7, 147, 117],
            [21, 73, 45, 7, 74, 46],
            [1, 53, 23, 37, 54, 24],
            [19, 45, 15, 26, 46, 16],
            [5, 145, 115, 10, 146, 116],
            [19, 75, 47, 10, 76, 48],
            [15, 54, 24, 25, 55, 25],
            [23, 45, 15, 25, 46, 16],
            [13, 145, 115, 3, 146, 116],
            [2, 74, 46, 29, 75, 47],
            [42, 54, 24, 1, 55, 25],
            [23, 45, 15, 28, 46, 16],
            [17, 145, 115],
            [10, 74, 46, 23, 75, 47],
            [10, 54, 24, 35, 55, 25],
            [19, 45, 15, 35, 46, 16],
            [17, 145, 115, 1, 146, 116],
            [14, 74, 46, 21, 75, 47],
            [29, 54, 24, 19, 55, 25],
            [11, 45, 15, 46, 46, 16],
            [13, 145, 115, 6, 146, 116],
            [14, 74, 46, 23, 75, 47],
            [44, 54, 24, 7, 55, 25],
            [59, 46, 16, 1, 47, 17],
            [12, 151, 121, 7, 152, 122],
            [12, 75, 47, 26, 76, 48],
            [39, 54, 24, 14, 55, 25],
            [22, 45, 15, 41, 46, 16],
            [6, 151, 121, 14, 152, 122],
            [6, 75, 47, 34, 76, 48],
            [46, 54, 24, 10, 55, 25],
            [2, 45, 15, 64, 46, 16],
            [17, 152, 122, 4, 153, 123],
            [29, 74, 46, 14, 75, 47],
            [49, 54, 24, 10, 55, 25],
            [24, 45, 15, 46, 46, 16],
            [4, 152, 122, 18, 153, 123],
            [13, 74, 46, 32, 75, 47],
            [48, 54, 24, 14, 55, 25],
            [42, 45, 15, 32, 46, 16],
            [20, 147, 117, 4, 148, 118],
            [40, 75, 47, 7, 76, 48],
            [43, 54, 24, 22, 55, 25],
            [10, 45, 15, 67, 46, 16],
            [19, 148, 118, 6, 149, 119],
            [18, 75, 47, 31, 76, 48],
            [34, 54, 24, 34, 55, 25],
            [20, 45, 15, 61, 46, 16],
        ]),
        (w.Md = function (t, i) {
            var e = w.Xd(t, i);
            if (null == e) throw new Error("bad rs block @ typeNumber:" + t + "/errorCorrectLevel:" + i);
            for (var s = e.length / 3, n = [], r = 0; r < s; r++)
                for (var h = e[3 * r + 0], o = e[3 * r + 1], a = e[3 * r + 2], l = 0; l < h; l++) n.push(new w(o, a));
            return n;
        }),
        (w.Xd = function (t, i) {
            switch (i) {
                case s.L:
                    return w.Wd[4 * (t - 1) + 0];
                case s.M:
                    return w.Wd[4 * (t - 1) + 1];
                case s.Q:
                    return w.Wd[4 * (t - 1) + 2];
                case s.H:
                    return w.Wd[4 * (t - 1) + 3];
                default:
                    return;
            }
        }),
        (g.prototype = {
            get: function (t) {
                var i = Math.floor(t / 8);
                return 1 == ((this.buffer[i] >>> (7 - (t % 8))) & 1);
            },
            put: function (t, i) {
                for (var e = 0; e < i; e++) this.Od(1 == ((t >>> (i - e - 1)) & 1));
            },
            Id: function () {
                return this.length;
            },
            Od: function (t) {
                var i = Math.floor(this.length / 8);
                this.buffer.length <= i && this.buffer.push(0),
                    t && (this.buffer[i] |= 128 >>> this.length % 8),
                    this.length++;
            },
        });
    var y = [
        [17, 14, 11, 7],
        [32, 26, 20, 14],
        [53, 42, 32, 24],
        [78, 62, 46, 34],
        [106, 84, 60, 44],
        [134, 106, 74, 58],
        [154, 122, 86, 64],
        [192, 152, 108, 84],
        [230, 180, 130, 98],
        [271, 213, 151, 119],
        [321, 251, 177, 137],
        [367, 287, 203, 155],
        [425, 331, 241, 177],
        [458, 362, 258, 194],
        [520, 412, 292, 220],
        [586, 450, 322, 250],
        [644, 504, 364, 280],
        [718, 560, 394, 310],
        [792, 624, 442, 338],
        [858, 666, 482, 382],
        [929, 711, 509, 403],
        [1003, 779, 565, 439],
        [1091, 857, 611, 461],
        [1171, 911, 661, 511],
        [1273, 997, 715, 535],
        [1367, 1059, 751, 593],
        [1465, 1125, 805, 625],
        [1528, 1190, 868, 658],
        [1628, 1264, 908, 698],
        [1732, 1370, 982, 742],
        [1840, 1452, 1030, 790],
        [1952, 1538, 1112, 842],
        [2068, 1628, 1168, 898],
        [2188, 1722, 1228, 958],
        [2303, 1809, 1283, 983],
        [2431, 1911, 1351, 1051],
        [2563, 1989, 1423, 1093],
        [2699, 2099, 1499, 1139],
        [2809, 2213, 1579, 1219],
        [2953, 2331, 1663, 1273],
    ];
    var b = (function () {
            var t = function (t, i) {
                (this.Jd = t), (this.Yd = i);
            };
            return (
                (t.prototype.draw = function (t) {
                    var i = this.Yd,
                        e = this.Jd,
                        s = t.td();
                    Math.floor(i.width / s), Math.floor(i.height / s);
                    function n(t, i) {
                        var e = document.createElementNS("http://www.w3.org/2000/svg", t);
                        for (var s in i) i.hasOwnProperty(s) && e.setAttribute(s, i[s]);
                        return e;
                    }
                    this.clear();
                    var r = n("svg", {
                        viewBox: "0 0 " + String(s) + " " + String(s),
                        width: "100%",
                        height: "100%",
                        fill: i.tf,
                    });
                    r.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink"),
                        e.appendChild(r),
                        r.appendChild(n("rect", { fill: i.tf, width: "100%", height: "100%" })),
                        r.appendChild(n("rect", { fill: i.Zd, width: "1", height: "1", id: "template" }));
                    for (var h = 0; h < s; h++)
                        for (var o = 0; o < s; o++)
                            if (t.Zp(h, o)) {
                                var a = n("use", { x: String(o), y: String(h) });
                                a.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#template"), r.appendChild(a);
                            }
                }),
                (t.prototype.clear = function () {
                    for (; this.Jd.hasChildNodes(); ) this.Jd.removeChild(this.Jd.lastChild);
                }),
                t
            );
        })(),
        v =
            "svg" === document.documentElement.tagName.toLowerCase()
                ? b
                : "undefined" == typeof CanvasRenderingContext2D
                  ? (function () {
                        var t = function (t, i) {
                            (this.Jd = t), (this.Yd = i);
                        };
                        return (
                            (t.prototype.draw = function (t) {
                                for (
                                    var i = this.Yd,
                                        e = this.Jd,
                                        s = t.td(),
                                        n = Math.floor(i.width / s),
                                        r = Math.floor(i.height / s),
                                        h = ['<table style="border:0;border-collapse:collapse;">'],
                                        o = 0;
                                    o < s;
                                    o++
                                ) {
                                    h.push("<tr>");
                                    for (var a = 0; a < s; a++)
                                        h.push(
                                            '<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:' +
                                                n +
                                                "px;height:" +
                                                r +
                                                "px;background-color:" +
                                                (t.Zp(o, a) ? i.Zd : i.tf) +
                                                ';"></td>'
                                        );
                                    h.push("</tr>");
                                }
                                h.push("</table>"), (e.innerHTML = h.join(""));
                                var l = e.childNodes[0],
                                    u = (i.width - l.offsetWidth) / 2,
                                    c = (i.height - l.offsetHeight) / 2;
                                u > 0 && c > 0 && (l.style.margin = c + "px " + u + "px");
                            }),
                            (t.prototype.clear = function () {
                                this.Jd.innerHTML = "";
                            }),
                            t
                        );
                    })()
                  : (function () {
                        function t() {
                            (this.LTe.src = this.qd.toDataURL("image/png")),
                                (this.LTe.style.display = "block"),
                                (this.qd.style.display = "none");
                        }
                        function i(t, i) {
                            var e = this;
                            if (((e.BTe = i), (e.UTe = t), null === e.Kd)) {
                                var s = document.createElement("img"),
                                    n = function () {
                                        (e.Kd = !1), e.BTe && e.BTe.call(e);
                                    };
                                return (
                                    (s.onabort = n),
                                    (s.onerror = n),
                                    (s.onload = function () {
                                        (e.Kd = !0), e.UTe && e.UTe.call(e);
                                    }),
                                    void (s.src =
                                        "data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")
                                );
                            }
                            !0 === e.Kd && e.UTe ? e.UTe.call(e) : !1 === e.Kd && e.BTe && e.BTe.call(e);
                        }
                        var e = function (t, i) {
                            (this.$d = !1),
                                (this.Yd = i),
                                (this.qd = document.createElement("canvas")),
                                (this.qd.width = i.width),
                                (this.qd.height = i.height),
                                t.appendChild(this.qd),
                                (this.Jd = t),
                                (this.Qd = this.qd.getContext("2d")),
                                (this.$d = !1),
                                (this.LTe = document.createElement("img")),
                                (this.LTe.alt = "Scan me!"),
                                (this.LTe.style.display = "none"),
                                (this.Kd = null);
                        };
                        return (
                            (e.prototype.draw = function (t) {
                                var i = this.LTe,
                                    e = this.Qd,
                                    s = this.Yd,
                                    n = t.td(),
                                    r = s.width / n,
                                    h = s.height / n,
                                    o = Math.round(r),
                                    a = Math.round(h);
                                (i.style.display = "none"), this.clear();
                                for (var l = 0; l < n; l++)
                                    for (var u = 0; u < n; u++) {
                                        var c = t.Zp(l, u),
                                            d = u * r,
                                            f = l * h;
                                        (e.strokeStyle = c ? s.Zd : s.tf),
                                            (e.lineWidth = 1),
                                            (e.fillStyle = c ? s.Zd : s.tf),
                                            e.fillRect(d, f, r, h),
                                            e.strokeRect(Math.floor(d) + 0.5, Math.floor(f) + 0.5, o, a),
                                            e.strokeRect(Math.ceil(d) - 0.5, Math.ceil(f) - 0.5, o, a);
                                    }
                                this.$d = !0;
                            }),
                            (e.prototype.NTe = function () {
                                this.$d && i.call(this, t);
                            }),
                            (e.prototype.ef = function () {
                                return this.$d;
                            }),
                            (e.prototype.clear = function () {
                                this.Qd.clearRect(0, 0, this.qd.width, this.qd.height), (this.$d = !1);
                            }),
                            (e.prototype.round = function (t) {
                                return t ? Math.floor(1e3 * t) / 1e3 : t;
                            }),
                            e
                        );
                    })();
    function S(t, i) {
        for (
            var e = 1,
                n = (function (t) {
                    var i = encodeURI(t)
                        .toString()
                        .replace(/\%[0-9a-fA-F]{2}/g, "a");
                    return i.length + (i.length != t ? 3 : 0);
                })(t),
                r = 0,
                h = y.length;
            r <= h;
            r++
        ) {
            var o = 0;
            switch (i) {
                case s.L:
                    o = y[r][0];
                    break;
                case s.M:
                    o = y[r][1];
                    break;
                case s.Q:
                    o = y[r][2];
                    break;
                case s.H:
                    o = y[r][3];
            }
            if (n <= o) break;
            e++;
        }
        if (e > y.length) throw new Error("Too long data");
        return e;
    }
    (self.Gp = function (t, i) {
        if (
            ((this.Yd = { width: 256, height: 256, Wp: 4, Zd: "#000000", tf: "#ffffff", Fp: s.H }),
            "string" == typeof i && (i = { text: i }),
            i)
        )
            for (var e in i) this.Yd[e] = i[e];
        "string" == typeof t && (t = document.getElementById(t)),
            this.Yd.jTe && (v = b),
            (this.Jd = t),
            (this.if = null),
            (this.sf = new v(this.Jd, this.Yd)),
            this.Yd.text && this.nf(this.Yd.text);
    }),
        (self.Gp.prototype.nf = function (t) {
            (this.if = new i(S(t, this.Yd.Fp), this.Yd.Fp)), this.if.Kp(t), this.if.ed(), this.sf.draw(this.if);
        }),
        (self.Gp.prototype.NTe = function () {
            "function" == typeof this.sf.NTe && this.sf.NTe();
        }),
        (self.Gp.prototype.clear = function () {
            this.sf.clear();
        }),
        (self.Gp.Bp = s);
})();
{
    let Xr = !1,
        Yr = !1,
        Jr = "dev";
    const Zr = [],
        Qr = (self.t = class {
            constructor() {
                throw TypeError("static class can't be instantiated");
            }
            static $Te() {
                Xr = !0;
            }
            static Lh() {
                return Xr;
            }
            static zTe() {
                Yr = !0;
            }
            static VTe() {
                return Yr;
            }
            static WTe(t) {
                Jr = t;
            }
            static HTe() {
                return Jr;
            }
            static C7s() {
                return "final" === Jr;
            }
            static KTe(t) {
                Zr.push(t);
            }
            static qTe() {
                return Zr;
            }
        });
    (Qr.Xr = !1),
        (Qr.XTe = !1),
        (Qr.fDt = !1),
        (Qr.hardwareConcurrency = navigator.hardwareConcurrency || 2),
        (self.YTe = {});
}
{
    const th = self.t;
    (th.JTe = class {
        constructor(t) {
            (this.ZTe = t), (this.BWs = new Map()), this.u1s();
        }
        u1s() {
            let t = this.ZTe;
            (t.startsWith("?") || t.startsWith("#")) && (t = t.substr(1));
            const i = t.split("&");
            for (const t of i) this.QTe(t);
        }
        QTe(t) {
            if (!t) return;
            if (!t.includes("=")) return void this.BWs.set(t, null);
            const i = t.indexOf("="),
                e = decodeURIComponent(t.substring(0, i)),
                s = decodeURIComponent(t.substring(i + 1));
            this.BWs.set(e, s);
        }
        MRe() {
            for (const t of this.BWs)
                console.log("[QueryParser] Parameter '" + t[0] + "' = " + (null === t[1] ? "null" : "'" + t[1] + "'"));
        }
        ZRs(t) {
            return this.BWs.has(t);
        }
        Ke(t) {
            const i = this.BWs.get(t);
            return void 0 === i ? null : i;
        }
        CRe() {
            history.replaceState("", document.title, location.pathname + location.search);
        }
        TRe(t) {
            (this.ZTe = t), this.BWs.clear(), this.u1s();
        }
    }),
        (th.E4s = new th.JTe(location.search)),
        (th.IRe = new th.JTe(location.hash)),
        th.E4s.ZRs("perf") && (th.fDt = !0),
        "dev" !== th.E4s.Ke("mode") && th.WTe("final");
}
{
    const ih = self.t,
        eh = "(unknown)";
    ih.fk = {
        OS: eh,
        PRe: eh,
        $s: eh,
        GRe: eh,
        DRe: NaN,
        FRe: eh,
        Pue: "browser",
        Bj: !0,
        ZP: !1,
        q9t: !1,
        l7i: !1,
        LRe: async () => {},
    };
    const sh = new Map([
        [5, "2000"],
        [5.1, "XP"],
        [5.2, "XP"],
        [6, "Vista"],
        [6.1, "7"],
        [6.2, "8"],
        [6.3, "8.1"],
        [10, "10"],
    ]);
    function nh(t) {
        const i = parseFloat(t),
            e = sh.get(i);
        return e || (i >= 13 ? "11" : "NT " + t);
    }
    const rh = navigator.userAgent,
        hh = navigator.userAgentData;
    if (hh && hh.brands.length > 0) {
        (ih.fk.OS = hh.platform), (ih.fk.ZP = hh.mobile), (ih.fk.Bj = !ih.fk.ZP);
        const oh = new Map([
                ["Google Chrome", "Chrome"],
                ["Microsoft Edge", "Edge"],
                ["Opera", "Opera"],
                ["Opera GX", "Opera GX"],
                ["Mozilla Firefox", "Firefox"],
                ["Apple Safari", "Safari"],
                ["NW.js", "NW.js"],
            ]),
            ah = new Map([
                ["Chromium", "Chromium"],
                ["Gecko", "Gecko"],
                ["WebKit", "WebKit"],
            ]);
        function lh(t) {
            let i = "",
                e = "",
                s = "",
                n = "";
            for (const r of t) {
                const t = oh.get(r.brand);
                !i && t && ((i = t), (e = r.version));
                const h = ah.get(r.brand);
                !s && h && ((s = h), (n = r.version));
            }
            i || "Chromium" !== s || ((ih.fk.$s = "Chromium"), (ih.fk.GRe = n)),
                (ih.fk.$s = i || eh),
                (ih.fk.GRe = e || eh),
                (ih.fk.FRe = s || eh);
        }
        lh(hh.brands);
        let uh = !1;
        ih.fk.LRe = async () => {
            if (!uh)
                try {
                    const t = await navigator.userAgentData.getHighEntropyValues([
                        "platformVersion",
                        "fullVersionList",
                    ]);
                    lh(t.fullVersionList),
                        "Windows" === ih.fk.OS ? (ih.fk.PRe = nh(t.platformVersion)) : (ih.fk.PRe = t.platformVersion),
                        (uh = !0);
                } catch (t) {
                    (() => {})("Failed to get detailed user agent information: ", t);
                }
        };
    } else {
        function ch(t, i) {
            const e = Array.isArray(t) ? t : [t];
            for (const t of e) {
                const e = t.exec(rh);
                if (e) {
                    i(e);
                    break;
                }
            }
        }
        ch(/windows\s+nt\s+([\d\.]+)/i, (t) => {
            ih.fk.OS = "Windows";
            const i = t[1];
            ih.fk.PRe = nh(i);
        }),
            ch(/mac\s+os\s+x\s+([\d\._]+)/i, (t) => {
                (ih.fk.OS = "macOS"), (ih.fk.PRe = t[1].replace(/_/g, "."));
            }),
            ch(/CrOS/, () => {
                ih.fk.OS = "Chrome OS";
            }),
            ch(/linux|openbsd|freebsd|netbsd/i, () => {
                ih.fk.OS = "Linux";
            }),
            ch(/android/i, () => {
                ih.fk.OS = "Android";
            }),
            ch(/android\s+([\d\.]+)/i, (t) => {
                (ih.fk.OS = "Android"), (ih.fk.PRe = t[1]);
            }),
            ih.fk.OS === eh &&
                (ch(/(iphone|ipod|ipad)/i, (t) => {
                    ih.fk.OS = "iOS";
                }),
                ch([/iphone\s+os\s+([\d\._]+)/i, /ipad[^)]*os\s+([\d\._]+)/i], (t) => {
                    (ih.fk.OS = "iOS"), (ih.fk.PRe = t[1].replace(/_/g, "."));
                }));
        const dh = /chrome\//i.test(rh),
            fh = /chromium\//i.test(rh),
            ph = /edg\//i.test(rh),
            mh = /OPR\//.test(rh),
            wh = /nwjs/i.test(rh),
            gh = /safari\//i.test(rh),
            yh = /webkit/i.test(rh);
        ph ||
            mh ||
            ch(/chrome\/([\d\.]+)/i, (t) => {
                (ih.fk.$s = "Chrome"), (ih.fk.GRe = t[1]), (ih.fk.FRe = "Chromium");
            }),
            ch(/edg\/([\d\.]+)/i, (t) => {
                (ih.fk.$s = "Edge"), (ih.fk.GRe = t[1]), (ih.fk.FRe = "Chromium");
            }),
            ch(/OPR\/([\d\.]+)/, (t) => {
                (ih.fk.$s = "Opera"), (ih.fk.GRe = t[1]), (ih.fk.FRe = "Chromium");
            }),
            ch(/chromium\/([\d\.]+)/i, (t) => {
                (ih.fk.$s = "Chromium"), (ih.fk.GRe = t[1]), (ih.fk.FRe = "Chromium");
            }),
            ch(/nwjs\/[0-9.]+/i, (t) => {
                (ih.fk.$s = "NW.js"), (ih.fk.GRe = t[1]), (ih.fk.FRe = "Chromium"), (ih.fk.Pue = "nwjs");
            }),
            ch(/firefox\/([\d\.]+)/i, (t) => {
                (ih.fk.$s = "Firefox"), (ih.fk.GRe = t[1]), (ih.fk.FRe = "Gecko");
            }),
            !gh ||
                dh ||
                fh ||
                ph ||
                mh ||
                wh ||
                ((ih.fk.$s = "Safari"),
                (ih.fk.FRe = "WebKit"),
                ch(/version\/([\d\.]+)/i, (t) => {
                    ih.fk.GRe = t[1];
                }),
                ch(/crios\/([\d\.]+)/i, (t) => {
                    (ih.fk.$s = "Chrome for iOS"), (ih.fk.GRe = t[1]);
                }),
                ch(/fxios\/([\d\.]+)/i, (t) => {
                    (ih.fk.$s = "Firefox for iOS"), (ih.fk.GRe = t[1]);
                }),
                ch(/edgios\/([\d\.]+)/i, (t) => {
                    (ih.fk.$s = "Edge for iOS"), (ih.fk.GRe = t[1]);
                })),
            ih.fk.FRe === eh && yh && (ih.fk.FRe = "WebKit"),
            "Android" === ih.fk.OS && "Safari" === ih.fk.$s && (ih.fk.$s = "Stock");
        const bh = new Set(["Windows", "macOS", "Linux", "Chrome OS"]).has(ih.fk.OS) || "nwjs" === ih.fk.Pue;
        (ih.fk.Bj = bh), (ih.fk.ZP = !bh);
    }
    "Chrome" === ih.fk.$s && "browser" === ih.fk.Pue && /wv\)/.test(rh) && (ih.fk.Pue = "webview"),
        "nwjs" !== ih.fk.Pue &&
            "undefined" != typeof window &&
            ((window.matchMedia && window.matchMedia("(display-mode: standalone)").matches) || navigator.standalone) &&
            (ih.fk.Pue = "webapp"),
        (ih.fk.DRe = parseFloat(ih.fk.GRe));
    "macOS" === ih.fk.OS &&
        navigator.maxTouchPoints &&
        navigator.maxTouchPoints > 2 &&
        ((ih.fk.OS = "iOS"), (ih.fk.PRe = ih.fk.GRe), (ih.fk.Bj = !1), (ih.fk.ZP = !0), (ih.fk.l7i = !0)),
        (ih.fk.q9t = "macOS" === ih.fk.OS || "iOS" === ih.fk.OS);
}
{
    const vh = self.t;
    (vh.Xr = !vh.C7s() && vh.E4s.ZRs("debug")),
        (vh.XTe = !vh.C7s() && vh.E4s.ZRs("debug-defend")),
        vh.XTe && (vh.Xr = !0);
    let Sh = !1;
    function xh(t) {
        let i = vh.BRe(),
            e = "Assertion failure: " + t + "\n\nStack trace:\n" + i;
        if ((console.error(e), !Sh)) {
            (Sh = !0), vh.ti.Ze.Ke("CrashReport").pr("assertion failure", { stack: i, message: t }, document.body);
        }
    }
    window.assert = function (t, i) {
        t || xh(i);
    };
}
{
    const Mh = self.t;
    String.prototype.replaceAll ||
        (String.prototype.replaceAll = function (t, i) {
            return this.replace(new RegExp(Mh.URe(t), "g"), i);
        }),
        Array.prototype.at ||
            (Array.prototype.at = function (t) {
                if (((t = Math.trunc(t) || 0) < 0 && (t += this.length), !(t < 0 || t >= this.length))) return this[t];
            }),
        String.prototype.at ||
            (String.prototype.at = function (t) {
                if (((t = Math.trunc(t) || 0) < 0 && (t += this.length), !(t < 0 || t >= this.length))) return this[t];
            }),
        RegExp.escape ||
            (RegExp.escape = function (t) {
                return String(t).replace(/[\\^$*+?.()|[\]{}]/g, "\\$&");
            }),
        Set.prototype.isSubsetOf ||
            (Set.prototype.isSubsetOf = function (t) {
                if (!(t instanceof Set)) throw new TypeError("argument must be a Set");
                for (const i of this) if (!t.has(i)) return !1;
                return !0;
            }),
        navigator.storage &&
            !navigator.storage.estimate &&
            navigator.webkitTemporaryStorage &&
            navigator.webkitTemporaryStorage.queryUsageAndQuota &&
            (navigator.storage.estimate = function () {
                return new Promise((t, i) =>
                    navigator.webkitTemporaryStorage.queryUsageAndQuota((i, e) => t({ usage: i, quota: e }), i)
                );
            });
}
{
    const Eh = self.t;
    if (
        ((Eh.Y$ = {}),
        (Eh.Y$.NRe = (() => {
            try {
                if ("undefined" == typeof document) return !1;
                const t = document.createElement("div");
                if (void 0 === t.animate) return !1;
                return void 0 !== t.animate([{ opacity: "0" }, { opacity: "1" }], 1e3).reverse;
            } catch (t) {
                return !1;
            }
        })()),
        (Eh.Y$.h$i = "undefined" != typeof HTMLDialogElement),
        (Eh.Y$.$Re = !!self.requestIdleCallback),
        (Eh.Y$.ImageBitmap = !!self.createImageBitmap),
        (Eh.Y$.$es = !1),
        (Eh.Y$.zRe = !1),
        Eh.Y$.ImageBitmap)
    ) {
        try {
            self.createImageBitmap(new ImageData(32, 32), { premultiplyAlpha: "none" })
                .then(() => {
                    Eh.Y$.$es = !0;
                })
                .catch(() => {
                    Eh.Y$.$es = !1;
                });
        } catch (Ch) {
            Eh.Y$.$es = !1;
        }
        try {
            self.createImageBitmap(new ImageData(32, 32), { resizeWidth: 10, resizeHeight: 10 })
                .then((t) => {
                    Eh.Y$.zRe = 10 === t.width && 10 === t.height;
                })
                .catch(() => {
                    Eh.Y$.zRe = !1;
                });
        } catch (_h) {
            Eh.Y$.zRe = !1;
        }
    }
    if (
        ((Eh.Y$.VRe = !(!navigator.clipboard || !navigator.clipboard.readText)),
        (Eh.Y$.$4i = !(!navigator.permissions || !navigator.permissions.query)),
        (Eh.Y$.C4i = !1),
        Eh.Y$.$4i)
    ) {
        const Th = { name: "clipboard-read" };
        navigator.permissions
            .query(Th)
            .then(() => {
                Eh.Y$.C4i = !0;
            })
            .catch(() => {
                Eh.Y$.C4i = !1;
            });
    }
    (Eh.Y$.I4i = !!(navigator.permissions && navigator.clipboard && self.ClipboardItem)),
        (Eh.Y$.WRe = "undefined" != typeof Proxy),
        (Eh.Y$.HRe = (() => {
            if ("undefined" == typeof document) return !1;
            return void 0 !== document.createElement("a").download;
        })()),
        (Eh.Y$.KRe = "function" == typeof fetch),
        (Eh.Y$.qRe = !!(
            self.isSecureContext &&
            "Opera" !== Eh.fk.$s &&
            navigator.storage &&
            navigator.storage.persist
        )),
        (Eh.Y$.XRe = !!(self.isSecureContext && navigator.storage && navigator.storage.estimate)),
        (Eh.Y$.Vue = (() => {
            if ("undefined" == typeof document) return !1;
            if ("iOS" === Eh.fk.OS) return !1;
            const t = document.documentElement;
            return !!(
                t.requestFullscreen ||
                t.msRequestFullscreen ||
                t.mozRequestFullScreen ||
                t.webkitRequestFullscreen
            );
        })()),
        (Eh.Y$.ImageDecoder = void 0 !== self.ImageDecoder),
        (Eh.Y$.YRe = !!self.VideoEncoder),
        (Eh.Y$.bue = !!self.showOpenFilePicker),
        (Eh.Y$.JRe = !!self.queryLocalFonts),
        (Eh.Y$.UserActivation = !!navigator.userActivation),
        (Eh.Y$.wke = !1),
        (async () => {
            let t;
            "undefined" == typeof document
                ? (t = new OffscreenCanvas(32, 32))
                : ((t = document.createElement("canvas")), (t.width = 32), (t.height = 32));
            const i = t.getContext("2d");
            (i.fillStyle = "blue"), i.fillRect(0, 0, 32, 32);
            let e = null;
            try {
                t.convertToBlob
                    ? (e = await t.convertToBlob({ type: "image/webp", quality: 1 }))
                    : t.toBlob && (e = await new Promise((i) => t.toBlob(i, "image/webp", 1))),
                    (Eh.Y$.wke = e && "image/webp" === e.type);
            } catch (t) {
                Eh.Y$.wke = !1;
            }
        })();
}
{
    const Ih = self.t,
        Ph = self.YTe;
    (Ih.ZRe = function (t) {
        return "number" == typeof t;
    }),
        (Ih.Xl = function (t) {
            return Ih.ZRe(t) && isFinite(t);
        }),
        (Ih.PK = function (t) {
            if (!Ih.ZRe(t)) throw new TypeError("expected number");
        }),
        (Ih.P5 = function (t) {
            Ih.YI(t) || Ih.PK(t);
        }),
        (Ih.QRe = function (t, i, e) {
            if (!Ih.ZRe(t) || isNaN(t) || i > t || e < t) throw new RangeError("number outside of range");
        }),
        (Ih.Dke = function (...t) {
            for (let i of t) Ih.PK(i);
        }),
        (Ih.wi = function (t) {
            if (!Ih.Xl(t)) throw new TypeError("expected finite number");
        }),
        (Ih.HI = function (t) {
            Ih.YI(t) || Ih.wi(t);
        }),
        (Ih.Rfs = function (...t) {
            for (let i of t) Ih.wi(i);
        }),
        (Ih.tet = function (t) {
            return "string" == typeof t;
        }),
        (Ih.vu = function (t) {
            if (!Ih.tet(t)) throw new TypeError("expected string");
        }),
        (Ih.k$ = function (t) {
            Ih.YI(t) || Ih.vu(t);
        }),
        (Ih.Lke = function (...t) {
            for (let i of t) Ih.vu(i);
        }),
        (Ih.q$t = function (t) {
            if ("object" != typeof t || null === t) return !1;
            let i = Object.getPrototypeOf(t);
            return i ? i.constructor === Object : null === i;
        }),
        (Ih.Dpt = function (t) {
            if (!Ih.q$t(t)) throw new TypeError("expected simple object");
        }),
        (Ih.oN = function (t) {
            if (!Ih.YI(t) && !Ih.q$t(t)) throw new TypeError("expected simple object");
        }),
        (Ih.Gat = function (t) {
            return "object" == typeof t && null !== t && !Array.isArray(t);
        }),
        (Ih.x$ = function (t) {
            if (!Ih.Gat(t)) throw new TypeError("expected object");
        }),
        (Ih.Crt = function (t) {
            Ih.YI(t) || Ih.x$(t);
        }),
        (Ih.CMs = function (...t) {
            for (let i of t) Ih.x$(i);
        }),
        (Ih.nqt = function (t) {
            return Ih.Bke(t, Blob) && "string" == typeof t.name;
        }),
        (Ih.VNt = function (t) {
            if (!Ih.nqt(t)) throw new TypeError("expected file");
        }),
        (Ih.r1t = function (t) {
            Ih.YI(t) || Ih.VNt(t);
        }),
        (Ih.vwt = function (t) {
            return Array.isArray(t);
        }),
        (Ih._T = function (t) {
            if (!Ih.vwt(t)) throw new TypeError("expected array");
        }),
        (Ih.Pce = function (t) {
            Ih.YI(t) || Ih._T(t);
        }),
        (Ih.Uke = function (...t) {
            for (let i of t) Ih._T(i);
        }),
        (Ih.n4t = function (t) {
            return !!Ih.vwt(t) && (!t.length || !!Ih.vwt(t[0]));
        }),
        (Ih.UI = function (t) {
            if (!Ih.n4t(t)) throw new TypeError("expected 2d array");
            for (let i of t) if (!Ih.vwt(i)) throw new TypeError("expected 2d array");
        }),
        (Ih.$I = function (t) {
            Ih.YI(t) || Ih.UI(t);
        }),
        (Ih.GUt = function (t) {
            return "function" == typeof t;
        }),
        (Ih.yp = function (t, i) {
            if (!Ih.GUt(t)) throw new TypeError("expected function");
            if (!Ih.YI(i) && t !== i) throw new TypeError("expected same function reference");
        }),
        (Ih.kDt = function (t) {
            Ih.YI(t) || Ih.yp(t);
        }),
        (Ih.Nke = function (...t) {
            for (let i of t) Ih.yp(i);
        }),
        (Ih.SQi = function (t, ...i) {
            if (!Ih.GUt(t)) throw new TypeError("expected function");
            if (!i.length) throw new Error("missing comparison functions");
            for (let e of i) if (!Ih.YI(e) && t === e) return;
            throw new TypeError("expected same function reference");
        }),
        (Ih.U1i = function (...t) {
            if (!Ih.YI(t)) for (let i of t) Ih.kDt(i);
        }),
        (Ih.ca = function (t, i) {
            return t instanceof i;
        }),
        (Ih.YF = function (t, ...i) {
            for (let e of i) if (Ih.ca(t, e)) return !0;
            return !1;
        }),
        (Ih.Et = function (t, i) {
            if (!Ih.ca(t, i)) throw new TypeError("unexpected type");
        }),
        (Ih.qm = function (t, i) {
            Ih.YI(t) || Ih.Et(t, i);
        }),
        (Ih.jfs = function (t, ...i) {
            for (let e of i) Ih.Et(e, t);
        }),
        (Ih.UM = function (t, ...i) {
            if (!Ih.YF(t, ...i)) throw new TypeError("unexpected type");
        }),
        (Ih.fce = function (t, ...i) {
            if (!Ih.YI(t) && !Ih.YF(t, ...i)) throw new TypeError("unexpected type");
        }),
        (Ih.lte = function (t, i) {
            Ih._T(t);
            for (let e of t) if (!Ih.ca(e, i)) return !1;
            return !0;
        }),
        (Ih.Ofs = function (t) {
            Ih._T(t);
            for (let i of t) if (!Ih.Xl(i)) return !1;
            return !0;
        }),
        (Ih.HZ = function (t, i) {
            Ih._T(t);
            for (let e of t) Ih.Et(e, i);
        }),
        (Ih._Y = function (t, i) {
            if (!Ih.YI(t)) {
                Ih._T(t);
                for (let e of t) Ih.Et(e, i);
            }
        }),
        (Ih.$ke = function (t, i) {
            if (!Ih.YI(t)) {
                Ih._T(t);
                for (let e of t) Ih.yp(e, i);
            }
        }),
        (Ih.yQi = function (t, ...i) {
            Ih._T(t);
            for (let e of t) Ih.UM(e, ...i);
        }),
        (Ih._ai = function (t, ...i) {
            if (!Ih.YI(t)) {
                Ih._T(t);
                for (let e of t) Ih.UM(e, ...i);
            }
        }),
        (Ih.zke = function (t, i) {
            return !(Ih.YI(t) || !Ih.tet(t.nodeName)) && (!i || Ih.iy(t.nodeName, i));
        }),
        (Ih.UAe = function (t, i) {
            if (Ih.YI(t) || !Ih.tet(t.nodeName)) throw new TypeError("expected DOM node");
            if (i && !Ih.iy(t.nodeName, i)) throw new TypeError(`expected DOM '${i}' node`);
        }),
        (Ih.Vke = function (t, i) {
            Ih.YI(t) || Ih.UAe(t, i);
        }),
        (Ih.fmi = function (t, i) {
            return !(Ih.YI(t) || !Ih.tet(t.tagName)) && (!i || Ih.iy(t.tagName, i));
        }),
        (Ih.Gct = function (t, i) {
            if (Ih.YI(t) || !Ih.tet(t.tagName)) throw new TypeError("expected HTML element");
            if (i && !Ih.iy(t.tagName, i)) throw new TypeError(`expected HTML '${i}' element`);
        }),
        (Ih.Gmt = function (t, i) {
            Ih.YI(t) || Ih.Gct(t, i);
        }),
        (Ih.Wke = function (t) {
            return (
                Ih.fmi(t, "img") ||
                Ih.fmi(t, "canvas") ||
                Ih.fmi(t, "video") ||
                ("undefined" != typeof OffscreenCanvas && t instanceof OffscreenCanvas) ||
                ("undefined" != typeof ImageBitmap && t instanceof ImageBitmap)
            );
        }),
        (Ih.Rmi = function (t) {
            if (!Ih.Wke(t)) throw new TypeError("expected drawable");
        }),
        (Ih.Cv = function (t) {
            Ih.YI(t) || Ih.Rmi(t);
        }),
        (Ih.Hke = function (t) {
            return t instanceof ImageData || Ih.Wke(t);
        }),
        (Ih.MLi = function (t) {
            if (!Ih.Hke(t)) throw new TypeError("expected drawable or image data");
        }),
        (Ih.X_i = function (t) {
            if (!Ih.YI(t) && !Ih.Hke(t)) throw new TypeError("expected drawable or image data");
        }),
        (Ih.Kke = function (t) {
            return "string" == typeof t || (Ih.qke && t instanceof Ih.qke) || t instanceof Ih.nS;
        }),
        (Ih.$rt = function (t) {
            if (!Ih.Kke(t)) throw new TypeError("expected string-like");
        }),
        (Ih.Xke = function (t) {
            Ih.YI(t) || Ih.$rt(t);
        }),
        (Ih.Yke = function (...t) {
            for (let i of t) Ih.$rt(i);
        }),
        (Ih._2 = function () {
            throw new Error("must be overridden");
        }),
        (Ih.fxs = function () {
            throw new Error("not yet implemented");
        }),
        (Ih.Jke = function (t) {
            return t.constructor === function* () {}.constructor;
        }),
        (Ih.Zke = function (t) {
            if (!Ih.Jke(t)) throw new Error("expected generator function");
        }),
        (Ih.Qke = function (t) {
            return "function" === t[Symbol.iterator];
        }),
        (Ih.tOe = function (t) {
            if (!Ih.Qke(t)) throw new Error("expected iterable");
        }),
        (Ih.Xee = function (t) {
            return !Ih.YI(t);
        }),
        (Ih.YI = function (t) {
            return null == t;
        }),
        (Ih.Dce = function (t) {
            Ih._T(t);
            let i = t[0].constructor;
            for (let e of t) if (e.constructor !== i) return !1;
            return i;
        }),
        (Ih.ewt = function (t, i) {
            Ih._T(t);
            for (let e of t) if (!(e instanceof i)) return !1;
            return !0;
        });
    const Gh = Object.getPrototypeOf(Uint8Array);
    (Ih.iOe = function (t) {
        return Ih.ca(t, Gh);
    }),
        (Ih.eOe = function (t) {
            Ih.Et(t, Gh);
        }),
        (Ih.sOe = function (t) {
            Ih.nOe(t, Gh);
        }),
        (Ih.rOe = function (t, ...i) {
            if (!Ih.hOe(t, ...i)) throw new TypeError("unexpected type");
        }),
        (Ih.hOe = function (t, ...i) {
            for (const e of i) if (Ih.Bke(t, e)) return !0;
            return !1;
        }),
        (Ih.nOe = function (t, i) {
            if (!Ih.Bke(t, i)) throw new TypeError("unexpected type");
        }),
        (Ih.Bke = function (t, i) {
            for (; (t = Object.getPrototypeOf(t)); ) if (t.constructor.name === i.name) return !0;
            return !1;
        }),
        (Ph.PK = Ih.PK),
        (Ph.P5 = Ih.P5),
        (Ph.wi = Ih.wi),
        (Ph.HI = Ih.HI),
        (Ph.vu = Ih.vu),
        (Ph.k$ = Ih.k$),
        (Ph.x$ = Ih.x$),
        (Ph.Crt = Ih.Crt),
        (Ph._T = Ih._T),
        (Ph.Pce = Ih.Pce),
        (Ph.yp = Ih.yp),
        (Ph.kDt = Ih.kDt),
        (Ph.Et = Ih.Et),
        (Ph.qm = Ih.qm),
        (Ph.YI = Ih.YI);
}
{
    const Ah = self.t,
        Rh = new Set([
            "con",
            "prn",
            "aux",
            "nul",
            "com1",
            "com2",
            "com3",
            "com4",
            "com5",
            "com6",
            "com7",
            "com8",
            "com9",
            "lpt1",
            "lpt2",
            "lpt3",
            "lpt4",
            "lpt5",
            "lpt6",
            "lpt7",
            "lpt8",
            "lpt9",
        ]),
        kh = new Set(["\\", "/", ":", "*", "?", '"', "<", ">", "|", "~"]),
        Oh = new Set(["."]),
        Dh = new Set(["."]),
        Fh = 200;
    (Ah.LLs = function () {
        return Fh;
    }),
        (Ah.Mts = function (t) {
            if ((Ah.vu(t), !t)) return !1;
            const i = [...t.normalize()];
            return (
                !(i.length >= Fh) &&
                !i.some((t) => kh.has(t)) &&
                !Oh.has(i[0]) &&
                !Ah.Uts(i[0]) &&
                !Dh.has(i.at(-1)) &&
                !Ah.Uts(i.at(-1)) &&
                !Ah.crs(t)
            );
        }),
        (Ah.vfs = function (t, i = !0) {
            Ah.vu(t);
            const e = [...t.normalize()];
            if ((Ah.fte(e, (t) => kh.has(t)), i)) for (; e.length && (Dh.has(e.at(-1)) || Ah.Uts(e.at(-1))); ) e.pop();
            for (; e.length && (Oh.has(e[0]) || Ah.Uts(e[0])); ) e.shift();
            return e.length > Fh && Ah.Hc(e, Fh), e.join("");
        }),
        (Ah.CEs = function (t, i = "file") {
            const e = t.lastIndexOf(".");
            let s = -1 === e ? t : t.substr(0, e);
            const n = -1 === e ? "" : t.substr(e);
            return (s = Ah.vfs(s, !1)), (s && !Ah.crs(s)) || (s = i), s + n;
        }),
        (Ah.Dts = function (t, i = "folder") {
            return !(t = Ah.vfs(t)) || Ah.crs(t) ? i : t;
        }),
        (Ah.crs = function (t) {
            return Ah.vu(t), Rh.has(t.toLowerCase());
        });
}
{
    const Lh = self.t;
    let Bh = null,
        Uh = "";
    if ("undefined" != typeof document) {
        Bh = document;
        const Wh = document.querySelector("base");
        (Uh = Wh && Wh.hasAttribute("href") ? Wh.getAttribute("href") : ""),
            Uh && (Uh.startsWith("/") && (Uh = Uh.substr(1)), Uh.endsWith("/") || (Uh += "/"));
    }
    (Lh.oOe = function () {
        return Uh;
    }),
        (Lh.xa = function () {
            if (!Bh) return "";
            const t = Bh.location;
            return Lh.nj(t.origin + t.pathname) + Uh;
        }),
        (Lh.nj = function (t) {
            if ((Lh.vu(t), !t.length)) return t;
            if (t.endsWith("/") || t.endsWith("\\")) return t;
            const i = Math.max(t.lastIndexOf("/"), t.lastIndexOf("\\"));
            return -1 === i ? "" : t.substr(0, i + 1);
        }),
        (Lh.dts = function (t) {
            if ((Lh.vu(t), !t.length)) return t;
            if (t.endsWith("/") || t.endsWith("\\")) return "";
            const i = Math.max(t.lastIndexOf("/"), t.lastIndexOf("\\"));
            return -1 === i ? t : t.substr(i + 1);
        }),
        (Lh.sl = function (t) {
            Lh.vu(t);
            let i = t.lastIndexOf(".");
            return i < 1 ? "" : t.substr(i);
        }),
        (Lh.MEs = function (t, i) {
            Lh.vu(t), Lh.vu(i);
            const e = t.lastIndexOf(".");
            return -1 === e ? t + "." + i : t.substr(0, e + 1) + i;
        }),
        (Lh.iN = function (t) {
            let i = t.lastIndexOf(".");
            return i < 1 ? t : t.substr(0, i);
        }),
        (Lh.aOe = function (t) {
            return t.replace(/\\/g, "/");
        }),
        (Lh.lOe = function (t, i) {
            return i === (t ? Lh.sl(t).slice(1) : "");
        }),
        (Lh.uOe = function (t, i) {
            let e, s;
            return (
                Lh.nqt(t) && (e = Lh.iN(t.name)),
                Lh.tet(t) && (e = Lh.iN(t)),
                Lh.nqt(i) && (s = Lh.iN(i.name)),
                Lh.tet(i) && (s = Lh.iN(i)),
                e === s
            );
        }),
        (Lh.hbe = function (t) {
            t = Lh.aOe(t);
            let i = /^\w\:\//.exec(t);
            i ? ((i = i[0]), "/" !== (t = t.slice(3))[0] && (t = "/" + t)) : (i = ""),
                (t = t.replace(/\/{2,}/g, "/")).length > 1 && "/" === t.slice(-1) && (t = t.slice(0, -1));
            const e = t.lastIndexOf("/") + 1;
            let s,
                n = "",
                r = t,
                h = "";
            e > 0 && ((n = t.slice(0, e)), (r = t.slice(e))), (s = r);
            const o = r.lastIndexOf(".");
            o > 0 && ((h = r.slice(o)), (s = r.slice(0, -h.length)));
            return { dir: n, obe: r, name: s, root: i, ext: h, cOe: i + n + r };
        }),
        (Lh.STi = function (t, i) {
            return (
                Lh.wi(t),
                new Promise((e, s) => {
                    self.setTimeout(e, t, i);
                })
            );
        }),
        (Lh.dOe = function (t) {
            Lh.yp(t);
            try {
                t();
            } catch (t) {
                Lh.Xr && (() => {})("Swallowed exception: ", t);
            }
        }),
        (Lh.uC = function () {}),
        (Lh.iy = function (t, i) {
            return (
                Lh.k$(t),
                Lh.k$(i),
                "string" == typeof t &&
                    "string" == typeof i &&
                    (t === i || t.normalize().toLowerCase() === i.normalize().toLowerCase())
            );
        }),
        (Lh.fOe = function (t, i) {
            return (
                Lh.k$(t),
                Lh.k$(i),
                "string" == typeof t && "string" == typeof i && (t === i || t.normalize() === i.normalize())
            );
        }),
        (Lh.pOe = function (t, i, e) {
            (t[e++] = i[0]),
                (t[e++] = i[1]),
                (t[e++] = i[2]),
                (t[e++] = i[3]),
                (t[e++] = i[4]),
                (t[e++] = i[5]),
                (t[e++] = i[6]),
                (t[e++] = i[7]),
                (t[e++] = i[8]),
                (t[e++] = i[9]),
                (t[e++] = i[10]),
                (t[e++] = i[11]),
                (t[e++] = i[12]),
                (t[e++] = i[13]),
                (t[e++] = i[14]),
                (t[e] = i[15]);
        }),
        (Lh.Hc = function (t, i) {
            Lh._T(t), Lh.wi(i), (t.length = i);
        }),
        (Lh.yh = function (t) {
            Lh.Pce(t), t && 0 !== t.length && Lh.Hc(t, 0);
        }),
        (Lh.c4t = function (t) {
            if ((Lh.$I(t), t)) {
                for (let i = 0; i < t.length; i++) {
                    let e = t[i];
                    Lh.Hc(e, 0);
                }
                Lh.Hc(t, 0);
            }
        }),
        (Lh.e4s = function (t, i, e) {
            Lh._T(t), Lh.wi(i), (i |= 0);
            const s = t.length;
            if (!(i <= s)) for (let n = s; n < i; ++n) t.push(e);
        }),
        (Lh.Xv = function (t, i, e) {
            Lh._T(t), Lh.wi(i), (i |= 0);
            const s = t.length;
            i < s ? Lh.Hc(t, i) : i > s && Lh.e4s(t, i, e);
        }),
        (Lh.Rm = function (t, i) {
            Lh._T(t), Lh._T(i), Lh.yh(t), Lh.Uc(t, i);
        }),
        (Lh.Uc = function (t, i) {
            if ((Lh._T(t), Lh._T(i), i.length < 1e4)) t.push(...i);
            else for (let e = 0, s = i.length; e < s; ++e) t.push(i[e]);
        }),
        (Lh.mOe = function (t, i) {
            if ((i = Math.floor(i)) < 0 || i >= t.length) return;
            let e = t.length - 1;
            for (let s = i; s < e; ++s) t[s] = t[s + 1];
            Lh.Hc(t, e);
        }),
        (Lh.xei = function (t, i) {
            Lh._T(t);
            let e = t.indexOf(i);
            e >= 0 && t.splice(e, 1);
        }),
        (Lh.zie = function (t, i) {
            Lh._T(t), Lh._T(i);
            let e = t.length;
            if (i.length !== e) return !1;
            for (let s = 0; s < e; ++s) if (t[s] !== i[s]) return !1;
            return !0;
        }),
        (Lh.fte = function (t, i) {
            Lh._T(t), Lh.yp(i);
            let e = [],
                s = 0;
            for (let n = 0, r = t.length; n < r; ++n) {
                let r = t[n];
                i(r) ? e.push(r) : ((t[s] = r), ++s);
            }
            return Lh.Hc(t, s), e;
        }),
        (Lh.$gt = function (t, i) {
            Lh._T(t), Lh.Et(i, Set);
            const e = t.length;
            let s = 0;
            for (let e = 0, n = t.length; e < n; ++e) {
                let n = t[e];
                i.has(n) || (t[s++] = n);
            }
            return Lh.Hc(t, s), e - s;
        }),
        (Lh.wOe = function (t, i) {
            return t === Math.floor(t) && t >= 0 && t < i.length;
        }),
        (Lh.$ds = function (t, i) {
            if (!Lh.wOe(t, i)) throw new RangeError("array index out of bounds");
        }),
        (Lh.hS = function (t) {
            return t.slice();
        }),
        (Lh.l4t = function (t, i) {
            Lh._T(t), Lh.yp(i);
            let e = [];
            for (let s of t)
                if (Lh.Gat(s)) {
                    let t = i(s);
                    if (!t) throw new Error("missing clone");
                    if (t.constructor !== s.constructor) throw new Error("object is not a clone");
                    e.push(t);
                } else Lh.vwt(s) ? e.push(Lh.l4t(s, i)) : e.push(s);
            return e;
        }),
        (Lh.u4t = function (t) {
            Lh.UI(t);
            let i = [];
            for (let e of t) i.push(e.slice());
            return i;
        }),
        (Lh.Vps = function (t, i = " ") {
            return t
                ? t
                      .split(i)
                      .map((t) => t.trim())
                      .filter((t) => !!t)
                : [];
        }),
        (Lh.Pqi = function (t, i, e) {
            Lh.Et(t, Set), Lh.yp(i), Lh.kDt(e);
            const s = new Set();
            for (const n of t.values()) i(n) && (e ? s.add(e(n)) : s.add(n));
            return s;
        }),
        (Lh.xst = function (t, i) {
            return t.union ? t.union(i) : new Set([...t, ...i]);
        }),
        (Lh.SH = function (t, i) {
            for (const e of i) t.add(e);
            return t;
        }),
        (Lh.vo = function (t) {
            for (let i of t) return i;
            return null;
        }),
        (Lh.xor = function (t, i) {
            return !t != !i;
        }),
        (Lh.compare = function (t, i, e) {
            switch (i) {
                case 0:
                    return t === e;
                case 1:
                    return t !== e;
                case 2:
                    return t < e;
                case 3:
                    return t <= e;
                case 4:
                    return t > e;
                case 5:
                    return t >= e;
                default:
                    return !1;
            }
        }),
        (Lh.gOe = function (t) {
            Lh.x$(t);
            for (let i in t) if (t.hasOwnProperty(i)) return !0;
            return !1;
        }),
        (Lh.gke = function (t, i) {
            return (
                Lh.HZ(t, Promise),
                Lh.yp(i),
                t.length
                    ? new Promise((e, s) => {
                          const n = [];
                          let r = 0,
                              h = !1;
                          for (let o = 0, a = t.length; o < a; ++o)
                              n.push(void 0),
                                  t[o]
                                      .then((s) => {
                                          h || ((n[o] = s), ++r, r === t.length ? e(n) : i(r, t.length));
                                      })
                                      .catch((t) => {
                                          (h = !0), s(t);
                                      });
                      })
                    : Promise.resolve([])
            );
        });
    let Nh = [];
    (Lh.yOe = function (t) {
        Lh.yp(t), Nh.push(t);
    }),
        (Lh.bOe = function () {
            let t = 0;
            for (let i of Nh) {
                let e = i();
                Lh.wi(e), (t += e);
            }
            return Math.floor(t);
        });
    let jh = 1;
    const $h = new Map(),
        zh = new MessageChannel();
    (zh.port2.onmessage = function (t) {
        const i = t.data,
            e = $h.get(i);
        $h.delete(i), e && e(performance.now());
    }),
        (Lh.vOe = function (t) {
            Lh.yp(t);
            const i = jh++;
            return $h.set(i, t), zh.port1.postMessage(i), i;
        }),
        (Lh.SOe = function (t) {
            Lh.wi(t), $h.delete(t);
        }),
        (Lh.xOe = Lh.vOe),
        (Lh.pwe = function () {
            return new Promise((t) => Lh.xOe(t));
        });
    const Vh = new Set();
    (Lh.MOe = function (t) {
        Lh.yp(t);
        const i = self.requestAnimationFrame(async (e) => {
            await Lh.pwe(), Vh.has(i) && (Vh.delete(i), t(e));
        });
        return Vh.add(i), i;
    }),
        (Lh.EOe = function (t) {
            Lh.wi(t), Vh.has(t) && (self.cancelAnimationFrame(t), Vh.delete(t));
        });
}
{
    const Hh = self.t;
    (Hh.sj = function (t) {
        let i = window.getImportDocument(t),
            e = window.c3_releaseMainImportDoc;
        return i === document && e && (i = e), i;
    }),
        (Hh.kxe = function (t) {
            return Hh.vu(t), /^(?:[a-z\-]+:)?\/\//.test(t) || "data:" === t.substr(0, 5) || "blob:" === t.substr(0, 5);
        }),
        (Hh.COe = function (t) {
            return !Hh.kxe(t);
        }),
        (Hh.Pat = function (t, i) {
            const e = new t.constructor(t.type, t);
            e.xBt = !0;
            !i.dispatchEvent(e) && t.preventDefault();
        }),
        (Hh._Oe = function () {
            return window.matchMedia("(display-mode: fullscreen)").matches
                ? "fullscreen"
                : window.matchMedia("(display-mode: standalone)").matches
                  ? "app-info://platform/microsoft-store" === document.referrer
                      ? "standalone-microsoft-store"
                      : "standalone"
                  : window.matchMedia("(display-mode: minimal-ui)").matches
                    ? "minimal-ui"
                    : navigator.standalone
                      ? "standalone"
                      : "browser";
        }),
        (Hh.qfi = function (t, i) {
            for (Hh.UAe(t), Hh.vu(i), i = i.toUpperCase(); t.parentNode; )
                if ((t = t.parentNode).tagName === i) return t;
            return null;
        }),
        (Hh.$Dt = function (t, i) {
            for (Hh.Gmt(t), Hh._T(i); t; ) {
                for (const e of i) if (t.classList.contains(e)) return t;
                t = t.parentElement;
            }
            return null;
        }),
        (Hh.kkt = function (t, i) {
            return Hh.Gmt(t), Hh._T(i), !!Hh.$Dt(t, i);
        }),
        (Hh.KDt = function (t, i) {
            for (Hh.Gmt(t), Hh._T(i); t; ) {
                const e = t.tagName;
                for (const s of i) if (Hh.iy(e, s)) return t;
                t = t.parentElement;
            }
            return null;
        }),
        (Hh.ykt = function (t, i) {
            return Hh.Gmt(t), Hh._T(i), !!Hh.KDt(t, i);
        }),
        (Hh.sU = function (t, i) {
            for (Hh.Gct(t), Hh.Gct(i); t.parentNode; ) {
                if (t.parentNode === i) return !0;
                t = t.parentNode;
            }
            return !1;
        }),
        (Hh.TOe = function (t, i) {
            Hh.Gct(t);
            let e = getComputedStyle(t);
            const s = "absolute" === e.position,
                n = i ? /(auto|scroll|hidden)/ : /(auto|scroll)/;
            if ("fixed" === e.position) return document.body;
            for (let i = t; (i = i.parentElement); )
                if (
                    ((e = getComputedStyle(i)),
                    (!s || "static" !== e.position) && n.test(e.overflow + e.overflowY + e.overflowX))
                )
                    return i;
            return document.body;
        }),
        (Hh.IOe = function (t) {
            Hh.Gct(t);
            const i = t.childNodes;
            for (let t = 0, e = i.length; t < e; ++t) {
                let e = i[t];
                if (3 === e.nodeType) return e;
            }
            return null;
        }),
        (Hh.hWt = function (t) {
            Hh.UAe(t);
            do {
                if (t.parentNode && t.hasAttribute("contenteditable")) return !0;
                t = t.parentNode;
            } while (t);
            return !1;
        });
    const Kh = new Set(["textarea", "input", "button", "select", "option"]);
    Hh.POe = function (t) {
        const i = t || document;
        if (i.hasFocus()) {
            const t = i.activeElement,
                e = t.tagName.toLowerCase();
            return (
                !(!t || !t.hasAttribute("contenteditable") || "false" === t.getAttribute("contenteditable")) ||
                Kh.has(e)
            );
        }
        for (const t of Hh.ti.cE.GOe()) {
            const i = t?.CF();
            if (!i?.hasFocus()) continue;
            const e = i.activeElement,
                s = e.tagName.toLowerCase();
            return (
                !(!e || !e.hasAttribute("contenteditable") || "false" === e.getAttribute("contenteditable")) ||
                Kh.has(s)
            );
        }
        return !1;
    };
    const qh = new Set(["email", "number", "password", "search", "tel", "text", "url"]);
    (Hh.Put = function (t, i) {
        const e = t || document;
        if (e.hasFocus()) {
            if (Hh.AOe(e.activeElement, i)) return !0;
        } else
            for (const t of Hh.ti.cE.GOe()) {
                const e = t?.CF();
                if (e?.hasFocus() && Hh.AOe(e.activeElement, i)) return !0;
            }
        return !1;
    }),
        (Hh.AOe = function (t, i) {
            if (!t) return !1;
            const e = t.tagName.toLowerCase();
            if ("textarea" === e) return !0;
            if ("input" === e) {
                const e = t.getAttribute("type") || "text";
                return i
                    ? (self.assert(qh.has(i), `"${i}" is not a text editable type`),
                      i.toLowerCase() === e.toLowerCase())
                    : qh.has(e.toLowerCase());
            }
            return !(!t || !t.hasAttribute("contenteditable") || "false" === t.getAttribute("contenteditable"));
        }),
        (Hh.ROe = function t(i, e) {
            Hh.UAe(i), Hh.yp(e), e(i);
            for (let s = 0, n = i.childNodes.length; s < n; ++s) t(i.childNodes[s], e);
        }),
        (Hh.Due = function () {
            return !!(
                document.fullscreenElement ||
                document.mozFullScreenElement ||
                document.webkitFullscreenElement ||
                document.msFullscreenElement
            );
        }),
        (Hh.Lue = function (t) {
            let i;
            t.requestFullscreen
                ? (i = t.requestFullscreen())
                : t.msRequestFullscreen
                  ? (i = t.msRequestFullscreen())
                  : t.mozRequestFullScreen
                    ? (i = t.mozRequestFullScreen())
                    : t.webkitRequestFullscreen && (i = t.webkitRequestFullscreen()),
                i instanceof Promise && i.catch((t) => console.error("Failed to enter fullscreen mode: ", t));
        }),
        (Hh.Rue = function () {
            let t;
            document.exitFullscreen
                ? (t = document.exitFullscreen())
                : document.msExitFullscreen
                  ? (t = document.msExitFullscreen())
                  : document.mozCancelFullScreen
                    ? (t = document.mozCancelFullScreen())
                    : document.webkitExitFullscreen && (t = document.webkitExitFullscreen()),
                t instanceof Promise && t.catch((t) => console.error("Failed to exit fullscreen mode: ", t));
        }),
        (Hh.j1t = function (t) {
            Hh.wi(t);
            const i = self.devicePixelRatio;
            return Math.round(t * i) / i;
        }),
        (Hh.xN = function (t, i) {
            return (
                Hh.vu(t),
                Hh.vu(i),
                new Promise((e, s) => {
                    const n = document.createElement("a");
                    (n.textContent = t),
                        (n.href = i),
                        (n.download = t),
                        n.setAttribute("target", "_self"),
                        document.body.appendChild(n),
                        n.click(),
                        document.body.removeChild(n),
                        window.setTimeout(e, 16);
                })
            );
        }),
        (Hh.IRt = function (t, i) {
            Hh.vu(t), Hh.Et(i, Blob);
            let e = URL.createObjectURL(i);
            return setTimeout(() => URL.revokeObjectURL(e), 6e4), Hh.xN(t, e);
        }),
        (Hh.ZJ = function (t) {
            Hh.fDt && performance.mark(t + "-Start");
        }),
        (Hh.dq = function (t) {
            Hh.fDt && (performance.mark(t + "-End"), performance.measure(t, t + "-Start", t + "-End"));
        }),
        (Hh.kOe = function (t) {
            Hh.fDt && console.log(performance.getEntriesByName(t, "measure"));
        });
    const Xh = document.createElement("input");
    Xh.setAttribute("type", "color"),
        (Xh.className = "hiddenColorPicker"),
        (Xh.style.left = "-9999px"),
        (Xh.style.top = "-9999px"),
        (Xh.style.opacity = "0"),
        window.C3_IsPopupWindow || document.body.appendChild(Xh),
        (Hh.cW = function (t, i, e = -1, s = -1) {
            if ((Hh.vu(t), Hh.yp(i), e < 0 || s < 0)) {
                const [t, i] = Hh.ti.OF.jIt(document);
                (e = t), (s = i);
            }
            (Xh.style.left = e + "px"), (Xh.style.top = s + "px"), (Xh.onchange = null), (Xh.value = t);
            const n = () => {
                i(Xh.value);
            };
            (Xh.onblur = n), (Xh.onchange = n), requestAnimationFrame(() => Xh.click());
        });
    let Yh = "",
        Jh = "";
    function Zh(t) {
        t.clipboardData.setData("text/plain", Yh), t.stopPropagation(), t.preventDefault();
    }
    function Qh(t) {
        Hh.vu(t);
        const i = document.createElement("textarea");
        let e;
        (i.value = "x"), document.body.appendChild(i), i.select(), window.addEventListener("copy", Zh, !0), (Yh = t);
        try {
            e = document.execCommand("copy");
        } catch (t) {
            e = !1;
        }
        return (Yh = ""), window.removeEventListener("copy", Zh, !0), document.body.removeChild(i), e;
    }
    function to(t, i, e) {
        const s = self.lang,
            n = Hh.ti.Ze.Ke("Confirm");
        let r = null,
            h = null;
        const o = new Promise((t, i) => {
            (r = t), (h = i);
        });
        return (
            (n.OOe = () => {
                let n;
                (n = "function" == typeof e ? e() : Hh.BU(t, i)),
                    n
                        .then((t) => r(t))
                        .catch(() => {
                            Hh.u.o("ui.clipboard-copy-prompt");
                            const t = Hh.ti.Ze.Ke("OK");
                            t.hr(s(".caption")), t.pr(s(".failed-message"), i), Hh.u.it(), h();
                        });
            }),
            Hh.u.o("ui.clipboard-copy-prompt"),
            n.pr({ caption: s(".caption"), message: s(".message"), jT: s(".copy") }, i).then((t) => {
                null === t && h();
            }),
            Hh.u.it(),
            o
        );
    }
    (Hh.BU = function (t, i) {
        if ((Hh.Gmt(i), self.app.tF())) return Hh.ZT(t), Promise.resolve();
        if (navigator.clipboard && navigator.clipboard.writeText) {
            const e = i ? i.ownerDocument.defaultView : window;
            return Hh.Y$.VRe || Hh.ZT(t), self.FOe.DOe(() => e.navigator.clipboard.writeText(t));
        }
        return Hh.ZT(t), Qh(t), Promise.resolve();
    }),
        (Hh.AD = async function () {
            if (self.app.tF()) return !1;
            if (!Hh.Y$.VRe) return !1;
            if (!Hh.Y$.C4i) return !0;
            let t;
            try {
                t = await navigator.permissions.query({ name: "clipboard-read" });
            } catch (t) {
                return !1;
            }
            return "prompt" === t.state;
        }),
        (Hh.QT = async function (t, i) {
            Hh.vu(t);
            try {
                return await Hh.BU(t, i), !0;
            } catch (e) {
                try {
                    return await to(t, i), !0;
                } catch (t) {
                    return !1;
                }
            }
        }),
        (Hh.B4i = function (t, i) {
            return to("", t, i);
        }),
        (Hh.nF = function (t) {
            if ((Hh.Gmt(t), Hh.Y$.VRe && !self.app.tF())) {
                return (t ? t.ownerDocument.defaultView : window).navigator.clipboard.readText().catch(() => "");
            }
            return Promise.resolve(Hh.sF());
        }),
        (Hh.ZT = function (t) {
            Hh.vu(t), (Jh = t);
        }),
        (Hh.sF = function () {
            return Jh;
        });
    const io = document.createElement,
        eo = document.appendChild,
        so = MessageChannel,
        no = MessagePort.prototype.postMessage;
    (Hh.LOe = function (t) {
        Hh.x$(t), Hh.vu(t.src), Hh.vu(t.BOe), Hh.kDt(t.UOe), Hh.k$(t.sandbox);
        const i = io.call(document, "iframe"),
            e = new so(),
            s = e.port1,
            n = e.port2;
        t.UOe && (s.onmessage = t.UOe);
        const r = new Promise((e, r) => {
            i.addEventListener("load", () => {
                try {
                    i.contentWindow.postMessage({ type: "init", productType: self.app.Mke() }, t.BOe, [n]);
                } catch (t) {
                    return void r(t);
                }
                e({
                    br: i,
                    NOe: function (t, i) {
                        try {
                            no.call(s, t, i);
                        } catch (t) {
                            console.error("[Analytics] Failed to post message: ", t);
                        }
                    },
                });
            }),
                i.addEventListener("error", (t) => {
                    r(t);
                });
        });
        return (
            "string" == typeof t.sandbox && i.setAttribute("sandbox", t.sandbox),
            (i.style.display = "none"),
            (i.src = t.src),
            eo.call(t.parent || document.body, i),
            r
        );
    }),
        (Hh.kat = function (t, i, e) {
            if ((Hh.wi(i), Hh.wi(e), "function" == typeof t.elementsFromPoint)) return t.elementsFromPoint(i, e);
            if (t.msElementsFromPoint) {
                const s = t.msElementsFromPoint(i, e);
                return s ? Array.from(s) : [];
            }
            throw new Error("no elementsFromPoint method");
        }),
        (Hh.Jut = function (t, i) {
            Hh.BKt(t, i, "scrollBy");
        }),
        (Hh.wk = function (t, i) {
            Hh.BKt(t, i, "scrollTo");
        }),
        (Hh.BKt = function (t, i, e) {
            Hh.Gct(t), Hh.x$(i), Hh.wi(i.left), Hh.wi(i.top), Hh.k$(i.behavior), Hh.vu(e);
            const s = "scrollBehavior" in t.ownerDocument.documentElement.style;
            if ("function" == typeof t[e]) s ? t[e](i) : t[e](i.left, i.top);
            else
                switch (e) {
                    case "scrollTo":
                        (t.scrollLeft = i.left), (t.scrollTop = i.top);
                        break;
                    case "scrollBy":
                        (t.scrollLeft = t.scrollLeft + i.left), (t.scrollTop = t.scrollTop + i.top);
                }
        });
}
{
    const ro = self.t,
        ho = new Set(["text", "blob", "json", "arraybuffer"]),
        oo = new Set(["text", "blob", "json", "arraybuffer", "document"]);
    function ao(t) {
        const i = [];
        for (let e in t) t[e] && i.push(e + "=" + encodeURIComponent(t[e]));
        return i.join("&");
    }
    function lo(t, i, e, s, n, r, h, o) {
        return new Promise((a, l) => {
            const u = new XMLHttpRequest();
            if ((u.open(t, i), (u.responseType = "json" === n ? "text" : n), r && u.overrideMimeType(r), e))
                for (const [t, i] of Object.entries(e)) u.setRequestHeader(t, i);
            (u.onload = () => {
                if (u.status < 300 && u.status >= 200)
                    if ("json" === n)
                        try {
                            a(JSON.parse(u.response));
                        } catch (t) {
                            l(t);
                        }
                    else a(u.response);
                else l(new Error(`error fetching ${i} (${u.status} ${u.statusText})`));
            }),
                h && (u.onprogress = h),
                (u.onerror = () => l(new Error(`error fetching ${i} (${u.status} ${u.statusText})`))),
                (u.onabort = () => {
                    l(new DOMException("Aborted", "AbortError"));
                }),
                o && (o.aborted ? u.abort() : o.addEventListener("abort", () => u.abort())),
                u.send(s);
        });
    }
    async function uo(t, i, e, s, n, r) {
        const h = { method: t };
        s && (h.body = s), e && (h.headers = e), r && (h.signal = r);
        let o = null;
        try {
            o = await fetch(i, h);
        } catch (t) {
            throw (
                (t &&
                    "string" == typeof t.message &&
                    "failed to fetch" === t.message.toLowerCase() &&
                    (t.message += ` (url: ${i})`),
                t)
            );
        }
        if (!o.ok) throw new Error(`error fetching ${i} (${o.status} ${o.statusText})`);
        return o[n]();
    }
    (ro.KRe = function (t) {
        (t = ro.tet(t) ? { url: t } : t),
            ro.x$(t),
            ro.vu(t.url),
            ro.k$(t.method),
            ro.Crt(t.arguments),
            ro.Crt(t.query),
            ro.k$(t.response),
            ro.Crt(t.headers),
            ro.k$(t.encode),
            ro.k$(t.jOe),
            ro.kDt(t.onprogress),
            ro.kDt(t.onprogress),
            ro.Crt(t.signal);
        let i = t.url,
            e = t.data;
        const s = t.jOe,
            n = t.onprogress,
            r = t.headers,
            h = t.method || "GET",
            o = ao(t.arguments) || "",
            a = t.response || "text",
            l = t.signal;
        o && ((i += i.includes("?") ? "&" : "?"), (i += o)),
            e && ("json" === t.encode ? (e = JSON.stringify(t.data)) : "url" === t.encode && (e = ao(t.data)));
        const u = ro.Y$.KRe && ho.has(a),
            c = oo.has(a);
        if (u && !n) return uo(h, i, r, e, a, l);
        if (c) return lo(h, i, r, e, a, s, n, l);
        throw new TypeError(`invalid response type '${a}'`);
    }),
        (ro.gAe = function (t) {
            return ro.vu(t), ro.KRe({ url: t, mimeType: "text/plain; charset=utf-8" });
        }),
        (ro.$Oe = function (t, i) {
            return ro.vu(t), ro.k$(i), ro.KRe({ url: t, response: "document", jOe: i });
        }),
        (ro.MNt = function (t) {
            return ro.vu(t), ro.KRe({ url: t, response: "json" });
        }),
        (ro.ma = function (t, i, e) {
            ro.vu(t), ro.kDt(i);
            const s = Object.assign({}, { url: t, onprogress: i, response: "blob" }, e);
            return ro.KRe(s);
        }),
        (ro.ENt = function (t, i, e) {
            return (
                ro.vu(t),
                ro.vu(i),
                ro.kDt(e),
                ro.KRe({ url: t, onprogress: e, response: "blob" }).then((t) => ro.tN([t], i, { type: t.type }))
            );
        }),
        (ro.mPe = function (t, i = !0) {
            return ro.vu(t), window.addImport(t, i);
        }),
        (ro.zOe = function (t) {
            return (
                ro.vu(t),
                new Promise((i, e) => {
                    let s = document.createElement("link");
                    (s.onload = function () {
                        i(s);
                    }),
                        (s.onerror = function (t) {
                            e(t);
                        }),
                        (s.rel = "stylesheet"),
                        (s.href = t),
                        document.head.appendChild(s);
                })
            );
        }),
        (ro.ya = function (t, i = !1) {
            return (
                ro.vu(t),
                new Promise((e, s) => {
                    const n = document.createElement("script");
                    (n.onload = function () {
                        e(n);
                    }),
                        (n.onerror = function (t) {
                            s(t);
                        }),
                        (n.async = !1),
                        i || (n.type = "module"),
                        (n.src = t),
                        document.head.appendChild(n);
                })
            );
        }),
        (ro.aEs = function (t) {
            return (
                ro.vu(t),
                new Promise((i, e) => {
                    let s = new Image();
                    (s.onload = function () {
                        i(s);
                    }),
                        (s.onerror = function (t) {
                            e(t);
                        }),
                        (s.src = t);
                })
            );
        });
}
{
    const co = self.t;
    async function fo(t) {
        if (t.size < 24) return null;
        const i = t.slice(0, 24),
            e = await co.iEs(i),
            s = new DataView(e);
        return 2303741511 !== s.getUint32(0) || 218765834 !== s.getUint32(4) || 1229472850 !== s.getUint32(12)
            ? null
            : { width: s.getUint32(16), height: s.getUint32(20) };
    }
    async function po(t) {
        const i = await fo(t);
        if (i) return i;
        const e = await co.pC(t);
        return { width: e.width, height: e.height };
    }
    (co.W$t = function (t) {
        return co.vu(t), co.Roe(() => JSON.parse(t));
    }),
        (co.XN = async function (t) {
            co.vu(t);
            const i = await fetch(t);
            return await i.blob();
        }),
        (co.$$ = async function (t) {
            if (
                (co.VNt(t),
                self.assert(co.Y$.ImageDecoder, "ImageDecoder is not supported"),
                self.assert(co.Z$(t), "the file is not a multi image container"),
                t.c3Props && t.c3Props.extracted)
            )
                return [t];
            const i = t.type || co.MimeType.DVt(co.sl(t.name)).GN();
            try {
                const e = new self.ImageDecoder({ data: t.stream(), options: {}, type: i });
                if (!(e.completed instanceof Promise)) return [t];
                await e.completed;
                const s = e.tracks;
                if (!(s.ready instanceof Promise)) return [t];
                await s.ready;
                const n = s.selectedIndex;
                if ("number" != typeof n) return [t];
                const r = s[n].frameCount;
                if (1 === r) return [t];
                const h = async (i, s) => {
                        const n = await e.decode({ frameIndex: i }),
                            r = await createImageBitmap(n.image),
                            h = await co.UOi(r),
                            o = `${co.iN(t.name)}-${i}.png`,
                            a = co.tN([h], o, { type: "image/png", VOi: { extracted: !0 } });
                        s[i] = a;
                    },
                    o = new Array(r),
                    a = [];
                for (let t = 0, i = r; t < i; t++) a.push(h(t, o));
                return await Promise.all(a), e.close(), o;
            } catch (i) {
                return (() => {})("Error decoding multi image container: ", i), [t];
            }
        });
    let mo = null;
    (co.Fls = function (t) {
        return mo || (mo = co.m(co.pNt, 16)), mo.BD(() => po(t));
    }),
        (co.eC = async function (t) {
            const i = await co.pC(t);
            if (i.width > 0 && i.height > 0) return [i.width, i.height];
            {
                (i.style.position = "absolute"),
                    (i.style.left = "0px"),
                    (i.style.top = "0px"),
                    (i.style.visibility = "hidden"),
                    document.body.appendChild(i);
                const t = i.getBoundingClientRect();
                return document.body.removeChild(i), [t.width, t.height];
            }
        }),
        (co.HD = function (t) {
            return (
                co.Et(t, Blob),
                new Promise((i, e) => {
                    let s = new FileReader();
                    (s.onload = (t) => i(t.target.result)), (s.onerror = (t) => e(t)), s.readAsDataURL(t);
                })
            );
        }),
        (co.PSe = function (t, i) {
            co.vu(t), co.k$(i);
            let e,
                s,
                n = t.length,
                r = n >> 2,
                h = new Uint8Array(n),
                o = new Uint32Array(h.buffer, 0, r);
            for (e = 0, s = 0; e < r; ++e)
                o[e] =
                    t.charCodeAt(s++) |
                    (t.charCodeAt(s++) << 8) |
                    (t.charCodeAt(s++) << 16) |
                    (t.charCodeAt(s++) << 24);
            let a = 3 & n;
            for (; a--; ) (h[s] = t.charCodeAt(s)), ++s;
            return i ? new Blob([h], { type: i }) : new Blob([h]);
        }),
        (co.iEs = function (t) {
            return (
                co.nOe(t, Blob),
                "function" == typeof t.arrayBuffer
                    ? t.arrayBuffer()
                    : new Promise((i, e) => {
                          const s = new FileReader();
                          (s.onload = () => i(s.result)), (s.onerror = () => e(s.error)), s.readAsArrayBuffer(t);
                      })
            );
        }),
        (co.tJ = function (t) {
            return co.nOe(t, Blob), co.iEs(t).then((i) => new Blob([i], { type: t.type }));
        }),
        (co.wts = function (t, i) {
            return (
                co.VNt(t),
                co.k$(i),
                co
                    .iEs(t)
                    .then((e) =>
                        co.tN([e], i ?? t.name, {
                            type: t.type,
                            lastModified: t.lastModified,
                            path: t.path,
                            VOi: t.c3Props,
                        })
                    )
            );
        }),
        (co.tN = function (t, i = "", { type: e = "", lastModified: s = Date.now(), path: n = "", VOi: r = {} } = {}) {
            co._T(t), co.vu(i), co.vu(e), co.wi(s), co.vu(n), co.Dpt(r);
            let h = null;
            if (
                (n
                    ? ((h = new Blob(t, { type: e })), (h.name = i), (h.lastModified = s), (h.path = n))
                    : (h = new File(t, i, { type: e, lastModified: s })),
                r)
            ) {
                const t = Object.entries(r);
                if (t.length) {
                    h.c3Props = {};
                    for (const [i, e] of t) h.c3Props[i] = e;
                }
            }
            return h;
        }),
        (co.VOe = function (t, i = {}) {
            co.VNt(t), co.Dpt(i);
            const e = Object.entries(i);
            if (e.length) {
                t.c3Props = {};
                for (const [i, s] of e) t.c3Props[i] = s;
            }
            return t;
        }),
        (co.WOe = function (t) {
            return (
                co.rOe(t, FileList, Array),
                new Promise((i, e) => {
                    let s = [];
                    for (let i = 0; i < t.length; i++) {
                        let n = t[i];
                        co.VNt(n),
                            s.push(
                                co.wts(n).catch((t) => {
                                    (t.file = n), e(t);
                                })
                            );
                    }
                    return Promise.all(s).then(i);
                })
            );
        }),
        (co.a3t = function (t, i, e) {
            if (
                (co.k$(i),
                co.HI(e),
                "number" != typeof e && (e = 1),
                (i = i || "image/png"),
                (e = co.ft(e, 0, 1)),
                t.convertToBlob)
            )
                return t.convertToBlob({ type: i, quality: e });
            if (t.toBlob) return new Promise((s) => t.toBlob(s, i, e));
            throw new Error("could not convert canvas to blob");
        }),
        (co.jdi = function (t, i, e, s, n) {
            co.Gct(t, "canvas");
            let r = co.lx(t.width, t.height);
            if (co.Xl(i) && co.Xl(e) && co.Xl(s) && co.Xl(n)) {
                let h = s - i,
                    o = n - e;
                r.getContext("2d").drawImage(t, i, e, h, o, 0, 0, h, o);
            } else r.getContext("2d").drawImage(t, 0, 0);
            return r;
        }),
        (co.lx = function (t = 1, i = 1) {
            if ("undefined" != typeof document && "function" == typeof document.createElement) {
                const e = document.createElement("canvas");
                return (e.width = t), (e.height = i), e;
            }
            return new OffscreenCanvas(t, i);
        });
    let wo = null,
        go = null,
        yo = null;
    function bo() {
        yo || (yo = new co.oG(vo, 5)),
            yo.fm(),
            wo ||
                ((wo = document.createElement("canvas")),
                (wo.width = 32),
                (wo.height = 32),
                (go = wo.getContext("2d", { willReadFrequently: !0 })));
    }
    function vo() {
        (wo.width = 32), (wo.height = 32);
    }
    function So(t) {
        co.Rmi(t), bo(), (wo.width = t.width), (wo.height = t.height), go.drawImage(t, 0, 0);
    }
    function xo(t, i, e, s, n) {
        let r, h;
        co.Rmi(t),
            co.wi(i),
            (n = !!n),
            self.assert(i >= 1, "step count must be greater or equal to 1"),
            i % 2 != 0 ? ((r = e.canvas), (h = e)) : ((r = s.canvas), (h = s));
        let o = Math.floor(0.5 * t.width),
            a = Math.floor(0.5 * t.height);
        return (
            0 === o && (o = 1),
            0 === a && (a = 1),
            (r.width = o),
            (r.height = a),
            h.save(),
            h.scale(0.5, 0.5),
            (h.imageSmoothingEnabled = n),
            h.drawImage(t, 0, 0),
            h.restore(),
            n && To(h, o, a, 0.1),
            r
        );
    }
    co.yOe(() => (wo ? wo.width * wo.height * 4 : 0)),
        (co.pC = async function (t, i) {
            co.Et(t, Blob);
            let e = URL.createObjectURL(t);
            try {
                const t = await co.aEs(e);
                return URL.revokeObjectURL(e), (e = ""), i && "function" == typeof t.decode && (await t.decode()), t;
            } finally {
                e && URL.revokeObjectURL(e);
            }
        }),
        (co.xNt = function (t) {
            return (
                co.Et(t, Blob),
                co.Y$.$es
                    ? createImageBitmap(t, { premultiplyAlpha: "none" })
                    : co.Y$.ImageBitmap
                      ? createImageBitmap(t)
                      : co.pC(t, !0)
            );
        }),
        (co.oEs = function (t) {
            co.Rmi(t);
            const i = co.lx(4, 4).getContext("2d", { willReadFrequently: !0 });
            i.drawImage(t, 0, 0);
            try {
                i.getImageData(0, 0, 1, 1);
            } catch (t) {
                return !0;
            }
        }),
        (co.Cle = function (t) {
            return (
                co.Et(t, Blob),
                "function" == typeof t.text
                    ? t.text()
                    : new Promise((i, e) => {
                          let s = new FileReader();
                          (s.onload = (t) => i(t.target.result)), (s.onerror = (t) => e(t)), s.readAsText(t);
                      })
            );
        }),
        (co.pts = function (t) {
            return co.Et(t, Blob), co.Cle(t).then(co.W$t);
        }),
        (co.xji = function (t, i) {
            let e = i ? JSON.stringify(t, null, 4) : JSON.stringify(t);
            return new Blob([e], { type: "application/json" });
        }),
        (co.HOe = function (t) {
            return co.Et(t, ImageBitmap), So(t), go.getImageData(0, 0, t.width, t.height);
        }),
        (co.RLi = function (t) {
            co.Rmi(t), So(t);
            let i = go.getImageData(0, 0, t.width, t.height);
            return (wo.width = 1), (wo.height = 1), i;
        }),
        (co.UOi = function (t, i, e) {
            return co.Rmi(t), co.k$(i), co.HI(e), So(t), co.a3t(wo, i, e);
        }),
        (co.KOe = function (t, i, e) {
            return co.Rmi(t), co.k$(i), co.HI(e), So(t), wo.toDataURL(i || "image/png", e);
        }),
        (co.Jes = function (t, i = !1) {
            return (
                co.Et(t, Blob),
                (i = !!i),
                co.Y$.$es && !i
                    ? createImageBitmap(t, { premultiplyAlpha: "none" }).then(co.HOe)
                    : co.Y$.ImageBitmap && !i
                      ? createImageBitmap(t).then(co.HOe)
                      : co.pC(t, !0).then((t) => co.O4i(t))
            );
        }),
        (co.qOe = function (t) {
            return co.Et(t, Image), So(t), go.getImageData(0, 0, t.width, t.height);
        }),
        (co.O4i = function (t) {
            return co.Y$.$es
                ? (co.UM(t, Image, ImageBitmap), createImageBitmap(t, { premultiplyAlpha: "none" }).then(co.HOe))
                : co.Y$.ImageBitmap
                  ? (co.UM(t, Image, ImageBitmap), createImageBitmap(t).then(co.HOe))
                  : (co.Et(t, Image), co.Roe(() => co.qOe(t)));
        }),
        (co.rfs = function (t, i, e) {
            return (
                co.Et(t, ImageData),
                co.k$(i),
                co.HI(e),
                co.Y$.$es
                    ? createImageBitmap(t, { premultiplyAlpha: "none" }).then((t) => co.UOi(t, i, e))
                    : co.Y$.ImageBitmap
                      ? createImageBitmap(t).then((t) => co.UOi(t, i, e))
                      : co.Roe(
                            () => (
                                bo(),
                                (wo.width = t.width),
                                (wo.height = t.height),
                                go.putImageData(t, 0, 0),
                                co.a3t(wo, i, e)
                            )
                        )
            );
        }),
        (co.XOe = function (t, i, e) {
            return (
                co.Et(t, ImageData),
                co.k$(i),
                co.HI(e),
                "number" != typeof e && (e = 1),
                (i = i || "image/png"),
                (e = co.ft(e, 0, 1)),
                bo(),
                (wo.width = t.width),
                (wo.height = t.height),
                go.putImageData(t, 0, 0),
                wo.toDataURL(i, e)
            );
        }),
        (co.vHi = function (t, i, e, s = "columns") {
            if ((co.Rmi(t), co.wi(i), co.wi(e), co.k$(s), "columns" != s && "rows" != s))
                throw new Error("unexpected slicing mode. Supported values are 'columns' and 'rows'.");
            bo(), (wo.width = t.width), (wo.height = t.height), go.drawImage(t, 0, 0);
            let n = Math.floor(t.width / i),
                r = Math.floor(t.height / e),
                h = [],
                o = 0,
                a = 0;
            if ("columns" === s)
                for (o = 0; o < i; o++) for (a = 0; a < e; a++) h.push(go.getImageData(o * n, a * r, n, r));
            if ("rows" === s)
                for (a = 0; a < e; a++) for (o = 0; o < i; o++) h.push(go.getImageData(o * n, a * r, n, r));
            return h;
        });
    let Mo = null,
        Eo = null;
    function Co(t, i, e, s) {
        co.Rmi(t), co.wi(i), co.wi(e), (s = !!s);
        let n = t;
        const r = n.width,
            h = n.height;
        let o = 1,
            a = r > h ? r : h;
        const l = r > h ? i : e;
        for (; a > l; ) {
            if (0.5 * a < l) return n;
            (a *= 0.5),
                1 === o ? Mo || (Mo = co.lx().getContext("2d")) : 2 === o && (Eo || (Eo = co.lx().getContext("2d"))),
                (n = xo(n, o, Mo, Eo, s)),
                o++;
        }
        return n;
    }
    function _o(t, i, e, s, n, r) {
        for (let h = s - 1; h >= 0; --h)
            for (let o = e - 1; o >= 0; --o) {
                let a = h,
                    l = o,
                    u = 4 * (h * e + o),
                    c = 0,
                    d = 0,
                    f = 0;
                for (let i = 0; i < 3; i++)
                    for (let n = 0; n < 3; n++) {
                        const h = a + i - 1,
                            o = l + n - 1;
                        if (h >= 0 && h < s && o >= 0 && o < e) {
                            const s = 4 * (h * e + o),
                                a = r[3 * i + n];
                            (c += t[s] * a), (d += t[s + 1] * a), (f += t[s + 2] * a);
                        }
                    }
                const p = u + 1,
                    m = u + 2,
                    w = u + 3,
                    g = 1 - n;
                0 === o || o === e - 1 || 0 === h || h === s - 1
                    ? ((i[u] = t[u]), (i[p] = t[p]), (i[m] = t[m]), (i[w] = t[w]))
                    : ((i[u] = c * n + t[u] * g), (i[p] = d * n + t[p] * g), (i[m] = f * n + t[m] * g), (i[w] = t[w]));
            }
    }
    function To(t, i, e, s) {
        try {
            const n = [0, -1, 0, -1, 5, -1, 0, -1, 0],
                r = t.createImageData(i, e),
                h = r.data;
            _o(t.getImageData(0, 0, i, e).data, h, i, e, s, n), t.putImageData(r, 0, 0);
        } catch (t) {
            console.log(t);
        }
    }
    function Io(t, i, e, s, n, r, h) {
        if (i.width > e || i.height > s)
            if (((i.width / 2 < e || i.height / 2 < s) && (n = "low"), "high" === n)) {
                const n = Co(i, e, s, r);
                t.save(),
                    (t.imageSmoothingEnabled = r),
                    t.drawImage(n, 0, 0, e, s),
                    t.restore(),
                    r && To(t, e, s, 0.1),
                    Mo && ((Mo.canvas.width = 1), (Mo.canvas.height = 1)),
                    Eo && ((Eo.canvas.width = 1), (Eo.canvas.height = 1));
            } else {
                if ("low" !== n) throw new Error(`unexpected scale quality "${n}". Valid values are "low" and "high"`);
                t.save(),
                    (t.imageSmoothingEnabled = r),
                    t.drawImage(i, 0, 0, e, s),
                    t.restore(),
                    (h.quality && "high" !== h.quality) || (r && To(t, e, s, 0.1));
            }
        else
            t.save(),
                (t.imageSmoothingEnabled = r),
                t.drawImage(i, 0, 0, e, s),
                t.restore(),
                "high" === n && r && To(t, e, s, 0.1);
        return t.canvas;
    }
    function Po(t, i, e, s, n, r, h) {
        let o = s * i + e,
            a = o + r * i;
        for (let e = o; e < a; e += i) t.fill(h, e, e + n);
    }
    function Go(t, i, e, s) {
        return t[s * i + e];
    }
    (co.ANt = function (t, i, e, s = {}) {
        if ((co.MLi(t), co.wi(i), co.wi(e), i < 0 || e < 0)) throw new Error("invalid target size");
        if (co.ca(t, ImageData)) {
            const i = co.lx(t.width, t.height);
            i.getContext("2d").putImageData(t, 0, 0), (t = i);
        }
        const n = s.context ? s.context : co.lx().getContext("2d"),
            r = !s.hasOwnProperty("smooth") || !!s.smooth,
            h = !!s.hasOwnProperty("async") && !!s.async;
        let o = s.quality ? s.quality : "high";
        return (
            "high" !== o && "medium" !== o && "low" !== o && (o = "high"),
            (n.canvas.width = i),
            (n.canvas.height = e),
            0 === i || 0 === e
                ? h
                    ? Promise.resolve(n.canvas)
                    : n.canvas
                : t.width === i && t.height === e
                  ? (n.drawImage(t, 0, 0), h ? Promise.resolve(n.canvas) : n.canvas)
                  : h && co.Y$.ImageBitmap && co.Y$.zRe
                    ? (r || (o = "pixelated"),
                      createImageBitmap(t, { resizeWidth: i, resizeHeight: e, resizeQuality: o }).then(
                          (t) => (n.drawImage(t, 0, 0), n.canvas)
                      ))
                    : h
                      ? co.Roe(() => Io(n, t, i, e, o, r, s))
                      : Io(n, t, i, e, o, r, s)
        );
    }),
        (co.qis = function (t, i, e, s, n, r, h, o, a, l) {
            let u = o * s + h,
                c = u + l * s;
            for (let h = u, o = r * i + n; h < c; h += s, o += i) e.set(t.subarray(o, o + a), h);
        }),
        (co.Xis = function (t, i, e, s, n, r, h, o, a, l) {
            let u = r * i + n;
            const c = u + l * i;
            let d = o * s + h + l - 1;
            for (; u < c; u += i, --d) {
                const i = u + a;
                let n = d;
                for (let r = u; r < i; ++r, n += s) e[n] = t[r];
            }
        }),
        (co.YOe = function (t, i, e, s, n, r, h) {
            let o = s * i + e,
                a = r * i + n;
            t.copyWithin(a, o, o + h);
        }),
        (co.JOe = function (t, i, e, s, n, r, h) {
            let o = r * i + n,
                a = o + h * i;
            for (let n = o, r = s * i + e; n < a; n += i, r += i) t[n] = t[r];
        }),
        (co.HOi = function (t, i, e, s, n) {
            co.Et(t, ImageData), co.wi(i), co.wi(e), co.wi(s), co.wi(n), (i |= 0), (e |= 0), (s |= 0), (n |= 0);
            let r = 0 | t.width,
                h = 0 | t.height;
            if (i < 0 || i >= r || e < 0 || e >= h || i + s > r || e + n > h) throw new Error("invalid sub image");
            let o = new ImageData(s, n),
                a = new Uint32Array(t.data.buffer),
                l = new Uint32Array(o.data.buffer);
            return co.qis(a, r, l, s, i, e, 0, 0, s, n), o;
        }),
        (co.ZOe = function (t, i, e, s) {
            co.Et(t, ImageData), co.Et(i, ImageData), co.wi(e), co.wi(s), (e |= 0), (s |= 0);
            let n = 0 | t.width,
                r = 0 | t.height,
                h = 0 | i.width,
                o = 0 | i.height;
            if (e < 0 || s < 0 || e > n - h || s > r - o) throw new Error("invalid sub image");
            let a = new Uint32Array(i.data.buffer),
                l = new Uint32Array(t.data.buffer);
            co.qis(a, h, l, n, 0, 0, e, s, h, o);
        }),
        (co.QOe = function (t, i, e, s, n) {
            co.Et(t, ImageData), co.wi(i), co.wi(e), co.wi(s), co.wi(n), (i |= 0), (e |= 0), (s |= 0), (n |= 0);
            let r = 0 | t.width,
                h = 0 | t.height;
            if (i < 0 || i >= r || e < 0 || e >= h || i + s > r || e + n > h) throw new Error("invalid sub image");
            Po(new Uint32Array(t.data.buffer), r, i, e, s, n, 0);
        }),
        (co.Yis = function (t, i, e, s, n, r, h, o, a, l, u) {
            if (
                (co.Et(t, Uint32Array),
                co.wi(i),
                co.wi(e),
                co.wi(s),
                co.wi(n),
                co.wi(r),
                co.wi(h),
                co.wi(o),
                co.wi(a),
                co.wi(l),
                co.wi(u),
                r > i || l > i || h > e || u > e)
            )
                throw new Error("rectangle larger than destination");
            if (r > l || h > u) throw new Error("inner size larger than outer size");
            if (s < o || n < a || s + r > o + l || n + h > a + u)
                throw new Error("inner rectange not inside outer rectangle");
            if (r === l && h === u) return;
            let c = s + r,
                d = c - 1,
                f = o + l,
                p = n + h,
                m = p - 1,
                w = a + u,
                g = Go(t, i, s, n);
            Po(t, i, o, a, s - o, n - a, g);
            for (let e = a; e < n; ++e) co.YOe(t, i, s, n, s, e, r);
            (g = Go(t, i, d, n)), Po(t, i, c, a, f - c, n - a, g);
            for (let e = o; e < s; ++e) co.JOe(t, i, s, n, e, n, h);
            for (let e = c; e < f; ++e) co.JOe(t, i, d, n, e, n, h);
            (g = Go(t, i, s, m)), Po(t, i, o, p, s - o, w - p, g);
            for (let e = p; e < w; ++e) co.YOe(t, i, s, m, s, e, r);
            (g = Go(t, i, d, m)), Po(t, i, c, p, f - c, w - p, g);
        }),
        (co.tDe = function (t, i, e = 0, s = -1) {
            co.Et(t, ArrayBuffer), co.k$(i), co.wi(e), co.wi(s), s < 0 && (s = t.byteLength);
            let n = new Uint8Array(t, e, s);
            return co.iDe(n, i);
        }),
        (co.iDe = function (t, i) {
            return co.eOe(t), co.k$(i), new TextDecoder(i || "utf-8").decode(t);
        }),
        (co.eDe = function (t) {
            return co.vu(t), new TextEncoder("utf-8").encode(t).buffer;
        }),
        (co.sDe = function (t, i, e) {
            co.Et(t, ArrayBuffer), co.yp(i), co.PK(e);
            let s = 0,
                n = t.byteLength,
                r = [];
            for (; s < n; ) (e = Math.min(n - s, e)), r.push(new i(t, s, e)), (s += e);
            return r;
        });
    const Ao = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    (co.nDe = function (t) {
        const i = (i) => (i < e ? t[i] : (n++, 0)),
            e = t.length,
            s = [];
        let n = 0,
            r = 0;
        for (; r < e; ) {
            const t = (i(r++) << 16) + (i(r++) << 8) + i(r++);
            s.push(Ao[(t >>> 18) & 63], Ao[(t >>> 12) & 63], Ao[(t >>> 6) & 63], Ao[63 & t]);
        }
        for (r = s.length - n; r < s.length; ) s[r++] = "=";
        return s.join("");
    }),
        (co.rDe = function (t) {
            const i = t.indexOf("="),
                e = t.length,
                s = (e >> 2) << 2,
                n = e - s,
                r = i > -1 ? e - i : 0;
            if (r > 2) throw new Error("Invalid padding");
            let h = e;
            s === i ? (h = s - r) : 0 === n && i > -1 && (h -= r);
            const o = (3 * h) >> 2,
                a = new Uint8Array(o);
            let l = 0,
                u = 0;
            const c = () => {
                    if (l >= h) return 0;
                    const i = t.charCodeAt(l++);
                    if (i > 64 && i < 91) return i - 65;
                    if (i > 96 && i < 123) return i - 71;
                    if (i > 47 && i < 58) return i + 4;
                    if (43 === i) return 62;
                    if (47 === i) return 63;
                    if (61 === i) return 0;
                    throw new Error("Invalid character at column " + (l - 1));
                },
                d = (t) => u < o && (a[u++] = t);
            for (; u < o; ) {
                const t = (c() << 18) + (c() << 12) + (c() << 6) + c();
                d((t >>> 16) & 255), d((t >>> 8) & 255), d(255 & t);
            }
            return a;
        });
}
{
    const Ro = self.t,
        ko = new Map();
    let Oo;
    function Do(t, i) {
        let e = Ro.getType(t),
            s = Ro.getType(i);
        return "null" === e || "null" === s || ("undefined" !== e && "undefined" !== s && e === s);
    }
    (Ro.hDe = function (t, i) {
        console.log(`%c${t}`, `font-weight: bold; color:${i}`);
    }),
        (Ro.oDe = function (t, ...i) {
            ko.has(t) || ko.set(t, -1),
                -1 === ko.get(t) &&
                    ko.set(
                        t,
                        requestAnimationFrame(() => {
                            console.log(`%c${t}`, "font-weight: bold", ...i), ko.set(t, -1);
                        })
                    );
        }),
        (Ro.aDe = function (t) {
            performance.mark(t),
                Oo || (Oo = new Map()),
                Oo.has(t) ||
                    Oo.set(t, {
                        h1: 0,
                        total: 0,
                        lDe: 0,
                        uDe: 1,
                        toString: function () {
                            return `${t} :: current => ${this.h1.toPrecision(3)} :: average => ${this.lDe.toPrecision(3)} :: calls => ${this.uDe}`;
                        },
                    });
        }),
        (Ro.cDe = function (t) {
            performance.measure(`measure-${t}`, t);
            const i = performance.getEntriesByName(`measure-${t}`)[0],
                e = Oo.get(t);
            (e.h1 = i.duration),
                (e.total += e.h1),
                (e.lDe = e.total / e.uDe),
                console.log(e.toString()),
                e.uDe++,
                performance.clearMarks(t),
                performance.clearMeasures(`measure-${t}`);
        }),
        (Ro.BRe = function () {
            return new Error().stack;
        }),
        (Ro.dDe = function () {}),
        (Ro.cast = function (t, i) {
            return t && t instanceof i ? t : null;
        }),
        (Ro.getName = function (t) {
            return void 0 === t
                ? "undefined"
                : null === t
                  ? "null"
                  : "boolean" == typeof t
                    ? "<boolean>"
                    : Ro.ZRe(t)
                      ? "<number>"
                      : Ro.tet(t)
                        ? "<string>"
                        : Ro.vwt(t)
                          ? "<array>"
                          : "symbol" == typeof t
                            ? "<" + t.toString() + ">"
                            : Ro.GUt(t)
                              ? t.name && "Function" !== t.name
                                  ? t.name
                                  : "<anonymous function>"
                              : "object" == typeof t
                                ? t.constructor && t.constructor.name && "Object" !== t.constructor.name
                                    ? t.constructor.name
                                    : "<anonymous object>"
                                : "<unknown>";
        }),
        (Ro.getType = function (t) {
            return null === t ? "null" : Array.isArray(t) ? "array" : typeof t;
        }),
        (Ro.range = function* (t, i) {
            if (!isFinite(Math.abs(t - i))) throw new Error("Invalid parameters");
            if (t > i) for (let e = t - 1; e >= i; e--) yield e;
            else for (let e = t; e < i; e++) yield e;
        });
    let Fo = new Map(),
        Lo = new Map(),
        Bo = new WeakMap(),
        Uo = new WeakMap();
    Ro.fDe = {};
    const No = new Set(["then", "splice"]);
    function jo(t) {
        (() => {})("[Defence] " + t + " @", Ro.BRe());
    }
    (Ro.fDe.get = function (t, i) {
        return (
            i in t ||
                "symbol" == typeof i ||
                No.has(i) ||
                jo(`Accessed missing property '${i}' from defended object '${Ro.getName(t)}', returning undefined`),
            Uo.has(t) &&
                "symbol" != typeof i &&
                !No.has(i) &&
                jo(
                    `Accessed property '${i}' on a released object '${Ro.getName(t)}'\nObject was originally released at: ${Uo.get(t)})\nCall stack at access: `
                ),
            t[i]
        );
    }),
        (Ro.fDe.set = function (t, i, e) {
            return (
                i in t ||
                    Fo.has(t) ||
                    jo(`Set non-existent property '${i}' to '${e}' on defended object '${Ro.getName(t)}'`),
                Do(t[i], e) ||
                    Fo.has(t) ||
                    jo(
                        `Set '${Ro.getType(t[i])}' property '${i}' to type '${Ro.getType(e)}' on defended object '${Ro.getName(t)}'`
                    ),
                Uo.has(t) &&
                    jo(
                        `Set property '${i}' on a released object '${Ro.getName(t)}'\nObject was originally released at: ${Uo.get(t)})\nCall stack at access: `
                    ),
                (t[i] = e),
                !0
            );
        }),
        (Ro.fDe.deleteProperty = function (t, i) {
            throw new ReferenceError(`Cannot delete property '${i}' from defended object '${Ro.getName(t)}'`);
        }),
        (Ro.fDe.defineProperty = function (t, i, e) {
            throw new ReferenceError(`Cannot define property '${i}' on defended object '${Ro.getName(t)}'`);
        }),
        (Ro.fDe.enumerate = function (t) {
            throw new ReferenceError(`Cannot enumerate defended object '${Ro.getName(t)}'`);
        });
    let $o = -1;
    function zo() {
        if ((($o = -1), Fo.size > 0 || Lo.size > 0)) {
            let t = [...new Set([...Fo.keys()].map((t) => Ro.getName(t)))].join(",");
            (() => {})(
                `An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`
            ),
                Fo.clear(),
                Lo.clear();
        }
    }
    (Ro.MV = class {
        constructor() {
            if (!Ro.XTe || !Ro.Y$.WRe) return;
            let t = new.target,
                i = Object.create(t.prototype),
                e = new Proxy(i, Ro.fDe);
            return Fo.set(i, e), Lo.set(e, i), Bo.set(e, i), -1 === $o && ($o = requestAnimationFrame(zo)), e;
        }
    }),
        (Ro.pDe = function (t) {
            if ((Ro.x$(t), Ro.XTe && Ro.Y$.WRe && t instanceof Ro.MV)) {
                if (!Lo.has(t)) return t;
                let i = Lo.get(t);
                return Lo.delete(t), Fo.delete(i), t;
            }
            return Ro.Xr ? Object.seal(t) : t;
        }),
        (Ro.m = function (t, ...i) {
            let e;
            Ro.yp(t);
            try {
                e = new t(...i);
            } catch (t) {
                throw (Lo.clear(), Fo.clear(), t);
            }
            return Ro.XTe && Ho(t, e), Ro.pDe(e);
        }),
        (Ro.Ut = function (t) {
            let i = Bo.get(t);
            i && Uo.set(i, Ro.BRe());
        }),
        (Ro.gi = function (t) {
            let i = Bo.get(t);
            return !!i && !!Uo.get(i);
        });
    let Vo = new Map();
    function Wo(t) {
        let i = new Set();
        for (let e in t) i.add(e);
        return i;
    }
    function Ho(t, i) {
        let e = Wo(i),
            s = Vo.get(t);
        if (s) {
            let i = [];
            for (let t of s.values()) e.has(t) ? e.delete(t) : i.push(t);
            Ro.Uc(i, [...e]),
                i.length &&
                    (() => {})(
                        `[Defence] '${Ro.getName(t)}' constructor creates inconsistent properties: ${i.join(", ")}`
                    );
        } else Vo.set(t, e);
    }
    Ro.mDe = class {
        constructor(t) {
            (this.Gqt = ""), t && this.start(t);
        }
        start(t) {
            Ro.fDt && ((this.Gqt = t), performance.mark(this.Gqt + "-Start"));
        }
        end() {
            Ro.fDt &&
                (performance.mark(this.Gqt + "-End"),
                performance.measure(this.Gqt, this.Gqt + "-Start", this.Gqt + "-End"));
        }
        next(t) {
            Ro.fDt && (this.end(), (this.Gqt = t), performance.mark(this.Gqt + "-Start"));
        }
    };
}
{
    const Ko = self.t;
    Ko.wDe = function (t) {
        Ko.Et(t, self.Va);
        const i = self.app.zNs();
        return i && t.CN()
            ? Ko.iEs(t.Nh()).then(
                  (t) =>
                      new Promise((e) => {
                          i.decodeAudioData(
                              t,
                              (t) => {
                                  e(t.duration);
                              },
                              (t) => {
                                  e(-1);
                              }
                          );
                      })
              )
            : Promise.resolve(-1);
    };
}
{
    const qo = self.t,
        Xo = 2 * Math.PI,
        Yo = Math.PI / 180,
        Jo = 180 / Math.PI;
    (qo.wrap = function (t, i, e) {
        (t = Math.floor(t)), (i = Math.floor(i));
        const s = (e = Math.floor(e)) - i;
        if (0 === s) return e;
        if (t < i) {
            const n = e - ((i - t) % s);
            return n === e ? 0 : n;
        }
        return i + ((t - i) % s);
    }),
        (qo.Vft = function (t, i, e, s, n) {
            const r = e - i;
            if (0 === r && 0 === s) return t;
            return ((t - i) * (n - s)) / r + s;
        }),
        (qo.normalize = function (t, i, e) {
            return i - e === 0 ? 1 : (t - i) / (e - i);
        }),
        (qo.ft = function (t, i, e) {
            return t < i ? i : t > e ? e : t;
        }),
        (qo.lk = function (t) {
            return (t %= Xo) < 0 && (t += Xo), t;
        }),
        (qo.ut = function (t) {
            return t * Yo;
        }),
        (qo.dt = function (t) {
            return t * Jo;
        }),
        (qo.gDe = function (t, i) {
            return Math.sqrt(t * t + i * i);
        }),
        (qo.Hm = function (t, i, e) {
            return Math.sqrt(t * t + i * i + e * e);
        }),
        (qo.gt = function (t, i, e, s) {
            return qo.gDe(e - t, s - i);
        }),
        (qo.V1 = function (t, i, e, s) {
            const n = e - t,
                r = s - i;
            return n * n + r * r;
        }),
        (qo.wt = function (t, i, e, s) {
            return Math.atan2(s - i, e - t);
        }),
        (qo.vt = function (t, i) {
            if (t === i) return 0;
            let e = Math.sin(t),
                s = Math.cos(t),
                n = e * Math.sin(i) + s * Math.cos(i);
            return n >= 1 ? 0 : n <= -1 ? Math.PI : Math.acos(n);
        }),
        (qo.It = function (t, i, e) {
            let s = Math.sin(t),
                n = Math.cos(t),
                r = Math.sin(i),
                h = Math.cos(i);
            return Math.acos(s * r + n * h) > e ? (n * r - s * h > 0 ? qo.lk(t + e) : qo.lk(t - e)) : qo.lk(i);
        }),
        (qo.yDe = function (t, i) {
            let e = Math.sin(t);
            return Math.cos(t) * Math.sin(i) - e * Math.cos(i) <= 0;
        }),
        (qo.Mt = function (t, i, e, s = 0) {
            let n = qo.vt(t, i);
            const r = Xo * s;
            return qo.yDe(i, t) ? qo.lk(t + (n + r) * e) : qo.lk(t - (n + r) * e);
        }),
        (qo.fDs = function (t, i, e, s = 0) {
            const n = qo.vt(t, i),
                r = Xo * s;
            return qo.yDe(i, t) ? qo.lk(t + (n + r) * e) : qo.lk(t + (Xo - n + r) * e);
        }),
        (qo.dDs = function (t, i, e, s = 0) {
            const n = qo.vt(t, i),
                r = Xo * s;
            return qo.yDe(i, t) ? qo.lk(t - (-Xo + n - r) * e) : qo.lk(t - (n + r) * e);
        }),
        (qo.bDe = function (t, i) {
            const e = qo.vt(t, i);
            return qo.yDe(t, i) ? qo.lk(i - e) : qo.lk(i + e);
        }),
        (qo.bt = function (t, i, e) {
            return t + e * (i - t);
        }),
        (qo.yt = function (t, i, e) {
            return t === i ? 0 : (e - t) / (i - t);
        }),
        (qo.Ag = function (t, i, e, s, n) {
            return qo.bt(s, n, qo.yt(t, i, e));
        }),
        (qo.xt = function (t, i, e, s) {
            return qo.bt(qo.bt(t, i, s), qo.bt(i, e, s), s);
        }),
        (qo.St = function (t, i, e, s, n) {
            return qo.bt(qo.xt(t, i, e, n), qo.xt(i, e, s, n), n);
        }),
        (qo.Ct = function (t, i, e) {
            return (t + i + (t - i) * Math.cos(e * Math.PI)) / 2;
        }),
        (qo.vDe = function (t) {
            return t > 0 && !((t - 1) & t);
        }),
        (qo.Sn = function (t) {
            --t;
            for (let i = 1; i < 32; i <<= 1) t |= t >> i;
            return t + 1;
        }),
        (qo.XU = function (t, i) {
            return Math.round(t * i) / i;
        }),
        (qo.lDs = function (t, i) {
            return Math.floor(t * i) / i;
        }),
        (qo.a$ = function (t, i) {
            i = Math.max(Math.floor(i), 0);
            const e = Math.pow(10, i);
            return Math.round(t * e) / e;
        }),
        (qo.SDe = function (t) {
            return (Math.floor(t) !== t && t.toString().split(".")[1].length) || 0;
        }),
        (qo.toFixed = function (t, i) {
            qo.PK(t), qo.wi(i);
            let e = t.toFixed(i),
                s = e.length - 1;
            for (; s >= 0 && "0" === e.charAt(s); --s);
            return s >= 0 && "." === e.charAt(s) && --s, s < 0 ? e : e.substr(0, s + 1);
        }),
        (qo.Pt = function (t, i, e) {
            return qo.ft(t, 0, 255) | (qo.ft(i, 0, 255) << 8) | (qo.ft(e, 0, 255) << 16);
        });
    const Zo = 1024,
        Qo = 1023,
        ta = 16384,
        ia = 8191,
        ea = -8192;
    (qo.xDe = function (t, i, e, s) {
        return (
            (t = qo.ft(Math.floor(1024 * t), ea, ia)),
            (i = qo.ft(Math.floor(1024 * i), ea, ia)),
            (e = qo.ft(Math.floor(1024 * e), ea, ia)),
            (s = qo.ft(Math.floor(s * Qo), 0, Qo)),
            t < 0 && (t += ta),
            i < 0 && (i += ta),
            e < 0 && (e += ta),
            -(t * ta * ta * Zo + i * ta * Zo + e * Zo + s)
        );
    }),
        (qo.Vt = function (t, i, e) {
            return qo.xDe(t, i, e, 1);
        }),
        (qo.MDe = function (t) {
            if (t >= 0) return (255 & t) / 255;
            {
                let i = Math.floor(-t / (ta * ta * Zo));
                return i > ia && (i -= ta), i / 1024;
            }
        }),
        (qo.EDe = function (t) {
            if (t >= 0) return ((65280 & t) >> 8) / 255;
            {
                let i = Math.floor((-t % (ta * ta * Zo)) / (ta * Zo));
                return i > ia && (i -= ta), i / 1024;
            }
        }),
        (qo.CDe = function (t) {
            if (t >= 0) return ((16711680 & t) >> 16) / 255;
            {
                let i = Math.floor((-t % (ta * Zo)) / Zo);
                return i > ia && (i -= ta), i / 1024;
            }
        }),
        (qo._De = function (t) {
            if (0 === (i = t) && 1 / i < 0) return 0;
            if (t >= 0) return 1;
            return Math.floor(-t % Zo) / Qo;
            var i;
        }),
        (qo.TDe = function (t, i) {
            for (qo.wi(t), qo.wi(i), t = Math.floor(t), i = Math.floor(i); 0 !== i; ) {
                let e = i;
                (i = t % i), (t = e);
            }
            return t;
        });
    const sa = [
        [3, 2],
        [4, 3],
        [5, 4],
        [5, 3],
        [6, 5],
        [14, 9],
        [16, 9],
        [16, 10],
        [21, 9],
    ];
    (qo.bse = function (t, i) {
        if ((qo.wi(t), qo.wi(i), (t = Math.floor(t)) === (i = Math.floor(i)))) return [1, 1];
        for (let e of sa) {
            let s = (t / e[0]) * e[1];
            if (Math.abs(i - s) < 1) return e.slice(0);
            if (((s = (t / e[1]) * e[0]), Math.abs(i - s) < 1)) return [e[1], e[0]];
        }
        let e = qo.TDe(t, i);
        return [t / e, i / e];
    }),
        (qo.IDe = function (t, i, e, s, n, r, h, o) {
            const a = Math.min(t, e),
                l = Math.max(t, e),
                u = Math.min(n, h),
                c = Math.max(n, h);
            if (l < u || a > c) return !1;
            const d = Math.min(i, s),
                f = Math.max(i, s),
                p = Math.min(r, o),
                m = Math.max(r, o);
            if (f < p || d > m) return !1;
            const w = n - t + h - e,
                g = r - i + o - s,
                y = e - t,
                b = s - i,
                v = h - n,
                S = o - r,
                x = Math.abs(b * v - S * y),
                M = v * g - S * w;
            if (Math.abs(M) > x) return !1;
            const E = y * g - b * w;
            return Math.abs(E) <= x;
        }),
        (qo.PDe = function (t, i, e, s, n, r, h, o, a, l, u, c) {
            const d = Math.min(a, u),
                f = Math.max(a, u);
            if (r < d || n > f) return !1;
            const p = Math.min(l, c),
                m = Math.max(l, c);
            if (o < p || h > m) return !1;
            const w = a - t + u - e,
                g = l - i + c - s,
                y = e - t,
                b = s - i,
                v = u - a,
                S = c - l,
                x = Math.abs(b * v - S * y),
                M = v * g - S * w;
            if (Math.abs(M) > x) return !1;
            const E = y * g - b * w;
            return Math.abs(E) <= x;
        }),
        (qo.GDe = function (t, i, e, s, n) {
            const r = Math.min(t, e),
                h = Math.max(t, e),
                o = Math.min(i, s),
                a = Math.max(i, s),
                l = n.ss(),
                u = n.ns(),
                c = n.gg(),
                d = n.Cr(),
                f = n.vr(),
                p = n.Mr(),
                m = n.ao(),
                w = n.lo();
            return (
                qo.PDe(t, i, e, s, r, h, o, a, l, u, c, d) ||
                qo.PDe(t, i, e, s, r, h, o, a, c, d, f, p) ||
                qo.PDe(t, i, e, s, r, h, o, a, f, p, m, w) ||
                qo.PDe(t, i, e, s, r, h, o, a, m, w, l, u)
            );
        }),
        (qo.ADe = function (t, i, e, s, n) {
            const r = Math.min(t, e),
                h = Math.max(t, e),
                o = Math.min(i, s),
                a = Math.max(i, s);
            let l = 0;
            for (let u = n.length - 4; l <= u; l += 2)
                if (qo.PDe(t, i, e, s, r, h, o, a, n[l], n[l + 1], n[l + 2], n[l + 3])) return !0;
            return qo.PDe(t, i, e, s, r, h, o, a, n[l], n[l + 1], n[0], n[1]);
        });
    const na = 2,
        ra = 1e-6;
    (qo.RDe = function (t, i, e, s, n, r, h, o) {
        const a = e - t,
            l = o - r,
            u = a * l - (s - i) * (h - n);
        if (0 === u) return na;
        const c = ((i - s) * (h - t) + a * (o - i)) / u;
        return 0 < c && c < 1 + ra ? (l * (h - t) + (n - h) * (o - i)) / u : na;
    }),
        (qo.kDe = function (t, i, e, s, n, r, h, o, a) {
            const l = (h - n) * a,
                u = (o - r) * a;
            return qo.RDe(t, i, e, s, n - l, r - u, h + l, o + u);
        }),
        (qo.ODe = function (t, i, e, s, n, r, h, o) {
            const a = n - e,
                l = r - s,
                u = h - e,
                c = o - s,
                d = t - e,
                f = i - s,
                p = a * a + l * l,
                m = a * u + l * c,
                w = a * d + l * f,
                g = u * u + c * c,
                y = u * d + c * f,
                b = 1 / (p * g - m * m),
                v = (g * w - m * y) * b,
                S = (p * y - m * w) * b;
            return v >= 0 && S >= 0 && v + S <= 1;
        }),
        (qo.DDe = function (t, i, e, s, n, r, h, o) {
            const a = n - e,
                l = r - s,
                u = h - e,
                c = o - s,
                d = t - e,
                f = i - s,
                p = a * a + l * l,
                m = a * u + l * c,
                w = u * u + c * c,
                g = d * a + f * l,
                y = d * u + f * c,
                b = p * w - m * m,
                v = (w * g - m * y) / b,
                S = (p * y - m * g) / b;
            return [1 - v - S, v, S];
        }),
        (qo.FDe = function (t, i, e, s, n, r, h, o, a, l, u, c) {
            return [t * s + i * h + e * l, t * n + i * o + e * u, t * r + i * a + e * c];
        });
}
{
    const ha = self.t;
    ha.r4 = class {
        constructor(t, i) {
            (this.tp = 0), (this.ep = 0), t instanceof ha.r4 ? this.mn(t) : this.set(t || 0, i || 0);
        }
        set(t, i) {
            (this.tp = +t), (this.ep = +i);
        }
        mn(t) {
            (this.tp = t.tp), (this.ep = t.ep);
        }
        equals(t) {
            return this.tp === t.tp && this.ep === t.ep;
        }
        LDe(t, i) {
            return this.tp === t && this.ep === i;
        }
        BDe(t, i) {
            return t[i] === Math.fround(this.tp) && t[i + 1] === Math.fround(this.ep);
        }
        UDe(t) {
            this.tp = +t;
        }
        B4() {
            return this.tp;
        }
        NDe(t) {
            this.ep = +t;
        }
        Y4() {
            return this.ep;
        }
        toArray() {
            return [this.tp, this.ep];
        }
        JRi() {
            return new Float64Array(this.toArray());
        }
        jDe(t, i) {
            (t[i++] = this.tp), (t[i] = this.ep);
        }
        offset(t, i) {
            (this.tp += +t), (this.ep += +i);
        }
        scale(t, i) {
            (this.tp *= t), (this.ep *= i);
        }
        Tg(t, i) {
            (this.tp /= t), (this.ep /= i);
        }
        round() {
            (this.tp = Math.round(this.tp)), (this.ep = Math.round(this.ep));
        }
        floor() {
            (this.tp = Math.floor(this.tp)), (this.ep = Math.floor(this.ep));
        }
        ceil() {
            (this.tp = Math.ceil(this.tp)), (this.ep = Math.ceil(this.ep));
        }
        angle() {
            return ha.wt(0, 0, this.tp, this.ep);
        }
        $De() {
            return this.tp * this.tp + this.ep * this.ep;
        }
        length() {
            return ha.gDe(this.tp, this.ep);
        }
        zDe(t, i) {
            const e = this.tp * i - this.ep * t;
            (this.ep = this.ep * i + this.tp * t), (this.tp = e);
        }
        rotate(t) {
            0 !== t && this.zDe(Math.sin(t), Math.cos(t));
        }
        N9(t, i, e) {
            0 === t ||
                (i === this.tp && e === this.ep) ||
                ((this.tp -= i), (this.ep -= e), this.zDe(Math.sin(t), Math.cos(t)), (this.tp += +i), (this.ep += +e));
        }
        move(t, i) {
            0 !== i && ((this.tp += Math.cos(t) * i), (this.ep += Math.sin(t) * i));
        }
        normalize() {
            const t = this.length();
            0 !== t && 1 !== t && ((this.tp /= t), (this.ep /= t));
        }
        ft(t, i) {
            (this.tp = ha.ft(this.tp, t, i)), (this.ep = ha.ft(this.ep, t, i));
        }
        dot(t) {
            return this.tp * t.tp + this.ep * t.ep;
        }
        reverse() {
            (this.tp = -this.tp), (this.ep = -this.ep);
        }
        VDe() {
            let t = this.tp;
            return (this.tp = this.ep), (this.ep = -t), this;
        }
    };
}
{
    const oa = self.t,
        aa = /([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,
        la = /([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;
    function ua(t) {
        return 0 === t.length ? "00" : 1 === t.length ? "0" + t : t;
    }
    function ca(t, i, e) {
        return (
            e < 0 && (e += 1),
            e > 1 && (e -= 1),
            e < 1 / 6 ? t + 6 * (i - t) * e : e < 0.5 ? i : e < 2 / 3 ? t + (i - t) * (2 / 3 - e) * 6 : t
        );
    }
    (oa.nr = class {
        constructor(t, i, e, s) {
            (this._r = NaN),
                (this._g = NaN),
                (this._b = NaN),
                (this._a = NaN),
                (this._r = 0),
                (this._g = 0),
                (this._b = 0),
                (this._a = 0),
                t instanceof oa.nr ? this.set(t) : this.dvs(t || 0, i || 0, e || 0, s || 0);
        }
        ih(t, i, e) {
            return (this._r = +t), (this._g = +i), (this._b = +e), this.ft(), this;
        }
        dvs(t, i, e, s) {
            return (this._r = +t), (this._g = +i), (this._b = +e), (this._a = +s), this.ft(), this;
        }
        set(t) {
            return (this._r = t._r), (this._g = t._g), (this._b = t._b), (this._a = t._a), this;
        }
        mn(t) {
            return this.set(t);
        }
        add(t) {
            (this._r += t._r), (this._g += t._g), (this._b += t._b), (this._a += t._a), this.ft();
        }
        WDe(t, i, e, s = 0) {
            (this._r += +t), (this._g += +i), (this._b += +e), (this._a += +s), this.ft();
        }
        Ars(t) {
            this.HDe(Math.max(this._r, t._r) - Math.min(this._r, t._r)),
                this.KDe(Math.max(this._g, t._g) - Math.min(this._g, t._g)),
                this.qDe(Math.max(this._b, t._b) - Math.min(this._b, t._b)),
                this.yS(Math.max(this._a, t._a) - Math.min(this._a, t._a)),
                this.ft();
        }
        rr(t) {
            (this._r = t._r), (this._g = t._g), (this._b = t._b);
        }
        HDe(t) {
            this._r = oa.ft(+t, 0, 1);
        }
        getR() {
            return this._r;
        }
        KDe(t) {
            this._g = oa.ft(+t, 0, 1);
        }
        getG() {
            return this._g;
        }
        qDe(t) {
            this._b = oa.ft(+t, 0, 1);
        }
        getB() {
            return this._b;
        }
        yS(t) {
            this._a = oa.ft(+t, 0, 1);
        }
        getA() {
            return this._a;
        }
        clone() {
            return oa.m(oa.nr, this._r, this._g, this._b, this._a);
        }
        toArray() {
            return [this._r, this._g, this._b, this._a];
        }
        JRi() {
            return new Float64Array(this.toArray());
        }
        jDe(t, i) {
            (t[i++] = this._r), (t[i++] = this._g), (t[i++] = this._b), (t[i] = this._a);
        }
        XDe(t, i) {
            const e = this._r,
                s = this._g,
                n = this._b,
                r = this._a;
            for (let h = 0; h < 4; ++h) (t[i++] = e), (t[i++] = s), (t[i++] = n), (t[i++] = r);
        }
        YDe(t, i) {
            (t[i++] = this._r), (t[i++] = this._g), (t[i] = this._b);
        }
        equals(t) {
            return this._r === t._r && this._g === t._g && this._b === t._b && this._a === t._a;
        }
        Xae(t) {
            return this._r === t._r && this._g === t._g && this._b === t._b;
        }
        yDs(t, i, e) {
            return this._r === t && this._g === i && this._b === e;
        }
        _bs(t, i, e, s) {
            return this._r === t && this._g === i && this._b === e && this._a === s;
        }
        BDe(t, i) {
            return (
                t[i] === Math.fround(this._r) &&
                t[i + 1] === Math.fround(this._g) &&
                t[i + 2] === Math.fround(this._b) &&
                t[i + 3] === Math.fround(this._a)
            );
        }
        JDe(t, i) {
            return (
                t[i] === Math.fround(this._r) && t[i + 1] === Math.fround(this._g) && t[i + 2] === Math.fround(this._b)
            );
        }
        multiply(t) {
            (this._r *= t._r), (this._g *= t._g), (this._b *= t._b), (this._a *= t._a);
        }
        Op(t) {
            (this._r *= t), (this._g *= t), (this._b *= t), (this._a *= t);
        }
        $h() {
            return (this._r *= this._a), (this._g *= this._a), (this._b *= this._a), this;
        }
        ZDe() {
            return (this._r /= this._a), (this._g /= this._a), (this._b /= this._a), this;
        }
        ft() {
            return (
                (this._r = oa.ft(this._r, 0, 1)),
                (this._g = oa.ft(this._g, 0, 1)),
                (this._b = oa.ft(this._b, 0, 1)),
                (this._a = oa.ft(this._a, 0, 1)),
                this
            );
        }
        QDe(t) {
            (this._r = oa.MDe(t)), (this._g = oa.EDe(t)), (this._b = oa.CDe(t)), (this._a = oa._De(t));
        }
        tFe(t, i, e) {
            oa.HI(t), oa.HI(i), oa.HI(e);
            return `rgb(${100 * (oa.Xl(t) ? t : this.getR())}%, ${100 * (oa.Xl(i) ? i : this.getG())}%, ${100 * (oa.Xl(e) ? e : this.getB())}%)`;
        }
        mvi(t, i, e, s) {
            oa.HI(t), oa.HI(i), oa.HI(e), oa.HI(s);
            return `rgba(${100 * (oa.Xl(t) ? t : this.getR())}%, ${100 * (oa.Xl(i) ? i : this.getG())}%, ${100 * (oa.Xl(e) ? e : this.getB())}%, ${oa.Xl(s) ? s : this.getA()})`;
        }
        fW() {
            const t = Math.round(255 * this.getR()),
                i = Math.round(255 * this.getG()),
                e = Math.round(255 * this.getB());
            return "#" + ua(t.toString(16)) + ua(i.toString(16)) + ua(e.toString(16));
        }
        uW(t) {
            if ("string" != typeof t) return !1;
            let i, e, s;
            if (("#" === (t = t.trim()).charAt(0) && (t = t.substr(1)), 3 === t.length))
                (i = parseInt(t[0], 16) / 15), (e = parseInt(t[1], 16) / 15), (s = parseInt(t[2], 16) / 15);
            else {
                if (6 !== t.length) return !1;
                (i = parseInt(t.substr(0, 2), 16) / 255),
                    (e = parseInt(t.substr(2, 2), 16) / 255),
                    (s = parseInt(t.substr(4, 2), 16) / 255);
            }
            return isFinite(i) && this.HDe(i), isFinite(e) && this.KDe(e), isFinite(s) && this.qDe(s), this.yS(1), !0;
        }
        iFe() {
            return `${Math.round(255 * this.getR())}, ${Math.round(255 * this.getG())}, ${Math.round(255 * this.getB())}`;
        }
        E$s() {
            return [Math.round(255 * this.getR()), Math.round(255 * this.getG()), Math.round(255 * this.getB())];
        }
        T$s(t) {
            if ("string" != typeof t) return !1;
            const i = (t = t.replace(/^rgb\(|\)|%/, "")).split(",");
            if (i.length < 3) return !1;
            const e = parseInt(i[0].trim(), 10) / 255,
                s = parseInt(i[1].trim(), 10) / 255,
                n = parseInt(i[2].trim(), 10) / 255;
            return isFinite(e) && this.HDe(e), isFinite(s) && this.KDe(s), isFinite(n) && this.qDe(n), this.yS(1), !0;
        }
        eFe(t) {
            if ("string" != typeof t) return !1;
            const i = (t = t.replace(/^rgb\(|\)|%/, "")).split(",");
            if (i.length < 3) return !1;
            const e = parseInt(i[0].trim(), 10) / 100,
                s = parseInt(i[1].trim(), 10) / 100,
                n = parseInt(i[2].trim(), 10) / 100;
            return isFinite(e) && this.HDe(e), isFinite(s) && this.KDe(s), isFinite(n) && this.qDe(n), this.yS(1), !0;
        }
        sFe(t) {
            if ("string" != typeof t) return !1;
            const i = (t = t.replace(/^rgba\(|\)|%/, "")).split(",");
            if (i.length < 4) return !1;
            const e = parseInt(i[0].trim(), 10) / 255,
                s = parseInt(i[1].trim(), 10) / 255,
                n = parseInt(i[2].trim(), 10) / 255,
                r = parseFloat(i[3].trim());
            return (
                isFinite(e) && this.HDe(e),
                isFinite(s) && this.KDe(s),
                isFinite(n) && this.qDe(n),
                isFinite(r) && this.yS(r),
                !0
            );
        }
        nFe(t) {
            if ("string" != typeof t) return !1;
            const i = (t = t.replace(/^rgba\(|\)|%/, "")).split(",");
            if (i.length < 4) return !1;
            const e = parseInt(i[0].trim(), 10) / 100,
                s = parseInt(i[1].trim(), 10) / 100,
                n = parseInt(i[2].trim(), 10) / 100,
                r = parseFloat(i[3].trim());
            return (
                isFinite(e) && this.HDe(e),
                isFinite(s) && this.KDe(s),
                isFinite(n) && this.qDe(n),
                isFinite(r) && this.yS(r),
                !0
            );
        }
        bS(t) {
            if ("string" != typeof t) return !1;
            if ((t = t.replace(/\s+/, "")).includes(",")) {
                if (t.startsWith("rgb(")) return t.includes("%") ? this.eFe(t) : this.T$s(t);
                if (t.startsWith("rgba(")) return t.includes("%") ? this.nFe(t) : this.sFe(t);
                if (t.startsWith("hsl(") || t.startsWith("hsla(")) return this.rFe(t);
                {
                    const i = t.split(",");
                    return t.includes("%")
                        ? 3 === i.length
                            ? this.eFe(t)
                            : 4 === i.length && this.nFe(t)
                        : 3 === i.length
                          ? this.T$s(t)
                          : 4 === i.length && this.sFe(t);
                }
            }
            return this.uW(t);
        }
        toJSON() {
            return [this._r, this._g, this._b, this._a];
        }
        Uhi(t, i, e, s) {
            let n, r, h;
            if (
                ((t %= 360),
                (i = oa.ft(i, 0, 100)),
                (e = oa.ft(e, 0, 100)),
                (s = oa.ft(s, 0, 1)),
                (t /= 360),
                (e /= 100),
                0 === (i /= 100))
            )
                n = r = h = e;
            else {
                const s = e < 0.5 ? e * (1 + i) : e + i - e * i,
                    o = 2 * e - s;
                (n = ca(o, s, t + 1 / 3)), (r = ca(o, s, t)), (h = ca(o, s, t - 1 / 3));
            }
            return this.HDe(n), this.KDe(r), this.qDe(h), this.yS(s), this;
        }
        rFe(t) {
            const i = t.replace(/ |hsl|hsla|\(|\)|;/gi, ""),
                e = aa.exec(i),
                s = la.exec(i);
            return e && 4 === e.length
                ? (this.Uhi(+e[1], +e[2], +e[3], 1), !0)
                : !(!s || 5 !== s.length) && (this.Uhi(+e[1], +e[2], +e[3], +e[4]), !0);
        }
        hFe() {
            const t = this._r,
                i = this._g,
                e = this._b,
                s = this._a;
            return `hsla(${oa.nr.oFe(t, i, e)}, ${oa.nr.aFe(t, i, e)}%, ${oa.nr.bTi(t, i, e)}%, ${s})`;
        }
        lFe() {
            const t = this._r,
                i = this._g,
                e = this._b;
            return [oa.nr.oFe(t, i, e), oa.nr.aFe(t, i, e), oa.nr.bTi(t, i, e), this._a];
        }
        Cp(t) {
            Array.isArray(t) &&
                (t.length < 3 ||
                    ((this._r = t[0]),
                    (this._g = t[1]),
                    (this._b = t[2]),
                    t.length >= 4 ? (this._a = t[3]) : (this._a = 1)));
        }
        set r(t) {
            this.HDe(t);
        }
        get r() {
            return this.getR();
        }
        set g(t) {
            this.KDe(t);
        }
        get g() {
            return this.getG();
        }
        set b(t) {
            this.qDe(t);
        }
        get b() {
            return this.getB();
        }
        set a(t) {
            this.yS(t);
        }
        get a() {
            return this.getA();
        }
        Khi(t, i) {
            switch (t) {
                case 0:
                    this.HDe(i);
                    break;
                case 1:
                    this.KDe(i);
                    break;
                case 2:
                    this.qDe(i);
                    break;
                case 3:
                    this.yS(i);
                    break;
                default:
                    throw new RangeError("invalid color index");
            }
        }
        uFe(t) {
            switch (t) {
                case 0:
                    return this.getR();
                case 1:
                    return this.getG();
                case 2:
                    return this.getB();
                case 3:
                    return this.getA();
                default:
                    throw new RangeError("invalid color index");
            }
        }
        static Q6t(t, i) {
            let e, s;
            if (Array.isArray(t)) (e = new oa.nr()), e.Cp(t);
            else {
                if (!(t instanceof oa.nr)) throw new Error("unexpected type");
                e = t;
            }
            if (Array.isArray(i)) (s = new oa.nr()), s.Cp(i);
            else {
                if (!(i instanceof oa.nr)) throw new Error("unexpected type");
                s = i;
            }
            return e.equals(s);
        }
        static cFe(t, i) {
            return oa.ft(Math.max(t, i) - Math.min(t, i), 0, 1);
        }
        static WMs(t, i) {
            const e = new oa.nr();
            return (
                e.HDe(Math.max(t._r, i._r) - Math.min(t._r, i._r)),
                e.KDe(Math.max(t._g, i._g) - Math.min(t._g, i._g)),
                e.qDe(Math.max(t._b, i._b) - Math.min(t._b, i._b)),
                e.yS(Math.max(t._a, i._a) - Math.min(t._a, i._a)),
                e
            );
        }
        static GNs(t, i) {
            const e = new oa.nr(0, 0, 0, 1);
            return (
                e.HDe(Math.max(t._r, i._r) - Math.min(t._r, i._r)),
                e.KDe(Math.max(t._g, i._g) - Math.min(t._g, i._g)),
                e.qDe(Math.max(t._b, i._b) - Math.min(t._b, i._b)),
                e
            );
        }
        static oFe(t, i, e) {
            const s = Math.max(t, i, e),
                n = Math.min(t, i, e);
            if (s === n) return 0;
            let r = 0;
            switch (s) {
                case t:
                    r = (i - e) / (s - n) + (i < e ? 6 : 0);
                    break;
                case i:
                    r = (e - t) / (s - n) + 2;
                    break;
                case e:
                    r = (t - i) / (s - n) + 4;
            }
            return Math.round((r / 6) * 360);
        }
        static aFe(t, i, e) {
            const s = Math.max(t, i, e),
                n = Math.min(t, i, e);
            if (s === n) return 0;
            const r = s - n,
                h = (s + n) / 2 > 0.5 ? r / (2 - s - n) : r / (s + n);
            return Math.round(100 * h);
        }
        static bTi(t, i, e) {
            const s = Math.max(t, i, e),
                n = (s + Math.min(t, i, e)) / 2;
            return s ? Math.round(100 * n) : 0;
        }
    }),
        (oa.nr.dFe = Object.freeze(oa.m(oa.nr, 1, 1, 1, 1))),
        (oa.nr.fFe = Object.freeze(oa.m(oa.nr, 0, 0, 0, 1))),
        (oa.nr.pFe = Object.freeze(oa.m(oa.nr, 0, 0, 0, 0)));
}
{
    const da = self.t;
    da.Rect = class {
        constructor(t, i, e, s) {
            (this.k5s = NaN),
                (this.mFe = NaN),
                (this.F5s = NaN),
                (this.wFe = NaN),
                (this.k5s = 0),
                (this.mFe = 0),
                (this.F5s = 0),
                (this.wFe = 0),
                t instanceof da.Rect ? this.mn(t) : this.set(t || 0, i || 0, e || 0, s || 0);
        }
        set(t, i, e, s) {
            (this.k5s = +t), (this.mFe = +i), (this.F5s = +e), (this.wFe = +s);
        }
        Np(t, i, e, s) {
            (t = +t), (i = +i), (this.k5s = t), (this.mFe = i), (this.F5s = t + +e), (this.wFe = i + +s);
        }
        mn(t) {
            (this.k5s = +t.k5s), (this.mFe = +t.mFe), (this.F5s = +t.F5s), (this.wFe = +t.wFe);
        }
        clone() {
            return new da.Rect(this.k5s, this.mFe, this.F5s, this.wFe);
        }
        static gFe(t, i) {
            da.Et(t, da.Rect), da.Et(i, da.Rect);
            const e = new da.Rect();
            return (
                e.h3(Math.min(t.k5s, i.k5s)),
                e.n3(Math.min(t.mFe, i.mFe)),
                e.xS(Math.max(t.F5s, i.F5s)),
                e.r3(Math.max(t.wFe, i.wFe)),
                e
            );
        }
        static Lbt(t) {
            return da.x$(t), new da.Rect(t.left, t.top, t.right, t.bottom);
        }
        equals(t) {
            return this.k5s === t.k5s && this.mFe === t.mFe && this.F5s === t.F5s && this.wFe === t.wFe;
        }
        yFe(t, i, e, s) {
            return this.k5s === t && this.mFe === i && this.width() === e && this.height() === s;
        }
        BDe(t, i) {
            return (
                t[i] === Math.fround(this.k5s) &&
                t[i + 1] === Math.fround(this.mFe) &&
                t[i + 2] === Math.fround(this.F5s) &&
                t[i + 3] === Math.fround(this.wFe)
            );
        }
        h3(t) {
            this.k5s = +t;
        }
        un() {
            return this.k5s;
        }
        n3(t) {
            this.mFe = +t;
        }
        pn() {
            return this.mFe;
        }
        xS(t) {
            this.F5s = +t;
        }
        Rr() {
            return this.F5s;
        }
        r3(t) {
            this.wFe = +t;
        }
        _r() {
            return this.wFe;
        }
        toArray() {
            return [this.k5s, this.mFe, this.F5s, this.wFe];
        }
        JRi() {
            return new Float64Array(this.toArray());
        }
        bFe() {
            return new DOMRect(this.k5s, this.mFe, this.width(), this.height());
        }
        static vFe(t) {
            return da.m(da.Rect, t.left, t.top, t.right, t.bottom);
        }
        jDe(t, i) {
            (t[i++] = this.k5s), (t[i++] = this.mFe), (t[i++] = this.F5s), (t[i] = this.wFe);
        }
        SFe(t, i) {
            (t[i++] = this.k5s),
                (t[i++] = this.mFe),
                (t[i++] = this.F5s),
                (t[i++] = this.mFe),
                (t[i++] = this.F5s),
                (t[i++] = this.wFe),
                (t[i++] = this.k5s),
                (t[i] = this.wFe);
        }
        xFe(t, i, e) {
            (t[i++] = this.k5s),
                (t[i++] = this.mFe),
                (t[i++] = e),
                (t[i++] = this.F5s),
                (t[i++] = this.mFe),
                (t[i++] = e),
                (t[i++] = this.F5s),
                (t[i++] = this.wFe),
                (t[i++] = e),
                (t[i++] = this.k5s),
                (t[i++] = this.wFe),
                (t[i] = e);
        }
        width() {
            return this.F5s - this.k5s;
        }
        height() {
            return this.wFe - this.mFe;
        }
        Dr() {
            return (this.k5s + this.F5s) / 2;
        }
        Lr() {
            return (this.mFe + this.wFe) / 2;
        }
        offset(t, i) {
            (t = +t), (i = +i), (this.k5s += t), (this.mFe += i), (this.F5s += t), (this.wFe += i);
        }
        offsetLeft(t) {
            this.k5s += +t;
        }
        offsetTop(t) {
            this.mFe += +t;
        }
        Nr(t) {
            this.F5s += +t;
        }
        xSs(t) {
            this.wFe += +t;
        }
        rUi(t) {
            if ((da.vu(t), "x" !== t)) throw new Error("invalid axis, only 'x' supported");
            this.mFe < this.wFe
                ? this.k5s < this.F5s
                    ? (this.wFe = this.mFe + this.width())
                    : (this.wFe = this.mFe - this.width())
                : this.k5s < this.F5s
                  ? (this.wFe = this.mFe - this.width())
                  : (this.wFe = this.mFe + this.width());
        }
        mf(t, i) {
            (t = +t), (i = +i), (this.k5s -= t), (this.mFe -= i), (this.F5s += t), (this.wFe += i);
        }
        fn(t, i) {
            (t = +t), (i = +i), (this.k5s += t), (this.mFe += i), (this.F5s -= t), (this.wFe -= i);
        }
        multiply(t, i) {
            (this.k5s *= t), (this.mFe *= i), (this.F5s *= t), (this.wFe *= i);
        }
        Tg(t, i) {
            (this.k5s /= t), (this.mFe /= i), (this.F5s /= t), (this.wFe /= i);
        }
        MFe(t) {
            (this.k5s = +t - this.k5s), (this.F5s = +t - this.F5s);
        }
        EFe(t) {
            (this.mFe = +t - this.mFe), (this.wFe = +t - this.wFe);
        }
        XRi(t, i) {
            const e = this.width(),
                s = this.height(),
                n = this.un() + e * t,
                r = this.pn() + s * i;
            this.Np(n - s * i, r - e * t, s, e);
        }
        CFe() {
            const t = this.k5s;
            (this.k5s = this.F5s), (this.F5s = t);
        }
        _Fe() {
            const t = this.mFe;
            (this.mFe = this.wFe), (this.wFe = t);
        }
        TFe(t) {
            const i = this.mFe;
            (this.mFe = +t - this.wFe), (this.wFe = +t - i);
        }
        round() {
            (this.k5s = Math.round(this.k5s)),
                (this.mFe = Math.round(this.mFe)),
                (this.F5s = Math.round(this.F5s)),
                (this.wFe = Math.round(this.wFe));
        }
        IFe() {
            (this.k5s = Math.ceil(this.k5s)),
                (this.mFe = Math.ceil(this.mFe)),
                (this.F5s = Math.floor(this.F5s)),
                (this.wFe = Math.floor(this.wFe));
        }
        PFe() {
            (this.k5s = Math.floor(this.k5s)),
                (this.mFe = Math.floor(this.mFe)),
                (this.F5s = Math.ceil(this.F5s)),
                (this.wFe = Math.ceil(this.wFe));
        }
        floor() {
            (this.k5s = Math.floor(this.k5s)),
                (this.mFe = Math.floor(this.mFe)),
                (this.F5s = Math.floor(this.F5s)),
                (this.wFe = Math.floor(this.wFe));
        }
        ceil() {
            (this.k5s = Math.ceil(this.k5s)),
                (this.mFe = Math.ceil(this.mFe)),
                (this.F5s = Math.ceil(this.F5s)),
                (this.wFe = Math.ceil(this.wFe));
        }
        ft(t, i, e, s) {
            (this.k5s = Math.max(this.k5s, +t)),
                (this.mFe = Math.max(this.mFe, +i)),
                (this.F5s = Math.min(this.F5s, +e)),
                (this.wFe = Math.min(this.wFe, +s));
        }
        GFe(t, i, e, s) {
            (t = +t),
                (i = +i),
                (e = +e),
                (s = +s),
                (this.k5s = da.ft(this.k5s, t, e)),
                (this.mFe = da.ft(this.mFe, i, s)),
                (this.F5s = da.ft(this.F5s, t, e)),
                (this.wFe = da.ft(this.wFe, i, s));
        }
        normalize() {
            this.k5s > this.F5s && this.CFe(), this.mFe > this.wFe && this._Fe();
        }
        yu(t) {
            return !(t.F5s < this.k5s || t.wFe < this.mFe || t.k5s > this.F5s || t.mFe > this.wFe);
        }
        AFe(t, i, e) {
            return !(t.F5s + i < this.k5s || t.wFe + e < this.mFe || t.k5s + i > this.F5s || t.mFe + e > this.wFe);
        }
        i6(t, i) {
            return t >= this.k5s && t <= this.F5s && i >= this.mFe && i <= this.wFe;
        }
        vY(t) {
            return t.k5s >= this.k5s && t.mFe >= this.mFe && t.F5s <= this.F5s && t.wFe <= this.wFe;
        }
        wu(t) {
            t.k5s < this.k5s && (this.k5s = +t.k5s),
                t.mFe < this.mFe && (this.mFe = +t.mFe),
                t.F5s > this.F5s && (this.F5s = +t.F5s),
                t.wFe > this.wFe && (this.wFe = +t.wFe);
        }
        tx(t) {
            (this.k5s = da.bt(t.k5s, t.F5s, this.k5s)),
                (this.mFe = da.bt(t.mFe, t.wFe, this.mFe)),
                (this.F5s = da.bt(t.k5s, t.F5s, this.F5s)),
                (this.wFe = da.bt(t.mFe, t.wFe, this.wFe));
        }
    };
}
{
    const fa = self.t;
    fa.Bi = class {
        constructor(t, i, e, s, n, r, h, o) {
            (this.RFe = NaN),
                (this.kFe = NaN),
                (this.OFe = NaN),
                (this.DFe = NaN),
                (this.FFe = NaN),
                (this.LFe = NaN),
                (this.BFe = NaN),
                (this.UFe = NaN),
                (this.RFe = 0),
                (this.kFe = 0),
                (this.OFe = 0),
                (this.DFe = 0),
                (this.FFe = 0),
                (this.LFe = 0),
                (this.BFe = 0),
                (this.UFe = 0),
                t instanceof fa.Bi
                    ? this.mn(t)
                    : this.set(t || 0, i || 0, e || 0, s || 0, n || 0, r || 0, h || 0, o || 0);
        }
        set(t, i, e, s, n, r, h, o) {
            (this.RFe = +t),
                (this.kFe = +i),
                (this.OFe = +e),
                (this.DFe = +s),
                (this.FFe = +n),
                (this.LFe = +r),
                (this.BFe = +h),
                (this.UFe = +o);
        }
        so(t, i, e, s) {
            this.set(t, i, e, i, e, s, t, s);
        }
        mn(t) {
            (this.RFe = t.RFe),
                (this.kFe = t.kFe),
                (this.OFe = t.OFe),
                (this.DFe = t.DFe),
                (this.FFe = t.FFe),
                (this.LFe = t.LFe),
                (this.BFe = t.BFe),
                (this.UFe = t.UFe);
        }
        equals(t) {
            return (
                this.RFe === t.RFe &&
                this.kFe === t.kFe &&
                this.OFe === t.OFe &&
                this.DFe === t.DFe &&
                this.FFe === t.FFe &&
                this.LFe === t.LFe &&
                this.BFe === t.BFe &&
                this.UFe === t.UFe
            );
        }
        jg(t) {
            this.RFe = +t;
        }
        ss() {
            return this.RFe;
        }
        Rg(t) {
            this.kFe = +t;
        }
        ns() {
            return this.kFe;
        }
        NFe(t) {
            this.OFe = +t;
        }
        gg() {
            return this.OFe;
        }
        jFe(t) {
            this.DFe = +t;
        }
        Cr() {
            return this.DFe;
        }
        $Fe(t) {
            this.FFe = +t;
        }
        vr() {
            return this.FFe;
        }
        zFe(t) {
            this.LFe = +t;
        }
        Mr() {
            return this.LFe;
        }
        VFe(t) {
            this.BFe = +t;
        }
        ao() {
            return this.BFe;
        }
        WFe(t) {
            this.UFe = +t;
        }
        lo() {
            return this.UFe;
        }
        HFe() {
            return new DOMQuad(
                new DOMPoint(this.RFe, this.kFe),
                new DOMPoint(this.OFe, this.DFe),
                new DOMPoint(this.FFe, this.LFe),
                new DOMPoint(this.BFe, this.UFe)
            );
        }
        static KFe(t) {
            return fa.m(fa.Bi, t.p1.x, t.p1.y, t.p2.x, t.p2.y, t.p3.x, t.p3.y, t.p4.x, t.p4.y);
        }
        toArray() {
            return [this.RFe, this.kFe, this.OFe, this.DFe, this.FFe, this.LFe, this.BFe, this.UFe];
        }
        JRi() {
            return new Float64Array(this.toArray());
        }
        jDe(t, i) {
            (t[i++] = this.RFe),
                (t[i++] = this.kFe),
                (t[i++] = this.OFe),
                (t[i++] = this.DFe),
                (t[i++] = this.FFe),
                (t[i++] = this.LFe),
                (t[i++] = this.BFe),
                (t[i] = this.UFe);
        }
        qFe(t, i, e) {
            (t[i++] = this.RFe),
                (t[i++] = this.kFe),
                (t[i++] = e),
                (t[i++] = this.OFe),
                (t[i++] = this.DFe),
                (t[i++] = e),
                (t[i++] = this.FFe),
                (t[i++] = this.LFe),
                (t[i++] = e),
                (t[i++] = this.BFe),
                (t[i++] = this.UFe),
                (t[i] = e);
        }
        offset(t, i) {
            (t = +t),
                (i = +i),
                (this.RFe += t),
                (this.kFe += i),
                (this.OFe += t),
                (this.DFe += i),
                (this.FFe += t),
                (this.LFe += i),
                (this.BFe += t),
                (this.UFe += i);
        }
        round() {
            (this.RFe = Math.round(this.RFe)),
                (this.kFe = Math.round(this.kFe)),
                (this.OFe = Math.round(this.OFe)),
                (this.DFe = Math.round(this.DFe)),
                (this.FFe = Math.round(this.FFe)),
                (this.LFe = Math.round(this.LFe)),
                (this.BFe = Math.round(this.BFe)),
                (this.UFe = Math.round(this.UFe));
        }
        floor() {
            (this.RFe = Math.floor(this.RFe)),
                (this.kFe = Math.floor(this.kFe)),
                (this.OFe = Math.floor(this.OFe)),
                (this.DFe = Math.floor(this.DFe)),
                (this.FFe = Math.floor(this.FFe)),
                (this.LFe = Math.floor(this.LFe)),
                (this.BFe = Math.floor(this.BFe)),
                (this.UFe = Math.floor(this.UFe));
        }
        ceil() {
            (this.RFe = Math.ceil(this.RFe)),
                (this.kFe = Math.ceil(this.kFe)),
                (this.OFe = Math.ceil(this.OFe)),
                (this.DFe = Math.ceil(this.DFe)),
                (this.FFe = Math.ceil(this.FFe)),
                (this.LFe = Math.ceil(this.LFe)),
                (this.BFe = Math.ceil(this.BFe)),
                (this.UFe = Math.ceil(this.UFe));
        }
        gn(t) {
            (this.RFe = t.k5s),
                (this.kFe = t.mFe),
                (this.OFe = t.F5s),
                (this.DFe = t.mFe),
                (this.FFe = t.F5s),
                (this.LFe = t.wFe),
                (this.BFe = t.k5s),
                (this.UFe = t.wFe);
        }
        Ms(t, i) {
            0 === i ? this.gn(t) : this.SS(t, Math.sin(i), Math.cos(i));
        }
        SS(t, i, e) {
            const s = t.k5s * i,
                n = t.mFe * i,
                r = t.F5s * i,
                h = t.wFe * i,
                o = t.k5s * e,
                a = t.mFe * e,
                l = t.F5s * e,
                u = t.wFe * e;
            (this.RFe = o - n),
                (this.kFe = a + s),
                (this.OFe = l - n),
                (this.DFe = a + r),
                (this.FFe = l - h),
                (this.LFe = u + r),
                (this.BFe = o - h),
                (this.UFe = u + s);
        }
        kws(t) {
            t.set(
                Math.min(this.RFe, this.OFe, this.FFe, this.BFe),
                Math.min(this.kFe, this.DFe, this.LFe, this.UFe),
                Math.max(this.RFe, this.OFe, this.FFe, this.BFe),
                Math.max(this.kFe, this.DFe, this.LFe, this.UFe)
            );
        }
        i6(t, i) {
            let e = this.OFe - this.RFe,
                s = this.DFe - this.kFe;
            const n = this.FFe - this.RFe,
                r = this.LFe - this.kFe,
                h = t - this.RFe,
                o = i - this.kFe;
            let a = e * e + s * s,
                l = e * n + s * r,
                u = e * h + s * o;
            const c = n * n + r * r,
                d = n * h + r * o;
            let f = 1 / (a * c - l * l),
                p = (c * u - l * d) * f,
                m = (a * d - l * u) * f;
            return (
                (p >= 0 && m > 0 && p + m < 1) ||
                ((e = this.BFe - this.RFe),
                (s = this.UFe - this.kFe),
                (a = e * e + s * s),
                (l = e * n + s * r),
                (u = e * h + s * o),
                (f = 1 / (a * c - l * l)),
                (p = (c * u - l * d) * f),
                (m = (a * d - l * u) * f),
                p >= 0 && m > 0 && p + m < 1)
            );
        }
        Dr() {
            return (this.RFe + this.OFe + this.FFe + this.BFe) / 4;
        }
        Lr() {
            return (this.kFe + this.DFe + this.LFe + this.UFe) / 4;
        }
        XFe(t, i, e, s) {
            return !(!this.i6(t, i) && !this.i6(e, s)) || fa.GDe(t, i, e, s, this);
        }
        YFe(t) {
            let i = t.Dr(),
                e = t.Lr();
            if (this.i6(i, e)) return !0;
            if (((i = this.Dr()), (e = this.Lr()), t.i6(i, e))) return !0;
            const s = this.RFe,
                n = this.kFe,
                r = this.OFe,
                h = this.DFe,
                o = this.FFe,
                a = this.LFe,
                l = this.BFe,
                u = this.UFe;
            return fa.GDe(s, n, r, h, t) || fa.GDe(r, h, o, a, t) || fa.GDe(o, a, l, u, t) || fa.GDe(l, u, s, n, t);
        }
        Hes() {
            const t = this.RFe,
                i = this.kFe;
            (this.RFe = this.OFe),
                (this.kFe = this.DFe),
                (this.OFe = this.FFe),
                (this.DFe = this.LFe),
                (this.FFe = this.BFe),
                (this.LFe = this.UFe),
                (this.BFe = t),
                (this.UFe = i);
        }
        _g() {
            this.JFe(0, 2), this.JFe(1, 3), this.JFe(6, 4), this.JFe(7, 5);
        }
        zI() {
            this.JFe(0, 6), this.JFe(1, 7), this.JFe(2, 4), this.JFe(3, 5);
        }
        FI() {
            this.JFe(2, 6), this.JFe(3, 7);
        }
        JFe(t, i) {
            const e = this.ZFe(t);
            this.QFe(t, this.ZFe(i)), this.QFe(i, e);
        }
        ZFe(t) {
            switch (t) {
                case 0:
                    return this.RFe;
                case 1:
                    return this.kFe;
                case 2:
                    return this.OFe;
                case 3:
                    return this.DFe;
                case 4:
                    return this.FFe;
                case 5:
                    return this.LFe;
                case 6:
                    return this.BFe;
                case 7:
                    return this.UFe;
                default:
                    throw new RangeError("invalid quad point index");
            }
        }
        QFe(t, i) {
            switch (((i = +i), t)) {
                case 0:
                    this.RFe = i;
                    break;
                case 1:
                    this.kFe = i;
                    break;
                case 2:
                    this.OFe = i;
                    break;
                case 3:
                    this.DFe = i;
                    break;
                case 4:
                    this.FFe = i;
                    break;
                case 5:
                    this.LFe = i;
                    break;
                case 6:
                    this.BFe = i;
                    break;
                case 7:
                    this.UFe = i;
                    break;
                default:
                    throw new RangeError("invalid quad point index");
            }
        }
        Tg(t, i) {
            (this.RFe /= t),
                (this.kFe /= i),
                (this.OFe /= t),
                (this.DFe /= i),
                (this.FFe /= t),
                (this.LFe /= i),
                (this.BFe /= t),
                (this.UFe /= i);
        }
    };
}
{
    const pa = self.t;
    pa.Crypto = {};
    const ma = "0123456789abcdef";
    (pa.Crypto.tLe = function (t) {
        let i = "";
        const e = new Uint8Array(t);
        for (let t = 0; t < e.length; ++t) {
            const s = e[t],
                n = 15 & s;
            i += ma[s >> 4] + ma[n];
        }
        return i;
    }),
        (pa.Crypto.Zes = function (t) {
            return "string" == typeof t && (t = pa.eDe(t)), pa.Crypto.eEs(t);
        }),
        (pa.Crypto.eEs = function (t) {
            return window.isSecureContext
                ? crypto.subtle.digest("SHA-256", t).then(pa.Crypto.tLe)
                : Promise.reject(new Error("web crypto only available on secure origins"));
        });
}
{
    const wa = self.t,
        ga = new Map(),
        ya = new Map(),
        ba = new Map(),
        va = new Map(),
        Sa = new Map(),
        xa = new Map(),
        Ma = new Map(),
        Ea = new Map(),
        Ca = new Map();
    Ca.set("linear", "noease"), Ca.set("default", "noease");
    const _a = [
            "default",
            "noease",
            "easeinquad",
            "easeoutquad",
            "easeinoutquad",
            "easeincubic",
            "easeoutcubic",
            "easeinoutcubic",
            "easeinquart",
            "easeoutquart",
            "easeinoutquart",
            "easeinquint",
            "easeoutquint",
            "easeinoutquint",
            "easeinsine",
            "easeoutsine",
            "easeinoutsine",
            "easeinexpo",
            "easeoutexpo",
            "easeinoutexpo",
            "easeincirc",
            "easeoutcirc",
            "easeinoutcirc",
            "easeinelastic",
            "easeoutelastic",
            "easeinoutelastic",
            "easeinback",
            "easeoutback",
            "easeinoutback",
            "easeinbounce",
            "easeoutbounce",
            "easeinoutbounce",
        ],
        Ta = [
            "default",
            "noease",
            "quad",
            "cubic",
            "quart",
            "quint",
            "sine",
            "expo",
            "circ",
            "elastic",
            "back",
            "bounce",
        ],
        Ia = new Map([
            ["linear", "noease"],
            ["in-sine", "easeinsine"],
            ["out-sine", "easeoutsine"],
            ["in-out-sine", "easeinoutsine"],
            ["in-elastic", "easeinelastic"],
            ["out-elastic", "easeoutelastic"],
            ["in-out-elastic", "easeinoutelastic"],
            ["in-back", "easeinback"],
            ["out-back", "easeoutback"],
            ["in-out-back", "easeinoutback"],
            ["in-bounce", "easeinbounce"],
            ["out-bounce", "easeoutbounce"],
            ["in-out-bounce", "easeinoutbounce"],
            ["in-cubic", "easeincubic"],
            ["out-cubic", "easeoutcubic"],
            ["in-out-cubic", "easeinoutcubic"],
            ["in-quadratic", "easeinquad"],
            ["out-quadratic", "easeoutquad"],
            ["in-out-quadratic", "easeinoutquad"],
            ["in-quartic", "easeinquart"],
            ["out-quartic", "easeoutquart"],
            ["in-out-quartic", "easeinoutquart"],
            ["in-quintic", "easeinquint"],
            ["out-quintic", "easeoutquint"],
            ["in-out-quintic", "easeinoutquint"],
            ["in-circular", "easeincirc"],
            ["out-circular", "easeoutcirc"],
            ["in-out-circular", "easeinoutcirc"],
            ["in-exponential", "easeinexpo"],
            ["out-exponential", "easeoutexpo"],
            ["in-out-exponential", "easeinoutexpo"],
        ]);
    self.Ace = class t {
        constructor() {}
        static ahe() {
            return "default";
        }
        static lhe() {
            return "noease";
        }
        static iLe(t) {
            return Ia.get(t);
        }
        static ihe(i, ...e) {
            let s, n;
            this.eLe(),
                i
                    ? (ba.has(i) || ba.set(i, new Map()),
                      (s = ba.get(i)),
                      (n = [...s.keys()].filter((e) => !t.sLe(e, i) || t.sLe(e, i).transition.TUs())))
                    : ((s = Sa), (n = [...s.keys()]));
            const r = n.sort();
            return [...ya.keys()].concat(r).filter((t) => !e.includes(t));
        }
        static nLe() {
            this.eLe();
            const t = [...Sa.keys()];
            return t.sort(), [...ya.keys()].concat(t);
        }
        static rLe() {
            this.eLe();
            const t = [...Sa.keys()];
            return t.sort(), t;
        }
        static JUs(t) {
            wa.vu(t);
            for (const i of _a) {
                if (self.lang(`ui.bars.timeline.eases.${i}`) === t) return !0;
            }
            for (const i of Ta) {
                if (self.lang(`ui.bars.timeline.short-eases.${i}`) === t) return !0;
            }
        }
        static ohe(t) {
            return wa.vu(t), this.eLe(), [...ya.keys()].includes(t);
        }
        static hLe(i) {
            wa.vu(i);
            const e = Ca.get(i);
            return e ? ga.get(e) : t.ohe(i) ? ga.get(i) : Ma.has(i) ? Ma.get(i) : void 0;
        }
        static che(t) {
            return wa.vu(t), this.eLe(), Ea.get(t);
        }
        static OTs(i, e) {
            wa.vu(i), wa.qm(e, self.Ga), this.eLe();
            const s = t.hLe(i);
            if (s) return s;
            if (!e) throw new Error("missing ease function");
            return ba.get(e).get(i);
        }
        static sLe(t, i) {
            wa.vu(t), this.eLe();
            const e = va.get(i);
            if (e) return e.get(t);
        }
        static uVs(i, e) {
            wa.vu(i), wa.Et(e, self.Ga), this.eLe();
            return !!t.hLe(i) || !!ba.get(e).get(i);
        }
        static oLe(i) {
            wa.vu(i), this.eLe();
            const e = t.hLe(i);
            return e || Sa.get(i);
        }
        static aLe(t) {
            return wa.vu(t), this.eLe(), xa.get(t);
        }
        static lLe(t) {
            wa.wi(t), this.eLe();
            return this.nLe()[t];
        }
        static V0s(t, i) {
            wa.vu(t), this.eLe();
            return this.ihe(i).indexOf(t);
        }
        static uLe(t) {
            return this.V0s(t);
        }
        static eLe() {
            0 === ga.size &&
                (this.cLe("default", () => {}),
                this.cLe(
                    "noease",
                    [
                        { x: 0, y: 0, sax: 0.336, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                        { x: 1, y: 1, sax: 0, say: 0, eax: -0.336, eay: 0, se: !1, ee: !0 },
                    ],
                    !0
                ),
                this.cLe("easeinsine", [
                    { x: 0, y: 0, sax: 0.485, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.038, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeoutsine", [
                    { x: 0, y: 0, sax: 0.038, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.485, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinoutsine", [
                    { x: 0, y: 0, sax: 0.336, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.336, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinelastic", [
                    { x: 0, y: 0, sax: 0.018, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 0.116, y: 0.002, sax: 0.025, say: 0, eax: -0.025, eay: 0, se: !0, ee: !0 },
                    { x: 0.266, y: -0.005, sax: 0.024, say: 0, eax: -0.021, eay: 0, se: !0, ee: !0 },
                    { x: 0.416, y: 0.016, sax: 0.024, say: 0, eax: -0.026, eay: 0, se: !0, ee: !0 },
                    { x: 0.566, y: -0.045, sax: 0.061, say: 0, eax: -0.025, eay: 0, se: !0, ee: !0 },
                    { x: 0.716, y: 0.132, sax: 0.072, say: -0.004, eax: -0.045, eay: 0, se: !0, ee: !0 },
                    { x: 0.866, y: -0.373, sax: 0.06, say: 0, eax: -0.049, eay: -0.002, se: !0, ee: !0 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.038, eay: -0.263, se: !1, ee: !0 },
                ]),
                this.cLe("easeoutelastic", [
                    { x: 0, y: 0, sax: 0.038, say: 0.263, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 0.136, y: 1.373, sax: 0.049, say: 0.002, eax: -0.06, eay: 0, se: !0, ee: !0 },
                    { x: 0.286, y: 0.868, sax: 0.045, say: 0, eax: -0.072, eay: 0.004, se: !0, ee: !0 },
                    { x: 0.436, y: 1.045, sax: 0.025, say: 0, eax: -0.061, eay: 0, se: !0, ee: !0 },
                    { x: 0.586, y: 0.984, sax: 0.026, say: 0, eax: -0.024, eay: 0, se: !0, ee: !0 },
                    { x: 0.736, y: 1.005, sax: 0.021, say: 0, eax: -0.024, eay: 0, se: !0, ee: !0 },
                    { x: 0.886, y: 0.998, sax: 0.025, say: 0, eax: -0.025, eay: 0, se: !0, ee: !0 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.018, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinoutelastic", [
                    { x: 0, y: 0, sax: 0.025, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 0.067, y: 0.001, sax: 0.025, say: 0, eax: -0.025, eay: 0, se: !0, ee: !0 },
                    { x: 0.18, y: -0.005, sax: 0.025, say: 0, eax: -0.025, eay: 0, se: !0, ee: !0 },
                    { x: 0.292, y: 0.025, sax: 0.053, say: 0, eax: -0.025, eay: 0, se: !0, ee: !0 },
                    { x: 0.405, y: -0.118, sax: 0.069, say: 0, eax: -0.027, eay: 0, se: !0, ee: !0 },
                    { x: 0.597, y: 1.118, sax: 0.027, say: 0, eax: -0.069, eay: 0, se: !0, ee: !0 },
                    { x: 0.71, y: 0.975, sax: 0.025, say: 0, eax: -0.053, eay: 0, se: !0, ee: !0 },
                    { x: 0.822, y: 1.005, sax: 0.025, say: 0, eax: -0.025, eay: 0, se: !0, ee: !0 },
                    { x: 0.935, y: 0.999, sax: 0.025, say: 0, eax: -0.025, eay: 0, se: !0, ee: !0 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.025, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinback", [
                    { x: 0, y: 0, sax: 0.35, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.34, eay: -1.579, se: !1, ee: !0 },
                ]),
                this.cLe("easeoutback", [
                    { x: 0, y: 0, sax: 0.34, say: 1.579, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.35, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinoutback", [
                    { x: 0, y: 0, sax: 0.035, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 0.242, y: -0.1, sax: 0.258, say: 0, eax: -0.025, eay: 0, se: !0, ee: !0 },
                    { x: 0.76, y: 1.1, sax: 0.025, say: 0, eax: -0.26, eay: 0, se: !0, ee: !0 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.035, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinbounce", [
                    { x: 0, y: 0, sax: 0.033, say: 0.025, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 0.092, y: 0, sax: 0.026, say: 0.078, eax: -0.033, eay: 0.025, se: !0, ee: !0 },
                    { x: 0.274, y: 0, sax: 0.097, say: 0.319, eax: -0.026, eay: 0.078, se: !0, ee: !0 },
                    { x: 0.637, y: 0, sax: 0.105, say: 0.625, eax: -0.097, eay: 0.319, se: !0, ee: !0 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.125, eay: -0.004, se: !1, ee: !0 },
                ]),
                this.cLe("easeoutbounce", [
                    { x: 0, y: 0, sax: 0.125, say: 0.004, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 0.365, y: 1, sax: 0.097, say: -0.319, eax: -0.105, eay: -0.625, se: !0, ee: !0 },
                    { x: 0.728, y: 1, sax: 0.026, say: -0.078, eax: -0.097, eay: -0.319, se: !0, ee: !0 },
                    { x: 0.91, y: 1, sax: 0.033, say: -0.025, eax: -0.026, eay: -0.078, se: !0, ee: !0 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.033, eay: -0.025, se: !1, ee: !0 },
                ]),
                this.cLe("easeinoutbounce", [
                    { x: 0, y: 0, sax: 0.01, say: 0.006, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 0.046, y: 0, sax: 0.021, say: 0.038, eax: -0.01, eay: 0.006, se: !0, ee: !0 },
                    { x: 0.137, y: 0, sax: 0.059, say: 0.158, eax: -0.021, eay: 0.038, se: !0, ee: !0 },
                    { x: 0.319, y: 0, sax: 0.117, say: 0.744, eax: -0.059, eay: 0.158, se: !0, ee: !0 },
                    { x: 0.683, y: 1, sax: 0.059, say: -0.158, eax: -0.117, eay: -0.744, se: !0, ee: !0 },
                    { x: 0.865, y: 1, sax: 0.021, say: -0.038, eax: -0.059, eay: -0.158, se: !0, ee: !0 },
                    { x: 0.956, y: 1, sax: 0.01, say: -0.006, eax: -0.021, eay: -0.038, se: !0, ee: !0 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.01, eay: -0.006, se: !1, ee: !0 },
                ]),
                this.cLe("easeincubic", [
                    { x: 0, y: 0, sax: 0.75, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.138, eay: -0.321, se: !1, ee: !0 },
                ]),
                this.cLe("easeoutcubic", [
                    { x: 0, y: 0, sax: 0.138, say: 0.321, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.75, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinoutcubic", [
                    { x: 0, y: 0, sax: 0.285, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 0.5, y: 0.5, sax: 0.081, say: 0.272, eax: -0.081, eay: -0.272, se: !0, ee: !0 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.285, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinquad", [
                    { x: 0, y: 0, sax: 0.4, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.178, eay: -0.392, se: !1, ee: !0 },
                ]),
                this.cLe("easeoutquad", [
                    { x: 0, y: 0, sax: 0.178, say: 0.392, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.4, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinoutquad", [
                    { x: 0, y: 0, sax: 0.25, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 0.5, y: 0.5, sax: 0.03, say: 0.065, eax: -0.03, eay: -0.065, se: !0, ee: !0 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.25, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinquart", [
                    { x: 0, y: 0, sax: 0.5, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.25, eay: -1, se: !1, ee: !0 },
                ]),
                this.cLe("easeoutquart", [
                    { x: 0, y: 0, sax: 0.25, say: 1, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.5, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinoutquart", [
                    { x: 0, y: 0, sax: 0.765, say: 0.03, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.765, eay: -0.03, se: !1, ee: !0 },
                ]),
                this.cLe("easeinquint", [
                    { x: 0, y: 0, sax: 0.6, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.2, eay: -1, se: !1, ee: !0 },
                ]),
                this.cLe("easeoutquint", [
                    { x: 0, y: 0, sax: 0.2, say: 1, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.6, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinoutquint", [
                    { eax: 0, eay: 0, ee: !1, sax: 0.84, say: 0, se: !0, x: 0, y: 0 },
                    { eax: -0.84, eay: 0, ee: !0, sax: 0, say: 0, se: !1, x: 1, y: 1 },
                ]),
                this.cLe("easeincirc", [
                    { x: 0, y: 0, sax: 0.25, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.024, eay: -0.808, se: !1, ee: !0 },
                ]),
                this.cLe("easeoutcirc", [
                    { x: 0, y: 0, sax: 0.024, say: 0.808, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.25, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinoutcirc", [
                    { x: 0, y: 0, sax: 0.125, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 0.5, y: 0.5, sax: 0.02, say: 0.428, eax: -0.02, eay: -0.428, se: !0, ee: !0 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.125, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinexpo", [
                    { x: 0, y: 0, sax: 0.66, say: 0, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.14, eay: -1, se: !1, ee: !0 },
                ]),
                this.cLe("easeoutexpo", [
                    { x: 0, y: 0, sax: 0.14, say: 1, eax: 0, eay: 0, se: !0, ee: !1 },
                    { x: 1, y: 1, sax: 0, say: 0, eax: -0.66, eay: 0, se: !1, ee: !0 },
                ]),
                this.cLe("easeinoutexpo", [
                    { eax: 0, eay: 0, ee: !1, sax: 0.345, say: 0, se: !0, x: 0, y: 0 },
                    { eax: -0.06, eay: -0.5, ee: !0, sax: 0.06, say: 0.5, se: !0, x: 0.5, y: 0.5 },
                    { eax: -0.335, eay: 0, ee: !0, sax: 0, say: 0, se: !1, x: 1, y: 1 },
                ]),
                this.dLe("cubicbezier", this.fLe),
                this.dLe("spline", this.pLe));
        }
        static cLe(i, e, s = !1) {
            if ((wa.vu(i), "function" == typeof e)) t.mLe(i, e, "predefined");
            else {
                if (!wa.vwt(e)) throw new Error("unexpected arguments");
                if (self.yUs) {
                    const n = wa.m(self.yUs, i, s);
                    n.ZI(e), t.mLe(i, (t, i, e, s) => n.H1(t, i, e, s), "predefined"), Ea.set(i, n);
                } else {
                    const n = wa.m(wa.Zk, [i, e.map((t) => [t.x, t.y, t.sax, t.say, t.eax, t.eay, t.se, t.ee])], !1);
                    n.wLe(s), t.mLe(i, (t, i, e, s) => n.H1(t, i, e, s), "predefined");
                }
            }
        }
        static dLe(i, e) {
            wa.vu(i), wa.yp(e), t.mLe(i, e, "private");
        }
        static dVs(i, e, s, n) {
            wa.vu(i), wa.yp(e), wa.qm(s, self.Ga), wa.oN(n), this.eLe(), t.mLe(i, e, "custom", s, n);
        }
        static pVs(t, i) {
            if ((wa.vu(t), wa.Et(i, self.Ga), this.ohe(t))) return;
            if ([...Ma.keys()].includes(t)) return;
            const e = ba.get(i);
            e && e.delete(t);
            const s = va.get(i);
            s && s.delete(t);
        }
        static mLe(t, i, e, s, n) {
            switch ((wa.vu(t), wa.yp(i), wa.vu(e), wa.qm(s, self.Ga), wa.oN(n), e)) {
                case "predefined":
                    ga.set(t, i), ya.set(t, i);
                    break;
                case "custom":
                    if (s) {
                        ba.has(s) || ba.set(s, new Map()), va.has(s) || va.set(s, new Map());
                        ba.get(s).set(t, i);
                        va.get(s).set(t, n);
                    } else Sa.set(t, i), xa.set(t, n);
                    break;
                case "private":
                    ga.set(t, i), Ma.set(t, i);
                    break;
                default:
                    throw new Error("unexpected ease mode");
            }
        }
        static RUs(t, i, e, s) {
            return 0 === s ? i : (e * t) / s + i;
        }
        static fLe(t, i, e, s, n) {
            return i + 3 * t * (e - i) + 3 * t ** 2 * (i + s - 2 * e) + t ** 3 * (n - i + 3 * e - 3 * s);
        }
        static pLe(t, i, e, s, n, r, h, o, a, l) {
            if (s === n && r === h) return t;
            const u = Na(t, i, s, r, o, l),
                c = Da(e, n, h, a),
                d = Fa(e, n, h, a),
                f = La(e, n, h, a);
            return Ba(u, c, d, f);
        }
        static fVs(t, i, e, s) {
            const n = [],
                r = Da(t, i, e, s),
                h = Fa(t, i, e, s),
                o = La(t, i, e, s);
            for (let t = 0; t < Pa; ++t) {
                const i = Ba(t * Ga, r, h, o);
                n.push(i);
            }
            return n;
        }
    };
    const Pa = 11,
        Ga = 1 / (Pa - 1),
        Aa = 4,
        Ra = 0.01,
        ka = 1e-7,
        Oa = 10,
        Da = (t, i, e, s) => s - 3 * e + 3 * i - t,
        Fa = (t, i, e, s) => 3 * e - 6 * i + 3 * t,
        La = (t, i, e, s) => 3 * (i - t),
        Ba = (t, i, e, s) => ((i * t + e) * t + s) * t,
        Ua = (t, i, e, s) => 3 * i * t * t + 2 * e * t + s,
        Na = (t, i, e, s, n, r) => {
            if (1 == t) return 1;
            let h = 0,
                o = 1,
                a = r[o],
                l = Pa - 1;
            r[Pa - 1];
            for (; o != l && a <= t; ) o++, (a = r[o]), (h += Ga);
            o--, (a = r[o]);
            let u = h + ((t - a) / (r[o + 1] - a)) * Ga;
            const c = Da(i, e, s, n),
                d = Fa(i, e, s, n),
                f = La(i, e, s, n),
                p = Ua(u, c, d, f);
            if (0 === p) return u;
            if (p >= Ra) {
                for (let i = 0; i < Aa; ++i) {
                    u -= (Ba(u, c, d, f) - t) / Ua(u, c, d, f);
                }
                return u;
            }
            {
                let i,
                    e,
                    s = h,
                    n = h + Ga,
                    r = 0;
                do {
                    u = s + (n - s) / 2;
                    let h = Ba(u, c, d, f) - t;
                    h > 0 ? (n = u) : (s = u), (i = Math.abs(h) > ka), (e = ++r < Oa);
                } while (i && e);
                return u;
            }
        };
}
{
    const ja = self.t;
    function $a(t) {
        ja.tet(t) || ja.PK(t);
    }
    ja.x7t = class {
        constructor(t) {
            (this._ts = []), (this.Gqt = t || ""), (this.gLe = 0);
        }
        Ut() {
            this._x(), (this._ts = null);
        }
        Zn() {
            return this.Gqt;
        }
        _x() {
            ja.c4t(this._ts), (this.gLe = 0);
        }
        yLe() {
            return this.gLe;
        }
        X7t(t = Math.random() * this.yLe()) {
            ja.QRe(t, 0, this.gLe);
            let i = 0;
            for (const [e, s] of this._ts) if (((i += e), t < i)) return s;
            return 0;
        }
        PW() {
            return !!this._ts.length;
        }
        xO(t, i) {
            ja.QRe(t, 0, 1 / 0), $a(i), (this.gLe += t), this._ts.push([t, i]);
        }
        _si(t, i) {
            ja.QRe(t, 0, 1 / 0), $a(i);
            const e = 0 === t;
            for (let s = 0; s < this._ts.length; s++) {
                const n = this._ts[s],
                    r = e || n[0] === t,
                    h = n[1] === i;
                if (r && h) {
                    this._ts.splice(s, 1), (this.gLe -= n[0]);
                    break;
                }
            }
        }
        bLe() {
            return JSON.stringify(this._ts);
        }
        static vLe(t, i) {
            ja.vu(t);
            const e = new ja.x7t(i),
                s = JSON.parse(t);
            ja._T(s);
            for (const t of s) {
                ja._T(t);
                const i = t[0],
                    s = t[1];
                e.xO(i, s);
            }
            return e;
        }
    };
}
{
    const za = self.t,
        Va = ["alphabetical", "numerical", "no-sort"],
        Wa = ["ascending", "descending"],
        Ha = ["auto", "array", "tree", "array-with-meta-info"],
        Ka = ["all", "root-only"],
        qa = { filter: null, fqt: () => !0, Mls: null, sort: null, order: null, KUt: !1, WUt: "all", result: "auto" },
        Xa = [],
        Ya = [];
    (za.iKi = async function (t, i) {
        za.Zke(t), wl(i);
        const e = za.m(Qa, "tree", "directories");
        Xa.push(e);
        for (const i of t()) {
            za.yp(i.Zn), za.Zke(i.files);
            const t = za.m(Za, i.Zn());
            for (const e of i.files())
                if (e instanceof self.Promise) {
                    const i = await e;
                    za.Bke(i, Blob) && ((i.name = "dummy-name"), (i.dummy = !0)), t.SLe(i);
                } else za.Bke(e, Blob) && ((e.name = "dummy-name"), (e.dummy = !0)), t.SLe(e);
            e.xLe(t);
        }
        return el(e, i);
    }),
        (za.Tqt = function (t) {
            if (t.types)
                for (let i = 0; i < t.types.length; i++)
                    if ("Files" === t.types[i] || "application/x-c3-file" === t.types[i]) return !0;
            return !1;
        }),
        (za.wBi = async function (t, i) {
            za.nOe(t, DataTransfer), (i = wl(i));
            try {
                za.TOi();
                return (await gl(t, i)) ? await xl(t, i) : await Sl(t, i);
            } catch (t) {
                if (za.ca(t, fl)) throw t;
            }
        }),
        (za.L2t = async function (t) {
            return (
                za.nOe(t, DataTransfer),
                za.wBi(t, { filter: (t) => !0, Mls: "", sort: "no-sort", order: "ascending", KUt: !1, result: "array" })
            );
        }),
        (za.$Ut = async function (t, i) {
            za.Dpt(i), (i = wl(i)), za.TOi();
            if (await yl(t, null, i)) {
                const e = za.m(Qa, null, "files");
                return Xa.push(e), vl(t, e, i);
            }
            return bl(t, i);
        }),
        (za.TOi = function () {
            for (const t of Xa) t.Ut();
            za.yh(Xa);
            for (const t of ol) t.Ut();
            za.yh(ol);
            for (const t of Ya) t.Ut();
            za.yh(Ya);
        }),
        (za._qt = async function (t) {
            if (!za.Y$.bue) return Promise.resolve([]);
            const i = Array.from(t.items);
            if (!i.length) return Promise.resolve([]);
            if (i[0].getAsFileSystemHandle) {
                const t = [];
                for (let e = 0; e < i.length; e++) {
                    const s = i[e];
                    t.push(s.getAsFileSystemHandle());
                }
                return (await Promise.all(t)).filter((t) => {
                    if (t && "directory" === t.kind) return t;
                });
            }
            return Promise.resolve([]);
        }),
        (za.FOi = async function (t) {
            za._T(t);
            const i = t.map(async (t) => {
                const i = t.file,
                    e = t.MLe;
                if (!e) return i;
                const s = await e.Lls("animation.frame-durations"),
                    n = await e.Lls("animation.frame-image-points"),
                    r = await e.Lls("animation.frame-collision-polys"),
                    h = await e.Lls("animation.frame-tags"),
                    o = self.Jm.xps({
                        duration: s?.[t.index] ?? 0,
                        zus: n?.[t.index] ?? void 0,
                        Hfs: r?.[t.index] ?? void 0,
                        tag: h?.[t.index] ?? "",
                    });
                return za.VOe(i, { Pls: o }), i;
            });
            return await Promise.all(i);
        });
    class Ja extends za.MV {
        constructor(t) {
            za.vu(t),
                super(),
                (this.Gqt = t),
                (this.ELe = []),
                (this.CLe = []),
                (this._Le = null),
                (this.TLe = null),
                (this.GMt = null);
        }
        Ut() {
            if (this.ELe) for (const t of this.ELe) za.ca(t, Za) && t.Ut();
            if (((this.ELe = null), this.CLe)) for (const t of this.CLe) t.Ut();
            (this.CLe = null), (this.Gqt = null), (this._Le = null), (this.TLe = null), (this.GMt = null);
        }
        rB() {
            for (const t of this.Dls()) {
                if (za.ca(t, Za) && !t.rB()) return !1;
                if (za.nqt(t)) return !1;
            }
            for (const t of this.JUt()) if (!t.rB()) return !1;
            return !0;
        }
        Zn() {
            return this.Gqt;
        }
        Uls() {
            return this.ELe;
        }
        Dls() {
            return this.ELe;
        }
        JUt() {
            return this.CLe;
        }
        Cxt(t) {
            za.Et(t, Ja), (this.GMt = t);
        }
        ILe() {
            return !!this._Le;
        }
        PLe(t) {
            za.VNt(t), (this._Le = t);
        }
        GLe() {
            return this._Le;
        }
        async ALe(t) {
            if ((za.vu(t), this.TLe && this.TLe.hasOwnProperty(t))) return this.TLe[t];
            if (this._Le) {
                try {
                    const i = await this._Le.text();
                    if (!za.MOi(this._Le)) throw new Error("unsupported meta info");
                    if (((this.TLe = JSON.parse(i)), this.TLe.hasOwnProperty(t))) return this.TLe[t];
                } catch (t) {
                    throw "unsupported meta info" === t.message ? new pl(this._Le) : new ml(this._Le);
                }
                this._Le = null;
            }
            return null;
        }
        async Lls(t, i = !0) {
            za.vu(t);
            const e = t.split(".");
            let s;
            try {
                for (; e.length; ) {
                    const n = e.shift();
                    if (
                        ((s = s ? s[n] : await this.ALe(n)), za.Xl(s) || za.tet(s) || za.vwt(s) || !0 === s || !1 === s)
                    )
                        return s;
                    if ((!s || "object" != typeof s) && i) {
                        if (this.GMt) return await this.GMt.Lls(t);
                        if (!this.GMt) {
                            const i = this.Dls();
                            for (const e of i) {
                                const i = await e.Lls(t, !1);
                                if (za.Xl(i) || za.tet(i) || za.vwt(i) || !0 === i || !1 === i) return i;
                            }
                        }
                    }
                }
                return za.Xl(s) || za.tet(s) || za.vwt(s) || !0 === s || !1 === s ? s : void 0;
            } catch (t) {
                if (za.ca(t, fl)) throw t;
            }
        }
        xLe(t) {
            za.qm(t, Za), t && (t.Cxt(this), this.ELe.push(t));
        }
        RLe(t) {
            za.qm(t, Ja), t && (t.Cxt(this), this.CLe.push(t));
        }
        gFe(t) {
            if ((za.qm(t, Ja), t)) {
                (this.ELe = this.ELe.concat(t.Dls())), (this.CLe = this.CLe.concat(t.JUt()));
                for (const t of this.ELe) t.Cxt(this);
                for (const t of this.CLe) t.Cxt(this);
            }
        }
        async QUt(t) {
            za.Dpt(t);
            let i = [];
            try {
                for (const e of this.Dls())
                    za.ca(e, Za) && (await e.kLe(t), (i = i.concat(e.Uls()))), za.nqt(e) && i.push(e);
                return Za.kLe(t, i), i;
            } catch (t) {
                if (za.ca(t, fl)) throw t;
            }
        }
        async OLe(t) {
            za.Dpt(t);
            let i = [];
            try {
                for (const e of this.Dls())
                    za.ca(e, Za) && (await e.kLe(t), (i = i.concat(e.Uls()))), za.nqt(e) && i.push(e);
                for (const e of this.JUt()) {
                    const s = await e.OLe(t);
                    i = i.concat(s);
                }
                return Za.kLe(t, i), i;
            } catch (t) {
                if (za.ca(t, fl)) throw t;
            }
        }
        async DLe(t) {
            za.Dpt(t);
            let i = [];
            try {
                for (const e of this.Dls())
                    za.ca(e, Za) &&
                        (await e.kLe(t), (i = i.concat(e.Uls().map((t, i) => ({ file: t, index: i, MLe: e })))));
                for (const e of this.JUt()) {
                    const s = await e.DLe(t);
                    i = i.concat(s);
                }
                return i;
            } catch (t) {
                if (za.ca(t, fl)) throw t;
            }
        }
        async FLe() {
            const t = this.CLe;
            try {
                let i = "alphabetical";
                switch (
                    (t.every((t) => {
                        const i = Number(za.iN(t.Zn()));
                        return za.Xl(i);
                    }) && (i = "numerical"),
                    i)
                ) {
                    case "alphabetical":
                        t.sort((t, i) => t.Zn().localeCompare(i.Zn()));
                        break;
                    case "numerical":
                        t.sort((t, i) => {
                            let e = Number(za.iN(t.Zn())),
                                s = Number(za.iN(i.Zn()));
                            return za.Xl(e) || (e = 0), za.Xl(s) || (s = 0), e - s;
                        });
                }
            } catch (t) {
                if (za.ca(t, fl)) throw t;
            }
        }
    }
    class Za extends za.MV {
        constructor(t) {
            za.vu(t), super(), (this.Gqt = t), (this.Eqt = []), (this._Le = null), (this.TLe = null), (this.GMt = null);
        }
        Ut() {
            za.yh(this.Eqt),
                (this.Eqt = null),
                (this.Gqt = null),
                (this._Le = null),
                (this.TLe = null),
                (this.GMt = null);
        }
        rB() {
            return !(this.Eqt && this.Eqt.length);
        }
        Zn() {
            return this.Gqt;
        }
        Uls() {
            return this.Eqt;
        }
        SLe(t) {
            za.r1t(t), t && this.Eqt.push(t);
        }
        Cxt(t) {
            za.Et(t, Ja), (this.GMt = t);
        }
        ILe() {
            return !!this._Le;
        }
        PLe(t) {
            za.VNt(t), (this._Le = t);
        }
        GLe() {
            return this._Le;
        }
        static kLe(t, i, e, s) {
            za.Dpt(t), za._T(i);
            try {
                let n = e || t.sort,
                    r = s || t.order;
                if (void 0 === t.LLe && void 0 === e) {
                    i.every((t) => {
                        const i = Number(za.iN(t.name));
                        return za.Xl(i);
                    }) && (n = "numerical");
                }
                switch (n) {
                    case "alphabetical":
                        switch (r) {
                            case "ascending":
                                i.sort((t, i) => t.name.localeCompare(i.name));
                                break;
                            case "descending":
                                i.sort((t, i) => t.name.localeCompare(i.name)), i.reverse();
                                break;
                            default:
                                throw new Error(`invalid sort order "${r}", valid orders are "${Wa}"`);
                        }
                        break;
                    case "numerical":
                        switch (r) {
                            case "ascending":
                                i.sort((t, i) => {
                                    let e = Number(za.iN(t.name)),
                                        s = Number(za.iN(i.name));
                                    return za.Xl(e) || (e = 0), za.Xl(s) || (s = 0), e - s;
                                });
                                break;
                            case "descending":
                                i.sort((t, i) => {
                                    let e = Number(za.iN(t.name)),
                                        s = Number(za.iN(i.name));
                                    return za.Xl(e) || (e = 0), za.Xl(s) || (s = 0), s - e;
                                });
                                break;
                            default:
                                throw new Error(`invalid sort order "${r}", valid orders are "${Wa}"`);
                        }
                        break;
                    case "no-sort":
                        break;
                    default:
                        throw new Error(`invalid sort mode "${n}", valid modes are "${Va}"`);
                }
            } catch (t) {
                if (za.ca(t, fl)) throw t;
            }
        }
        async kLe(t) {
            za.Dpt(t);
            try {
                const i = await this.Lls("sort"),
                    e = await this.Lls("order");
                Za.kLe(t, this.Eqt, i, e);
            } catch (t) {
                if (za.ca(t, fl)) throw t;
            }
        }
        async ALe(t) {
            try {
                return await Ja.prototype.ALe.call(this, t);
            } catch (t) {
                if (za.ca(t, fl)) throw t;
            }
        }
        async Lls(t, i = !0) {
            try {
                return await Ja.prototype.Lls.call(this, t, i);
            } catch (t) {
                if (za.ca(t, fl)) throw t;
            }
        }
    }
    class Qa extends Ja {
        constructor(t, i, e) {
            za.k$(t),
                za.k$(i),
                za.Pce(e),
                super(t || "root"),
                (this.Osi = i),
                e && (1 === e.length && (this.Osi = "file"), (this.ELe = e));
        }
        lmt() {
            return this.Osi;
        }
        q8t(t) {
            this.Osi = t;
        }
        pHi() {
            if ("file" !== this.Osi) throw new Error("wrong type");
            return this.ELe[0];
        }
    }
    async function tl(t, i) {
        if ((za._T(t), za.Dpt(i), !za.lte(t, Za))) throw new Error("invalid file collection");
        try {
            for (const e of t) await e.kLe(i);
        } catch (t) {
            if (za.ca(t, fl)) throw t;
        }
        return t;
    }
    async function il(t) {
        za.Et(t, Ja), await t.FLe();
    }
    async function el(t, i) {
        if ("array" === i.result) {
            if (za.ca(t, Qa))
                try {
                    return await t.OLe(i);
                } catch (t) {
                    if (za.ca(t, fl)) throw t;
                }
            else if (za.vwt(t)) return Za.kLe({ sort: "numerical", order: "ascending", LLe: !0 }, t), t;
            throw new Error("unexpected filter result");
        }
        if ("array-with-meta-info" === i.result) {
            if (za.ca(t, Qa))
                try {
                    return await t.DLe(i);
                } catch (t) {
                    if (za.ca(t, fl)) throw t;
                }
            else if (za.vwt(t))
                return Za.kLe({ sort: "numerical", order: "ascending", LLe: !0 }, t), t.map((t, i) => ({ file: t }));
            throw new Error("unexpected filter result");
        }
        if ("tree" === i.result) {
            if (za.ca(t, Qa)) return t;
            if (za.vwt(t)) {
                Za.kLe({ sort: "numerical", order: "ascending", LLe: !0 }, t);
                const i = za.m(Qa, null, "files", t);
                return Xa.push(i), i;
            }
            throw new Error("unexpected filter result");
        }
        if ("auto" === i.result) return t;
        throw new Error("unexpected result mode");
    }
    class sl extends za.MV {
        constructor(t) {
            super(), (this.M5t = t);
        }
        Ut() {
            this.M5t = null;
        }
        BLe() {
            return !1;
        }
        ULe() {
            return !0;
        }
        NLe() {
            return za.lOe(this.M5t.name, "zip");
        }
        Zn() {
            return this.M5t.name;
        }
        jLe() {
            return !!this.BLe() && "__MACOSX" === this.Zn();
        }
        async $Le() {}
        async pHi() {
            return this.M5t;
        }
    }
    class nl extends sl {
        constructor(t) {
            super(t);
        }
        BLe() {
            return "directory" === this.M5t.kind;
        }
        ULe() {
            return "file" === this.M5t.kind;
        }
        NLe() {
            return "file" === this.M5t.kind && za.lOe(this.M5t.name, "zip");
        }
        Zn() {
            return this.M5t.name;
        }
        async $Le() {
            try {
                if (this.jLe()) return null;
                const t = [];
                for await (const i of this.M5t.values()) t.push(i);
                return al(t, "handles").filter((t) => t);
            } catch (t) {
                return console.error(t), null;
            }
        }
        async pHi() {
            try {
                return await this.M5t.getFile();
            } catch (t) {
                return console.error(t), null;
            }
        }
    }
    class rl extends sl {
        constructor(t) {
            super(t);
        }
        BLe() {
            return this.M5t.isDirectory;
        }
        ULe() {
            return this.M5t.isFile;
        }
        NLe() {
            return this.M5t.isFile && za.lOe(this.M5t.name, "zip");
        }
        Zn() {
            return this.M5t.name;
        }
        async $Le() {
            return new Promise((t, i) => {
                this.jLe()
                    ? t(null)
                    : this.M5t.createReader().readEntries(
                          (i) => {
                              t(al(i, "entries").filter((t) => t));
                          },
                          (i) => {
                              t(null);
                          }
                      );
            });
        }
        async pHi() {
            return new Promise((t, i) => {
                this.M5t.file(
                    async (i) => {
                        t(i);
                    },
                    (i) => {
                        t(null);
                    }
                );
            });
        }
    }
    class hl extends sl {
        constructor(t, i) {
            super(t), (this.zLe = i);
        }
        BLe() {
            return this.M5t.entry.directory;
        }
        ULe() {
            return !this.M5t.entry.directory;
        }
        NLe() {
            return !this.M5t.entry.directory && za.lOe(this.Zn(), "zip");
        }
        Zn() {
            return za.hbe(this.M5t.entry.filename).obe;
        }
        async $Le() {
            return new Promise((t, i) => {
                if (this.jLe()) t(null);
                else
                    try {
                        t(al(this.M5t.children, "zip-entries", this.zLe).filter((t) => t));
                    } catch (i) {
                        console.error(i), t(null);
                    }
            });
        }
        async pHi() {
            const t = await this.zLe.t4t(this.M5t.entry);
            return za.tN([t], this.Zn(), { type: t.type });
        }
        Ut() {
            this.zLe.Ut(), (this.zLe = null), super.Ut();
        }
    }
    const ol = [];
    function al(t, i, ...e) {
        if ((za.vu(i), (t = Array.from(t)), "handles" === i)) {
            const i = t.map((t) => za.m(nl, t));
            return ol.push(...i), i;
        }
        if ("entries" === i) {
            const i = t.map((t) => za.m(rl, t));
            return ol.push(...i), i;
        }
        if ("zip-entries" === i) {
            const i = t.map((t) => za.m(hl, t, ...e));
            return ol.push(...i), i;
        }
        if ("files" === i) {
            const i = t.map((t) => za.m(sl, t));
            return ol.push(...i), i;
        }
        throw new Error("unexpected filter result type");
    }
    async function ll(t, i, e, s) {
        za.HZ(t, sl), za.Et(i, Ja), za.Dpt(e), za.vu(s);
        try {
            const n = za.m(Za, s);
            i.xLe(n);
            for (let r = 0; r < t.length; r++) {
                const h = t[r];
                if (e.Mls && za.uOe(e.Mls, h.Zn()) && !n.ILe()) {
                    const t = await ul(h);
                    n.PLe(t), i.PLe(t);
                } else if (e.KUt && "all" === e.WUt && h.NLe()) {
                    const t = await dl(h, e, i);
                    i.gFe(t);
                } else if (e.KUt && "root-only" === e.WUt && "" === s && h.NLe()) {
                    const t = await dl(h, e, i);
                    i.gFe(t);
                } else if (h.BLe()) {
                    const t = await cl(h, e, i);
                    i.RLe(t);
                } else if (h.ULe()) {
                    const t = await ul(h, e);
                    n.SLe(t);
                }
            }
            return await il(i), await tl(i.Dls(), e);
        } catch (t) {
            if (za.ca(t, fl)) throw t;
        }
    }
    async function ul(t, i) {
        za.Et(t, sl), za.oN(i);
        try {
            const e = await t.pHi();
            if (!e) return null;
            if (0 === e.size) return null;
            if (i && !i.filter(e)) return null;
            if (i && !(await i.fqt(e))) return null;
            if (za.W2t(e)) {
                if (!(await za.hRt(e))) return null;
            } else if (za.zye(e)) {
                const t = await za.cRt(e),
                    i = await za.uRt(e);
                if (!t && i);
                else if (t && i);
                else if (!t || i) return null;
            } else if (za.Abe(e)) {
                if (!(await za.uRt(e))) return null;
            } else if (za.Pbe(e)) {
                if (!(await za.czt(e))) return null;
            } else if (za.MOi(e)) {
                if (!(await za.VLe(e))) return null;
            } else if (za.WLe(e)) {
                if (!(await za.HLe(e))) return null;
            }
            return await za.wts(e);
        } catch (t) {
            return console.error(t), null;
        }
    }
    async function cl(t, i, e) {
        za.Et(t, sl), za.Dpt(i), za.Et(e, Ja);
        try {
            const s = za.m(Ja, t.Zn());
            s.Cxt(e);
            const n = await t.$Le();
            return await ll(n, s, i, t.Zn()), s;
        } catch (t) {
            if (za.ca(t, fl)) throw t;
            return console.error(t), null;
        }
    }
    async function dl(t, i, e) {
        za.Et(t, sl), za.Dpt(i), za.Et(e, Ja);
        try {
            const s = za.m(Ja, za.iN(t.Zn()));
            s.Cxt(e);
            const n = await ul(t),
                r = new za.pRt();
            Ya.push(r), await r.q2t(n);
            const h = al(r.KLe(), "zip-entries", r);
            return await ll(h, s, i, s.Zn()), s;
        } catch (t) {
            if (za.ca(t, fl)) throw t;
            return null;
        }
    }
    class fl extends Error {
        constructor(t, i) {
            super(t), (this.VLt = i);
        }
        get file() {
            return this.VLt;
        }
    }
    class pl extends fl {
        constructor(t) {
            super("config-file-unsupported-format", t);
        }
    }
    class ml extends fl {
        constructor(t) {
            super("config-file-json-parse-error", t);
        }
    }
    function wl(t) {
        if ((za.oN(t), (t = Object.assign({}, qa, t)), !za.GUt(t.filter)))
            throw new Error('"filter" option must be a function');
        if (!za.GUt(t.fqt)) throw new Error('"asyncFilter" option must be a function');
        if (t.Mls && !za.tet(t.Mls)) throw new Error('"meta_info_file" option must be a string');
        if (!Va.includes(t.sort)) throw new Error(`invalid "sort" value, valid values are ${Va}`);
        if (!Wa.includes(t.order)) throw new Error(`invalid "order" value, valid values are ${Wa}`);
        if (!Ha.includes(t.result)) throw new Error(`invalid "result" value, valid values are ${Ha}`);
        if (!Ka.includes(t.WUt)) throw new Error(`invalid "extractMode" value, valid values are ${Ka}`);
        return t;
    }
    async function gl(t, i) {
        return za.nOe(t, DataTransfer), (i = wl(i)), await yl(t.items, t, i);
    }
    async function yl(t, i, e) {
        za.Dpt(e);
        const s = Array.from(t);
        if (!s.length) return Promise.resolve(!1);
        const n = s[0];
        if (n.webkitGetAsEntry || n.getAsEntry)
            for (let t = 0; t < s.length; t++) {
                const i = s[t];
                let r;
                if ((n.webkitGetAsEntry ? (r = i.webkitGetAsEntry()) : n.getAsEntry && (r = i.getAsEntry()), r)) {
                    if (r && r.isDirectory) return Promise.resolve(!0);
                    if (e.KUt && r && r.isFile && za.lOe(r.name, "zip")) return Promise.resolve(!0);
                }
            }
        else {
            if (n.getAsFileSystemHandle) {
                const t = [];
                for (let i = 0; i < s.length; i++) {
                    const e = s[i];
                    t.push(e.getAsFileSystemHandle());
                }
                const n = await Promise.all(t);
                return (
                    (i.c3_filesystem_handles = n),
                    n.some((t) => {
                        if (t) {
                            if ("directory" === t.kind) return !0;
                            if (e.KUt && "file" === t.kind && za.lOe(t.name, "zip")) return !0;
                        }
                    })
                );
            }
            if (za.nqt(n) && e.KUt) for (const t of s) if (za.lOe(t.name, "zip")) return Promise.resolve(!0);
        }
        return Promise.resolve(!1);
    }
    async function bl(t, i) {
        za.Dpt(i), (i = wl(i));
        try {
            const e = Array.from(t)
                    .filter((t) => 0 !== t.size)
                    .filter((t) => i.filter(t))
                    .map(async (t) => {
                        if (!(await i.fqt(t))) return null;
                        if (za.W2t(t)) {
                            if (!(await za.hRt(t))) return null;
                        } else if (za.zye(t)) {
                            const i = await za.cRt(t),
                                e = await za.uRt(t);
                            if (!i && e);
                            else if (i && e);
                            else if (!i || e) return null;
                        } else if (za.Abe(t)) {
                            if (!(await za.uRt(t))) return null;
                        } else if (za.Pbe(t)) {
                            if (!(await za.czt(t))) return null;
                        } else if (za.MOi(t)) {
                            if (!(await za.VLe(t))) return null;
                        } else if (za.WLe(t)) {
                            if (!(await za.HLe(t))) return null;
                        }
                        try {
                            return await za.wts(t);
                        } catch (t) {
                            return console.error(t), null;
                        }
                    }),
                s = (await Promise.all(e)).filter((t) => t);
            return await el(s, i);
        } catch (t) {
            if (za.ca(t, fl)) throw t;
        }
    }
    async function vl(t, i, e) {
        za.Et(i, Ja), za.oN(e), (e = wl(e));
        const s = al(t, i.lmt());
        try {
            return await ll(s, i, e, ""), i.q8t("directories"), await el(i, e);
        } catch (t) {
            if (za.ca(t, fl)) throw t;
        }
    }
    async function Sl(t, i) {
        za.nOe(t, DataTransfer), za.oN(i), (i = wl(i));
        let e = !1;
        if (
            (t.c3_filesystem_handles && (e = t.c3_filesystem_handles.every((t) => !t)), t.c3_filesystem_handles && !e)
        ) {
            const e = t.c3_filesystem_handles.map((t) => t.getFile()),
                s = await Promise.all(e);
            return await bl(s, i);
        }
        return await bl(t.files, i);
    }
    async function xl(t, i) {
        za.nOe(t, DataTransfer), za.oN(i), (i = wl(i));
        const e = za.m(Qa);
        Xa.push(e);
        const s = t.items[0];
        let n = null;
        try {
            if (t.c3_filesystem_handles) e.q8t("handles"), (n = await vl(t.c3_filesystem_handles, e, i));
            else if (s.getAsFileSystemHandle) {
                e.q8t("handles");
                const s = Array.from(t.items).map((t) => t.getAsFileSystemHandle()),
                    r = await Promise.all(s);
                (t.c3_filesystem_handles = r), (n = await vl(r, e, i));
            } else if (s.webkitGetAsEntry) {
                e.q8t("entries");
                const s = Array.from(t.items)
                    .map((t) => t.webkitGetAsEntry())
                    .filter((t) => !!t);
                n = await vl(s, e, i);
            }
            if (!e.lmt()) throw new Error("data transfer has no entries");
            return e.q8t("directories"), await el(e, i);
        } catch (t) {
            if (za.ca(t, fl)) throw t;
        }
    }
}
{
    const Ml = self.t;
    (Ml.hRt = async function (t) {
        if ((Ml.VNt(t), !Ml.W2t(t))) return !1;
        const i = t.slice(0, 8),
            e = new DataView(await i.arrayBuffer());
        switch (Ml.MimeType.qLe(t)) {
            case "image/png":
            case "image/apng":
                return 2303741511 === e.getUint32(0) && 218765834 === e.getUint32(4);
            case "image/jpeg":
                return 255 === e.getUint8(0) && 216 === e.getUint8(1) && 255 === e.getUint8(2);
            case "image/webp":
                return 1380533830 === e.getUint32(0);
            case "image/gif":
                return 1195984440 === e.getUint32(0);
            case "image/bmp":
                return 16973 === e.getUint16(0);
            case "image/x-icon":
                return 256 === e.getUint32(0);
            case "image/svg+xml":
                try {
                    const i = await Ml.Cle(t),
                        e = new self.DOMParser();
                    return 0 === e.parseFromString(i, "image/svg+xml").getElementsByTagName("parsererror").length;
                } catch (t) {
                    return !1;
                }
            case "image/avif":
            case "image/tiff":
            case "image/jxl": {
                const i = self.URL.createObjectURL(t);
                let e = new Image();
                e.src = i;
                try {
                    return await e.decode(), URL.revokeObjectURL(i), (e = null), !0;
                } catch (t) {
                    return URL.revokeObjectURL(i), (e = null), !1;
                }
            }
            default:
                return !1;
        }
    }),
        (Ml.W2t = function (t) {
            return Ml.VNt(t), t.type ? -1 !== t.type.search(/image\/.*/) : Ml.VVt(t.name);
        }),
        (Ml.VVt = function (t) {
            Ml.vu(t);
            return (
                -1 !==
                Ml.MimeType.DVt(Ml.sl(t))
                    .GN()
                    .search(/image\/.*/)
            );
        }),
        (Ml.cRt = async function (t) {
            if ((Ml.VNt(t), !Ml.zye(t) && !Ml.Abe(t))) return !1;
            const i = t.slice(0, 128),
                e = new DataView(await i.arrayBuffer());
            switch (Ml.MimeType.qLe(t)) {
                case "audio/ogg":
                case "video/ogg":
                    if (1332176723 === e.getUint32(0, !1))
                        try {
                            const i = await t.slice(0, 65536).arrayBuffer(),
                                e = new TextDecoder().decode(i);
                            if (e.includes("OpusHead") || (e.includes("vorbis") && !e.includes("theora"))) return !0;
                        } catch (t) {}
                    return !1;
                case "audio/webm":
                case "video/webm":
                    if (440786851 === e.getUint32(0, !1))
                        try {
                            const i = await t.slice(0, 65536).arrayBuffer(),
                                e = new TextDecoder().decode(i);
                            if (
                                e.includes("A_OPUS") ||
                                (e.includes("A_VORBIS") &&
                                    !(e.includes("V_VP8") || e.includes("V_VP9") || e.includes("V_AV1")))
                            )
                                return !0;
                        } catch (t) {}
                    return !1;
                case "audio/wav":
                case "audio/x-wav":
                    return 1380533830 === e.getUint32(0, !1) && 1463899717 === e.getUint32(8, !1);
                case "audio/flac":
                    return 1716281667 === e.getUint32(0, !1);
                case "audio/mpeg":
                case "video/mpeg":
                    try {
                        const i = await t.slice(0, 65536).arrayBuffer(),
                            e = new DataView(i);
                        let s = 0;
                        if (73 === e.getUint8(0) && 68 === e.getUint8(1) && 51 === e.getUint8(2)) {
                            s =
                                10 +
                                (((127 & e.getUint8(6)) << 21) |
                                    ((127 & e.getUint8(7)) << 14) |
                                    ((127 & e.getUint8(8)) << 7) |
                                    (127 & e.getUint8(9)));
                        }
                        if (s + 1 >= e.byteLength) return !1;
                        const n = e.getUint8(s),
                            r = e.getUint8(s + 1);
                        return 255 === n && !(224 & ~r);
                    } catch (t) {}
                    return !1;
                case "audio/midi":
                case "audio/x-midi":
                    return 1297377380 === e.getUint32(0, !1);
                case "audio/mp4":
                case "video/mp4":
                    if (1718909296 === !e.getUint32(4, !1)) return !1;
                default: {
                    const i = new Promise((i) => {
                            const e = document.createElement("audio"),
                                s = URL.createObjectURL(t);
                            e.preload = "metadata";
                            const n = (t) => {
                                    e.removeEventListener("loadedmetadata", r),
                                        e.removeEventListener("error", h),
                                        URL.revokeObjectURL(s),
                                        e.pause(),
                                        e.removeAttribute("src"),
                                        e.load(),
                                        i(t);
                                },
                                r = () => n(!0),
                                h = () => n(!1);
                            e.addEventListener("loadedmetadata", r), e.addEventListener("error", h), (e.src = s);
                        }),
                        e = new Promise((i) => {
                            const e = document.createElement("video"),
                                s = URL.createObjectURL(t);
                            e.preload = "metadata";
                            const n = (t) => {
                                    const n = e.videoWidth,
                                        o = e.videoHeight,
                                        a = Ml.Xl(n) && n > 0 && Ml.Xl(o) && o > 0;
                                    e.removeEventListener("loadedmetadata", r),
                                        e.removeEventListener("error", h),
                                        URL.revokeObjectURL(s),
                                        e.pause(),
                                        e.removeAttribute("src"),
                                        e.load(),
                                        i(a);
                                },
                                r = () => n(),
                                h = () => n();
                            e.addEventListener("loadedmetadata", r), e.addEventListener("error", h), (e.src = s);
                        }),
                        s = await Promise.all([i, e]);
                    return s[0] && !s[1];
                }
            }
        }),
        (Ml.zye = function (t) {
            return (
                Ml.VNt(t),
                t.type
                    ? -1 !== t.type.search(/audio\/.*/) || -1 !== t.type.search(/ogg/) || -1 !== t.type.search(/webm/)
                    : Ml.zVt(t.name)
            );
        }),
        (Ml.zVt = function (t) {
            Ml.vu(t);
            const i = Ml.MimeType.DVt(Ml.sl(t)).GN();
            return -1 !== i.search(/audio\/.*/) || -1 !== i.search(/ogg/) || -1 !== i.search(/webm/);
        }),
        (Ml.uRt = async function (t) {
            if ((Ml.VNt(t), !Ml.zye(t) && !Ml.Abe(t))) return !1;
            const i = t.slice(0, 128),
                e = new DataView(await i.arrayBuffer());
            switch (Ml.MimeType.qLe(t)) {
                case "video/webm":
                case "audio/webm":
                    if (440786851 === e.getUint32(0, !1))
                        try {
                            const i = await t.slice(0, 65536).arrayBuffer(),
                                e = new TextDecoder().decode(i);
                            if (e.includes("V_VP8") || e.includes("V_VP9") || e.includes("V_AV1")) return !0;
                        } catch (t) {}
                    return !1;
                case "video/ogg":
                case "audio/ogg":
                    if (1332176723 === e.getUint32(0, !1))
                        try {
                            const i = await t.slice(0, 65536).arrayBuffer();
                            if (new TextDecoder().decode(i).includes("theora")) return !0;
                        } catch (t) {}
                    return !1;
                case "video/avi":
                case "video/x-msvideo":
                    return 1380533830 === e.getUint32(0, !1) && 1096173856 === e.getUint32(8, !1);
                case "video/mpeg":
                case "audio/mpeg":
                    try {
                        const i = await t.slice(0, 65536).arrayBuffer(),
                            e = new DataView(i);
                        if (442 !== e.getUint32(0, !1)) return !1;
                        for (let t = 4; t < e.byteLength - 3; t++)
                            if (
                                0 === e.getUint8(t) &&
                                0 === e.getUint8(t + 1) &&
                                1 === e.getUint8(t + 2) &&
                                e.getUint8(t + 3) >= 224 &&
                                e.getUint8(t + 3) <= 239
                            )
                                return !0;
                    } catch (t) {}
                    return !1;
                case "video/quicktime":
                case "video/mp4":
                case "audio/mp4":
                    if (1718909296 !== e.getUint32(4, !1)) return !1;
                default:
                    return new Promise((i) => {
                        const e = document.createElement("video"),
                            s = URL.createObjectURL(t);
                        e.preload = "metadata";
                        const n = (t) => {
                                const n = e.videoWidth,
                                    o = e.videoHeight,
                                    a = Ml.Xl(n) && n > 0 && Ml.Xl(o) && o > 0;
                                e.removeEventListener("loadedmetadata", r),
                                    e.removeEventListener("error", h),
                                    URL.revokeObjectURL(s),
                                    e.pause(),
                                    e.removeAttribute("src"),
                                    e.load(),
                                    i(a);
                            },
                            r = () => n(),
                            h = () => n();
                        e.addEventListener("loadedmetadata", r), e.addEventListener("error", h), (e.src = s);
                    });
            }
        }),
        (Ml.Abe = function (t) {
            return (
                Ml.VNt(t),
                t.type
                    ? -1 !== t.type.search(/video\/.*/) || -1 !== t.type.search(/ogg/) || -1 !== t.type.search(/webm/)
                    : Ml.HVt(t.name)
            );
        }),
        (Ml.HVt = function (t) {
            Ml.vu(t);
            const i = Ml.MimeType.DVt(Ml.sl(t)).GN();
            return -1 !== i.search(/video\/.*/) || -1 !== i.search(/ogg/) || -1 !== i.search(/webm/);
        });
    const El = new Map();
    (Ml.XLe = async function (t) {
        if (El.has(t.name)) return El.get(t.name);
        try {
            if ((await Ml.czt(t)) && El.has(t.name)) return El.get(t.name);
        } catch (t) {}
    }),
        (Ml.czt = async function (t) {
            if ((Ml.VNt(t), !Ml.Pbe(t))) return !1;
            if (El.has(t.name)) return !0;
            const i = t.slice(0, 12),
                e = new DataView(await i.arrayBuffer());
            let s = !1;
            switch (Ml.MimeType.qLe(t)) {
                case "application/font-woff":
                    2001684038 === e.getUint32(0, !1) && (s = !0);
                    break;
                case "font/woff2":
                    2001684018 === e.getUint32(0, !1) && (s = !0);
                    break;
                case "application/font-sfnt": {
                    const t = e.getUint32(0, !1);
                    (65536 !== t && 1330926671 !== t) || (s = !0);
                    break;
                }
                case "application/vnd.ms-fontobject":
                    if (e.byteLength >= 36) {
                        const i = t.slice(34, 36),
                            e = new DataView(await i.arrayBuffer()).getUint16(0, !0);
                        (1 !== e && 2 !== e) || (s = !0);
                        break;
                    }
            }
            if (s) {
                const i = URL.createObjectURL(t);
                try {
                    const e = new globalThis.FontFace(t.name, `url(${i})`);
                    return await e.load(), El.set(t.name, e), !0;
                } catch (t) {
                    return !1;
                } finally {
                    URL.revokeObjectURL(i);
                }
            }
            return !1;
        }),
        (Ml.Pbe = function (t) {
            return Ml.VNt(t), t.type ? t.type.includes("font") : Ml.$Vt(t.name);
        }),
        (Ml.$Vt = function (t) {
            Ml.vu(t);
            return Ml.MimeType.DVt(Ml.sl(t)).$F();
        }),
        (Ml.uzt = function (t) {
            if ((Ml.VNt(t), t.type)) {
                const i = Ml.MimeType.Ke(t.type);
                return i.HN() || i.NN();
            }
            return Ml.KVt(t.name);
        }),
        (Ml.KVt = function (t) {
            Ml.vu(t);
            const i = Ml.MimeType.DVt(Ml.sl(t));
            return i.HN() || i.NN();
        }),
        (Ml.fRt = function (t) {
            return Ml.vu(t), Ml.MimeType.DVt(Ml.sl(t)).HN();
        }),
        (Ml.wRt = function (t) {
            return Ml.vu(t), Ml.MimeType.DVt(Ml.sl(t)).NN();
        }),
        (Ml.YVt = function (t) {
            Ml.vu(t);
            return Ml.MimeType.DVt(Ml.sl(t)).YLe();
        }),
        (Ml.WVt = function (t) {
            Ml.vu(t);
            const i = Ml.sl(t),
                e = Ml.MimeType.DVt(i).GN();
            return ("application/zip" === e && ".c3p" === i) || ("application/octet-stream" === e && ".c3p" === i);
        }),
        (Ml.ZVt = function (t) {
            Ml.vu(t);
            const i = Ml.sl(t),
                e = Ml.MimeType.DVt(i).GN();
            return ("application/zip" === e && ".capx" === i) || ("application/octet-stream" === e && ".capx" === i);
        }),
        (Ml.JVt = function (t) {
            Ml.vu(t);
            const i = Ml.sl(t),
                e = Ml.MimeType.DVt(i).GN();
            return (
                ("application/x-construct3-addon" === e && ".c3addon" === i) ||
                ("application/octet-stream" === e && ".c3addon" === i)
            );
        }),
        (Ml.XVt = function (t) {
            Ml.vu(t);
            const i = Ml.sl(t),
                e = Ml.MimeType.DVt(i).GN();
            return (
                ("application/x-construct2-addon" === e && ".c2addon" === i) ||
                ("application/octet-stream" === e && ".c2addon" === i)
            );
        }),
        (Ml.HUt = async function (t) {
            if ((Ml.VNt(t), !Ml.JLe(t))) return !1;
            const i = new Uint8Array(await t.slice(0, 4).arrayBuffer()).join(" ");
            return ["80 75 3 4", "80 75 5 6", "80 75 7 8"].includes(i);
        }),
        (Ml.JLe = function (t) {
            return Ml.VNt(t), t.type ? !!t.type.match("zip") : Ml.zLt(t.name);
        }),
        (Ml.zLt = function (t) {
            Ml.vu(t);
            const i = Ml.sl(t),
                e = Ml.MimeType.DVt(i).GN();
            return ("application/zip" === e && ".zip" === i) || ("application/octet-stream" === e && ".zip" === i);
        }),
        (Ml.VLe = async function (t) {
            Ml.VNt(t);
            try {
                const i = await Ml.Cle(t);
                return JSON.parse(i);
            } catch (t) {
                return !1;
            }
        }),
        (Ml.MOi = function (t) {
            return Ml.VNt(t), t.type ? !!t.type.match("json") : Ml.jOi(t.name);
        }),
        (Ml.jOi = function (t) {
            Ml.vu(t);
            return !!Ml.MimeType.DVt(Ml.sl(t)).GN().match("json");
        }),
        (Ml.HLe = async function (t) {
            if ((Ml.VNt(t), !Ml.WLe(t))) return !1;
            try {
                const i = await Ml.Cle(t);
                return !new DOMParser().parseFromString(i, "application/xml").querySelector("parsererror");
            } catch (t) {
                return !1;
            }
        }),
        (Ml.WLe = function (t) {
            return Ml.VNt(t), t.type ? !!t.type.match("text/xml") || "text/xml" === t.type : Ml.jOi(t.name);
        }),
        (Ml.ZLe = function (t) {
            Ml.vu(t);
            const i = Ml.MimeType.DVt(Ml.sl(t)).GN();
            return !!i.match("text/xml") || "text/xml" === i;
        }),
        (Ml.wqt = async function (t) {
            if ((Ml.VNt(t), !Ml.lRt(t))) return !1;
            try {
                const i = await Ml.Cle(t),
                    e = new self.DOMParser();
                return 0 === e.parseFromString(i, "image/svg+xml").getElementsByTagName("parsererror").length;
            } catch (t) {
                return !1;
            }
        }),
        (Ml.lRt = function (t) {
            return Ml.VNt(t), t.type ? !!t.type.match("image/svg+xml") || "image/svg+xml" === t.type : Ml.uqt(t.name);
        }),
        (Ml.uqt = function (t) {
            Ml.vu(t);
            const i = Ml.MimeType.DVt(Ml.sl(t)).GN();
            return !!i.match("image/svg+xml") || "image/svg+xml" === i;
        }),
        (Ml.QLe = function (t) {
            return Ml.VNt(t), Ml.MimeType.xEs(t).IN();
        }),
        (Ml.Z$ = function (t) {
            return Ml.VNt(t), t.type ? Ml.MimeType.Ke(t.type).tBe() : Ml.MimeType.DVt(Ml.sl(t.name)).tBe();
        }),
        (Ml.LVt = function (t) {
            Ml.vu(t);
            const i = Ml.MimeType.DVt(Ml.sl(t));
            return i?.tBe();
        }),
        (Ml.aRt = async function (t) {
            if ((Ml.VNt(t), !Ml.W2t(t))) return !1;
            const i = await t.slice(0, 32768).arrayBuffer(),
                e = new DataView(i),
                s = new TextDecoder("utf-8"),
                n = new Uint8Array(i),
                r = s.decode(n.subarray(0, 6));
            if ("GIF89a" === r || "GIF87a" === r) {
                let t = 6,
                    e = 0;
                for (; t + 1 < i.byteLength; ) {
                    if (33 === n[t] && 249 === n[t + 1] && (e++, e > 1)) return !0;
                    t++;
                }
                return !1;
            }
            if ([137, 80, 78, 71, 13, 10, 26, 10].every((t, i) => n[i] === t)) {
                let t = 8;
                for (; t + 8 <= i.byteLength && !(t + 8 > i.byteLength); ) {
                    const r = e.getUint32(t, !1),
                        h = s.decode(n.subarray(t + 4, t + 8));
                    if (r > i.byteLength - t - 12) break;
                    if ("acTL" === h) return !0;
                    if ("IDAT" === h || "IEND" === h) break;
                    t += 8 + r + 4;
                }
                return !1;
            }
            const h = s.decode(n.subarray(0, 4)),
                o = s.decode(n.subarray(8, 12));
            if ("RIFF" === h && "WEBP" === o) {
                let t = 12;
                for (; t + 8 <= i.byteLength; ) {
                    const r = s.decode(n.subarray(t, t + 4)),
                        h = e.getUint32(t + 4, !0);
                    if (h > i.byteLength - t - 8) break;
                    if ("ANIM" === r) return !0;
                    t += 8 + h + (h % 2);
                }
                return !1;
            }
            return !1;
        }),
        (Ml.wVt = async function (t) {
            Ml.VNt(t);
            const i = await t.slice(0, 1024).arrayBuffer(),
                e = new globalThis.Uint8Array(i);
            try {
                const t = new TextDecoder("utf-8", { fatal: !0 }).decode(e),
                    i = new TextEncoder().encode(t);
                if (i.length !== e.length) return !1;
                for (let t = 0; t < i.length; t++) if (i[t] !== e[t]) return !1;
                return !0;
            } catch (t) {
                return !1;
            }
        });
}
{
    const Cl = self.t,
        _l = self.assert,
        Tl = new Map();
    Cl.rMi = class {
        static oMt(t, i) {
            Tl.set(t, i);
        }
        static GMi(t, i) {
            Cl.vu(t), Cl.yp(i);
            const e = Tl.get(t);
            return (
                _l(e, `missing ignore function for user '${t}'`),
                new Promise(async (t, s) => {
                    if (!e()) return void s("ignore-results");
                    const n = await i();
                    e() ? t(n) : s("ignore-results");
                })
            );
        }
        static dMi(t, i) {
            if ((Cl.kDt(i), Cl.ca(t, Error))) {
                if ("ignore-results" !== t.message) {
                    if (!i) throw t;
                    i(t);
                }
            } else {
                if (!Cl.tet(t)) throw new Error("missing error argument");
                if ("ignore-results" !== t) {
                    const e = new Error(t);
                    if (!i) throw e;
                    i(e);
                }
            }
        }
    };
}
{
    const Il = self.t,
        Pl = Il.r4;
    function Gl(t, i, e, s) {
        return Il.wi(t), Il.wi(i), Il.wi(e), Il.wi(s), !(s < t) && !(i < e);
    }
    function Al(t, i, e, s, n, r) {
        Il.Et(t, Pl), Il.Et(i, Pl), Il.HZ(e, Pl), Il.HZ(s, Pl), Il.Et(n, Pl), Il.qm(r, Fl);
        const h = [0, 0],
            o = [0, 0],
            a = new Pl();
        a.mn(i), a.offset(-t.B4(), -t.Y4());
        const l = a.dot(n);
        if ((kl(e, n, h), kl(s, n, o), (o[0] += l), (o[1] += l), h[0] > o[1] || o[0] > h[1])) return !0;
        if (!r) return !1;
        let u = 0;
        if (h[0] < o[0])
            if (h[1] < o[1]) u = h[1] - o[0];
            else {
                const t = h[1] - o[0],
                    i = o[1] - h[0];
                u = t < i ? t : -i;
            }
        else if (h[1] > o[1]) u = h[0] - o[1];
        else {
            const t = h[1] - o[0],
                i = o[1] - h[0];
            u = t < i ? t : -i;
        }
        const c = Math.abs(u);
        return c < r.iBe() && (r.eBe(c), r.sBe().mn(n), u < 0 && r.sBe().reverse()), !1;
    }
    function Rl(t, i, e) {
        Il.Et(t, Ol), Il.Et(i, Ol), Il.qm(e, Fl);
        const s = t.nBe(),
            n = s.length,
            r = i.nBe(),
            h = r.length,
            o = t.Wlt(),
            a = i.Wlt(),
            l = t.rBe(),
            u = i.rBe();
        for (let t = 0; t < n; t++) if (Al(o, a, s, r, l[t], e)) return !1;
        for (let t = 0; t < h; t++) if (Al(o, a, s, r, u[t], e)) return !1;
        if (e) {
            e.hBe(t), e.oBe(i);
            const s = e.odt();
            s.mn(e.sBe()), s.scale(e.iBe(), e.iBe());
        }
        return !0;
    }
    function kl(t, i, e) {
        Il.HZ(t, Pl), Il.Et(i, Pl), Il._T(e), Il.wi(e[0]), Il.wi(e[1]);
        let s = Number.MAX_VALUE,
            n = -Number.MAX_VALUE;
        const r = t.length;
        for (let e = 0; e < r; e++) {
            const r = t[e].dot(i);
            r < s && (s = r), r > n && (n = r);
        }
        (e[0] = s), (e[1] = n);
    }
    class Ol {
        constructor(t, i, e) {
            Il.wi(t),
                Il.wi(i),
                Il.HZ(e, Pl),
                (this.aBe = new Pl(t, i)),
                (this.dus = null),
                (this.lBe = new Pl()),
                (this.uBe = new Pl()),
                (this.cBe = null),
                (this.dBe = null),
                (this.fBe = null),
                this.mus(e);
        }
        Ut() {
            (this.aBe = null),
                (this.lBe = null),
                (this.uBe = null),
                Il.yh(this.dus),
                (this.dus = null),
                (this.lBe = null),
                Il.yh(this.cBe),
                (this.cBe = null),
                Il.yh(this.dBe),
                (this.dBe = null),
                Il.yh(this.fBe),
                (this.fBe = null);
        }
        Wlt() {
            return this.aBe;
        }
        pBe() {
            return this.lBe;
        }
        rBe() {
            return this.fBe;
        }
        mBe() {
            return this.dBe;
        }
        nBe() {
            return this.cBe;
        }
        mus(t) {
            if (!this.dus || this.dus.length !== t.length) {
                var i = (this.cBe = []),
                    e = (this.dBe = []),
                    s = (this.fBe = []);
                for (let n = 0; n < t.length; n++) i.push(new Pl()), e.push(new Pl()), s.push(new Pl());
            }
            (this.dus = t), this._o();
        }
        dk() {
            this.lBe.set(this.aBe.B4(), this.aBe.Y4());
        }
        ylt() {
            this.lBe.set(0, 0);
        }
        Blt() {
            this.uBe.set(this.aBe.B4(), this.aBe.Y4());
        }
        J3() {
            this.aBe.set(this.uBe.B4(), this.uBe.Y4()), this.uBe.set(0, 0);
        }
        Hlt(t, i) {
            Il.wi(t), Il.wi(i), this.aBe.set(this.lBe.B4() + t, this.lBe.Y4() + i);
        }
        Tat(t, i) {
            Il.wi(t), Il.wi(i), this.aBe.offset(t, i);
        }
        _o() {
            const t = this.cBe,
                i = this.dBe,
                e = this.fBe,
                s = this.dus,
                n = s.length;
            for (let i = 0; i < n; i++) t[i].mn(s[i]);
            for (let s = 0; s < n; s++) {
                var r = t[s],
                    h = s < n - 1 ? t[s + 1] : t[0],
                    o = i[s];
                o.mn(h), o.offset(-r.B4(), -r.Y4());
                const a = e[s];
                a.mn(o), a.VDe(), a.normalize();
            }
        }
    }
    class Dl extends Ol {
        constructor(t, i, e, s) {
            Il.wi(t),
                Il.wi(i),
                Il.wi(e),
                Il.wi(s),
                super(t, i, [new Pl(), new Pl(e, 0), new Pl(e, s), new Pl(0, s)]),
                (this.lp = null),
                (this.wBe = new Pl()),
                (this.gBe = new Pl()),
                (this.FDs = !0);
        }
        static edt(t) {
            return Il.Et(t, Il.Rect), new Dl(t.un(), t.pn(), t.width(), t.height());
        }
        lht(t) {
            this.FDs = !!t;
        }
        Ant() {
            return this.FDs;
        }
        sA() {
            const t = this.aBe.B4(),
                i = this.aBe.Y4(),
                e = this.lp.B4(),
                s = this.lp.Y4(),
                n = new Il.nht.hht(t, i, e, s);
            return (
                (n.wBe = new Pl(this.wBe.B4(), this.wBe.Y4())),
                (n.gBe = new Pl(this.gBe.B4(), this.gBe.Y4())),
                n.Set(t, i, e, s),
                n
            );
        }
        Set(t, i, e, s) {
            this.aBe.set(t, i),
                this.dus[0].set(0, 0),
                this.dus[1].set(e, 0),
                this.dus[2].set(e, s),
                this.dus[3].set(0, s),
                (this.lp = this.dus[2]),
                this._o();
        }
        Kat(t) {
            this.aBe.set(t.aBe.B4(), t.aBe.Y4()),
                this.dus[0].set(0, 0),
                this.dus[1].set(t.lp.B4(), 0),
                this.dus[2].set(t.lp.B4(), t.lp.Y4()),
                this.dus[3].set(0, t.lp.Y4()),
                (this.lp = this.dus[2]),
                this._o();
        }
        su() {
            return this.lp;
        }
        yBe() {
            return this.wBe;
        }
        dk() {
            super.dk(), this.wBe.set(this.lp.B4(), this.lp.Y4());
        }
        ylt() {
            super.ylt(), this.wBe.set(0, 0);
        }
        Blt() {
            super.Blt(), this.gBe.set(this.lp.B4(), this.lp.Y4());
        }
        J3() {
            super.J3(),
                this.dus[1].set(this.gBe.B4(), 0),
                this.dus[2].set(this.gBe.B4(), this.gBe.Y4()),
                this.dus[3].set(0, this.gBe.Y4()),
                this.gBe.set(0, 0),
                this._o();
        }
        Iat(t, i) {
            Il.wi(t),
                Il.wi(i),
                this.dus[1].set(this.wBe.B4() + t, 0),
                this.dus[2].set(this.wBe.B4() + t, this.wBe.Y4() + i),
                this.dus[3].set(0, this.wBe.Y4() + i),
                this._o();
        }
        rI(t, i) {
            Il.wi(t), Il.wi(i), this.dus[1].offset(t, 0), this.dus[2].offset(t, i), this.dus[3].offset(0, i), this._o();
        }
    }
    class Fl {
        constructor() {
            (this.n1s = null),
                (this.bBe = null),
                (this.vBe = NaN),
                (this.SBe = new Pl()),
                (this.xBe = new Pl()),
                this._x();
        }
        Ut() {
            (this.n1s = null), (this.bBe = null), (this.SBe = null), (this.xBe = null);
        }
        hBe(t) {
            this.n1s = t;
        }
        oBe(t) {
            this.bBe = t;
        }
        iBe() {
            return this.vBe;
        }
        eBe(t) {
            this.vBe = t;
        }
        sBe() {
            return this.SBe;
        }
        odt() {
            return this.xBe;
        }
        _x() {
            (this.n1s = null), (this.bBe = null), this.SBe.set(0, 0), this.xBe.set(0, 0), (this.vBe = Number.MAX_VALUE);
        }
    }
    (Il.nht = {}), (Il.nht.cdt = Rl), (Il.nht.hht = Dl), (Il.nht.Response = Fl), (Il.nht.adt = Gl);
}
{
    const Ll = 2,
        Bl = "keyvaluepairs",
        Ul = new Map(),
        Nl = "undefined" != typeof IDBObjectStore && "function" == typeof IDBObjectStore.prototype.getAll,
        jl = "undefined" != typeof IDBObjectStore && "function" == typeof IDBObjectStore.prototype.getAllKeys;
    function $l(t) {
        return new Promise((i, e) => {
            (t.onsuccess = () => i(t.result)), (t.onerror = () => e(t.error));
        });
    }
    function zl(t) {
        return new Promise((i, e) => {
            (t.oncomplete = () => i()), (t.onerror = () => e(t.error)), (t.onabort = () => e(t.error));
        });
    }
    function Vl(t, i) {
        return Hl(t, i);
    }
    function Wl(t, i) {
        return Hl(t, i, !0);
    }
    async function Hl(t, i, e = !1, s = !0) {
        const n = await Kl(t);
        try {
            return i(n.transaction([Bl], e ? "readwrite" : "readonly"));
        } catch (n) {
            if (s && "InvalidStateError" === n.name) return Ul.delete(t), Hl(t, i, e, !1);
            throw n;
        }
    }
    function Kl(t) {
        Xl(t);
        let i = Ul.get(t);
        return i instanceof Promise || ((i = ql(t)), Ul.set(t, i), i.catch((i) => Ul.delete(t))), i;
    }
    async function ql(t) {
        Xl(t);
        const i = indexedDB.open(t, Ll);
        return (
            i.addEventListener("upgradeneeded", (i) => {
                try {
                    i.target.result.createObjectStore(Bl);
                } catch (i) {
                    console.error(`Failed to create objectstore for database ${t}`, i);
                }
            }),
            $l(i)
        );
    }
    function Xl(t) {
        if ("string" != typeof t) throw new TypeError("expected string");
    }
    function Yl(t, i) {
        const e = t.objectStore(Bl).openCursor();
        return new Promise((t) => {
            const s = [];
            e.onsuccess = (e) => {
                const n = e.target.result;
                if (n) {
                    switch (i) {
                        case "entries":
                            s.push([n.key, n.value]);
                            break;
                        case "keys":
                            s.push(n.key);
                            break;
                        case "values":
                            s.push(n.value);
                    }
                    n.continue();
                } else t(s);
            };
        });
    }
    class Jl {
        constructor(t) {
            Xl(t), (this.name = t);
        }
        async ready() {
            await Kl(this.name);
        }
        set(t, i) {
            return (
                Xl(t),
                Wl(this.name, async (e) => {
                    const s = $l(e.objectStore(Bl).put(i, t)),
                        n = zl(e);
                    await Promise.all([n, s]);
                })
            );
        }
        get(t) {
            return (
                Xl(t),
                Vl(this.name, async (i) => {
                    const e = $l(i.objectStore(Bl).get(t)),
                        s = zl(i),
                        [n, r] = await Promise.all([s, e]);
                    return r;
                })
            );
        }
        delete(t) {
            return (
                Xl(t),
                Wl(this.name, async (i) => {
                    const e = $l(i.objectStore(Bl).delete(t)),
                        s = zl(i);
                    await Promise.all([s, e]);
                })
            );
        }
        clear() {
            return Wl(this.name, async (t) => {
                const i = $l(t.objectStore(Bl).clear()),
                    e = zl(t);
                await Promise.all([e, i]);
            });
        }
        keys() {
            return Vl(this.name, async (t) => {
                let i;
                if (jl) {
                    i = $l(t.objectStore(Bl).getAllKeys());
                } else i = Yl(t, "keys");
                const e = zl(t),
                    [s, n] = await Promise.all([e, i]);
                return n;
            });
        }
        values() {
            return Vl(this.name, async (t) => {
                let i;
                if (Nl) {
                    i = $l(t.objectStore(Bl).getAll());
                } else i = Yl(t, "values");
                const e = zl(t),
                    [s, n] = await Promise.all([e, i]);
                return n;
            });
        }
        entries() {
            return Vl(this.name, async (t) => {
                const i = Yl(t, "entries"),
                    e = zl(t),
                    [s, n] = await Promise.all([e, i]);
                return n;
            });
        }
    }
    self.mNt = Jl;
}
{
    const Zl = self.mNt,
        Ql = [
            /no available storage method found/i,
            /an attempt was made to break through the security policy of the user agent/i,
            /the user denied permission to access the database/i,
            /a mutation operation was attempted on a database that did not allow mutations/i,
            /idbfactory\.open\(\) called in an invalid security context/i,
        ];
    new WeakMap();
    function tu(t) {
        throw new Error(`"${t}" is not implemented`);
    }
    function iu(t) {
        if ("function" == typeof t)
            throw new Error("localforage callback API is not implemented; please use the promise API instead");
    }
    function eu(t) {
        return "object" == typeof t
            ? new Promise((i) => {
                  const { port1: e, port2: s } = new MessageChannel();
                  (s.onmessage = (t) => i(t.data)), e.postMessage(t);
              })
            : Promise.resolve(t);
    }
    class su {
        constructor(t) {
            (this.Yi = t),
                (this.MBe = !this.Yi),
                this.MBe ||
                    "undefined" != typeof indexedDB ||
                    ((this.MBe = !0),
                    (() => {})("Unable to use local storage because IndexedDB API is not available")),
                (this.EBe = new Map());
        }
        CBe(t) {
            if (!this.MBe)
                for (const i of Ql)
                    if (t && i.test(t.message)) {
                        console.error("Unable to use local storage, reverting to in-memory store: ", t, t.message),
                            (this.MBe = !0);
                        break;
                    }
        }
        async _Be(t) {
            const i = this.EBe.get(t),
                e = await eu(i);
            return void 0 === e ? null : e;
        }
        async TBe(t, i) {
            (i = await eu(i)), this.EBe.set(t, i);
        }
        IBe(t) {
            this.EBe.delete(t);
        }
        PBe() {
            this.EBe.clear();
        }
        GBe() {
            return Array.from(this.EBe.keys());
        }
        ABe() {
            return this.MBe;
        }
        RBe() {
            return this.EBe;
        }
        kBe(t) {
            this.EBe = t;
        }
        async getItem(t, i) {
            if ((iu(i), this.MBe)) return await this._Be(t);
            let e;
            try {
                e = await this.Yi.get(t);
            } catch (i) {
                return (
                    this.CBe(i),
                    this.MBe
                        ? await this._Be(t)
                        : (console.error(`Error reading '${t}' from storage, returning null: `, i), null)
                );
            }
            return void 0 === e ? null : e;
        }
        async setItem(t, i, e) {
            if ((iu(e), void 0 === i && (i = null), this.MBe)) await this.TBe(t, i);
            else
                try {
                    await this.Yi.set(t, i);
                } catch (e) {
                    if ((this.CBe(e), !this.MBe)) throw e;
                    await this.TBe(t, i);
                }
        }
        async removeItem(t, i) {
            if ((iu(i), this.MBe)) this.IBe(t);
            else
                try {
                    await this.Yi.delete(t);
                } catch (i) {
                    this.CBe(i), this.MBe ? this.IBe(t) : console.error(`Error removing '${t}' from storage: `, i);
                }
        }
        async clear(t) {
            if ((iu(t), this.MBe)) this.PBe();
            else
                try {
                    await this.Yi.clear();
                } catch (t) {
                    this.CBe(t), this.MBe ? this.PBe() : console.error("Error clearing storage: ", t);
                }
        }
        async keys(t) {
            if ((iu(t), this.MBe)) return this.GBe();
            let i = [];
            try {
                i = await this.Yi.keys();
            } catch (t) {
                if ((this.CBe(t), this.MBe)) return this.GBe();
                console.error("Error getting storage keys: ", t);
            }
            return i;
        }
        ready(t) {
            return iu(t), this.MBe ? Promise.resolve(!0) : this.Yi.ready();
        }
        OBe(t) {
            if (t.DBe) return new su(null);
            {
                const i = t.name;
                if ("string" != typeof i) throw new TypeError("invalid store name");
                const e = new Zl(i);
                return new su(e);
            }
        }
        length(t) {
            tu("localforage.length()");
        }
        key(t, i) {
            tu("localforage.key()");
        }
        iterate(t, i) {
            tu("localforage.iterate()");
        }
        FBe(t) {
            tu("localforage.setDriver()");
        }
        config(t) {
            tu("localforage.config()");
        }
        LBe(t) {
            tu("localforage.defineDriver()");
        }
        BBe() {
            tu("localforage.driver()");
        }
        supports(t) {
            tu("localforage.supports()");
        }
        dropInstance() {
            tu("localforage.dropInstance()");
        }
    }
    self.localforage = new su(new Zl("localforage"));
}
{
    const nu = self.t;
    let ru = !1,
        hu = [],
        ou = null;
    const au = 800,
        lu = 200,
        uu = "26pt",
        cu = "unknownFontName948958658";
    let du = null,
        fu = null,
        pu = null;
    function mu(t, i) {
        const e = t.data,
            s = i.data;
        if (e.length !== s.length) return !1;
        const n = new Uint8Array(e.buffer),
            r = new Uint8Array(s.buffer);
        let h = 0;
        for (let t = 0, i = n.length; t < i; ++t)
            if (n[t] !== r[t] && ((h += Math.abs(n[t] - r[t])), h > 100)) return !1;
        return !0;
    }
    function wu(t) {
        return (
            fu.clearRect(0, 0, au, lu),
            (fu.font = uu + " " + t),
            fu.fillText("ABCDEFGHIJKLMNOPQRSTUVWXYZ", 5, 5),
            fu.fillText("abcdefghijklmnopqrstuvwxyz", 5, 55),
            fu.fillText("0123456789", 5, 105),
            fu.getImageData(0, 0, au, lu)
        );
    }
    async function gu() {
        const t = nu.NBe.UBe,
            i = t.fontCandidateList,
            e = new Set(t.fontAlwaysShowList),
            s = [];
        (du = document.createElement("canvas")),
            (du.width = au),
            (du.height = lu),
            (fu = du.getContext("2d")),
            (fu.textBaseline = "top"),
            (fu.fillStyle = "black"),
            (pu = wu(cu));
        for (const t of i)
            e.has(t)
                ? hu.push(t)
                : s.push(
                      nu.Roe(() => {
                          mu(pu, wu('"' + t + '"')) || hu.push(t);
                      })
                  );
        return (
            await Promise.all(s),
            (ru = !0),
            (du.width = 32),
            (du.height = 32),
            (du = null),
            (fu = null),
            (pu = null),
            (ou = null),
            hu.sort(),
            hu
        );
    }
    async function yu() {
        const t = new Set(),
            i = await self.queryLocalFonts();
        for (const e of i) t.add(e.family);
        return (hu = [...t]), hu.sort(), (ru = !0), (ou = null), hu;
    }
    async function bu() {
        try {
            if (nu.Y$.JRe)
                try {
                    return await yu();
                } catch (t) {
                    (() => {})("Failed to get local font list: ", t);
                }
            return await gu();
        } catch (t) {
            return console.error("Failed to get local font list: ", t), nu.hS(nu.NBe.UBe.fontAlwaysShowList);
        }
    }
    nu.NBe = class {
        constructor() {
            throw new Error("static class");
        }
        static jBe() {
            return ru ? Promise.resolve(hu) : ou || ((ou = bu()), ou);
        }
    };
}
self.t.NBe.UBe = {
    fontCandidateList: [
        "Algerian",
        "Andale Mono",
        "Arial",
        "Avant Garde",
        "Baskerville",
        "Big Caslon",
        "Bitstream Vera",
        "Bodoni MT",
        "Book Antiqua",
        "Bookman",
        "Bookman Old Style",
        "Bradley Hand ITC TT",
        "Broadway",
        "Brush Script MT",
        "Calibri",
        "Calisto MT",
        "Candara",
        "Cambria",
        "Cardo",
        "Carrois Gothic SC",
        "Caslon Roman",
        "Century Gothic",
        "Century Schoolbook",
        "Comic Sans MS",
        "Consolas",
        "Copperplate",
        "Copperplate Gothic",
        "Courier New",
        "Cutive Mono",
        "Dancing Script",
        "Diavlo",
        "Didot",
        "Droid",
        "Droid Sans",
        "Droid Sans Mono",
        "Droid Serif",
        "Franklin Gothic",
        "Futura",
        "Garamond",
        "Geneva",
        "Gentium",
        "Georgia",
        "Ghostscript",
        "Gill Sans",
        "Goudy",
        "Goudy Old Style",
        "Haettenschweiler",
        "Helvetica",
        "Hoefler Text",
        "Impact",
        "ITC Stone Serif",
        "Junicode",
        "Latin Modern",
        "Lucida Bright",
        "Lucida Calligraphy",
        "Lucida Console",
        "Lucida Grande",
        "Lucida Sans",
        "Lucida Sans Typewriter",
        "Lucida Sans Unicode",
        "Mistral",
        "Moire",
        "Monaco",
        "MS Mincho",
        "MS Sans Serif",
        "New Athena Unicode",
        "New York",
        "Noto",
        "Noto Sans",
        "Noto Serif",
        "Old Standard TT",
        "Onyx",
        "Optima",
        "Oxygen",
        "Palatino",
        "Palatino Linotype",
        "Papyrus",
        "Perpetua",
        "Perpetua Titling MT",
        "Playbill",
        "Roboto",
        "Rockwell",
        "San Francisco",
        "Segoe UI",
        "Snap ITC",
        "Source Sans Pro",
        "Source Code Pro",
        "Stencil",
        "Symbol",
        "Symbola",
        "Tahoma",
        "Times",
        "Times New Roman",
        "Trebuchet MS",
        "Tw Cen MT",
        "UniFraktur",
        "Verdana",
        "Webdings",
        "Wide Latin",
        "Wingdings",
    ],
    fontAlwaysShowList: ["Arial", "Times New Roman"],
};
{
    const vu = self.t;
    vu.$Be = "\ufeff";
    const Su = new Set("0123456789");
    vu.Los = function (t) {
        return vu.vu(t), Su.has(t);
    };
    const xu = new Set(" \t\n\r\u2028\u2029");
    (vu.Uts = function (t) {
        return vu.vu(t), xu.has(t);
    }),
        (vu.HEs = function (t) {
            return [...t].filter((t) => !vu.Uts(t)).join("");
        }),
        (vu.zBe = function (t) {
            for (const i of t) if (!vu.Uts(i)) return !1;
            return !0;
        }),
        (vu.gS = function (t) {
            for (const i of t) if (!vu.Uts(i)) return !1;
            return !0;
        }),
        (vu.VBe = function (t) {
            return vu.vu(t), 1 === t.length && t.charCodeAt(0) < 32;
        }),
        (vu.WBe = function (t) {
            return [...t].filter((t) => !vu.VBe(t)).join("");
        });
    let Mu = null;
    try {
        Mu = new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])", "u");
    } catch (Du) {
        (() => {})("Unable to detect CJK punctuation: ", Du);
    }
    vu.HBe = function (t) {
        return !vu.Uts(t) && Mu && Mu.test(t);
    };
    const Eu = new Set("0123456789.+-e");
    (vu.Hhi = function (t) {
        if ((vu.vu(t), !(t = t.trim()).length)) return !1;
        let i = t.charAt(0);
        if ("-" !== i && !Su.has(i)) return !1;
        for (let i of t) if (!Eu.has(i)) return !1;
        return !0;
    }),
        (vu.J$ = function (t) {
            vu.vu(t);
            let i = t.length;
            for (; i > 0; ) {
                let e = t.charAt(i - 1);
                if (!vu.Los(e)) break;
                --i;
            }
            return t.substr(0, i);
        }),
        (vu.VD = function (t) {
            vu.vu(t);
            let i = vu.J$(t),
                e = t.substr(i.length);
            return (e = e ? (parseInt(e, 10) + 1).toString() : "2"), i + e;
        });
    const Cu = new Map([
        ["&", "&amp;"],
        ["<", "&lt;"],
        [">", "&gt;"],
        ['"', "&quot;"],
        ["'", "&#39;"],
    ]);
    function _u(t) {
        return Cu.get(t);
    }
    const Tu = /[&<>"']/g;
    (vu.xke = function (t) {
        return vu.$rt(t), t.replace(Tu, _u);
    }),
        (vu.qEs = function (t) {
            let i = vu.GWt(t, "\\", "\\\\");
            return (
                (i = vu.GWt(i, '"', '\\"')),
                (i = vu.GWt(i, "\t", "\\t")),
                (i = vu.GWt(i, "\r", "")),
                vu.GWt(i, "\n", "\\n")
            );
        }),
        (vu.KBe = function (t) {
            let i = vu.GWt(t, "&", "&amp;");
            return (i = vu.GWt(i, "<", "&lt;")), (i = vu.GWt(i, ">", "&gt;")), vu.GWt(i, '"', "&quot;");
        });
    const Iu = /[-[\]{}()*+?.,\\^$|#\s]/g;
    (vu.URe = function (t) {
        return vu.$rt(t), t.replace(Iu, "\\$&");
    }),
        (vu.VEs = function (t, i) {
            let e = 0;
            for (const s of t) s === i && ++e;
            return e;
        }),
        (vu.h_s = function (t, i) {
            let e = 0,
                s = 0;
            for (; e < i; ) {
                if (((e = t.indexOf("\n", e)), -1 === e)) return s;
                s++, e++;
            }
            return s;
        }),
        (vu.CTs = function (t, i, e = !1) {
            if ((vu.vu(t), vu.vu(i), !i)) return [];
            e || ((t = t.toLowerCase()), (i = i.toLowerCase()));
            const s = i.length;
            let n = 0,
                r = 0,
                h = [];
            for (; (r = t.indexOf(i, n)) > -1; ) h.push(r), (n = r + s);
            return h;
        }),
        (vu.GWt = function (t, i, e) {
            return vu.vu(t), vu.vu(i), vu.vu(e), t.replaceAll(i, () => e);
        }),
        (vu.Tt = function (t, i, e) {
            return vu.vu(t), vu.vu(i), vu.vu(e), t.replace(new RegExp(vu.URe(i), "gi"), () => e);
        }),
        (vu.hrt = function (t, i) {
            vu.Gct(t),
                vu.$rt(i),
                "string" == typeof i
                    ? (t.textContent = i)
                    : i.qBe()
                      ? (t.textContent = i.toString())
                      : ((t.innerHTML = i.Ukt()), i instanceof vu.nS && i.XBe(t));
        }),
        (vu.YBe = function (t, i) {
            return t instanceof vu.qke || t instanceof vu.nS
                ? t.equals(i)
                : i instanceof vu.qke || i instanceof vu.nS
                  ? i.equals(t)
                  : t === i;
        }),
        (vu.JBe = function (t, ...i) {
            vu.vu(t);
            let e = t;
            for (let s = 0, n = i.length; s < n; ++s) {
                const n = `{${s}}`;
                if (!t.includes(n)) throw new Error(`missing placeholder '${n}' in string substitution`);
                e = e.replace(n, i[s].toString());
            }
            return e;
        }),
        (vu.ZBe = function (t, ...i) {
            vu.vu(t);
            let e = t,
                s = -1,
                n = -1;
            for (let r = 0, h = i.length; r < h; ++r) {
                const h = `{${r}}`;
                t.includes(h) ? ((n = r), (e = e.replace(h, i[r].toString()))) : -1 === s && (s = r);
            }
            if (s >= 0 && n >= 0 && s < n) throw new Error(`missing placeholder '${s}' in string substitution`);
            return e;
        }),
        (vu.qxe = function (t, i) {
            vu.vu(t);
            let e = t;
            for (let [t, s] of Object.entries(i)) vu.vu(t), (e = e.replaceAll(t, s.toString()));
            return e;
        }),
        (vu.zri = function (t, i) {
            return t > i ? 1 : t < i ? -1 : 0;
        }),
        (vu.B$ = function (t, i) {
            let e = t.toLowerCase(),
                s = i.toLowerCase();
            return e > s ? 1 : e < s ? -1 : 0;
        });
    const Pu = new self.Intl.Segmenter();
    (vu.XS = function (t) {
        if (1 === t.length) return [t];
        const i = [];
        for (const e of Pu.segment(t)) i.push(e.segment);
        return i;
    }),
        (vu.QBe = function* (t) {
            for (const i of Pu.segment(t)) yield i.segment;
        }),
        (vu.tUe = function (t) {
            let i = 0;
            for (const e of Pu.segment(t)) ++i;
            return i;
        });
    const Gu = 1024,
        Au = 1024 * Gu,
        Ru = 1024 * Au,
        ku = 1024 * Ru;
    vu.nbe = function (t, i) {
        let e = "common." + (i ? "dataRates" : "dataSizes") + ".";
        const s = self.ej;
        if (t < Gu) return s(e + "bytes", t);
        if (t < Au) {
            let i = t / Gu;
            return (i = i < 10 ? Math.round(10 * i) / 10 : Math.round(i)), s(e + "kilobytes", i);
        }
        if (t < Ru) {
            let i = t / Au;
            return (i = i < 10 ? Math.round(10 * i) / 10 : Math.round(i)), s(e + "megabytes", i);
        }
        if (t < ku) {
            let i = t / Ru;
            return (i = i < 10 ? Math.round(10 * i) / 10 : Math.round(i)), s(e + "gigabytes", i);
        }
        {
            let i = t / ku;
            return (i = i < 10 ? Math.round(10 * i) / 10 : Math.round(i)), s(e + "terabytes", i);
        }
    };
    const Ou = { iUe: !1, eUe: !0, sUe: !0, nUe: !0, rUe: !0 };
    (vu.hUe = function (t, i) {
        (i = Object.assign({}, Ou, i)), vu.u.o("common.time");
        const e = [],
            s = self.lang,
            n = self.iG;
        if (i.eUe) {
            const i = Math.floor(t / 86400);
            i > 0 && ((t -= 24 * i * 3600), e.push(n(".days", null, i)));
        }
        if (i.sUe) {
            const i = Math.floor(t / 3600);
            (i > 0 || e.length) && ((t -= 3600 * i), e.push(n(".hours", null, i)));
        }
        if (i.nUe) {
            const s = Math.floor(t / 60);
            (s > 0 || e.length || !i.rUe) && ((t -= 60 * s), e.push(n(".minutes", null, s)));
        }
        if (i.rUe) {
            const i = Math.floor(t % 60);
            e.push(n(".seconds", null, i));
        }
        const r = (i.iUe ? s(".approx-prefix") : "") + e.join(s(".separator"));
        return vu.u.it(), r;
    }),
        (vu.Ot = function (t, i) {
            let e = t < 0 ? "-" : "",
                s = (t = Math.abs(t)).toString(),
                n = i - s.length;
            for (let t = 0; t < n; ++t) e += "0";
            return e + s;
        }),
        (vu.zEs = function (t) {
            return t.toLowerCase().replace(/\b\w/g, (t) => t.toUpperCase());
        }),
        (vu.oUe = function (t, i) {
            let e = t.split(".").map((t) => t.trim()),
                s = i.split(".").map((t) => t.trim());
            vu.Xv(e, 4, "0"),
                vu.Xv(s, 4, "0"),
                (e = e.map((t) => parseInt(t, 10))),
                (s = s.map((t) => parseInt(t, 10)));
            for (let t = 0; t < 4; ++t) {
                const i = e[t] - s[t];
                if (0 !== i) return i < 0 ? -1 : 1;
            }
            return 0;
        }),
        (vu.jFi = function () {
            return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (t) => {
                const i = Math.floor(16 * Math.random());
                return ("x" === t ? i : (3 & i) | 8).toString(16);
            });
        }),
        (vu.Oei = function (t, i) {
            if (t.length !== i.length) throw new Error("strings must be same length");
            let e = 0;
            for (let s = 0, n = t.length; s < n; ++s) t.charAt(s) !== i.charAt(s) && ++e;
            return e;
        }),
        (vu.aUe = function (t, i) {
            if (0 === t.length) return i.length;
            if (0 === i.length) return t.length;
            let e, s, n, r, h, o;
            for (t.length > i.length && ((e = t), (t = i), (i = e)), o = Array(t.length + 1), s = 0; s <= t.length; s++)
                o[s] = s;
            for (s = 1; s <= i.length; s++) {
                for (r = s, n = 1; n <= t.length; n++)
                    (h = i[s - 1] === t[n - 1] ? o[n - 1] : Math.min(o[n - 1] + 1, Math.min(r + 1, o[n] + 1))),
                        (o[n - 1] = r),
                        (r = h);
                o[t.length] = r;
            }
            return o[t.length];
        }),
        (vu.lUe = function (t) {
            return new TextEncoder().encode(t).length;
        });
}
{
    const Fu = self.t;
    Fu.qke = class {
        constructor(t) {
            Fu.vu(t), (this.Z1s = t), (this.uUe = !this.Z1s.includes("<") && !this.Z1s.includes("&"));
        }
        toString() {
            return this.Z1s;
        }
        valueOf() {
            return this.Z1s;
        }
        qBe() {
            return this.uUe;
        }
        Ukt() {
            return this.Z1s;
        }
        equals(t) {
            return t instanceof Fu.qke
                ? this.Z1s === t.Z1s
                : t instanceof Fu.nS
                  ? this.Z1s === t.Ukt()
                  : this.Z1s === t;
        }
    };
}
{
    const Lu = self.t,
        Bu = self.assert,
        Uu = new Map([
            ["b", "strong"],
            ["i", "em"],
            ["s", "s"],
            ["u", "u"],
            ["sub", "sub"],
            ["sup", "sup"],
            ["small", "small"],
            ["mark", "mark"],
            ["code", "code"],
            ["a1", "a"],
            ["a2", "a"],
            ["a3", "a"],
            ["a4", "a"],
            ["a5", "a"],
            ["a6", "a"],
            ["a7", "a"],
            ["a8", "a"],
            ["a9", "a"],
            ["tip1", "abbr"],
            ["tip2", "abbr"],
            ["tip3", "abbr"],
            ["tip4", "abbr"],
            ["tip5", "abbr"],
            ["tip6", "abbr"],
            ["tip7", "abbr"],
            ["tip8", "abbr"],
            ["tip9", "abbr"],
            ["bad", ["span", "bbCodeBad"]],
            ["good", ["span", "bbCodeGood"]],
            ["info", ["span", "bbCodeInfo"]],
            ["h1", ["span", "bbCodeH1"]],
            ["h2", ["span", "bbCodeH2"]],
            ["h3", ["span", "bbCodeH3"]],
            ["h4", ["span", "bbCodeH4"]],
            ["item", ["span", "bbCodeItem"]],
        ]),
        Nu = new Set(["icon"]),
        ju = /\[(\/?)([a-zA-Z0-9]+)\]/g,
        $u = /\[(\/?)([^\[\n]*?)\]/g;
    let zu = null,
        Vu = null,
        Wu = 0;
    function Hu(t, i, e) {
        const s = Uu.get(e);
        if (!s) return "class" === e ? (i ? "</span>" : `<span class="bbclass${Wu++}">`) : t;
        if ("string" == typeof s) {
            if (("a" === s && 0 === zu.length) || ("abbr" === s && 0 === Vu.length)) return t;
            if ("a" !== s || i) {
                if ("abbr" !== s || i) return "<" + i + s + ">";
                {
                    const t = parseInt(e.substring(3), 10) - 1;
                    if (t < 0 || t >= Vu.length) throw new Error("invalid bbcode tip substitution");
                    const i = Vu[t];
                    let s = "";
                    if (("string" == typeof i ? (s = i) : "function" == typeof i && (s = i()), "string" != typeof s))
                        throw new TypeError("invalid bbcode tip");
                    return `<abbr title="${Lu.GWt(s, '"', "&quot;")}">`;
                }
            }
            {
                const t = parseInt(e.substring(1), 10) - 1;
                if (t < 0 || t >= zu.length) throw new Error("invalid bbcode link substitution");
                const i = zu[t];
                if ("string" == typeof i) return `<a href="${zu[t]}">`;
                if ("function" == typeof i) return `<a class="bblink${t}">`;
                throw new TypeError("invalid bbcode link action");
            }
        }
        if (Array.isArray(s)) {
            Bu(2 === s.length, "invalid bbcode entry");
            let t = s[0],
                e = s[1];
            return i ? "</" + t + ">" : `<${t} class="${e}">`;
        }
        Bu(!1, "invalid bbcode entry");
    }
    const Ku = /\n/g;
    Lu.nS = class {
        constructor(t, i) {
            if (
                (Lu.vu(t),
                Lu.Crt(i),
                (this.cUe = i && i.rS ? t : Lu.xke(t)),
                (this.dUe = ""),
                (this.fUe = !1),
                (this.pUe = []),
                (this.mUe = []),
                i)
            ) {
                if (((this.fUe = !!i.mq), i.links)) {
                    if ((Lu._T(i.links), i.links.length > 9)) throw new Error("too many links");
                    this.pUe = i.links;
                }
                if (i.wUe) {
                    if ((Lu._T(i.wUe), i.wUe.length > 9)) throw new Error("too many tips");
                    this.mUe = i.wUe;
                }
            }
            (this.gUe = this.cUe.includes("[")),
                (this.yUe = this.fUe && this.cUe.includes("\n")),
                (this.uUe = !this.gUe && !this.yUe && !this.cUe.includes("&")),
                (this.bUe = !1),
                (this.vUe = []);
        }
        toString() {
            return this.cUe;
        }
        valueOf() {
            return this.cUe;
        }
        qBe() {
            return this.uUe;
        }
        M$t() {
            return this.gUe ? this.cUe.replace(ju, "") : this.cUe;
        }
        Ukt() {
            if (this.uUe) return this.cUe;
            if (!this.dUe && this.cUe) {
                let t = this.cUe;
                this.gUe &&
                    ((Wu = 0), (zu = this.pUe), (Vu = this.mUe), (t = t.replace(ju, Hu)), (zu = null), (Vu = null)),
                    this.yUe && (t = t.replace(Ku, "<br>")),
                    (this.dUe = t);
            }
            return this.dUe;
        }
        XBe(t) {
            if (this.pUe.length)
                for (let i = 0, e = this.pUe.length; i < e; ++i) {
                    const e = this.pUe[i];
                    if ("function" != typeof e) continue;
                    const s = t.querySelector(".bblink" + i);
                    if (!s) throw new Error("unable to attach BBString link handler");
                    s.onclick = e;
                }
        }
        equals(t) {
            return t instanceof Lu.qke
                ? this.Ukt() === t.Ukt()
                : t instanceof Lu.nS
                  ? this.cUe === t.cUe
                  : this.cUe === t;
        }
        aS() {
            if (this.bUe) return this.vUe;
            const t = [],
                i = this.cUe,
                e = [];
            $u.lastIndex = 0;
            let s = 0,
                n = null;
            for (; null !== (n = $u.exec(i)); ) {
                const r = n.index;
                if (r > 0 && "\\" === i.charAt(r - 1)) continue;
                const h = n[0],
                    o = n[1],
                    a = n[2],
                    l = i.substring(s, r);
                if (((s = r + h.length), l && t.push({ text: l, SUe: e.slice(0) }), a))
                    if (o) {
                        const t = a.toLowerCase();
                        for (let i = e.length - 1; i >= 0; --i)
                            if (e[i].tag === t) {
                                e.splice(i, 1);
                                break;
                            }
                    } else {
                        let i = a,
                            s = null;
                        const n = a.indexOf("=");
                        if (
                            (-1 !== n
                                ? ((i = a.substring(0, n).toLowerCase()), (s = a.substring(n + 1)))
                                : (i = i.toLowerCase()),
                            Nu.has(i))
                        ) {
                            if ("icon" !== i) throw new Error(`unknown self-closing tag ${i}`);
                            t.push({ icon: s, SUe: e.slice(0) });
                        } else e.push({ tag: i, Ax: s });
                    }
            }
            s < i.length && t.push({ text: i.substring(s), SUe: e.slice(0) });
            for (const i of t) i.text && (i.text = this.xUe(i.text));
            return (
                (this.vUe = t.map((t) =>
                    t.icon
                        ? Lu.m(Lu.MUe, { icon: t.icon, SUe: t.SUe })
                        : Lu.m(Lu.EUe, { CUe: Lu.XS(t.text), SUe: t.SUe })
                )),
                (this.bUe = !0),
                this.vUe
            );
        }
        xUe(t) {
            return (t = Lu.GWt(t, "\\[", "[")), Lu.GWt(t, "\\\\", "\\");
        }
        static WWs(t) {
            return Lu.m(Lu.nS, t, { rS: !0 }).M$t();
        }
        static _Ue(t) {
            return t.replace($u, "");
        }
    };
}
self.t.ayt = Object.freeze({
    TUe: "",
    ryt: "",
    IUe: "",
    PUe: "",
    GUe: "",
    AUe: "",
    RUe: "",
    kUe: "",
    OUe: "",
    C2s: "",
    DUe: "",
    FUe: "",
    LUe: "",
    PI: "",
    BUe: "",
    UUe: "",
    NUe: "",
    jUe: "",
    $Ue: "",
    zUe: "",
    VUe: "",
    WUe: "",
    HUe: "",
    KUe: "",
    qUe: "",
    XUe: "",
    YUe: "",
    JUe: "",
    ZUe: "",
    QUe: "",
    tNe: "",
    iNe: "",
    eNe: "",
    sNe: "",
    nNe: "",
    vos: [".", ""],
    Gos: [",", ""],
    Cos: ['"', "", ""],
    Ios: ["(", ""],
    Eos: [")", ""],
    _os: ["?", ""],
    xos: [":", ""],
});
{
    const qu = self.t;
    function Xu(t) {
        return "" !== t && "" !== t && qu.Uts(t);
    }
    const Yu = new Set("");
    function Ju(t) {
        return Yu.has(t);
    }
    function Zu(t) {
        return qu.HBe(t) && !Ju(t);
    }
    function Qu(t) {
        for (; t.length > 0 && Xu(t.at(-1)); ) t.pop();
    }
    function tc(t) {
        return "\n" === t || "\r\n" === t;
    }
    class ic {
        constructor() {
            (this.Qx = []),
                (this.width = 0),
                (this.height = 0),
                (this.fontBoundingBoxAscent = 0),
                (this.fontBoundingBoxDescent = 0),
                (this.rNe = 0),
                (this.hNe = !1);
        }
        static oNe(t, i, e, s, n, r) {
            const h = new ic();
            return (
                h.Qx.push(t),
                (h.width = i),
                (h.height = e),
                (h.fontBoundingBoxAscent = s),
                (h.fontBoundingBoxDescent = n),
                (h.rNe = r),
                h
            );
        }
        t5s(t) {
            (this.Qx = t.Qx.map((t) => t.aNe())),
                (this.width = t.width),
                (this.height = t.height),
                (this.fontBoundingBoxAscent = t.fontBoundingBoxAscent),
                (this.fontBoundingBoxDescent = t.fontBoundingBoxDescent),
                (this.rNe = t.rNe),
                (this.hNe = t.hNe);
        }
        fm() {
            (this.Qx = []),
                (this.width = 0),
                (this.height = 0),
                (this.fontBoundingBoxAscent = 0),
                (this.fontBoundingBoxDescent = 0),
                (this.rNe = 0),
                (this.hNe = !1);
        }
        lNe(t, i) {
            i || (this.width = t.width),
                (this.height = t.height || 0),
                (this.fontBoundingBoxAscent = t.fontBoundingBoxAscent || 0),
                (this.fontBoundingBoxDescent = t.fontBoundingBoxDescent || 0),
                (this.rNe = t.rNe || 0),
                (this.hNe = !0);
        }
        uNe(t) {
            const i = this.Qx.length ? this.Qx.at(-1) : null;
            let e = 0;
            i && i.cNe() && t[0].cNe() && t[0].dNe() === i.dNe() && (i.fNe(t[0].Lx()), (e = 1));
            for (let i = t.length; e < i; ++e) {
                const i = t[e];
                this.Qx.push(i.aNe());
            }
            this.hNe = !1;
        }
    }
    qu.bx = class {
        constructor() {
            (this.pNe = []), (this.mNe = null), (this.wNe = new ic()), (this.gNe = new ic()), (this.yNe = !1);
        }
        qx() {
            return this.pNe;
        }
        kS() {
            return this.pNe.length;
        }
        EC(t) {
            qu.qm(t, qu.bNe), (this.mNe = t);
        }
        bx(t, i, e, s, n) {
            if (
                ("string" == typeof t && (t = [qu.m(qu.EUe, { CUe: qu.XS(t) })]),
                qu._T(t),
                qu.yp(i),
                qu.wi(e),
                qu.vu(s),
                qu.yh(this.pNe),
                !t.length || (1 === t.length && t[0].cNe() && t[0].rB()) || e < 2)
            )
                return;
            if (1 === t.length) {
                const s = t[0];
                if (s.cNe() && s.vNe() <= 100 && !s.SNe()) {
                    let { width: t, height: r, fontBoundingBoxAscent: h, fontBoundingBoxDescent: o, rNe: a } = i(s);
                    if (((t += n), s.My(t), s.Iy(r), s.xNe(h || 0), s.MNe(o || 0), s.ENe(a || 0), t <= e))
                        return void this.CNe(ic.oNe(s, t, r, h, o, a));
                }
            }
            let r,
                h = 4;
            "word" === s
                ? (r = this._Ne(t))
                : "cjk" === s
                  ? ((r = this.TNe(t)), (h = 8))
                  : ((r = this.INe(t)), (h = 8)),
                this.PNe(r, i, e, h, n);
        }
        _Ne(t) {
            const i = [];
            let e = [],
                s = !1;
            for (const n of t) {
                const t = n.dNe();
                if (n.Dx()) e.length > 0 && i.push(e), i.push([n]), (e = []);
                else
                    for (const r of n.Lx())
                        if (tc(r)) e.length > 0 && i.push(e), i.push([qu.m(qu.EUe, { CUe: ["\n"], SUe: t })]), (e = []);
                        else if (0 === e.length) e.push(qu.m(qu.EUe, { CUe: [r], SUe: t })), (s = Xu(r));
                        else {
                            const n = Xu(r);
                            if (n === s) {
                                const i = e.at(-1);
                                i.dNe() === t ? i.GNe(r) : e.push(qu.m(qu.EUe, { CUe: [r], SUe: t }));
                            } else i.push(e), (e = [qu.m(qu.EUe, { CUe: [r], SUe: t })]), (s = n);
                        }
            }
            return e.length > 0 && i.push(e), i;
        }
        TNe(t) {
            const i = [];
            let e = [],
                s = !1;
            for (const n of t) {
                const t = n.dNe();
                if (n.Dx()) e.length > 0 && i.push(e), i.push([n]), (e = []);
                else
                    for (const r of n.Lx())
                        if (tc(r)) e.length > 0 && i.push(e), i.push([qu.m(qu.EUe, { CUe: ["\n"], SUe: t })]), (e = []);
                        else if (0 === e.length) e.push(qu.m(qu.EUe, { CUe: [r], SUe: t })), (s = Ju(r));
                        else if (s || Zu(r)) {
                            const i = e.at(-1);
                            i.dNe() === t ? i.GNe(r) : e.push(qu.m(qu.EUe, { CUe: [r], SUe: t })), (s = Ju(r));
                        } else i.push(e), (e = [qu.m(qu.EUe, { CUe: [r], SUe: t })]), (s = Ju(r));
            }
            return e.length > 0 && i.push(e), i;
        }
        INe(t) {
            const i = [];
            for (const e of t)
                if (e.cNe()) {
                    const t = e.Lx();
                    qu.Uc(
                        i,
                        t.map((t) => [qu.m(qu.EUe, { CUe: [t], SUe: e.dNe() })])
                    );
                } else i.push([e]);
            return i;
        }
        ANe(t, i) {
            let e = 0,
                s = 0,
                n = 0,
                r = 0,
                h = 0;
            for (const o of t) {
                if (-1 === o.rs()) {
                    const t = i(o);
                    o.Iy(t.height),
                        o.xNe(t.fontBoundingBoxAscent || 0),
                        o.MNe(t.fontBoundingBoxDescent || 0),
                        o.ENe(t.rNe || 0),
                        o.cNe() ? o.My(t.width) : o.Dx() && o.RNe(this.mNe);
                }
                (e += o.rs()),
                    (s = Math.max(s, o.ls())),
                    (n = Math.max(n, o.kNe())),
                    (r = Math.max(r, o.ONe())),
                    (h = Math.max(h, o.DNe()));
            }
            return { width: e, height: s, fontBoundingBoxAscent: n, fontBoundingBoxDescent: r, rNe: h };
        }
        FNe() {
            this.wNe.fm(), this.gNe.fm();
        }
        CNe(t) {
            this.pNe.push(new qu.bx.$n(t)), this.FNe();
        }
        LNe(t) {
            return 1 === t.length && t[0].cNe() && 1 === t[0].vNe() && tc(t[0].Lx()[0]);
        }
        BNe(t) {
            return t[0].cNe() && qu.gS(t[0].Lx());
        }
        PNe(t, i, e, s, n) {
            let r = 0;
            for (; r < t.length; ) r = this.UNe(t, r, i, e, s);
            if (this.gNe.Qx.length > 0) {
                if (!this.gNe.hNe) {
                    const t = this.ANe(this.gNe.Qx, i);
                    this.gNe.lNe(t);
                }
                this.CNe(this.gNe);
            }
            this.NNe(i, n), this.FNe(), (this.yNe = !1);
        }
        UNe(t, i, e, s, n) {
            const r = this.wNe,
                h = this.gNe,
                o = t[i];
            if (this.LNe(o)) {
                if (!h.hNe) {
                    const t = e(qu.m(qu.EUe, { CUe: [" "], SUe: o[0].dNe() }));
                    h.lNe(t, !0);
                }
                return this.CNe(h), i + 1;
            }
            const a = this.jNe(t, i, n),
                l = this.ANe(h.Qx, e);
            return h.lNe(l), l.width >= s ? this.$Ne(t, i, e, s) : (r.t5s(h), this.yNe && this.CNe(r), a + 1);
        }
        jNe(t, i, e) {
            const s = this.gNe;
            this.yNe = !1;
            let n = i,
                r = 0;
            for (let i = t.length; n < i; ++n) {
                const i = t[n];
                if (this.LNe(i)) {
                    this.yNe = !0;
                    break;
                }
                if ((s.uNe(i), !this.BNe(i) && (++r, r === e))) break;
            }
            return n;
        }
        $Ne(t, i, e, s) {
            const n = this.wNe,
                r = this.gNe;
            r.t5s(n);
            let h = i;
            for (let i = t.length; h < i; ++h) {
                const o = t[h];
                if (this.LNe(o)) return this.CNe(n), h + 1;
                if ((r.uNe(o), !this.BNe(o) || 0 === n.Qx.length)) {
                    const o = this.ANe(r.Qx, e);
                    if ((r.lNe(o), o.width >= s)) {
                        let e;
                        return (
                            n.Qx.length > 0 ? (e = n) : ((e = r), ++h, h < i && this.BNe(t[h]) && ++h), this.CNe(e), h
                        );
                    }
                    n.t5s(r);
                }
            }
            return h;
        }
        NNe(t, i) {
            for (const e of this.pNe) {
                const s = e.zNe();
                if (!s.length) continue;
                let n = s.at(-1);
                if (n.cNe()) {
                    const r = n.Lx(),
                        h = r.slice(0);
                    if ((Qu(h), 0 === h.length)) e.VNe(-n.rs()), s.pop();
                    else if (h.length < r.length) {
                        n.WNe(h);
                        const i = t(n).width,
                            s = n.rs() - i;
                        n.My(i), e.VNe(-s);
                    }
                    0 !== i && s.length > 0 && ((n = s.at(-1)), n.VNe(i), e.VNe(i));
                }
            }
        }
        _x() {
            qu.yh(this.pNe);
        }
        PS() {
            return this.pNe.reduce((t, i) => Math.max(t, i.rs()), 0);
        }
        HNe() {
            return this.pNe.reduce((t, i) => t + i.ls(), 0);
        }
    };
}
self.t.bx.$n = class {
    constructor(t) {
        (this.vUe = t.Qx),
            (this.RS = t.width),
            (this._S = t.height),
            (this.KNe = t.fontBoundingBoxAscent),
            (this.qNe = t.fontBoundingBoxDescent),
            (this.XNe = t.rNe),
            (this.YNe = 0),
            (this.JNe = 0);
    }
    Qx() {
        return this.vUe.values();
    }
    *ZNe() {
        const t = this.vUe;
        for (let i = t.length - 1; i >= 0; --i) yield t[i];
    }
    zNe() {
        return this.vUe;
    }
    VNe(t) {
        this.RS += t;
    }
    rs() {
        return this.RS;
    }
    ls() {
        return this._S;
    }
    QNe() {
        return this.KNe;
    }
    ONe() {
        return this.qNe;
    }
    DNe() {
        return this.XNe;
    }
    oS(t) {
        this.YNe = t;
    }
    Kx() {
        return this.YNe;
    }
    cS(t) {
        this.JNe = t;
    }
    Jx() {
        return this.JNe;
    }
};
self.t.tje = class {
    constructor(t) {
        (this.ije = t.SUe || []),
            (this.RS = t.width || -1),
            (this._S = t.height || -1),
            (this.KNe = t.fontBoundingBoxAscent || -1),
            (this.qNe = t.fontBoundingBoxDescent || -1),
            (this.XNe = t.rNe || -1),
            (this.YNe = 0),
            (this.JNe = 0);
    }
    cNe() {
        return !1;
    }
    Dx() {
        return !1;
    }
    dNe() {
        return this.ije;
    }
    Nx(t) {
        const i = this.ije;
        for (let e = i.length - 1; e >= 0; --e) {
            const s = i[e];
            if (s.tag === t) return s;
        }
        return null;
    }
    wS(t) {
        return !!this.Nx(t);
    }
    eje() {
        const t = new Map();
        for (const i of this.ije) t.set(i.tag, i.Ax);
        return t;
    }
    VNe(t) {
        this.RS += t;
    }
    My(t) {
        this.RS = t;
    }
    rs() {
        return this.RS;
    }
    Iy(t) {
        this._S = t;
    }
    ls() {
        return this._S;
    }
    xNe(t) {
        this.KNe = t;
    }
    kNe() {
        return this.KNe;
    }
    MNe(t) {
        this.qNe = t;
    }
    ONe() {
        return this.qNe;
    }
    ENe(t) {
        this.XNe = t;
    }
    DNe() {
        return this.XNe;
    }
    oS(t) {
        this.YNe = t;
    }
    Kx() {
        return this.YNe;
    }
    cS(t) {
        this.JNe = t;
    }
    Jx() {
        return this.JNe;
    }
};
{
    const ec = self.t;
    ec.EUe = class extends ec.tje {
        constructor(t) {
            super(t), (this.sje = t.CUe);
        }
        cNe() {
            return !0;
        }
        fNe(t) {
            ec.Uc(this.sje, t), (this.RS = -1), (this._S = -1), (this.KNe = -1), (this.qNe = -1), (this.XNe = -1);
        }
        GNe(t) {
            this.sje.push(t);
        }
        aNe() {
            return ec.m(ec.EUe, {
                CUe: this.sje.slice(0),
                SUe: this.ije,
                width: this.RS,
                height: this._S,
                fontBoundingBoxAscent: this.KNe,
                fontBoundingBoxDescent: this.qNe,
                rNe: this.XNe,
            });
        }
        Lx() {
            return this.sje;
        }
        WNe(t) {
            this.sje = t;
        }
        vNe() {
            return this.sje.length;
        }
        rB() {
            return 0 === this.sje.length;
        }
        SNe() {
            return this.sje.includes("\n");
        }
    };
}
{
    const sc = self.t;
    sc.MUe = class extends sc.tje {
        constructor(t) {
            super(t), (this.UNt = t.icon);
        }
        Dx() {
            return !0;
        }
        nje() {
            return this.UNt;
        }
        aNe() {
            return sc.m(sc.MUe, {
                icon: this.UNt,
                SUe: this.ije,
                width: this.RS,
                height: this._S,
                fontBoundingBoxAscent: this.KNe,
                fontBoundingBoxDescent: this.qNe,
                rNe: this.XNe,
            });
        }
        ime(t) {
            if (!t) return null;
            let i = Number(this.UNt);
            return String(i) === this.UNt ? ((i = Math.floor(i)), t.rje(i)) : t.hje(this.UNt);
        }
        RNe(t) {
            const i = this.ime(t);
            this.RS = i ? (this._S * i.rs()) / i.ls() : 0;
        }
        xi(t) {
            const i = this.ime(t);
            return i ? i.xi() : null;
        }
        vNe() {
            return 1;
        }
    };
}
{
    const nc = self.t;
    nc.W8s = class {
        constructor(t) {
            nc.yp(t.K8s), nc.yp(t.Y8s), (this.oje = new Map()), (this.aje = t.K8s), (this.lje = t.Y8s);
        }
        Ut() {
            for (const t of this.oje.values()) t.Ut();
            this.oje.clear();
        }
        zni(t) {
            let i = this.oje.get(t);
            if (i) return i;
            const e = this.aje(t);
            return (i = nc.m(nc.bNe, this, { source: t, uje: e })), this.oje.set(t, i), i;
        }
        Yni(t) {
            return this.oje.has(t);
        }
        qni(t) {
            const i = this.oje.get(t);
            i && i.Ut(), this.oje.delete(t);
        }
        async cje(t) {
            return await this.lje(t);
        }
    };
}
{
    const rc = self.t;
    rc.bNe = class {
        constructor(t, i) {
            rc.x$(i),
                (this.z8s = t),
                (this.M5t = i.source),
                (this.dje = []),
                (this.fje = new Map()),
                (this.pje = !1),
                (this.pi = !1),
                (this.QAe = null);
            const e = i.uje.Zni;
            for (let t = 0, i = e.length; t < i; ++t) {
                const i = e[t],
                    s = rc.m(rc.mje, this, {
                        index: t,
                        tag: i.tag,
                        source: i.source,
                        width: i.width,
                        height: i.height,
                    });
                this.dje.push(s), i.tag && this.fje.set(i.tag.toLowerCase(), s);
            }
        }
        Ut() {
            for (const t of this.dje) t.Ut();
            rc.yh(this.dje), this.fje.clear(), (this.z8s = null), (this.M5t = null);
        }
        Wni() {
            return this.pje;
        }
        Kb() {
            return this.pi;
        }
        Kni() {
            return this.QAe || (this.QAe = this.wje()), this.QAe;
        }
        async wje() {
            if (this.pje) return;
            (this.pje = !0), (this.pi = !0);
            const t = await this.z8s.cje(this.M5t);
            if (!this.z8s) return;
            const i = t.Zni;
            rc._T(i);
            for (let t = 0, e = Math.min(i.length, this.dje.length); t < e; ++t) {
                const e = i[t].Qni;
                this.dje[t].gje(e);
            }
            this.pi = !1;
        }
        rje(t) {
            return rc.wi(t), (t = Math.floor(t)) < 0 || t >= this.dje.length ? null : this.dje[t];
        }
        hje(t) {
            return rc.vu(t), this.fje.get(t.toLowerCase()) || null;
        }
    };
}
self.t.mje = class {
    constructor(t, i) {
        (this.yje = t),
            (this.M5t = i.source || null),
            (this.ksi = i.index),
            (this.$f = i.tag),
            (this.RS = i.width),
            (this._S = i.height),
            (this.bje = null);
    }
    Ut() {
        (this.RS = 0), (this._S = 0), (this.yje = null);
    }
    FZt() {
        return this.M5t;
    }
    rs() {
        return this.RS;
    }
    ls() {
        return this._S;
    }
    gje(t) {
        this.bje = t;
    }
    xi() {
        return this.bje;
    }
};
{
    const hc = self.t,
        oc = self.assert;
    let ac = null,
        lc = null,
        uc = "",
        cc = !1,
        dc = [],
        fc = [];
    const pc = "[???]";
    let mc = 0;
    const wc = { useGrouping: !1 };
    (hc.u = class {
        constructor() {
            throw new TypeError("static class can't be instantiated");
        }
        static vje() {
            return hc.C7s() || (uc && "en-US" !== uc && !uc.startsWith("synthetic-"));
        }
        static Yc(t) {
            if (
                (hc.vu(t),
                (uc = t),
                (lc = hc.m(hc.u.Sje)),
                hc.u.vje() ? lc.xje("loader/lang/precompiled-en-US.json", !0) : lc.xje("lang/en-US.json"),
                "en-US" !== uc)
            )
                if (uc.startsWith("synthetic-")) {
                    let t = hc.u.Mje(uc);
                    if (!t) throw new Error(`invalid synthetic language '${uc}'`);
                    ac = hc.m(hc.u.Eje, lc, t);
                } else
                    (ac = hc.m(hc.u.Sje)),
                        hc.u.vje() ? ac.xje(`loader/lang/precompiled-${uc}.json`, !0) : ac.xje(`lang/${uc}.json`);
            cc = !0;
            for (let t of dc) hc.u.ij(t);
            return hc.yh(dc), hc.u.gYt();
        }
        static ij(t, i) {
            if ((hc.vu(t), hc.u.vje())) {
                if (!i) return;
            } else if (i)
                throw new Error(
                    "do not specify the 'includeWhenPrecompiled' flag on AddPath when not using a pre-compiled language file"
                );
            cc
                ? (lc.xje(`${t}/en-US.json`),
                  "en-US" === uc || uc.startsWith("synthetic-") || ac.xje(`${t}/${uc}.json`))
                : dc.push(t);
        }
        static Cje(t) {
            hc.vu(t), lc.xje(t);
        }
        static _je(t) {
            hc.vu(t), "en-US" === uc || uc.startsWith("synthetic-") || ac.xje(t);
        }
        static gYt(t) {
            return "en-US" === uc || uc.startsWith("synthetic-")
                ? lc.gYt(t)
                : Promise.all([lc.gYt(t), ac.gYt(t)]).then(() => hc.ti.Tje(ac.Ije()));
        }
        static Pje(t, i) {
            return i
                ? i.startsWith("http:") || i.startsWith("https:") || t.endsWith(".help-url")
                    ? i
                    : (0 === mc && (() => {})(`[LANG] Failed to find '${uc}' string ${hc.u.eZt() + t}'`), `[${i}]`)
                : i;
        }
        static Ke(t) {
            if ((hc.vu(t), oc(lc, "English language not initialised"), ac)) {
                let i = ac.Gje(t);
                return i === pc ? ((i = lc.Gje(t)), i === pc ? i : hc.u.Pje(t, i)) : i;
            }
            return lc.Gje(t);
        }
        static Aje(t, i) {
            return hc.vu(t), hc.wi(i), ac ? ac.Rje(i) : lc.Rje(i);
        }
        static kje(t) {
            return hc.vu(t), new hc.nS(hc.u.Ke(t));
        }
        static Oje(t) {
            return !!hc.u.Ke(t).match(/{\d+}|\{{1}.+\}{1}/g);
        }
        static Dje(t) {
            hc._T(t);
            const i = [];
            for (const e of t) "number" == typeof e ? i.push(hc.u.xX(e)) : i.push(e);
            return i;
        }
        static xX(t, i) {
            return hc.PK(t), (i = Object.assign({}, wc, i)), t.toLocaleString((ac || lc).Sm(), i);
        }
        static Fje(t, ...i) {
            return (
                hc.vu(t), 1 === i.length && hc.q$t(i[0]) ? hc.qxe(hc.u.Ke(t), i[0]) : hc.JBe(hc.u.Ke(t), ...hc.u.Dje(i))
            );
        }
        static Lje(t, ...i) {
            return hc.vu(t), new hc.nS(hc.JBe(hc.u.Ke(t), ...hc.u.Dje(i)));
        }
        static Bje(t, i, ...e) {
            let s;
            if ((hc.vu(t), hc.Crt(i), i && "number" == typeof i.Uje)) s = i.Uje;
            else {
                const t = i && "number" == typeof i.$Qt ? Math.floor(i.$Qt) : 0;
                if (t < 0 || t >= e.length) throw new RangeError("invalid plural index");
                if (((s = e[t]), "number" != typeof s)) throw new TypeError("expected number for pluralising string");
            }
            const n = hc.u.Aje(t, s),
                r = hc.ZBe(hc.u.Ke(t + "." + n), ...hc.u.Dje(e));
            return i && i.bT ? new hc.nS(r) : r;
        }
        static eZt() {
            let t = fc.length,
                i = t - 1;
            for (; i >= 0 && "." === fc[i][0]; --i);
            i < 0 && (i = 0);
            let e = "";
            for (; i < t; ++i) e += fc[i];
            return e;
        }
        static Nje() {
            let t = hc.u.eZt();
            ac && ac.jje(t), lc && lc.jje(t);
        }
        static z_(t) {
            hc.vu(t),
                oc("." !== t[0], "context cannot be relative."),
                oc("." !== t.slice(-1), "context cannot finish with a '.'.");
            const i = (i) => (i.startsWith(".") ? t + i : t + "." + i),
                e = (t) => self.lang(i(t));
            return (
                (e.njt = (t, ...e) => self.ej(i(t), ...e)),
                (e.BB = (t) => self.Hpt(i(t))),
                (e.BIt = (t, ...e) => self.tG(i(t), ...e)),
                (e.yT = (t, e, ...s) => self.iG(i(t), e, ...s)),
                e
            );
        }
        static o(t) {
            hc.vu(t),
                oc(fc.length || "." !== t[0], "first pushed language context cannot be relative"),
                fc.push(t),
                oc(
                    fc.length < 100,
                    `language context stack reached 100 items - is this right? Stack is: ${fc.join(";")}`
                ),
                hc.u.Nje();
        }
        static it() {
            oc(
                fc.length > 0,
                "popping language context stack when it's empty - check PushContext/PopContext calls paired correctly"
            ),
                fc.pop(),
                hc.u.Nje();
        }
        static XKs() {
            return "en-US" === uc;
        }
        static $je() {
            return uc;
        }
        static zje() {
            return (ac || lc).Vje();
        }
        static Ije() {
            return !!ac && ac.Ije();
        }
        static JHs(t) {
            return `${t}${!hc.u.Ije() ? hc.ayt.sNe : hc.ayt.nNe}`;
        }
        static Wje(t) {
            return ac ? ac.Hje(t) : lc.Hje(t);
        }
        static As(t) {
            t ? --mc : ++mc, oc(mc >= 0, "disabled missing string logging too many times");
        }
    }),
        (hc.u.ia = pc),
        (window.lang = hc.u.Ke),
        (window.Hpt = hc.u.kje),
        (window.ej = hc.u.Fje),
        (window.tG = hc.u.Lje),
        (window.iG = hc.u.Bje),
        (window.Z9t = hc.u.Oje);
}
{
    const gc = self.t;
    gc.u.Sje = class extends gc.MV {
        constructor() {
            super(),
                (this.Kje = []),
                (this.qje = !1),
                (this.Xje = ""),
                (this.Yje = ""),
                (this.Jje = ""),
                (this.Zje = !1),
                (this.Qje = new Map()),
                (this.mXt = ""),
                (this.t$e = null);
        }
        Sm() {
            return this.Jje;
        }
        Vje() {
            return this.Yje;
        }
        xje(t) {
            if ((gc.vu(t), this.Kje.includes(t))) throw new Error("same language URL added twice");
            this.Kje.push(t);
        }
        async gYt(t) {
            if (!this.Kje.length) return Promise.resolve(this);
            const i = [];
            return (
                gc.Rm(i, this.Kje),
                gc.yh(this.Kje),
                await Promise.all(
                    i.map(async (i) => {
                        const e = await gc.MNt(i);
                        this.u1s(e, t);
                    })
                ),
                this
            );
        }
        u1s(t, i) {
            gc.x$(t);
            let e = t.languageTag;
            if (this.Jje) {
                if (this.Jje !== e)
                    throw new Error(`language file has wrong language tag (has '${e}', expected '${this.Jje}')`);
            } else (this.Jje = e), void 0 !== Intl.PluralRules && (this.t$e = new Intl.PluralRules(this.Jje));
            if (t.main) {
                (this.Xje = t.englishName), (this.Yje = t.nativeName);
                const i = t.rightToLeft;
                (this.Zje = "string" == typeof i ? "true" === i : !!i), (this.qje = !0);
            }
            this.i$e(t.text, "", i);
        }
        i$e(t, i, e) {
            gc.x$(t), gc.vu(i), i && (i += ".");
            for (let [s, n] of Object.entries(t)) {
                let t = i + s;
                if ("object" == typeof n) this.i$e(n, t, e);
                else if ("string" == typeof n) {
                    if (!e && this.Qje.has(t)) throw new Error(`key name '${t}' already exists in language string map`);
                    this.Qje.set(t, n);
                }
            }
        }
        jje(t) {
            gc.vu(t), (this.mXt = t);
        }
        Gje(t) {
            if ((gc.vu(t), !this.qje)) throw new Error("language not loaded");
            if (!t) throw new Error("cannot lookup empty key");
            if (t.startsWith(".")) {
                if (!this.mXt) throw new Error("relative language string used with no context set");
                t = this.mXt + t;
            }
            let i = this.Qje.get(t);
            return void 0 === i ? gc.u.ia : i;
        }
        Rje(t) {
            return gc.wi(t), this.t$e ? this.t$e.select(t) : "other";
        }
        Ije() {
            if (!this.qje) throw new Error("language not loaded");
            return this.Zje;
        }
        Hje(t) {
            const i = "exporters.preview.debugger.",
                e = /^(plugins|behaviors)\.\w+\.name$/,
                s = /^(plugins|behaviors)\.\w+\.debugger\./,
                n = /^(plugins|behaviors)\.\w+\.properties\.[\w-]+\.name$/,
                r = /^(plugins|behaviors)\.\w+\.properties\.[\w-]+\.items/,
                h = [];
            for (const t of this.Qje.keys())
                t.startsWith(i)
                    ? h.push({ e$e: t, key: t.substr(27) })
                    : (e.test(t) || s.test(t) || n.test(t) || r.test(t)) && h.push({ e$e: t, key: t });
            return h;
        }
    };
}
{
    const yc = self.t;
    function bc(t, i) {
        if (!i) return t;
        let e = "",
            s = !1,
            n = !1;
        for (let r = 0, h = t.length; r < h; ++r) {
            let h = t.charAt(r);
            "[" === h
                ? ((s = !0), (e += h))
                : "]" === h
                  ? ((s = !1), (e += h))
                  : "{" === h
                    ? ((n = !0), (e += h))
                    : "}" === h
                      ? ((n = !1), (e += h))
                      : (e += s || n ? h : i(h));
        }
        return e;
    }
    function vc(t) {
        return t.toUpperCase();
    }
    function Sc(t) {
        return t.toLowerCase();
    }
    let xc = new Set([
        " ",
        "\n",
        "\t",
        "-",
        ".",
        ":",
        ";",
        "'",
        '"',
        "(",
        ")",
        "+",
        "=",
        "[",
        "]",
        "{",
        "}",
        "!",
        "?",
        "|",
        "\\",
        "/",
        "<",
        ">",
        "@",
        "#",
        "~",
        "%",
        "&",
        "*",
    ]);
    function Mc(t, i) {
        if (xc.has(t)) return t;
        {
            let e = "";
            for (let s = 0; s < i; ++s) e += t;
            return e;
        }
    }
    function Ec(t) {
        return function (i) {
            return Mc(i, t);
        };
    }
    let Cc = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",
        _c = "jqJQ",
        Tc = new Map();
    for (let kc = 0, Oc = Cc.length; kc < Oc; ++kc) Tc.set(Cc.charAt(kc), _c.charAt(kc));
    function Ic(t) {
        return Tc.get(t) || t;
    }
    let Pc = new Map([
        ["a", "4"],
        ["A", "4"],
        ["B", "|3"],
        ["c", "<"],
        ["C", "("],
        ["D", "[)"],
        ["e", "3"],
        ["E", "3"],
        ["g", "9"],
        ["G", "9"],
        ["H", "|-|"],
        ["i", "1"],
        ["I", "1"],
        ["K", "|<"],
        ["l", "L"],
        ["L", "|_"],
        ["M", "(\\/)"],
        ["N", "(\\)"],
        ["o", "0"],
        ["O", "0"],
        ["R", "|2"],
        ["s", "5"],
        ["S", "5"],
        ["t", "7"],
        ["T", "7"],
        ["U", "|_|"],
        ["V", "\\/"],
        ["W", "(/\\)"],
    ]);
    function Gc(t) {
        return Pc.get(t) || t;
    }
    function Ac(t) {
        switch (t) {
            case "synthetic-uppercase":
                return vc;
            case "synthetic-lowercase":
                return Sc;
            case "synthetic-repeat-2":
                return Ec(2);
            case "synthetic-repeat-3":
                return Ec(3);
            case "synthetic-repeat-4":
                return Ec(4);
            case "synthetic-rockdots":
                return Ic;
            case "synthetic-leet":
                return Gc;
            default:
                return null;
        }
    }
    function Rc(t) {
        let i = Ac(t);
        return (t) => bc(t, i);
    }
    (yc.u.Mje = function (t) {
        return Rc(t);
    }),
        (yc.u.Eje = class extends yc.MV {
            constructor(t, i) {
                super(), (this.s$e = t), (this.Rgi = i);
            }
            Sm() {
                return this.s$e.Sm();
            }
            Rje(t) {
                return this.s$e.Rje(t);
            }
            Hje(t) {
                return this.s$e.Hje(t);
            }
            gYt() {
                return self;
            }
            jje(t) {}
            Gje(t) {
                yc.vu(t);
                let i = this.s$e.Gje(t);
                return (e = i) === yc.u.ia || e.startsWith("http:") || e.startsWith("https:") ? i : this.Rgi(i);
                var e;
            }
            Ije() {
                return this.s$e.Ije();
            }
        });
}
{
    const Dc = self.t;
    let Fc = new Map(),
        Lc = new Map(),
        Bc = new Map();
    const Uc = "unknown";
    function Nc(t, i, e) {
        if ((Dc.wi(t), (t = Math.floor(t)), Dc.vu(i), Dc.k$(e), Fc.has(t))) throw new Error("duplicate key code");
        if (Lc.has(i)) throw new Error("duplicate key id");
        return Fc.set(t, i), Lc.set(i, t), e && Bc.set(i, e), t;
    }
    class jc extends Dc.MV {
        constructor() {
            super(),
                (this.n$e = Nc(8, "backspace")),
                (this.CK = Nc(9, "tab")),
                (this.r$e = Nc(12, "clear")),
                (this.o3 = Nc(13, "enter")),
                (this.hE = Nc(16, "shift", "")),
                (this.Obi = Nc(17, "control", "Ctrl")),
                (this.dX = Nc(18, "alt", Dc.fk.q9t ? "" : "Alt")),
                (this.h$e = Nc(19, "pause")),
                (this.o$e = Nc(20, "caps-lock")),
                (this.oO = Nc(27, "escape")),
                (this.a$e = Nc(33, "page-up")),
                (this.aQ = Nc(32, "space")),
                (this.l$e = Nc(34, "page-down")),
                (this.u$e = Nc(35, "end")),
                (this.c$e = Nc(36, "home")),
                (this.W8 = Nc(37, "left-arrow", "")),
                (this.V8 = Nc(38, "up-arrow", "")),
                (this.N8 = Nc(39, "right-arrow", "")),
                (this.K8 = Nc(40, "down-arrow", "")),
                (this.d$e = Nc(45, "insert")),
                (this.GJt = Nc(46, "delete")),
                (this.f$e = Nc(48, "0")),
                (this.vVi = Nc(49, "1")),
                (this.CVi = Nc(50, "2")),
                (this.EVi = Nc(51, "3")),
                (this.mVi = Nc(52, "4")),
                (this.gVi = Nc(53, "5")),
                (this.bVi = Nc(54, "6")),
                (this.oVi = Nc(55, "7")),
                (this.lVi = Nc(56, "8")),
                (this.fVi = Nc(57, "9")),
                (this.A = Nc(65, "a")),
                (this.B = Nc(66, "b")),
                (this.C = Nc(67, "c")),
                (this.D = Nc(68, "d")),
                (this.E = Nc(69, "e")),
                (this.F = Nc(70, "f")),
                (this.G = Nc(71, "g")),
                (this.H = Nc(72, "h")),
                (this.I = Nc(73, "i")),
                (this.J = Nc(74, "j")),
                (this.K = Nc(75, "k")),
                (this.L = Nc(76, "l")),
                (this.M = Nc(77, "m")),
                (this.N = Nc(78, "n")),
                (this.O = Nc(79, "o")),
                (this.P = Nc(80, "p")),
                (this.Q = Nc(81, "q")),
                (this.R = Nc(82, "r")),
                (this.S = Nc(83, "s")),
                (this.T = Nc(84, "t")),
                (this.U = Nc(85, "u")),
                (this.V = Nc(86, "v")),
                (this.W = Nc(87, "w")),
                (this.X = Nc(88, "x")),
                (this.Y = Nc(89, "y")),
                (this.Z = Nc(90, "z")),
                (this.p$e = Nc((Dc.fk.q9t, 91), "left-meta", Dc.fk.q9t ? "" : "")),
                (this.m$e = Nc(Dc.fk.q9t ? 93 : 92, "right-meta", Dc.fk.q9t ? "" : "")),
                (this.w$e = Nc(224, "firefox-meta", "")),
                (this.g$e = Nc(96, "numpad-0")),
                (this.y$e = Nc(97, "numpad-1")),
                (this.b$e = Nc(98, "numpad-2")),
                (this.v$e = Nc(99, "numpad-3")),
                (this.S$e = Nc(100, "numpad-4")),
                (this.x$e = Nc(101, "numpad-5")),
                (this.M$e = Nc(102, "numpad-6")),
                (this.E$e = Nc(103, "numpad-7")),
                (this.C$e = Nc(104, "numpad-8")),
                (this._$e = Nc(105, "numpad-9")),
                (this.T$e = Nc(106, "numpad-multiply")),
                (this.I$e = Nc(107, "numpad-add")),
                (this.P$e = Nc(109, "numpad-subtract")),
                (this.G$e = Nc(110, "numpad-decimal")),
                (this.A$e = Nc(111, "numpad-divide")),
                (this.F1 = Nc(112, "f1")),
                (this.F2 = Nc(113, "f2")),
                (this.F3 = Nc(114, "f3")),
                (this.F4 = Nc(115, "f4")),
                (this.F5 = Nc(116, "f5")),
                (this.F6 = Nc(117, "f6")),
                (this.F7 = Nc(118, "f7")),
                (this.F8 = Nc(119, "f8")),
                (this.F9 = Nc(120, "f9")),
                (this.F10 = Nc(121, "f10")),
                (this.F11 = Nc(122, "f11")),
                (this.F12 = Nc(123, "f12")),
                (this.R$e = Nc(144, "num-lock")),
                (this.k$e = Nc(145, "scroll-lock")),
                (this.O$e = Nc(180, "launch-mail")),
                (this.D$e = Nc(183, "launch-calculator")),
                (this.F$e = Nc(186, "semicolon", ";")),
                (this.L$e = Nc(187, "equals", "=")),
                (this.y2s = Nc(188, "comma", ",")),
                (this.v2s = Nc(189, "subtract", "-")),
                (this.B$e = Nc(190, "period", ".")),
                (this.U$e = Nc(191, "slash", "/")),
                (this.N$e = Nc(192, "apostrophe", "'")),
                (this.j$e = Nc(219, "open-square-bracket", "[")),
                (this.$$e = Nc(221, "close-square-bracket", "]")),
                (this.z$e = Nc(220, "backslash", "\\")),
                (this.V$e = Nc(222, "hash", "#")),
                (this.W$e = Nc(223, "backtick", "`")),
                (this.K5t = 1e4),
                (this.L4t = 10001),
                (this.W4t = 10002),
                (this.H4t = 10003),
                (this.$4t = 10004),
                (this.J4t = 10005),
                (this.j4t = 10006),
                (this.V4t = 10007),
                (this.cVi = 10008),
                (this.dVi = 10009),
                (this.zdt = 10010),
                (this.oLi = 10011),
                (this.aLi = 10012),
                (this.cLi = 10013),
                (this.lLi = 10014),
                (this.H$e = 10015),
                (this.OBt = 10016),
                (this.TBt = 10017);
        }
        K$e(t) {
            return t >= 1e4;
        }
        Tdt(t, i) {
            if (this.K$e(t)) {
                if (this.K$e(i)) return t === i;
            } else {
                if (!this.K$e(i)) return t === i;
                {
                    let e = t;
                    (t = i), (i = e);
                }
            }
            return this.q$e(t).includes(i);
        }
        X$e(t) {
            return [
                this.K5t,
                this.L4t,
                this.W4t,
                this.H4t,
                this.$4t,
                this.J4t,
                this.j4t,
                this.V4t,
                this.cVi,
                this.dVi,
            ].some((i) => this.q$e(i).includes(t));
        }
        q$e(t) {
            if (!this.K$e(t)) return [t];
            switch (t) {
                case this.K5t:
                    return [this.f$e, this.g$e, this.d$e];
                case this.L4t:
                    return [this.vVi, this.y$e, this.u$e];
                case this.W4t:
                    return [this.CVi, this.b$e];
                case this.H4t:
                    return [this.EVi, this.v$e, this.l$e];
                case this.$4t:
                    return [this.mVi, this.S$e];
                case this.J4t:
                    return [this.gVi, this.x$e, this.r$e];
                case this.j4t:
                    return [this.bVi, this.M$e];
                case this.V4t:
                    return [this.oVi, this.E$e, this.c$e];
                case this.cVi:
                    return [this.lVi, this.C$e];
                case this.dVi:
                    return [this.fVi, this._$e, this.a$e];
                case this.zdt:
                    return [this.GJt, this.G$e, this.n$e];
                case this.oLi:
                    return [this.W8, this.S$e];
                case this.aLi:
                    return [this.N8, this.M$e];
                case this.cLi:
                    return [this.K8, this.b$e];
                case this.lLi:
                    return [this.V8, this.C$e];
                case this.H$e:
                    return [this.p$e, this.m$e, this.w$e];
                case this.OBt:
                    return [this.L$e, this.I$e];
                case this.TBt:
                    return [this.v2s, this.P$e];
                default:
                    throw new RangeError("invalid virtual key code");
            }
        }
        Y$e(t) {
            return Dc.wi(t), (t = Math.floor(t)), Fc.get(t) || Uc;
        }
        J$e(t) {
            return Dc.vu(t), Lc.get(t) || 0;
        }
        Zn(t) {
            if ("string" == typeof t) return this.Z$e(t);
            if ("number" == typeof t) return this.xCe(t);
            throw new TypeError("expected string or number");
        }
        xCe(t) {
            return (
                Dc.wi(t),
                (t = Math.floor(t)),
                Fc.has(t) ? this.Z$e(this.Y$e(t)) : self.ej("ui.keyboard.keyNames.codeNumber", t)
            );
        }
        Z$e(t) {
            return Dc.vu(t), self.lang("ui.keyboard.keyNames." + t);
        }
        Q9t(t) {
            if ("string" == typeof t) return this.Q$e(t);
            if ("number" == typeof t) return this.tze(t);
            throw new TypeError("expected string or number");
        }
        tze(t) {
            return Dc.wi(t), (t = Math.floor(t)), Bc.get(this.Y$e(t)) || null;
        }
        Q$e(t) {
            return Dc.vu(t), Bc.get(t) || null;
        }
        lAt(t) {
            return this.Q9t(t) || this.Zn(t);
        }
    }
    Dc.fO = Dc.m(jc);
}
self.t.sQ = Object.freeze({ z0: 0, iQ: 1, s2t: 2 });
{
    const $c = self.t,
        zc = 333,
        Vc = 25,
        Wc = 333,
        Hc = 33,
        Kc = 20,
        qc = 500;
    let Xc = 0,
        Yc = 0,
        Jc = 0;
    $c.ize = class extends $c.MV {
        constructor(t, i) {
            super(),
                (this.nes = t.id),
                (this.eze = i),
                (this.u3 = t.clientX),
                (this.d3 = t.clientY),
                (this.sze = Date.now()),
                (this.nze = this.u3),
                (this.rze = this.d3),
                (this.hze = !1),
                (this.oze = !1),
                (this.aze = !1),
                (this.lze = null),
                (this.uze = null);
        }
        cze(t) {
            this.lze = t;
        }
        dze(t) {
            this.uze = t;
        }
        gl(t) {
            (this.nze = t.clientX), (this.rze = t.clientY);
            const i = $c.gt(this.u3, this.d3, this.nze, this.rze);
            i > Vc && (this.hze = !0), i > Kc && (this.oze = !0);
        }
        MRi() {
            return !!this.eze.ownerDocument.defaultView;
        }
        fze() {
            if (this.aze) return;
            if (Date.now() - this.sze >= qc && !this.oze && $c.gt(this.u3, this.d3, this.nze, this.rze) < Kc) {
                this.aze = !0;
                const t = new MouseEvent("contextmenu", {
                    bubbles: !0,
                    cancelable: !0,
                    screenX: this.u3,
                    screenY: this.d3,
                    clientX: this.u3,
                    clientY: this.d3,
                    button: 2,
                    buttons: 2,
                });
                this.eze.dispatchEvent(t);
            }
        }
        pze(t) {
            (this.nze = t.clientX), (this.rze = t.clientY);
            const i = Date.now();
            let e = !1;
            if (!this.hze && i - this.sze < zc && $c.gt(this.u3, this.d3, this.nze, this.rze) <= Vc) {
                let s = null;
                const n = {
                    mK: $c.sQ.z0,
                    yK: "touch" === t.pointerType,
                    screenX: t.screenX,
                    screenY: t.screenY,
                    clientX: t.clientX,
                    clientY: t.clientY,
                    pageX: t.pageX,
                    pageY: t.pageY,
                    pointerType: t.pointerType,
                };
                i - Jc <= zc + Wc && $c.gt(this.u3, this.d3, Xc, Yc) <= Hc
                    ? ((s = new CustomEvent("UIDoubleTap", { bubbles: !0, cancelable: !0, detail: n })),
                      (Jc = 0),
                      (e = !0),
                      this.uze && this.uze())
                    : ((s = new CustomEvent("UITap", { bubbles: !0, cancelable: !0, detail: n })),
                      (Xc = this.nze),
                      (Yc = this.rze),
                      (Jc = i),
                      this.lze && this.lze()),
                    (e = !this.eze.dispatchEvent(s));
            }
            return (this.eze = null), e;
        }
    };
    const Zc = new Map();
    let Qc = -1;
    function td() {
        Qc = -1;
        for (const [t, i] of Zc.entries()) i.MRi() ? i.fze() : Zc.delete(t);
        Zc.size && (Qc = requestAnimationFrame(td));
    }
    $c.mze = class {
        constructor() {
            throw new TypeError("static class can't be instantiated");
        }
        static wze(t, i) {
            const e = Zc.get(t.id);
            e && e.cze(i);
        }
        static gze(t, i) {
            const e = Zc.get(t.id);
            e && e.dze(i);
        }
        static yze(t, i, e) {
            let s = !1;
            if ("CustomPointerDown" === t)
                Zc.set(i.id, $c.m($c.ize, i, e)), -1 === Qc && "iOS" === $c.fk.OS && (Qc = requestAnimationFrame(td));
            else if ("CustomPointerMove" === t) {
                const t = Zc.get(i.id);
                t && t.gl(i);
            } else if ("CustomPointerUp" === t) {
                const t = Zc.get(i.id);
                t && (s = t.pze(i)), Zc.delete(i.id);
            }
            return s;
        }
    };
}
{
    const id = self.t,
        ed = { capture: !0, passive: !1 },
        sd = { capture: !0, passive: !0 };
    let nd = !1,
        rd = !1;
    function hd(t) {
        return function (i) {
            if (!id.Lh()) return;
            if (i.sourceCapabilities && i.sourceCapabilities.firesTouchEvents) return;
            if (nd && "click" === i.type) return void (nd = !1);
            if (rd && "dblclick" === i.type) return void (rd = !1);
            const e = new CustomEvent(t, {
                bubbles: !0,
                cancelable: !0,
                detail: {
                    id: -1,
                    mK: i.button,
                    yK: !1,
                    screenX: i.screenX,
                    screenY: i.screenY,
                    clientX: i.clientX,
                    clientY: i.clientY,
                    pageX: i.pageX,
                    pageY: i.pageY,
                    ctrlKey: i.ctrlKey,
                    shiftKey: i.shiftKey,
                    altKey: i.altKey,
                    metaKey: i.metaKey,
                    pointerType: "mouse",
                },
            });
            i.target.dispatchEvent(e) || i.preventDefault();
        };
    }
    function od(t) {
        return function (i) {
            if (!id.Lh()) return;
            if ("mouse" === i.pointerType) return;
            const e = {
                id: i.pointerId,
                mK: id.sQ.z0,
                yK: "touch" === i.pointerType,
                screenX: i.screenX,
                screenY: i.screenY,
                clientX: i.clientX,
                clientY: i.clientY,
                pageX: i.pageX,
                pageY: i.pageY,
                ctrlKey: !1,
                shiftKey: !1,
                altKey: !1,
                metaKey: !1,
                pointerType: i.pointerType,
            };
            id.mze.wze(e, () => (nd = !0)), id.mze.gze(e, () => (rd = !0));
            const s = id.mze.yze(t, e, i.target);
            id.mze.wze(e, null), id.mze.gze(e, null), s && i.preventDefault();
        };
    }
    let ad = -1;
    function ld(t) {
        const i = t.touches;
        if (0 === t.touches.length) return;
        const e = window.innerWidth <= 600 ? 30 : 50,
            s = i[0].pageX;
        (s < e || s > window.innerWidth - 15) && t.preventDefault();
    }
    window.addEventListener(
        "pointermove",
        (t) => {
            "mouse" === t.pointerType && (ad = t.pointerId);
        },
        sd
    ),
        (id.Z7 = function () {
            return ad;
        }),
        "Safari" === id.fk.$s && document.addEventListener("touchstart", ld, ed),
        document.addEventListener("click", hd("UITap"), ed),
        document.addEventListener("dblclick", hd("UIDoubleTap"), ed),
        document.addEventListener("pointerdown", od("CustomPointerDown"), ed),
        document.addEventListener("pointermove", od("CustomPointerMove"), sd),
        document.addEventListener("pointerup", od("CustomPointerUp"), ed);
}
{
    const ud = self.t;
    ud.Event = class {
        constructor(t, i) {
            ud.vu(t),
                (this.type = t),
                (this.cancelable = !!i),
                (this.defaultPrevented = !1),
                (this.bze = !1),
                (this.VSt = !1);
        }
        preventDefault() {
            if (!this.cancelable) throw new Error(`event '${this.type}' is not cancelable`);
            this.defaultPrevented = !0;
        }
        stopPropagation() {
            if (!this.cancelable) throw new Error(`event '${this.type}' cannot be stopped`);
            if (this.VSt) throw new Error(`cannot stop async event '${this.type}' propagation`);
            this.bze = !0;
        }
    };
}
{
    const cd = self.t;
    cd.Event.aG = class extends cd.MV {
        constructor() {
            super(), (this.vze = new Map()), (this.Sze = !1);
        }
        Ut() {
            if (this.Sze) throw new Error("already released");
            this.y8t(), (this.Sze = !0), cd.Ut(this);
        }
        gi() {
            return this.Sze;
        }
        y8t() {
            if (this.vze) {
                for (let t of this.vze.values()) t.Ut();
                this.vze.clear();
            }
        }
        xze(t, i) {
            cd.vu(t);
            let e = this.vze.get(t);
            return e || (i ? ((e = cd.m(cd.Event.Mze, t)), this.vze.set(t, e), e) : null);
        }
        Eze(t) {
            return this.vze.has(t);
        }
        addEventListener(t, i, e) {
            cd.vu(t), cd.yp(i), this.xze(t, !0).Cze(i, !!e);
        }
        removeEventListener(t, i, e) {
            cd.vu(t), cd.yp(i);
            let s = this.xze(t, !1);
            s && (s._ze(i, !!e), s.Tze() && this.vze.delete(t));
        }
        dispatchEvent(t) {
            cd.Et(t, cd.Event), cd.vu(t.type);
            const i = this.xze(t.type, !1);
            return !i || (t.cancelable ? i.Ize(t) : i.Pze(t));
        }
        gPe(t) {
            cd.Et(t, cd.Event), cd.vu(t.type);
            const i = this.xze(t.type, !1);
            return i ? ((t.VSt = !0), i.Gze(t)) : Promise.resolve(!0);
        }
        async Aze(t) {
            cd.Et(t, cd.Event), cd.vu(t.type);
            const i = this.xze(t.type, !1);
            if (!i) return !0;
            this.vze.delete(t.type), (t.VSt = !0);
            const e = await i.Gze(t);
            return i.Ut(), e;
        }
        async Rze(t) {
            cd.Et(t, cd.Event), cd.vu(t.type);
            const i = this.xze(t.type, !1);
            return !i || (await i.kze(t));
        }
        Oze(t) {
            cd.Et(t, cd.Event), cd.vu(t.type);
            const i = this.xze(t.type, !1);
            return !i || i.Dze(t);
        }
        async h8t(t) {
            cd.Et(t, cd.Event), cd.vu(t.type);
            const i = this.xze(t.type, !1);
            return !i || (await i.Fze(t));
        }
        Lze(t) {
            cd.Et(t, cd.Event), cd.vu(t.type);
            const i = this.xze(t.type, !1);
            if (!i) return null;
            if (t.cancelable) throw new Error("not supported");
            return i.Bze(t);
        }
        Uze(t) {
            for (const i of this.vze.values()) i.Uze(t);
        }
    };
}
{
    const dd = self.t,
        fd = self.assert;
    dd.Event.Mze = class extends dd.MV {
        constructor(t) {
            super(),
                (this.Osi = t),
                (this.Nze = []),
                (this.jze = new Set()),
                (this.$ze = []),
                (this.zze = new Set()),
                (this.Vze = 0),
                (this.Wze = []);
        }
        Ut() {
            this.Vze > 0 ||
                (dd.yh(this.Nze), this.jze.clear(), dd.yh(this.$ze), this.zze.clear(), dd.yh(this.Wze), dd.Ut(this));
        }
        Cze(t, i) {
            if ((dd.yp(t), this.Hze())) this.Wze.push({ op: "add", Kze: t, capture: i });
            else if (i) {
                if (this.jze.has(t)) return;
                this.Nze.push(t), this.jze.add(t);
            } else {
                if (this.zze.has(t)) return;
                this.$ze.push(t), this.zze.add(t);
            }
        }
        _ze(t, i) {
            dd.yp(t),
                this.Hze()
                    ? this.Wze.push({ op: "remove", Kze: t, capture: i })
                    : i
                      ? this.jze.has(t) && (this.jze.delete(t), dd.xei(this.Nze, t))
                      : this.zze.has(t) && (this.zze.delete(t), dd.xei(this.$ze, t));
        }
        Tze() {
            return !this.Nze.length && !this.$ze.length;
        }
        Hze() {
            return this.Vze > 0;
        }
        qze() {
            const t = new Set(),
                i = new Set();
            for (const e of this.Wze)
                if ("add" === e.op) this.Cze(e.Kze, e.capture), e.capture ? i.delete(e.Kze) : t.delete(e.Kze);
                else {
                    if ("remove" !== e.op) throw new Error("invalid op");
                    e.capture ? (this.jze.delete(e.Kze), i.add(e.Kze)) : (this.zze.delete(e.Kze), t.add(e.Kze));
                }
            dd.$gt(this.$ze, t), dd.$gt(this.Nze, i), dd.yh(this.Wze);
        }
        Ize(t) {
            fd(t instanceof dd.Event, "invalid event"),
                fd(t.type === this.Osi, "event type does not match handler"),
                this.Xze();
            let i = !1;
            for (let e = 0, s = this.Nze.length; e < s; ++e)
                if ((this.Nze[e](t), t.bze)) {
                    i = !0;
                    break;
                }
            if (!i) for (let i = 0, e = this.$ze.length; i < e && (this.$ze[i](t), !t.bze); ++i);
            return this.Yze(), !t.defaultPrevented;
        }
        Pze(t) {
            this.Xze();
            for (let i = 0, e = this.Nze.length; i < e; ++i) this.Nze[i](t);
            for (let i = 0, e = this.$ze.length; i < e; ++i) this.$ze[i](t);
            return this.Yze(), !0;
        }
        Xze() {
            this.Vze++;
        }
        Yze() {
            this.Vze--, 0 === this.Vze && this.Wze.length > 0 && this.qze();
        }
        Uze(t) {
            t ? this.Xze() : this.Yze();
        }
        Gze(t) {
            fd(t instanceof dd.Event, "invalid event"), fd(t.type === this.Osi, "event type does not match handler");
            let i = [];
            for (let e = 0, s = this.Nze.length; e < s; ++e) {
                let s = this.Nze[e];
                i.push(dd.Roe(() => s(t)));
            }
            for (let e = 0, s = this.$ze.length; e < s; ++e) {
                let s = this.$ze[e];
                i.push(dd.Roe(() => s(t)));
            }
            return Promise.all(i).then(() => !t.defaultPrevented);
        }
        Dze(t) {
            fd(t instanceof dd.Event, "invalid event"), fd(t.type === this.Osi, "event type does not match handler");
            const i = [];
            this.Xze();
            for (let e = 0, s = this.Nze.length; e < s; ++e) {
                const s = this.Nze[e](t);
                s instanceof Promise && i.push(s);
            }
            for (let e = 0, s = this.$ze.length; e < s; ++e) {
                const s = this.$ze[e](t);
                s instanceof Promise && i.push(s);
            }
            return this.Yze(), i.length ? Promise.all(i).then(() => !t.defaultPrevented) : !t.defaultPrevented;
        }
        async kze(t) {
            return await this.Dze(t);
        }
        async Fze(t) {
            fd(t instanceof dd.Event, "invalid event"),
                fd(t.type === this.Osi, "event type does not match handler"),
                this.Xze();
            for (let i = 0, e = this.Nze.length; i < e; ++i) {
                const e = this.Nze[i](t);
                e instanceof Promise && (await e);
            }
            for (let i = 0, e = this.$ze.length; i < e; ++i) {
                const e = this.$ze[i](t);
                e instanceof Promise && (await e);
            }
            return this.Yze(), !t.defaultPrevented;
        }
        *Bze(t) {
            this.Xze();
            for (let i = 0, e = this.Nze.length; i < e; ++i) {
                const e = this.Nze[i](t);
                dd.Jze(e) && (yield* e);
            }
            for (let i = 0, e = this.$ze.length; i < e; ++i) {
                const e = this.$ze[i](t);
                dd.Jze(e) && (yield* e);
            }
            this.Yze();
        }
    };
}
{
    const pd = self.t,
        md = self.assert;
    let wd = [];
    (pd.rE = class {
        constructor() {
            throw new TypeError("static class");
        }
        static Uj(t) {
            let i = t.which;
            for (; wd.length <= i; ) wd.push(!1);
            i === pd.fO.CK && wd[i] && t.preventDefault(), (wd[i] = !0);
        }
        static PR(t) {
            let i = t.which;
            i < 0 || i >= wd.length || (wd[i] = !1);
        }
        static Zze() {
            for (let t = 0, i = wd.length; t < i; ++t) wd[t] = !1;
        }
        static aE(t) {
            if (pd.fO.K$e(t)) {
                let i = pd.fO.q$e(t);
                for (let t of i) if (pd.rE.Qze(t)) return !0;
                return !1;
            }
            return pd.rE.Qze(t);
        }
        static kQ(t) {
            if (t) {
                if (pd.Gat(t)) {
                    let i = t;
                    return pd.Gat(i.detail) && (i = i.detail), pd.fk.q9t ? !!i.metaKey : !!i.ctrlKey;
                }
                throw new TypeError("invalid argument");
            }
            return pd.fk.q9t ? this.aE(pd.fO.H$e) : this.aE(pd.fO.Obi);
        }
        static vdt(t) {
            if (t) {
                if (pd.Gat(t)) {
                    let i = t;
                    return pd.Gat(i.detail) && (i = i.detail), !!i.shiftKey;
                }
                throw new TypeError("invalid argument");
            }
            return this.aE(pd.fO.hE);
        }
        static i5t(t) {
            if (t) {
                if (pd.Gat(t)) {
                    let i = t;
                    return pd.Gat(i.detail) && (i = i.detail), !!i.altKey;
                }
                throw new TypeError("invalid argument");
            }
            return this.aE(pd.fO.dX);
        }
        static F4t(t) {
            if (pd.YF(t, pd.Event, Event, CustomEvent, KeyboardEvent)) {
                let i = t;
                if (pd.Gat(i.detail)) {
                    let t = i.detail;
                    return (
                        md("ctrlKey" in t),
                        md("metaKey" in t),
                        md("shiftKey" in t),
                        md("altKey" in t),
                        t.ctrlKey || t.metaKey || t.shiftKey || t.altKey
                    );
                }
                return (
                    md("ctrlKey" in i),
                    md("metaKey" in i),
                    md("shiftKey" in i),
                    md("altKey" in i),
                    i.ctrlKey || i.metaKey || i.shiftKey || i.altKey
                );
            }
            if (pd.q$t(t)) {
                let i = t;
                return (
                    md("ctrlKey" in i),
                    md("metaKey" in i),
                    md("shiftKey" in i),
                    md("altKey" in i),
                    i.ctrlKey || i.metaKey || i.shiftKey || i.altKey
                );
            }
            if (pd.YI(t)) return pd.rE.aE(pd.fO.Obi) || pd.rE.aE(pd.fO.hE) || pd.rE.aE(pd.fO.dX) || pd.rE.aE(pd.fO.H$e);
            throw new Error("unexpected argument");
        }
        static tVe(t) {
            if (pd.YF(t, pd.Event, Event, CustomEvent, KeyboardEvent)) {
                let i = t;
                if (pd.Gat(i.detail)) {
                    let t = i.detail;
                    return (
                        md("ctrlKey" in t),
                        md("metaKey" in t),
                        md("shiftKey" in t),
                        md("altKey" in t),
                        !(t.ctrlKey || t.metaKey || t.shiftKey || t.altKey)
                    );
                }
                return (
                    md("ctrlKey" in i),
                    md("metaKey" in i),
                    md("shiftKey" in i),
                    md("altKey" in i),
                    !(i.ctrlKey || i.metaKey || i.shiftKey || i.altKey)
                );
            }
            if (pd.q$t(t)) {
                let i = t;
                return (
                    md("ctrlKey" in i),
                    md("metaKey" in i),
                    md("shiftKey" in i),
                    md("altKey" in i),
                    !(i.ctrlKey || i.metaKey || i.shiftKey || i.altKey)
                );
            }
            if (pd.YI(t))
                return !(pd.rE.aE(pd.fO.Obi) || pd.rE.aE(pd.fO.hE) || pd.rE.aE(pd.fO.dX) || pd.rE.aE(pd.fO.H$e));
            throw new Error("unexpected argument");
        }
        static Qze(t) {
            return (
                md(!pd.fO.K$e(t), "should not be virtual key code"),
                !((t = Math.floor(t)) < 0 || t >= wd.length) && wd[t]
            );
        }
    }),
        window.addEventListener("keydown", pd.rE.Uj),
        window.addEventListener("keyup", pd.rE.PR),
        window.addEventListener("blur", pd.rE.Zze),
        window.addEventListener("external-keydown", pd.rE.Uj),
        window.addEventListener("external-keyup", pd.rE.PR);
}
{
    const gd = self.t;
    let yd = new Set();
    gd.rQ = class {
        constructor() {
            throw new TypeError("static class");
        }
        static nQ(t) {
            if ((gd.wi(t), yd.has(t))) throw new Error("pointer already captured");
            yd.add(t);
        }
        static Ut(t) {
            if ((gd.wi(t), !yd.has(t))) throw new Error("pointer not captured");
            yd.delete(t);
        }
        static iVe(t) {
            return gd.wi(t), yd.has(t);
        }
    };
}
{
    const bd = self.t,
        vd = 12,
        Sd = 16,
        xd = 35,
        Md = "undefined" != typeof requestIdleCallback;
    let Ed = [],
        Cd = -1,
        _d = 0;
    function Td(t) {
        Cd = Md && 0 === _d ? requestIdleCallback(Id, { timeout: xd }) : setTimeout(Id, _d > 0 ? 1 : t);
    }
    function Id(t) {
        if (((Cd = -1), !Ed.length)) return;
        let i = performance.now(),
            e = i,
            s = 0,
            n = 0;
        do {
            Pd(Ed.shift()), (e = performance.now()), ++s, (n = ((e - i) / s) * 1.1);
        } while (Ed.length && (Md && 0 === _d && void 0 !== t ? n < t.timeRemaining() : e - i + n < vd));
        if (-1 === Cd && Ed.length) {
            let t = e - i;
            Td(Math.max(Sd - t, 4));
        }
    }
    function Pd(t) {
        let i;
        try {
            i = t.Kze();
        } catch (i) {
            return void t.reject(i);
        }
        t.resolve(i);
    }
    let Gd = bd.E4s.ZRs("disable-asyncify");
    Gd &&
        (() => {})(
            "[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."
        ),
        (bd.Roe = function (t) {
            let i = null;
            return (
                bd.Xr && (i = bd.BRe()),
                new Promise((e, s) => {
                    Ed.push({ Kze: t, resolve: e, reject: s, stack: i }), Gd ? Pd(Ed.pop()) : -1 === Cd && Td(Sd);
                })
            );
        }),
        (bd.Roe.ZAt = function (t) {
            if (t) ++_d;
            else if ((--_d, _d < 0)) throw new Error("already turned off high throughput mode");
        });
}
{
    const Ad = self.t;
    let Rd = null,
        kd = !1;
    function Od() {
        Rd && (kd = !Rd.charging);
    }
    navigator.getBattery &&
        navigator.getBattery().then((t) => {
            (Rd = t), Od(), t.addEventListener("chargingchange", Od);
        }),
        (Ad.eVe = class {
            constructor() {
                throw new Error("static class");
            }
            static sVe() {
                return kd;
            }
        });
}
{
    const Dd = self.t;
    (Dd.Xa = class t {
        constructor(t) {
            Dd.kDt(t), (this.nVe = !1), (this.rVe = t);
        }
        Ua() {
            this.nVe || ((this.nVe = !0), this.rVe && (this.rVe(), (this.rVe = null)));
        }
        hVe() {
            return this.nVe;
        }
        Ut() {
            this.Ua();
        }
        static Ut(i) {
            return new t(() => i.Ut());
        }
        static Wa(t, i, e, s, n) {
            if ("string" != typeof i && !Array.isArray(i)) throw new TypeError("expected string or array");
            if ((Dd.yp(e), null == s)) s = !1;
            else if ("boolean" != typeof s && "object" != typeof s)
                throw new TypeError("invalid event listener options");
            if ((n && (e = e.bind(n)), Array.isArray(i) || i.includes(" "))) {
                "string" == typeof i && (i = i.split(" "));
                const n = new Dd.Ha();
                for (const r of i)
                    Dd.vu(r), t.addEventListener(r, e, s), n.BD(Dd.m(Dd.Xa, () => t.removeEventListener(r, e, s)));
                return n;
            }
            return t.addEventListener(i, e, s), Dd.m(Dd.Xa, () => t.removeEventListener(i, e, s));
        }
    }),
        (Dd.ebe = class extends Dd.Xa {
            oVe(t) {
                Dd.yp(t), (this.rVe = t);
            }
        }),
        (Dd.Ha = class extends Dd.Xa {
            constructor(...t) {
                super(), (this._a = new Set());
                for (let i of t) this.BD(i);
            }
            BD(...t) {
                if ((Dd.HZ(t, Dd.Xa), this.nVe)) throw new Error("already disposed");
                for (let i of t) this._a.add(i);
            }
            zb(t) {
                if ((Dd.Et(t, Dd.Xa), this.nVe)) throw new Error("already disposed");
                this._a.delete(t);
            }
            Dlt() {
                if (this.nVe) throw new Error("already disposed");
                if (this._a) {
                    for (let t of this._a) t.Ua();
                    this._a.clear();
                }
            }
            hVe() {
                return this.nVe;
            }
            Ua() {
                if (this.nVe) throw new Error("already disposed");
                this.nVe = !0;
                for (let t of this._a) t.Ua();
                this._a.clear(), (this._a = null);
            }
            Ut() {
                this.Ua();
            }
        });
}
{
    const Fd = Symbol("OK"),
        Ld = Symbol("ERR");
    class Bd {
        constructor(t, i) {
            if (t !== Fd && t !== Ld) throw new Error("Invalid result type");
            (this.Osi = t), (this.Fvs = i);
        }
        aVe() {
            return this.Osi === Fd;
        }
        lVe() {
            return this.Osi === Ld;
        }
        uVe() {
            if (this.lVe()) throw new Error(this.Fvs);
            return this.Fvs;
        }
        cVe() {
            if (this.aVe()) throw new Error(this.Fvs);
            return this.Fvs;
        }
        static dVe(t) {
            const i = t.filter((t) => t.lVe());
            return 0 === i.length ? Bd.Ok(t.map((t) => t.Fvs)) : Bd.fVe(i.map((t) => t.Fvs));
        }
        static pVe(t, i) {
            return t ? Bd.Ok(t) : Bd.fVe(i);
        }
        static Ok(t) {
            return new Bd(Fd, t);
        }
        static fVe(t) {
            return new Bd(Ld, t);
        }
    }
    self.mVe = Bd;
}
{
    const Ud = self.t,
        Nd = 1e3,
        jd = 100;
    let $d = -1;
    function zd() {
        $d = -1;
    }
    Ud.wVe = function () {
        return -1 === $d && (($d = Date.now()), self.setTimeout(zd, 16)), $d;
    };
    let Vd = -1,
        Wd = -1,
        Hd = new Set();
    function Kd() {
        (Vd = -1), (Wd = -1);
        let t = Date.now();
        for (let i of Hd)
            if (i.gVe(t)) {
                let t = i.yVe();
                (-1 === Wd || t < Wd) && (Wd = t);
            } else Hd.delete(i);
        if (-1 !== Wd) {
            let i = Math.max(Wd - t + jd, Nd);
            Vd = self.setTimeout(Kd, i);
        }
    }
    Ud.oG = class {
        constructor(t, i) {
            Ud.yp(t), Ud.wi(i), (this.s0s = t), (this._c = 1e3 * i), (this.bVe = 0), (this.Zu = !1);
        }
        fm() {
            let t = Ud.wVe();
            (this.bVe = t + this._c),
                this.Zu || (Hd.add(this), (this.Zu = !0)),
                -1 === Vd
                    ? ((Wd = this.bVe), (Vd = self.setTimeout(Kd, this._c + jd)))
                    : this.bVe < Wd &&
                      Wd > t + Nd &&
                      (self.clearTimeout(Vd), (Wd = this.bVe), (Vd = self.setTimeout(Kd, this._c + jd)));
        }
        gVe(t) {
            return !(t >= this.bVe) || (this.s0s() ? ((this.bVe = t + this._c), !0) : ((this.Zu = !1), !1));
        }
        yVe() {
            return this.bVe;
        }
        jo() {
            this.Zu &&
                (Hd.delete(this),
                (this.Zu = !1),
                0 === Hd.size && -1 !== Vd && (self.clearTimeout(Vd), (Vd = -1), (Wd = -1)));
        }
        Ut() {
            this.jo(), (this.s0s = null);
        }
    };
}
{
    const qd = self.t;
    let Xd = new Map(),
        Yd = 0,
        Jd = -1;
    function Zd() {
        Jd = -1;
        let t = performance.now() - Yd;
        for (let i of Xd.values()) i.frameCount++, i.vVe.push(t);
        Xd.size > 0 && Qd();
    }
    function Qd() {
        -1 === Jd && ((Jd = requestAnimationFrame(Zd)), (Yd = performance.now()));
    }
    qd.SVe = class {
        constructor(t) {
            if ((qd.vu(t), Xd.has(t))) throw new Error("label in use");
            (this.eut = t), Xd.set(t, { startTime: performance.now(), frameCount: 0, vVe: [] }), Qd();
        }
        pze() {
            let t = Xd.get(this.eut);
            Xd.delete(this.eut);
            let i = performance.now() - t.startTime,
                e = -1,
                s = -1;
            for (let i of t.vVe) i > e && (e = i);
            if (t.vVe.length >= 3) {
                t.vVe.pop(), t.vVe.shift();
                for (let i of t.vVe) i > s && (s = i);
            }
            console.log(
                `[JankMeasurement] '${this.eut}' ended. Duration: ${Math.round(10 * i) / 10} ms, frame count: ${t.frameCount}, max dt: ${Math.round(10 * e) / 10}ms, max dt exclusive: ${Math.round(10 * s) / 10}ms`
            );
        }
    };
}
{
    const tf = self.t,
        ef = 1,
        sf = 2,
        nf = 4,
        rf = 8,
        hf = 16,
        of = 32;
    let af = null,
        lf = new Map();
    function uf() {
        return af;
    }
    function cf(t, i, e, s) {
        let n = new tf.MimeType(t, i, e, s);
        lf.set(t, n);
    }
    (tf.MimeType = class {
        constructor(t, i, e, s) {
            if ((tf.vu(t), tf.k$(e), tf.HI(s), !t)) throw new Error("invalid MIME type");
            if (
                ((this.xVe = t),
                (this.MVe = t.split("/")[0]),
                (this.EVe = []),
                (this.CVe = e || t),
                (this._Ve = !1),
                (this.TVe = !1),
                (this.IVe = !1),
                (this.PVe = !1),
                (this.GVe = !1),
                (this.AVe = !1),
                "string" == typeof i)
            )
                this.EVe.push(i);
            else {
                if (!Array.isArray(i)) throw new TypeError("expected string or array");
                this.EVe = i;
            }
            "number" == typeof s &&
                ((this._Ve = !!(s & ef)),
                (this.TVe = !!(s & sf)),
                (this.IVe = !!(s & nf)),
                (this.PVe = !!(s & rf)),
                (this.GVe = !!(s & hf)),
                (this.AVe = !!(s & of)));
        }
        GN() {
            return this.xVe;
        }
        yps() {
            return this.MVe;
        }
        bps() {
            return this.EVe;
        }
        ZIs() {
            return this.CVe;
        }
        yVt() {
            return this._Ve;
        }
        IN() {
            return this.TVe || "text" === this.yps();
        }
        tBe() {
            return this.PVe;
        }
        $F() {
            return this.IVe;
        }
        _le() {
            return "text/html" === this.xVe;
        }
        Rle() {
            return "text/css" === this.xVe;
        }
        vVt() {
            return "image/svg+xml" === this.xVe;
        }
        IVt() {
            return "text/csv" === this.xVe || "text/tab-separated-values" === this.xVe;
        }
        PVt() {
            return "text/xml" === this.xVe;
        }
        KN() {
            return "application/json" === this.xVe;
        }
        TVt() {
            return "application/pdf" === this.xVe;
        }
        HN() {
            return "application/javascript" === this.xVe || "text/javascript" === this.xVe;
        }
        NN() {
            return "application/typescript" === this.xVe || "text/typescript" === this.xVe;
        }
        YLe() {
            return this.GVe;
        }
        RVe() {
            this.AVe;
        }
        static Ke(t) {
            return tf.vu(t), lf.get(t) || uf();
        }
        static xEs(t) {
            tf.Et(t, Blob);
            const i = t.name ? tf.sl(t.name).slice(1) : "",
                e = t.type;
            if (!i) return e ? tf.MimeType.Ke(e) : uf();
            if (!e) return tf.MimeType.DVt(i);
            for (let t of lf.values()) if (t.GN() === e) for (let e of t.bps()) if (e === i) return t;
            return tf.MimeType.DVt(i);
        }
        static Pjt(t) {
            return tf.MimeType.DVt(t).GN();
        }
        static DVt(t, i) {
            tf.vu(t), tf.k$(i), t.length && "." === t[0] && (t = t.substr(1)), (t = t.toLowerCase());
            const e = [];
            for (const i of lf.values()) for (const s of i.bps()) s === t && e.push(i);
            if (!e.length) return uf();
            if (1 === e.length || !i) return e[0];
            for (const t of e) if (t.GN().toLowerCase().includes(i.toLowerCase())) return t;
            return e[0];
        }
        static qLe(t, i) {
            return (
                tf.VNt(t),
                tf.k$(i),
                t.type && tf.tet(t.type) ? t.type.split(";")[0].trim() : tf.MimeType.DVt(tf.sl(t.name), i).GN()
            );
        }
    }),
        (af = new tf.MimeType("application/octet-stream", [], "Binary")),
        cf("text/html", ["html", "htm"], "HTML", hf),
        cf("application/javascript", "js", "JavaScript", sf),
        cf("text/javascript", "js", "JavaScript", sf),
        cf("application/typescript", "ts", "TypeScript", sf),
        cf("text/typescript", "ts", "TypeScript", sf),
        cf("text/css", "css", "CSS", hf),
        cf("application/json", ["json", "scon"], "JSON", sf | hf),
        cf("text/xml", ["xml", "scml"], "XML", hf),
        cf("text/csv", "csv", "CSV", hf),
        cf("text/tab-separated-values", "tsv", "Tab-separated values", hf),
        cf("text/plain", "txt", "Text", hf),
        cf("text/markdown", "md", "Markdown", hf),
        cf("text/x-ini", "ini", "INI configuration file", hf),
        cf("image/png", "png", "PNG", ef | rf),
        cf("image/apng", "apng", "APNG", ef | rf),
        cf("image/jpeg", ["jpg", "jpeg"], "JPEG", ef),
        cf("image/jxl", "jxl", "JPEG XL", ef),
        cf("image/svg+xml", "svg", "SVG", sf | hf),
        cf("image/webp", "webp", "WebP", ef | rf),
        cf("image/gif", "gif", "GIF", ef | rf),
        cf("image/tiff", ["tif", "tiff"], "TIFF"),
        cf("image/bmp", "bmp", "Bitmap"),
        cf("image/x-icon", "ico", "Icon"),
        cf("image/avif", ["avif", "avifs"], "AVIF", ef | rf),
        cf("audio/ogg; codecs=opus", "opus", "Ogg Opus", ef),
        cf("audio/ogg; codecs=vorbis", "ogg", "Ogg Vorbis", ef),
        cf("audio/webm; codecs=opus", "webm", "WebM Opus", ef),
        cf("audio/mp4", "m4a", "MPEG-4 AAC", ef),
        cf("audio/wav", "wav", "WAV"),
        cf("audio/flac", "flac", "FLAC", ef),
        cf("audio/mpeg", "mp3", "MP3", ef),
        cf("audio/midi", ["mid", "midi", "kar"], "MIDI"),
        cf("video/webm", "webm", "WebM", ef),
        cf("video/ogg", "ogv", "Ogg video", ef),
        cf("video/mp4", "mp4", "MPEG-4 video", ef),
        cf("video/mpeg", ["mpg", "mpeg"], "MPEG video", ef),
        cf("video/quicktime", ["mov", "qt"], "Quicktime movie", ef),
        cf("video/avi", "avi", "AVI"),
        cf("application/font-woff", "woff", "Web font", nf | ef),
        cf("font/woff2", "woff2", "Web font", nf | ef),
        cf("application/font-sfnt", ["ttf", "otf"], "TrueType/OpenType font", nf),
        cf("application/vnd.ms-fontobject", "eot", "Embedded OpenType", nf),
        cf("application/pdf", "pdf", "PDF", hf),
        cf("application/zip", ["zip", "c3p", "capx"], "ZIP", ef | hf),
        cf("application/wasm", "wasm", "WebAssembly", hf),
        cf("application/wast", "wast", "WebAssembly Text format", sf | hf),
        cf("application/octet-stream", "mem", "asm.js memory", hf),
        cf("application/x-construct3-addon", "c3addon", "Construct addon", ef | of),
        cf("application/x-construct2-addon", "c2addon", "Construct 2 addon", ef | of);
}
{
    const df = self.t;
    df.pNt = class {
        constructor(t = df.hardwareConcurrency) {
            df.wi(t), (this.kVe = t), (this.OVe = []), (this.DVe = 0);
        }
        BD(t, i) {
            return (
                df.yp(t),
                new Promise((e, s) => {
                    const n = { Kze: t, resolve: e, reject: s, FVe: i };
                    i?.signal && i.signal.aborted
                        ? s(new Error("abort"))
                        : (i?.signal &&
                              ((n.onabort = () => {
                                  const t = this.OVe.indexOf(n);
                                  -1 !== t && (this.OVe.splice(t, 1), s(new Error("abort")));
                              }),
                              i.signal.addEventListener("abort", n.onabort)),
                          this.OVe.push(n),
                          this.LVe());
                })
            );
        }
        BVe(t) {
            df.yp(t);
            for (let i = 0, e = this.OVe.length; i < e; ++i) if (this.OVe[i].Kze === t) return i;
            return -1;
        }
        UVe(t, i) {
            df.yp(t);
            const e = this.BVe(t);
            if (-1 === e) throw new Error("cannot find promise to resolve");
            this.OVe[e].resolve(i), this.OVe.splice(e, 1);
        }
        NVe(t, i) {
            df.yp(t);
            const e = this.BVe(t);
            if (-1 === e) throw new Error("cannot find promise to reject");
            this.OVe[e].reject(i), this.OVe.splice(e, 1);
        }
        async LVe() {
            if (!this.OVe.length) return;
            if (this.DVe >= this.kVe) return;
            this.DVe++;
            const t = this.OVe.shift();
            t.FVe?.signal && t.onabort && t.FVe.signal.removeEventListener("abort", t.onabort);
            try {
                const i = await t.Kze();
                t.resolve(i);
            } catch (i) {
                t.reject(i);
            }
            this.DVe--, this.LVe();
        }
    };
}
{
    const ff = self.t;
    ff.kj = class {
        constructor(t, i, e) {
            ff.yp(t),
                ff.wi(i),
                ff.HI(e),
                (this.s0s = t),
                (this.jVe = i),
                (this.$Ve = e || 2 * i),
                (this.zVe = -1),
                (this.VVe = -1 / 0),
                (this.WVe = () => this.HVe()),
                (this.KVe = !1),
                (this.qVe = !1),
                (this.XVe = null);
        }
        XA(t) {
            this.qVe = !!t;
        }
        YVe() {
            return void 0 !== ff.eVe && ff.eVe.sVe() ? this.$Ve : this.jVe;
        }
        uE(...t) {
            if (-1 !== this.zVe) return;
            this.XVe = t;
            let i = ff.wVe(),
                e = i - this.VVe,
                s = this.YVe();
            e >= s && this.qVe
                ? ((this.VVe = i), this.JVe())
                : (this.zVe = self.setTimeout(this.WVe, Math.max(s - e, 4)));
        }
        JVe() {
            this.KVe = !0;
            const t = this.XVe;
            (this.XVe = null), t ? this.s0s(...t) : this.s0s(), (this.KVe = !1);
        }
        fm() {
            this.KVe || (this.ZVe(), (this.XVe = null), (this.VVe = ff.wVe()));
        }
        HVe() {
            (this.zVe = -1), (this.VVe = ff.wVe()), this.JVe();
        }
        ZVe() {
            -1 !== this.zVe && (self.clearTimeout(this.zVe), (this.zVe = -1));
        }
        Ut() {
            this.ZVe(), (this.s0s = null), (this.XVe = null), (this.WVe = null);
        }
    };
}
{
    const pf = self.t;
    (pf.BM = {}),
        (pf.BM.Document = class {
            constructor() {
                (this.vbi = null), (this.Aqt = null);
            }
            static g5t(t) {
                return pf.vu(t), new pf.BM.Document().QVe(t);
            }
            static i4t(t) {
                return new Promise((i, e) => {
                    let s = new FileReader();
                    (s.onload = (t) => pf.BM.Document.g5t(t.target.result).then(i)), s.readAsText(t);
                });
            }
            QVe(t, i) {
                return (
                    pf.vu(t),
                    pf.k$(i),
                    pf.Roe(() => {
                        const e = new DOMParser();
                        return (
                            (this.vbi = e.parseFromString(t, i || "text/xml")),
                            (this.Aqt = new pf.BM.Element(this.vbi.documentElement, this.vbi)),
                            this
                        );
                    })
                );
            }
            CF() {
                return this.vbi;
            }
            YM() {
                return this.Aqt;
            }
            x5t() {
                return new Blob([this.tWe(!0)], { type: "text/xml" });
            }
            xSe() {
                return new XMLSerializer().serializeToString(this.vbi);
            }
            tWe(t) {
                t = !!t;
                let i = "",
                    e = 0,
                    s = this.xSe().replace(/(>)(<)(\/*)/g, "$1\r\n$2$3");
                for (let t of s.split("\r\n")) {
                    let s = 0;
                    t.match(/.+<\/\w[^>]*>$/)
                        ? (s = 0)
                        : t.match(/^<\/\w/)
                          ? 0 !== e && (e -= 1)
                          : (s = t.match(/^<\w[^>]*[^\/]>.*$/) ? 1 : 0);
                    let n = "";
                    for (let t = 0; t < e; t++) n += "\t";
                    (i += n + t + "\r\n"), (e += s);
                }
                if (t) {
                    let t = '<?xml version="1.0" encoding="utf-8" ?>\n';
                    t += i;
                }
                return i;
            }
            b5s(t, i, e) {
                if ((pf.Gct(t), pf.Gct(i), e || (e = this.vbi), this.Tas(e, i)))
                    e.replaceChild(t, i), this.Aqt.iWe(), this.Aqt.eWe();
                else for (const s of e.children) this.b5s(t, i, s);
            }
            Tas(t, i) {
                pf.Gct(i);
                for (const e of t.children) if (e === i) return !0;
                return !1;
            }
        }),
        (pf.BM.Element = class {
            constructor(t, i) {
                (this.mht = t), (this.sWe = null), (this.vbi = i);
            }
            ASe() {
                return this.mht;
            }
            iWe() {
                this.sWe = null;
            }
            eWe() {
                if (!this.sWe) {
                    this.sWe = new Map();
                    for (let t = 0, i = this.mht.children.length; t < i; ++t) this.nWe(this.mht.children[t]);
                }
            }
            nWe(t) {
                self.assert(this.sWe, "missing child cache");
                let i = t.tagName.toLowerCase(),
                    e = this.sWe.get(i);
                e ? -1 === e.indexOf(t) && e.push(t) : this.sWe.set(i, [t]);
            }
            Nrs() {
                return this.mht.tagName;
            }
            *children(t) {
                if ((pf.k$(t), t)) {
                    this.eWe();
                    let i = this.sWe.get(t.toLowerCase());
                    if (!i) return;
                    for (let t = 0, e = i.length; t < e; ++t) yield new pf.BM.Element(i[t], this.vbi);
                } else for (let t of this.mht.children) yield new pf.BM.Element(t, this.vbi);
            }
            In(t) {
                pf.vu(t), (this.mht.textContent = t);
            }
            E_(t) {
                return pf.k$(t), t ? this.qM(t).E_() : this.mht.textContent;
            }
            Ahi(t, i) {
                pf.vu(t), pf.k$(i);
                let e = this.Drs(t);
                return e ? e.E_() : i || "";
            }
            LSs(t) {
                return pf.k$(t), t ? this.qM(t).LSs() : parseInt(this.E_(), 10);
            }
            O$s(t, i) {
                pf.vu(t), pf.HI(i);
                let e = this.Drs(t);
                return e ? e.LSs() : Math.floor(i || 0);
            }
            DSs(t) {
                return pf.k$(t), t ? this.qM(t).DSs() : parseFloat(this.E_());
            }
            USs(t, i) {
                pf.vu(t), pf.P5(i);
                let e = this.Drs(t);
                return e ? e.DSs() : i || 0;
            }
            F$s(t) {
                if ((pf.k$(t), t)) return this.qM(t).F$s();
                {
                    let t = this.E_().toLowerCase();
                    return !("false" === t || "no" === t || "0" === t);
                }
            }
            qLs(t, i) {
                pf.vu(t);
                let e = this.Drs(t);
                return e ? e.F$s() : !!i;
            }
            Yns(t) {
                return pf.vu(t), this.mht.hasAttribute(t);
            }
            y5t(t, i) {
                return pf.vu(t), pf.vu(i), this.mht.setAttribute(t, i);
            }
            s4t(t) {
                return pf.vu(t), this.mht.getAttribute(t) || "";
            }
            $M(t) {
                return pf.vu(t), parseInt(this.s4t(t), 10);
            }
            qns(t) {
                return pf.vu(t), parseFloat(this.s4t(t));
            }
            zcs(t) {
                pf.vu(t);
                let i = this.s4t(t).toLowerCase();
                return !("false" === i || "no" === i || "0" === i || "" === i);
            }
            mB(t) {
                pf.vu(t);
                let i = this.vbi.createElement(t);
                return this.mht.appendChild(i), this.sWe ? this.nWe(i) : this.eWe(), this.qM(t);
            }
            qM(t) {
                pf.vu(t), this.eWe();
                let i = this.sWe.get(t.toLowerCase());
                if (!i || !i.length) throw new Error(`expected a child with tag name '${t}'`);
                if (i.length > 1) throw new Error(`expected only one child with tag name '${t}'`);
                return new pf.BM.Element(i[0], this.vbi);
            }
            Drs(t) {
                pf.vu(t), this.eWe();
                let i = this.sWe.get(t.toLowerCase());
                return i && 1 === i.length ? new pf.BM.Element(i[0], this.vbi) : null;
            }
            Tas(t) {
                pf.vu(t), this.eWe();
                let i = this.sWe.get(t.toLowerCase());
                return i && 1 === i.length;
            }
        });
}
{
    const mf = self.t;
    let wf = class {
        constructor(t, i, e, s) {
            if ((mf.vu(t), mf.wi(i), !mf.Xl(e) && !mf.YF(e, ArrayBuffer))) throw new Error("unsupported data");
            (this.rWe = t), (this.hWe = i), (this.psi = e), (this.oWe = !!s);
        }
        aWe() {
            return this.rWe;
        }
        lWe() {
            return this.hWe;
        }
        k7t() {
            return this.psi;
        }
        uWe() {
            return this.oWe;
        }
    };
    mf.DataView = class {
        constructor(t) {
            mf.qm(t, ArrayBuffer),
                (this.cWe = null),
                (this.dWe = []),
                t && (this.cWe = new DataView(t)),
                (this.fWe = 0),
                (this.pWe = 0);
        }
        x5t() {
            return new Blob([this.mWe()]);
        }
        wWe() {
            if (!this.cWe) throw new Error("missing DataView");
            return this.cWe;
        }
        mWe() {
            if (!this.cWe) throw new Error("missing DataView");
            return this.cWe.buffer;
        }
        gWe() {
            this.pWe = 0;
        }
        Ut() {
            (this.cWe = null), (this.dWe = null);
        }
        w2i() {
            if (this.cWe) throw new Error("data already commited");
            let t = 0;
            for (let i of this.dWe) t += i.lWe();
            this.cWe = new DataView(new ArrayBuffer(t));
            for (let t of this.dWe) {
                switch (t.aWe()) {
                    case "setInt8":
                        this.cWe.setInt8(this.fWe, t.k7t());
                        break;
                    case "setUint8":
                        this.cWe.setUint8(this.fWe, t.k7t());
                        break;
                    case "setInt16":
                        this.cWe.setInt16(this.fWe, t.k7t(), t.uWe());
                        break;
                    case "setUint16":
                        this.cWe.setUint16(this.fWe, t.k7t(), t.uWe());
                        break;
                    case "setInt32":
                        this.cWe.setInt32(this.fWe, t.k7t(), t.uWe());
                        break;
                    case "setUint32":
                        this.cWe.setUint32(this.fWe, t.k7t(), t.uWe());
                        break;
                    case "setFloat32":
                        this.cWe.setFloat32(this.fWe, t.k7t(), t.uWe());
                        break;
                    case "setFloat64":
                        this.cWe.setFloat64(this.fWe, t.k7t(), t.uWe());
                        break;
                    case "setArrayBuffer":
                        let i = new Uint8Array(this.cWe.buffer),
                            e = new Uint8Array(t.k7t());
                        i.set(e, this.fWe), (this.cWe = new DataView(i.buffer));
                }
                this.fWe += t.lWe();
            }
            this.dWe = null;
        }
        t4t(t) {
            let i = this.N5i("raw");
            return t || (t = {}), t.type || (t.type = "application/octet-stream"), new Blob([i], t);
        }
        p2i(t) {
            mf.Et(t, ArrayBuffer), this.E3i(t.byteLength), this.dWe.push(new wf("setArrayBuffer", t.byteLength, t));
        }
        N5i(t) {
            switch ((mf.vu(t), t)) {
                case "int8":
                    return this.yWe();
                case "uint8":
                    return this.bWe();
                case "clampedUint8":
                    return this.vWe();
                case "int16":
                    return this.SWe();
                case "uint16":
                    return this.xWe();
                case "int32":
                    return this.E2i();
                case "uint32":
                    return this.MWe();
                case "float32":
                    return this.EWe();
                case "float64":
                    return this.j2i();
                case "raw":
                    return this.bWe().buffer;
                default:
                    throw new Error(
                        "unsupported return type. supported types are 'int8, uint8, clampedUint8, int16, uint16, int32, uint32, float32, float64, raw'"
                    );
            }
        }
        CWe(t, i) {
            this.O3i(JSON.stringify(t));
        }
        _We(t) {
            return JSON.parse(this.M3i(t));
        }
        O3i(t, i) {
            mf.vu(t);
            let e = Array.prototype.map.call(t, (i, e) => t.charCodeAt(e));
            this.TWe(e, i);
        }
        M3i(t) {
            return Array.prototype.map.call(this.xWe(t), (t) => String.fromCharCode(t)).join("");
        }
        m2i(t) {
            this._3i(t ? 1 : 0);
        }
        g2i() {
            return !!this.A3i();
        }
        n3i(t) {
            if (this.cWe) throw new Error("data already commited");
            this.dWe.push(new wf("setInt8", Int8Array.BYTES_PER_ELEMENT, t));
        }
        _3i(t) {
            if (this.cWe) throw new Error("data already commited");
            this.dWe.push(new wf("setUint8", Uint8Array.BYTES_PER_ELEMENT, t));
        }
        B2i(t, i) {
            if (this.cWe) throw new Error("data already commited");
            this.dWe.push(new wf("setInt16", Int16Array.BYTES_PER_ELEMENT, t, !!i));
        }
        S2i(t, i) {
            if (this.cWe) throw new Error("data already commited");
            this.dWe.push(new wf("setUint16", Uint16Array.BYTES_PER_ELEMENT, t, !!i));
        }
        c5i(t, i) {
            if (this.cWe) throw new Error("data already commited");
            this.dWe.push(new wf("setInt32", Int32Array.BYTES_PER_ELEMENT, t, !!i));
        }
        E3i(t, i) {
            if (this.cWe) throw new Error("data already commited");
            this.dWe.push(new wf("setUint32", Uint32Array.BYTES_PER_ELEMENT, t, !!i));
        }
        v2i(t, i) {
            if (this.cWe) throw new Error("data already commited");
            this.dWe.push(new wf("setFloat32", Float32Array.BYTES_PER_ELEMENT, t, !!i));
        }
        IWe(t, i) {
            if (this.cWe) throw new Error("data already commited");
            this.dWe.push(new wf("setFloat64", Float64Array.BYTES_PER_ELEMENT, t, !!i));
        }
        PWe(t, i) {
            this.E3i(t.length, !!i), this.GWe(t, "setInt8");
        }
        AWe(t, i) {
            this.E3i(t.length, !!i), this.GWe(t, "setUint8");
        }
        RWe(t, i) {
            this.E3i(t.length, !!i), this.GWe(t, "setInt16", !!i);
        }
        TWe(t, i) {
            this.E3i(t.length, !!i), this.GWe(t, "setUint16", !!i);
        }
        G2i(t, i) {
            this.E3i(t.length, !!i), this.GWe(t, "setInt32", !!i);
        }
        kWe(t, i) {
            this.E3i(t.length, !!i), this.GWe(t, "setUint32", !!i);
        }
        OWe(t, i) {
            this.E3i(t.length, !!i), this.GWe(t, "setFloat32", !!i);
        }
        M2i(t, i) {
            this.E3i(t.length, !!i), this.GWe(t, "setFloat64", !!i);
        }
        r3i() {
            let t = this.cWe.getInt8(this.pWe);
            return (this.pWe += Int8Array.BYTES_PER_ELEMENT), t;
        }
        A3i() {
            let t = this.cWe.getUint8(this.pWe);
            return (this.pWe += Uint8Array.BYTES_PER_ELEMENT), t;
        }
        $2i(t) {
            let i = this.cWe.getInt16(this.pWe, !!t);
            return (this.pWe += Int16Array.BYTES_PER_ELEMENT), i;
        }
        C2i(t) {
            let i = this.cWe.getUint16(this.pWe, !!t);
            return (this.pWe += Uint16Array.BYTES_PER_ELEMENT), i;
        }
        u5i(t) {
            let i = this.cWe.getInt32(this.pWe, !!t);
            return (this.pWe += Int32Array.BYTES_PER_ELEMENT), i;
        }
        x3i(t) {
            let i = this.cWe.getUint32(this.pWe, !!t);
            return (this.pWe += Uint32Array.BYTES_PER_ELEMENT), i;
        }
        I2i(t) {
            let i = this.cWe.getFloat32(this.pWe, !!t);
            return (this.pWe += Float32Array.BYTES_PER_ELEMENT), i;
        }
        DWe(t) {
            let i = this.cWe.getFloat64(this.pWe, !!t);
            return (this.pWe += Float64Array.BYTES_PER_ELEMENT), i;
        }
        yWe(t) {
            return this.FWe(this.x3i(!!t), "getInt8", Int8Array);
        }
        bWe(t) {
            return this.FWe(this.x3i(!!t), "getUint8", Uint8Array);
        }
        vWe(t) {
            return this.FWe(this.x3i(!!t), "getUint8", Uint8ClampedArray);
        }
        SWe(t) {
            return this.FWe(this.x3i(!!t), "getInt16", Int16Array, !!t);
        }
        xWe(t) {
            return this.FWe(this.x3i(!!t), "getUint16", Uint16Array, !!t);
        }
        E2i(t) {
            return this.FWe(this.x3i(!!t), "getInt32", Int32Array, !!t);
        }
        MWe(t) {
            return this.FWe(this.x3i(!!t), "getUint32", Uint32Array, !!t);
        }
        EWe(t) {
            return this.FWe(this.x3i(!!t), "getFloat32", Float32Array, !!t);
        }
        j2i(t) {
            return this.FWe(this.x3i(!!t), "getFloat64", Float64Array, !!t);
        }
        GWe(t, i, e) {
            let s = t.length;
            for (let n = 0; n < s; n++)
                "setInt8" !== i
                    ? "setUint8" !== i
                        ? "setInt16" !== i
                            ? "setUint16" !== i
                                ? "setInt32" !== i
                                    ? "setUint32" !== i
                                        ? "setFloat32" !== i
                                            ? "setFloat64" !== i ||
                                              this.dWe.push(new wf(i, Float64Array.BYTES_PER_ELEMENT, t[n], e))
                                            : this.dWe.push(new wf(i, Float32Array.BYTES_PER_ELEMENT, t[n], e))
                                        : this.dWe.push(new wf(i, Uint32Array.BYTES_PER_ELEMENT, t[n], e))
                                    : this.dWe.push(new wf(i, Int32Array.BYTES_PER_ELEMENT, t[n], e))
                                : this.dWe.push(new wf(i, Uint16Array.BYTES_PER_ELEMENT, t[n], e))
                            : this.dWe.push(new wf(i, Int16Array.BYTES_PER_ELEMENT, t[n], e))
                        : this.dWe.push(new wf(i, Uint8Array.BYTES_PER_ELEMENT, t[n], e))
                    : this.dWe.push(new wf(i, Int8Array.BYTES_PER_ELEMENT, t[n], e));
        }
        FWe(t, i, e, s) {
            let n = new e(t),
                r = e.BYTES_PER_ELEMENT;
            for (let e = 0; e < t; e++)
                "getInt8" !== i
                    ? "getUint8" !== i
                        ? "getInt16" !== i
                            ? "getUint16" !== i
                                ? "getInt32" !== i
                                    ? "getUint32" !== i
                                        ? "getFloat32" !== i
                                            ? "getFloat64" !== i || (n[e] = this.cWe.getFloat64(this.pWe + e * r, s))
                                            : (n[e] = this.cWe.getFloat32(this.pWe + e * r, s))
                                        : (n[e] = this.cWe.getUint32(this.pWe + e * r, s))
                                    : (n[e] = this.cWe.getInt32(this.pWe + e * r, s))
                                : (n[e] = this.cWe.getUint16(this.pWe + e * r, s))
                            : (n[e] = this.cWe.getInt16(this.pWe + e * r, s))
                        : (n[e] = this.cWe.getUint8(this.pWe + e * r, s))
                    : (n[e] = this.cWe.getInt8(this.pWe + e * r, s));
            return (this.pWe += t * r), n;
        }
    };
}
{
    const gf = self.t,
        yf = 60;
    gf.mCi = function (t, i, e) {
        if ((gf.Gct(t, "input"), gf.kDt(i), "number" !== t.type && "text" !== t.type))
            throw new TypeError(`unable to bind drag scroller to input, unsupported type ${t.type}`);
        let s = null,
            n = null,
            r = null,
            h = 0,
            o = !1,
            a = gf.m(gf.Ha),
            l = null,
            u = null,
            c = null,
            d = null;
        const f = (i) => {
                if (!o) return;
                const s = parseFloat(t.value);
                if (!gf.Xl(s)) return;
                if (s !== r) return p();
                const a = Math.round(h - i.clientY),
                    l = t.min ? parseFloat(t.min) : -1 / 0,
                    u = t.max ? parseFloat(t.max) : 1 / 0,
                    c = t.step ? parseFloat(t.step) : 1;
                i.preventDefault();
                let f = a * c;
                (f = e ? n - f : n + f), (r = gf.ft(f, l, u)), (t.value = r), t.select(), d.uE();
            },
            p = () => {
                (o = !1),
                    (n = null),
                    (h = 0),
                    gf.ti.OF.kF(s),
                    (s = null),
                    l && (l.Ua(), a.zb(l)),
                    (l = null),
                    u && (u.Ua(), a.zb(u)),
                    (u = null),
                    c && (c.Ua(), a.zb(c)),
                    (c = null);
            },
            m = (e) => {
                e.target !== t && e.preventDefault(), e.stopPropagation(), p();
                let s = new Event("change");
                t.dispatchEvent(s), i && i();
            },
            w = (t) => {
                p();
            };
        return (
            (d = gf.m(
                gf.kj,
                () => {
                    let i = new Event("input");
                    t.dispatchEvent(i);
                },
                yf
            )),
            a.BD(
                gf.Xa.Wa(t, "dragstart", (i) => {
                    o ||
                        (gf.Xl(parseFloat(t.value)) &&
                            (i.preventDefault(),
                            (o = !0),
                            (h = i.clientY),
                            (n = parseFloat(t.value)),
                            (r = n),
                            (s = gf.ti.OF.PF("ns-resize", t.ownerDocument, i.clientX, i.clientY)),
                            (l = gf.Xa.Wa(t.ownerDocument, "pointermove", f)),
                            (u = gf.Xa.Wa(t.ownerDocument, "pointerup", m)),
                            (c = gf.Xa.Wa(t.ownerDocument, "pointercancel", w)),
                            a.BD(l),
                            a.BD(u),
                            a.BD(c)));
                })
            ),
            a.BD(gf.Xa.Wa(t, "focus", () => t.select())),
            a.BD(
                gf.m(gf.Xa, () => {
                    (t = null),
                        (i = null),
                        (l = null),
                        (u = null),
                        (c = null),
                        (a = null),
                        gf.ti.OF.kF(s),
                        (s = null),
                        d.Ut();
                })
            ),
            a
        );
    };
}
{
    const bf = self.t,
        vf = { enabled: !0, LWe: !1 };
    bf.BWe = class {
        constructor(t, i, e) {
            bf.yp(t),
                bf.wi(i),
                bf.Crt(e),
                (e = Object.assign({}, vf, e)),
                (this.zVe = -1),
                (this.uli = "stopped"),
                (this.Wfs = i),
                (this.UWe = t),
                (this.NWe = () => this.JVe()),
                (this.jWe = !1),
                (this.$We = 0),
                (this.zWe = 0),
                (this.VWe = () => this.WWe()),
                (this.HWe = !!e.LWe),
                e.enabled && this.BV();
        }
        Ut() {
            this.XFs(), (this.UWe = null), (this.NWe = null), (this.VWe = null);
        }
        KWe() {
            return "stopped" !== this.uli;
        }
        YPs() {
            return "paused" === this.uli;
        }
        qWe(t) {
            (this.zVe = self.setTimeout(this.NWe, t)), (this.$We = Date.now());
        }
        XWe() {
            -1 !== this.zVe && (self.clearTimeout(this.zVe), (this.zVe = -1));
        }
        BV() {
            if (!this.KWe()) {
                if (
                    this.HWe &&
                    (document.addEventListener("visibilitychange", this.VWe), "hidden" === document.visibilityState)
                )
                    return (this.uli = "paused"), void (this.zWe = 0);
                (this.uli = "running"), this.jWe || ((this.zWe = 0), this.qWe(this.Wfs));
            }
        }
        XFs() {
            this.KWe() &&
                (this.HWe && document.removeEventListener("visibilitychange", this.VWe),
                this.XWe(),
                (this.uli = "stopped"));
        }
        qFs() {
            this.KWe() &&
                !this.YPs() &&
                ((this.uli = "paused"), this.jWe ? (this.zWe = 0) : ((this.zWe += Date.now() - this.$We), this.XWe()));
        }
        ZFs() {
            this.KWe() &&
                this.YPs() &&
                ((this.uli = "running"), this.jWe || this.qWe(bf.ft(this.Wfs - this.zWe, 1, this.Wfs)));
        }
        async JVe() {
            (this.zVe = -1),
                (this.zWe = 0),
                (this.jWe = !0),
                await this.UWe(),
                (this.jWe = !1),
                "running" === this.uli && this.qWe(this.Wfs);
        }
        Ids(t) {
            bf.wi(t), this.Wfs !== t && ((this.Wfs = t), "running" !== this.uli || this.jWe || (this.XFs(), this.BV()));
        }
        WWe() {
            "hidden" === document.visibilityState ? this.qFs() : this.ZFs();
        }
    };
}
{
    const Sf = self.t;
    Sf.Nht = function (t, i, e, s = null) {
        Sf.Gct(t), Sf.Gct(i), Sf.yp(e);
        let n = null,
            r = null,
            h = null,
            o = null,
            a = null,
            l = null,
            u = (e) =>
                (function () {
                    const e = i.getBoundingClientRect(),
                        s = t.getBoundingClientRect();
                    (n.style.left = `${s.left - e.left + i.scrollLeft}px`),
                        (n.style.top = `${s.top - e.top + i.scrollTop}px`);
                    const r = n.getBoundingClientRect();
                    (r.bottom > e.bottom + 1 || r.top < e.top - 1) && p();
                })();
        function c() {
            if (n) return Promise.resolve("");
            const c = s && s.Vht ? s.Vht : "tree-edit-text";
            if (
                ((n = Sf.ti.gj("input", i, null, c)),
                (n.type = "text"),
                n.setAttribute("spellcheck", "false"),
                s && s.position)
            )
                (n.style.left = `${s.position.x ?? 0}px`), (n.style.top = `${s.position.y ?? 0}px`);
            else {
                const e = i.getBoundingClientRect(),
                    s = t.getBoundingClientRect(),
                    r = s.left - e.left,
                    h = s.top - e.top + i.scrollTop;
                (n.type = "text"),
                    (n.style.left = `${r}px`),
                    (n.style.top = `${h}px`),
                    (n.style.width = `${Math.max(s.right - s.left, 30)}px`),
                    (n.style.maxWidth = `${Math.max(s.right - s.left, 30)}px`),
                    (n.style.height = s.bottom - s.top + "px");
            }
            return (
                (o = (t) => d()),
                n.addEventListener("blur", o),
                (a = (i) =>
                    (function () {
                        if (((t.textContent = n.value), !s?.position)) {
                            const i = t.getBoundingClientRect();
                            n.style.width = `${Math.max(i.right - i.left, 30)}px`;
                        }
                        t.textContent = ".";
                    })()),
                n.addEventListener("input", a),
                (l = (t) =>
                    (function (t) {
                        t.which === Sf.fO.o3
                            ? (t.preventDefault(), t.stopPropagation(), d())
                            : t.which === Sf.fO.oO && (t.preventDefault(), t.stopPropagation(), p());
                    })(t)),
                n.addEventListener("keydown", l, !0),
                i.addEventListener("scroll", u),
                (n.value = e()),
                n.focus(),
                (t.textContent = "."),
                new Promise((t, i) => {
                    (r = t), (h = i);
                })
            );
        }
        function d() {
            if (!n) return;
            let t = n.value;
            f(t), r && r(t), (r = null), (h = null);
        }
        function f(s = null) {
            n &&
                ((t.textContent = s || e()),
                i.removeEventListener("scroll", u, { passive: !0 }),
                n.removeEventListener("keydown", l, !0),
                (l = null),
                n.removeEventListener("input", a),
                (a = null),
                n.removeEventListener("blur", o),
                (o = null),
                Sf.ti.Tz(n),
                (n = null));
        }
        function p() {
            n && (f(), r && r(null), (r = null), (h = null));
        }
        return {
            Rlt: () => c(),
            YWe: () => {
                d();
            },
            Ut: () => {
                f(), (r = null), (h = null);
            },
        };
    };
}
{
    const xf = self.t;
    self.lang;
    xf.sTt = function (t, i, e = null) {
        xf.Gct(t), xf._T(i), xf.oN(e);
        let s = xf.ti.gj("div", t, null, "progressBarContainer"),
            n = xf.ti.gj("progress", s, null, "progressBarElement"),
            r = xf.ti.gj("div", s, null, "progressBarLabel");
        return (
            (r.textContent = e?.label ?? self.lang("common.loading-with-ellipsis")),
            {
                Xrt: () =>
                    (function () {
                        for (const t of i) (t.style.opacity = ""), (t.style.pointerEvents = "");
                        (s.style.display = "none"), e?.JWe && e?.JWe();
                    })(),
                eD: () =>
                    (function () {
                        for (const t of i) (t.style.opacity = "0.2"), (t.style.pointerEvents = "none");
                        (s.style.display = ""), e?.ZWe && e?.ZWe();
                    })(),
                eTt: () => {
                    t.appendChild(s);
                },
                Ut: () => (xf.ti.Tz(r), (r = null), xf.ti.Tz(n), (n = null), xf.ti.Tz(s), void (s = null)),
            }
        );
    };
}
{
    const Mf = self.t,
        Ef = new Map();
    function Cf(t, i) {
        if (!Array.isArray(t)) throw new TypeError("unexpected type");
        for (const e of t) Mf.nOe(e, i);
    }
    Mf.qJt = class {
        static QWe(t) {
            Mf.nOe(t, Element);
            const i = t.ownerDocument.createRange();
            return i.selectNodeContents(t), i;
        }
        static YJt(t) {
            Mf.nOe(t, Element);
            const i = this.tHe(t),
                e = this.QWe(t);
            return this.iHe(e, i), e;
        }
        static xve(t, i, e) {
            Mf.nOe(t, Element), Mf.wi(i), Mf.wi(e);
            const s = t.ownerDocument.createRange();
            let n = 0,
                r = null,
                h = !1;
            -1 == i && (i = 0), -1 == e && (e = 0);
            for (const o of this.eHe(t)) {
                const t = n;
                if (((n += o.textContent.length), n > i && !1 === h && (s.setStart(o, i - t), (h = !0)), n >= e))
                    return i === e && !1 === h && (s.setStart(o, e - t), (h = !0)), s.setEnd(o, e - t), s;
                r = o;
            }
            if (r) {
                const t = r.length;
                s.setStart(r, t), s.setEnd(r, t);
            } else s.setStart(t, 0), s.setEnd(t, 0);
            return s;
        }
        static BJt(t, i, e) {
            Mf.nOe(t, Element), Mf.wi(i), Mf.wi(e);
            const s = this.tHe(t),
                n = this.xve(t, i, e);
            return this.iHe(n, s), n;
        }
        static iHe(t, i) {
            Mf.nOe(i, Window), Mf.nOe(t, Range);
            const e = i.getSelection();
            e.removeAllRanges(), e.addRange(t);
        }
        static Pot(t) {
            Mf.nOe(t, Window);
            t.getSelection().removeAllRanges();
        }
        static sHe(t, i) {
            Mf.nOe(i, Window), Mf.nOe(t, Range);
            i.getSelection().addRange(t);
        }
        static nHe(t, i) {
            Mf.nOe(i, Window), Mf.nOe(t, Range);
            i.getSelection().removeRange(t);
        }
        static rHe(t) {
            Mf.nOe(t, Window);
            return t.getSelection().rangeCount;
        }
        static eQ(t) {
            Mf.nOe(t, Window);
            const i = t.getSelection(),
                e = i.rangeCount > 0 && i.getRangeAt(0);
            return e && !1 === e.collapsed;
        }
        static hHe(t) {
            Mf.nOe(t, Window);
            const i = t.getSelection();
            return 1 === i.rangeCount ? i.getRangeAt(0) : null;
        }
        static Cve(t) {
            Mf.nOe(t, Window);
            const i = this.hHe(t);
            return i ? i.getBoundingClientRect() : null;
        }
        static Ive(t) {
            Mf.nOe(t, Element);
            const i = this.tHe(t),
                e = this.hHe(i);
            return e ? this.oHe(t, e) : null;
        }
        static oHe(t, i) {
            Mf.nOe(t, Element), Mf.nOe(i, Range);
            const e = { start: -1, end: -1 };
            let s = 0;
            for (const n of this.aHe(t)) {
                if ((n === i.startContainer && (e.start = s + this.lHe(n, i.startOffset)), n === i.endContainer)) {
                    e.end = s + this.lHe(n, i.endOffset);
                    break;
                }
                if (n.nodeType === Node.TEXT_NODE) {
                    s += n.textContent.length;
                }
            }
            return e;
        }
        static uHe(t, i) {
            Mf.nOe(t, Element), Mf.nOe(i, Range);
            let e = i.commonAncestorContainer;
            do {
                if (t == e) return !0;
            } while ((e = e.parentNode));
            return !1;
        }
        static gve(t) {
            Mf.nOe(t, Element);
            const i = this.tHe(t).getSelection(),
                e = i.rangeCount;
            if (0 === e) return null;
            const s = [];
            for (let n = 0; n < e; n++) {
                const e = i.getRangeAt(n);
                this.uHe(t, e) && s.push(this.oHe(t, e));
            }
            return { lJ: t, cHe: s };
        }
        static bve(t, i) {
            Mf.nOe(t, Element), Mf.nOe(i, Object);
            const e = this.tHe(t);
            if (null === i) return;
            const s = e.getSelection(),
                n = i.cHe;
            s.removeAllRanges();
            for (const i of n) {
                const { start: e, end: n } = i,
                    r = this.xve(t, e, n);
                s.addRange(r);
            }
        }
        static *eHe(t) {
            Mf.nOe(t, Element);
            for (const i of t.childNodes)
                switch (i.nodeType) {
                    case Node.TEXT_NODE:
                        yield i;
                        break;
                    case Node.ELEMENT_NODE:
                        yield* this.eHe(i);
                }
        }
        static *aHe(t) {
            Mf.nOe(t, Element), yield t;
            for (const i of t.childNodes)
                switch (i.nodeType) {
                    case Node.TEXT_NODE:
                        yield i;
                        break;
                    case Node.ELEMENT_NODE:
                        yield* this.aHe(i);
                }
        }
        static lHe(t, i = 1 / 0) {
            if ((Mf.nOe(t, Node), Mf.PK(i), t.nodeType === Node.TEXT_NODE)) return Math.min(i, t.textContent.length);
            let e = 0;
            for (const s of this.eHe(t)) {
                if (i-- < 1) break;
                e += this.lHe(s);
            }
            return e;
        }
        static dHe(t, i) {
            Mf.nOe(t, Element), Mf.wi(i);
            let e = 0,
                s = 0,
                n = null;
            for (const r of this.eHe(t)) if (((s = e), (n = r), (e += r.textContent.length), e > i)) return [r, i - s];
            return e === i ? [n, i - s] : null;
        }
        static fHe(t) {
            Cf(t, Node);
            for (const i of t) {
                const t = i.parentNode,
                    e = t && t.parentNode;
                if (!e) continue;
                const s = i.ownerDocument.createDocumentFragment();
                for (const i of Array.from(t.childNodes)) s.appendChild(i);
                e.replaceChild(s, t), e.normalize();
            }
        }
        static pHe(t, i) {
            Mf.nOe(t, Range), Mf.vu(i);
            const e = this.mHe(t),
                s = new Set(),
                n = t.commonAncestorContainer;
            if (n.nodeType === Node.TEXT_NODE) {
                let i = n;
                t.startOffset > 0 && (i = i.splitText(t.startOffset)),
                    t.endOffset < i.textContent.length && i.splitText(t.endOffset),
                    s.add(i);
            } else {
                const { start: i, end: r } = this.oHe(n, t, e);
                let h = 0,
                    o = 0;
                const a = Array.from(this.eHe(n));
                for (const t of a) {
                    const e = h + t.textContent.length;
                    if (0 === o && e > i) {
                        if (i > h) {
                            const e = t.splitText(i - h);
                            s.add(e);
                        } else s.add(t);
                        o = 1;
                    }
                    if (1 === o && e >= r) {
                        if (e > r) {
                            t.splitText(r - h);
                            s.add(t);
                        } else s.add(t);
                        break;
                    }
                    h = e;
                }
            }
            for (const t of s) {
                const e = document.createElement("span");
                (e.className = i), t.parentNode.replaceChild(e, t), e.appendChild(t);
            }
            return Array.from(s);
        }
        static vve(t) {
            Mf.vu(t);
            let i = Ef.get(t);
            return i || ((i = new _f(t)), Ef.set(t, i)), i;
        }
        static mHe(t) {
            Mf.nOe(t, Range);
            const i = t.commonAncestorContainer;
            return (i.nodeType === Node.DOCUMENT_NODE ? i : i.ownerDocument).defaultView;
        }
        static tHe(t) {
            return Mf.nOe(t, Element), t.ownerDocument.defaultView;
        }
    };
    class _f {
        constructor(t) {
            Mf.vu(t), (this.wHe = new Map()), (this.gHe = new Map()), (this.className = t);
        }
        BD(t) {
            if ((Mf.nOe(t, Range), this.wHe.has(t))) return;
            const i = Mf.qJt.pHe(t, this.className);
            this.wHe.set(t, i);
        }
        zb(t) {
            Mf.nOe(t, Range);
            const i = this.wHe.get(t);
            i && (Mf.qJt.fHe(i), this.wHe.delete(t));
        }
        _x() {
            for (const t of this.wHe.keys()) this.zb(t);
        }
    }
}
{
    const Tf = self.t,
        If = (t) => {
            const i = t.target;
            if (!Gf.has(i)) return;
            const e = t.keyCode,
                s = i.min ? self.parseFloat(i.min) : -1 / 0,
                n = i.max ? self.parseFloat(i.max) : 1 / 0,
                r = i.step ? self.parseFloat(i.step) : 1;
            if (Tf.fO.Tdt(Tf.fO.V8, e)) {
                let e = self.parseFloat(i.value);
                Tf.Xl(e) &&
                    ((e += r),
                    (i.value = Tf.ft(e, s, n)),
                    i.dispatchEvent(new Event("input")),
                    t.preventDefault(),
                    Af.get(i).yHe || (Af.get(i).bHe = i.value),
                    (Af.get(i).yHe = !0));
            } else if (Tf.fO.Tdt(Tf.fO.K8, e)) {
                let e = self.parseFloat(i.value);
                Tf.Xl(e) &&
                    ((e -= r),
                    (i.value = Tf.ft(e, s, n)),
                    i.dispatchEvent(new Event("input")),
                    t.preventDefault(),
                    Af.get(i).yHe || (Af.get(i).bHe = i.value),
                    (Af.get(i).yHe = !0));
            }
        },
        Pf = (t) => {
            const i = t.target;
            if (!Gf.has(i)) return;
            const e = t.keyCode;
            i.min && self.parseFloat(i.min), i.max && self.parseFloat(i.max), i.step && self.parseFloat(i.step);
            if (Tf.fO.Tdt(Tf.fO.V8, e)) {
                const t = self.parseFloat(i.value);
                Af.get(i).yHe && Af.get(i).bHe !== t && i.dispatchEvent(new Event("change")),
                    (Af.get(i).yHe = !1),
                    (Af.get(i).bHe = NaN);
            } else if (Tf.fO.Tdt(Tf.fO.K8, e)) {
                const t = self.parseFloat(i.value);
                Af.get(i).yHe && Af.get(i).bHe !== t && i.dispatchEvent(new Event("change")),
                    (Af.get(i).yHe = !1),
                    (Af.get(i).bHe = NaN);
            }
        },
        Gf = new Set(),
        Af = new Map(),
        Rf = new Set();
    Tf.vHe = function (t) {
        if ((Tf.Gct(t, "input"), "text" !== t.type))
            throw new TypeError(`unable to bind keyboard handlers to input, unsupported type ${t.type}`);
        const i = t.ownerDocument;
        return (
            Rf.has(i) || (i.addEventListener("keydown", If, !0), i.addEventListener("keyup", Pf, !0), Rf.add(i)),
            Gf.add(t),
            Af.set(t, { yHe: !1, bHe: NaN }),
            {
                Ua: () => {
                    Gf.delete(t), Af.delete(t);
                },
                SHe() {
                    const i = t.ownerDocument;
                    Rf.has(i) ||
                        (i.addEventListener("keydown", If, !0), i.addEventListener("keyup", Pf, !0), Rf.add(i));
                },
            }
        );
    };
}
{
    const kf = self.t,
        Of = new Set([16, 32, 64, 128, 256, 512]),
        Df = new Map([
            [16, [1768124468, 0]],
            [32, [1768124469, 1768108337]],
            [64, [1768124470, 1768108338]],
            [128, [1768108087, 0]],
            [256, [1768108088, 1768108339]],
            [512, [1768108089, 1768108340]],
        ]);
    kf.xHe = async function (t) {
        let i = t.filter((t) => Of.has(t.width) && t.width === t.height);
        if (
            ((i = await Promise.all(i.map(async (t) => ({ arrayBuffer: await kf.iEs(t.blob), MHe: t.width })))),
            0 === i.length)
        )
            return null;
        let e = 8;
        for (const t of i) {
            e += (8 + t.arrayBuffer.byteLength) * (0 !== Df.get(t.MHe)[1] ? 2 : 1);
        }
        const s = new ArrayBuffer(e),
            n = new DataView(s),
            r = new Uint8Array(s);
        n.setUint32(0, 1768124019, !1), n.setUint32(4, e, !1);
        let h = 8;
        for (const t of i) {
            const i = Df.get(t.MHe),
                e = i[0],
                s = i[1];
            n.setUint32(h, e, !1),
                (h += 4),
                n.setUint32(h, t.arrayBuffer.byteLength + 8, !1),
                (h += 4),
                r.set(new Uint8Array(t.arrayBuffer), h),
                (h += t.arrayBuffer.byteLength),
                0 !== s &&
                    (n.setUint32(h, s, !1),
                    (h += 4),
                    n.setUint32(h, t.arrayBuffer.byteLength + 8, !1),
                    (h += 4),
                    r.set(new Uint8Array(t.arrayBuffer), h),
                    (h += t.arrayBuffer.byteLength));
        }
        return new Blob([s], { type: "application/octet-stream" });
    };
}
{
    const Ff = 1e3,
        Lf = 50;
    self.EHe = class {
        constructor() {
            (this.CHe = !1), (this.zVe = -1), (this._He = []), (this.THe = -1);
        }
        xPi() {
            if (this.CHe || navigator.userActivation) return;
            const t = { capture: !0, passive: !0 };
            window.addEventListener("pointerdown", () => this.IHe(), t),
                window.addEventListener("pointerup", () => this.IHe(), t),
                window.addEventListener("keydown", () => this.IHe(), t),
                window.addEventListener("keyup", () => this.IHe(), t),
                (this.CHe = !0);
        }
        IHe() {
            -1 !== this.zVe && self.clearTimeout(this.zVe), (this.THe = Date.now()), this.PHe();
        }
        PHe() {
            this.zVe = self.setTimeout(() => this.HVe(), Lf);
        }
        HVe() {
            if (((this.zVe = -1), this._He.length > 0)) {
                const t = this._He;
                this._He = [];
                for (const i of t) i();
            } else Date.now() < this.THe + Ff && this.PHe();
        }
        Ke(t) {
            -1 === this.zVe ? t() : this._He.push(t);
        }
        DOe(t) {
            return new Promise((i) => {
                this.Ke(() => {
                    i(t());
                });
            });
        }
    };
}
{
    const Bf = self.t,
        Uf = 1664311650,
        Nf = 1717856626,
        jf = 1651273570,
        $f = Bf.m(Bf.pNt, 16);
    async function zf(t, i, e) {
        let s = null;
        if (i instanceof Blob) s = i;
        else {
            if ("string" != typeof i) throw new TypeError("unexpected file data");
            s = new Blob([i]);
        }
        let n = !1,
            r = s.size;
        if (e.GHe) {
            Bf.MimeType.DVt(Bf.sl(t)).yVt() ||
                ((n = !0),
                await $f.BD(async () => {
                    const t = new CompressionStream("deflate"),
                        i = s.stream().pipeThrough(t),
                        e = await new Response(i).blob();
                    s = e;
                }));
        }
        return { blob: s, AHe: r, RHe: n };
    }
    const Vf = new Map([
        [".js", 1],
        [".json", 2],
        [".html", 3],
        [".css", 4],
    ]);
    function Wf(t, i) {
        const e = Bf.sl(t).toLowerCase(),
            s = Bf.sl(i).toLowerCase(),
            n = Vf.get(e) ?? 999,
            r = Vf.get(s) ?? 999;
        if (n < r) return -1;
        if (n > r) return 1;
        const h = Bf.MimeType.DVt(e),
            o = Bf.MimeType.DVt(s);
        return h.IN() && !o.IN()
            ? -1
            : !h.IN() && o.IN()
              ? 1
              : "image" === h.yps() && "image" !== o.yps()
                ? -1
                : "image" !== h.yps() && "image" === o.yps()
                  ? 1
                  : 0;
    }
    const Hf = { GHe: !1 };
    Bf.kHe = async function (t, i) {
        i = Object.assign({}, Hf, i);
        const e = new Map(),
            s = [];
        for (const [n, r] of t)
            s.push(
                (async () => {
                    const t = await zf(n, r, i);
                    e.set(n, t);
                })()
            );
        await Promise.all(s);
        const n = [...e.entries()];
        n.sort((t, i) => {
            const e = Wf(t[0], i[0]);
            return 0 !== e ? e : t[1].blob.size - i[1].blob.size;
        });
        const r = new ArrayBuffer(16),
            h = new DataView(r);
        h.setUint32(0, Uf), h.setUint32(4, 0), h.setUint32(8, 16), h.setUint32(12, 0);
        let o = 0,
            a = 0;
        const l = [],
            u = [],
            c = new TextEncoder();
        for (const [t, i] of n) {
            Bf.vu(t);
            const { blob: e, AHe: s, RHe: n } = i,
                r = c.encode(t.normalize()),
                h = new ArrayBuffer(37 + r.length),
                d = new DataView(h);
            d.setUint32(0, 0), d.setUint32(4, 0);
            const f = e.size;
            d.setBigUint64(8, BigInt(o)),
                (o += f),
                d.setBigUint64(16, BigInt(f)),
                d.setBigUint64(24, BigInt(s)),
                d.setUint8(32, n ? 1 : 0),
                d.setUint32(33, r.length),
                new Uint8Array(h).set(r, 37),
                l.push(h),
                (a += h.byteLength),
                u.push(e);
        }
        const d = new ArrayBuffer(16),
            f = new DataView(d);
        f.setUint32(0, Nf), f.setBigUint64(4, BigInt(a + 4)), f.setUint32(12, l.length);
        const p = new ArrayBuffer(12),
            m = new DataView(p);
        return m.setUint32(0, jf), m.setBigUint64(4, BigInt(o)), new Blob([r, d, ...l, p, ...u]);
    };
}
{
    const Kf = self.t;
    Kf.OHe = class {
        constructor(t, i, e, s) {
            Kf.wi(i),
                Kf.yp(s),
                Kf.k$(e),
                (this.DHe = t),
                (this.kJs = i),
                (this.izs = e || null),
                (this.s0s = s),
                (this.FHe = !1);
        }
        _x() {
            (this.DHe = null), (this.s0s = null);
        }
        Ut() {
            this.DHe && !this.FHe && this.DHe.LHe(this);
        }
        MJs() {
            return this.kJs;
        }
        NH() {
            return this.izs;
        }
        BHe() {
            this.s0s && ((this.FHe = !0), this.s0s(), (this.FHe = !1));
        }
    };
}
{
    const qf = self.t;
    class Xf {
        constructor() {
            (this.mQ = !1),
                (this.X1i = []),
                (this.UHe = 0),
                (this.kJs = 0),
                (this.NHe = 0),
                (this.jHe = []),
                (this.$He = !1);
        }
        Oat() {
            if (this.mQ) throw new Error("already enabled");
            (this.mQ = !0), window.addEventListener("popstate", (t) => this.zHe(t));
            for (const t of this.X1i) history.pushState({ sequence: t.MJs() }, t.NH(), location.toString());
        }
        zHe(t) {
            if (this.UHe > 0) return this.UHe--, void (0 === this.UHe && this.jHe.length && qf.xOe(() => this.VHe()));
            if (!this.X1i.length || !this.mQ) return;
            if (((this.$He = !0), t.state)) {
                const i = t.state.sequence;
                this.NHe = i;
            }
            const i = this.X1i.pop();
            i.BHe(), i._x(), (this.$He = !1);
        }
        VHe() {
            for (const t of this.jHe) t();
            qf.yh(this.jHe);
        }
        BD(t, i) {
            qf.yp(t), qf.k$(i);
            const e = this.kJs++;
            if (((this.NHe = e), this.mQ)) {
                const t = () => history.pushState({ sequence: e }, i || null, location.toString());
                this.UHe > 0 ? this.jHe.push(t) : this.$He ? qf.xOe(t) : t();
            }
            const s = qf.m(qf.OHe, this, e, i, t);
            return this.X1i.push(s), s;
        }
        LHe(t) {
            const i = this.X1i.indexOf(t);
            if (
                (self.assert(-1 !== i, "cannot find back stack entry"), this.X1i.splice(i, 1), t._x(), this.X1i.length)
            ) {
                const t = this.X1i.at(-1);
                this.NHe = t.MJs();
            }
            this.mQ && (this.UHe++, this.WHe());
        }
        WHe() {
            this.mQ && (this.UHe > 0 || this.$He ? qf.xOe(() => history.back()) : history.back());
        }
    }
    qf.HHe = qf.m(Xf);
}
{
    const Yf = self.t,
        Jf = "undefined" != typeof TextEncoder ? new TextEncoder("utf8") : null,
        Zf = 3;
    Yf.WebSocket = class extends Yf.Event.aG {
        constructor(t) {
            Yf.vu(t),
                super(),
                (this.KHe = new WebSocket(t)),
                (this.KHe.binaryType = "arraybuffer"),
                (this.qHe = t),
                (this.EDs = !1),
                (this.XHe = new Yf.BWe(() => this.YHe(), 10, { enabled: !1 })),
                (this.Ebe = new Yf.Ha(
                    Yf.Xa.Wa(this.KHe, "open", (t) => this.JHe(t)),
                    Yf.Xa.Wa(this.KHe, "close", (t) => this.ZHe(t)),
                    Yf.Xa.Wa(this.KHe, "message", (t) => this.QHe(t)),
                    Yf.Xa.Wa(this.KHe, "error", (t) => this.tKe(t)),
                    Yf.Xa.Ut(this.XHe)
                )),
                (this.iKe = null),
                (this.eKe = []),
                (this.sKe = new Map()),
                (this.nKe = null),
                (this.rKe = null);
        }
        Ut() {
            this.Ist(),
                (this.iKe = null),
                this.Ebe.Ua(),
                (this.eKe.length = 0),
                this.sKe.forEach((t) => t.Ut()),
                this.sKe.clear();
        }
        hKe() {
            if (this.KHe.readyState !== WebSocket.CLOSED) throw new Error("Websocket is not closed");
            return (
                this.Ebe.Ua(),
                (this.KHe = new WebSocket(this.qHe)),
                (this.KHe.binaryType = "arraybuffer"),
                (this.XHe = new Yf.BWe(() => this.YHe(), 10, { enabled: !1 })),
                (this.Ebe = new Yf.Ha(
                    Yf.Xa.Wa(this.KHe, "open", (t) => this.JHe(t)),
                    Yf.Xa.Wa(this.KHe, "close", (t) => this.ZHe(t)),
                    Yf.Xa.Wa(this.KHe, "message", (t) => this.QHe(t)),
                    Yf.Xa.Wa(this.KHe, "error", (t) => this.tKe(t)),
                    Yf.Xa.Ut(this.XHe)
                )),
                new Promise((t, i) => {
                    (this.nKe = t), (this.rKe = i);
                })
            );
        }
        Lh() {
            return this.EDs;
        }
        oKe(t, i, e = Yf.WebSocket.oKe.aKe) {
            Yf.vu(t), Yf.vu(e), Yf.kDt(i);
            let s = this.sKe.get(t);
            if ((s || ((s = new Yf.WebSocket.oKe(this, t, e)), this.sKe.set(t, s)), !s.lKe(e)))
                throw new Error(`Requested channel is not requested type "${e}"`);
            return i ? s.uKe(i) : s;
        }
        cKe(t, i) {
            return this.oKe(t, i, Yf.WebSocket.oKe.dKe);
        }
        fKe(t, i) {
            return this.oKe(t, i, Yf.WebSocket.oKe.JSON);
        }
        pKe(t) {
            Yf.vu(t);
            let i = this.sKe.get(t);
            i && i.Ut();
        }
        mKe(t) {
            this.sKe.delete(t);
        }
        Ist(t, i) {
            const e = this.KHe.readyState;
            (e != WebSocket.OPEN && e != WebSocket.CONNECTING) || this.KHe.close(t, i);
        }
        wKe(t, i = Yf.WebSocket.oKe.aKe) {
            return new Promise((e, s) => {
                const n = this.oKe(
                        t,
                        (t) => {
                            n.Ut(), r.Ua(), e(t);
                        },
                        i
                    ),
                    r = Yf.Xa.Wa(this, "close", (t) => {
                        n.Ut(), r.Ua(), s(t);
                    });
            });
        }
        gKe(t) {
            return this.wKe(t, Yf.WebSocket.oKe.JSON);
        }
        yKe(t) {
            return this.wKe(t, Yf.WebSocket.oKe.dKe);
        }
        bKe(t, i, e) {
            Yf.Et(i, Uint8Array);
            const s = new Uint8Array(i.length + Zf);
            for (let i = 0; i < Zf; i++) s[i] = 255 & t.charCodeAt(i);
            return s.set(i, Zf), this.vKe(s, e);
        }
        SKe(t, i, e) {
            return i ? this.xKe(t, i, e) : this.MKe(t, e);
        }
        MKe(t, i) {
            return this.bKe(t, i);
        }
        xKe(t, i, e) {
            return Yf.vu(i), this.bKe(t, Jf.encode(i), e);
        }
        EKe(t, i, e) {
            Yf.Dpt(i);
            let s = JSON.stringify(i);
            return this.xKe(t, s, e);
        }
        vKe(t, i) {
            return (
                Yf.Et(t, Uint8Array),
                new Promise((e, s) => {
                    let n = { data: t, resolve: e, reject: s };
                    i ? this.eKe.unshift(n) : this.eKe.push(n),
                        this.Lh() && !this.XHe.KWe() && (this.YHe(), this.XHe.BV());
                })
            );
        }
        QHe({ data: t }) {
            let i = new Uint8Array(t, 0, Zf),
                e = Array(Zf);
            for (let t = 0; t < Zf; t++) e[t] = String.fromCharCode(i[t]);
            e = e.join("");
            let s = new Uint8Array(t, Zf),
                n = this.sKe.get(e);
            n && n.CKe(s);
        }
        JHe() {
            (this.EDs = !0), this.nKe && this.nKe(), (this.nKe = null), (this.rKe = null), this.YHe(), this.XHe.BV();
            let t = Yf.m(Yf.Event, "open");
            this.dispatchEvent(t);
        }
        ZHe() {
            const t = Yf.m(Yf.Event, "close");
            this.iKe && this.iKe.reject(t),
                (this.iKe = null),
                this.XHe.XFs(),
                this.rKe && this.rKe(t),
                (this.nKe = null),
                (this.rKe = null),
                this.dispatchEvent(t);
        }
        tKe(t) {
            this.iKe && this.iKe.reject(t), (this.iKe = null);
        }
        YHe() {
            const t = this.KHe,
                i = this.eKe;
            if (t.readyState !== WebSocket.OPEN) return;
            if (!(t.bufferedAmount > 0)) {
                if ((this.iKe && (this.iKe.resolve(), (this.iKe = null)), i.length > 0)) {
                    let e = i.shift();
                    (this.iKe = e), t.send(e.data);
                }
                this.iKe || 0 !== i.length || this.XHe.XFs();
            }
        }
        static async _Ke(t) {
            const i = Yf.m(Yf.WebSocket, t);
            try {
                return (
                    await new Promise((t, e) => {
                        const s = Yf.Xa.Wa(i, "open", () => {
                                s.Ua(), n.Ua(), t();
                            }),
                            n = Yf.Xa.Wa(i, "close", (t) => {
                                s.Ua(), n.Ua(), e(t);
                            });
                    }),
                    i
                );
            } catch (t) {
                throw (i.Ut(), t);
            }
        }
    };
}
{
    const Qf = self.t,
        tp = "undefined" != typeof TextDecoder ? new TextDecoder("utf-8") : null;
    (Qf.WebSocket.oKe = class t {
        constructor(i, e, s) {
            if (s !== t.aKe && s !== t.dKe && s !== t.JSON) throw new Error(`Invalid channel type ${s}`);
            Qf.Et(i, Qf.WebSocket), Qf.vu(e), (this.Gqt = e), (this.Osi = s), (this.cYi = i), (this.$ze = new Set());
        }
        Ut() {
            this.cYi.mKe(this.Gqt), this.$ze.clear();
        }
        lKe(t) {
            return t === this.Osi;
        }
        SKe(i, e) {
            switch (this.Osi) {
                case t.JSON:
                    return this.cYi.EKe(this.Gqt, i, e);
                case t.aKe:
                    return this.cYi.xKe(this.Gqt, i, e);
                case t.dKe:
                    return this.cYi.bKe(this.Gqt, i, e);
            }
        }
        uKe(t) {
            return Qf.yp(t), this.$ze.add(t), new Qf.Xa(() => this.$ze.delete(t));
        }
        CKe(i) {
            let e;
            switch (this.Osi) {
                case t.aKe:
                    e = tp.decode(i);
                    break;
                case t.JSON:
                    e = JSON.parse(tp.decode(i));
                    break;
                case t.dKe:
                    e = i;
            }
            for (let t of this.$ze) t(e);
        }
    }),
        (Qf.WebSocket.oKe.dKe = "binary"),
        (Qf.WebSocket.oKe.JSON = "json"),
        (Qf.WebSocket.oKe.aKe = "text");
}
{
    const ip = self.t;
    ip.ZS = class {
        constructor() {
            (this.TKe = new Map()),
                (this.IKe = !1),
                (this.PKe = null),
                (this.GKe = null),
                (this.AKe = null),
                (this.RKe = null);
        }
        oC(t) {
            this.IKe = !!t;
        }
        kKe() {
            return this.IKe;
        }
        tC(t) {
            ip.yp(t), (this.PKe = t);
        }
        OKe(t) {
            if (!this.PKe) throw new Error("no get base size callback set");
            return this.PKe(t);
        }
        iC(t) {
            ip.yp(t), (this.GKe = t);
        }
        DKe(t, i, e, s, n, r) {
            if (!this.GKe) throw new Error("no raster at size callback set");
            return this.GKe(t, i, e, s, n, r);
        }
        nC(t) {
            ip.yp(t), (this.AKe = t);
        }
        FKe(t) {
            if (!this.AKe) throw new Error("no release result callback set");
            this.AKe(t);
        }
        aC(t) {
            ip.yp(t), (this.RKe = t);
        }
        U1t() {
            if (!this.RKe) throw new Error("no redraw callback set");
            this.RKe();
        }
        SC(t) {
            let i = this.TKe.get(t);
            return i || ((i = ip.m(ip.LKe, this, t)), this.TKe.set(t, i)), i.BKe(), i;
        }
        UKe(t) {
            this.TKe.delete(t.xC());
        }
        dC() {
            for (const t of this.TKe.values()) t.NKe(), t.CC();
        }
    };
}
{
    const ep = self.t,
        sp = 4096;
    ep.LKe = class {
        constructor(t, i) {
            (this.cYi = t),
                (this.jKe = i),
                (this.$Ke = 0),
                (this.zKe = 0),
                (this.VKe = 0),
                (this.WKe = this.cYi
                    .OKe(i)
                    .then((t) => {
                        this.cYi && ((this.zKe = t[0]), (this.VKe = t[1]), this.cYi.U1t());
                    })
                    .catch((t) => {
                        console.error("[SVG] Error loading SVG: ", t), (this.Wi = !0), this.cYi && this.cYi.U1t();
                    })),
                (this.HKe = 0),
                (this.KKe = 0),
                (this.qKe = 0),
                (this.XKe = 0),
                (this.YKe = !1),
                (this.JKe = null),
                (this.ZKe = !1),
                (this.Wi = !1);
        }
        Ut() {
            if (this.$Ke <= 0) throw new Error("already released");
            this.$Ke--, 0 === this.$Ke && this.CPt();
        }
        NKe() {
            this.JKe && (this.cYi.FKe(this.JKe), (this.JKe = null));
        }
        CPt() {
            this.NKe(), this.cYi.UKe(this), (this.cYi = null);
        }
        xC() {
            return this.jKe;
        }
        BKe() {
            this.$Ke++;
        }
        QKe() {
            return this.$Ke > 0;
        }
        PC() {
            return this.JKe;
        }
        CC() {
            this.ZKe = !0;
        }
        async OC(t, i, e) {
            if (0 === i || 0 === e || this.Wi) return;
            if (this.YKe) return;
            let s = ep.Sn(Math.ceil(i)),
                n = ep.Sn(Math.ceil(e));
            const r = Math.max(s, n);
            if (r > sp) {
                const t = sp / r;
                (i *= t), (e *= t), (s = Math.min(Math.ceil(s * t), sp)), (n = Math.min(Math.ceil(n * t), sp));
            }
            if (i < s && e < n) {
                const t = i / e;
                s / n > t ? ((i = n * t), (e = n)) : ((i = s), (e = s / t));
            }
            if (
                (this.cYi.kKe() && ((s = Math.ceil(i)), (n = Math.ceil(e))),
                s <= this.HKe && n <= this.KKe && !this.ZKe)
            )
                return;
            (this.YKe = !0), (this.HKe = s), (this.KKe = n);
            const h = await this.cYi.DKe(this.jKe, t, this.HKe, this.KKe, i, e);
            this.cYi &&
                (this.NKe(),
                (this.JKe = h),
                (this.qKe = i),
                (this.XKe = e),
                (this.YKe = !1),
                (this.ZKe = !1),
                this.cYi.U1t());
        }
        tqe() {
            return this.WKe;
        }
        IC() {
            return this.zKe;
        }
        TC() {
            return this.VKe;
        }
        kC() {
            return this.qKe;
        }
        GC() {
            return this.XKe;
        }
        MC() {
            return this.Wi;
        }
    };
}
{
    const np = self.t;
    let rp = null;
    const hp = /\\/g;
    function op(t) {
        return t.normalize().toLowerCase().replace(hp, "/");
    }
    let ap = null,
        lp = !1;
    async function up() {
        if (lp) return;
        lp = !0;
        const t = np.xa() + "3rdparty/zipjs/zip.js";
        await np.ya(t), (rp = self.zip), (ap = np.pRt.iqe());
    }
    np.pRt = class {
        constructor() {
            (this.eqe = null),
                (this.sqe = new Map()),
                (this.nqe = 0),
                (this.rqe = 0),
                (this.hqe = new Set()),
                (this.oqe = 0),
                (this.aqe = 0),
                (this.lqe = -1),
                (this.uqe = np.m(np.pNt, 16));
        }
        Ut() {
            this.e4t(),
                this.sqe && this.sqe.clear(),
                (this.sqe = null),
                this.hqe && this.hqe.clear(),
                (this.hqe = null);
        }
        e4t() {
            this.eqe && (this.eqe.close(), (this.eqe = null));
        }
        static gYt() {
            return up();
        }
        async q2t(t) {
            let i;
            if (
                (np.Et(t, Blob),
                await up(),
                this.e4t(),
                this.sqe.clear(),
                this.hqe.clear(),
                (this.nqe = 0),
                (this.rqe = 0),
                t.size < 209715200)
            ) {
                const e = await np.iEs(t);
                i = new rp.Uint8ArrayReader(new Uint8Array(e));
            } else i = new rp.BlobReader(t);
            this.eqe = new rp.ZipReader(i);
            let e = 0;
            for await (const t of this.eqe.getEntriesGenerator())
                this.sqe.set(op(t.filename), t),
                    (this.nqe += t.compressedSize),
                    e++,
                    e >= 1e3 && (await np.pwe(), (e = 0));
            return this;
        }
        hts(t) {
            return np.vu(t), this.sqe.has(op(t));
        }
        h4t(t) {
            return np.vu(t), this.sqe.get(op(t)) || null;
        }
        cqe() {
            return this.sqe.values();
        }
        dqe() {
            return this.sqe.keys();
        }
        KLe() {
            const t = (i, e, s) => {
                for (let t = s.length - 1; t >= 0; t--) {
                    const n = s[t],
                        r = n.filename.replace(i, "");
                    if (!n.directory && r.includes("/")) continue;
                    if (n.directory && 1 !== (r.match(/\//g) || []).length) continue;
                    const h = np.dts(n.filename);
                    (n.directory || r === np.iN(h) + np.sl(h)) &&
                        (s.splice(t, 1), n.directory ? e.push({ entry: n, children: [] }) : e.push({ entry: n }));
                }
                for (const i of e) {
                    const e = i.entry;
                    e.directory && t(e.filename, i.children, s);
                }
                return e.reverse();
            };
            let i = [...this.cqe()];
            for (const t of i) t.filename = t.filename.replace(/\\/g, "/");
            for (const t of i) {
                if (t.directory) continue;
                const e = t.filename.split("/");
                e.pop();
                let s = "";
                for (const t of e)
                    (s += `${t}/`), i.some((t) => t.filename === s) || i.push({ filename: s, directory: !0 });
            }
            return t("", [], i);
        }
        Q2t(t) {
            np.vu(t);
            const i = t.toLowerCase();
            for (const t of this.sqe.values()) if (t.filename.toLowerCase().endsWith(i)) return t;
            return null;
        }
        its(t) {
            return this.uqe.BD(() => this.fqe(t));
        }
        async fqe(t) {
            np.x$(t);
            const i = { pqe: 0 };
            this.hqe.add(i);
            const e = new rp.TextWriter(),
                s = await t.getData(e, { onprogress: (t) => (i.pqe = t) });
            return this.hqe.delete(i), (this.rqe += t.compressedSize), s;
        }
        async ets(t) {
            np.x$(t);
            const i = await this.its(t);
            return await np.W$t(i);
        }
        t4t(t, i) {
            return this.uqe.BD(() => this.mts(t, i));
        }
        async mts(t, i) {
            np.x$(t), np.k$(i);
            const e = i || np.MimeType.DVt(np.sl(t.filename)).GN(),
                s = { pqe: 0 };
            this.hqe.add(s);
            const n = new rp.BlobWriter(e),
                r = await t.getData(n, { onprogress: (t) => (s.pqe = t) });
            return (
                this.hqe.delete(s),
                (this.rqe += t.compressedSize),
                (r.name = t.filename),
                t.lastModDate && (r.lastModified = +t.lastModDate),
                r
            );
        }
        Z2t() {
            return this.nqe;
        }
        K2t() {
            return this.rqe + this.mqe();
        }
        mqe() {
            let t = 0;
            for (const i of this.hqe) t += i.pqe || 0;
            return t;
        }
        cke(t) {
            if ((np.wi(t), t < -1 || t > 9)) throw new RangeError("invalid compression level");
            this.lqe = t;
        }
        wqe(t) {
            if ((np.wi(t), -1 !== this.lqe)) return this.lqe;
            const i = 1048576;
            return t > 5 * i ? 1 : t > 2 * i ? 2 : t > 1 * i ? 3 : t > 524288 ? 4 : 5;
        }
        gqe(t) {
            let i = 0;
            for (const e of t.values()) {
                let t = null;
                (t = np.q$t(e) ? e.data : e), (i += t.byteLength || t.size || t.length || 0);
            }
            return i;
        }
        async bRt(t, i) {
            let e;
            np.qm(i, Map),
                await up(),
                (this.oqe = 0),
                (this.aqe = 0),
                this.hqe.clear(),
                (e = this.gqe(t) < 262144e3 ? new ap() : new rp.BlobWriter("application/zip"));
            const s = new rp.ZipWriter(e, {
                zip64: !0,
                supportZip64SplitFile: !1,
                bufferedWrite: !0,
                dataDescriptor: !1,
            });
            await this.yqe(s, t, i);
            const n = await s.close();
            return n instanceof Blob ? n : new Blob([n], { type: "application/zip" });
        }
        async yqe(t, i, e) {
            const s = [];
            for (const [n, r] of i) {
                let i = null;
                if (((i = np.q$t(r) ? r.data : r), "string" == typeof i)) this.oqe += i.length;
                else {
                    if (!np.ca(i, Blob)) throw new Error("unknown file content");
                    this.oqe += i.size;
                }
                s.push(this.uqe.BD(() => this.bqe(t, n, r, e)));
            }
            await Promise.all(s);
        }
        async bqe(t, i, e, s) {
            let n,
                r = null,
                h = 0,
                o = null,
                a = null;
            np.q$t(e)
                ? ((r = e.data), (h = e.vqe || 0), (o = e.Sqe || null), (a = "number" == typeof e.xqe ? e.xqe : null))
                : (r = e);
            let l = 5,
                u = 0;
            if ("string" == typeof r) (n = new rp.TextReader(r)), (u = r.length), (l = this.wqe(u));
            else {
                if (!np.ca(r, Blob)) throw new Error("unknown file content");
                {
                    (n = new rp.BlobReader(r)), (u = r.size), (l = this.wqe(u));
                    let t = r.type;
                    t || (t = np.MimeType.DVt(np.sl(i)).GN()), np.MimeType.Ke(t).yVt() && (l = 0);
                }
            }
            const c = { bytesWritten: 0 };
            this.hqe.add(c);
            const d = {
                level: l,
                externalFileAttribute: h,
                extraField: o,
                zip64: !0,
                supportZip64SplitFile: !1,
                onprogress: (t) => (c.bytesWritten = t),
            };
            null !== a && (d.versionMadeBy = a);
            const f = await t.add(i, n, d);
            this.hqe.delete(c), (this.aqe += u), s && s.set(i, f.compressedSize);
        }
        ake() {
            return this.oqe;
        }
        Mqe() {
            let t = 0;
            for (const i of this.hqe) t += i.bytesWritten || 0;
            return t;
        }
        oke() {
            return this.aqe + this.Mqe();
        }
    };
}
self.t.pRt.iqe = function () {
    return class extends self.zip.Writer {
        init(t = 0) {
            super.init(), Object.assign(this, { offset: 0, arrayParts: [], totalSize: 0 });
        }
        writeUint8Array(t) {
            this.arrayParts.push(t), (this.totalSize += t.length);
        }
        getData() {
            const t = new ArrayBuffer(this.totalSize),
                i = new Uint8Array(t);
            let e = 0;
            for (const t of this.arrayParts) i.set(t, e), (e += t.length);
            return i;
        }
    };
};
{
    const cp = globalThis.t,
        dp = globalThis.lang,
        fp = globalThis.iG;
    let pp = null,
        mp = !1,
        wp = !1,
        gp = !1,
        yp = null,
        bp = null,
        vp = null;
    const Sp = new Map(),
        xp = new WeakMap(),
        Mp = new Map();
    let Ep = null,
        Cp = !1;
    const _p = new Map([
            ["application/javascript", "javascript"],
            ["text/javascript", "javascript"],
            ["application/typescript", "typescript"],
            ["text/typescript", "typescript"],
            ["text/css", "css"],
            ["text/markdown", "markdown"],
            ["text/html", "html"],
            ["application/json", "json"],
            ["text/xml", "xml"],
            ["image/svg+xml", "xml"],
        ]),
        Tp = ["de", "es", "fr", "it", "ja", "ko", "ru", "zh-cn", "zh-tw"];
    let Ip = null;
    const Pp = { textContent: null, mimeType: "text/plain", fontSize: null };
    async function Gp() {
        (mp = !0), await cp.ya(cp.xa() + "3rdparty/monaco/vs/loader.js", !0);
        const t = globalThis.require,
            i = { baseUrl: cp.xa() + "3rdparty/monaco", paths: { vs: cp.xa() + "3rdparty/monaco/vs" } },
            e = globalThis.app.Lmt().toLowerCase();
        for (const t of Tp)
            if (e.startsWith(t)) {
                (Ip = t), (i["vs/nls"] = { availableLanguages: { "*": t } });
                break;
            }
        t.config(i), await new Promise((i) => t(["vs/editor/editor.main"], i)), (bp = globalThis.monaco);
    }
    async function Ap() {
        if (vp) return;
        const t = await fetch("media/autocomplete-data.json");
        vp = await t.json();
    }
    cp.Kyt = class t extends cp.Event.aG {
        #t;
        #i;
        #e;
        #s;
        #n;
        #r = null;
        #h = !1;
        #o = !1;
        #a = null;
        #l = null;
        #u = 0;
        #c = !1;
        #d = null;
        #f = [];
        #p = null;
        #m = !1;
        #w = !1;
        #g = -1;
        #y = "";
        #b = 0;
        #v = !1;
        constructor(t, i) {
            cp.Gct(t), cp.Crt(i), super();
            const e = i.lkt,
                s = i.Gb,
                n = i.Ya,
                r = i.rkt,
                h = i.ckt;
            cp.qm(e, globalThis.WIs),
                cp.qm(s, globalThis.Ga),
                cp.qm(n, globalThis.Va),
                cp.Crt(r),
                cp.qm(h, globalThis.ivt),
                (this.#t = t),
                (this.#i = e),
                (this.#e = s),
                (this.#s = n),
                (this.#n = r),
                (this.#r = h),
                (this.#d = cp.m(
                    cp.Ha,
                    cp.Xa.Wa(globalThis.app, "settingschange", () => this.#S())
                )),
                this.#r &&
                    this.#d.BD(
                        cp.Xa.Wa(this.#r.dF(), "resize", () => this.gkt()),
                        cp.Xa.Wa(this.#r.dF(), "move", () => this.gkt()),
                        cp.Xa.Wa(this.#r, "scroll", () => this.gkt())
                    );
        }
        static Xyt() {
            return cp.ti.VW.Eqe() ? "vs-dark" : "vs";
        }
        static async okt() {
            return (pp && !wp) || (pp = t.#x()), pp;
        }
        static async #x() {
            const t = globalThis.app;
            let i = null;
            wp = !1;
            try {
                (i = t.Oke(globalThis.lang("ui.bars.textEditor.loading-status"))), i.eD();
                const [e] = await Promise.all([import(cp.xa() + "3rdparty/monaco-ts-locales/index.js"), Gp(), Ap()]);
                Ip && e.register(bp);
            } catch (t) {
                throw (i.Ut(), (wp = !0), t);
            }
            try {
                gp = !0;
                const i = bp.languages.typescript;
                console.log("Loaded Monaco editor, using TypeScript v" + i.typescriptVersion),
                    i.javascriptDefaults.setEagerModelSync(!0),
                    i.typescriptDefaults.setEagerModelSync(!0),
                    this.#M(!1, !0);
                const e = await cp.xis.y_s(),
                    s = [];
                for (const [t, i] of e)
                    t.endsWith("AddonSDK.d.ts") ||
                        s.push({ content: i, filePath: "file:///ts-defs/runtime/" + cp.dts(t) });
                i.javascriptDefaults.setExtraLibs(s),
                    i.typescriptDefaults.setExtraLibs(s),
                    bp.editor.registerEditorOpener({ openCodeEditor: (t, i, e) => cp.Kyt.Cqe(t, i, e) }),
                    bp.languages.registerCompletionItemProvider("typescript", {
                        triggerCharacters: ".",
                        provideCompletionItems: (t, i, e, s) =>
                            t.uri.toString().toLowerCase().endsWith(".js") ? cp.Kyt._qe(t, i, e) : null,
                        resolveCompletionItem: (t, i) => null,
                    }),
                    bp.editor.setTheme(cp.Kyt.Xyt()),
                    (yp = bp.editor.createModel(
                        "/* dummy js model */",
                        "javascript",
                        bp.Uri.parse("file:///construct-internal/__dummy_js_model__.js")
                    )),
                    await t.Tqe("monacoeditorloaded");
            } finally {
                i.Ut();
            }
        }
        static #M(t, i) {
            if (((t = !!t), !i && Cp === t)) return;
            Cp = t;
            const e = bp.languages.typescript,
                s = ["lib.es2023.d.ts"];
            t ? s.push("lib.webworker.d.ts") : s.push("lib.dom.d.ts");
            const n = {
                target: e.ScriptTarget.ESNext,
                module: e.ModuleKind.ESNext,
                esModuleInterop: !1,
                forceConsistentCasingInFileNames: !0,
                strict: !0,
                skipLibCheck: !0,
                lib: s,
                allowJs: !0,
                moduleDetection: 3,
            };
            Ip && (n.locale = Ip), e.typescriptDefaults.setCompilerOptions(n);
        }
        static async Cqe(t, i, e) {
            const s = globalThis.app,
                n = i.path;
            let r = null;
            if (n.toLowerCase().endsWith(".d.ts")) {
                const i = xp.get(t);
                return void i?.Iqe();
            }
            const h = globalThis.$Es.UEs(n);
            if (h) {
                let t = -1;
                if ("number" == typeof e.lineNumber) t = e.lineNumber;
                else {
                    if ("number" != typeof e.startLineNumber) return !1;
                    t = e.startLineNumber;
                }
                if (((r = h.e_s(t)?.qj), !r)) return !1;
            } else {
                const t = globalThis.WIs.UEs(n);
                if (!t) return !1;
                r = t.kte();
            }
            if (r instanceof globalThis.Va) {
                const t = s.ZH(),
                    i = await t.fN(r);
                e &&
                    (await i.fjt(),
                    "number" == typeof e.column
                        ? i.ajt(e.lineNumber, e.column)
                        : i.cjt(e.startLineNumber, e.startColumn, e.endLineNumber, e.endColumn));
            } else {
                const t = s.yH().wH(r.pH());
                await t.d_t(), t.jEt(r, { f_t: !0 }), cp.ti.cE.lE(t.dF());
            }
            return !0;
        }
        static Pqe() {
            return mp;
        }
        static $yt() {
            return gp;
        }
        static Jyt() {
            return bp;
        }
        async mF(t) {
            if (!bp) throw new Error("monaco not loaded");
            const i = (t = Object.assign({}, Pp, t)).textContent,
                e = t.mimeType;
            cp.k$(i), cp.vu(e);
            const s = globalThis.app.$J();
            (this.#p = cp.ti.gj("div", document.body, null, "construct-monaco-overlay monaco-editor")),
                (this.#p.style.display = "none"),
                (this.#m = !1);
            const n = {
                dropIntoEditor: { enabled: !1 },
                overflowWidgetsDomNode: this.#p,
                contextmenu: !1,
                theme: cp.Kyt.Xyt(),
                fontSize: t.fontSize || s.textEditorFontSize || 12,
                autoIndent: s.textEditorAutoIndent ? "advanced" : "keep",
                wordWrap: s.textEditorEnableWordWrap ? "on" : "off",
                minimap: { enabled: s.textEditorEnableMinimap, scale: s.textEditorMinimapScale },
                stickyScroll: { enabled: s.textEditorEnableStickyScrolling },
                folding: s.textEditorEnableCodeFolding,
            };
            (this.#l = _p.get(e)), this.#l && (n.language = this.#l);
            let r = -1,
                h = -1,
                o = -1;
            if (this.#i)
                if (this.#i.kte() instanceof globalThis.Va) {
                    if (((n.model = await this.#i.DEs()), this.#o)) return;
                } else {
                    if (((this.#h = !0), (n.model = await this.#e.zyt(this.#l).DEs()), this.#o)) return;
                    (n.minimap.enabled = !1),
                        (n.stickyScroll.enabled = !1),
                        (n.scrollbar = { horizontal: "hidden", vertical: "hidden" }),
                        (n.overviewRulerBorder = !1),
                        (n.overviewRulerLanes = 0),
                        (n.hideCursorInOverviewRuler = !0),
                        (n.scrollBeyondLastLine = !1),
                        (n.lineNumbersMinChars = 3),
                        (n.multiCursorLimit = 1),
                        (n.folding = !1);
                    const t = n.model.getValue(),
                        i = this.#i.kte().L$(),
                        e = t.indexOf("//construct-start-block:" + i),
                        s = t.indexOf("//construct-end-block:" + i);
                    (r = cp.h_s(t, e) + 2),
                        (h = cp.h_s(t, s)),
                        (o = n.model.getLineCount()),
                        (n.lineNumbers = (t) => String(t - r)),
                        (this.#g = r + 1),
                        (this.#y = "//construct-end-block:" + i),
                        this.#d.BD(
                            cp.Xa.Wa(this.#t, "keydown", (t) => this.#E(t), !0),
                            cp.Xa.Wa(this.#t, "wheel", (t) => this.#C(t), !0)
                        );
                }
            else n.value = i;
            n.model && (Sp.set(n.model.uri.path, this), (this.#u = n.model.getValueLength())),
                (this.#a = bp.editor.create(this.#t, n));
            const a = this.#f;
            this.#h &&
                (this.#a.setHiddenAreas([new bp.Range(0, 0, r, 0), new bp.Range(h, 0, o, 0)]),
                this.ajt(r + 1, 0),
                (this.#w = !0),
                a.push(this.#a.onDidChangeCursorPosition((t) => this.#_(t))),
                a.push(this.#a.onDidChangeCursorSelection((t) => this.#T(t)))),
                a.push(this.#a.onDidChangeModelContent(() => this.#I())),
                a.push(this.#a.onDidContentSizeChange(() => this.#P())),
                a.push(this.#a.onContextMenu((t) => this.#G(t))),
                a.push(this.#a.onDidFocusEditorText(() => this.#A())),
                a.push(this.#a.onDidFocusEditorWidget(() => this.#A())),
                a.push(this.#a.onDidBlurEditorText(() => this.#R())),
                a.push(this.#a.onDidBlurEditorWidget(() => this.#R())),
                this.#d.BD(cp.Xa.Wa(this.#p, "keydown", (t) => this.#k(t))),
                this.#s && !this.#i && this.#d.BD(cp.Xa.Wa(this.#s, "projectfileblobchange", (t) => this.#O(t))),
                xp.set(this.#a, this);
        }
        Ut() {
            Sp.delete(this.#a.getModel().uri.path), this.#D(), (this.#o = !0), this.#d.Ua(), (this.#d = null);
            for (const t of this.#f) t.dispose();
            cp.yh(this.#f),
                this.#a && (xp.delete(this.#a), this.#a.dispose(), (this.#a = null)),
                this.#p && (this.#p.remove(), (this.#p = null)),
                (this.#t = null),
                (this.#i = null),
                (this.#e = null),
                (this.#n = null),
                super.Ut();
        }
        #F() {
            let t = 1 / 0;
            if (this.#y) {
                const i = this.#a.getValue(),
                    e = i.indexOf(this.#y);
                -1 !== e && (t = cp.h_s(i, e) - 1);
            }
            return [this.#g, t];
        }
        #_(t) {
            if (!this.#w || this.#v) return;
            const [i, e] = this.#F(),
                s = t.position;
            let n = s.lineNumber,
                r = s.column,
                h = !1;
            n < i
                ? ((n = this.#g), (r = this.#b), (h = !0))
                : s.lineNumber > e
                  ? ((n = e), (r = this.#b), (h = !0))
                  : (this.#b = r),
                h && ((this.#v = !0), this.#a.setPosition({ lineNumber: n, column: r }), (this.#v = !1));
        }
        #T(t) {
            if (!this.#w || this.#v) return;
            const i = t.selection,
                [e, s] = this.#F();
            let n = i.selectionStartLineNumber,
                r = i.selectionStartColumn,
                h = i.positionLineNumber,
                o = i.positionColumn,
                a = !1,
                l = !1;
            h < e
                ? ((h = this.#g), (o = this.#b), (a = !0))
                : h > s
                  ? ((h = s), (o = this.#b), (l = !0), (a = !0))
                  : (this.#b = o),
                n < e
                    ? ((n = this.#g), (r = this.#b), (a = !0), l && ((r = 1), (o = 1 / 0)))
                    : n > s && ((n = s), (r = this.#b), (a = !0)),
                a && ((this.#v = !0), this.#a.setSelection(new bp.Selection(n, r, h, o)), (this.#v = !1));
        }
        #E(t) {
            if (this.#w) {
                if ("Delete" === t.key || "Backspace" === t.key) {
                    if (this.GW()) return;
                    const [i, e] = this.#F(),
                        s = this.#a.getPosition(),
                        n = s.lineNumber,
                        r = s.column;
                    let h = !1;
                    if (n === i && 1 === r && "Backspace" === t.key) h = !0;
                    else if (n === e && "Delete" === t.key) {
                        r > this.#a.getModel().getLineLength(e) && (h = !0);
                    }
                    h && (t.preventDefault(), t.stopPropagation());
                }
                "F1" === t.key && this.#h && (t.preventDefault(), t.stopPropagation());
            }
        }
        #C(t) {
            t.stopPropagation();
        }
        fkt() {
            this.#a && this.#a.focus();
        }
        ujt() {
            return !!this.#a && this.#a.hasTextFocus();
        }
        pjt() {
            return !!this.#a && this.#a.hasWidgetFocus();
        }
        Gqe() {
            return this.ujt() || this.pjt();
        }
        #A() {
            this.#p && this.#L();
        }
        #R() {
            this.#p && !this.Gqe() && this.#D();
        }
        #L() {
            this.#m ||
                ((this.#m = !0),
                document.body.appendChild(this.#p),
                (this.#p.style.display = ""),
                this.gkt(),
                globalThis.app.Skt() && (this.#p.style.zIndex = 99999));
        }
        #D() {
            this.#m && ((this.#m = !1), (this.#p.style.display = "none"));
        }
        gkt() {
            if (!this.#m) return;
            const t = this.#t.getBoundingClientRect(),
                i = this.#t.ownerDocument.defaultView;
            (this.#p.style.left = t.left + "px"),
                (this.#p.style.top = t.top + "px"),
                (this.#p.style.width = i.innerWidth - t.left + "px"),
                (this.#p.style.height = t.height + "px");
        }
        #k(t) {
            "Enter" === t.key
                ? (t.stopPropagation(), t.preventDefault(), this.#B("acceptRenameInput"))
                : "Escape" === t.key && (t.stopPropagation(), t.preventDefault(), this.#B("cancelRenameInput"));
        }
        async ojt() {
            if (this.#i && this.#a) {
                const t = await this.#i.DEs();
                if (this.#o) return;
                this.#a.setModel(t);
            }
        }
        #S() {
            if (!this.#a || this.#h) return;
            const t = globalThis.app.$J();
            this.#a.updateOptions({
                fontSize: t.textEditorFontSize || 12,
                autoIndent: t.textEditorAutoIndent ? "advanced" : "keep",
                wordWrap: t.textEditorEnableWordWrap ? "on" : "off",
                minimap: { enabled: t.textEditorEnableMinimap, scale: t.textEditorMinimapScale },
                stickyScroll: { enabled: t.textEditorEnableStickyScrolling },
                folding: t.textEditorEnableCodeFolding,
            });
        }
        bkt() {
            return this.#t;
        }
        akt() {
            return this.#n;
        }
        QO() {
            this.#a && this.#a.layout();
        }
        wkt() {
            return this.#a ? this.#a.getContentHeight() : 0;
        }
        #I() {
            const t = globalThis.app,
                i = this.#u,
                e = this.#a.getModel().getValueLength();
            if (((this.#u = e), this.#i && !t.YH())) {
                if (this.#i.kte() instanceof globalThis.Va) this.#i.BEs(this.#a.getModel().getLineCount());
                else if (this.#w) {
                    const [t, i] = this.#F();
                    this.#i.BEs(i - t);
                }
                if (e > i && this.#i.Mi().Zei() > t.kni()) return this.gjt(), void t.XH(this.#i.Mi(), 2);
            }
            if (
                (this.dispatchEvent(new cp.Event("change")),
                this.#s && "imports-for-events" === this.#s.cN() && this.#e.zyt(this.#l).XEs(),
                this.#s && !this.#i)
            ) {
                if (this.#c) return;
                const t = this.#a.getValue();
                this.#s.VIs(t);
            }
        }
        #P() {
            this.dispatchEvent(new cp.Event("contentsizechange"));
        }
        Aqe() {
            return this.#a ? this.#a.getModel().getVersionId() : 0;
        }
        E_() {
            return this.#a ? this.#a.getValue() : "";
        }
        In(t) {
            this.#a && this.#a.setValue(t);
        }
        Ejt() {
            if (this.#a) return this.#a.getModel().canUndo();
        }
        gjt() {
            this.#B("undo");
        }
        jjt() {
            if (this.#a) return this.#a.getModel().canRedo();
        }
        mjt() {
            this.#B("redo");
        }
        Cut() {
            this.#B("editor.action.clipboardCutAction");
        }
        t5s() {
            this.#B("editor.action.clipboardCopyAction");
        }
        eF() {
            this.#B("editor.action.clipboardPasteAction");
        }
        X_() {
            this.#B("deleteAllRight");
        }
        GW() {
            if (!this.#a) return !1;
            const t = this.#a.getSelection();
            return (
                !!t &&
                (t.selectionStartLineNumber !== t.positionLineNumber || t.selectionStartColumn !== t.positionColumn)
            );
        }
        ajt(t, i) {
            this.#a && this.#a.setPosition({ column: i, lineNumber: t });
        }
        cjt(t, i, e, s) {
            this.#a && this.#a.setSelection({ startLineNumber: t, startColumn: i, endLineNumber: e, endColumn: s });
        }
        skt(t, i) {
            if (!this.#a) return;
            const e = this.#a.getTargetAtClientPoint(t, i);
            e && e.position && this.#a.setPosition(e.position);
        }
        ljt() {
            this.#a && this.#a.revealRangeInCenter(this.#a.getSelection(), 0);
        }
        #G(t) {
            t.event.browserEvent.stopPropagation();
            const i = cp.u.z_("ui.bars.textEditor.context-menu");
            t.event.preventDefault();
            const e = t.event.posx,
                s = t.event.posy,
                n = cp.m(cp.ti.LO, this.#t);
            ("javascript" !== this.#l && "typescript" !== this.#l) ||
                (n.xO(null, i(".go-to-definition"), () => this.Rqe()),
                n.xO(null, i(".peek-definition"), () => this.Iqe()),
                n.xO(null, i(".find-references"), () => this.kqe()),
                n.xO(null, i(".go-to-symbol"), () => this.Oqe()),
                n.xO("edit", i(".rename"), () => this.T_()),
                this.#h ||
                    (n.xO(null, i(".change-all-occurrences"), () => this.Dqe()),
                    n.xO(null, i(".format-document"), () => this.Fqe())),
                n.YO()),
                "json" === this.#l &&
                    (n.xO("json", dp("ui.bars.textEditor.beautify"), () => this.Fqe()),
                    n.xO("json", dp("ui.bars.textEditor.minify"), () => this.#U()),
                    n.YO()),
                ("html" !== this.#l && "css" !== this.#l) ||
                    (n.xO(null, i(".format-document"), () => this.Fqe()), n.YO());
            const r = this.Ejt(),
                h = this.jjt();
            (r || h) &&
                (n.BT(),
                r && n.xO("undo", dp("main-menu.undo"), () => this.gjt()),
                h && n.xO("redo", dp("main-menu.redo"), () => this.mjt()),
                n.MT(),
                n.YO());
            let o = !1;
            this.GW() &&
                (n.xO("delete", dp("common.delete"), () => this.X_()),
                n.YO(),
                n.BT(),
                (o = !0),
                n.xO("cut", dp("common.cut"), () => this.Cut(), { GO: !0 }),
                n.xO("copy", dp("common.copy"), () => this.t5s(), { GO: !0 })),
                n.xO("paste", dp("common.paste"), () => this.eF(), { GO: !0 }),
                o && n.MT(),
                this.#h || (n.YO(), n.xO(null, i(".command-palette"), () => this.Lqe())),
                n.XO(e, s);
        }
        Rqe() {
            this.#B("editor.action.revealDefinition");
        }
        kqe() {
            this.#B("editor.action.goToReferences");
        }
        Oqe() {
            this.#B("editor.action.quickOutline");
        }
        Iqe() {
            this.#B("editor.action.peekDefinition");
        }
        Bqe() {
            this.#B("editor.action.peekReferences");
        }
        T_() {
            this.#B("editor.action.rename");
        }
        Dqe() {
            this.#B("editor.action.changeAll");
        }
        Fqe() {
            this.#B("editor.action.formatDocument");
        }
        #U() {
            if (!this.#a) return;
            const t = this.#a.getValue();
            let i = null;
            try {
                i = JSON.parse(t);
            } catch (t) {
                (() => {})("Error parsing JSON: ", t);
                return void cp.ti.Ze.Ke("OK").pr(dp("ui.bars.textEditor.validation-error"));
            }
            this.#a.setValue(JSON.stringify(i));
        }
        Lqe() {
            this.#B("editor.action.quickCommand");
        }
        xkt() {
            this.#B("hideSuggestWidget");
        }
        #B(t) {
            this.#a && this.#a.trigger("construct", t);
        }
        Ekt() {
            if (!this.#a) return !1;
            const t = this.#p.querySelector(".suggest-widget");
            if (!t) return !1;
            return "none" !== globalThis.getComputedStyle(t).getPropertyValue("display");
        }
        async #O(t) {
            if (t.rEs) return;
            const i = await cp.Cle(this.#s.Nh());
            this.#o || ((this.#c = !0), this.#a.setValue(i), (this.#c = !1));
        }
        hjt() {
            return this.#c;
        }
        static #N(t) {
            return (
                "file://" +
                encodeURI(t).replace(/[^A-Za-z0-9%_\-\.\\/]/g, (t) => `%${t.charCodeAt(0).toString(16).toUpperCase()}`)
            );
        }
        static async sni(i) {
            const e = await t.#j(i, "javascript");
            return e || (await t.#j(i, "typescript"));
        }
        static async #j(i, e) {
            if (!i.yN(e, !0)) return null;
            try {
                await cp.Kyt.okt();
            } catch (t) {
                return console.error("Failed to load code editor: ", t), null;
            }
            const s = [...i.G_s(e)].map((t) => t.ikt()),
                [n, r] = await Promise.all([Promise.all(s.map((t) => t.DEs())), i.zyt(e).DEs()]),
                h = [...n, r];
            s.push(i.zyt(e));
            const o =
                    await bp.languages.typescript["javascript" === e ? "getJavaScriptWorker" : "getTypeScriptWorker"](),
                a = h.map((t) => t.uri),
                l = await o(...a),
                u = Promise.all(a.map((i) => l.getSyntacticDiagnostics(t.#N(i.path))));
            let c = Promise.resolve([]);
            "typescript" === e && (c = Promise.all(a.map((i) => l.getSemanticDiagnostics(t.#N(i.path)))));
            const [d, f] = await Promise.all([u, c]),
                p = t.#$(d, f, s, h);
            return p || null;
        }
        static #$(t, i, e, s) {
            for (let n = 0, r = t.length; n < r; ++n) {
                const r = t[n],
                    h = i[n],
                    o = r.slice(0);
                Array.isArray(h) && cp.Uc(o, h);
                const a = e[n],
                    l = s[n];
                for (const t of o)
                    if (1 === t.category) {
                        const i = "string" == typeof t.messageText ? t.messageText : t.messageText.messageText,
                            e = l.getPositionAt(t.start).lineNumber;
                        if (a instanceof globalThis.$Es) {
                            const t = a.e_s(e);
                            if (!t) {
                                (() => {})("Failed to identify event sheet script for script error; ignoring");
                                continue;
                            }
                            const s = t.qj;
                            if (s instanceof globalThis.Va) return { _0s: s, Ake: { line: e - 1, message: i } };
                            if (!s.Yyt()) continue;
                            const n = Math.min(e - t.n_s - 1, cp.VEs(s.qyt(), "\n"));
                            return { _0s: s, Ake: { line: n, message: i } };
                        }
                        return { _0s: a.kte(), Ake: { line: e - 1, message: i } };
                    }
            }
            return null;
        }
        static I_s() {
            Ep && Ep.dispose(),
                (Ep = bp.languages.typescript.typescriptDefaults.addExtraLib(
                    `/* dummy lib ${Math.floor(1e6 * Math.random())} */`,
                    "construct-internal/__dummy_lib__.js"
                ));
        }
        static async ini(i, e) {
            if (!cp.Kyt.$yt()) return;
            const s = new Set([...Mp.keys()]);
            for (const [t, e] of i)
                if ((s.delete(t), Mp.has(t))) {
                    const i = Mp.get(t);
                    i.model.getValue() !== e &&
                        (i.model.setValue(e),
                        i.Uqe.dispose(),
                        (i.Uqe = bp.languages.typescript.typescriptDefaults.addExtraLib(e, t)));
                } else {
                    const i = bp.editor.createModel(e, "typescript", bp.Uri.parse(t)),
                        s = bp.languages.typescript.typescriptDefaults.addExtraLib(e, t);
                    Mp.set(t, { model: i, Uqe: s });
                }
            for (const t of s) {
                const { model: i, Uqe: e } = Mp.get(t);
                e.dispose(), i.dispose(), Mp.delete(t);
            }
            t.#M(e);
        }
        static async Rxe(i) {
            if (!i.yN("typescript")) return null;
            try {
                await cp.Kyt.okt();
            } catch (t) {
                return console.error("Failed to load code editor: ", t), null;
            }
            const e = globalThis.app.Oke(globalThis.lang("ui.bars.textEditor.compiling-typescript"));
            e.eD();
            try {
                const e = [...i.G_s("typescript")].filter((t) => "imports-for-events" !== t.cN()),
                    s = e.map((t) => t.ikt()),
                    n = await Promise.all(s.map((t) => t.DEs()));
                let r = null;
                if (i.v7s("typescript")) {
                    const t = i.zyt("typescript"),
                        e = await t.QEs(!0);
                    (r = bp.editor.createModel(
                        e,
                        "typescript",
                        bp.Uri.parse(
                            "/" + cp.xis.t_s() + `project/__c3_tsInEvents_temp${Math.floor(1e6 * Math.random())}__.ts`
                        )
                    )),
                        n.push(r);
                }
                const h = await bp.languages.typescript.getTypeScriptWorker(),
                    o = n.map((t) => t.uri),
                    a = await h(...o),
                    l = await Promise.all(o.map((i) => a.getEmitOutput(t.#N(i.path)))),
                    u = { Dxe: null, Nxe: [] };
                let c = 0;
                for (const t of l) {
                    const i = n[c],
                        s = e[c];
                    ++c;
                    const h = t.outputFiles.filter((t) => t.name.toLowerCase().endsWith(".js"));
                    if (0 === h.length) continue;
                    if (h.length > 1)
                        throw (
                            (console.error("Unexpected TypeScript compiler output - got multiple output files: ", h),
                            new Error("typescript compile error"))
                        );
                    const o = h[0];
                    i === r ? (u.Dxe = o.text) : u.Nxe.push([s, o.text]);
                }
                return r && r.dispose(), u;
            } finally {
                e.Ut();
            }
        }
        static _qe(t, i, e) {
            const s = bp.languages.CompletionItemKind,
                n = e.triggerCharacter;
            if (!vp) return null;
            let r = null;
            const h = t.uri.path,
                o = globalThis.$Es.UEs(h);
            if (o) r = o.Mi();
            else {
                const t = globalThis.WIs.UEs(h);
                t && (r = t.Mi());
            }
            const a = Sp.get(h),
                l = t.getValueInRange({
                    startLineNumber: i.lineNumber,
                    startColumn: 0,
                    endLineNumber: i.lineNumber,
                    endColumn: i.column,
                }),
                u = globalThis.urs.lAe(l);
            if (0 === u.length) return;
            if ((u.reverse(), cp.Los(cp.vo(u[0])))) return;
            const c = new Map(),
                d = [];
            function f(t) {
                let i = c.get(t.name);
                i
                    ? t.interfaceName && i.Nqe.add(t.interfaceName)
                    : ((t.Nqe = new Set(t.interfaceName ? [t.interfaceName] : [])), c.set(t.name, t), d.push(t));
            }
            let p = !0;
            if ("runtime" === u[0] || "#runtime" === u[0])
                for (const t of vp.properties.IRuntime) f({ name: t, kind: "Property", interfaceName: "IRuntime" });
            else if ("behaviors" === u[0]) {
                if (r)
                    for (const t of r.aOt())
                        if (t.ur().sD())
                            for (const i of t.aas()) f({ name: i.Zn(), kind: "Field", description: i.Woe().Zn() });
            } else if ("localVars" === u[0]) {
                if (r && a && a.akt())
                    for (const t of r.c_s(a.akt()))
                        t.JW() || f({ name: t.AAt(), kind: "Variable", description: t.xht() || " " });
            } else if (u.length >= 2 && ("runtime" === u[1] || "#runtime" === u[1])) {
                const t = u[0],
                    i = new Map([
                        ["mouse", "IMouseObjectType"],
                        ["keyboard", "IKeyboardObjectType"],
                        ["touch", "ITouchObjectType"],
                        ["layout", "ILayout"],
                        ["assets", "IAssetManager"],
                        ["collisions", "ICollisionEngine"],
                        ["storage", "IStorage"],
                        ["platformInfo", "IPlatformInfo"],
                    ]);
                if ("objects" === t) {
                    if (r) for (const t of r.aOt()) f({ name: t.Zn(), kind: "Field", description: t.ur().Zn() });
                } else if ("globalVars" === t) {
                    if (r) for (const t of r.l_s()) f({ name: t.AAt(), kind: "Variable", description: t.xht() || " " });
                } else if (i.has(t)) {
                    const e = i.get(t);
                    for (const t of vp.properties[e]) f({ name: t, kind: "Property", interfaceName: e });
                }
            } else if ("." === n) {
                p = !1;
                for (const [t, i] of Object.entries(vp.properties))
                    if ("global" !== t) for (const e of i) f({ name: e, kind: "Property", interfaceName: t });
            }
            d.sort((t, i) => cp.zri(t.name, i.name));
            const m = new Intl.ListFormat(globalThis.app.Lmt(), { style: "long", type: "conjunction" });
            return {
                suggestions: d.map((t) => {
                    let i = t.description,
                        e = null;
                    if (!i) {
                        const s = t.Nqe;
                        1 === s.size
                            ? (i = cp.vo(s))
                            : ((i = fp(
                                  "ui.bars.textEditor.autocomplete.multiple-interfaces-description",
                                  null,
                                  s.size
                              )),
                              (e = m.format([...s].sort(cp.zri))));
                    }
                    const n = {
                        insertText: t.name,
                        documentation: e,
                        kind: s[t.kind],
                        label: { description: i, label: t.name },
                    };
                    return p && (n.sortText = " " + t.name), n;
                }),
            };
        }
    };
}
{
    const Rp = self.t,
        kp = self.assert;
    (Rp.vRt = {}),
        (Rp.vRt.cts = function (t) {
            return Rp.GWt(
                (((i = t).startsWith("/") || i.startsWith("\\")) && (i = i.substring(1)),
                (i.endsWith("/") || i.endsWith("\\")) && (i = i.substring(0, i.length - 1)),
                i),
                "\\",
                "/"
            );
            var i;
        });
    const Op = Rp.m(Rp.pNt, 8);
    async function Dp(t, i) {
        const e = await t.createWritable();
        await e.write(i), await e.close();
    }
    (Rp.vRt.yRt = function (t, i) {
        return Rp.Et(t, FileSystemFileHandle), Op.BD(() => Dp(t, i));
    }),
        (Rp.vRt.a_s = async function (t, i, e) {
            Rp.Et(t, FileSystemDirectoryHandle), Rp.vu(i);
            const s = await t.getFileHandle(i, { create: !0 });
            await Rp.vRt.yRt(s, e);
        });
    const Fp = Rp.m(Rp.pNt, 8);
    async function Lp(t) {
        const i = await Rp.iEs(t);
        return await Rp.Crypto.eEs(i);
    }
    async function Bp(t, i) {
        try {
            const e = await t.getFile();
            if ("string" == typeof i) {
                let t = await Rp.Cle(e);
                if (((t = Rp.GWt(t, "\r\n", "\n")), i === t)) return;
            } else if (e.size === i.size) {
                const t = await Lp(e);
                if (t === (await Lp(i))) return;
            }
        } catch (i) {
            (() => {})(`Error reading file '${t.name}' to check for changes; proceeding to overwrite file: `, i);
        }
        await Rp.vRt.yRt(t, i);
    }
    function Up(t) {
        const i = Rp.ti.Ze.Ke("Confirm");
        return new Promise((e, s) => {
            i.OOe = async () => {
                Rp.ti.jqe.eD();
                try {
                    "granted" === (await t.requestPermission({ mode: "readwrite" }))
                        ? e()
                        : s(new Error("folder write permission denied"));
                } catch (t) {
                    s(t);
                } finally {
                    Rp.ti.jqe.Xrt();
                }
            };
            const n = "ui.folder-write-access-prompt";
            i.pr({
                caption: self.lang(n + ".caption"),
                message: self.lang(n + ".message"),
                jT: self.lang(n + ".confirm-text"),
            }).then((t) => {
                null === t && s(new Error("folder write permission denied"));
            });
        });
    }
    (Rp.vRt.$qe = async function (t, i, e) {
        Rp.Et(t, FileSystemDirectoryHandle), Rp.vu(i);
        const s = await t.getFileHandle(i, { create: !0 });
        await Fp.BD(() => Bp(s, e));
    }),
        (Rp.vRt.uts = async function (t, i, e) {
            if ((Rp.Et(t, FileSystemDirectoryHandle), Rp.vu(i), (e = !!e), !(i = Rp.vRt.cts(i)))) return t;
            const s = i.split("/");
            let n = t;
            for (const t of s) n = await n.getDirectoryHandle(t, { create: e });
            return n;
        }),
        (Rp.vRt.sEs = async function (t, i) {
            if ((Rp.Et(t, FileSystemDirectoryHandle), Rp.vu(i), !(i = Rp.vRt.cts(i)))) throw new Error("empty path");
            const e = i.split("/");
            let s = t;
            for (let t = 0, i = e.length - 1; t < i; ++t) {
                const i = e[t];
                s = await s.getDirectoryHandle(i, { create: !1 });
            }
            return s.getFileHandle(e.at(-1), { create: !1 });
        }),
        (Rp.vRt.zqe = async function (t, i) {
            return Rp.vRt.uts(t, i, !0);
        }),
        (Rp.vRt.Vqe = async function (t) {
            if ((Rp.Et(t, FileSystemDirectoryHandle), navigator.userActivation && navigator.userActivation.isActive))
                return;
            const i = await t.queryPermission({ mode: "readwrite" });
            if ("granted" !== i) {
                if ("denied" === i) throw new Error("folder write permission denied");
                "prompt" === i && (await Up(t));
            }
        }),
        (Rp.vRt.b_s = async function (t, i, e, s = !1) {
            Rp.Et(t, FileSystemDirectoryHandle), Rp.Et(i, Map), Rp.kDt(e);
            const n = new Map();
            for (const t of i.keys()) n.set(Rp.nj(t), null);
            for (const i of n.keys()) {
                const e = await Rp.vRt.zqe(t, i);
                n.set(i, e);
            }
            const r = [];
            for (const [t, e] of i) {
                const i = Rp.dts(t),
                    h = n.get(Rp.nj(t));
                kp(void 0 !== h, "cannot find folder handle"),
                    s ? r.push(Rp.vRt.$qe(h, i, e)) : r.push(Rp.vRt.a_s(h, i, e));
            }
            return e ? Rp.gke(r, e) : Promise.all(r);
        }),
        (Rp.vRt.Wqe = async function (t, i) {
            Rp.Et(t, FileSystemDirectoryHandle);
            const e = new Map();
            for (const t of i) e.set(Rp.nj(t), null);
            for (const i of e.keys()) {
                const s = await Rp.vRt.uts(t, i, !1);
                e.set(i, s);
            }
            const s = [];
            for (const t of i) {
                const i = Rp.dts(t),
                    n = e.get(Rp.nj(t));
                kp(void 0 !== n, "cannot find folder handle"),
                    s.push(
                        (async () => {
                            try {
                                await n.removeEntry(i, { recursive: !1 });
                            } catch (t) {
                                if ("NotFoundError" !== t.name) throw t;
                            }
                        })()
                    );
            }
            return Promise.all(s);
        }),
        (Rp.vRt.Hqe = async function (t, i) {
            Rp.Et(t, FileSystemDirectoryHandle);
            for (let e of i) {
                (e.endsWith("\\") || e.endsWith("/")) && (e = e.substr(0, e.length - 1));
                const i = Rp.dts(e),
                    s = Rp.nj(e),
                    n = await Rp.vRt.uts(t, s, !1);
                try {
                    await n.removeEntry(i, { recursive: !1 });
                } catch (t) {
                    if ("NotFoundError" !== t.name) throw t;
                }
            }
        }),
        (Rp.vRt.Kqe = async function (t, i) {
            Rp.Et(t, FileSystemDirectoryHandle), Rp.vu(i), (i = i.toLowerCase());
            for await (const e of t.values()) if ("file" === e.kind && e.name.toLowerCase().endsWith(i)) return e;
            return null;
        }),
        (Rp.vRt.o_s = async function (t, i) {
            Rp.Et(t, FileSystemDirectoryHandle), Rp.vu(i);
            try {
                return !!(await Rp.vRt.sEs(t, i));
            } catch (t) {
                return !1;
            }
        }),
        (Rp.vRt.pHi = async function (t, i) {
            Rp.Et(t, FileSystemDirectoryHandle), Rp.vu(i);
            const e = await Rp.vRt.sEs(t, i);
            if (e) return await e.getFile();
        });
}
{
    const Np = self.t;
    Np.u.ij("lib/ui/lang");
    const jp = ["fr", "px", "mm", "cm", "in", "pt", "pc", "vh", "vw", "vmin", "vmax", "em", "ex", "ch", "rem"],
        $p = ["auto", "top", "bottom", "options"];
    let zp = !1,
        Vp = null,
        Wp = window.innerWidth,
        Hp = window.innerHeight;
    window.addEventListener(
        "resize",
        () => {
            (Wp = window.innerWidth),
                (Hp = window.innerHeight),
                (document.scrollingElement.scrollTop = 0),
                setTimeout(() => {
                    (Wp = window.innerWidth), (Hp = window.innerHeight), (document.scrollingElement.scrollTop = 0);
                    const t = new CustomEvent("after-resize", { bubbles: !0, cancelable: !0, detail: {} });
                    window.dispatchEvent(t);
                }, 250);
        },
        !0
    );
    let Kp = NaN,
        qp = NaN,
        Xp = NaN;
    if (
        ((Np.ti = class {
            constructor() {
                throw new TypeError("static class can't be instantiated");
            }
            static qqe() {
                return zp;
            }
            static Tje(t) {
                (t = !!t) !== zp && ((zp = t), (document.getElementsByTagName("body")[0].dir = t ? "rtl" : "ltr"));
            }
            static Tz(t) {
                Np.Gmt(t), t && t.parentElement && t.parentElement.removeChild(t);
            }
            static Xqe(t) {
                Np.vu(t), Np.ti.Tz(document.getElementById(t));
            }
            static Yqe(t) {
                Np.vu(t);
                let i = document.querySelectorAll(t);
                for (let t = 0, e = i.length; t < e; ++t) Np.ti.Tz(i[t]);
            }
            static gj(t, i, e, s, n, r) {
                Np.vu(t), Np.Gmt(i), Np.k$(e), Np.Crt(n), Np.HI(r);
                let h = document;
                i && (h = i.ownerDocument);
                let o = h.createElement(t);
                if ((e && (o.id = e), s && (o.className = s), n))
                    for (let [t, i] of Object.entries(n))
                        "string" == typeof i ? o.setAttribute(t, i) : o.setAttribute(t, "");
                return i ? (Np.ti.g9t(o, i, r), o) : o;
            }
            static g9t(t, i, e) {
                if ((Np.Gct(t), Np.Gct(i), Np.HI(e), Np.Xl(e))) {
                    const s = i.children;
                    s.length > 0
                        ? e <= 0
                            ? i.insertBefore(t, s[0])
                            : e > 0 && e < s.length
                              ? i.insertBefore(t, s[e])
                              : i.appendChild(t)
                        : i.appendChild(t);
                } else i.appendChild(t);
            }
            static fMt(t) {
                Np.Gmt(t), t && (t.replaceChildren ? t.replaceChildren() : (t.innerHTML = ""));
            }
            static Jqe(t) {
                Np.Gct(t), t.offsetHeight;
            }
            static CT(t, i, e) {
                Np.Gct(t), Np.vu(i), e ? t.setAttribute(i, "") : t.removeAttribute(i);
            }
            static Zqe(t, i) {
                Np.Gct(t), Np.vu(i), Np.ti.CT(t, i, !t.hasAttribute(i));
            }
            static Qqe(t) {
                Vp = t;
            }
            static tXe() {
                return Vp;
            }
            static iXe(t) {
                return t === Vp;
            }
            static eXe() {
                return Wp;
            }
            static sXe() {
                return Hp;
            }
            static nXe() {
                let t = Np.ti.tXe();
                t && t.rXe(), Np.ti.uz.hXe(!0);
            }
            static oXe(t) {
                Np.vu(t);
                let i = parseFloat(t);
                if (i < 0) return !1;
                if (0 === i) return !0;
                let e = t.toLowerCase();
                for (let t = 0, i = jp.length; t < i; ++t) if (e.endsWith(jp[t])) return !0;
                return !1;
            }
            static H_(t, i, e = "auto", s = {}) {
                if ((Np.Gct(t), Np.Gmt(i), Np.vu(e), Np.oN(s), !$p.includes(e)))
                    throw new Error(`"${e}" is not a supported value. Use any of: ${$p.toString()}`);
                i || (i = Np.TOe(t));
                const n = t.getBoundingClientRect(),
                    r = i.getBoundingClientRect();
                switch (e) {
                    case "auto":
                        n.top < r.top
                            ? (t.scrollIntoView(!0), (i.scrollTop -= 5))
                            : n.bottom > r.bottom && (t.scrollIntoView(!1), (i.scrollTop += 5));
                        break;
                    case "top":
                        t.scrollIntoView(!0), (i.scrollTop -= 5);
                    case "bottom":
                        t.scrollIntoView(!1), (i.scrollTop += 5);
                    case "options":
                        (n.top >= r.top && n.left >= r.left && n.bottom <= r.bottom && n.right <= r.right) ||
                            t.scrollIntoView(s);
                }
            }
            static oJ(t, i) {
                if ((Np.Crt(i), i || (i = {}), !Np.tet(t) && !Np.vwt(t))) throw new Error("unexpected argument");
                let e = i.parent || document.body,
                    s = i.tag || "div",
                    n = i.lJ || null,
                    r = i.aXe,
                    h = i.className,
                    o = i.id,
                    a = !1;
                n || ((n = document.createElement(s)), (a = !0)),
                    r && n.setAttribute(r, ""),
                    h && (n.className = h),
                    o && (n.id = o),
                    a && e.appendChild(n);
                let l,
                    u = window.getComputedStyle(n);
                if (Np.tet(t)) l = u.getPropertyValue(t);
                else if (Np.vwt(t)) for (let i of t) if (((l = u.getPropertyValue(i)), l)) break;
                return a && e.removeChild(n), l;
            }
            static _Bt() {
                if (isNaN(Kp)) {
                    let t = Np.ti.oJ("width", { className: "width100em" });
                    if (!t.endsWith("px")) throw new Error("expected em size in px");
                    Kp = parseFloat(t) / 100;
                }
                return Kp;
            }
            static MBt() {
                if (isNaN(qp)) {
                    const t = Np.ti.oJ("--window-border-size");
                    if (!t.endsWith("px")) throw new Error("--window-border-size must specify size in units of 'px'");
                    qp = parseFloat(t) || 7;
                }
                return qp;
            }
            static lXe() {
                if (isNaN(Xp)) {
                    let t = Np.ti.oJ("--window-thin-border-size");
                    if (!t.endsWith("px")) throw new Error("--window-border-size must specify size in units of 'px'");
                    Xp = parseFloat(t) || 1;
                }
                return Xp;
            }
            static uXe() {
                return Np.ti.MBt();
            }
            static uJt(t) {
                t.preventDefault();
            }
            static int(t) {
                t.stopPropagation();
            }
            static sue(t) {
                t.preventDefault(), t.stopPropagation();
            }
            static fK(t, i, e, s) {
                return (
                    Np.wi(t),
                    Np.wi(i),
                    Np.qm(e, Np.ti.QO.drt),
                    e && !s && (s = e.Az()),
                    Np.ti.LO.cTi(t, i, s) || Np.ti.SK.cTi(t, i, s) || Np.ti.uz.cXe(t, i, e)
                );
            }
            static dXe() {
                const t = document.body.parentElement;
                if (
                    (t.removeAttribute("mobile"),
                    t.removeAttribute("desktop"),
                    Np.fk && Np.fk.ZP ? t.setAttribute("mobile", "") : t.setAttribute("desktop", ""),
                    Np.fk.l7i)
                ) {
                    const t = document.createElement("link");
                    (t.rel = "stylesheet"), (t.href = "loader/iosOnlyStyles.css"), document.head.appendChild(t);
                }
            }
            static fXe() {
                return "function" == typeof window.getScreenDetails;
            }
            static async pXe() {
                if (Np.ti.fXe())
                    try {
                        await window.getScreenDetails();
                    } catch (t) {
                        (() => {})("Failed to get window management permission: ", t);
                    }
            }
        }),
        "loading" === document.readyState
            ? document.addEventListener("DOMContentLoaded", Np.ti.dXe)
            : (Np.ti.dXe(),
              CSS.supports("contain", "content") || document.body.parentElement.setAttribute("no-containment", "")),
        !Np.Xr)
    ) {
        let Yp = new Set(["input", "textarea", "datalist"]);
        document.addEventListener("contextmenu", (t) => {
            let i = t.target,
                e = i.tagName.toLowerCase();
            Yp.has(e) || Np.hWt(i) || t.preventDefault();
        }),
            document.addEventListener(
                "mousewheel",
                (t) => {
                    (Np.rE.kQ(t) || t.ctrlKey) && t.preventDefault();
                },
                { passive: !1 }
            ),
            document.addEventListener(
                "wheel",
                (t) => {
                    (Np.rE.kQ(t) || t.ctrlKey) && t.preventDefault();
                },
                { passive: !1 }
            );
    }
}
{
    const Jp = self.t,
        Zp = new WeakMap();
    function Qp(t) {
        let i = Zp.get(t);
        return i || ((i = Jp.m(Jp.ti.OF.Document, t)), Zp.set(t, i)), i;
    }
    class tm {
        constructor() {
            throw new Error("static class");
        }
        static o(t, i) {
            Jp.UAe(t, "#document"), Jp.qm(i, Jp.ti.Ze), Qp(t).o(i);
        }
        static it(t) {
            Qp(t).it();
        }
        static HDt(t, i, e) {
            return Qp(t).mXe().HDt(i, e);
        }
        static PF(t, i, e, s, n) {
            return Qp(i).mXe().wXe(t, e, s, n);
        }
        static kF(t) {
            Jp.qm(t, Jp.ti.OF.gXe), t && t.eZt().yXe(t);
        }
        static jIt(t) {
            const i = Qp(t);
            return [i.dQ(), i.pQ()];
        }
    }
    Jp.ti.OF = tm;
}
{
    const im = self.t;
    class em {
        constructor(t) {
            im.UAe(t, "#document"),
                (this.ZXi = t),
                (this.bXe = []),
                (this.v4 = 0),
                (this.g4 = 0),
                this.ZXi.addEventListener(
                    "pointermove",
                    (t) => {
                        (this.v4 = t.clientX), (this.g4 = t.clientY);
                    },
                    !0
                ),
                this.o();
        }
        CF() {
            return this.ZXi;
        }
        mXe() {
            return this.bXe.at(-1);
        }
        dQ() {
            return this.v4;
        }
        pQ() {
            return this.g4;
        }
        o(t) {
            this.bXe.length > 0 && this.bXe.at(-1).vXe(), this.bXe.push(im.m(im.ti.OF.Pue, this, t));
        }
        it() {
            if (this.bXe.length <= 1) throw new Error("cannot pop last context");
            this.bXe.pop().Ut(), this.bXe.at(-1).xPi();
        }
    }
    im.ti.OF.Document = em;
}
{
    const sm = self.t,
        nm = 128,
        rm = "default",
        hm = new Map([
            ["progress", "cursorBackgroundWait"],
            ["wait", "cursorWait"],
            ["crosshair", "cursorCrosshair"],
            ["move", "cursorMove"],
            ["not-allowed", "cursorNotAllowed"],
            ["col-resize", "cursorResizeCol"],
            ["row-resize", "cursorResizeRow"],
            ["ns-resize", "cursorResizeNS"],
            ["ew-resize", "cursorResizeEW"],
            ["nwse-resize", "cursorResizeNWSE"],
            ["nesw-resize", "cursorResizeNESW"],
            ["grab", "cursorGrab"],
            ["grabbing", "cursorGrabbing"],
            ["rotate-topleft", "cursorRotateTL"],
            ["rotate-top", "cursorRotateTop"],
            ["rotate-topright", "cursorRotateTR"],
            ["rotate-right", "cursorRotateRight"],
            ["rotate-bottomright", "cursorRotateBR"],
            ["rotate-bottom", "cursorRotateBottom"],
            ["rotate-bottomleft", "cursorRotateBL"],
            ["rotate-left", "cursorRotateLeft"],
            ["pointer", "cursorPointer"],
        ]);
    class om {
        constructor(t, i) {
            sm.Et(t, sm.ti.OF.Document),
                (this.SXe = t),
                (this.c8t = i),
                (this.obi = i ? i.FO() : t.CF().body),
                (this.Zu = !0),
                (this.xXe = []),
                (this.MXe = null),
                (this.EXe = ""),
                (this.CXe = (t) => {
                    this._Xe(t.clientX - nm / 2, t.clientY - nm / 2);
                }),
                (this.MXe = sm.ti.gj("div", this.obi, null, "docCursorOverlayElem")),
                this.TXe();
        }
        Ut() {
            this.Zu && this.vXe(),
                sm.yh(this.xXe),
                sm.ti.Tz(this.MXe),
                (this.MXe = null),
                (this.CXe = null),
                (this.obi = null),
                (this.SXe = null);
        }
        CF() {
            return this.SXe.CF();
        }
        Az() {
            return this.CF().defaultView;
        }
        IXe() {
            return this.MXe;
        }
        PXe() {
            return this.EXe;
        }
        GXe(t) {
            sm.vu(t), (this.EXe = t);
        }
        _Xe(t, i) {
            sm.wi(t), sm.wi(i);
            let e = 0,
                s = 0;
            this.c8t && ((e = this.c8t.Hgi()), (s = this.c8t.Jgi())),
                (this.MXe.style.transform = `translate(${t - e}px,${i - s}px)`);
        }
        TXe() {
            this._Xe(2 * -nm, 2 * -nm);
        }
        xPi() {
            if (this.Zu) throw new Error("already active");
            const t = this.xXe;
            t.length > 0 && (this.Az().addEventListener("pointermove", this.CXe, !0), t.at(-1).AXe()), (this.Zu = !0);
        }
        vXe() {
            if (!this.Zu) throw new Error("already inactive");
            const t = this.xXe;
            t.length > 0 && (t.at(-1).zb(), this.Az().removeEventListener("pointermove", this.CXe, !0), this.TXe()),
                (this.Zu = !1);
        }
        RXe(t) {
            sm.Et(t, sm.ti.OF.gXe);
            const i = this.xXe,
                e = i.length;
            return e > 0 && i[e - 1] === t;
        }
        wXe(t, i, e, s) {
            if ((sm.vu(t), t !== rm && !hm.has(t))) throw new RangeError(`invalid mouse cursor name '${t}'`);
            (sm.Xl(i) && sm.Xl(e)) || ((i = this.SXe.dQ()), (e = this.SXe.pQ()));
            const n = this.xXe;
            if (n.length >= 100) throw new Error("pushed too many mouse cursors");
            const r = sm.m(sm.ti.OF.gXe, this, t, s);
            return (
                this.Zu &&
                    (0 === n.length ? this.Az().addEventListener("pointermove", this.CXe, !0) : n.at(-1).zb(),
                    r.AXe(),
                    this._Xe(i - nm / 2, e - nm / 2)),
                n.push(r),
                r
            );
        }
        yXe(t) {
            if ((sm.qm(t, sm.ti.OF.gXe), !t)) return;
            if (t.eZt() !== this) throw new Error("popping cursor in wrong context");
            const i = this.xXe,
                e = i.indexOf(t);
            if (e < 0) return;
            const s = e === i.length - 1;
            i.splice(e, 1),
                t.Ut(),
                this.Zu &&
                    (0 === i.length
                        ? (this.Az().removeEventListener("pointermove", this.CXe, !0), this.TXe())
                        : s && i.at(-1).AXe());
        }
        HDt(t, i) {
            sm.wi(t), sm.wi(i);
            const e = this.CF(),
                s = sm.kat(e, t, i);
            return s.length > 0 && s[0] === this.MXe && s.shift(), s.length > 0 ? s[0] : null;
        }
        static kXe() {
            return rm;
        }
        static OXe() {
            return hm;
        }
    }
    sm.ti.OF.Pue = om;
}
{
    const am = self.t;
    class lm {
        constructor(t, i, e) {
            am.Et(t, am.ti.OF.Pue),
                am.vu(i),
                am.Crt(e),
                (this.mXt = t),
                (this.DXe = i),
                (this.dXt = e),
                (this.FXe = null);
        }
        eZt() {
            return this.mXt;
        }
        CF() {
            return this.eZt().CF();
        }
        IXe() {
            return this.eZt().IXe();
        }
        PXe() {
            return this.mXt.PXe();
        }
        GXe(t) {
            this.mXt.GXe(t);
        }
        Set(t) {
            am.vu(t), this.DXe !== t && ((this.DXe = t), this.mXt.RXe(this) && this.LXe());
        }
        AXe() {
            this.LXe(), this.BXe();
        }
        zb() {
            this.pMt(), this.UXe();
        }
        LXe() {
            if (this.DXe === am.ti.OF.Pue.kXe()) return void this.pMt();
            const t = am.ti.OF.Pue.OXe().get(this.DXe);
            self.assert(t, "invalid cursor class"),
                this.PXe() !== t && (this.pMt(), this.IXe().classList.add(t), this.GXe(t));
        }
        pMt() {
            const t = this.PXe();
            t && this.IXe().classList.remove(t), this.GXe("");
        }
        BXe() {
            const t = this.IXe(),
                i = this.dXt;
            if (!i) return;
            const e = i.KGt;
            e
                ? ((this.FXe = (t) => am.Pat(t, e)),
                  t.addEventListener("pointerdown", this.FXe),
                  t.addEventListener("mousewheel", this.FXe, { passive: !1 }))
                : (i.onpointerdown && t.addEventListener("pointerdown", i.onpointerdown),
                  i.onpointermove && t.addEventListener("pointermove", i.onpointermove),
                  i.onpointerup && t.addEventListener("pointerup", i.onpointerup),
                  i.onpointercancel && t.addEventListener("pointercancel", i.onpointercancel),
                  i.onwheel && t.addEventListener("wheel", i.onwheel),
                  i.contextmenu && t.addEventListener("contextmenu", i.contextmenu));
        }
        UXe() {
            const t = this.IXe(),
                i = this.dXt;
            this.FXe
                ? (t.removeEventListener("pointerdown", this.FXe),
                  t.removeEventListener("mousewheel", this.FXe, { passive: !1 }),
                  (this.FXe = null))
                : i &&
                  (i.onpointerdown && t.removeEventListener("pointerdown", i.onpointerdown),
                  i.onpointermove && t.removeEventListener("pointermove", i.onpointermove),
                  i.onpointerup && t.removeEventListener("pointerup", i.onpointerup),
                  i.onpointercancel && t.removeEventListener("pointercancel", i.onpointercancel),
                  i.onwheel && t.removeEventListener("wheel", i.onwheel),
                  i.contextmenu && t.removeEventListener("contextmenu", i.contextmenu));
        }
        Ut() {
            this.zb(), (this.mXt = null), (this.dXt = null);
        }
    }
    am.ti.OF.gXe = lm;
}
{
    const um = self.t;
    let cm = "",
        dm = !1,
        fm = null,
        pm = null;
    const mm = new Map();
    um.ti.VW = class {
        constructor() {
            throw new TypeError("static class can't be instantiated");
        }
        static gYt(t) {
            um.vu(t);
            const i = `theme/${t}/import.html`;
            return window.addImport(i, !0).then((t) => {
                if (dm) throw new Error("can't change theme at runtime yet");
                (cm = um.nj(t.URL)), (dm = !0);
            });
        }
        static Gft() {
            if (!dm) throw new Error("theme not loaded yet");
            return cm;
        }
        static NXe() {
            if (!dm) throw new Error("theme not loaded yet");
            return cm + "icons/";
        }
        static jXe() {
            return pm
                ? Promise.resolve(pm)
                : fm ||
                      ((fm = um
                          .MNt(um.ti.VW.NXe() + "precompiled-icons.json")
                          .then((t) => ((pm = t), (fm = null), pm))),
                      fm);
        }
        static $Xe() {
            return um.ti.VW.NW("--default-icon-color");
        }
        static NW(t, i) {
            um.vu(t), um.Gmt(i);
            let e = mm.get(t);
            return e || ((e = um.ti.oJ(t, i ? { lJ: i } : null)), mm.set(t, e), e);
        }
        static async zXe() {
            const t = [];
            for (const i of self.app.VXe()) t.push(i.WXe());
            await Promise.all(t);
        }
        static HXe() {
            mm.clear(), um.ti.VW.zXe();
        }
        static Eqe() {
            return "dark" === um.ti.VW.NW("--c3logo-type").trim();
        }
    };
}
{
    const wm = self.t,
        gm = self.assert,
        ym = new Map(),
        bm = "PersistantMap",
        vm = localforage.OBe({ name: bm });
    function Sm() {
        Pm || vm.setItem(Cm, [...Mm]).catch((t) => self.app.cme(t));
    }
    function xm() {
        Gm || vm.setItem(_m, [...Em]).catch((t) => self.app.cme(t));
    }
    let Mm = new Map(),
        Em = new Map();
    const Cm = "UI_STATE",
        _m = "UI_USERDATA",
        Tm = wm.m(wm.kj, Sm, 1e3),
        Im = wm.m(wm.kj, xm, 1e3);
    let Pm = !1,
        Gm = !1;
    async function Am() {
        try {
            const t = await Promise.all([vm.getItem(Cm), vm.getItem(_m)]);
            (Mm = new Map(t[0])), (Em = new Map(t[1]));
        } catch (t) {
            (Mm = new Map()), (Em = new Map()), console.error("[Construct] Error loading persistance data: ", t);
        }
    }
    wm.E4s.ZRs("default-layout") || wm.KTe(Am());
    let Rm = -1,
        km = null;
    wm.ti.Window = class extends wm.Event.aG {
        constructor(t, i) {
            wm.Gct(t),
                wm.k$(i),
                super(),
                (this.mht = t),
                this.mht.addEventListener("focusin", (t) => {
                    this.gu() &&
                        (t.stopPropagation(),
                        -1 !== Rm && window.clearTimeout(Rm),
                        (km = this),
                        (Rm = window.setTimeout(() => {
                            (Rm = -1), (km = null), wm.ti.cE.lE(this);
                        }, 50)));
                }),
                (this.Gqt = i || ""),
                (this.KXe = null),
                (this.qXe = !1),
                (this.Sms = -1),
                (this.XXe = null),
                (this.YXe = !1),
                (this.T3 = 0),
                (this.E3 = 0),
                (this.JXe = 0),
                (this.ZXe = 0),
                (this.QXe = ""),
                (this.q8 = 0),
                (this.Q8 = 0),
                (this.t9 = 0),
                (this.i9 = 0),
                (this.tYe = !1),
                wm.ti.cE.iYe(this);
        }
        eYe() {
            km === this && (window.clearTimeout(Rm), (Rm = -1), (km = null));
        }
        zb() {
            gm(!this.tYe, "window already removed"),
                this.eYe(),
                wm.ti.cE.Cz(this),
                wm.ti.Tz(this.mht),
                (this.mht = null),
                (this.tYe = !0),
                this.KXe && ym.delete(this.KXe),
                (this.KXe = null),
                super.Ut();
        }
        sYe() {
            return this.tYe;
        }
        FO() {
            return gm(!this.tYe, "using removed window"), this.mht;
        }
        CF() {
            return this.mht.ownerDocument;
        }
        Az() {
            const t = this.CF();
            return t ? t.defaultView : null;
        }
        Zn() {
            return this.Gqt;
        }
        k(t) {
            wm.vu(t), (this.Gqt = t);
        }
        tQt(t) {
            if ((wm.vu(t), ym.has(t))) throw new Error("Identifier already in use");
            ym.set(t, this), (this.KXe = t);
        }
        nYe() {
            return this.KXe;
        }
        mbe(t) {
            Em.set(this.KXe, t), Im.uE();
        }
        rYe() {
            Em.clear(), xm(), (Gm = !0);
        }
        dbe() {
            return Em.get(this.KXe);
        }
        hYe() {
            return Em.has(this.KXe);
        }
        b4i(t) {
            Mm.set(this.KXe, t), Tm.uE();
        }
        oYe() {
            Mm.clear(), Sm(), (Pm = !0);
        }
        gzt() {
            return Mm.get(this.KXe);
        }
        Jge() {
            return Mm.has(this.KXe);
        }
        aYe() {
            throw new Error("derived class must override");
        }
        KW() {
            this.aYe() && wm.ti.cE.KW(this);
        }
        Bws(t) {
            wm.wi(t);
            let i = this.FO();
            (i.style.zIndex = t < 0 ? "" : t), (this.Sms = t);
        }
        lYe() {
            return this.Sms;
        }
        static xY(t, i) {
            return t.lYe() - i.lYe();
        }
        xz() {
            wm._2();
        }
        gu() {
            return !0;
        }
        hst() {
            return this.qXe;
        }
        uYe(t) {
            (t = !!t), this.qXe !== t && ((this.qXe = t), wm.ti.CT(this.mht, "active", this.qXe));
        }
        ent() {
            this.XXe = null;
        }
        cYe() {
            this.XXe = this.FO().getBoundingClientRect();
        }
        jvt() {
            return gm(!this.tYe, "using removed window"), this.XXe || this.cYe(), this.XXe;
        }
        uF(t, i) {
            wm.wi(t), wm.wi(i);
            let e = this.jvt();
            return t >= e.left && t < e.right && i >= e.top && i < e.bottom;
        }
        dYe() {
            return this;
        }
        Uj(t) {
            let i = new wm.Event("keydown", !0);
            (i.which = t.which),
                (i.altKey = t.altKey),
                (i.ctrlKey = t.ctrlKey),
                (i.shiftKey = t.shiftKey),
                (i.metaKey = t.metaKey),
                this.dispatchEvent(i) || t.preventDefault();
        }
        PR(t) {
            let i = new wm.Event("keyup", !0);
            (i.which = t.which),
                (i.altKey = t.altKey),
                (i.ctrlKey = t.ctrlKey),
                (i.shiftKey = t.shiftKey),
                (i.metaKey = t.metaKey),
                this.dispatchEvent(i) || t.preventDefault();
        }
        n6t(t) {
            let i = new wm.Event("keypress", !0);
            (i.which = t.which),
                (i.altKey = t.altKey),
                (i.ctrlKey = t.ctrlKey),
                (i.shiftKey = t.shiftKey),
                (i.metaKey = t.metaKey),
                (i.key = t.key),
                this.dispatchEvent(i) || t.preventDefault();
        }
        Lj(t) {
            let i = new wm.Event("cut", !0);
            (i.clipboardData = t.clipboardData), this.dispatchEvent(i) || t.preventDefault();
        }
        Vj(t) {
            let i = new wm.Event("copy", !0);
            (i.clipboardData = t.clipboardData), this.dispatchEvent(i) || t.preventDefault();
        }
        $j(t) {
            let i = new wm.Event("paste", !0);
            (i.clipboardData = t.clipboardData), (i.T$ = t.T$), this.dispatchEvent(i) || t.preventDefault();
        }
        Rj(t) {
            let i = new wm.Event("keyboardshortcut", !0);
            return (i.label = t), this.dispatchEvent(i), i.defaultPrevented;
        }
        fYe(t, i) {
            wm.wi(t), wm.wi(i), (this.T3 = t), (this.E3 = i);
        }
        pYe() {
            return this.T3;
        }
        mYe() {
            return this.E3;
        }
        wYe(t, i) {
            wm.wi(t), wm.wi(i), (this.JXe = t), (this.ZXe = i);
        }
        gYe() {
            return this.JXe;
        }
        yYe() {
            return this.ZXe;
        }
        bYe(t) {
            this.QXe = t;
        }
        vYe() {
            return this.QXe;
        }
        SYe(t, i) {
            wm.wi(t), wm.wi(i), (this.q8 = t), (this.Q8 = i);
        }
        xYe() {
            return this.q8;
        }
        MYe() {
            return this.Q8;
        }
        EYe(t, i) {
            wm.wi(t), wm.wi(i), (this.t9 = t), (this.i9 = i);
        }
        CYe() {
            return this.t9;
        }
        _Ye() {
            return this.i9;
        }
        lj(t) {
            this.YXe = !!t;
        }
        TYe() {
            return !self.app.Skt() && this.YXe;
        }
        bK() {
            return !1;
        }
    };
}
{
    const Om = self.t,
        Dm = self.assert;
    let Fm = [],
        Lm = null,
        Bm = null;
    const Um = [],
        Nm = 8;
    function jm(t) {
        t && ($m(t), Um.push(t), Um.length > Nm && Um.shift());
    }
    function $m(t) {
        Om.xei(Um, t);
    }
    let zm = 0,
        Vm = "",
        Wm = -1;
    const Hm = 1e3;
    function Km() {
        (Vm = ""), (Wm = -1);
    }
    function qm(t) {
        t.document.addEventListener("pointerdown", (i) => {
            Om.Lh() &&
                Om.ti.cE.IYe() &&
                Om.ti.cE.cgi(t, i.clientX, i.clientY, i.pointerId, i.button) &&
                (i.preventDefault(), i.stopPropagation());
        }),
            t.document.addEventListener("keydown", (t) => {
                Om.ti.cE.Uj(t);
            }),
            t.document.addEventListener("keypress", (t) => {
                Om.ti.cE.n6t(t);
            }),
            t.document.addEventListener("keyup", (t) => {
                Om.ti.cE.PR(t);
            }),
            t.document.addEventListener("cut", (t) => {
                Om.ti.cE.Lj(t);
            }),
            t.document.addEventListener("copy", (t) => {
                Om.ti.cE.Vj(t);
            }),
            t.document.addEventListener("paste", (t) => {
                Om.ti.cE.$j(t);
            }),
            t.addEventListener("blur", (t) => {
                (Bm = Lm), Om.ti.cE.lE(null);
            }),
            t.addEventListener("focus", (t) => {
                !Lm && Bm && Om.ti.cE.lE(Bm), (Bm = null);
            });
    }
    window.C3_IsPopupWindow || qm(window);
    class Xm extends Om.Event.aG {
        constructor() {
            super();
        }
        Krt(t) {
            Om.Gct(t);
            for (const i of Fm) if (i.FO() === t) return i;
            return null;
        }
        iYe(t) {
            Om.Et(t, Om.ti.Window), Fm.push(t);
        }
        Cz(t) {
            Om.Et(t, Om.ti.Window), this.PYe(t), Bm === t && (Bm = null);
            let i = Fm.indexOf(t);
            Dm(i >= 0, "cannot find window"), Fm.splice(i, 1), this.GYe();
        }
        *tnt(t) {
            for (let i = Fm.length - 1; i >= 0; --i) {
                const e = Fm[i];
                (t && e.Az() !== t) || (yield e);
            }
        }
        *GOe(t) {
            for (let i of Fm) (t && i.Az() !== t) || (yield i);
        }
        cgi(t, i, e, s, n) {
            Om.wi(i), Om.wi(e), Om.wi(s);
            let r = Om.ti.SK.o$i();
            if (r && r.eU()) {
                for (let t of r.AYe()) if (t.uF(i, e)) return this.lE(t.dYe()), !1;
                if (r.uF(i, e)) return this.lE(r.dYe()), !1;
            } else
                for (let s of this.tnt(t))
                    if (s.uF(i, e) && (!r || s === r) && (!(s instanceof Om.ti.Ze) || !s.lwe()))
                        return this.lE(s.dYe()), !1;
        }
        KW(t) {
            Om.Et(t, Om.ti.Window);
            let i = Fm.indexOf(t);
            i < 0 || (Fm.splice(i, 1), Fm.push(t), this.GYe());
        }
        GYe() {
            let t = [];
            for (let i of Fm) i.aYe() || (i.Bws(-1), t.push(i));
            let i = Om.Y$.h$i ? 1 : 100;
            for (let e of Fm) e.aYe() && (e.Bws(i++), t.push(e));
            if (!Om.zie(t, Fm)) {
                Om.Rm(Fm, t);
                let i = new Om.Event("zindexchanged");
                this.dispatchEvent(i);
            }
        }
        RYe(t) {
            return t instanceof Om.ti.Ze && t.e6i();
        }
        lE(t, i) {
            if ((Om.qm(t, Om.ti.Window), Lm === t)) return;
            const e = Om.ti.SK.o$i();
            if (e && e.gu() && e !== t && !e.gZ().includes(t) && !this.RYe(t)) return;
            (Vm = ""),
                -1 !== Wm && (window.clearTimeout(Wm), (Wm = -1)),
                Lm && Lm.uYe(!1),
                (Lm = t),
                Lm && (i || this.KW(Lm), Lm.uYe(!0)),
                jm(t);
            let s = new Om.Event("activewindowchange");
            this.dispatchEvent(s);
        }
        Wq() {
            return Lm;
        }
        Uj(t) {
            t.which === Om.fO.oO && Om.ti.SK.kYe() ? t.preventDefault() : Lm && Lm.Uj(t);
        }
        PR(t) {
            Lm && Lm.PR(t);
        }
        n6t(t) {
            if (!t.key || !Lm) return;
            const i = Lm.FO().ownerDocument;
            if ((Lm && Lm.n6t(t), Om.Put(i))) return;
            (Vm += t.key), -1 !== Wm && window.clearTimeout(Wm), (Wm = window.setTimeout(Km, Hm));
            const e = new Om.Event("searchinput");
            (e.OYe = Vm), Lm.dispatchEvent(e);
        }
        Lj(t) {
            self.app.UT() || (Lm && Lm.Lj(t));
        }
        Vj(t) {
            self.app.UT() || (Lm && Lm.Vj(t));
        }
        $j(t) {
            self.app.UT() || (Lm && Lm.$j(t));
        }
        PYe(t) {
            if ((Om.Et(t, Om.ti.Window), $m(t), t === Lm)) {
                for (let t = Um.length - 1; t >= 0; --t) {
                    const i = Um[t];
                    if (i.gu() && i.xz() && !i.bK()) return void this.lE(i, !0);
                }
                for (let i = Fm.length - 1; i >= 0; --i) {
                    const e = Fm[i];
                    if (e !== t && e.gu() && e.xz() && !e.bK()) return void this.lE(e, !0);
                }
                this.lE(null);
            }
        }
        cTi(t, i, e, s) {
            Om.wi(t), Om.wi(i), Om.qm(e, Om.ti.Window);
            let n = Om.ti.SK.o$i();
            if (n && n.eU()) {
                for (let s of n.AYe()) if (s !== e && s.uF(t, i)) return !0;
                if (n === e) return !1;
                if (n.uF(t, i)) return !0;
            } else for (let n of this.tnt(s)) if (n !== e && n.uF(t, i)) return !0;
            return !1;
        }
        DYe(t, i, e, s) {
            Om.wi(t), Om.wi(i), Om.Et(e, Om.ti.Window);
            let n = Om.ti.SK.o$i();
            if (n && n.eU()) {
                for (let s of n.AYe()) {
                    if (s === e) return !1;
                    if (s.uF(t, i)) return !0;
                }
                if (n === e) return !1;
                if (n.uF(t, i)) return !0;
            } else
                for (let n of this.tnt(s)) {
                    if (n === e) return !1;
                    if (n.uF(t, i)) return !0;
                }
            throw new Error("couldn't find window");
        }
        FYe(t) {
            t ? --zm : ++zm, Dm(zm >= 0, "disabled window sizing too many times");
        }
        IYe() {
            return 0 === zm;
        }
    }
    Om.ti.cE = Om.m(Xm);
}
{
    const Ym = self.t;
    !!window.C3_IsPopupWindow
        ? (window.addEventListener("cut", () => {
              window.opener.postMessage({ type: "clipboard", event: "cut" }, location.origin);
          }),
          window.addEventListener("copy", () => {
              window.opener.postMessage({ type: "clipboard", event: "copy" }, location.origin);
          }),
          window.addEventListener("paste", (t) => {
              window.opener.postMessage(
                  { type: "clipboard", event: "paste", clipboardDataString: t.clipboardData.getData("text/plain") },
                  location.origin
              );
          }))
        : window.addEventListener("message", (t) => {
              t.origin === location.origin && Ym.ti.LYe.QHe(t.source, t.data);
          });
    let Jm = new Set(),
        Zm = new Map();
    const Qm = { features: "", name: null, ugt: null, BYe: !0 };
    Ym.ti.LYe = class {
        constructor() {
            throw new TypeError("static class can't be instantiated");
        }
        static UYe(t, i, e, s, n, r) {
            let h, o;
            Ym.vu(t),
                Ym.vu(i),
                Ym.wi(e),
                Ym.wi(s),
                Ym.HI(n),
                Ym.HI(r),
                (h = "number" == typeof n ? n : window.screenX + window.outerWidth / 2 - e / 2),
                (o = "number" == typeof r ? r : window.screenY + window.outerHeight / 2 - s / 2);
            let a = `width=${e},height=${s},left=${h},top=${o},menubar=no,toolbar=no,location=no,personalbar=no,status=no,dependent=yes,dialog=yes,resizable=yes,scrollbars=no`,
                l = window.open(t, i, a);
            return new Promise((t, i) => {
                l ? Zm.set(l, { resolve: t, reject: i }) : i();
            });
        }
        static QHe(t, i) {
            if (i && "object" == typeof i && "string" == typeof i.type)
                switch (i.type) {
                    case "ready":
                        Ym.ti.LYe.NYe(t);
                        break;
                    case "popup-keyboard-shortcut":
                        Ym.ti.LYe.jYe(i.event);
                        break;
                    case "popup-keydown":
                        Ym.ti.LYe.$Ye(i.event);
                        break;
                    case "popup-keyup":
                        Ym.ti.LYe.zYe(i.event);
                        break;
                    case "popup-keypress":
                        Ym.ti.LYe.VYe(i.event);
                        break;
                    case "clipboard":
                        Ym.ti.LYe.WYe(i);
                        break;
                    case "closed":
                        Ym.ti.LYe.HYe(t);
                }
        }
        static NYe(t) {
            Jm.add(t);
            let i = Zm.get(t);
            i || 1 !== Zm.size || (i = Ym.vo(Zm.values())), i && i.resolve({ window: t }), Zm.delete(t);
            let e = [];
            const s = Ym.Aue.KYe();
            s && (e = s.qYe()),
                Ym.ti.LYe.XYe(t, "init-settings", { uiEffectsEnabled: self.app.zQ(), themeStyles: e }),
                Ym.ti.SK.YYe(t);
        }
        static HYe(t) {
            Jm.delete(t);
            let i = Zm.get(t);
            i && i.reject(t), Zm.delete(t);
        }
        static XYe(t, i, e) {
            t.postMessage({ type: i, param: e }, location.origin);
        }
        static jYe(t) {
            (t.preventDefault = function () {}), (t.stopPropagation = function () {}), (t.JYe = !1);
            const i = new Ym.Event("external-keyboard-shortcut");
            if (((i._ot = t), self.app.dispatchEvent(i), !t.JYe)) {
                const i = Ym.ti.cE.Wq();
                i && i.Uj(t);
            }
        }
        static $Ye(t) {
            (t.preventDefault = function () {}), (t.stopPropagation = function () {});
            const i = new Ym.Event("external-keydown");
            (i._ot = t), self.app.dispatchEvent(i), window.dispatchEvent(new KeyboardEvent("external-keydown", t));
            const e = Ym.ti.cE.Wq();
            e && e.Uj(t);
        }
        static zYe(t) {
            (t.preventDefault = function () {}), (t.stopPropagation = function () {});
            const i = new Ym.Event("external-keyup");
            (i._ot = t), self.app.dispatchEvent(i), window.dispatchEvent(new KeyboardEvent("external-keyup", t));
            const e = Ym.ti.cE.Wq();
            e && e.PR(t);
        }
        static VYe(t) {
            (t.preventDefault = function () {}), (t.stopPropagation = function () {});
            const i = new Ym.Event("external-keypress");
            (i._ot = t), self.app.dispatchEvent(i), window.dispatchEvent(new KeyboardEvent("external-keypress", t));
            const e = Ym.ti.cE.Wq();
            e && e.n6t(t);
        }
        static WYe(t) {
            const i = t.event,
                e = { clipboardData: null, preventDefault() {}, stopPropagation() {} },
                s = Ym.ti.cE.Wq();
            s && ("cut" === i ? s.Lj(e) : "copy" === i ? s.Vj(e) : ((e.T$ = t.clipboardDataString), s.$j(e)));
        }
        static ZYe(t) {
            t = !!t;
            for (let i of Jm) Ym.ti.LYe.XYe(i, "show-dimmer", t);
        }
        static QYe() {
            return Jm.size > 0;
        }
        static tJe(t, i) {
            Ym.vu(t), Ym.Crt(i), (i = Object.assign({}, Qm, i)), Ym.vu(i.features), Ym.k$(i.name), Ym.Gmt(i.ugt);
            const e = !!i.BYe;
            return self.FOe.DOe(() => {
                const s = window.open(t, i.name, i.features);
                if (s) return { window: s };
                if (e) {
                    return Ym.ti.Ze.Ke("OpenPopupWindow").pr(t, i);
                }
                return null;
            });
        }
    };
}
{
    const tw = self.t;
    let iw = new Map(),
        ew = new Set(),
        sw = new Set(),
        nw = new Map(),
        rw = new Map(),
        hw = new Map(),
        ow = new Map(),
        aw = !1,
        lw = null;
    const uw = new Set(),
        cw = new Set(),
        dw = Symbol(),
        fw = Symbol(),
        pw = Symbol(),
        mw = Symbol();
    function ww(t) {
        const i = (i) => {
            tw.Lh() &&
                tw.ti.SK.cgi(t, i.clientX, i.clientY, i.pointerId, i.button) &&
                (i.preventDefault(), i.stopPropagation());
        };
        t.document.addEventListener("pointerdown", i), (t.document[dw] = i);
        const e = (i) => {
            tw.Lh() && tw.ti.SK.pgi(t, i.clientX, i.clientY, i.pointerId) && (i.preventDefault(), i.stopPropagation());
        };
        t.document.addEventListener("pointermove", e), (t.document[fw] = e);
        const s = (i) => {
            tw.Lh() &&
                tw.ti.SK.ugi(t, i.clientX, i.clientY, i.screenX, i.screenY, i.pointerId) &&
                (i.preventDefault(), i.stopPropagation());
        };
        t.document.addEventListener("pointerup", s), (t.document[pw] = s);
        const n = (i) => {
            tw.ti.SK.ugi(t, i.clientX, i.clientY, i.screenX, i.screenY, i.pointerId);
        };
        t.document.addEventListener("pointercancel", n), (t.document[mw] = n);
    }
    window.C3_IsPopupWindow || ww(window),
        window.addEventListener("focus", (t) => {
            let i = tw.ti.SK.o$i();
            i && tw.ti.cE.lE(i);
        });
    let gw = null,
        yw = tw.m(tw.Event.aG);
    (tw.ti.SK = class {
        constructor() {
            throw new TypeError("static class can't be instantiated");
        }
        static iJe(t, i) {
            if ((tw.vu(t), tw.yp(i), iw.has(t))) throw new Error(`dialog name '${t}' already in use`);
            iw.set(t, { eJe: i, Ae: [] });
        }
        static sJe(t, i) {
            tw.vu(t);
            let e = iw.get(t);
            if (!e) throw new Error(`dialog name '${t}' not found`);
            let s = null;
            if (i) {
                for (let t of e.Ae)
                    if (!t.xz()) {
                        s = t;
                        break;
                    }
            } else e.Ae.length && (s = e.Ae[0]);
            return (
                s ||
                    ((aw = i),
                    (s = tw.m(e.eJe, i)),
                    e.Ae.push(s),
                    s.k(t),
                    s.tQt("DIALOG_" + t + e.Ae.length),
                    s.Efi(),
                    (aw = !1)),
                s
            );
        }
        static nJe() {
            return aw;
        }
        static K$i() {
            return !!this.o$i();
        }
        static o$i() {
            const t = [...sw];
            return t.length ? t.at(-1) : null;
        }
        static *z4t() {
            yield* ew, yield* sw;
        }
        static s6i(t) {
            tw.kDt(t);
            const i = [...ew];
            return i.reverse(), t ? i.filter(t) : i;
        }
        static rJe(t) {
            const i = [];
            for (const e of ew) t === e.CF() && i.push(e);
            return i;
        }
        static hJe(t) {
            const i = [];
            for (const e of ew) (t && t !== e.Az()) || i.push(e);
            return i;
        }
        static oJe(t) {
            let i = tw.ti.SK.o$i(),
                e = tw.ti.SK.s6i();
            return (
                i
                    ? (tw.fte(e, (e) => !e.Qxs() || !e.nE() === i || (t && e.Az() !== t)),
                      (t && i.Az() !== t) || e.push(i))
                    : tw.fte(e, (i) => i.i6i() || (t && i.Az() !== t)),
                e
            );
        }
        static aJe() {
            let t = tw.ti.cE.Wq();
            return t instanceof tw.ti.Ze ? t : null;
        }
        static YYe(t) {
            ww(t);
        }
        static lJe(t, i) {
            tw.Et(t, tw.ti.Ze),
                i
                    ? (ew.add(t), t.e6i() && (sw.add(t), this.uJe("showmodal", t)), tw.ti.cE.lE(t))
                    : (ew.delete(t), t.e6i() && (sw.delete(t), this.uJe("hidemodal", t)));
        }
        static cTi(t, i, e) {
            tw.wi(t), tw.wi(i);
            for (const s of tw.ti.SK.hJe(e)) if (s.uF(t, i)) return !0;
            return !1;
        }
        static cJe(t) {
            tw.Et(t, tw.ti.Ze);
            const i = t.Yn(),
                e = t.qn();
            for (const s of tw.ti.SK.hJe(t.Az())) if (t !== s && s.Yn() === i && s.qn() === e) return !0;
            return !1;
        }
        static EQ() {
            return ew.size > 0;
        }
        static dJe(t) {
            return ew.size >= 2 || (1 === ew.size && tw.vo(ew) !== t);
        }
        static kYe() {
            for (const t of ew) if (t.lwe()) return !0;
            return !1;
        }
        static _K() {
            return sw.size > 0;
        }
        static fJe() {
            return [...sw].filter((t) => "Progress" !== t.Zn()).length > 0;
        }
        static pJe(t) {
            return tw.ti.SK.mJe(t, "dialogshow");
        }
        static wJe() {
            return Promise.all([...ew].filter((t) => t.lwe()).map((t) => t.QD()));
        }
        static gJe(t) {
            return tw.ti.SK.mJe(t, "dialogok");
        }
        static yJe(t) {
            return tw.ti.SK.mJe(t, "dialogcancel");
        }
        static bJe(t) {
            return tw.ti.SK.mJe(t, "dialogclose");
        }
        static vJe() {
            return tw.ti.SK.K$i()
                ? new Promise((t) => {
                      const i = () => {
                          tw.ti.SK.K$i() ? self.setTimeout(i, 250) : t();
                      };
                      self.setTimeout(i, 250);
                  })
                : Promise.resolve();
        }
        static mJe(t, i) {
            return (
                tw.vu(t),
                tw.vu(i),
                new Promise((e) => {
                    const s = (n) => {
                        n.i8t.Zn() === t && (tw.ti.SK.removeEventListener(i, s), e(n));
                    };
                    tw.ti.SK.addEventListener(i, s);
                })
            );
        }
        static SJe(t) {
            if ((cw.clear(), !t)) for (const t of tw.ti.SK.z4t()) cw.add(t);
        }
        static xJe(t) {
            return !cw.has(t) && tw.ti.SK.kdi(t);
        }
        static MJe(t) {
            if ((uw.clear(), !t)) for (const t of tw.ti.SK.z4t()) uw.add(t);
        }
        static kdi(t) {
            return !uw.has(t);
        }
        static Mlt(t) {
            return tw.Et(t, tw.ti.Ze), !!rw.get(t);
        }
        static s7(t) {
            return tw.Et(t, tw.ti.Ze), !!ow.get(t);
        }
        static EJe(t) {
            return tw.Et(t, tw.CJe), (lw = t), tw.ti.SK.wPe();
        }
        static wPe() {
            const t = new tw.Event("load");
            return (t.app = lw), tw.ti.SK.zgt.Aze(t);
        }
        static _Je(t, i, e, s) {
            tw.Et(t, tw.ti.Ze),
                tw.wi(i),
                tw.wi(e),
                tw.wi(s),
                rw.has(t) ||
                    ow.has(t) ||
                    tw.ti.LO.cTi(i, e, t.Az()) ||
                    (tw.ti.SK.cgi(t.Az(), i, e, s),
                    ow.has(t) ||
                        (nw.set(s, t),
                        rw.set(t, s),
                        t.fYe(i, e),
                        t.wYe(t.Yn() - i, t.qn() - e),
                        t.$5t("startdragging"),
                        t.TJe()));
        }
        static cgi(t, i, e, s, n) {
            if ((tw.wi(i), tw.wi(e), tw.wi(s), nw.has(s) || hw.has(s) || tw.ti.LO.cTi(i, e, t))) return !1;
            for (const r of tw.ti.SK.oJe(t)) {
                const h = r.IJe(i, e);
                if ("m" === h) return !1;
                if (h && n === tw.sQ.z0) {
                    if (rw.has(r)) return !1;
                    if (tw.ti.cE.DYe(i, e, r, t)) break;
                    return (
                        hw.set(s, r),
                        ow.set(r, s),
                        r.$5t("startresizing"),
                        r.bYe(h),
                        r.fYe(i, e),
                        r.SYe(r.Yn(), r.qn()),
                        r.EYe(r.rs(), r.ls()),
                        r.PJe(),
                        !0
                    );
                }
            }
            return !1;
        }
        static pgi(t, i, e, s) {
            if ((tw.wi(i), tw.wi(e), tw.wi(s), tw.rQ.iVe(s))) return !1;
            if (nw.has(s)) return tw.ti.SK.GJe(i, e, s, nw.get(s)), !0;
            if (hw.has(s)) return tw.ti.SK.AJe(i, e, s, hw.get(s)), !0;
            if (tw.ti.LO.cTi(i, e, t)) return gw && gw.Set("default"), !1;
            for (const s of tw.ti.SK.oJe(t)) {
                const n = s.IJe(i, e);
                if (n) {
                    if (tw.ti.cE.DYe(i, e, s, t)) break;
                    if (gw)
                        "e" === n || "w" === n
                            ? gw.Set("ew-resize")
                            : "n" === n || "s" === n
                              ? gw.Set("ns-resize")
                              : "nw" === n || "se" === n
                                ? gw.Set("nwse-resize")
                                : "ne" === n || "sw" === n
                                  ? gw.Set("nesw-resize")
                                  : "m" === n && (tw.ti.OF.kF(gw), (gw = null));
                    else {
                        const t = s.CF(),
                            r = {
                                onpointerdown: t[dw],
                                onpointermove: t[fw],
                                onpointerup: t[pw],
                                onpointercancel: t[mw],
                            };
                        "e" === n || "w" === n
                            ? (gw = tw.ti.OF.PF("ew-resize", t, i, e, r))
                            : "n" === n || "s" === n
                              ? (gw = tw.ti.OF.PF("ns-resize", t, i, e, r))
                              : "nw" === n || "se" === n
                                ? (gw = tw.ti.OF.PF("nwse-resize", t, i, e, r))
                                : ("ne" !== n && "sw" !== n) || (gw = tw.ti.OF.PF("nesw-resize", t, i, e, r));
                    }
                    return !!gw;
                }
            }
            return tw.ti.OF.kF(gw), (gw = null), !1;
        }
        static GJe(t, i, e, s) {
            tw.wi(t), tw.wi(i), tw.wi(e), tw.Et(s, tw.ti.Ze), s.eu(t + s.gYe()), s.iu(i + s.yYe());
        }
        static AJe(t, i, e, s) {
            tw.wi(t), tw.wi(i), tw.wi(e), tw.Et(s, tw.ti.Ze);
            let n = t - s.pYe(),
                r = i - s.mYe(),
                h = s.xYe(),
                o = s.MYe(),
                a = s.CYe(),
                l = s._Ye(),
                u = s.vYe();
            if ("e" === u || "se" === u || "ne" === u) s.My(a + n);
            else if ("w" === u || "sw" === u || "nw" === u) {
                let t = h + a - s.Eat();
                s.eu(Math.min(h + n, t)), s.My(a - n);
            }
            if ("s" === u || "sw" === u || "se" === u) s.Iy(l + r);
            else if ("n" === u || "nw" === u || "ne" === u) {
                let t = o + l - s.zat();
                s.iu(Math.min(o + r, t)), s.Iy(l - r);
            }
        }
        static ugi(t, i, e, s, n, r) {
            if ((tw.wi(i), tw.wi(e), tw.wi(r), nw.has(r))) {
                let t = nw.get(r);
                if (
                    (tw.ti.SK.GJe(i, e, r, t),
                    (i < 0 || e < 0 || i > window.innerWidth || e > window.innerHeight) && t.RJe())
                ) {
                    const i = self.devicePixelRatio;
                    t.yDt(s / i + t.gYe(), n / i + t.yYe()).catch((i) => t.kJe());
                } else t.kJe();
                return nw.delete(r), rw.delete(t), t.pzt(), t.$5t("finishdragging"), t.OJe(), !0;
            }
            if (hw.has(r)) {
                let t = hw.get(r);
                tw.ti.SK.AJe(i, e, r, t),
                    t.kJe(),
                    hw.delete(r),
                    ow.delete(t),
                    t.DJe(),
                    t.pzt(),
                    t.$5t("finishresizing");
            }
            return !1;
        }
        static uJe(t, i, e) {
            tw.vu(t), tw.qm(i, tw.ti.Ze);
            let s = new tw.Event(t);
            (s.i8t = i), void 0 !== e && (s.FJe = e), this.dispatchEvent(s);
        }
        static addEventListener(t, i, e) {
            yw.addEventListener(t, i, e);
        }
        static removeEventListener(t, i, e) {
            yw.removeEventListener(t, i, e);
        }
        static dispatchEvent(t) {
            return yw.dispatchEvent(t);
        }
    }),
        (tw.ti.SK.zgt = tw.m(tw.Event.aG));
}
{
    const bw = self.t,
        vw = self.assert,
        Sw = { duration: bw.E4s.ZRs("slow-animations") ? 3e3 : 200, easing: "ease-out" },
        xw = 125,
        Mw = 300,
        Ew = 50,
        Cw = 200,
        _w = 30,
        Tw = 200,
        Iw = bw.m(bw.pNt, 1);
    let Pw = new Map();
    bw.ti.Ze = class extends bw.ti.Window {
        constructor(t) {
            if ((bw.Gct(t, "dialog"), bw.ti.SK.nJe() && (t = t.cloneNode(!0)), super(t), Pw.has(t)))
                throw new Error("dialog class already created");
            Pw.set(t, this),
                (this.LJe = t.querySelector("ui-dialog-caption")),
                (this.BJe = t.querySelector("ui-dialog-contents")),
                (this.UJe = t.querySelector("ui-dialog-footer")),
                (this.NJe = this.mht.ownerDocument),
                (this.jJe = null),
                this.mht.hasAttribute("role") || this.mht.setAttribute("role", "dialog"),
                (this.$Je = this.mht.hasAttribute("resizable") && !bw.fk.ZP),
                (this.zJe = !0),
                (this.VJe = !1),
                (this.WJe = !1),
                (this.HJe = null),
                (this.KJe = null),
                (this.qJe = null),
                (this.XJe = null),
                (this.YJe = this.mht.querySelector("ui-dialog-caption")),
                (this.JJe = null),
                (this.p8t = !1),
                (this.ZJe = null),
                (this.QJe = !1),
                (this.bye = !1),
                (this.tZe = !1),
                (this.iZe = !0),
                (this.eZe = !1),
                (this.sZe = ""),
                (this.tp = 0),
                (this.ep = 0),
                (this.RS = 0),
                (this._S = 0),
                (this.nZe = 0),
                (this.rZe = 0),
                (this.hZe = (t) => this.kJe()),
                (this.Qq = null),
                (this.oZe = null),
                (this.aZe = !0),
                (this.lZe = !1),
                (this.uZe = !1),
                (this.cZe = null),
                (this.dZe = (t) => this.sDt()),
                (this.fZe = null),
                (this.tIe = null),
                (this.pZe = null),
                (this.mZe = null),
                (this.wZe = !0),
                this.YJe &&
                    ((this.sZe = this.YJe.textContent),
                    bw.ti.fMt(this.YJe),
                    (this.JJe = bw.ti.gj("span", this.YJe, null, "dialog-caption-text")),
                    (this.JJe.textContent = this.sZe),
                    (this.Qq = (t) => {
                        t.button === bw.sQ.z0 && t.isPrimary && this.Lht(t.clientX, t.clientY, t.pointerId);
                    }),
                    (this.oZe = (t) => this.gZe(t)),
                    this.YJe.addEventListener("contextmenu", this.oZe),
                    this.mht.hasAttribute("closebutton") &&
                        ((this.fZe = bw.m(bw.ti.Tj.jet, this.YJe)), (this.fZe.onclick = () => this.JLt())),
                    this.mht.hasAttribute("menudotsbutton") && (this.pZe = bw.m(bw.ti.Tj.yZe, this.YJe)),
                    this.mht.hasAttribute("backbutton") &&
                        ((this.tIe = bw.m(bw.ti.Tj.bZe, this.YJe)), (this.tIe.onclick = () => this.Qge()))),
                (this.vZe = null),
                (this.SZe = -1),
                (this.xZe = window.orientation),
                bw.fk.ZP && (this.vZe = (t) => this.MZe(t)),
                (this.GMt = null),
                (this.Rvs = []),
                (this.EZe = []),
                (this.CZe = 0),
                (this._Ze = 0),
                (this.TZe = null),
                (this.IZe = null),
                (this.PZe = (t) => this.GZe(t)),
                (this.AZe = (t) => this.RZe(t)),
                (this.kZe = (t) => this.OZe(t)),
                (this.DZe = !1),
                (this.VWe = () => this.FZe());
        }
        Efi() {}
        Jge() {
            if (super.Jge()) {
                return this.gzt().devicePixelRatio === window.devicePixelRatio;
            }
            return !1;
        }
        pzt(...t) {
            if (this.Mlt() || this.s7()) return;
            if (!self.app.N5t()) return;
            if (this.DZe) return;
            if (!this.Gqt) return;
            if (!this.zJe) return;
            if (bw.ti.Ze.Ke(this.Gqt) !== this) return;
            let i = this.jJe && this.jJe.defaultView,
                e = {
                    popup: this.lBi(),
                    nested: this.Qxs(),
                    width: this.RS,
                    height: this._S,
                    resizable: this.$Je,
                    devicePixelRatio: window.devicePixelRatio,
                    xRatio: i && this.tp / i.innerWidth,
                    yRatio: i && this.ep / i.innerHeight,
                    xParentRatio: i && this.LZe() / i.innerWidth,
                    yParentRatio: i && this.BZe() / i.innerHeight,
                };
            Object.assign(e, ...t), this.b4i(e);
        }
        bzt() {
            if (!self.app.N5t()) return;
            this.DZe = !0;
            let t = this.gzt();
            if (((this.uZe || this.cZe) && (t = null), this.zJe && t))
                if (t.popup) this.yDt(screen.width / 2, screen.height / 2);
                else {
                    const i = this.jJe ? this.jJe.defaultView : null,
                        e = t.xRatio,
                        s = t.yRatio,
                        n = t.xParentRatio,
                        r = t.yParentRatio,
                        h = t.nested;
                    if (i && Number.isFinite(e) && Number.isFinite(s))
                        if (h && Number.isFinite(n) && Number.isFinite(r)) {
                            let t = this.LZe(),
                                h = this.BZe(),
                                o = t - n * i.innerWidth,
                                a = h - r * i.innerHeight;
                            this.Bus(e * i.innerWidth - o, s * i.innerHeight - a);
                        } else this.Bus(e * i.innerWidth, s * i.innerHeight);
                    t.resizable && (this.My(t.width), this.Iy(t.height)), this.kJe();
                }
            this.DZe = !1;
        }
        static Ugt(t, i) {
            bw.ti.SK.iJe(t, i);
        }
        static Ke(t, i) {
            return bw.ti.SK.sJe(t, i);
        }
        static UZe(t) {
            return Pw.get(t) || null;
        }
        hr(t) {
            if ((bw.k$(t), this.JJe)) {
                let i = t || window.app.Zn();
                this.sZe !== i && ((this.JJe.textContent = i), (this.sZe = i));
            }
        }
        agt() {
            return !0;
        }
        cgt() {
            return !1;
        }
        aYe() {
            return this.xz();
        }
        xz() {
            return !!(this.QJe || this.bye || this.ZJe) || this.p8t;
        }
        gu() {
            return this.p8t && !this.bye;
        }
        pmi() {
            return !!(this.QJe || this.bye || this.ZJe);
        }
        NZe() {
            return this.QJe;
        }
        lwe() {
            return this.bye;
        }
        lBi() {
            return !!this.cZe;
        }
        bK() {
            return this.lBi();
        }
        jZe() {
            return this.jJe === document;
        }
        Nii() {
            return bw.ti.SK.o$i() === this;
        }
        Mlt() {
            return bw.ti.SK.Mlt(this);
        }
        s7() {
            return bw.ti.SK.s7(this);
        }
        rgt() {
            return !this.e6i();
        }
        nE() {
            return this.GMt || this.TZe;
        }
        Qxs() {
            return !!this.GMt || !!this.TZe;
        }
        $Ze() {
            return !!this.Qxs() && -1 !== this.nE().gZ().indexOf(this);
        }
        zZe() {
            return !!this.Qxs() && -1 !== this.nE().VZe().indexOf(this);
        }
        Cbt() {
            return self.app.Cbt();
        }
        J4i() {
            return this.LJe;
        }
        XLt() {
            return this.BJe;
        }
        WZe() {
            return this.UJe;
        }
        HZe() {
            return this.fZe;
        }
        u6i() {
            return this.pZe;
        }
        Jmt(t) {
            bw.vu(t);
            let i = this.mht.querySelector("." + t);
            if (!i) throw new Error(`missing dialog element with class name: ${t}`);
            return i;
        }
        sti(t) {
            bw.vu(t);
            let i = this.mht.querySelector("#" + t);
            if (!i) throw new Error(`missing dialog element with id: ${t}`);
            return i;
        }
        nsi(t) {
            bw.vu(t);
            let i = this.mht.getElementsByTagName(t);
            if (!i) throw new Error(`tag '${t}' does not match any element`);
            return i;
        }
        jWi(t, i = !1) {
            let e;
            if ((bw.vu(t), (i = !!i))) {
                if (((e = this.mht.querySelectorAll(t)), !e))
                    throw new Error(`CSS selector '${t}' does not match any element`);
                if (!e.length) throw new Error(`CSS selector '${t}' does not match any element`);
            } else if (((e = this.mht.querySelector(t)), !e))
                throw new Error(`CSS selector '${t}' does not match any element`);
            return e;
        }
        tDt() {
            return this.cZe;
        }
        KZe(t) {
            t ? (this.jJe = t.ownerDocument) : this.cZe ? (this.jJe = this.cZe.document) : (this.jJe = document),
                vw(this.jJe, "no display document for dialog");
        }
        qZe(t) {
            bw.Et(t, bw.ti.Ze);
            let i = this.EZe.indexOf(t);
            vw(-1 === i, "child popup window is already part of parent dialog"),
                this.EZe.push(t),
                t.addEventListener("afterpopupclose", this.kZe);
        }
        XZe(t) {
            bw.Et(t, bw.ti.Ze);
            let i = this.EZe.indexOf(t);
            vw(-1 !== i, "child popup window is not part of parent dialog"),
                this.EZe.splice(i, 1),
                t.removeEventListener("afterpopupclose", this.kZe);
        }
        OZe(t) {
            let i = t.i8t,
                e = i.nE();
            vw(e, "parent can not be null when a child popup is closed"), e.XZe(i);
        }
        YZe(t) {
            bw.Et(t, bw.ti.Ze);
            let i = this.Rvs.indexOf(t);
            vw(-1 === i, "child dialog is already part of parent dialog"),
                (t.GMt = this),
                this.Rvs.length ||
                    (this.addEventListener("positionchange", this.AZe),
                    this.addEventListener("widthchange", this.AZe),
                    this.addEventListener("heightchange", this.AZe),
                    this.addEventListener("startdragging", this.PZe),
                    this.addEventListener("startresizing", this.PZe)),
                this.Rvs.push(t);
        }
        OJs(t) {
            bw.Et(t, bw.ti.Ze);
            let i = this.Rvs.indexOf(t);
            vw(-1 !== i, "child dialog is not part of parent dialog"),
                this.Rvs.splice(i, 1),
                (t.GMt = null),
                this.Rvs.length ||
                    (this.removeEventListener("positionchange", this.AZe),
                    this.removeEventListener("widthchange", this.AZe),
                    this.removeEventListener("heightchange", this.AZe),
                    this.removeEventListener("startdragging", this.PZe),
                    this.removeEventListener("startresizing", this.PZe));
        }
        CGs() {
            for (let t of this.Rvs)
                if ((t.uZe || t.igt(), t.GMt)) {
                    let i = t.GMt.Rvs.indexOf(t);
                    t.GMt.Rvs.splice(i, 1), (t.GMt = null);
                }
            if ((bw.yh(this.Rvs), !this.uZe)) {
                for (let t of this.EZe)
                    t.uZe || t.igt(), t.removeEventListener("afterpopupclose", this.kZe), (t.TZe = null);
                bw.yh(this.EZe);
            }
            this.removeEventListener("positionchange", this.AZe),
                this.removeEventListener("widthchange", this.AZe),
                this.removeEventListener("heightchange", this.AZe),
                this.removeEventListener("startdragging", this.PZe),
                this.removeEventListener("startresizing", this.PZe);
        }
        eU() {
            return !!this.Rvs.length;
        }
        JZe() {
            return !!this.EZe.length;
        }
        gZ() {
            return this.Rvs;
        }
        VZe() {
            return this.EZe;
        }
        *AYe() {
            for (let t = this.Rvs.length - 1; t >= 0; --t) yield this.Rvs[t];
        }
        LZe() {
            let t = this.GMt;
            return t ? t.tp + t.Hge() : 0;
        }
        BZe() {
            let t = this.GMt;
            return t ? t.ep + t.Hge() : 0;
        }
        RZe(t) {
            let i = this.Yn() - this.CZe,
                e = this.qn() - this._Ze;
            for (let t of this.Rvs) t.Bus(t.CZe - i, t._Ze - e);
        }
        GZe(t) {
            (this.CZe = this.Yn()), (this._Ze = this.qn());
            for (let t of this.Rvs) (t.CZe = t.Yn()), (t._Ze = t.qn());
        }
        pr(t) {
            return this.ZZe(), this.QZe(!0, t);
        }
        eD(t) {
            return this.ZZe(), this.QZe(!1, t);
        }
        ZZe() {
            vw(!1 === this.uZe, "_isPopupTransfer must be false"),
                vw(null === this.GMt, "_parent must be null"),
                vw(null === this.TZe, "_parentBeforeDetach must be null");
        }
        QZe(t, i) {
            if (((t = !!t), bw.Gmt(i), (this.qJe = null), bw.fk.ZP && (t = !0), this.xz() && this.e6i() !== t))
                throw new Error("dialog already showing with different modal setting");
            this.VJe = t;
            let e = this.tQe();
            if (e) return e;
            if ((this.bye && this.FZe(), (this.XJe = null), this.KZe(i), this.xz())) return this.IZe;
            if (
                (bw.ti.CT(this.mht, "modal", this.VJe),
                bw.ti.CT(this.mht, "non-modal", !this.VJe),
                this.iZe && this.iQe(),
                this.VJe &&
                    (bw.ti.jqe.eD(i),
                    (this.tZe = !0),
                    this.wZe &&
                        (this.mZe = bw.HHe.BD(() => {
                            this.tIe ? this.Qge() : this.fZe ? this.JLt() : this.egt();
                        }, this.sZe))),
                this.WJe
                    ? (this.mht.style.display = "")
                    : this.NJe !== this.jJe && (bw.ti.Tz(this.mht), this.jJe.body.appendChild(this.mht)),
                bw.Y$.h$i ? (this.VJe ? this.mht.showModal() : this.mht.show()) : this.mht.setAttribute("polyfill", ""),
                (this.p8t = !0),
                this.eQe(),
                bw.ti.SK.lJe(this, !0),
                this.iZe
                    ? (this.sQe(), this.nQe())
                    : this.eZe
                      ? ((this.mht.style.width = `${this.RS}px`), (this.mht.style.height = `${this._S}px`), this.sQe())
                      : (!bw.fk.ZP && (this.$Je || this.zJe) && self.app.N5t()) || this.IEe(),
                !this.eZe && this.Jge() && this.bzt(),
                this.VJe && bw.ti.OF.o(this.jJe, this),
                (this.iZe = !1),
                (this.eZe = !1),
                this.$ge(),
                this.i6i() || this.uEe(),
                this.i6i() || this.jJe.defaultView.addEventListener("resize", this.hZe),
                this.YJe && !bw.fk.ZP && (this.i6i() || this.YJe.addEventListener("pointerdown", this.Qq)),
                bw.fk.ZP && window.addEventListener("orientationchange", this.vZe),
                (this.QJe = !this.i6i()),
                !this.Cbt() || this.uZe || this.i6i())
            )
                this.rQe();
            else {
                let t = this.jvt(),
                    i = t.left + t.width / 2 - this.LZe(),
                    e = t.top + t.height / 2 - this.BZe(),
                    s = [
                        {
                            transform: `perspective(600px) translate3d(${this.tp}px, ${this.ep}px, -20px)`,
                            transformOrigin: `${i}px ${e}px`,
                            opacity: "0",
                        },
                        {
                            transform: `perspective(600px) translate3d(${this.tp}px, ${this.ep}px, 0)`,
                            transformOrigin: `${i}px ${e}px`,
                            opacity: "1",
                        },
                    ];
                (this.mht.style.transform = ""),
                    (this.ZJe = this.mht.animate(s, Sw)),
                    (this.ZJe.onfinish = (t) => this.rQe()),
                    document.addEventListener("visibilitychange", this.VWe);
            }
            return this.uZe
                ? this.IZe
                : (this.BJe && (this.BJe.scrollTop = 0),
                  Promise.resolve().then(() => {
                      this.i6i() || bw.ti.SK.uJe("dialogshow", this);
                  }),
                  this.i6i() || this.pzt(),
                  this.IZe ? this.IZe : this.hQe());
        }
        eQe() {
            if (!this.VJe && !this.lBi()) {
                let t = bw.ti.SK.o$i();
                if (t && !t.lBi() && t.gu()) {
                    if (this.WJe) throw new Error("not supported");
                    bw.ti.Tz(this.mht), t.FO().appendChild(this.mht), t.YZe(this);
                }
            }
        }
        tQe() {
            if (!this.VJe && !this.lBi()) {
                let t = bw.ti.SK.o$i();
                if (t && t.lBi()) {
                    if (((this.TZe = t), this.Jge())) {
                        let t = this.gzt();
                        this.My(t.width), this.Iy(t.height);
                    } else this.nQe();
                    return this.yDt().then(() => this.hQe());
                }
            }
        }
        hQe() {
            return (
                (this.IZe = new Promise((t, i) => {
                    (this.HJe = t), (this.KJe = i);
                })),
                this.IZe
            );
        }
        iQe() {
            this.sZe || this.hr(null), this.fgt();
        }
        fgt() {}
        oQe(t = !1) {
            if ((this.tZe && (bw.ti.jqe.Xrt(), (this.tZe = !1)), !this.xz()))
                return this.qJe
                    ? void (this.qJe = null)
                    : void (() => {})(`[Dialog] Closing dialog '${this.sZe}' which is not currently open`);
            if (
                ((this.qJe = null),
                bw.ti.LO.aQe(),
                bw.ti.Tj.UK.lQe(this),
                !this.Qxs() &&
                    this.lBi() &&
                    bw.ti.SK.rJe(this.CF()).forEach((t) => {
                        t !== this && t.igt(!0);
                    }),
                this.VJe && bw.ti.OF.it(this.jJe),
                this.jJe.defaultView.removeEventListener("resize", this.hZe),
                bw.fk.ZP && (clearTimeout(this.SZe), window.removeEventListener("orientationchange", this.vZe)),
                this.YJe && this.YJe.removeEventListener("pointerdown", this.Qq),
                this.eYe(),
                this.ZJe)
            ) {
                if (!t)
                    return (
                        this.QJe && ((this.QJe = !1), (this.bye = !0), (this.ZJe.playbackRate *= -1)),
                        bw.ti.cE.PYe(this),
                        (this.eU() || this.JZe()) && this.CGs(),
                        void (this.$Ze() && this.nE().OJs(this))
                    );
                (this.ZJe = null), document.removeEventListener("visibilitychange", this.VWe);
            }
            if (
                ((this.bye = !0),
                bw.ti.cE.PYe(this),
                (this.eU() || this.JZe()) && this.CGs(),
                this.pzt(),
                this.$Ze() && this.nE().OJs(this),
                !this.Cbt() || this.uZe || this.cZe || t)
            )
                this.rQe();
            else {
                let t = this.jvt(),
                    i = t.left + t.width / 2 - this.LZe(),
                    e = t.top + t.height / 2 - this.BZe(),
                    s = [
                        {
                            transform: `perspective(600px) translate3d(${this.tp}px, ${this.ep}px, 0)`,
                            transformOrigin: `${i}px ${e}px`,
                            opacity: "1",
                        },
                        {
                            transform: `perspective(600px) translate3d(${this.tp}px, ${this.ep}px, -20px)`,
                            transformOrigin: `${i}px ${e}px`,
                            opacity: "0",
                        },
                    ];
                (this.mht.style.transform = ""),
                    (this.ZJe = this.mht.animate(s, Sw)),
                    (this.ZJe.onfinish = (t) => this.rQe()),
                    document.addEventListener("visibilitychange", this.VWe);
            }
            bw.ti.SK.uJe("dialogclose", this);
        }
        i6i() {
            return this.bye || !this.xz();
        }
        egt() {
            this.WD(!0);
        }
        JLt() {
            this.igt();
        }
        Qge() {
            this.JLt();
        }
        WD(t) {
            this.bye || (bw.ti.SK.kdi(this) && (this.uQe(t), this.oQe(), bw.ti.SK.uJe("dialogok", this, t)));
        }
        uQe(t) {
            this.qJe ? Iw.UVe(this.qJe, t) : (this.HJe && this.HJe(t), (this.IZe = null));
        }
        igt(t = !1) {
            (t = !!t),
                this.bye || (bw.ti.SK.xJe(this) && (this.cQe(), this.oQe(t), bw.ti.SK.uJe("dialogcancel", this, null)));
        }
        cQe() {
            this.qJe ? Iw.UVe(this.qJe, null) : (this.HJe && this.HJe(null), (this.IZe = null));
        }
        dQe(t) {
            this.bye || (this.fQe(t), this.oQe());
        }
        fQe(t) {
            this.qJe ? Iw.NVe(this.qJe, t) : (this.KJe && this.KJe(t), (this.IZe = null));
        }
        H5t() {}
        J5t() {}
        pQe() {
            bw.ti.SK.uJe("dialogpositioningchange", this);
        }
        FZe() {
            this.ZJe && (this.ZJe.cancel(), (this.ZJe = null), this.rQe());
        }
        rQe() {
            if ((this.ZJe && this.ZJe.cancel(), document.removeEventListener("visibilitychange", this.VWe), this.bye)) {
                if (
                    (this.uZe || (this.Cz(), bw.ti.SK.lJe(this, !1), this.mZe && (this.mZe.Ut(), (this.mZe = null))),
                    bw.Y$.h$i)
                ) {
                    const t = document.activeElement;
                    this.mht.close(),
                        t &&
                            t !== document.activeElement &&
                            bw.ti.SK.dJe(this) &&
                            bw.qfi(t, "dialog") !== this.FO() &&
                            t.focus();
                }
                (this.p8t = !1),
                    !this.uZe && this.cZe && (this.sDt(), (this.eZe = !0)),
                    this.WJe
                        ? (this.mht.style.display = "none")
                        : this.NJe !== this.jJe && (bw.ti.Tz(this.mht), this.NJe.body.appendChild(this.mht)),
                    (this.jJe = null),
                    this.XJe && (this.XJe(), (this.XJe = null)),
                    this.J5t();
            }
            this.QJe && this.H5t();
            let t = this.QJe;
            (this.QJe = !1),
                (this.bye = !1),
                (this.ZJe = null),
                t && !this.uZe && (bw.fk.ZP ? this.IEe() : (this.zge(), this.kJe())),
                this.ent(),
                t && this.pQe();
        }
        Cz() {}
        QD() {
            return new Promise((t, i) => {
                this.XJe = t;
            });
        }
        CF() {
            return this.jJe;
        }
        e6i() {
            return this.VJe;
        }
        RJe() {
            return this.h7() && this.TYe();
        }
        mQe(t) {
            this.aZe = !!t;
        }
        gZe(t) {
            if ((t.preventDefault(), !this.aZe || this.lZe)) return;
            if (this.lwe()) return;
            bw.u.o("ui.dialogs.caption-menu");
            let i = bw.m(bw.ti.LO, this.YJe);
            this.RJe() && i.xO("open-popup", self.lang(".open-to-popup-window"), () => this.yDt(), { GO: !0 }),
                i.xO("close", self.lang(".close"), () => this.JLt()),
                i.XO(t.clientX, t.clientY),
                bw.u.it();
        }
        yDt(t, i) {
            if ((bw.HI(t), bw.HI(i), this.lZe)) throw new Error("already awaiting popup window");
            if (this.cZe) throw new Error("already in popup window");
            if (!this.RJe()) return;
            (this.lZe = !0), this.$5t("beforepopupopen");
            let e = "window.html";
            return (
                bw.C7s() || (e += "?mode=dev"),
                bw.ti.LYe.UYe(e, this.Gqt, this.rs(), this.ls(), t, i)
                    .then((t) => {
                        const i = t.window;
                        return i.addEventListener("unload", (t) => this.wQe(i)), this.gQe(i);
                    })
                    .catch((t) => {
                        (this.lZe = !1),
                            this.pzt(),
                            bw.ti.Ze.Ke("OK").pr(self.lang("ui.cannot-open-popup")),
                            this.$5t("afterpopupclose");
                    })
            );
        }
        yQe() {
            return this.eU()
                ? Promise.resolve().then(() => Promise.all(this.gZ().map((t) => (this.qZe(t), t.yDt()))))
                : Promise.resolve();
        }
        gQe(t) {
            return Promise.resolve()
                .then(() => this.yQe())
                .then(() => {
                    if (
                        ((this.uZe = !0),
                        (this.TZe = this.nE()),
                        this.Qxs() && !this.zZe() && this.TZe.qZe(this),
                        this.xz())
                    )
                        return this.oQe();
                })
                .then(
                    () => (
                        (this.lZe = !1),
                        (this.cZe = t),
                        window.addEventListener("unload", this.dZe),
                        this.mht.setAttribute("inPopupWindow", ""),
                        (this.mht.style.transform = ""),
                        (this.mht.style.width = ""),
                        (this.mht.style.height = ""),
                        this.QZe(this.VJe),
                        (this.uZe = !1),
                        (t.document.title = this.sZe),
                        this.$5t("afterpopupopen"),
                        bw.ti.LYe.XYe(t, "dialog-transferred", null),
                        this.pzt(),
                        t
                    )
                );
        }
        wQe(t) {
            this.cZe &&
                (bw.ti.SK.hJe(t).forEach((t) => {
                    t !== this && t.igt(!0);
                }),
                this.$5t("beforepopupclose"),
                (this.uZe = !0),
                (this.RS = bw.ft(this.cZe.innerWidth, this.nZe, bw.j1t(0.9 * window.innerWidth))),
                (this._S = bw.ft(this.cZe.innerHeight, this.rZe, bw.j1t(0.9 * window.innerHeight))),
                window.removeEventListener("unload", this.dZe),
                this.oQe(),
                (this.cZe = null),
                this.mht.removeAttribute("inPopupWindow"),
                (this.eZe = !0),
                !this.Qxs() || (this.Qxs() && !this.nE().lBi()) ? this.QZe(this.VJe) : this.cQe(),
                this.$5t("afterpopupclose"),
                (this.uZe = !1),
                (this.TZe = null),
                this.pzt());
        }
        sDt() {
            if (this.cZe) {
                (this.RS = bw.ft(this.cZe.innerWidth, this.nZe, bw.j1t(0.9 * window.innerWidth))),
                    (this._S = bw.ft(this.cZe.innerHeight, this.rZe, bw.j1t(0.9 * window.innerHeight)));
                let t = this.cZe;
                (this.cZe = null), t.close(), this.mht.removeAttribute("inPopupWindow"), (this.lZe = !1);
            }
        }
        cYe() {
            if (!this.xz()) return;
            super.cYe(), (this.tp = bw.j1t(this.XXe.left)), (this.ep = bw.j1t(this.XXe.top));
            let t = 2 * this.Hge();
            (this.RS = this.XXe.right - this.XXe.left - t), (this._S = this.XXe.bottom - this.XXe.top - t);
        }
        sQe() {
            this.IEe(),
                (this.mht.style.margin = "0"),
                (this.mht.style.position = "absolute"),
                (this.mht.style.left = "0px"),
                (this.mht.style.top = "0px"),
                this.ent();
        }
        $ge() {}
        IEe() {
            if (!this.jJe || !this.jJe.defaultView) return;
            this.ent(), super.jvt();
            let t = 2 * this.Hge(),
                i = (this.RS + t) / 2,
                e = (this._S + t) / 2,
                s = this.jJe.defaultView.innerWidth / 2,
                n = this.jJe.defaultView.innerHeight / 2;
            (this.tp = bw.j1t(s - i - this.LZe())), (this.ep = bw.j1t(n - e - this.BZe())), this.zge();
        }
        nQe() {
            let t = bw.ti.oJ("min-width", { lJ: this.mht });
            if (("auto" === t && (t = "0px"), !t.endsWith("px")))
                throw new Error("CSS style for dialog min-width must specify the size in units of 'px'");
            let i = parseInt(t, 10);
            isFinite(i) || (i = this.h7() ? Mw : xw), (this.nZe = i);
            let e = bw.ti.oJ("min-height", { lJ: this.mht });
            if (("auto" === e && (e = "0px"), !e.endsWith("px")))
                throw new Error("CSS style for dialog min-height must specify the size in units of 'px'");
            let s = parseInt(e, 10);
            isFinite(s) || (s = this.h7() ? Cw : Ew), (this.rZe = s);
        }
        jvt() {
            if (!this.iZe || this.Qxs()) {
                let t = 2 * this.Hge(),
                    i = this.LZe(),
                    e = this.BZe();
                return {
                    left: this.tp + i,
                    top: this.ep + e,
                    right: this.tp + this.RS + t + i,
                    bottom: this.ep + this._S + t + e,
                    width: this.RS + t,
                    height: this._S + t,
                };
            }
            return super.jvt();
        }
        zge() {
            this.QJe ||
                this.bye ||
                (this.lBi()
                    ? (this.mht.style.transform = "")
                    : (this.mht.style.transform = `translate(${this.tp}px,${this.ep}px)`));
        }
        Bus(t, i) {
            bw.wi(t),
                bw.wi(i),
                (t = bw.j1t(t)),
                (i = bw.j1t(i)),
                (this.tp === t && this.ep === i) ||
                    this.cZe ||
                    ((this.tp = t), (this.ep = i), this.zge(), this.ent(), this.$5t("positionchange"), this.pzt());
        }
        eu(t) {
            bw.wi(t),
                (t = bw.j1t(t)),
                this.tp === t ||
                    this.cZe ||
                    ((this.tp = t), this.zge(), this.ent(), this.$5t("positionchange"), this.pzt());
        }
        Yn() {
            return this.jvt(), this.tp;
        }
        Hgi() {
            return this.Yn() + this.Hge() + this.LZe();
        }
        iu(t) {
            bw.wi(t),
                (t = bw.j1t(t)),
                this.ep === t ||
                    this.cZe ||
                    ((this.ep = t), this.zge(), this.ent(), this.$5t("positionchange"), this.pzt());
        }
        qn() {
            return this.jvt(), this.ep;
        }
        Jgi() {
            return this.qn() + this.Hge() + this.BZe();
        }
        My(t) {
            bw.wi(t),
                (t = bw.j1t(t)) < this.nZe && (t = this.nZe),
                this.RS !== t &&
                    ((this.RS = t),
                    (this.mht.style.width = `${this.RS}px`),
                    this.ent(),
                    this.$5t("widthchange"),
                    this.pzt());
        }
        rs() {
            return this.jvt(), this.RS;
        }
        Eat() {
            return this.nZe;
        }
        Iy(t) {
            bw.wi(t),
                (t = bw.j1t(t)) < this.rZe && (t = this.rZe),
                this._S !== t &&
                    ((this._S = t),
                    (this.mht.style.height = `${this._S}px`),
                    this.ent(),
                    this.$5t("heightchange"),
                    this.pzt());
        }
        ls() {
            return this.jvt(), this._S;
        }
        zat() {
            return this.rZe;
        }
        h7() {
            return this.$Je;
        }
        kJe() {
            if (-1 === this.SZe && !this.cZe) {
                if ((this.jvt(), bw.fk.ZP)) this.IEe();
                else {
                    if (!this.jJe) return;
                    const t = this.jJe.defaultView.innerWidth,
                        i = this.jJe.defaultView.innerHeight,
                        e = 2 * this.Hge(),
                        s = -this.LZe(),
                        n = -this.BZe();
                    this.$Je
                        ? (this.RS + e > t && this.My(t - e),
                          this._S + e > i && this.Iy(i - e),
                          this.tp < s ? this.eu(s) : this.tp - s + this.RS + e > t && this.eu(t - this.RS - e + s),
                          this.ep < n ? this.iu(n) : this.ep - n + this._S + e > i && this.iu(i - this._S - e + n))
                        : (this.tp < s ||
                              this.tp - s + this.RS + e > t ||
                              this.ep < n ||
                              this.ep - n + this._S + e > i) &&
                          this.IEe();
                }
                this.$5t("resize");
            }
        }
        MZe(t) {
            bw.fk.Bj ||
                (-1 === this.SZe &&
                    this.xZe !== window.orientation &&
                    ((this.xZe = window.orientation),
                    (this.SZe = setTimeout(() => {
                        (this.SZe = -1), this.hZe();
                    }, Tw))));
        }
        uEe() {
            if (!bw.fk.ZP && !this.lBi()) for (; bw.ti.SK.cJe(this); ) this.Bus(this.Yn() + _w, this.qn() + _w);
        }
        uF(t, i) {
            return bw.wi(t), bw.wi(i), !!this.xz() && super.uF(t, i);
        }
        Lht(t, i, e) {
            bw.wi(t), bw.wi(i), bw.HI(e), bw.ti.SK._Je(this, t, i, e);
        }
        Uj(t) {
            const i = t.which;
            if (this.bye) return t.preventDefault(), void t.stopPropagation();
            i === bw.fO.oO
                ? (t.preventDefault(), t.stopPropagation(), this.JLt())
                : i !== bw.fO.o3 || t.shiftKey || (t.preventDefault(), t.stopPropagation(), this.egt());
        }
        PJe() {}
        DJe() {}
        TJe() {}
        OJe() {}
        Hge() {
            return this.lBi() ? 0 : this.h7() ? bw.ti.uXe() : bw.ti.lXe();
        }
        IJe(t, i) {
            if ((bw.wi(t), bw.wi(i), !this.h7())) return "";
            if (bw.fk.ZP) return "";
            let e = this.jvt(),
                s = this.Hge(),
                n = 2 * s,
                r = "";
            return (
                t > e.left + s && t < e.right - s && i > e.top + s && i < e.bottom - s
                    ? (r = "m")
                    : bw.ti.cE.IYe()
                      ? t >= e.left && t <= e.left + n
                          ? i >= e.top && i <= e.top + n
                              ? (r = "nw")
                              : i <= e.bottom && i >= e.bottom - n
                                ? (r = "sw")
                                : i > e.top + n && i < e.bottom - n && t <= e.left + s && (r = "w")
                          : t <= e.right && t >= e.right - n
                            ? i >= e.top && i <= e.top + n
                                ? (r = "ne")
                                : i <= e.bottom && i >= e.bottom - n
                                  ? (r = "se")
                                  : i > e.top + n && i < e.bottom - n && t >= e.right - s && (r = "e")
                            : t > e.left + n &&
                              t < e.right - n &&
                              (i >= e.top && i <= e.top + s
                                  ? (r = "n")
                                  : i <= e.bottom && i >= e.bottom - s && (r = "s"))
                      : (r = ""),
                r
            );
        }
        $5t(t, i) {
            bw.vu(t), bw.oN(i);
            let e = new bw.Event(t);
            (e.i8t = this), i && Object.assign(e, i), this.dispatchEvent(e);
        }
        bQe() {
            if (this.WJe) throw new Error("already keeping in main document");
            (this.WJe = !0),
                (this.NJe = document),
                document.body.appendChild(this.mht),
                (this.mht.style.display = "none");
        }
        uye(t) {
            this.tIe && this.tIe.tO(t);
        }
    };
}
{
    const Gw = self.t;
    Gw.ti.Eyi = class {
        constructor() {
            (this.vbi = null), (this.Rht = null), (this.vQe = !1), (this.SQe = null);
        }
        pr(t, i, e, s) {
            return (
                Gw.k$(t),
                Gw.Gmt(i),
                (e = !!e),
                (s = !!s),
                (this.vbi = i ? i.ownerDocument : document),
                (this.Rht = Gw.ti.gj("input", this.vbi.body)),
                this.Rht.setAttribute("hidden", ""),
                this.Rht.setAttribute("type", "file"),
                t && this.Rht.setAttribute("accept", t),
                e && this.Rht.setAttribute("multiple", ""),
                s && (this.Rht.setAttribute("webkitdirectory", ""), this.Rht.setAttribute("mozdirectory", "")),
                new Promise((t, i) => {
                    (this.SQe = (i) => {
                        if (((this.vQe = !0), this.Rht.files.length))
                            if (e) t(this.Rht.files);
                            else {
                                const i = this.Rht.files[0];
                                t(i);
                            }
                        else t(null);
                        this.Cz();
                    }),
                        this.Rht.addEventListener("change", this.SQe),
                        this.Rht.click();
                })
            );
        }
        Cz() {
            this.Rht.removeEventListener("change", this.SQe),
                (this.SQe = null),
                Gw.ti.Tz(this.Rht),
                (this.Rht = null),
                (this.vbi = null);
        }
        static async _yi(t, i, e, s) {
            const n = new Gw.ti.Eyi();
            return await n.pr(t, i, e, s);
        }
    };
}
{
    const Aw = self.t,
        Rw = Aw.sj(import.meta.url).getElementById("okDialog"),
        kw = "OK",
        Ow = { message: "", align: "center", xQe: !1, P6i: null, MQe: null },
        Dw = (Aw.ti.Ze.OK = class extends Aw.ti.Ze {
            constructor() {
                super(Rw),
                    (this.EQe = this.Jmt("okMessage")),
                    (this.CQe = this.Jmt("okList")),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this._Qe = this.Jmt("okDialogDoNotShowAgainWrapper")),
                    (this.TQe = this.Jmt("doNotShowAgainInput")),
                    (this.IQe = this.Jmt("doNotShowAgainLabel")),
                    (this.PQe = null),
                    (this.zJe = !1);
            }
            fgt() {
                this.OWi.textContent = self.lang("common.ok");
            }
            pr(t, i) {
                let e;
                Aw.Kke(t) ? ((e = Object.assign({}, Ow)), (e.message = t)) : (Aw.x$(t), (e = Object.assign({}, Ow, t)));
                let s = e.message;
                if (
                    (Aw.ti.CT(this.XLt(), "alignleft", "left" === e.align),
                    Aw.ti.CT(this.XLt(), "selectable", e.xQe),
                    "function" == typeof e.P6i
                        ? (Aw.hrt(this.IQe, self.lang("common.do-not-show-again")),
                          (this.PQe = () => {
                              e.P6i(this.TQe.value);
                          }),
                          this.TQe.addEventListener("input", this.PQe),
                          (this._Qe.style.display = ""))
                        : (this._Qe.style.display = "none"),
                    Aw.hrt(this.EQe, s),
                    Aw.ti.fMt(this.CQe),
                    e.MQe && Aw.vwt(e.MQe))
                ) {
                    this.CQe.style.display = "";
                    for (const t of e.MQe) {
                        Aw.$rt(t);
                        const i = Aw.ti.gj("li", this.CQe, null, "okListItem");
                        Aw.hrt(i, t);
                    }
                } else this.CQe.style.display = "none";
                return super.pr(i);
            }
            Cz() {
                this.TQe.removeEventListener("input", this.PQe), (this.TQe.value = !1), this.hr(null);
            }
        });
    Aw.ti.SK.zgt.addEventListener("load", function () {
        Aw.ti.Ze.Ugt(kw, Dw);
    });
}
{
    const Fw = self.t,
        Lw = Fw.sj(import.meta.url).getElementById("confirmDialog"),
        Bw = "Confirm",
        Uw = (Fw.ti.Ze.GQe = class extends Fw.ti.Ze {
            constructor() {
                super(Lw),
                    (this.OOe = null),
                    (this.Q0s = this.Jmt("confirmMessage")),
                    (this.AQe = this.Jmt("confirmButton")),
                    (this.zJe = !1),
                    (this.AQe.onclick = () => this.egt()),
                    (this._Wt = this.Jmt("cancelConfirmButton")),
                    (this._Wt.onclick = () => this.JLt());
            }
            fgt() {}
            pr(t, i) {
                Fw.Dpt(t), Fw.Gmt(i);
                let e = t.caption || "",
                    s = t.message || "",
                    n = t.jT || self.lang("common.ok"),
                    r = t.vT || self.lang("common.cancel");
                const h = !t.RQe;
                return (
                    e && this.hr(e),
                    Fw.hrt(this.Q0s, s),
                    (this.AQe.textContent = n),
                    (this._Wt.textContent = r),
                    h ? this.AQe.classList.add("bold") : this.AQe.classList.remove("bold"),
                    (this.wZe = !t.kQe),
                    super.pr(i)
                );
            }
            egt() {
                this.OOe && this.OOe(), super.egt();
            }
            Cz() {
                this.OOe = null;
            }
        });
    Fw.ti.SK.zgt.addEventListener("load", function () {
        Fw.ti.Ze.Ugt(Bw, Uw);
    });
}
{
    const Nw = self.t,
        jw = Nw.sj(import.meta.url).getElementById("confirmCheckDialog"),
        $w = "ConfirmCheck",
        zw = (Nw.ti.Ze.OQe = class extends Nw.ti.Ze {
            constructor() {
                super(jw),
                    (this.OOe = null),
                    (this.Q0s = this.Jmt("confirmMessage")),
                    (this.AQe = this.Jmt("confirmButton")),
                    (this.DQe = this.Jmt("confirmCheckbox")),
                    (this.FQe = this.Jmt("confirmCheckLabel")),
                    (this.LQe = !1),
                    (this.zJe = !1),
                    (this.AQe.onclick = () => (this.OOe && this.OOe(), this.egt())),
                    (this._Wt = this.Jmt("cancelConfirmButton")),
                    (this._Wt.onclick = () => this.JLt()),
                    (this.BQe = this.Jmt("buttonSpacer"));
            }
            fgt() {}
            pr(t, i) {
                Nw.Dpt(t), Nw.Gmt(i), Nw.vu(t.UQe);
                let e = t.caption || "",
                    s = t.message || "",
                    n = t.jT || self.lang("common.ok"),
                    r = t.vT || self.lang("common.cancel");
                const h = !!t.NQe;
                (this.DQe.checked = h),
                    (this.LQe = h),
                    (this.FQe.textContent = t.UQe),
                    e && this.hr(e),
                    Nw.hrt(this.Q0s, s),
                    (this.AQe.textContent = n),
                    (this._Wt.textContent = r),
                    (this.wZe = !t.kQe),
                    t.jQe
                        ? ((this._Wt.style.display = "none"),
                          (this.BQe.style.display = "none"),
                          this.AQe.classList.remove("bold"))
                        : ((this._Wt.style.display = ""),
                          (this.BQe.style.display = ""),
                          this.AQe.classList.add("bold"));
                const o = super.pr(i);
                return this.AQe.focus(), o;
            }
            egt() {
                (this.LQe = this.DQe.checked), super.egt();
            }
            JLt() {
                (this.LQe = this.DQe.checked), super.JLt();
            }
            $Qe() {
                return this.LQe;
            }
            Cz() {
                this.OOe = null;
            }
        });
    Nw.ti.SK.zgt.addEventListener("load", function () {
        Nw.ti.Ze.Ugt($w, zw);
    });
}
{
    const Vw = self.t,
        Ww = Vw.sj(import.meta.url).getElementById("confirmMultipleDialog"),
        Hw = "ConfirmMultiple",
        Kw = (Vw.ti.Ze.zQe = class extends Vw.ti.Ze {
            constructor() {
                super(Ww),
                    (this.OOe = null),
                    (this.Q0s = this.Jmt("confirmMultipleMessage")),
                    (this.VQe = this.Jmt("optionButtonsWrap")),
                    (this.WQe = this.Jmt("cancelButtonWrap")),
                    (this.HQe = "");
            }
            fgt() {}
            pr(t, i) {
                Vw.Dpt(t), Vw.Gmt(i), Vw._T(t.options);
                const e = t.caption || "",
                    s = t.message || "";
                e && this.hr(e), Vw.hrt(this.Q0s, s);
                const n = super.pr(i);
                for (let i = 0, e = t.options.length; i < e; ++i) {
                    const s = t.options[i],
                        n = s.text,
                        r = s.tag;
                    Vw.vu(n), Vw.vu(r);
                    const h = Vw.ti.gj("button", this.VQe);
                    if (
                        ((h.textContent = n),
                        (h.onclick = () => this.egt(r)),
                        0 === i && ((this.HQe = r), h.setAttribute("main", "")),
                        i < e - 1)
                    ) {
                        Vw.ti.gj("span", this.VQe).setAttribute("button-spacer", "");
                    }
                }
                if (t.PT) {
                    const t = Vw.ti.gj("button", this.WQe);
                    (t.textContent = self.lang("common.cancel")),
                        (t.onclick = () => this.egt("cancel")),
                        t.setAttribute("cancel", "");
                }
                return n;
            }
            egt(t) {
                Vw.k$(t), t || (t = this.HQe), "cancel" === t ? this.igt() : (this.OOe && this.OOe(t), this.WD(t));
            }
            Cz() {
                (this.OOe = null), Vw.ti.fMt(this.VQe), Vw.ti.fMt(this.WQe);
            }
        });
    Vw.ti.SK.zgt.addEventListener("load", function () {
        Vw.ti.Ze.Ugt(Hw, Kw);
    });
}
{
    const qw = self.t,
        Xw = qw.sj(import.meta.url),
        Yw = Xw.getElementById("progressDialog"),
        Jw = qw.nj(Xw.URL);
    qw.u.ij(Jw + "lang");
    const Zw = "Progress",
        Qw = 100,
        tg = (qw.ti.Ze.KQe = class extends qw.ti.Ze {
            constructor() {
                super(Yw),
                    (this.qQe = this.Jmt("progressBar")),
                    (this.onprogress = null),
                    (this.XQe = !0),
                    (this.zVe = -1),
                    (this.YQe = 0),
                    (this.JQe = ""),
                    (this.qq = null),
                    (this.zJe = !1),
                    (this.ZQe = null),
                    (this._Wt = this.Jmt("cancelConfirmButton")),
                    (this._Wt.onclick = () => this.JLt());
            }
            fgt() {}
            pr(t, i, e) {
                qw.k$(t),
                    (this.YQe = 0),
                    t
                        ? (this.JQe = t)
                        : this.onprogress
                          ? (this.JQe = `${self.lang("ui.dialogs.progress.titleBase")} ({0}%)...`)
                          : (this.JQe = `${self.lang("ui.dialogs.progress.titleBase")}...`),
                    (this._Wt.textContent = self.lang("ui.dialogs.progress.cancelButton")),
                    this.onprogress
                        ? (this.QQe(!1), this.t0e(!0), (this.zVe = window.setInterval(() => this.t0e(), Qw)))
                        : (this.QQe(!0), this.hr(this.JQe)),
                    e
                        ? ((this.ZQe = e), (this._Wt.style.display = ""))
                        : ((this.ZQe = null), (this._Wt.style.display = "none")),
                    (this.wZe = !!e);
                const s = super.pr(i);
                return this.qq || (this.qq = qw.ti.OF.PF("wait", this.CF())), s;
            }
            QQe(t) {
                (t = !!t),
                    this.XQe !== t &&
                        ((this.XQe = t),
                        this.XQe
                            ? (this.qQe.removeAttribute("value"), this.qQe.removeAttribute("max"))
                            : ((this.qQe.value = this.YQe), (this.qQe.max = 1)));
            }
            t0e(t) {
                if (!this.onprogress) return;
                let i = this.onprogress();
                (this.YQe !== i || t) &&
                    ((this.YQe = i),
                    null === this.YQe
                        ? (this.QQe(!0), this.hr(this.JQe.replace("{0}", "0")))
                        : (isFinite(this.YQe) || (this.YQe = 0),
                          (this.YQe = qw.ft(this.YQe, 0, 1)),
                          this.QQe(!1),
                          (this.qQe.value = this.YQe),
                          this.hr(this.JQe.replace("{0}", Math.round(1e3 * i) / 10))));
            }
            oQe() {
                -1 !== this.zVe && (window.clearInterval(this.zVe), (this.zVe = -1)),
                    qw.ti.OF.kF(this.qq),
                    (this.qq = null),
                    (this.onprogress = null),
                    (this.YQe = 0),
                    super.oQe();
            }
            egt() {}
            JLt() {
                this.ZQe && (this.ZQe(), super.JLt());
            }
        });
    qw.ti.SK.zgt.addEventListener("load", function () {
        qw.ti.Ze.Ugt(Zw, tg);
    });
}
{
    const ig = self.t,
        eg = ig.sj(import.meta.url),
        sg = eg.getElementById("downloadDialog"),
        ng = ig.nj(eg.URL);
    ig.u.ij(ng + "lang");
    const rg = "Download",
        hg = 10,
        og = (ig.ti.Ze.xN = class extends ig.ti.Ze {
            constructor() {
                super(sg),
                    (this.qQe = this.Jmt("downloadProgressBar")),
                    (this.i0e = this.Jmt("downloadDetails")),
                    (this.zVe = -1),
                    (this.qEe = ""),
                    (this.CIs = ""),
                    (this.e0e = 0),
                    (this.s0e = 0),
                    (this.n0e = 0),
                    (this.r0e = []),
                    (this.h0e = 0),
                    (this.o0e = !1),
                    (this.qq = null),
                    (this.zJe = !1);
            }
            fgt() {}
            pr(t, i) {
                ig.vu(t),
                    (this.qEe = t),
                    (this.e0e = 0),
                    (this.s0e = 0),
                    (this.h0e = 0),
                    (this.n0e = 0),
                    ig.yh(this.r0e),
                    (this.o0e = !0);
                let e = this.qEe.lastIndexOf("/");
                (this.CIs = this.qEe.substring(e + 1)),
                    this.hr(self.lang("ui.dialogs.download.caption")),
                    (this.wZe = !1);
                let s = super.pr(i);
                return (
                    this.qq || (this.qq = ig.ti.OF.PF("progress", this.CF())),
                    ig
                        .ma(t, (t) => this.a0e(t))
                        .then((t) => {
                            ig.ti.OF.kF(this.qq), (this.qq = null), this.WD(t);
                        })
                        .catch((t) => {
                            ig.ti.OF.kF(this.qq), (this.qq = null), this.dQe(t);
                        }),
                    (this.zVe = window.setInterval(() => this.l0e(!0), 1e3)),
                    this.l0e(),
                    s
                );
            }
            a0e(t) {
                if (!t.lengthComputable) return;
                (this.h0e = t.total), (this.s0e = t.loaded), this.o0e && ((this.o0e = !1), this.l0e(!1));
                let i = (100 * this.s0e) / this.h0e;
                (this.qQe.value = i), this.hr(self.ej("ui.dialogs.download.caption-progress", Math.round(i)));
            }
            u0e(t) {
                ig.wi(t), this.r0e.length >= hg && this.r0e.shift(), this.r0e.push(t);
            }
            c0e() {
                if (0 === this.r0e.length) return 0;
                let t = 0;
                for (let i of this.r0e) t += i;
                return t / this.r0e.length;
            }
            l0e(t) {
                t && ((this.n0e = this.s0e - this.e0e), this.u0e(this.n0e), (this.e0e = this.s0e));
                const i = self.lang;
                ig.u.o("ui.dialogs.download");
                let e = i(".downloading-label") + this.CIs;
                this.h0e > 0 && (e += " (" + ig.nbe(this.h0e) + ")"),
                    (e += "<br/>"),
                    (e += i(".speed-label")),
                    0 === this.n0e ? (e += i(".calculating")) : (e += ig.nbe(this.n0e, !0));
                let s = navigator.connection || navigator.d0e || navigator.f0e,
                    n = s ? s.type : "";
                n && "other" !== n && "unknown" !== n && (e += " (" + n + ")"),
                    (e += "<br/>"),
                    (e += i(".time-remaining-label"));
                let r = -1;
                if (this.r0e.length < 2) e += i(".calculating");
                else {
                    let t = this.c0e();
                    0 === t
                        ? (e += i(".stalled"))
                        : ((r = (this.h0e - this.s0e) / t),
                          (r = 5 * Math.round(r / 5)),
                          (e += r < 5 ? i("common.time.a-few-seconds") : ig.hUe(r, { iUe: !0 })));
                }
                (this.i0e.innerHTML = e), ig.u.it(), this.IEe();
            }
            oQe() {
                window.clearInterval(this.zVe), (this.zVe = -1), super.oQe();
            }
            egt() {}
            JLt() {}
        });
    ig.ti.SK.zgt.addEventListener("load", function () {
        ig.ti.Ze.Ugt(rg, og);
    });
}
{
    const ag = self.t,
        lg = ag.sj(import.meta.url),
        ug = lg.getElementById("openPopupWindowDialog"),
        cg = ag.nj(lg.URL),
        dg = "OpenPopupWindow";
    ag.u.ij(cg + "lang");
    const fg = (ag.ti.Ze.p0e = class extends ag.ti.Ze {
        constructor() {
            super(ug),
                (this.Q0s = this.Jmt("openPopupWindowMessage")),
                (this.m0e = this.Jmt("openPopupWindowTryAgain")),
                (this.m0e.onclick = () => this.egt()),
                (this._Wt = this.Jmt("openPopupWindowCancel")),
                (this._Wt.onclick = () => this.JLt()),
                (this.qEe = ""),
                (this.dXt = null),
                (this.zJe = !1);
        }
        fgt() {
            const t = self.lang;
            this.hr(t("ui.dialogs.openPopupWindow.caption")),
                ag.u.o("ui.dialogs.openPopupWindow"),
                (this.Q0s.textContent = t(".body")),
                (this._Wt.textContent = t("common.cancel")),
                (this.m0e.textContent = t(".try-again")),
                ag.u.it();
        }
        pr(t, i) {
            return (this.qEe = t), (this.dXt = i), super.pr(i.ugt);
        }
        egt() {
            const t = Object.assign({}, this.dXt);
            (t.BYe = !1),
                ag.ti.LYe.tJe(this.qEe, t).then((t) => {
                    t && this.WD(t);
                });
        }
    });
    ag.ti.SK.zgt.addEventListener("load", function () {
        ag.ti.Ze.Ugt(dg, fg);
    });
}
{
    const pg = self.t,
        mg = pg.sj(import.meta.url).getElementById("fontPickerDialog"),
        wg = "FontPicker",
        gg = 250,
        yg = { Yre: "", eae: "", tae: 20, sae: [], nae: "" },
        bg = ["serif", "sans-serif", "monospace", "cursive", "fantasy", "system-ui"],
        vg = (pg.ti.Ze.w0e = class extends pg.ti.Ze {
            constructor() {
                super(mg),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this._Wt = this.Jmt("cancelButton")),
                    (this._Wt.onclick = () => this.JLt()),
                    (this.g0e = this.Jmt("fontPickerLocalHeaderText")),
                    (this.y0e = this.Jmt("localFontSelect")),
                    this.y0e.addEventListener("change", () => this.b0e()),
                    (this.v0e = this.Jmt("additionalFontSection")),
                    (this.S0e = this.Jmt("fontPickerAdditionalHeaderText")),
                    (this.x0e = this.Jmt("additionalFontSelect")),
                    this.x0e.addEventListener("change", () => this.M0e()),
                    (this.E0e = this.Jmt("sampleTextHeader")),
                    (this.C0e = this.Jmt("sampleText")),
                    (this._0e = ""),
                    (this.T0e = this.Jmt("fontPickerMorePreview")),
                    (this.T0e.onclick = () => this.I0e()),
                    (this.P0e = ""),
                    (this.G0e = ""),
                    (this.A0e = !1),
                    (this.pi = !1),
                    (this.zJe = !1);
            }
            fgt() {
                pg.u.o("ui.dialogs.std.font-picker");
                const t = self.lang;
                this.hr(t(".caption")),
                    (this.g0e.textContent = t(".loading-message")),
                    (this.OWi.textContent = t("common.ok")),
                    (this._Wt.textContent = t("common.cancel")),
                    (this.T0e.textContent = t(".more-preview")),
                    pg.u.it();
            }
            pr(t, i) {
                pg.x$(t),
                    (t = Object.assign({}, yg, t)),
                    pg.vu(t.Yre),
                    pg.vu(t.eae),
                    pg._T(t.sae),
                    pg.vu(t.nae),
                    this.A0e || this.pi || this.R0e(),
                    (this.P0e = t.Yre || ""),
                    (this.G0e = this.P0e),
                    (this._0e = t.eae || "");
                let e = t.tae;
                return (
                    e > 72 && (e = 72),
                    (this.C0e.style.fontSize = `${e}pt`),
                    this._0e.length > gg && (this._0e = this._0e.substr(0, gg) + "..."),
                    t.sae.length
                        ? (this.v0e.removeAttribute("hidden"),
                          (this.S0e.textContent =
                              t.nae || self.lang("ui.dialogs.std.font-picker.default-additional-fonts-header")),
                          this.k0e(t.sae))
                        : this.v0e.setAttribute("hidden", ""),
                    this.A0e &&
                        ((this.C0e.textContent =
                            this._0e || self.lang("ui.dialogs.std.font-picker.default-sample-text")),
                        this.O0e()),
                    super.pr(i)
                );
            }
            R0e() {
                this.pi = !0;
                const t = this.FO().ownerDocument,
                    i = pg.u.z_("ui.dialogs.std.font-picker"),
                    e = t.createElement("option");
                (e.value = ""), (e.textContent = i(".none-selected")), this.y0e.appendChild(e);
                const s = t.createElement("optgroup");
                s.label = i(".generic-font-families-group");
                for (const e of bg) {
                    const n = t.createElement("option");
                    (n.value = e),
                        (n.textContent = i(`.generic-font-families.${e}`)),
                        (n.style.fontFamily = e),
                        n.setAttribute("title", e),
                        n.addEventListener("UIDoubleTap", () => this.WD(e)),
                        s.appendChild(n);
                }
                this.y0e.appendChild(s), pg.NBe.jBe().then((t) => this.D0e(t));
            }
            D0e(t) {
                (this.pi = !1), (this.A0e = !0);
                const i = this.FO().ownerDocument,
                    e = pg.u.z_("ui.dialogs.std.font-picker"),
                    s = i.createElement("optgroup");
                s.label = e(".other-fonts-group");
                for (const e of t) {
                    const t = i.createElement("option");
                    (t.value = e),
                        (t.textContent = e),
                        (t.style.fontFamily = e),
                        t.setAttribute("title", e),
                        t.addEventListener("UIDoubleTap", () => this.WD(e)),
                        s.appendChild(t);
                }
                this.y0e.appendChild(s),
                    this.O0e(),
                    (this.g0e.textContent = e(".local-font-header")),
                    (this.E0e.textContent = e(".sample-text-header")),
                    (this.C0e.textContent = this._0e || e(".default-sample-text"));
            }
            k0e(t) {
                let i = this.FO().ownerDocument,
                    e = i.createElement("option");
                (e.value = ""),
                    (e.textContent = self.lang("ui.dialogs.std.font-picker.none-selected")),
                    this.x0e.appendChild(e);
                for (let e of t) {
                    let t = i.createElement("option");
                    (t.value = e),
                        (t.textContent = e),
                        (t.style.fontFamily = e),
                        t.setAttribute("title", e),
                        t.addEventListener("UIDoubleTap", () => this.WD(e)),
                        this.x0e.appendChild(t);
                }
            }
            O0e() {
                this.P0e &&
                    ((this.y0e.value = this.P0e),
                    -1 === this.y0e.selectedIndex
                        ? ((this.x0e.value = this.P0e),
                          -1 === this.x0e.selectedIndex ? ((this.y0e.selectedIndex = 0), this.b0e()) : this.M0e())
                        : this.b0e());
            }
            b0e() {
                0 !== this.y0e.selectedIndex
                    ? ((this.G0e = this.y0e.value),
                      (this.y0e.style.fontFamily = this.G0e),
                      (this.x0e.selectedIndex = 0),
                      (this.x0e.style.fontFamily = ""),
                      this.F0e())
                    : (this.y0e.style.fontFamily = "");
            }
            M0e() {
                0 !== this.x0e.selectedIndex
                    ? ((this.G0e = this.x0e.value),
                      (this.x0e.style.fontFamily = this.G0e),
                      (this.y0e.selectedIndex = 0),
                      (this.y0e.style.fontFamily = ""),
                      this.F0e())
                    : (this.x0e.style.fontFamily = "");
            }
            F0e() {
                this.C0e.style.fontFamily = this.G0e;
            }
            I0e() {
                pg.ti.Ze.Ke("FontPreview").pr(this.G0e, this.FO());
            }
            egt() {
                this.WD(this.G0e);
            }
            Cz() {
                pg.ti.fMt(this.x0e);
            }
        });
    pg.ti.SK.zgt.addEventListener("load", function () {
        pg.ti.Ze.Ugt(wg, vg);
    });
}
{
    const Sg = self.t,
        xg = Sg.sj(import.meta.url),
        Mg = xg.getElementById("fontPreviewDialog"),
        Eg = Sg.nj(xg.URL);
    Sg.u.ij(Eg + "lang");
    const Cg = "FontPreview",
        _g = [5, 8, 11, 14, 20, 36, 48, 72],
        Tg = new Set([
            "serif",
            "sans-serif",
            "monospace",
            "cursive",
            "fantasy",
            "system-ui",
            "ui-serif",
            "ui-sans-serif",
            "ui-monospace",
            "ui-rounded",
            "math",
            "emoji",
            "fangsong",
        ]),
        Ig = (Sg.ti.Ze.L0e = class extends Sg.ti.Ze {
            constructor() {
                super(Mg),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this.B0e = this.Jmt("fontPreviewBody")),
                    (this.zJe = !1),
                    (this.U0e = ""),
                    (this.N0e = null);
            }
            fgt() {
                this.OWi.textContent = self.lang("common.close-dialog");
            }
            async pr(t, i) {
                if (Sg.tet(t)) this.U0e = t;
                else {
                    const i = await Sg.XLe(t);
                    if (!i) return;
                    (this.N0e = i), document.fonts.add(this.N0e), (this.U0e = this.N0e.family);
                }
                Sg.u.o("ui.dialogs.fontPreview"), this.hr(self.ej(".caption", this.U0e));
                let e = self.lang(".example-text");
                Sg.u.it();
                for (let t = 0; t < _g.length; ++t) {
                    let i = document.createElement("span");
                    (i.className = "exampleText"),
                        (i.textContent = e),
                        (i.style.fontSize = _g[t] + "pt"),
                        (i.style.fontFamily = Tg.has(this.U0e) ? this.U0e : `'${this.U0e}'`),
                        this.B0e.appendChild(i);
                }
                return super.pr(i);
            }
            Cz() {
                (this.U0e = ""), (this.N0e = null), Sg.ti.fMt(this.B0e);
            }
        });
    Sg.ti.SK.zgt.addEventListener("load", () => {
        Sg.ti.Ze.Ugt(Cg, Ig);
    });
}
{
    const Pg = self.t,
        Gg = Pg.sj(import.meta.url).getElementById("inputDialog"),
        Ag = "Input",
        Rg = {
            caption: "",
            message: "",
            label: "",
            inputType: "text",
            j0e: "",
            RHt: "",
            vei: !1,
            spellcheck: !0,
            jT: "",
            vT: "",
            Gei: [],
            size: NaN,
        },
        kg = (Pg.ti.Ze.$0e = class extends Pg.ti.Ze {
            constructor() {
                super(Gg),
                    (this.Q0s = this.Jmt("inputMessage")),
                    (this.eut = this.Jmt("inputLabel")),
                    (this.Rht = this.Jmt("input")),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this._Wt = this.Jmt("cancelButton")),
                    (this._Wt.onclick = () => this.JLt()),
                    (this.zJe = !1),
                    (this.z0e = null);
            }
            fgt() {}
            pr(t, i) {
                Pg.x$(t),
                    (t = Object.assign({}, Rg, t)),
                    Pg.vu(t.caption),
                    Pg.$rt(t.message),
                    Pg.$rt(t.label),
                    Pg.k$(t.inputType),
                    Pg.k$(t.j0e),
                    Pg.k$(t.RHt),
                    Pg.k$(t.jT),
                    Pg.k$(t.vT),
                    Pg.Pce(t.Gei),
                    Pg.P5(t.size),
                    this.hr(t.caption),
                    Pg.hrt(this.Q0s, t.message),
                    Pg.hrt(this.eut, t.label),
                    this.Rht.setAttribute("type", t.inputType || "text"),
                    this.Rht.setAttribute("placeholder", t.j0e || ""),
                    this.Rht.setAttribute("spellcheck", t.spellcheck ? "true" : "false"),
                    Pg.Xl(t.size) &&
                        (this.Rht.setAttribute("size", t.size), this.Rht.setAttribute("maxLength", t.size)),
                    (this.Rht.value = t.RHt || ""),
                    t.vei && this.Rht.select(),
                    (this.OWi.textContent = t.jT || self.lang("common.ok")),
                    (this._Wt.textContent = t.vT || self.lang("common.cancel")),
                    (this.z0e = t.Gei);
                const e = super.pr(i);
                return this.Rht.focus(), e;
            }
            egt() {
                for (const t of this.z0e)
                    if (!t.check(this.Rht.value))
                        return void Pg.ti.Tj.UK.XO(this.Rht, "warning", t.Cei.title, t.Cei.message, {
                            align: "bottom",
                        });
                this.Rht.value ? this.WD(this.Rht.value) : this.WD(0);
            }
            Cz() {
                this.hr(null);
            }
        });
    Pg.ti.SK.zgt.addEventListener("load", function () {
        Pg.ti.Ze.Ugt(Ag, kg);
    });
}
{
    const Og = self.t,
        Dg = Og.sj(import.meta.url).getElementById("inputCheckDialog"),
        Fg = "InputCheck",
        Lg = {
            caption: "",
            message: "",
            label: "",
            inputType: "text",
            j0e: "",
            RHt: "",
            spellcheck: !0,
            jT: "",
            vT: "",
            NQe: !1,
            UQe: "",
        },
        Bg = (Og.ti.Ze.V0e = class extends Og.ti.Ze {
            constructor() {
                super(Dg),
                    (this.Q0s = this.Jmt("inputMessage")),
                    (this.eut = this.Jmt("inputLabel")),
                    (this.Rht = this.Jmt("input")),
                    (this.DQe = this.Jmt("inputCheckbox")),
                    (this.FQe = this.Jmt("inputCheckLabel")),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this._Wt = this.Jmt("cancelButton")),
                    (this._Wt.onclick = () => this.JLt()),
                    (this.zJe = !1);
            }
            fgt() {}
            pr(t, i) {
                Og.x$(t),
                    (t = Object.assign({}, Lg, t)),
                    Og.vu(t.caption),
                    Og.$rt(t.message),
                    Og.$rt(t.label),
                    Og.k$(t.inputType),
                    Og.k$(t.j0e),
                    Og.k$(t.RHt),
                    Og.k$(t.jT),
                    Og.k$(t.vT),
                    Og.k$(t.UQe),
                    this.hr(t.caption),
                    Og.hrt(this.Q0s, t.message),
                    Og.hrt(this.eut, t.label),
                    this.Rht.setAttribute("type", t.inputType || "text"),
                    this.Rht.setAttribute("placeholder", t.j0e || ""),
                    this.Rht.setAttribute("spellcheck", t.spellcheck ? "true" : "false"),
                    (this.Rht.value = t.RHt || ""),
                    (this.DQe.checked = !!t.NQe),
                    (this.FQe.textContent = t.UQe),
                    (this.OWi.textContent = t.jT || self.lang("common.ok")),
                    (this._Wt.textContent = t.vT || self.lang("common.cancel"));
                const e = super.pr(i);
                return this.Rht.focus(), e;
            }
            egt() {
                this.WD({ value: this.Rht.value, check: this.DQe.checked });
            }
            Cz() {
                this.hr(null);
            }
        });
    Og.ti.SK.zgt.addEventListener("load", function () {
        Og.ti.Ze.Ugt(Fg, Bg);
    });
}
{
    const Ug = self.t,
        Ng = self.assert;
    Ug.ti.QO = class extends Ug.MV {
        constructor(t, i, e) {
            Ug.vu(t),
                Ug.qm(e, Ug.ti.QO.drt),
                super(),
                (this.nes = t),
                (this.W0e = i),
                (this.H0e = e || null),
                (this.K0e = !1),
                this.H0e
                    ? ((this.mht = this.H0e.mht), (this.mht.id = t), (this.K0e = e.K0e))
                    : ((this.mht = Ug.ti.gj("ui-pane", null, t)), document.body.appendChild(this.mht), Ug.ti.Qqe(this)),
                (this.q0e = []),
                (this.X0e = !0),
                this.mht.removeAttribute(this.W0e ? "vgrid" : "hgrid"),
                this.mht.setAttribute(this.W0e ? "hgrid" : "vgrid", ""),
                (this.Y0e = null),
                (this.J0e = !0),
                (this.di = !1);
        }
        zb() {
            if (this.di) throw new Error("layout has already been released");
            if (Ug.ti.iXe(this)) throw new Error("main layout can not be removed");
            (this.di = !0), (this.mht = null), (this.H0e = null), (this.Y0e = null), Ug.Ut(this);
        }
        Z0e(t) {
            t
                ? ((this.mht.style.position = "relative"), (this.mht.style.top = window.innerHeight + 100 + "px"))
                : ((this.mht.style.position = ""), (this.mht.style.top = ""));
        }
        JD() {
            return this.nes;
        }
        zqi() {
            return this.W0e;
        }
        Q0e() {
            return this.H0e;
        }
        t1e(t) {
            return this.q0e.includes(t);
        }
        FO() {
            return this.mht;
        }
        i1e() {
            return this.q0e;
        }
        e1e() {
            return this.K0e;
        }
        s1e(t) {
            if (((t = !!t), this.K0e !== t)) {
                this.K0e = t;
                for (let i = 0, e = this.q0e.length; i < e; ++i) this.q0e[i].s1e(t);
            }
        }
        n1e(t, i, e) {
            this.r1e(t);
            let s = Ug.m(Ug.ti.QO.drt, this, t, i, e);
            return this.q0e.push(s), (this.X0e = !0), this.ent(), Ug.ti.cE.GYe(), s;
        }
        h1e(t, i, e) {
            this.r1e(t);
            let s = Ug.m(Ug.ti.QO.o1e, this, t, i, e);
            return s.a1e(t), Ug.ti.cE.GYe(), s;
        }
        fG(t, i, e, s) {
            this.r1e(t);
            let n = Ug.m(Ug.ti.QO.l1e, this, t, i, e, s);
            return n.a1e(t), Ug.ti.cE.GYe(), n;
        }
        let(t, i, e) {
            this.r1e(t);
            let s = Ug.m(Ug.ti.QO.u1e, this, t, i, e);
            return this.q0e.push(s), (this.X0e = !0), this.ent(), Ug.ti.cE.GYe(), s;
        }
        r1e(t) {
            if (!Ug.ti.oXe(t)) throw new Error(`invalid CSS length: '${t}'`);
        }
        c1e(t) {
            let i = this.q0e.indexOf(t);
            -1 !== i && (this.q0e.splice(i, 1), this.mht.removeChild(t.FO()), (this.X0e = !0), this.ent());
        }
        d1e(t, i, e) {
            if ((Ng(!this.q0e.includes(t), "Cannot link a pane already in grid"), (this.X0e = !0), i))
                e || (e = i.f1e()),
                    Ng(
                        (this.zqi() && ("left" === e || "right" === e)) ||
                            (!this.zqi() && ("top" === e || "bottom" === e)),
                        "Dock side incompatible with direction of this layout"
                    ),
                    "left" === e || "top" === e
                        ? (this.mht.insertBefore(t.FO(), i.FO()), this.q0e.splice(this.q0e.indexOf(i), 0, t))
                        : (this.mht.insertBefore(t.FO(), i.FO().nextSibling),
                          this.q0e.splice(this.q0e.indexOf(i) + 1, 0, t));
            else {
                let i = t.f1e();
                i &&
                    Ng(
                        (this.zqi() && ("left" === i || "right" === i)) ||
                            (!this.zqi() && ("top" === i || "bottom" === i)),
                        "Dock side incompatible with direction of this layout"
                    ),
                    "left" === i || "top" === i
                        ? (this.mht.insertBefore(t.FO(), this.mht.firstChild), this.q0e.unshift(t))
                        : (this.mht.appendChild(t.FO()), this.q0e.push(t));
            }
            this.ent();
        }
        p1e(t, i) {
            let e = this.q0e.indexOf(t);
            Ng(e >= 0, "Cannot find old pane to replace"),
                t.zb(),
                (this.q0e[e] = i),
                (this.X0e = !0),
                this.ent(),
                this.m1e();
        }
        w1e() {
            for (let t = 0; t < this.q0e.length; ++t) {
                if (this.q0e[t].g1e()) return !0;
            }
            return !1;
        }
        gl(t) {
            if (!this.X0e && !t) return;
            this.X0e = !1;
            let i = this.w1e(),
                e = "",
                s = !1;
            for (let t = 0, n = this.q0e.length; t < n; ++t) {
                let r = this.q0e[t],
                    h = r.y1e();
                !i && t > 0 && t === n - 1 ? r.b1e(!0) : t < n - 1 && r.b1e(!1),
                    r.v1e() && (h = "1fr"),
                    0 !== t && (e += " "),
                    (e += h),
                    this.W0e ? r.S1e(t + 1) : r.x1e(t + 1),
                    r.M1e() && !r.g1e() && "" !== r.E1e
                        ? this.W0e
                            ? r.C1e(s ? "right" : "left")
                            : r.C1e(s ? "bottom" : "top")
                        : (s = !0);
            }
            this.W0e
                ? ((this.mht.style.gridTemplateColumns = e), (this.mht.style.gridTemplateRows = ""))
                : ((this.mht.style.gridTemplateColumns = ""), (this.mht.style.gridTemplateRows = e));
        }
        jvt() {
            return this.J0e && ((this.Y0e = this.mht.getBoundingClientRect()), (this.J0e = !1)), this.Y0e;
        }
        rs() {
            let t = this.jvt();
            return t.right - t.left;
        }
        ls() {
            let t = this.jvt();
            return t.bottom - t.top;
        }
        ent() {
            this.J0e = !0;
            for (let t = 0, i = this.q0e.length; t < i; ++t) this.q0e[t].ent();
        }
        uF(t, i) {
            Ug.wi(t), Ug.wi(i);
            let e = this.jvt();
            return t >= e.left && t < e.right && i >= e.top && i < e.bottom;
        }
        _1e(t, i, e) {
            if ((Ug.wi(t), Ug.wi(i), !this.uF(t, i))) return null;
            for (let s = 0, n = this.q0e.length; s < n; ++s) {
                let n = this.q0e[s];
                if (n.uF(t, i, e)) {
                    if (n.T1e()) {
                        return n.I1e()._1e(t, i, e);
                    }
                    return n;
                }
            }
            return null;
        }
        P1e(t) {
            Ng(!t != !this.zqi(), "No point subdividing a Layout in the same direction"),
                Ng(this.H0e, "Subdividing the top level layout is not yet supported");
            let i = Ug.m(Ug.ti.QO, Ug.VD(this.nes), t, this.H0e);
            this.H0e.G1e(i);
            let e = i.n1e("1fr");
            return (
                e.A1e(this),
                (this.mht = e.mht),
                (this.mht.id = this.nes),
                (this.K0e = e.K0e),
                (this.X0e = !0),
                this.ent(),
                this.m1e(),
                i.gl(),
                this.gl(),
                i
            );
        }
        R1e(t, i) {
            Ug.Et(t, Ug.ti.QO.drt), Ng(!i != !this.zqi(), "No point subdividing a Layout in the same direction");
            let e = this.q0e.indexOf(t);
            Ng(e >= 0, "Cannot find pane to split");
            let s,
                n = Ug.VD(this.nes);
            if (t.M1e()) {
                s = Ug.m(Ug.ti.QO.o1e, this, t.y1e(), n);
                let e = t.f1e();
                e || (e = i ? "left" : "top"), s.k1e() || s.C1e(e);
            } else s = Ug.m(Ug.ti.QO.drt, this, t.y1e(), n);
            let r = s.O1e(Ug.VD(n), i);
            return r.q0e.push(t), (this.q0e[e] = s), r.m1e(), this.m1e(), r.gl(), this.gl(), Ug.ti.cE.GYe(), r;
        }
        D1e(t) {
            Ug.Et(t, Ug.ti.QO.drt),
                Ng(!(t instanceof Ug.ti.QO.u1e), "cannot replace tabbed pane with another tabbed pane");
            let i = this.q0e.indexOf(t);
            Ng(i >= 0, "Cannot find pane to replace");
            let e = Ug.VD(this.nes),
                s = Ug.m(Ug.ti.QO.u1e, this, t.y1e(), e);
            return (
                t instanceof Ug.ti.QO.o1e && ((s.F1e = t.F1e), s.C1e(t.f1e())),
                Ug.ti.Tz(t.FO()),
                (this.q0e[i] = s),
                (this.X0e = !0),
                this.ent(),
                this.m1e(),
                this.gl(),
                Ug.ti.cE.GYe(),
                s
            );
        }
        L1e(t) {
            Ug.Et(t, Ug.ti.QO.u1e),
                Ng(1 === t.Trt(), "expected tabbed pane with a single tab"),
                Ng(!t.B1e(), "should keep tabbed pane");
            let i = t.f1e(),
                e = this.q0e.indexOf(t);
            Ng(e >= 0, "Cannot find tabbed pane to remove");
            let s = t.U1e();
            s.N1e(null),
                s.j1e(t.y1e()),
                s.M1e() && s.C1e(i),
                t.zb(),
                (this.q0e[e] = s),
                (this.X0e = !0),
                this.ent(),
                this.m1e(),
                this.gl(),
                s.$1e();
        }
        m1e() {
            for (let t = 0, i = this.q0e.length; t < i; ++t) {
                let i = this.q0e[t],
                    e = i.FO();
                Ug.ti.Tz(e), this.mht.appendChild(e), (i.SG = this);
            }
        }
        z1e() {
            return 1 === this.q0e.length;
        }
        V1e(t) {
            !this.W0e != !t &&
                ((this.W0e = !!t),
                this.mht.removeAttribute(this.W0e ? "vgrid" : "hgrid"),
                this.mht.setAttribute(this.W0e ? "hgrid" : "vgrid", ""),
                (this.X0e = !0),
                this.ent());
        }
        W1e() {
            if (
                (Ng(this.q0e.length > 0, "Layout has ended up with 0 panes, how did this happen?"), this.q0e.length > 1)
            )
                return this;
            return this.q0e[0].T1e() ? this.H1e() : this.H0e && this.H0e.SG && this.H0e.SG.e1e() ? this.K1e() : this;
        }
        H1e() {
            Ng(1 === this.q0e.length, "Cannot merge down unless layout has exactly 1 pane");
            let t = this.q0e[0];
            Ng(t.T1e(), "Cannot merge down unless pane has sub grid");
            let i = t.I1e(),
                e = i.nes;
            return (
                (this.q0e = i.q0e),
                t.b1e(!1),
                t.zb(),
                this.m1e(),
                (this.W0e = i.W0e),
                this.mht.removeAttribute(this.W0e ? "vgrid" : "hgrid"),
                this.mht.setAttribute(this.W0e ? "hgrid" : "vgrid", ""),
                (this.nes = e),
                (this.mht.id = e),
                (this.X0e = !0),
                this.ent(),
                this.gl(),
                this
            );
        }
        K1e() {
            Ng(1 === this.q0e.length, "Cannot merge up unless layout has exactly 1 pane");
            let t = this.q0e[0],
                i = this.H0e.SG;
            Ng(i && i.e1e(), "Must have parent grid which is dock target to merge up"),
                this.H0e.M1e() && t.j1e(this.H0e.y1e());
            const e = this.nes;
            return t.b1e(!1), i.p1e(this.H0e, t), i.gl(), i.nes.startsWith(e) && ((i.nes = e), (i.mht.id = e)), i;
        }
        q1e() {
            if (!this.e1e()) return;
            let t = [],
                i = !1,
                e = !1;
            for (let s = 0, n = this.q0e.length; s < n; ++s) {
                let n = this.q0e[s],
                    r = n.I1e();
                if ((n.g1e() && (e = !0), n.M1e())) {
                    let t = n.f1e();
                    this.zqi()
                        ? ("top" !== t && "bottom" !== t) || n.C1e(e ? "right" : "left")
                        : ("left" !== t && "right" !== t) || n.C1e(e ? "bottom" : "top");
                }
                r && (r.zqi() === this.zqi() || r.z1e())
                    ? (this.nes.startsWith(r.nes) && ((this.nes = r.nes), (this.mht.id = r.nes)),
                      Ug.Uc(t, r.q0e),
                      n.zb(),
                      (i = !0))
                    : t.push(n);
            }
            i && ((this.q0e = t), (this.X0e = !0), this.ent(), this.m1e(), this.gl()),
                this.H0e && this.H0e.SG && this.H0e.SG.q1e();
        }
        Eat() {
            let t = 0;
            if (this.zqi())
                for (let i = 0, e = this.q0e.length; i < e; ++i) {
                    let e = this.q0e[i];
                    e.M1e() && !e.g1e() ? (t += e.rs()) : (t += e.Eat());
                }
            else
                for (let i = 0, e = this.q0e.length; i < e; ++i) {
                    let e = this.q0e[i].Eat();
                    t < e && (t = e);
                }
            return t;
        }
        zat() {
            let t = 0;
            if (this.zqi())
                for (let i = 0, e = this.q0e.length; i < e; ++i) {
                    let e = this.q0e[i].zat();
                    t < e && (t = e);
                }
            else
                for (let i = 0, e = this.q0e.length; i < e; ++i) {
                    let e = this.q0e[i];
                    e.M1e() && !e.g1e() ? (t += e.ls()) : (t += e.zat());
                }
            return t;
        }
        X1e(t) {
            let i = this.jvt(),
                e = 0;
            e = this.zqi() ? i.right - i.left : i.bottom - i.top;
            for (let i = 0, s = this.q0e.length; i < s; ++i) {
                let s = this.q0e[i];
                s !== t &&
                    (s.M1e() && !s.g1e() ? (e -= this.zqi() ? s.rs() : s.ls()) : (e -= this.zqi() ? s.Eat() : s.zat()));
            }
            return e < 0 ? 1 / 0 : Math.floor(0.9 * e);
        }
        Y1e() {
            let t = 0;
            for (let i = 0, e = this.q0e.length; i < e; ++i) {
                let e = this.q0e[i];
                this.zqi() ? (t += Math.max(e.rs(), e.Eat())) : (t += Math.max(e.ls(), e.zat()));
            }
            return t;
        }
        J1e(t, i) {
            Ug.wi(t), Ug.wi(i);
            let e = t / i;
            for (let t = 0, i = this.q0e.length; t < i; ++t) {
                let i = this.q0e[t];
                i.M1e() && !i.k1e() && (this.zqi() ? i.My(Ug.j1t(i.rs() * e), !0) : i.Iy(Ug.j1t(i.ls() * e), !0));
            }
        }
        Z1e() {
            let t = this.jvt(),
                i = 0;
            i = this.zqi() ? t.right - t.left : t.bottom - t.top;
            let e = this.Y1e();
            e > i && this.J1e(i, e);
            for (let t = 0, i = this.q0e.length; t < i; ++t) {
                let i = this.q0e[t].I1e();
                i && i.Z1e();
            }
        }
        rXe() {
            this.ent(), this.Z1e(), this.Q1e();
        }
        Q1e(t) {
            for (let t of this.q0e) t.$1e();
        }
        static t2e(t) {
            if (t)
                for (let i of t)
                    if ("main" === i.id) {
                        if (!i.layout || !i.layout.children)
                            throw new Error("[Load UI State] main pane does not have a layout");
                        let t = i.layout.size;
                        for (let e of i.layout.children) {
                            t &&
                                !e.fixedSize &&
                                e.size.includes("px") &&
                                (Ug.ti.QO.i2e(t, "Load UI State"), Ug.ti.QO.e2e(e.size, "Load UI State"));
                            let i = e.layout && e.layout.children;
                            i && 1 === i.length && "TabPane" !== e.type
                                ? (Ug.ti.QO.e2e(e.size, "Load UI State"), (i[0].size = e.size), Ug.ti.QO.s2e(i[0]))
                                : Ug.ti.QO.s2e(e);
                        }
                    } else Ug.ti.QO.s2e(i);
        }
        static s2e(t) {
            let i;
            switch (
                ("midPane" === t.id && ((t.size = "1fr"), (t.side = "")), Ug.ti.QO.e2e(t.size, "Load UI State"), t.type)
            ) {
                case "CaptionPane":
                case "TabPane":
                case "DockingPane":
                    i = !0;
                    break;
                case "Pane":
                    i = !1;
                    break;
                default:
                    throw new Error("unknown type of pane");
            }
            if (t.layout && t.layout.children.length > 0) {
                let i = t.layout.size,
                    e = t.layout.frame;
                e && (Ug.ti.QO.n2e(e.width, "Load UI State"), Ug.ti.QO.n2e(e.height, "Load UI State"));
                for (let e of t.layout.children) {
                    i &&
                        !e.fixedSize &&
                        e.size.includes("px") &&
                        (Ug.ti.QO.i2e(i, "Load UI State"), Ug.ti.QO.e2e(e.size, "Load UI State"));
                    let t = e.layout && e.layout.children;
                    t && 1 === t.length
                        ? (Ug.ti.QO.e2e(e.size, "Load UI State"), (t[0].size = e.size), Ug.ti.QO.s2e(t[0]))
                        : Ug.ti.QO.s2e(e);
                }
            }
        }
        static r2e(t, i, e = !1) {
            if (t) {
                for (let s of t)
                    if ("main" === s.id) {
                        Ug.ti.QO.h2e(s);
                        let t = i.I1e();
                        for (let i of t.q0e.slice(0)) t.c1e(i), i instanceof Ug.ti.QO.o1e && i.o2e();
                        Ng(0 === t.q0e.length, "Layout subgrid should be empty!"),
                            Ng(s.layout && s.layout.children, "Main pane does not have a layout");
                        let n = s.layout.size,
                            r = s.layout.isHorizontal ? i.rs() : i.ls();
                        for (let t of s.layout.children) {
                            n &&
                                !t.fixedSize &&
                                t.size.includes("px") &&
                                (Ug.ti.QO.i2e(n, "Load UI State"),
                                Ug.ti.QO.e2e(t.size, "Load UI State"),
                                (t.size = Math.floor((t.size.slice(0, -2) / n) * r) + "px"));
                            let s = t.layout && t.layout.children;
                            s && 1 === s.length && "TabPane" !== t.type
                                ? (Ug.ti.QO.e2e(t.size, "Load UI State"),
                                  (s[0].size = t.size),
                                  (s[0].side = t.side),
                                  (s[0].docked = t.docked),
                                  Ug.ti.QO.a2e(i, s[0], e))
                                : Ug.ti.QO.a2e(i, t, e);
                        }
                        t && t.gl(!0);
                    } else Ug.ti.QO.a2e(i, s, e);
                Ug.ti.cE.GYe();
            }
        }
        static h2e(t) {
            if (!t.layout.tabSide && t.layout.children.length > 1) {
                const i = [];
                if (t.layout.isHorizontal)
                    for (let e of t.layout.children) {
                        if ("left" !== e.side) break;
                        i.push(e);
                    }
                else
                    for (let e of t.layout.children) {
                        if ("top" !== e.side) break;
                        i.push(e);
                    }
                i.length > 1 && (i.reverse(), t.layout.children.splice(0, i.length, ...i));
            }
        }
        static a2e(t, i, e) {
            let s = self.fj.l2e(i.id, e);
            if (!s) {
                let t = i.id && self.app.gst(i.id);
                s = t && t.WZ();
            }
            let n = s && s.dF(),
                r = t.I1e(),
                h = !0;
            if (("midPane" === i.id && ((i.size = "1fr"), (i.side = "")), Ug.ti.QO.e2e(i.size, "Load UI State"), n))
                n.o2e(), n.tO(!0);
            else
                switch (i.type) {
                    case "CaptionPane":
                        n = Ug.m(Ug.ti.QO.l1e, r, i.size, i.name, i.id);
                        break;
                    case "TabPane":
                        n = Ug.m(Ug.ti.QO.u1e, r, i.size, i.name, i.id);
                        break;
                    case "DockingPane":
                        n = Ug.m(Ug.ti.QO.o1e, r, i.size, i.name, i.id);
                        break;
                    case "Pane":
                        (n = r.n1e(i.size, i.name, i.id)), (h = !1);
                        break;
                    default:
                        throw new Error("unknown type of pane");
                }
            if (h)
                if ((n.SG && n.a1e(), i.docked))
                    if (t instanceof Ug.ti.QO.u1e) t.mrt(n), i.activeTab && t.u2e(n);
                    else {
                        const t = i.side ? "left" === i.side || "right" === i.side : null;
                        null !== t && r.V1e(t),
                            n.eO(r, i.side),
                            null !== t && i.size.includes("px")
                                ? t
                                    ? n.My(+i.size.slice(0, -2), !0)
                                    : n.Iy(+i.size.slice(0, -2), !0)
                                : n.j1e("1fr");
                    }
                else if (i.popup) {
                    const t = i.popupWindowScreenX ?? screen.width / 2,
                        e = i.popupWindowScreenY ?? screen.height / 2;
                    n.yDt(t, e, i.popupWindowWidth, i.popupWindowHeight);
                } else if (!1 === i.docked) {
                    let t = i.position;
                    n.gG(), n.eu(t.x), n.iu(t.y), n.My(t.width, !0), n.Iy(t.height, !0);
                }
            if (
                (n && "TabPane" !== i.type && i.layout && !n.T1e() && n.O1e(i.layout.id, i.layout.isHorizontal),
                r && r.ent(),
                r && r.gl(!0),
                n && i.layout && i.layout.children.length > 0)
            ) {
                Ug.ti.QO.h2e(i);
                let t = n.I1e();
                if (t) for (let i of t.q0e.slice(0)) t.c2e(i), i instanceof Ug.ti.QO.o1e && i.o2e();
                let s = i.layout.size,
                    h = i.layout.frame,
                    o = null;
                h && (Ug.ti.QO.n2e(h.width, "Load UI State"), Ug.ti.QO.n2e(h.height, "Load UI State")),
                    (o = i.layout.isHorizontal
                        ? h
                            ? window.innerWidth / h.width
                            : n.rs() / s
                        : h
                          ? window.innerHeight / h.height
                          : n.ls() / s);
                for (let t of i.layout.children) {
                    if (s && !t.fixedSize && t.size.includes("px")) {
                        Ug.ti.QO.i2e(s, "Load UI State"), Ug.ti.QO.e2e(t.size, "Load UI State");
                        const i = t.size.slice(0, -2) * o;
                        t.size = Math.floor(i) + "px";
                    }
                    let i = t.layout && t.layout.children;
                    i && 1 === i.length && "TabPane" !== t.type
                        ? (Ug.ti.QO.e2e(t.size, "Load UI State"),
                          (i[0].size = t.size),
                          (i[0].side = t.side),
                          (i[0].docked = t.docked),
                          Ug.ti.QO.a2e(n, i[0], e))
                        : Ug.ti.QO.a2e(n, t, e);
                }
                r && r.ent(), r && r.gl(!0);
            }
        }
        static d2e(t, i, e) {
            if (!Ug.Xl(t)) throw new Error(`[${i}] ${e} size must be a finite number`);
            if (t <= 0) throw new Error(`[${i}] ${e} size must be greater than 0`);
        }
        static n2e(t, i = "") {
            this.d2e(t, i, "frame");
        }
        static i2e(t, i = "") {
            this.d2e(t, i, "layout");
        }
        static e2e(t, i = "") {
            if (Ug.tet(t)) {
                if (!Ug.ti.oXe(t)) throw new Error(`[${i}] pane string size must be a valid css length`);
                this.d2e(parseFloat(t), i, "pane string");
            } else {
                if (!Ug.Xl(t)) throw new Error(`[${i}] invalid pane size`);
                this.d2e(t, i, "pane numeric");
            }
        }
    };
}
{
    const jg = self.t,
        $g = self.assert,
        zg = 20,
        Vg = 40,
        Wg = new Set();
    jg.ti.QO.drt = class extends jg.ti.Window {
        constructor(t, i, e, s) {
            jg.Et(t, jg.ti.QO),
                jg.vu(i),
                jg.k$(e),
                jg.k$(s),
                (e = e || s || "(no name)"),
                super(jg.ti.gj("ui-pane", t.FO(), s), e),
                (this.SG = t),
                (this.lp = i.toLowerCase()),
                (this.f2e = !1),
                (this.nes = s || ""),
                (this.K0e = t.K0e),
                (this.p2e = null),
                (this.m2e = null),
                (this.w2e = ""),
                (this.g2e = !0),
                (this.nZe = zg),
                (this.rZe = Vg),
                (this.y2e = 0),
                (this.b2e = 0),
                (this.X$s = null),
                (this.Y$s = null),
                (this.v2e = !0),
                (this.S2e = !0),
                (this.x2e = !0),
                (this.M2e = ""),
                (this.E2e = ""),
                (this.C2e = !1),
                Wg.add(this);
        }
        tQt(t) {
            if (t) super.tQt("PANE_" + t);
            else {
                const t = "abcdefghijklmnopqrstuvwxyz0123456789",
                    i = t.length;
                let e = "";
                for (let s = 0; s < 11; ++s) e += t.charAt(Math.floor(Math.random() * i));
                super.tQt("PANE_" + e);
            }
        }
        _2e() {
            const t = this instanceof jg.ti.QO.l1e && this.cZe,
                i = this.SG && this.SG.H0e,
                e = this.LW(),
                s = !("main" === this.nes) && (!(this instanceof jg.ti.QO.o1e && void 0 !== this.F1e) || this.F1e);
            if (!t && s && (i || e)) return;
            const n = { width: jg.ti.eXe(), height: jg.ti.sXe() };
            return (
                jg.ti.QO.n2e(n.width, "Save UI State"),
                jg.ti.QO.n2e(n.height, "Save UI State"),
                this.T2e((t, i) => {
                    jg.ti.QO.e2e(t.lp, "Save UI State");
                    const e = {
                        id: t.nes,
                        size: t.lp,
                        name: t.Gqt,
                        devicePixelRatio: window.devicePixelRatio,
                        type: null,
                        activeTab: t.I2e(),
                    };
                    if ("CaptionPane" === t.constructor.name && t.bK()) {
                        (e.popup = !0), (e.popupWindowWidth = t.rs()), (e.popupWindowHeight = t.ls());
                        const [i, s] = t.P2e();
                        Number.isFinite(i) &&
                            Number.isFinite(s) &&
                            ((e.popupWindowScreenX = i), (e.popupWindowScreenY = s));
                    }
                    switch (t.constructor) {
                        case jg.ti.QO.u1e:
                            (e.side = t.E1e), (e.type = "TabPane"), (e.docked = "main" !== t.nes && t.F1e);
                            break;
                        case jg.ti.QO.l1e:
                            (e.caption = t.G2e),
                                (e.side = t.E1e),
                                (e.type = "CaptionPane"),
                                (e.docked = "main" !== t.nes && t.F1e);
                            break;
                        case jg.ti.QO.o1e:
                            (e.side = t.E1e), (e.type = "DockingPane"), (e.docked = "main" !== t.nes && t.F1e);
                            break;
                        default:
                            e.type = "Pane";
                    }
                    if (
                        ("main" !== t.nes &&
                            !1 === t.F1e &&
                            (e.position = { x: t.A2e, y: t.R2e, width: t.k2e, height: t.O2e }),
                        t.m2e)
                    ) {
                        const i = t.m2e.W0e ? t.rs() : t.ls();
                        jg.ti.QO.i2e(i, "Save UI State"),
                            (e.layout = {
                                frame: n,
                                tabSide: !1,
                                size: i,
                                id: t.m2e.JD(),
                                isHorizontal: t.m2e.W0e,
                                children: [],
                            });
                    } else "TabPane" === e.type && (e.layout = { tabSide: t.F2e.D2e, children: [] });
                    return i && i.layout && i.layout.children.push(e), e;
                })
            );
        }
        L2e() {
            return this.gzt();
        }
        zb() {
            if (!this.mht) throw new Error("removing pane which has already been removed");
            let t = new jg.Event("remove");
            (t.Irt = this),
                this.dispatchEvent(t),
                this.m2e && (this.m2e.zb(), (this.m2e = null)),
                Wg.delete(this),
                super.zb();
        }
        bf() {
            return this.SG;
        }
        B2e() {
            if (this.k1e()) throw new Error("pane has flex size");
            return parseInt(this.lp, 10);
        }
        y1e() {
            return this.lp;
        }
        j1e(t) {
            if ((jg.vu(t), (t = t.toLowerCase()), !jg.ti.oXe(t))) throw new Error(`invalid CSS length: '${t}'`);
            this.lp = t;
        }
        k1e() {
            return this.lp.includes("fr");
        }
        g1e() {
            return this.k1e() || this.v1e();
        }
        v1e() {
            return this.f2e;
        }
        b1e(t) {
            (t = !!t), (this.f2e = t);
        }
        U2e() {
            this.g2e = !1;
        }
        N2e() {
            return !!this.g2e || "midPane" === this.nes;
        }
        j2e(t) {
            for (const i of t) {
                if (i.N2e())
                    if (i.m2e && i.m2e.q0e) {
                        if (i.j2e(i.m2e.q0e)) return !0;
                    } else {
                        if (i.constructor !== jg.ti.QO.u1e) return !0;
                        if (i.j2e(i.F2e.$2e.map((t) => t.pp))) return !0;
                    }
            }
            return "midPane" === this.nes;
        }
        T2e(t, i) {
            if (!this.N2e()) return;
            if (!this.nes)
                if (this.m2e && this.m2e.q0e) {
                    if (!this.j2e(this.m2e.q0e)) return;
                } else if (this.constructor === jg.ti.QO.u1e && !this.j2e(this.F2e.$2e.map((t) => t.pp))) return;
            const e = t(this, i);
            if (this.m2e && this.m2e.q0e) for (let i of this.m2e.q0e) i.T2e(t, e);
            else if (this.constructor === jg.ti.QO.u1e) for (let i of this.F2e.$2e) i.pp.T2e(t, e);
            return e;
        }
        aYe() {
            return !1;
        }
        M1e() {
            return !1;
        }
        e1e() {
            return this.K0e;
        }
        s1e(t) {
            (t = !!t), this.K0e !== t && ((this.K0e = t), this.m2e && this.m2e.s1e(t));
        }
        N1e(t) {
            this.p2e = t;
        }
        zW() {
            return this.p2e;
        }
        LW() {
            return !!this.p2e;
        }
        I2e() {
            return this.p2e && this.p2e.z2e() === this;
        }
        c2e() {
            this.dispatchEvent(new jg.Event("beforeunlink")),
                this.SG && (this.SG.c1e(this), this.SG.gl(), (this.SG = null)),
                jg.ti.Tz(this.mht),
                this.V2e(),
                this.W2e(),
                this.ent();
        }
        zz(t) {
            return !!this.mht.parentElement;
        }
        cO() {
            return this.zz();
        }
        xz() {
            return this.cO();
        }
        O1e(t, i) {
            if ((jg.vu(t), (i = !!i), this.m2e))
                throw new Error("cannot create a sub-grid on a pane which already has one");
            return (this.m2e = jg.m(jg.ti.QO, t, i, this)), this.m2e;
        }
        A1e(t) {
            if ((jg.Et(t, jg.ti.QO), this.m2e))
                throw new Error("cannot attach a sub grid on a pane which already has one");
            (this.m2e = t), (this.m2e.H0e = this);
            let i = t.zqi();
            this.mht.removeAttribute(i ? "vgrid" : "hgrid"), this.mht.setAttribute(i ? "hgrid" : "vgrid", "");
        }
        G1e(t) {
            jg.Et(t, jg.ti.QO),
                $g(this.m2e, "Should not replace a sub grid on a pane which does not already have one"),
                $g(this.m2e !== t, "Should not replace a sub grid with the same grid"),
                (this.m2e = t),
                (this.m2e.H0e = this);
            let i = new jg.Event("replacesubgrid");
            (i.Irt = this), (i.H2e = t), this.dispatchEvent(i);
        }
        I1e() {
            return this.m2e;
        }
        T1e() {
            return !!this.m2e;
        }
        uF(t, i, e) {
            return jg.wi(t), jg.wi(i), !(!e && this.T1e()) && super.uF(t, i);
        }
        Xrt() {
            this.mht.setAttribute("hide", "");
        }
        eD() {
            this.mht.removeAttribute("hide");
        }
        lrt() {
            if (!this.v2e) return;
            this.v2e = !1;
            let t = this.mht.style.gridTemplateColumns;
            if (t) (this.M2e = t), (this.C2e = !0);
            else {
                let t = this.mht.style.gridTemplateRows;
                t && ((this.M2e = t), (this.C2e = !1));
            }
            (this.E2e = this.y1e()), this.K2e(!1), this.crt(!1);
        }
        frt() {
            this.v2e ||
                ((this.v2e = !0),
                this.K2e(!0),
                this.crt(!0),
                this.M2e &&
                    (this.C2e
                        ? (this.mht.style.gridTemplateColumns = this.M2e)
                        : (this.mht.style.gridTemplateRows = this.M2e)),
                this.E2e && this.j1e(this.E2e),
                (this.M2e = ""),
                (this.E2e = ""),
                this.ent());
        }
        prt() {
            if (this.v2e) return;
            let t = this.mht.style.gridTemplateColumns;
            if (t) (this.M2e = t), (this.C2e = !0);
            else {
                let t = this.mht.style.gridTemplateRows;
                t && ((this.M2e = t), (this.C2e = !1));
            }
            this.E2e = this.y1e();
        }
        K2e(t) {
            (t = !!t) !== this.S2e &&
                ((this.S2e = t),
                t
                    ? this.mht.removeAttribute("disablegridtemplates")
                    : this.mht.setAttribute("disablegridtemplates", ""));
        }
        crt(t) {
            (t = !!t) !== this.x2e &&
                ((this.x2e = t),
                t
                    ? this.mht.removeAttribute("disablegridstartandend")
                    : this.mht.setAttribute("disablegridstartandend", ""));
        }
        V2e() {
            (this.mht.style.gridColumn = ""), (this.mht.style.gridRow = "");
        }
        W2e() {
            this.w2e && (this.mht.removeAttribute(this.w2e), this.ent()), (this.w2e = "");
        }
        x1e(t) {
            jg.wi(t), $g(t >= 1 && t <= 20, "Invalid grid row number, must be 1-20");
            let i = "row" + t;
            this.w2e !== i && (this.W2e(), (this.w2e = i), this.mht.setAttribute(this.w2e, ""), this.ent());
        }
        S1e(t) {
            jg.wi(t), $g(t >= 1 && t <= 20, "Invalid grid column number, must be 1-20");
            let i = "col" + t;
            this.w2e !== i && (this.W2e(), (this.w2e = i), this.mht.setAttribute(this.w2e, ""), this.ent());
        }
        ent() {
            super.ent(), this.m2e && this.m2e.ent();
        }
        Yn() {
            return this.jvt().left;
        }
        qn() {
            return this.jvt().top;
        }
        rs() {
            let t = this.jvt();
            return t.right - t.left;
        }
        ls() {
            let t = this.jvt();
            return t.bottom - t.top;
        }
        Eat() {
            return this.T1e() ? this.m2e.Eat() : this.nZe;
        }
        zat() {
            return this.T1e() ? this.m2e.zat() : this.rZe;
        }
        q2e() {
            "PANE_main" === this.KXe && this.oYe();
        }
        X2e(t = !0) {
            if ("PANE_main" === this.KXe) {
                const i = [];
                let e;
                for (const t of Wg) (e = t._2e()), e && i.push(e);
                return (
                    jg.E4s.ZRs("log-pane") && console.info("Saving layout", JSON.stringify(i, null, 4)),
                    t && this.b4i(i),
                    i
                );
            }
            return null;
        }
        Y2e() {
            Wg.delete(this);
        }
        $1e() {
            if (this.tYe) return;
            let t = this.rs(),
                i = this.ls();
            if (t !== this.y2e || i !== this.b2e) {
                (this.y2e = t), (this.b2e = i);
                let e = new jg.Event("resize");
                (e.Irt = this), this.dispatchEvent(e), this.m2e && this.m2e.Q1e();
            }
        }
        dG(t) {
            jg.qm(t, jg.nr), (this.X$s = t ? t.clone() : null);
        }
        pG() {
            return this.X$s ? this.X$s.clone() : null;
        }
        wG(t) {
            jg.qm(t, jg.nr), (this.Y$s = t ? t.clone() : null);
        }
        mG() {
            return this.Y$s ? this.Y$s.clone() : null;
        }
        J2e() {
            return "";
        }
        static Z2e(t) {
            return !!Wg.has(t) && this.N2e();
        }
    };
}
{
    const Hg = self.t,
        Kg = self.assert,
        qg = ["left", "top", "right", "bottom"],
        Xg = 300,
        Yg = 350;
    let Jg = 0;
    const Zg = 100,
        Qg = 100,
        ty = 100,
        iy = 100;
    Hg.ti.QO.o1e = class extends Hg.ti.QO.drt {
        constructor(t, i, e, s) {
            super(t, i, e, s),
                this.mht.setAttribute("role", "section"),
                (this.F1e = !0),
                (this.Q2e = !1),
                (this.t3e = !1),
                (this.i3e = !1),
                (this.e3e = !0),
                (this.s3e = 0),
                (this.E1e = ""),
                (this.ZJe = null),
                (this.Qq = (t) => this.KW()),
                this.mht.addEventListener("pointerdown", this.Qq),
                (this.n3e = Zg),
                (this.r3e = Qg),
                (this.A2e = 0),
                (this.R2e = 0),
                (this.k2e = 0),
                (this.O2e = 0),
                (this.nZe = ty),
                (this.rZe = iy),
                (this.h3e = !0),
                (this.Yut = !1),
                (this.o3e = null),
                (this.a3e = 0),
                Hg.ti.uz.l3e(this);
        }
        static u3e(t) {
            Hg.wi(t), (Jg = t);
        }
        a1e(t) {
            Hg.k$(t), (this.F1e = !1), (this.f2e = !1), (this.E1e = this.SG.zqi() ? "left" : "top");
            const i = parseInt(t, 10) || Xg;
            this.j1e(`${i}px`),
                this.V2e(),
                this.W2e(),
                this.c3e(),
                this.d3e(this.r3e, this.n3e, i, Jg || Yg),
                (Jg = 0),
                document.body.appendChild(this.mht),
                this.ent(),
                this.KW();
        }
        zb() {
            (this.h3e = !1),
                this.mht.removeEventListener("pointerdown", this.Qq),
                (this.Qq = null),
                Hg.ti.uz.f3e(this),
                super.zb();
        }
        M1e() {
            return !0;
        }
        C1e(t) {
            Hg.vu(t),
                Kg(qg.includes(t), "Invalid dock side parameter"),
                this.E1e !== t &&
                    (this.p3e() && this.v1e() ? (this.E1e = t) : (this.o2e(), this.m3e(t), this.SG && this.SG.ent()));
        }
        w3e() {
            return this.Q2e;
        }
        g3e() {
            return this.e3e;
        }
        h2t() {
            this.e3e = !1;
        }
        e2t() {
            this.e3e = !0;
        }
        y3e() {
            Kg(!this.p2e && !this.F1e, "should not be tabbed or docked to go in swipe-in mode"),
                (this.Q2e = !0),
                this.mht.setAttribute("swipe-in-" + this.E1e, ""),
                this.mht.removeAttribute("floating"),
                this.mht.setAttribute("role", "complementary"),
                this.b3e(!0),
                this.v3e(),
                Hg.ti.uz.S3e(this);
        }
        x3e() {
            let t = document.activeElement;
            for (; t; ) if (((t = t.parentElement), t === this.mht)) return void document.activeElement.blur();
        }
        ZB(t) {
            (t = !!t), this.M3e();
            let i = Hg.ti.eXe();
            (this.t3e = t),
                this.t3e && this.b3e(!1),
                this.t3e
                    ? (this.E3e("left" === this.E1e ? 0 : i - this.rs()), Hg.ti.cE.lE(this))
                    : (this.E3e("left" === this.E1e ? -this.rs() : i), this.x3e());
        }
        M3e() {
            this.ZJe && (this.ZJe.cancel(), this.rQe());
        }
        E3e(t) {
            if ((Hg.wi(t), this.A2e === t)) return void this.rQe();
            let i = this.A2e;
            this.eu(t),
                self.app.Cbt()
                    ? ((this.ZJe = this.mht.animate(
                          [
                              { transform: `translate(${i}px,${this.R2e}px)` },
                              { transform: `translate(${t}px,${this.R2e}px)` },
                          ],
                          { duration: 200, easing: "ease" }
                      )),
                      (this.ZJe.onfinish = () => this.rQe()))
                    : this.rQe();
        }
        rQe() {
            (this.ZJe = null), this.t3e || this.b3e(!0);
        }
        b3e(t) {
            (t = !!t),
                this.i3e !== t &&
                    (t
                        ? (this.jvt(),
                          (this.i3e = !0),
                          (this.mht.style.display = "none"),
                          this.mht.setAttribute("aria-hidden", "true"))
                        : ((this.mht.style.display = ""),
                          this.mht.removeAttribute("aria-hidden"),
                          (this.i3e = !1),
                          this.ent()),
                    this.C3e(!t));
        }
        ent() {
            this.i3e || super.ent();
        }
        jvt() {
            return this.aYe()
                ? {
                      left: this.A2e,
                      top: this.R2e,
                      right: this.A2e + this.k2e,
                      bottom: this.R2e + this.O2e,
                      width: this.k2e,
                      height: this.O2e,
                  }
                : super.jvt();
        }
        uF(t, i, e) {
            return !(this.Q2e && !this.t3e) && super.uF(t, i, e);
        }
        _3e(t) {
            Hg.wi(t), (t = Hg.ft(t, 0, 1)), this.M3e();
            let i = Hg.ti.eXe(),
                e = "left" === this.E1e ? -this.rs() : i,
                s = "left" === this.E1e ? 0 : i - this.rs(),
                n = Hg.j1t(Hg.bt(e, s, t));
            this.eu(n), this.b3e(!1);
        }
        T3e() {
            return "left" === this.E1e
                ? (this.Yn() + this.rs() + this.s3e) / 2
                : (this.Yn() + this.s3e - Hg.ti.eXe()) / 2;
        }
        v3e() {
            this.iu(0), this.Iy(Math.min(Hg.ti.sXe())), this.My(Math.min(Hg.ti.eXe() - 50, 375)), this.ZB(this.t3e);
        }
        o2e() {
            this.E1e && this.mht.removeAttribute(`dock${this.E1e}`);
        }
        m3e(t) {
            t && (this.E1e = t), "" !== this.E1e && this.mht.setAttribute(`dock${this.E1e}`, "");
        }
        b1e(t) {
            (t = !!t) !== this.v1e() && (super.b1e(t), this.p3e() && (t ? this.o2e() : this.m3e(), this.SG.ent()));
        }
        f1e() {
            return this.p2e ? this.p2e.E1e : this.E1e;
        }
        p3e() {
            return this.F1e && !this.Q2e;
        }
        aYe() {
            return !this.F1e || this.Q2e;
        }
        tO(t) {
            (t = !!t),
                this.h3e !== t &&
                    ((this.h3e = t),
                    this.h3e ? ((this.mht.style.display = ""), this.ent()) : (this.mht.style.display = "none"));
        }
        cO() {
            return this.Q2e ? this.t3e : this.h3e && super.cO();
        }
        FBt() {
            return !!this.M1e() && (this.aYe() || "right" === this.E1e);
        }
        I3e() {
            return !!this.M1e() && (this.aYe() || "left" === this.E1e);
        }
        P3e() {
            return !!this.M1e() && (this.aYe() || "bottom" === this.E1e);
        }
        G3e() {
            return !!this.M1e() && (this.aYe() || "top" === this.E1e);
        }
        zge() {
            this.mht.style.transform = `translate(${this.A2e}px, ${this.R2e}px)`;
        }
        eu(t, i) {
            if ((Hg.wi(t), (t = Hg.j1t(t)), (i = !!i), this.p3e()))
                throw new Error("cannot set the position of a docked pane");
            (this.A2e = t), this.zge(), this.ent(), i || (this.n3e = t);
        }
        iu(t, i) {
            if ((Hg.wi(t), (t = Hg.j1t(t)), (i = !!i), this.p3e()))
                throw new Error("cannot set the position of a docked pane");
            (this.R2e = t), this.zge(), this.ent(), i || (this.r3e = t);
        }
        A3e(t) {
            if (((t = !!t) ? ++this.a3e : --this.a3e, this.a3e < 0)) throw new Error("invalid unlock");
            0 === this.a3e && this.$1e();
        }
        $1e() {
            this.a3e > 0 || this.Yut || (++this.a3e, super.$1e(), this.p3e() && this.SG && this.SG.Q1e(), --this.a3e);
        }
        My(t, i) {
            if ((Hg.wi(t), (t = Hg.j1t(t)), (i = !!i), this.p3e() && ("top" === this.E1e || "bottom" === this.E1e)))
                throw new Error("cannot set width of vertically docked bar");
            let e = this.Eat();
            if ((t < e && (t = e), this.p3e())) {
                if (!i) {
                    let i = this.SG.X1e(this);
                    t > i && (t = i);
                }
                this.j1e(`${t}px`), this.SG.gl(!0), this.SG.ent();
            } else (this.k2e = t), (this.mht.style.width = `${t}px`), this.ent();
            this.$1e();
        }
        Iy(t, i) {
            if ((Hg.wi(t), (t = Hg.j1t(t)), (i = !!i), this.p3e() && ("left" === this.E1e || "right" === this.E1e)))
                throw new Error("cannot set height of horizontally docked bar");
            let e = this.zat();
            if ((t < e && (t = e), this.p3e())) {
                if (!i) {
                    let i = this.SG.X1e(this);
                    t > i && (t = i);
                }
                this.j1e(`${t}px`), this.SG.gl(!0), this.SG.ent();
            } else (this.O2e = t), (this.mht.style.height = `${t}px`), this.ent();
            this.$1e();
        }
        c2e() {
            super.c2e(),
                this.Bws(-1),
                this.E1e && (this.o2e(), (this.E1e = "")),
                this.R3e(),
                this.SG && this.SG.ent(),
                Hg.ti.cE.GYe();
        }
        N1e(t) {
            super.N1e(t), t && ((this.E1e = t.f1e()), (this.F1e = !0), t.B1e() && (this.o3e = t));
        }
        gG() {
            if (!this.F1e) return;
            const t = new Hg.Event("beforeundock");
            (t.Irt = this), this.dispatchEvent(t);
            const i = new Hg.Event("beforeanyundock");
            (i.Irt = this), Hg.ti.uz.dispatchEvent(i), this.A3e(!0);
            let e = null,
                s = null;
            this.LW() &&
                ((s = this.p2e.jvt()),
                (this.SG = this.p2e.bf()),
                (this.E1e = this.p2e.f1e()),
                this.p2e.f3e(this),
                1 === this.p2e.Trt() && (e = this.p2e),
                (this.p2e = null));
            let n = "left" === this.E1e || "right" === this.E1e;
            "" === this.E1e && (n = this.SG.zqi());
            let r,
                h = this.SG.Q0e();
            if (h && h.M1e()) {
                let t = h.f1e();
                n = "left" === t || "right" === t;
            }
            s || (s = this.jvt()),
                n
                    ? ((r = s.right - s.left), r > window.innerWidth / 2 && (r = window.innerWidth / 2))
                    : ((r = s.bottom - s.top), r > window.innerHeight / 2 && (r = window.innerHeight / 2)),
                r <= 0 && (r = Xg),
                this.SG.c1e(this),
                this.V2e(),
                this.SG.gl(),
                this.W2e(),
                this.o2e(),
                this.c3e(),
                this.d3e(this.r3e, this.n3e, r, Yg),
                this.j1e(`${r}px`),
                h && h.M1e() && h.E1e ? (this.E1e = h.E1e) : this.E1e || (this.E1e = n ? "left" : "top"),
                document.body.appendChild(this.mht),
                (this.F1e = !1),
                (this.f2e = !1),
                this.ent(),
                (this.SG = this.SG.W1e()),
                this.SG.q1e(),
                e && !e.B1e() && (e.p3e() ? this.SG.L1e(e) : Hg.ti.QO.u1e.k3e(e)),
                this.KW(),
                this.A3e(!1),
                this.SG.Q1e();
            const o = new Hg.Event("afterundock");
            (o.Irt = this), this.dispatchEvent(o);
            const a = new Hg.Event("afteranyundock");
            (a.Irt = this), Hg.ti.uz.dispatchEvent(a), this.mht.setAttribute("role", "complementary");
        }
        eO(t, i, e) {
            if ((Hg.qm(t, Hg.ti.QO), Hg.k$(i), Hg.qm(e, Hg.ti.QO.drt), this.F1e)) return;
            if (Hg.fk.ZP) return (this.E1e = "left" === i || "top" === i ? "left" : "right"), void this.y3e();
            if (!t && !i && !e && this.o3e) return this.o3e.mrt(this), void this.o3e.wrt(this);
            const s = new Hg.Event("beforedock");
            (s.Irt = this), this.dispatchEvent(s);
            const n = new Hg.Event("beforeanydock");
            (n.Irt = this),
                Hg.ti.uz.dispatchEvent(n),
                this.A3e(!0),
                t || (t = this.SG),
                t.FO() || ((t = Hg.ti.uz.O3e()), Kg(t && t.FO(), "Nowhere to dock this pane to"));
            let r = i;
            if ((i || (this.E1e = ""), e && e.M1e())) {
                let t = e.f1e();
                t && (r = t);
            }
            t.zqi()
                ? "top" === r
                    ? (r = "left")
                    : "bottom" === r && (r = "right")
                : "left" === r
                  ? (r = "top")
                  : "right" === r && (r = "bottom");
            let h = this.jvt(),
                o = "left" === r || "right" === r ? h.right - h.left : h.bottom - h.top;
            (this.SG = t),
                e && e.M1e()
                    ? "left" === r || "right" === r
                        ? e.k1e()
                            ? (o = Math.min(e.rs() / 2, Math.max(o, this.Eat())))
                            : ((o = Math.max(e.rs() / 2, this.Eat())), e.My(e.rs() / 2))
                        : ("top" !== r && "bottom" !== r) ||
                          (e.k1e()
                              ? (o = Math.min(e.ls() / 2, Math.max(o, this.zat())))
                              : ((o = Math.max(e.ls() / 2, this.zat())), e.Iy(e.ls() / 2)))
                    : e ||
                      ("left" === r || "right" === r
                          ? (o = Math.min(this.SG.rs() / 2, o))
                          : ("top" !== r && "bottom" !== r) || (o = Math.min(this.SG.ls() / 2, o))),
                this.m3e(r),
                (this.F1e = !0),
                document.body.removeChild(this.mht),
                i && this.j1e(`${o}px`),
                this.R3e(),
                this.SG.d1e(this, e, i),
                this.SG.gl(),
                Hg.ti.cE.GYe(),
                this.A3e(!1);
            const a = new Hg.Event("afterdock");
            (a.Irt = this), this.dispatchEvent(a);
            const l = new Hg.Event("afteranydock");
            (l.Irt = this), Hg.ti.uz.dispatchEvent(l), this.mht.setAttribute("role", "section");
        }
        Ist() {
            (this.Yut = !0), this.gG(), this.zb(), (this.Yut = !1);
        }
        PE() {
            return this.Yut;
        }
        KW() {
            this.LW() ? (this.p2e.wrt(this), this.p2e.KW()) : super.KW();
        }
        D3e(t) {
            if (((t = !!t), !this.M1e() || this.p3e() || this.w3e())) return;
            t && (this.eu(this.n3e, !0), this.iu(this.r3e, !0));
            let i = this.jvt(),
                e = window.innerWidth,
                s = window.innerHeight;
            i.right > e && this.eu(Math.max(this.Yn() - (i.right - e), 0), !0),
                i.left < 0 && this.eu(this.Yn() - i.left, !0),
                i.bottom > s && this.iu(Math.max(this.qn() - (i.bottom - s), 0), !0),
                i.top < 0 && this.iu(this.qn() - i.top, !0);
        }
        F3e() {
            let t = new Hg.Event("activate");
            (t.Irt = this), this.dispatchEvent(t);
        }
        C3e(t) {
            let i = new Hg.Event("displaystylechange");
            (i.Irt = this), (i.visible = t), this.dispatchEvent(i);
        }
        IJe(t, i) {
            if ((Hg.wi(t), Hg.wi(i), this.LW() || !this.E1e)) return "";
            if (self.app.wue().snt() && !Hg.fk.ZP) return "";
            let e = this.jvt(),
                s = Hg.ti.MBt(),
                n = 2 * s,
                r = "";
            if (
                (t > e.left + s && t < e.right - s && i > e.top + s && i < e.bottom - s
                    ? (r = "m")
                    : Hg.ti.cE.IYe()
                      ? this.v1e() ||
                        (t >= e.left && t <= e.left + n
                            ? i >= e.top && i <= e.top + n
                                ? (r = "nw")
                                : i <= e.bottom && i >= e.bottom - n
                                  ? (r = "sw")
                                  : i > e.top + n && i < e.bottom - n && t <= e.left + s && (r = "w")
                            : t <= e.right && t >= e.right - n
                              ? i >= e.top && i <= e.top + n
                                  ? (r = "ne")
                                  : i <= e.bottom && i >= e.bottom - n
                                    ? (r = "se")
                                    : i > e.top + n && i < e.bottom - n && t >= e.right - s && (r = "e")
                              : t > e.left + n &&
                                t < e.right - n &&
                                (i >= e.top && i <= e.top + s
                                    ? (r = "n")
                                    : i <= e.bottom && i >= e.bottom - s && (r = "s")))
                      : (r = ""),
                this.p3e())
            )
                if ("left" === this.E1e) r = "ne" === r || "se" === r || "e" === r ? "e" : "";
                else if ("right" === this.E1e) r = "nw" === r || "sw" === r || "w" === r ? "w" : "";
                else if ("top" === this.E1e) r = "sw" === r || "se" === r || "s" === r ? "s" : "";
                else if ("bottom" === this.E1e) r = "nw" === r || "ne" === r || "n" === r ? "n" : "";
                else if ("tab" === this.E1e) return "";
            return r;
        }
        c3e() {
            let t = Hg.ti.uz.L3e(this.n3e, this.r3e);
            (this.n3e = t.x), (this.r3e = t.y);
        }
        d3e(t, i, e, s) {
            this.mht.setAttribute("floating", ""),
                (this.A2e = i),
                (this.R2e = t),
                this.zge(),
                (this.k2e = e),
                (this.O2e = s),
                (this.mht.style.width = `${e}px`),
                (this.mht.style.height = `${s}px`);
        }
        R3e() {
            (this.mht.style.transform = ""),
                (this.mht.style.width = ""),
                (this.mht.style.height = ""),
                this.mht.removeAttribute("floating");
        }
        static B3e(t) {
            Hg.Et(t, Hg.ti.QO.drt),
                Kg(!(t instanceof Hg.ti.QO.u1e), "cannot replace tabbed pane with another tabbed pane"),
                Kg(t.M1e() && t.aYe(), "expected floating docking pane");
            let i = Hg.VD(t.nes),
                e = Hg.m(Hg.ti.QO.u1e, t.bf(), t.y1e(), i);
            return (
                e.gG(),
                e.C1e(t.f1e()),
                e.My(t.rs()),
                e.Iy(t.ls()),
                e.eu(t.Yn()),
                e.iu(t.qn()),
                Hg.ti.Tz(t.FO()),
                t.ent(),
                Hg.ti.cE.GYe(),
                e
            );
        }
    };
}
{
    const ey = self.t,
        sy = 350,
        ny = 2e3;
    let ry = -1;
    function hy() {
        for (const t of oy) t.U3e();
    }
    const oy = new Set();
    ey.ti.QO.l1e = class extends ey.ti.QO.o1e {
        constructor(t, i, e, s, n) {
            super(t, i, e, s),
                (this.YJe = ey.ti.gj("ui-caption", this.mht)),
                (this.G2e = this.Zn()),
                (this.JJe = ey.ti.gj("span", this.YJe, null, "pane-caption-text")),
                (this.JJe.textContent = this.G2e),
                (this.N3e = ""),
                (this.pZe = null),
                n?.tPt &&
                    ((this.pZe = ey.m(ey.ti.Tj.yZe, this.YJe)),
                    (this.pZe.onclick = () => this.j3e()),
                    n?.sPt && this.pZe.f6i(self.lang(n?.sPt))),
                (this.fZe = ey.m(ey.ti.Tj.jet, this.YJe)),
                (this.fZe.onclick = () => this.$3e()),
                (this.z3e = !1),
                (this.V3e = ""),
                (this.bj = ey.ti.gj("ui-body", this.mht)),
                this.bj.setAttribute("row2", ""),
                this.mht.setAttribute("captioned", ""),
                (this.W3e = !1),
                (this.H3e = !1),
                (this.cZe = null),
                (this.lZe = !1),
                (this.K3e = !0),
                (this.q3e = !1),
                (this.dZe = (t) => this.sDt()),
                (this.X3e = (t) => this.Y3e()),
                (this.J3e = NaN),
                (this.Z3e = NaN),
                (this.Q3e = (t) => this.t4e()),
                (this.Qq = (t) => {
                    t.button === ey.sQ.z0 && this.i4e(t.clientX, t.clientY, t.pointerId);
                }),
                this.YJe.addEventListener("pointerdown", this.Qq),
                (this.fvt = (t) => this.e4e()),
                this.YJe.addEventListener("UIDoubleTap", this.fvt),
                (this.S6 = (t) => {
                    t.preventDefault(), this.s4e(t.clientX, t.clientY);
                }),
                this.YJe.addEventListener("contextmenu", this.S6),
                (this.n4e = null),
                oy.add(this);
        }
        J4i() {
            return this.YJe;
        }
        jj() {
            return this.bj;
        }
        zb() {
            (this.q3e = !0),
                this.sDt(),
                this.YJe.removeEventListener("pointerdown", this.Qq),
                this.YJe.removeEventListener("UIDoubleTap", this.fvt),
                this.YJe.removeEventListener("contextmenu", this.S6),
                (this.Qq = null),
                (this.fvt = null),
                (this.S6 = null),
                (this.n4e = null),
                this.fZe.Ut(),
                (this.fZe = null),
                this.pZe && (this.pZe.Ut(), (this.pZe = null)),
                ey.ti.Tz(this.JJe),
                ey.ti.Tz(this.YJe),
                ey.ti.Tz(this.bj),
                (this.JJe = null),
                (this.YJe = null),
                (this.bj = null),
                oy.delete(this),
                super.zb();
        }
        aj(t, i) {
            (this.z3e = !!t), this.z3e && (ey.vu(i), (this.V3e = i));
        }
        async $3e() {
            const t = self.app,
                i = self.lang;
            if (this.z3e) {
                const e = "close-bar-dont-ask-again";
                if (!(await localforage.getItem(e))) {
                    t.P7s("CloseBarPrompt", "Shown"), ey.u.o("ui.bars.confirm-close-prompt");
                    const s = ey.ti.Ze.Ke("ConfirmCheck"),
                        n = s.pr({
                            caption: i(".caption"),
                            message: ey.m(ey.nS, self.ej(".message", this.V3e), { mq: !0 }),
                            jT: i(".close-bar"),
                            UQe: i("common.dont-ask-again"),
                        });
                    ey.u.it();
                    if (null === (await n)) return void t.P7s("CloseBarPrompt", "Cancelled");
                    if (s.$Qe()) {
                        t.P7s("CloseBarPrompt", "Confirmed-DontAskAgain");
                        try {
                            await localforage.setItem(e, !0);
                        } catch (t) {
                            (() => {})('Failed to save "Don\'t ask again" preference: ', t);
                        }
                    } else t.P7s("CloseBarPrompt", "Confirmed");
                }
            }
            this.Ist();
        }
        j3e() {
            if (this.PE() || this.sYe() || !globalThis.app.Jrt()) return;
            let t = new ey.Event("showmenudots");
            (t.Irt = this), this.dispatchEvent(t);
        }
        y3e() {
            super.y3e(), this.fZe.Ut(), (this.fZe = null);
        }
        i4e(t, i, e) {
            ey.wi(t), ey.wi(i), ey.wi(e), ey.ti.uz._Je(this, t, i, e);
        }
        e4e() {
            this.w3e() || (this.aYe() ? this.r4e() : this.gG());
        }
        bDt() {
            return this.lZe;
        }
        async yDt(t, i, e, s) {
            if ((ey.HI(t), ey.HI(i), ey.HI(e), ey.HI(s), this.lZe)) throw new Error("already awaiting popup window");
            if (this.cZe) throw new Error("already in popup window");
            if (!this.TYe()) throw new Error("opening to popup window disabled for this pane");
            this.lZe = !0;
            let n = new ey.Event("beforepopupopen");
            (n.Irt = this), this.dispatchEvent(n);
            let r = "window.html";
            ey.C7s() || (r += "?mode=dev"),
                (Number.isFinite(t) && Number.isFinite(i)) ||
                    !Number.isFinite(this.J3e) ||
                    !Number.isFinite(this.Z3e) ||
                    ((t = this.J3e), (i = this.Z3e)),
                Number.isFinite(e) || (e = this.rs()),
                Number.isFinite(s) || (s = sy);
            try {
                const n = (await ey.ti.LYe.UYe(r, this.nes, e, s, t, i, e, s)).window;
                return (
                    (this.J3e = n.screenX),
                    (this.Z3e = n.screenY),
                    -1 === ry && (ry = globalThis.setInterval(hy, ny)),
                    this.gQe(n),
                    self.app.wde(),
                    n.addEventListener("unload", (t) => this.wQe(n)),
                    n
                );
            } catch (t) {
                (this.lZe = !1), ey.ti.Ze.Ke("OK").pr(self.lang("ui.cannot-open-popup"));
                let i = new ey.Event("afterpopupclose");
                return (i.Irt = this), this.dispatchEvent(i), null;
            }
        }
        gQe(t) {
            this.p3e() ? ((this.K3e = !0), this.gG()) : (this.K3e = !1),
                this.tO(!1),
                ey.ti.Tz(this.bj),
                t.document.body.setAttribute("id", this.nes),
                (t.document.body.className = this.FO().className),
                t.document.body.appendChild(this.bj),
                (this.lZe = !1),
                (this.cZe = t),
                window.addEventListener("unload", this.dZe),
                t.addEventListener("resize", this.X3e),
                t.addEventListener("focus", this.Q3e),
                (t.document.title = this.G2e),
                this.$1e(),
                this.t4e();
            let i = new ey.Event("afterpopupopen");
            (i.Irt = this), this.dispatchEvent(i);
        }
        wQe(t) {
            if (this.q3e) return;
            let i = new ey.Event("beforepopupclose");
            (i.Irt = this), this.dispatchEvent(i);
            for (const t of ey.ti.SK.hJe(this.cZe)) t.igt(!0);
            ey.ti.Tz(this.bj),
                this.mht.appendChild(this.bj),
                (this.cZe = null),
                t.removeEventListener("resize", this.X3e),
                t.removeEventListener("focus", this.Q3e),
                window.removeEventListener("unload", this.dZe),
                (this.JJe.textContent = this.G2e),
                this.tO(!0),
                this.K3e ? this.r4e() : this.D3e(),
                [...oy].some((t) => t.bK()) || (-1 !== ry && (globalThis.clearInterval(ry), (ry = -1))),
                (i = new ey.Event("afterpopupclose")),
                (i.Irt = this),
                this.dispatchEvent(i);
        }
        uF(t, i, e) {
            return !this.bK() && super.uF(t, i, e);
        }
        IJe(t, i) {
            return ey.wi(t), ey.wi(i), this.bK() ? "" : super.IJe(t, i);
        }
        sDt() {
            this.cZe && (this.cZe.close(), (this.cZe = null), (this.lZe = !1));
        }
        bK() {
            return !!this.cZe;
        }
        tDt() {
            return this.cZe;
        }
        Y3e() {
            this.$1e(), globalThis.app.h4e();
        }
        t4e() {
            ey.ti.cE.lE(this);
        }
        U3e() {
            if (!this.bK()) return;
            const t = this.cZe.screenX,
                i = this.cZe.screenY;
            (this.J3e === t && this.Z3e === i) || ((this.J3e = t), (this.Z3e = i), globalThis.app.h4e());
        }
        cO() {
            return super.cO() || this.bK();
        }
        tO(t) {
            (t = !!t), this.cO() !== t && super.tO(t);
        }
        rs() {
            return this.cZe ? this.cZe.innerWidth : super.rs();
        }
        ls() {
            return this.cZe ? this.cZe.innerHeight : super.ls();
        }
        P2e() {
            return [this.J3e, this.Z3e];
        }
        Jz() {
            return this.bj.clientWidth;
        }
        Nz() {
            return this.bj.clientHeight;
        }
        s4e(t, i) {
            if ((ey.wi(t), ey.wi(i), this.w3e())) return;
            if (this.lZe) return;
            ey.u.o("ui.bars.captionMenu");
            let e = ey.m(ey.ti.LO, this.YJe);
            ey.fk.Bj &&
                (e.xO(null, this.p3e() ? self.lang(".undock") : self.lang(".dock"), this.fvt),
                this.TYe() && e.xO("open-popup", self.lang(".open-to-popup-window"), () => this.yDt(), { GO: !0 })),
                e.xO("close", self.lang(".close"), () => this.$3e()),
                e.XO(t, i),
                ey.u.it();
        }
        yG(t) {
            ey.yp(t), (this.n4e = t);
        }
        vG(t) {
            this.n4e && this.n4e(t);
        }
        uG() {
            this.W3e = !0;
        }
        o4e(t) {
            (t = !!t) && !this.H3e
                ? (this.mht.setAttribute("caption-hidden", ""), this.YJe.setAttribute("hidden", ""))
                : !t && this.H3e && (this.mht.removeAttribute("caption-hidden"), this.YJe.removeAttribute("hidden")),
                (this.H3e = t);
        }
        N1e(t) {
            super.N1e(t), this.W3e && (t ? this.o4e(t.B1e()) : this.o4e(!1));
        }
        FX(t) {
            if ((ey.vu(t), this.G2e === t)) return;
            (this.G2e = t), this.cZe ? (this.cZe.document.title = t) : (this.JJe.textContent = t);
            let i = this.zW();
            i && i.a4e(this, this.G2e);
        }
        l4e() {
            return this.G2e;
        }
        K$(t) {
            if ((ey.vu(t), this.N3e === t)) return;
            this.N3e = t;
            let i = this.zW();
            i && i.u4e(this, this.N3e);
        }
        J2e() {
            return this.N3e;
        }
        dG(t) {
            super.dG(t);
            const i = this.zW();
            i && i.c4e(this);
        }
        wG(t) {
            super.wG(t);
            const i = this.zW();
            i && i.c4e(this);
        }
        gG() {
            this.o4e(!1), super.gG();
        }
        eO(t, i, e) {
            this.W3e || (this.o3e = null), super.eO(t, i, e);
        }
        r4e() {
            let t = this.o3e ? null : this.f1e();
            this.eO(null, t);
        }
        static d4e() {
            for (const t of oy) t.Ist();
        }
    };
}
{
    const ay = self.t,
        ly = self.assert,
        uy = -30,
        cy = -16,
        dy = new Set(["top", "bottom"]);
    ay.ti.QO.u1e = class extends ay.ti.QO.o1e {
        constructor(t, i, e, s) {
            super(t, i, e, s),
                (this.D2e = ""),
                (this.bj = ay.ti.gj("ui-body", this.mht)),
                (this.F2e = ay.m(ay.ti.Tj.f4e, this.mht, { p4e: !0, m4e: !0 })),
                (this.w4e = !1),
                (this.g4e = null),
                (this.Ebe = ay.m(
                    ay.Ha,
                    ay.Xa.Wa(this.F2e, "activetabchanged", (t) => this.y4e(t)),
                    ay.Xa.Wa(this.F2e, "tearofftab", (t) => this.b4e(t)),
                    ay.Xa.Wa(this.F2e, "tabmiddleclick", (t) => this.v4e(t.tab)),
                    ay.Xa.Wa(this.F2e, "tabcontextmenu", (t) => {
                        t.preventDefault(), this.S4e(t.tab, t.clientX, t.clientY);
                    }),
                    ay.Xa.Wa(this.F2e, "tabclose", (t) => this.Mrt(t.tab)),
                    ay.Xa.Wa(ay.ti.cE, "activewindowchange", (t) => this.Iz())
                )),
                (this.x4e = -1),
                this.cet("bottom");
        }
        zb() {
            -1 !== this.x4e && (window.clearTimeout(this.x4e), (this.x4e = -1)),
                this.Ebe.Ua(),
                (this.Ebe = null),
                ay.ti.Tz(this.bj),
                (this.bj = null),
                this.F2e.Ut(),
                (this.F2e = null),
                super.zb();
        }
        jj() {
            return this.bj;
        }
        UW() {
            return this.F2e;
        }
        Trt() {
            return this.F2e.Trt();
        }
        fet() {
            this.w4e = !0;
        }
        B1e() {
            return this.w4e;
        }
        cet(t) {
            if (!dy.has(t)) throw new Error(`invalid tab side '${t}'`);
            this.D2e !== t &&
                ("bottom" === this.D2e
                    ? (this.mht.removeAttribute("tabbed-bottom"),
                      this.bj.removeAttribute("row1"),
                      this.F2e.FO().removeAttribute("row2"))
                    : (this.mht.removeAttribute("tabbed-top"),
                      this.bj.removeAttribute("row2"),
                      this.F2e.FO().removeAttribute("row1")),
                (this.D2e = t),
                this.mht.setAttribute("tabbed-" + this.D2e, ""),
                "bottom" === this.D2e
                    ? (this.bj.setAttribute("row1", ""), this.F2e.FO().setAttribute("row2", ""))
                    : (this.bj.setAttribute("row2", ""), this.F2e.FO().setAttribute("row1", "")),
                this.F2e.cet(this.D2e));
        }
        U1e() {
            return ly(1 === this.F2e.Trt(), "should have only one tab"), this.F2e.M4e(0).Zc();
        }
        mrt(t, i) {
            if ((ay.Et(t, ay.ti.QO.drt), t instanceof ay.ti.QO.u1e)) {
                let e = t.F2e;
                for (let t of e.tabs()) {
                    let e = t.Zc();
                    e.c2e();
                    let s = this.F2e.urt(e.Zn(), i);
                    s.Zie(e), s.Qte(e.pG()), s._yt(e.mG()), e.N1e(this);
                }
                t.zb(), this.F2e.Ert(this.F2e.Trt() - 1);
            } else {
                let e;
                t.c2e(), t.N1e(this), (e = t instanceof ay.ti.QO.l1e ? t.l4e() : t.Zn());
                let s = this.F2e.urt(e, i);
                s.Zie(t), s.Qte(t.pG()), s._yt(t.mG());
                const n = t.J2e();
                n && s.f6i(n), this.g4e || this.E4e(t);
            }
            this.$1e();
        }
        C4e(t) {
            ay.Et(t, ay.ti.QO.drt);
            for (let i of this.F2e.tabs()) if (i.Zc() === t) return i;
            return null;
        }
        _4e(t) {
            ay.Et(t, ay.ti.QO.drt);
            let i = 0;
            for (let e of this.F2e.tabs()) {
                if (e.Zc() === t) return i;
                ++i;
            }
            return -1;
        }
        f3e(t) {
            ay.Et(t, ay.ti.QO.drt);
            let i = this._4e(t);
            ly(i > -1, "Cannot find tab for pane to remove"),
                this.g4e === t && (this.g4e = null),
                this.F2e.T4e(i),
                this.g4e && this.g4e.ent();
        }
        z2e() {
            return this.g4e;
        }
        u2e(t) {
            if ((ay.Et(t, ay.ti.QO.drt), this.g4e !== t))
                for (let i of this.F2e.tabs()) i.Zc() === t && this.F2e.I4e(i);
        }
        E4e(t, i) {
            if ((ay.Et(t, ay.ti.QO.drt), ay.k$(i), this.g4e !== t)) {
                if (
                    (this.g4e && this.g4e.c2e(),
                    this.bj.appendChild(t.FO()),
                    (this.g4e = t),
                    this.g4e.ent(),
                    this.g4e.$1e(),
                    -1 !== this.x4e && window.clearTimeout(this.x4e),
                    "removal" === i)
                ) {
                    const t = this.g4e;
                    this.x4e = window.setTimeout(() => {
                        if (ay.Xr) {
                            if (ay.gi(t)) return;
                        } else if (t.gi()) return;
                        t.F3e();
                    }, 5);
                } else this.g4e.F3e();
                ay.ti.cE.lE(this.g4e);
            }
        }
        $1e() {
            super.$1e(), this.g4e && this.g4e.$1e();
        }
        wrt(t) {
            ay.Et(t, ay.ti.QO.drt);
            let i = this._4e(t);
            i < 0 || this.F2e.Ert(i);
        }
        a4e(t, i) {
            ay.Et(t, ay.ti.QO.drt), ay.vu(i);
            let e = this.C4e(t);
            e && e.PEt(i);
        }
        u4e(t, i) {
            ay.Et(t, ay.ti.QO.drt), ay.vu(i);
            const e = this.C4e(t);
            e && e.f6i(i);
        }
        c4e(t) {
            ay.Et(t, ay.ti.QO.drt);
            const i = this.C4e(t);
            i && (i.Qte(t.pG()), i._yt(t.mG()));
        }
        y4e(t) {
            let i = t.tab.Zc();
            i && this.E4e(i, t.P4e);
        }
        b4e(t) {
            let i = t.tab.Zc();
            self.app.Skt() ||
                (i.M1e() &&
                    (i.wYe(uy, cy),
                    ay.ti.uz.G4e(i, t.pointerId),
                    ay.ti.uz.pgi(t.clientX, t.clientY, t.pointerId),
                    ay.ti.cE.lE(i),
                    this.g4e && this.g4e.ent()));
        }
        S4e(t, i, e) {
            ay.Et(t, ay.ti.Tj.Tab), ay.wi(i), ay.wi(e);
            let s = t.A4e(),
                n = t.Frt(),
                r = t.R4e();
            if (!s && !n && !r) return;
            ay.u.o("ui.bars.tabPaneMenu");
            let h = ay.m(ay.ti.LO, this.bj);
            const o = t.Zc();
            o.vG(h),
                ay.fk.Bj && s && h.xO(null, self.lang(".undock"), () => o.gG()),
                n && h.xO("close", self.lang(".close"), () => this.Mrt(t)),
                this.Trt() > 1 && r && h.xO(null, self.lang(".close-others"), () => this.k4e(t)),
                h.XO(i, e),
                ay.u.it();
        }
        Mrt(t) {
            t.Zc().Ist();
        }
        v4e(t) {
            t.Frt() && t.O4e() && this.Mrt(t);
        }
        k4e(t) {
            ay.Et(t, ay.ti.Tj.Tab);
            let i = t.Zc(),
                e = [];
            for (let t of this.F2e.tabs()) {
                let s = t.Zc();
                s !== i && e.push(s);
            }
            for (let t of e) t.Ist();
        }
        ent() {
            super.ent(), this.g4e && this.g4e.ent();
        }
        D4e() {
            for (let t of this.F2e.tabs()) {
                if (!t.Zc().M1e()) return !0;
            }
            return !1;
        }
        dYe() {
            return this.g4e || this;
        }
        hst() {
            return this.mht.hasAttribute("active");
        }
        Iz() {
            let t = ay.ti.cE.Wq() === this.g4e;
            ay.ti.CT(this.mht, "active", t);
        }
        static k3e(t) {
            ay.Et(t, ay.ti.QO.u1e),
                ly(!t.B1e(), "should keep tabbed pane"),
                ay.Et(t, ay.ti.QO.u1e),
                ly(1 === t.Trt(), "expected tab pane with a single tab");
            let i = t.U1e();
            i.gG(), i.C1e(t.f1e()), i.My(t.rs()), i.Iy(t.ls()), i.eu(t.Yn()), i.iu(t.qn()), t.zb();
        }
    };
}
{
    const fy = self.t,
        py = self.assert,
        my = 80,
        wy = 40,
        gy = 30,
        yy = 30,
        by = 40;
    let vy = !1,
        Sy = new Map(),
        xy = new Map(),
        My = !1,
        Ey = null,
        Cy = null,
        _y = null,
        Ty = new Map(),
        Iy = new Map(),
        Py = [],
        Gy = [],
        Ay = null;
    function Ry() {
        fy.ti.OF.kF(Ay), (Ay = null);
    }
    let ky = NaN;
    function Oy() {
        if (isNaN(ky)) {
            let t = fy.ti.oJ("width", { className: "dockIndicator" });
            if (!t.endsWith("px"))
                throw new Error("CSS style for dock indicators must specify the size in units of 'px'");
            ky = parseInt(t, 10) || by;
        }
        return ky;
    }
    function Dy() {
        return window.innerWidth <= 600 ? 30 : 50;
    }
    let Fy = [],
        Ly = [],
        By = null,
        Uy = null,
        Ny = null,
        jy = null,
        $y = null,
        zy = -2,
        Vy = 0,
        Wy = -2,
        Hy = 0,
        Ky = 0;
    function qy(t) {
        let i = t.f1e(),
            e = Ly.indexOf(t);
        py(-1 !== e, "cannot find swipe-in pane");
        for (let t = 1, s = Ly.length; t < s; ++t) {
            let n = Ly[(e + t) % s];
            if (n.f1e() === i) return n;
        }
        return t;
    }
    const Xy = (t) => {
        t.button === fy.sQ.z0 &&
            vy &&
            fy.Lh() &&
            fy.ti.uz.cgi(t.clientX, t.clientY, t.pointerId) &&
            (t.preventDefault(), t.stopPropagation());
    };
    document.addEventListener("pointerdown", Xy);
    const Yy = (t) => {
        vy && fy.Lh() && fy.ti.uz.pgi(t.clientX, t.clientY, t.pointerId) && (t.preventDefault(), t.stopPropagation());
    };
    document.addEventListener("pointermove", Yy);
    const Jy = (t) => {
        vy &&
            fy.Lh() &&
            (fy.ti.uz.ugi(t.clientX, t.clientY, t.screenX, t.screenY, t.pointerId) &&
                (t.preventDefault(), t.stopPropagation()),
            void 0 !== self.app && self.app.F4e() && self.app.wde());
    };
    document.addEventListener("pointerup", Jy);
    const Zy = (t) => {
        Jy(t);
    };
    document.addEventListener("pointercancel", Zy);
    const Qy = "iOS" === fy.fk.OS ? "after-resize" : "resize";
    window.addEventListener(Qy, () => {
        if (void 0 === self.app || !self.app.F4e()) return;
        const t = fy.ti.tXe();
        t && t.rXe(), fy.ti.uz.L4e(), fy.ti.uz.hXe(!0), self.app.wde();
    }),
        fy.ti.cE.addEventListener("zindexchanged", () => fy.ti.uz.B4e()),
        fy.ti.SK.addEventListener("showmodal", () => {
            fy.ti.uz.U4e() && fy.ti.uz.N4e();
        }),
        fy.ti.SK.addEventListener("hidemodal", () => {
            fy.ti.SK._K() || fy.ti.uz.j4e();
        });
    class tb extends fy.Event.aG {
        constructor() {
            if (vy) throw new Error("already created DockManager");
            super(), (vy = !0);
        }
        $4e() {
            return !(!Sy.size && !Ty.size);
        }
        l3e(t) {
            fy.Et(t, fy.ti.QO.o1e),
                py(!Fy.includes(t), "Docking pane already exists in dock manager, don't try to add again"),
                Fy.push(t);
        }
        f3e(t) {
            fy.Et(t, fy.ti.QO.o1e);
            let i = Fy.indexOf(t);
            py(i >= 0, "Cannot find docking pane to remove"), Fy.splice(i, 1);
        }
        S3e(t) {
            fy.Et(t, fy.ti.QO.o1e),
                py(t.w3e(), "should be in swipe-in mode"),
                Ly.push(t),
                By || "left" !== t.f1e() ? Uy || "right" !== t.f1e() || (Uy = t) : (By = t);
        }
        B4e() {
            Fy.sort(fy.ti.Window.xY);
        }
        z4e(t, i) {
            fy.wi(t), fy.wi(i);
            for (let e = 0, s = Fy.length; e < s; ++e) {
                let s = Fy[e];
                if (!s.p3e() && s.Yn() === t && s.qn() === i) return !0;
            }
            return !1;
        }
        L3e(t, i) {
            for (fy.wi(t), fy.wi(i); this.z4e(t, i); ) (t += wy), (i += wy);
            return { x: t, y: i };
        }
        _Je(t, i, e, s) {
            if ((fy.Et(t, fy.ti.QO.o1e), fy.wi(i), fy.wi(e), fy.wi(s), t.w3e())) return;
            if (xy.has(t) || Iy.has(t)) return;
            if (fy.ti.SK._K() || fy.ti.LO.cTi(i, e, window)) return;
            if ((fy.ti.uz.cgi(i, e, s), Ty.has(s))) return;
            let n = t;
            if ((n.F3e(), n.LW())) {
                let t = n.zW();
                if (!t.D4e() && !t.B1e()) {
                    if (xy.has(t)) return;
                    n = t;
                }
            }
            Sy.set(s, n), xy.set(n, s), n.fYe(i, e), n.wYe(n.Yn() - i, n.qn() - e), n.aYe() && n.KW();
        }
        V4e(t) {
            return fy.wi(t), t <= Dy();
        }
        W4e(t) {
            return fy.wi(t), t >= fy.ti.eXe() - Dy();
        }
        dK(t) {
            return fy.wi(t), this.V4e(t) || this.W4e(t);
        }
        cgi(t, i, e) {
            if ((fy.wi(t), fy.wi(i), fy.wi(e), Sy.has(e) || Ty.has(e) || fy.ti.SK._K() || fy.ti.LO.cTi(t, i, window)))
                return !1;
            if (Ly.length && -2 === zy) {
                if (this.V4e(t) && By)
                    return (
                        !(jy && !jy.g3e()) &&
                        (jy && "left" === jy.f1e() && (By = qy(jy)),
                        By !== jy && ((Ny = By), Ny.KW(), (zy = e), (Vy = 0)),
                        !0)
                    );
                if (this.W4e(t) && Uy)
                    return (
                        !(jy && !jy.g3e()) &&
                        (jy && "right" === jy.f1e() && (Uy = qy(jy)),
                        Uy !== jy && ((Ny = Uy), Ny.KW(), (zy = e), (Vy = 0)),
                        !0)
                    );
            }
            for (let s = Fy.length - 1; s >= 0; --s) {
                let n = Fy[s],
                    r = n.IJe(t, i);
                if ("m" === r)
                    return (
                        n !== jy ||
                            -2 !== zy ||
                            fy.ti.fK(t, i, n) ||
                            ((Wy = e), (Hy = t), (Ky = i), (Vy = "left" === jy.f1e() ? jy.rs() - t : jy.Yn() - t)),
                        !1
                    );
                if (r && !n.w3e()) {
                    if (xy.has(n)) return !1;
                    if (fy.ti.cE.DYe(t, i, n, window)) break;
                    return (
                        Ty.set(e, n),
                        Iy.set(n, e),
                        n.bYe(r),
                        n.fYe(t, i),
                        n.SYe(n.Yn(), n.qn()),
                        n.EYe(n.rs(), n.ls()),
                        n.F3e(),
                        fy.ti.uz.H4e(),
                        !0
                    );
                }
            }
            return !1;
        }
        K4e(t, i) {
            fy.wi(t), fy.wi(i);
            for (let e = 0, s = Py.length; e < s; ++e) {
                let s = Py[e];
                if (s.uF(t, i)) return s;
            }
            return null;
        }
        cXe(t, i, e) {
            fy.wi(t), fy.wi(i), fy.qm(e, fy.ti.QO.drt);
            for (let s = Fy.length - 1; s >= 0; --s) {
                let n = Fy[s];
                if (n === e) return !1;
                if (n.aYe() && n.uF(t, i)) return !0;
            }
            return !1;
        }
        q4e(t, i, e) {
            if (
                (fy.wi(t), fy.wi(i), fy.Et(e, fy.ti.QO.o1e), !fy.ti.SK.cTi(t, i, window) && !fy.ti.LO.cTi(t, i, window))
            ) {
                for (let s = Fy.length - 1; s >= 0; --s) {
                    let n = Fy[s];
                    if (n !== e && n.aYe() && n.uF(t, i)) return n;
                }
                return null;
            }
        }
        pgi(t, i, e, s) {
            if ((fy.wi(t), fy.wi(i), fy.wi(e), (s = !!s), fy.rQ.iVe(e))) return !1;
            if (fy.ti.SK._K() || fy.ti.LO.cTi(t, i, window)) return Ry(), !1;
            if (jy && jy.w3e() && !jy.g3e()) return !1;
            if (jy && Wy === e)
                return (
                    (("left" === jy.f1e() && t <= Hy - gy) || ("right" === jy.f1e() && t >= Hy + gy)) &&
                        !fy.ti.fK(t, i, jy) &&
                        ((zy = Wy), (Wy = -2), (Ny = jy), (jy = null)),
                    Math.abs(Ky - i) >= yy && (Wy = -2),
                    !0
                );
            if (Ny && zy === e) return fy.ti.uz.wgi(t + Vy, i), !0;
            if (Sy.has(e)) return fy.ti.uz.X4e(t, i, e, Sy.get(e), s), !0;
            if (Ty.has(e)) return fy.ti.uz.Y4e(t, i, e, Ty.get(e)), !0;
            for (let e = Fy.length - 1; e >= 0; --e) {
                let s = Fy[e];
                if (s.w3e()) continue;
                let n = s.IJe(t, i);
                if (n) {
                    if (fy.ti.cE.DYe(t, i, s, window)) break;
                    if (Ay)
                        "e" === n || "w" === n
                            ? Ay.Set("ew-resize")
                            : "n" === n || "s" === n
                              ? Ay.Set("ns-resize")
                              : "nw" === n || "se" === n
                                ? Ay.Set("nwse-resize")
                                : "ne" === n || "sw" === n
                                  ? Ay.Set("nesw-resize")
                                  : "m" === n && Ry();
                    else {
                        const e = { onpointerdown: Xy, onpointermove: Yy, onpointerup: Jy, onpointercancel: Zy };
                        "e" === n || "w" === n
                            ? (Ay = fy.ti.OF.PF("ew-resize", document, t, i, e))
                            : "n" === n || "s" === n
                              ? (Ay = fy.ti.OF.PF("ns-resize", document, t, i, e))
                              : "nw" === n || "se" === n
                                ? (Ay = fy.ti.OF.PF("nwse-resize", document, t, i, e))
                                : ("ne" !== n && "sw" !== n) || (Ay = fy.ti.OF.PF("nesw-resize", document, t, i, e));
                    }
                    return !!Ay;
                }
            }
            return Ry(), !1;
        }
        G4e(t, i) {
            fy.Et(t, fy.ti.QO.o1e), fy.wi(i), t.KW();
            let e = t.f1e(),
                s = "top" === e || "bottom" === e;
            t.gG(),
                s && t.wYe(t.rs() / -2, t.yYe()),
                Sy.set(i, t),
                xy.set(t, i),
                1 === Sy.size ? fy.ti.uz.J4e() : fy.ti.uz.Z4e();
        }
        wgi(t, i) {
            fy.wi(t), fy.wi(i);
            let e = fy.ti.eXe(),
                s = Ny.rs(),
                n = 0;
            if ("left" === Ny.f1e()) {
                let i = t - s;
                i > 0 && (i = 0), (n = t / s);
            } else {
                let i = t,
                    r = e - s;
                t < r && (i = r), (n = 1 - (t - r) / s);
            }
            Ny._3e(n), jy && jy !== Ny && jy._3e(1 - n), this.Q4e();
        }
        X4e(t, i, e, s, n) {
            if ((fy.wi(t), fy.wi(i), fy.wi(e), fy.Et(s, fy.ti.QO.o1e), (n = !!n), s.sYe()))
                return (
                    Sy.delete(e),
                    xy.delete(s),
                    fy.ti.uz.t5e(),
                    fy.ti.uz.Z4e(),
                    fy.ti.uz.i5e(),
                    (Ey = null),
                    void (Cy = null)
                );
            if ((!s.aYe() && fy.gt(s.pYe(), s.mYe(), t, i) > my && fy.ti.uz.G4e(s, e), s.aYe())) {
                s.eu(t + s.gYe()), s.iu(i + s.yYe());
                const e = new fy.Event("move");
                (e.Irt = s), s.dispatchEvent(e);
                let r = fy.ti.uz.K4e(t, i);
                n || 1 !== Sy.size ? fy.ti.uz.Z4e() : (s.pYe() === t && s.mYe() === i) || fy.ti.uz.J4e(),
                    r !== Ey && (Ey && fy.ti.uz.i5e(), r && fy.ti.uz.e5e(r, s), (Ey = r));
                let h = fy.ti.tXe();
                if (h && 1 === Sy.size) {
                    let e = fy.ti.uz.q4e(t, i, s);
                    e || (e = h._1e(t, i, !0)),
                        e && !e.e1e() && (e = null),
                        Iy.has(e) && (e = null),
                        e !== Cy && (Cy && fy.ti.uz.t5e(), e && fy.ti.uz.s5e(e), (Cy = e));
                }
            }
        }
        Y4e(t, i, e, s) {
            if ((fy.wi(t), fy.wi(i), fy.wi(e), fy.Et(s, fy.ti.QO.o1e), s.sYe())) return Ty.delete(e), void Iy.delete(s);
            let n = t - s.pYe(),
                r = i - s.mYe(),
                h = s.xYe(),
                o = s.MYe(),
                a = s.CYe(),
                l = s._Ye(),
                u = s.vYe();
            if ("e" === u || "se" === u || "ne" === u) s.My(a + n);
            else if ("w" === u || "sw" === u || "nw" === u) {
                if (s.aYe()) {
                    let t = h + a - s.Eat();
                    s.eu(Math.min(h + n, t));
                }
                s.My(a - n);
            }
            if ("s" === u || "sw" === u || "se" === u) s.Iy(l + r);
            else if ("n" === u || "nw" === u || "ne" === u) {
                if (s.aYe()) {
                    let t = o + l - s.zat();
                    s.iu(Math.min(o + r, t));
                }
                s.Iy(l - r);
            }
        }
        ugi(t, i, e, s, n) {
            if ((fy.wi(t), fy.wi(i), fy.wi(e), fy.wi(s), fy.wi(n), Wy === n && (Wy = -2), Ny && zy === n))
                return (
                    (t += Vy),
                    "left" === Ny.f1e()
                        ? t < Ny.rs() / 2
                            ? (Ny.ZB(!1), jy && jy !== Ny && jy.ZB(!0), jy === Ny && (jy = null))
                            : (Ny.ZB(!0), jy && jy !== Ny && jy.ZB(!1), (jy = Ny))
                        : t > fy.ti.eXe() - Ny.rs() / 2
                          ? (Ny.ZB(!1), jy && jy !== Ny && jy.ZB(!0), jy === Ny && (jy = null))
                          : (Ny.ZB(!0), jy && jy !== Ny && jy.ZB(!1), (jy = Ny)),
                    (Ny = null),
                    (zy = -2),
                    this.Q4e(),
                    !0
                );
            if (Sy.has(n)) {
                let r = Sy.get(n);
                if ((fy.ti.uz.X4e(t, i, n, r, !0), Ey)) fy.ti.uz.n5e(r);
                else {
                    let t = r.jvt();
                    if (
                        r instanceof fy.ti.QO.l1e &&
                        r.TYe() &&
                        (t.right <= 0 || t.bottom <= 0 || t.left > fy.ti.eXe() || t.top > fy.ti.sXe())
                    ) {
                        const t = self.devicePixelRatio;
                        r.yDt(e / t + r.gYe(), s / t + r.yYe()).catch((t) => {
                            r.D3e();
                        });
                    } else r.D3e();
                }
                return (
                    Sy.delete(n),
                    xy.delete(r),
                    fy.ti.uz.t5e(),
                    fy.ti.uz.Z4e(),
                    fy.ti.uz.i5e(),
                    (Ey = null),
                    (Cy = null),
                    !0
                );
            }
            if (Ty.has(n)) {
                let e = Ty.get(n);
                return fy.ti.uz.pgi(t, i, n), e.D3e(), Ty.delete(n), Iy.delete(e), fy.ti.uz.r5e(), !0;
            }
            return !1;
        }
        H4e() {
            fy.ti.uz.dispatchEvent(new fy.Event("paneresizestart"));
        }
        r5e() {
            fy.ti.uz.dispatchEvent(new fy.Event("paneresizeend"));
        }
        L4e() {
            for (let t = 0, i = Fy.length; t < i; ++t) Fy[t].ent();
        }
        hXe(t) {
            t = !!t;
            for (let i of Fy) i.D3e(t);
            for (let t of Ly) t.v3e();
        }
        h5e(t) {
            if ((fy.Et(t, fy.ti.QO), t.e1e())) return t;
            let i,
                e,
                s = t.i1e();
            for (let t = 0, n = s.length; t < n; ++t) if (((i = s[t].I1e()), i && ((e = fy.ti.uz.h5e(i)), e))) return e;
            return null;
        }
        O3e() {
            let t = fy.ti.tXe();
            return t ? fy.ti.uz.h5e(t) : null;
        }
        o5e(t, i, e, s) {
            fy.wi(i), fy.wi(e), fy.vu(s);
            let n = Oy(),
                r = fy.m(fy.ti.a5e, t, i, e, n, n, s);
            return r.l5e(), r;
        }
        J4e() {
            if (My) return;
            let t = fy.ti.uz.O3e();
            if (!t) return;
            py(t.e1e(), "Expected to find a dock target to show dock indicators for");
            let i = t.jvt();
            const e = Oy(),
                s = e / 2,
                n = e + s,
                r = (i.left + i.right) / 2 - s,
                h = (i.top + i.bottom) / 2 - s;
            let o = fy.ti.uz.o5e(t, i.left + s, h - n, "left"),
                a = fy.ti.uz.o5e(t, r + n, i.top + s, "top"),
                l = fy.ti.uz.o5e(t, i.right - e - s, h - n, "right"),
                u = fy.ti.uz.o5e(t, r + n, i.bottom - e - s, "bottom");
            Py.push(o, a, l, u), (My = !0);
        }
        Z4e() {
            fy.ti.uz.i5e(), fy.ti.uz.t5e();
            for (let t = 0, i = Py.length; t < i; ++t) Py[t].u5e();
            fy.yh(Py), (My = !1);
        }
        e5e(t, i) {
            fy.Et(t, fy.ti.a5e), fy.Et(i, fy.ti.QO.drt), fy.ti.uz.i5e();
            let e = t.c5e(),
                s = e.jvt(),
                n = i.jvt(),
                r = e instanceof fy.ti.QO.o1e,
                h = (e instanceof fy.ti.QO.drt && e.k1e()) || !(e instanceof fy.ti.QO.drt),
                o = s.left,
                a = s.top,
                l = s.right - s.left,
                u = s.bottom - s.top,
                c = t.Zwi();
            if ("left" === c || "right" === c) {
                const t = n.right - n.left;
                h ? (l = Math.min(t, l / 2)) : r ? (l /= 2) : (l = t);
            } else if ("top" === c || "bottom" === c) {
                const t = n.bottom - n.top;
                h ? (u = Math.min(t, u / 2)) : r ? (u /= 2) : (u = t);
            }
            "right" === c ? (o = s.right - l) : "bottom" === c && (a = s.bottom - u),
                (_y = fy.m(fy.ti.d5e, o, a, l, u, c)),
                _y.l5e();
        }
        i5e() {
            _y && (_y.u5e(), (_y = null));
        }
        n5e(t) {
            fy.Et(t, fy.ti.QO.drt), py(t && Ey, "Must have dragging pane and hovered indicator to dock");
            let i = Ey.c5e();
            py(i, "No dock target available when docking");
            let e = Ey.Zwi();
            i instanceof fy.ti.QO
                ? fy.ti.uz.f5e(t, i, e)
                : i instanceof fy.ti.QO.drt
                  ? fy.ti.uz.p5e(t, i, e)
                  : py(!1, "Unexpected dock target type");
        }
        f5e(t, i, e) {
            if (
                (fy.Et(t, fy.ti.QO.drt),
                fy.vu(e),
                py("tab" !== e, "Cannot dock as tabbed to a layout"),
                i.z1e() && i.V1e("left" === e || "right" === e),
                (i.zqi() && ("left" === e || "right" === e)) || (!i.zqi() && ("top" === e || "bottom" === e)))
            )
                t.eO(i, e);
            else {
                let s = i.P1e(!i.zqi());
                t.eO(s, e);
            }
        }
        p5e(t, i, e) {
            if ((fy.Et(t, fy.ti.QO.drt), fy.vu(e), i instanceof fy.ti.QO.o1e && i.w3e())) return;
            t.A3e(!0), i.A3e(!0);
            let s = i.bf();
            if ("tab" === e)
                if (i instanceof fy.ti.QO.u1e) i.mrt(t), t instanceof fy.ti.QO.u1e || i.wrt(t);
                else {
                    let e;
                    (e = i.M1e() && i.aYe() ? fy.ti.QO.o1e.B3e(i) : s.D1e(i)),
                        e.mrt(i),
                        e.mrt(t),
                        t instanceof fy.ti.QO.u1e || e.wrt(t);
                }
            else if ((s.zqi() && ("left" === e || "right" === e)) || (!s.zqi() && ("top" === e || "bottom" === e)))
                t.eO(s, e, i);
            else {
                let n = s.zqi() ? i.ls() : i.rs(),
                    r = i.rs() / 2,
                    h = i.ls() / 2,
                    o = s.R1e(i, !s.zqi());
                if ((t.eO(o, e), i.M1e()))
                    if (t.v1e()) {
                        let t = o.i1e();
                        if (t.length >= 2) {
                            let i = t.at(-2);
                            s.zqi() ? i.Iy(n / 2) : i.My(n / 2);
                        }
                    } else s.zqi() ? (!i.k1e() || t.ls() > h) && t.Iy(n / 2) : (!i.k1e() || t.rs() > r) && t.My(n / 2);
                s.gl(!0);
            }
            i.A3e(!1), t.A3e(!1);
        }
        t5e() {
            for (let t = 0, i = Gy.length; t < i; ++t) {
                let i = Gy[t];
                i.u5e(), fy.xei(Py, i);
            }
            fy.yh(Gy);
        }
        s5e(t) {
            if (!My) return;
            py(t.e1e(), "Expected to find a dock target to show dock indicators for");
            let i = t.jvt();
            const e = Oy(),
                s = e / 2,
                n = e / 8,
                r = (i.left + i.right) / 2 - s,
                h = (i.top + i.bottom) / 2 - s;
            let o, a, l, u, c;
            (t.M1e() && !t.p3e()) ||
                ((o = fy.ti.uz.o5e(t, r - n - e, h, "left")),
                (a = fy.ti.uz.o5e(t, r, h - n - e, "top")),
                (l = fy.ti.uz.o5e(t, r + n + e, h, "right")),
                (u = fy.ti.uz.o5e(t, r, h + n + e, "bottom")),
                Py.push(o, a, l, u),
                Gy.push(o, a, l, u)),
                (c = fy.ti.uz.o5e(t, r, h, "tab")),
                Py.push(c),
                Gy.push(c);
        }
        Q4e() {
            let t = 0;
            Ny && (t += Ny.T3e()), jy && (t += jy.T3e());
            let i = new fy.Event("swipeinviewoffset");
            (i.offsetX = t), this.dispatchEvent(i);
        }
        U4e() {
            return jy && !Ny;
        }
        N4e(t = !0) {
            jy && (($y = t ? jy : null), jy.ZB(!1), (jy = null));
        }
        j4e() {
            $y && ((jy = $y), jy.ZB(!0), ($y = null));
        }
        m5e(t) {
            (jy = t), jy.ZB(!0);
        }
    }
    fy.ti.uz = fy.m(tb);
}
{
    const ib = self.t,
        eb = self.assert,
        sb = ["left", "top", "right", "bottom", "tab"],
        nb = -50,
        rb = -50,
        hb = 50,
        ob = 50;
    let ab = { duration: 300, easing: "ease", direction: null };
    ib.ti.a5e = class extends ib.MV {
        constructor(t, i, e, s, n, r) {
            ib.wi(i),
                ib.wi(e),
                ib.wi(s),
                ib.wi(n),
                super(),
                eb(t.e1e(), "Must be a dock target"),
                eb(sb.includes(r), "Invalid dock indicator side"),
                (this.obi = document.body),
                (this.mht = ib.ti.gj("div", this.obi, null, "dockIndicator")),
                (this.w5e = t),
                (this.Egi = r),
                (this.g5e = 0),
                (this.y5e = 0),
                (this.tp = i),
                (this.ep = e),
                (this.RS = s),
                (this._S = n),
                (this.ZJe = null),
                (this.b5e = !1),
                "left" === this.Egi
                    ? (this.g5e = rb)
                    : "top" === this.Egi
                      ? (this.y5e = nb)
                      : "right" === this.Egi
                        ? (this.g5e = hb)
                        : "bottom" === this.Egi && (this.y5e = ob);
        }
        v5e(t) {
            (t = !!t), eb(!this.ZJe, "Should not start new dock indicator animation if already playing animation");
            let i = [
                { transform: `translate(${this.tp + this.g5e}px, ${this.ep + this.y5e}px)`, opacity: "0" },
                { transform: `translate(${this.tp}px, ${this.ep}px)`, opacity: "1" },
            ];
            (ab.direction = t ? "reverse" : "normal"),
                (this.ZJe = this.mht.animate(i, ab)),
                (this.ZJe.onfinish = (t) => this.S5e());
        }
        l5e() {
            self.app.Cbt() ? this.v5e(!1) : this.S5e();
        }
        u5e() {
            eb(!this.b5e, "Animating out dock indicator which is already animating out"),
                (this.b5e = !0),
                (this.mht.style.transform = ""),
                self.app.Cbt()
                    ? this.ZJe
                        ? (this.ZJe.playbackRate *= -1)
                        : this.v5e(!0)
                    : (this.x5e(), window.setTimeout(() => this.S5e(), 10));
        }
        S5e() {
            (this.ZJe = null), this.b5e ? this.zb() : this.x5e();
        }
        x5e() {
            this.mht && (this.mht.style.transform = `translate(${this.tp}px, ${this.ep}px)`);
        }
        zb() {
            (this.ZJe = null),
                (this.b5e = !1),
                this.obi && this.mht && this.obi.removeChild(this.mht),
                (this.mht = null),
                (this.obi = null),
                (this.w5e = null),
                ib.Ut(this);
        }
        uF(t, i) {
            return ib.wi(t), ib.wi(i), t >= this.tp && i >= this.ep && t <= this.tp + this.RS && i <= this.ep + this._S;
        }
        Zwi() {
            return this.Egi;
        }
        c5e() {
            return this.w5e;
        }
    };
}
{
    const lb = self.t,
        ub = "0.5",
        cb = [
            { transform: "scale(0.9)", opacity: "0" },
            { transform: "scale(1)", opacity: ub },
        ];
    let db = { duration: 300, easing: "ease", fill: "forwards", direction: null };
    lb.ti.d5e = class extends lb.MV {
        constructor(t, i, e, s, n) {
            switch (
                (lb.wi(t),
                lb.wi(i),
                lb.wi(e),
                lb.wi(s),
                lb.vu(n),
                super(),
                (this.obi = document.body),
                (this.mht = lb.ti.gj("div", this.obi, null, "dockGhost")),
                (this.ZJe = null),
                (this.b5e = !1),
                n)
            ) {
                case "left":
                    this.mht.classList.add("originLeft");
                    break;
                case "top":
                    this.mht.classList.add("originTop");
                    break;
                case "right":
                    this.mht.classList.add("originRight");
                    break;
                case "bottom":
                    this.mht.classList.add("originBottom");
                    break;
                case "tab":
                    this.mht.classList.add("originMiddle");
            }
            this.M5e(t, i, e, s);
        }
        v5e(t) {
            (t = !!t),
                self.assert(!this.ZJe, "Should not start new dock ghost animation if already playing animation"),
                (db.direction = t ? "reverse" : "normal"),
                (this.ZJe = this.mht.animate(cb, db)),
                (this.ZJe.onfinish = (t) => this.E5e());
        }
        l5e() {
            self.app.Cbt() ? this.v5e(!1) : (this.mht.style.opacity = ub);
        }
        u5e() {
            (this.b5e = !0), self.app.Cbt() ? (this.ZJe ? (this.ZJe.playbackRate *= -1) : this.v5e(!0)) : this.E5e();
        }
        E5e() {
            (this.ZJe = null), this.b5e && this.zb();
        }
        zb() {
            (this.ZJe = null),
                (this.b5e = !1),
                this.obi && this.mht && this.obi.removeChild(this.mht),
                (this.mht = null),
                (this.obi = null),
                lb.Ut(this);
        }
        M5e(t, i, e, s) {
            lb.wi(t),
                lb.wi(i),
                lb.wi(e),
                lb.wi(s),
                (this.mht.style.left = `${t}px`),
                (this.mht.style.top = `${i}px`),
                (this.mht.style.width = `${e}px`),
                (this.mht.style.height = `${s}px`);
        }
    };
}
{
    const fb = self.t,
        pb = 1,
        mb = 2048,
        wb = new Set(["normal", "mask"]);
    let gb = new Map();
    const yb = { name: null, source: null, Rf: !1 };
    fb.ti.zrt = class extends fb.MV {
        constructor(t, i, e, s, n) {
            fb.Et(t, fb.ti.C5e), fb.wi(i), fb.wi(e), fb.k$(s), fb.k$(n), super(), (this.oes = t);
            const r = fb.ti.C5e.Qu();
            (this._5e = i),
                (this.T5e = e),
                (this.I5e = i / r),
                (this.P5e = e / r),
                (this.G5e = null),
                (this.A0e = !1),
                (this.A5e = null),
                (this.HGt = null),
                (this.R5e = !1),
                (this.k5e = !1),
                (this.Gqt = ""),
                (this.M5t = ""),
                this.tIs(s, n);
        }
        tIs(t, i) {
            if (
                ((this.Gqt = t || ""),
                (this.M5t = i || ""),
                (this.R5e = !1),
                (this.k5e = !1),
                (this.HGt = new Promise((t) => (this.A5e = t))),
                this.M5t)
            ) {
                let t = `${this.oes.O5e()},${this.M5t}`;
                self.assert(!gb.has(t), "icon already cached"), gb.set(t, this);
            }
        }
        Ut() {
            if (!this.R5e) {
                if (((this.R5e = !0), (this.k5e = !1), this.oes.D5e(this), this.M5t)) {
                    let t = `${this.oes.O5e()},${this.M5t}`;
                    gb.delete(t);
                }
                (this.A0e = !1), (this.A5e = null), (this.HGt = null), (this.Gqt = "<removed>"), (this.M5t = "");
            }
        }
        F5e() {
            return this.O5e() <= self.app.Ent();
        }
        L5e() {
            return this.O5e() > self.app.Ent() && this.O5e() <= self.app.bet();
        }
        B5e() {
            return this.O5e() > self.app.bet();
        }
        ncs() {
            return this.R5e;
        }
        U5e() {
            return this.k5e;
        }
        Uss() {
            return this.oes;
        }
        N5e() {
            return this.oes.N5e();
        }
        j5e() {
            return this.oes.j5e();
        }
        $5e() {
            return this.oes.$5e();
        }
        z5e() {
            return this.oes.ZEe();
        }
        O5e() {
            return this.oes.O5e();
        }
        V5e() {
            return this.I5e;
        }
        W5e() {
            return this.P5e;
        }
        H5e() {
            return this.oes.H5e();
        }
        K5e() {
            return this._5e;
        }
        q5e() {
            return this.T5e;
        }
        X5e(t) {
            fb.qm(t, fb.ti.KAe), (this.G5e = t);
        }
        wCe() {
            return this.G5e;
        }
        cNt() {
            return this.A0e;
        }
        Mde() {
            this.A0e || ((this.A0e = !0), this.A5e && (this.A5e(), (this.A5e = null)));
        }
        fjt() {
            return this.HGt;
        }
        addEventListener(t, i, e) {
            return this.oes.addEventListener(t, i, e);
        }
        removeEventListener(t, i, e) {
            return this.oes.removeEventListener(t, i, e);
        }
        async Y5e(t, i) {
            fb.vu(t), fb.Crt(i), this.oes.J5e();
            try {
                if (fb.Y$.ImageBitmap && !i.Rf) {
                    const e = await fb.ma(t);
                    let s = null;
                    (s = fb.Y$.$es
                        ? await createImageBitmap(e, { premultiplyAlpha: "none" })
                        : await createImageBitmap(e)),
                        this.gl(s, i);
                } else {
                    const e = await fb.aEs(t);
                    this.gl(e, i);
                }
            } catch (i) {
                console.error(`Error updating icon from URL '${t}': `, i), (this.k5e = !0);
            } finally {
                this.oes.Z5e();
            }
        }
        gl(t, i) {
            fb.Rmi(t),
                fb.Crt(i),
                i && i.Rf && (t.width <= 0 || t.height <= 0) && ((i.width = this.O5e()), (i.height = this.O5e())),
                this.oes.Q5e(this, t, i);
        }
        async _de(t) {
            fb._T(t);
            const i = [],
                e = [];
            for (const s of t) {
                let t = null,
                    n = "normal";
                if (s instanceof fb.ti.zrt) t = s;
                else if ((fb.x$(s), (t = s.icon), (n = s.type), fb.Et(t, fb.ti.zrt), !wb.has(n)))
                    throw new Error("invalid overlay icon type");
                if (t.O5e() !== this.O5e()) throw new Error("overlay icons must be same size");
                e.push(t.fjt()), i.push({ icon: t, type: n });
            }
            await Promise.all(e);
            for (const t of i) this.t6e(t.icon, t.type);
        }
        t6e(t, i) {
            this.Uss().t6e(this, t, i);
        }
        static XAe(t, i, e) {
            fb.vu(t), fb.ti.zrt.i6e(i), fb.Crt(e), (e = Object.assign({}, yb, e));
            let s = gb.get(`${i},${t}`);
            if (s) return s;
            let n = fb.ti.s6e.e6e(i, e.name, e.source || t);
            return n.Y5e(t, { yii: !0, Rf: e.Rf }), n;
        }
        static mF(t, i, e) {
            fb.Cv(t), fb.ti.zrt.i6e(i), fb.Crt(e), (e = Object.assign({}, yb, e));
            let s = fb.ti.s6e.e6e(i, e.name, e.source);
            return t && s.gl(t, { yii: !0, Rf: e.Rf }), s;
        }
        static i6e(t) {
            if ((fb.wi(t), t < pb || t > mb)) throw new RangeError("invalid icon size");
        }
    };
}
{
    const bb = self.t,
        vb = self.assert;
    let Sb = NaN;
    const xb = 24,
        Mb = 48,
        Eb = 96,
        Cb = 128,
        _b = 256,
        Tb = 512,
        Ib = 1024,
        Pb = 2048,
        Gb = 50,
        Ab = 250,
        Rb = 500,
        kb = { yii: !1, Rf: !1, width: 0, height: 0, n6e: !1 };
    let Ob = new Set();
    bb.ti.C5e = class extends bb.Event.aG {
        constructor(t, i) {
            super(), bb.ti.zrt.i6e(t), bb.wi(i);
            const e = bb.ti.C5e.Qu();
            (this.r6e = t),
                (this.h6e = Math.ceil(t * e)),
                (this.o6e = Math.floor(t * e)),
                (this.a6e = 2),
                (this.l6e = 0),
                (this.u6e = 0),
                (this.c6e = i),
                (this.xG = null),
                (this.YG = null),
                (this.d6e = !1),
                (this.les = null),
                (this.qEe = ""),
                (this.n9 = !1),
                (this.f6e = 0),
                (this.p6e = -1),
                (this.m6e = -1),
                (this.w6e = () => {
                    (this.p6e = -1), this.g6e();
                }),
                (this.y6e = []),
                (this.b6e = []),
                (this.v6e = []),
                (this.S6e = []),
                (this.x6e = 0),
                (this.M6e = 0),
                (this.E6e = !1),
                this.r6e <= xb
                    ? (this.l6e = Cb)
                    : this.r6e <= Mb
                      ? (this.l6e = _b)
                      : this.r6e <= Eb
                        ? (this.l6e = Tb)
                        : (this.l6e = Ib),
                this.l6e * e > Pb && (this.l6e = Math.floor(Pb / e));
            let s = this.l6e / this.r6e;
            (this.u6e = Math.ceil((this.h6e + this.a6e) * s)), Ob.add(this);
        }
        static Qu() {
            return isNaN(Sb) && (Sb = self.devicePixelRatio), Sb;
        }
        O5e() {
            return this.r6e;
        }
        H5e() {
            return this.h6e;
        }
        N5e() {
            return this.l6e;
        }
        j5e() {
            return this.u6e / bb.ti.C5e.Qu();
        }
        $5e() {
            return this.u6e;
        }
        C6e() {
            return this.xG;
        }
        _6e() {
            return this.v6e.length - this.S6e.length;
        }
        lns() {
            return this.E6e && 0 === this.S6e.length;
        }
        J5e() {
            this.f6e++;
        }
        Z5e() {
            if ((this.f6e--, this.f6e < 0)) throw new Error("too many pending icons removed");
        }
        g6e() {
            if (!this.xG) return;
            if (this.d6e || (this.qEe && !this.n9)) return;
            (this.d6e = !0), (this.n9 = !1), bb.Rm(this.b6e, this.y6e), bb.yh(this.y6e), (this.m6e = Date.now());
            let t = this.qEe;
            bb.a3t(this.xG)
                .then((t) => ((this.les = t), (this.qEe = URL.createObjectURL(t)), bb.aEs(this.qEe)))
                .then((i) => {
                    (this.d6e = !1), this.T6e(), t && URL.revokeObjectURL(t);
                });
        }
        T6e() {
            for (let t of this.b6e) t.Mde();
            bb.yh(this.b6e), this.dispatchEvent(new bb.Event("change")), this.n9 && this.I6e();
        }
        ZEe() {
            return this.qEe;
        }
        I6e() {
            if (this.d6e || -1 !== this.p6e) return;
            let t = self.app.zQ() && bb.fk.Bj ? Ab : Rb;
            Date.now() - this.m6e >= t && (t = Gb), (this.p6e = window.setTimeout(this.w6e, t));
        }
        P6e() {
            if (
                !this.YG &&
                ((this.xG = document.createElement("canvas")),
                (this.xG.width = this.u6e),
                (this.xG.height = this.u6e),
                (this.YG = this.xG.getContext("2d")),
                (this.YG.imageSmoothingEnabled = !0),
                (this.YG.imageSmoothingQuality = "high"),
                !this.YG)
            )
                throw new Error("failed to create 2d context");
        }
        G6e() {
            if (this.E6e) throw new Error("no icon spaces left");
            const t = this.h6e + this.a6e;
            (this.x6e += t),
                this.x6e > this.u6e - t &&
                    ((this.M6e += t), (this.x6e = 0), this.M6e > this.u6e - t && (this.E6e = !0));
        }
        D5e(t) {
            if ((bb.Et(t, bb.ti.zrt), t.Uss() !== this)) throw new Error("icon from wrong sheet");
            vb(!this.S6e.includes(t), "icon already removed"),
                this.S6e.push(t),
                this.YG && this.YG.clearRect(t.K5e(), t.q5e(), this.h6e, this.h6e);
        }
        A6e(t, i) {
            if ((bb.k$(t), bb.k$(i), this.lns())) throw new Error("icon sheet is already full");
            if (this.S6e.length) {
                let e = this.S6e.pop();
                return e.tIs(t, i), e;
            }
            {
                let e = bb.m(bb.ti.zrt, this, this.x6e, this.M6e, t, i);
                return this.v6e.push(e), this.G6e(), e;
            }
        }
        Q5e(t, i, e) {
            if ((bb.Et(t, bb.ti.zrt), bb.Rmi(i), bb.Crt(e), (e = Object.assign({}, kb, e)), t.ncs())) return;
            if (t.Uss() !== this) throw new Error("updating icon from wrong sheet");
            if (i instanceof Image && !i.complete) throw new Error("image is not complete");
            const s = i.width || e.width,
                n = i.height || e.height;
            if (!isFinite(s) || s <= 0 || !isFinite(n) || n <= 0) throw new Error("invalid size");
            let r, h;
            const o = bb.ti.C5e.Qu();
            if (s < this.r6e && n < this.r6e && !e.Rf) (r = s * o), (h = n * o);
            else {
                let t = Math.max(s, n),
                    i = this.o6e / t;
                (r = Math.min(s * i, this.o6e)), (h = Math.min(n * i, this.o6e));
            }
            let a = Math.max(Math.floor((this.h6e - r) / 2), 0),
                l = Math.max(Math.floor((this.h6e - h) / 2), 0),
                u = t.K5e(),
                c = t.q5e();
            this.P6e(),
                e.yii || this.YG.clearRect(u, c, this.h6e, this.h6e),
                e.n6e && (i = bb.ANt(i, r, h)),
                this.YG.drawImage(i, u + a, c + l, r, h),
                this.y6e.push(t),
                (this.n9 = !0),
                this.I6e();
        }
        t6e(t, i, e) {
            bb.Et(t, bb.ti.zrt),
                bb.Et(i, bb.ti.zrt),
                vb(t.Uss() === this, "icon from wrong sheet"),
                vb(t !== i, "icon and overlay are the same"),
                vb(t.O5e() === i.O5e(), "icon sizes must match"),
                bb.vu(e),
                this.P6e();
            let s = this.H5e();
            const n = i.Uss();
            "mask" === e && (this.YG.globalCompositeOperation = "destination-out"),
                this.YG.drawImage(n.xG, i.K5e(), i.q5e(), s, s, t.K5e(), t.q5e(), s, s),
                "mask" === e && (this.YG.globalCompositeOperation = "source-over"),
                this.y6e.push(t),
                (this.n9 = !0),
                this.I6e();
        }
        HX() {
            let t = 0;
            return this.xG && (t += this.u6e * this.u6e * 4), this.les && (t += this.les.size), t;
        }
        static all() {
            return Ob.values();
        }
    };
}
{
    const Db = self.t,
        Fb = new Map();
    let Lb = 0;
    Db.ti.s6e = class {
        constructor() {
            throw new TypeError("static class can't be instantiated");
        }
        static R6e(t) {
            Db.ti.zrt.i6e(t);
            let i = Fb.get(t);
            if (i) {
                for (let t of i) if (!t.lns()) return t;
                let e = Db.m(Db.ti.C5e, t, Lb++);
                return i.push(e), e;
            }
            {
                let i = Db.m(Db.ti.C5e, t, Lb++);
                return Fb.set(t, [i]), i;
            }
        }
        static e6e(t, i, e) {
            return Db.ti.zrt.i6e(t), Db.k$(i), Db.k$(e), Db.ti.s6e.R6e(t).A6e(i, e);
        }
        static *k6e() {
            for (let t of Fb.values()) yield* t;
        }
    };
}
{
    const Bb = self.t;
    let Ub = [{ opacity: 0 }, { opacity: 1 }];
    const Nb = { duration: 200, easing: "linear" },
        jb = { icon: null, O6e: null, D6e: !1, ariaLabel: null };
    Bb.ti.met = class extends Bb.MV {
        constructor(t, i) {
            let e;
            if ((super(), t instanceof Bb.ti.zrt)) (e = Object.assign({}, jb)), (e.icon = t);
            else if ("number" == typeof t) (e = Object.assign({}, jb)), (e.O6e = t);
            else {
                if (!Bb.Gat(t)) throw new TypeError("invalid parameter");
                e = Object.assign({}, jb, t);
            }
            (this.UNt = null),
                (this.r6e = 0),
                (this.F6e = ""),
                (this.L6e = !!e.D6e),
                (this.mht = document.createElement("ui-icon")),
                (this.B6e = ""),
                (this.U6e = null),
                (this.N6e = null),
                (this.j6e = !1),
                (this.$6e = !1),
                (this.ZJe = null),
                (this.h3e = !0),
                (this.z6e = (t) => this.V6e()),
                Bb.ZRe(e.O6e) ? (Bb.ti.zrt.i6e(e.O6e), (this.r6e = e.O6e)) : this.W6e(e.icon),
                this.H6e(),
                this.V6e(),
                e.ariaLabel && (Bb.vu(e.ariaLabel), this.mht.setAttribute("aria-label", e.ariaLabel)),
                i && i.appendChild(this.mht);
        }
        Ut(t) {
            this.D5e(), (this.z6e = null), (this.N6e = null), t || Bb.ti.Tz(this.mht), (this.mht = null), Bb.Ut(this);
        }
        K6e(t) {
            const i = this.r6e;
            this.mht.parentElement.insertBefore(t, this.mht),
                this.Ut(),
                t.setAttribute("width", i),
                t.setAttribute("height", i);
        }
        JB(t) {
            if ((Bb.yp(t), this.UNt)) throw new Error("already got an icon");
            (this.N6e = t), (this.j6e = !0);
        }
        _ii() {
            if (!this.N6e) return;
            let t = this.N6e();
            Bb.qm(t, Bb.ti.zrt), t && (t.cNt() || (this.$6e = !0), this.zD(t));
        }
        su() {
            return this.r6e;
        }
        rMt() {
            return this.UNt;
        }
        zD(t) {
            (this.N6e = null), this.UNt !== t && (this.D5e(), this.W6e(t), this.H6e(), this.V6e());
        }
        Cxt(t) {
            if (this.mht.parentElement)
                return this.mht.parentElement !== t ? (Bb.ti.Tz(this.mht), void t.appendChild(this.mht)) : void 0;
            t.appendChild(this.mht);
        }
        FO() {
            return this.mht;
        }
        q6e(t) {
            (t = !!t), this.L6e !== t && ((this.L6e = t), this.H6e(!0));
        }
        X6e() {
            return this.L6e;
        }
        tO(t) {
            (t = !!t), this.h3e !== t && ((this.h3e = t), Bb.ti.CT(this.mht, "hidden", !this.h3e));
        }
        Xrt() {
            this.tO(!1);
        }
        eD() {
            this.tO(!0);
        }
        ABt(t) {
            Bb.vu(t), this.F6e !== t && ((this.F6e = t), this.H6e(!0), this.V6e());
        }
        W6e(t) {
            Bb.qm(t, Bb.ti.zrt),
                this.Y6e(),
                (this.UNt = t),
                this.UNt && ((this.r6e = this.UNt.O5e()), this.UNt.addEventListener("change", this.z6e));
        }
        D5e() {
            this.UNt && (this.Y6e(), this.UNt.removeEventListener("change", this.z6e), (this.UNt = null));
        }
        J6e(t) {
            return Bb.wi(t), this.F6e ? `calc(${t}px * var(${this.F6e}))` : `${t}px`;
        }
        H6e(t) {
            if (!t && this.r6e === this.U6e) return;
            const i = this.J6e(this.r6e);
            (this.mht.style.width = i),
                (this.mht.style.height = i),
                this.L6e && (this.mht.style.borderRadius = this.r6e / 2 + "px"),
                (this.U6e = this.r6e);
        }
        V6e() {
            let t = this.B6e;
            this.UNt && this.UNt.cNt()
                ? (this.$6e && (this.Z6e(), (this.$6e = !1)),
                  (t = `url("${this.UNt.z5e()}") ${this.J6e(-this.UNt.V5e())} ${this.J6e(-this.UNt.W5e())} / ${this.J6e(this.UNt.j5e())} ${this.J6e(this.UNt.j5e())} no-repeat`))
                : this.UNt || (t = ""),
                t !== this.B6e && ((this.mht.style.background = t), (this.B6e = t));
        }
        Z6e() {
            Bb.Y$.NRe && ((this.ZJe = this.mht.animate(Ub, Nb)), (this.ZJe.onfinish = () => this.Q6e()));
        }
        Y6e() {
            this.ZJe && (this.ZJe.cancel(), (this.ZJe = null));
        }
        Q6e() {
            this.ZJe = null;
        }
    };
}
{
    const $b = self.t;
    $b.ti.KAe = class extends $b.MV {
        constructor(t, i, e) {
            super(),
                $b.Et(t, $b.CJe),
                $b.k$(i),
                $b.x$(e),
                $b.k$(e.name),
                $b.k$(e.source),
                (this.ZAe = t),
                (this.t8e = i || ""),
                (this.i8e = ""),
                (this.e8e = null),
                (this.s8e = null),
                (this.Gqt = e.name),
                (this.M5t = e.source),
                (this.zc = e.color),
                (this.Uas = null),
                (this.Vas = null),
                (this.Las = null),
                (this.n8e = new Map()),
                (this.r8e = null),
                (this.h8e = !1),
                this.t8e || ($b.vu(e.o8e), (this.i8e = e.o8e));
        }
        Ut() {
            this.Uas && this.Uas.Ut(), this.Vas && this.Vas.Ut(), this.Las && this.Las.Ut();
            for (const t of this.n8e.values()) t.Ut();
            this.n8e.clear(),
                (this.n8e = null),
                this.a8e(),
                (this.Uas = null),
                (this.Vas = null),
                (this.Las = null),
                (this.ZAe = null),
                (this.t8e = ""),
                (this.i8e = ""),
                (this.e8e = null),
                (this.s8e = null),
                (this.Gqt = ""),
                (this.r8e = null),
                $b.Ut(this);
        }
        l8e() {
            return this.Gqt.endsWith("-color");
        }
        aEs() {
            return this.s8e
                ? Promise.resolve(this.s8e)
                : this.r8e
                  ? this.r8e
                  : this.h8e
                    ? Promise.resolve(null)
                    : ((this.r8e = this.u8e()), this.r8e);
        }
        async u8e() {
            try {
                if (!this.i8e) {
                    const t = await self.app.c8e(this.t8e);
                    this.a8e(), (this.i8e = t);
                }
                const t = $b.m($b.BM.Document);
                await t.QVe(this.i8e, "image/svg+xml"), (this.e8e = t.YM().ASe()), await this.d8e();
                const i = new Blob([this.i8e], { type: "image/svg+xml" }),
                    e = await $b.pC(i);
                return await $b.Roe(() => this.f8e(e));
            } catch (t) {
                return (
                    console.error("Error fetching icon: ", t),
                    (this.h8e = !0),
                    (this.e8e = document.createElement("svg")),
                    null
                );
            }
        }
        a8e() {
            this.t8e.match(/^blob:.+$/) && URL.revokeObjectURL(this.t8e);
        }
        async d8e(t) {
            const i = this.zc || self.app.p8e();
            i &&
                ("#000000" !== i || t) &&
                (await $b.Roe(() => {
                    this.e8e.setAttribute("fill", i),
                        this.e8e.hasAttribute("stroke") &&
                            "none" !== this.e8e.getAttribute("stroke") &&
                            this.e8e.setAttribute("stroke", i);
                    const t = new XMLSerializer();
                    this.i8e = t.serializeToString(this.e8e.ownerDocument);
                }));
        }
        async Ki(t) {
            this.zc === t || this.l8e() || ((this.zc = t), await this.WXe());
        }
        async WXe() {
            if (!this.e8e || this.h8e) return;
            await this.d8e(!0);
            const t = new Blob([this.i8e], { type: "image/svg+xml" }),
                i = await $b.pC(t);
            (this.s8e = i), this.m8e({ yii: !1, Rf: !0 });
        }
        f8e(t) {
            return (this.s8e = t), (this.r8e = null), this.m8e({ yii: !0, Rf: !0 }), this.s8e;
        }
        m8e(t) {
            this.Uas && this.Uas.gl(this.s8e, t),
                this.Vas && this.Vas.gl(this.s8e, t),
                this.Las && this.Las.gl(this.s8e, t);
            for (const i of this.n8e.values()) i.gl(this.s8e, t);
        }
        KB() {
            return (
                this.Uas ||
                    ((this.Uas = $b.ti.zrt.mF(this.s8e, this.ZAe.Ent(), { name: this.Gqt, source: this.M5t, Rf: !0 })),
                    this.Uas.X5e(this),
                    $b.VTe() && this.aEs()),
                this.Uas
            );
        }
        Iue() {
            return (
                this.Vas ||
                    ((this.Vas = $b.ti.zrt.mF(this.s8e, this.ZAe.bet(), { name: this.Gqt, source: this.M5t, Rf: !0 })),
                    this.Vas.X5e(this),
                    $b.VTe() && this.aEs()),
                this.Vas
            );
        }
        Wos() {
            return (
                this.Las ||
                    ((this.Las = $b.ti.zrt.mF(this.s8e, this.ZAe.IMt(), { name: this.Gqt, source: this.M5t, Rf: !0 })),
                    this.Las.X5e(this),
                    $b.VTe() && this.aEs()),
                this.Las
            );
        }
        rMt(t) {
            $b.wi(t), self.assert(t > 0, "custom icon size must be larger than 0");
            const i = t.toString();
            if (this.n8e.has(i)) return this.n8e.get(i);
            const e = $b.ti.zrt.mF(this.s8e, t, { name: this.Gqt, source: this.M5t, Rf: !0 });
            return e.X5e(this), $b.VTe() && this.aEs(), this.n8e.set(i, e), e;
        }
        async w8e() {
            return await this.aEs(), this.e8e;
        }
        async out() {
            const t = await this.w8e();
            return t ? t.cloneNode(!0) : null;
        }
    };
}
self.t.ti.Tj = {};
{
    const zb = self.t,
        Vb = [{ opacity: "0" }, { opacity: "1" }],
        Wb = zb.E4s.ZRs("slow-animations") ? 3e3 : 200,
        Hb = { duration: Wb, easing: "ease-out" },
        Kb = { duration: Wb, easing: "ease-out", direction: "reverse" };
    let qb = null,
        Xb = null,
        Yb = !1,
        Jb = !1,
        Zb = null,
        Qb = 0,
        tv = -1;
    function iv() {
        -1 !== tv && (self.clearTimeout(tv), (tv = -1));
    }
    document.addEventListener("visibilitychange", () => {
        Xb && (Xb.cancel(), zb.ti.jqe.rQe());
    }),
        (zb.ti.jqe = class {
            constructor() {
                throw new TypeError("static class can't be instantiated");
            }
            static eD(t) {
                if (((Zb = document), ++Qb, iv(), Xb))
                    return (
                        Jb && ((Jb = !1), (Yb = !0), (Xb.playbackRate *= -1)),
                        void (window.C3_IsPopupWindow || zb.ti.LYe.ZYe(!0))
                    );
                qb ||
                    (window.C3_IsPopupWindow || zb.ti.LYe.ZYe(!0),
                    (qb = zb.ti.gj("div", Zb.body, null, "c3-dimmer")),
                    (Yb = !0),
                    zb.Y$.h$i || qb.setAttribute("polyfill", ""),
                    self.app.Cbt() ? ((Xb = qb.animate(Vb, Hb)), (Xb.onfinish = zb.ti.jqe.rQe)) : zb.ti.jqe.rQe());
            }
            static Xrt() {
                0 !== Qb &&
                    (--Qb,
                    Qb > 0 ||
                        (qb &&
                            (window.C3_IsPopupWindow || zb.ti.LYe.ZYe(!1),
                            iv(),
                            (tv = self.setTimeout(() => {
                                (tv = -1), zb.ti.jqe.rQe();
                            }, 2 * Wb)),
                            Xb
                                ? Yb && ((Jb = !0), (Yb = !1), (Xb.playbackRate *= -1))
                                : ((Jb = !0),
                                  self.app.Cbt()
                                      ? ((Xb = qb.animate(Vb, Kb)), (Xb.onfinish = zb.ti.jqe.rQe))
                                      : zb.ti.jqe.rQe()))));
            }
            static g8e() {
                qb && (qb.style.backgroundColor = "rgba(128, 0, 0, 0.4)");
            }
            static rQe() {
                Jb && (iv(), zb.ti.Tz(qb), (qb = null)), (Xb = null), (Zb = null), (Yb = !1), (Jb = !1);
            }
        });
}
{
    const ev = self.t,
        sv = [{ opacity: "0" }, { opacity: "1" }],
        nv = ev.E4s.ZRs("slow-animations") ? 3e3 : 200,
        rv = 350,
        hv = { duration: nv, easing: "ease-out" },
        ov = { duration: nv, easing: "ease-out", direction: "reverse" },
        av = { message: null, y8e: "outside-auto", b8e: "", v8e: 12, S8e: !0, x8e: !0, M8e: !1, E8e: !1 };
    let lv = "outside-auto",
        uv = "",
        cv = 12,
        dv = !0,
        fv = !0,
        pv = !1,
        mv = !1;
    const wv = 6;
    let gv = null,
        yv = null,
        bv = null,
        vv = null,
        Sv = null,
        xv = null,
        Mv = null,
        Ev = null,
        Cv = null,
        _v = null,
        Tv = null,
        Iv = null,
        Pv = !1,
        Gv = !1;
    document.addEventListener("visibilitychange", () => {
        Iv && (Iv.cancel(), ev.ti.ZSe.rQe());
    }),
        window.addEventListener("resize", async () => {
            gv && vv && (await ev.pwe(), ev.ti.ZSe.C8e());
        }),
        ev.ti.SK.addEventListener("dialogpositioningchange", () => {
            yv && ev.ti.ZSe.C8e();
        });
    const Av = new Set(["ArrowLeft", "ArrowRight", "ArrowUp", "ArrowDown", " ", "PageUp", "PageDown", "Home", "End"]);
    function Rv(t) {
        ("Tab" === t.key || (dv && Av.has(t.key))) && (t.preventDefault(), t.stopPropagation());
    }
    function kv(t) {
        const i = ev.Rect.Lbt(gv.getBoundingClientRect());
        ("#document" !== t.target.nodeName &&
            (i.i6(t.clientX, t.clientY) ||
                t.target === Ev ||
                ev.sU(t.target, Ev) ||
                ev.ykt(t.target, ["ui-menu"]) ||
                ev.kkt(t.target, ["autoCompleteWrap"]) ||
                ev.kkt(t.target, ["construct-monaco-overlay"]))) ||
            (t.preventDefault(), t.stopPropagation());
    }
    ev.ti.ZSe = class {
        constructor() {
            throw new TypeError("static class can't be instantiated");
        }
        static eD(t, i) {
            if (
                (ev.Gct(t),
                (gv = t),
                (i = Object.assign({}, av, i)),
                (cv = i.v8e),
                (dv = !!i.S8e),
                (fv = !!i.x8e),
                (pv = !!i.M8e),
                (mv = !!i.E8e),
                (bv = ev.TOe(gv)),
                bv === document.body
                    ? (bv = null)
                    : (ev.ti.H_(gv, bv),
                      dv &&
                          (bv.addEventListener("scroll", ev.ti.uJt, { capture: !0, passive: !1 }),
                          bv.addEventListener("wheel", ev.ti.uJt, { capture: !0, passive: !1 }))),
                window.addEventListener("pointerdown", kv, { capture: !0, passive: !1 }),
                window.addEventListener("pointermove", kv, { capture: !0, passive: !1 }),
                window.addEventListener("pointerup", kv, { capture: !0, passive: !1 }),
                mv && window.addEventListener("contextmenu", ev.ti.sue, { capture: !0 }),
                pv ? ev.ti.SK.MJe(!1) : fv && ev.ti.SK.SJe(!1),
                (yv = ev.qfi(gv, "dialog")),
                vv && (yv ? yv.appendChild(vv) : document.body.appendChild(vv)),
                Iv && Gv && ((Gv = !1), (Iv.playbackRate *= -1)),
                (Pv = !0),
                !vv)
            ) {
                vv = ev.ti.gj("div", yv || document.body, null, "c3-dimmer-cutout-container");
                for (let t = 0; t < 4; ++t) ev.ti.gj("div", vv, null, "c3-dimmer-cutout-filler");
                Sv = ev.ti.gj("div", vv, null, "c3-dimmer-cutout-gap");
                for (let t = 0; t < 4; ++t) ev.ti.gj("div", vv, null, "c3-dimmer-cutout-filler");
                for (let t = 0; t < 4; ++t) ev.ti.gj("div", Sv, null, "c3-dimmer-gap-filler");
                ev.ti.gj("div", Sv, null, "c3-dimmer-gap-gap");
                for (let t = 0; t < 4; ++t) ev.ti.gj("div", Sv, null, "c3-dimmer-gap-filler");
                (xv = ev.ti.gj("div", vv, null, "c3-dimmer-cutout-outline")),
                    (Mv = ev.ti.gj("div", vv, null, "c3-dimmer-smallwindowmessage")),
                    (Mv.textContent = self.lang("tours.window-too-small"));
            }
            i.message
                ? ((lv = i.y8e),
                  (uv = i.b8e),
                  Ev ||
                      ((Ev = ev.ti.gj("div", vv, null, "c3-dimmer-cutout-message")),
                      (Cv = ev.ti.gj("div", Ev)),
                      (_v = ev.ti.gj("div", Ev)),
                      (Tv = ev.ti.gj("div", vv, null, "c3-dimmer-cutout-message-arrow"))),
                  ev.hrt(Cv, i.message),
                  (_v.className = ""),
                  ev.ti.fMt(_v))
                : (ev.ti.Tz(Ev), ev.ti.Tz(Tv), (Ev = null), (Cv = null), (_v = null), (Tv = null)),
                ev.ti.ZSe.C8e(),
                requestAnimationFrame(() => ev.ti.ZSe.C8e()),
                ev.ti.cE.FYe(!1),
                window.addEventListener("keydown", Rv, !0),
                self.app.Cbt() ? Iv || ((Iv = vv.animate(sv, hv)), (Iv.onfinish = ev.ti.ZSe.rQe)) : ev.ti.ZSe.rQe();
        }
        static Xrt() {
            window.removeEventListener("pointerdown", kv, { capture: !0, passive: !1 }),
                window.removeEventListener("pointermove", kv, { capture: !0, passive: !1 }),
                window.removeEventListener("pointerup", kv, { capture: !0, passive: !1 }),
                mv && window.removeEventListener("contextmenu", ev.ti.sue, { capture: !0 }),
                pv ? ev.ti.SK.MJe(!0) : fv && ev.ti.SK.SJe(!0),
                ev.ti.cE.FYe(!0),
                window.removeEventListener("keydown", Rv, !0),
                bv &&
                    (dv &&
                        (bv.removeEventListener("scroll", ev.ti.uJt, { capture: !0, passive: !1 }),
                        bv.removeEventListener("wheel", ev.ti.uJt, { capture: !0, passive: !1 })),
                    (bv = null)),
                (gv = null),
                (yv = null),
                ev.ti.Tz(Ev),
                ev.ti.Tz(Tv),
                (Ev = null),
                (Cv = null),
                (_v = null),
                (Tv = null),
                Iv
                    ? Pv && ((Gv = !0), (Pv = !1), (Iv.playbackRate *= -1))
                    : ((Gv = !0),
                      self.app.Cbt() && vv
                          ? ((Iv = vv.animate(sv, ov)), (Iv.onfinish = ev.ti.ZSe.rQe))
                          : ev.ti.ZSe.rQe());
        }
        static rQe() {
            Gv ? (ev.ti.Tz(vv), (vv = null), (xv = null), (Mv = null)) : Pv && gv && gv.focus(),
                (Iv = null),
                (Pv = !1),
                (Gv = !1);
        }
        static C8e() {
            if (!gv) return;
            ev.ti.H_(gv), gv.focus();
            const t = ev.Rect.Lbt(gv.getBoundingClientRect()),
                i = ev.m(ev.Rect, 0, 0, 0, 0);
            if (yv) {
                const t = ev.ti.Ze.UZe(yv),
                    e = t.Hge();
                i.set(
                    -t.Yn() - e,
                    -t.qn() - e,
                    Math.min(t.Yn() + t.rs() - window.innerWidth, 0) + e,
                    Math.min(t.qn() + t.ls() - window.innerHeight, 0) + e
                );
            }
            ev.ti.ZSe._8e(t, i);
        }
        static _8e(t, i) {
            ev.Et(t, ev.Rect), ev.Et(i, ev.Rect);
            const e = window.innerHeight < rv,
                s = cv,
                n = wv;
            let r = cv,
                h = cv,
                o = t.un() - s,
                a = t.width() + 2 * s;
            o < 0 && ((h = Math.max(h + o, 0)), (a = Math.max(a + o, 0)), (o = 0));
            let l = t.pn() - s,
                u = t.height() + 2 * s,
                c = "1fr";
            l < 0 && ((r += l), (u += l), (l = 0)),
                e && ((o = 0), (a = 0), (l = 0), (u = 0)),
                "WebKit" === ev.fk.FRe && (c = window.innerHeight - u - l + "px"),
                (vv.style.gridTemplateColumns = `${o}px ${a}px 1fr`),
                (vv.style.gridTemplateRows = `${l}px ${u}px ${c}`),
                (Sv.style.gridTemplateColumns = `${h}px 1fr ${s}px`),
                (Sv.style.gridTemplateRows = `${r}px 1fr ${s}px`);
            const d = t.un() - s - n,
                f = t.pn() - s - n;
            if (
                ((xv.style.left = d + "px"),
                (xv.style.top = f + "px"),
                (xv.style.width = t.width() + 2 * s + 2 * n + "px"),
                (xv.style.height = t.height() + 2 * s + 2 * n + "px"),
                (xv.style.display = e ? "none" : ""),
                (Mv.style.display = e ? "" : "none"),
                (vv.style.left = (i ? i.un() : 0) + "px"),
                (vv.style.top = (i ? i.pn() : 0) + "px"),
                (vv.style.right = (i ? i.Rr() : 0) + "px"),
                (vv.style.bottom = (i ? i._r() : 0) + "px"),
                Ev && ((Ev.style.display = e ? "none" : ""), (Tv.style.display = e ? "none" : ""), !e))
            )
                if ("outside-auto" === lv) ev.ti.ZSe.T8e(t);
                else {
                    if ("screen-bottom" !== lv) throw new Error("invalid message positioning");
                    ev.ti.ZSe.I8e();
                }
        }
        static T8e(t) {
            const i = ev.m(
                    ev.Rect,
                    Math.max(t.un(), 0),
                    Math.max(t.pn(), 0),
                    Math.min(t.Rr(), window.innerWidth),
                    Math.min(t._r(), window.innerHeight)
                ),
                e = cv,
                s = wv,
                n = window.innerWidth,
                r = window.innerHeight,
                h = [];
            "left" !== uv && h.push([i.un(), "left"]),
                "top" !== uv && h.push([i.pn(), "top"]),
                "right" !== uv && h.push([n - i.Rr(), "right"]),
                "bottom" !== uv && h.push([r - i._r(), "bottom"]),
                h.sort((t, i) => i[0] - t[0]);
            const o = h[0][1];
            (Ev.style.left = "0px"), (Ev.style.top = "0px"), (Ev.style.width = ""), (Ev.style.maxHeight = "");
            let a = Ev.getBoundingClientRect();
            const l = 2 * (e + s) + 10;
            let u = 0,
                c = a.width,
                d = 0,
                f = r - 10;
            if ("left" === o || "right" === o) {
                if ("left" === o) {
                    const t = i.un() - l;
                    (u = Math.max(5, t - a.width)), (c = t - u);
                } else "right" === o && ((u = i.Rr() + l), (c = Math.min(c, n - 5 - u)));
                (Ev.style.width = c + "px"), (a = Ev.getBoundingClientRect());
                const t = Math.min(a.height, f);
                d = ev.ft(i.Lr() - t / 2, 5, r - 5 - t);
            } else {
                if ("top" === o) {
                    const t = i.pn() - l;
                    (d = Math.max(5, t - a.height)), (f = t - d);
                } else "bottom" === o && ((d = i._r() + l), (f = Math.min(f, r - 5 - d)));
                (c = Math.min(a.width, n - 10)), (u = ev.ft(i.Dr() - c / 2, 5, n - 5 - c));
            }
            (Ev.style.left = u + "px"),
                (Ev.style.top = d + "px"),
                (Ev.style.width = c + "px"),
                (Ev.style.maxHeight = f + "px");
            const p = ev.Rect.Lbt(Ev.getBoundingClientRect()),
                m = 12;
            Tv.className = "c3-dimmer-cutout-message-arrow " + o;
            let w = 0,
                g = 0;
            "left" === o
                ? ((w = p.Rr()), (g = i.Lr() - m))
                : "right" === o
                  ? ((w = p.un() - m), (g = i.Lr() - m))
                  : "top" === o
                    ? ((w = i.Dr() - m), (g = p._r()))
                    : "bottom" === o && ((w = i.Dr() - m), (g = p.pn() - m)),
                (Tv.style.display = ""),
                (Tv.style.left = w + "px"),
                (Tv.style.top = g + "px");
        }
        static I8e() {
            (Tv.style.display = "none"),
                (Ev.style.left = "0px"),
                (Ev.style.top = "0px"),
                (Ev.style.width = ""),
                (Ev.style.maxHeight = "10em");
            const t = Ev.getBoundingClientRect();
            (Ev.style.left = window.innerWidth / 2 - t.width / 2 + "px"),
                (Ev.style.top = window.innerHeight - t.height - 25 + "px");
        }
        static xz() {
            return !!gv;
        }
        static QSe() {
            return vv;
        }
        static P8e() {
            return _v;
        }
    };
}
{
    const Ov = self.t;
    Ov.ti.Tj.Hfe = class extends Ov.MV {
        constructor(t, i, e, s) {
            Ov.Et(t, Ov.ti.Tj.nee),
                Ov.vu(i),
                Ov.k$(e),
                super(),
                (this.see = t),
                (this.Gqt = i),
                (this.mns = e),
                (this.GMt = s),
                (this.nes = this.see.G8e()),
                (this.p8t = !0),
                (this.di = !1),
                (this.A8e = ""),
                (this.mht = Ov.ti.gj("ui-proprow", this.see.R8e())),
                (this.MUi = (t) => this.fz(t)),
                this.mht.addEventListener("contextmenu", this.MUi);
        }
        CPt() {
            (this.di = !0),
                this.see.k8e(this),
                this.mht.removeEventListener("contextmenu", this.MUi),
                (this.MUi = null),
                Ov.ti.Tz(this.mht),
                (this.mht = null),
                (this.see = null),
                Ov.Ut(this);
        }
        fz(t) {
            this.see.ips("contextmenu", this, t);
        }
        O8e() {
            this.see.D8e(this);
        }
        gi() {
            return this.di;
        }
        fkt() {}
        F8e() {
            let t = 0,
                i = this.GMt;
            for (; i; ) ++t, (i = i.GMt);
            return t;
        }
        jte() {
            return this.see;
        }
        nE() {
            return this.GMt;
        }
        Zn() {
            return this.Gqt;
        }
        qte() {
            return this.mns;
        }
        Ete() {
            return this.mht;
        }
        JD() {
            return this.nes;
        }
        sde() {
            return !1;
        }
        Lie(t) {
            Ov.vu(t), (this.A8e = t);
        }
        L8e() {
            return this.A8e;
        }
        h_() {
            return !0;
        }
        B8e(t, i) {
            if (((t = !!t), !(i = !!i) && this.see.U8e() && this.see.N8e(), t && !this.p8t))
                if (((this.p8t = !0), i)) this.see.j8e(this);
                else {
                    this.mht.removeAttribute("collapsed");
                    let t = this.see.$8e();
                    t && t();
                }
            else if (!t && this.p8t)
                if (((this.p8t = !1), i)) this.see.z8e(this);
                else {
                    this.mht.setAttribute("collapsed", "");
                    let t = this.see.$8e();
                    t && t();
                }
        }
        obt() {
            let t = this.GMt;
            for (; t; ) {
                if (!t.h_()) return !1;
                t = t.GMt;
            }
            return !0;
        }
        $K() {
            return !0;
        }
        V8e() {}
        xfe() {}
        Mlt() {}
        EF() {}
        _A() {}
        xH(t) {}
    };
}
{
    const Dv = self.t;
    Dv.ti.Tj.W8e = class extends Dv.ti.Tj.Hfe {
        constructor(t, i, e, s) {
            super(t, i, e, s), (this.uAt = Dv.ti.gj("ui-propname", this.mht));
            let n = this.F8e();
            n > 0 && this.uAt.setAttribute("level" + n, ""),
                (this.H8e = (t) => {
                    t.button === Dv.sQ.z0 && t.isPrimary && (this.see.c$(this) && t.preventDefault(), this.O8e());
                }),
                this.uAt.addEventListener("pointerdown", this.H8e),
                (this.Qbt = Dv.ti.gj("div", this.uAt, null, "propname-wrap")),
                (this.KCe = Dv.ti.gj("label", this.Qbt, null, "propname-label")),
                (this.KCe.textContent = this.Gqt),
                this.KCe.setAttribute("for", this.nes),
                (this.K8e = Dv.ti.gj("ui-propvalue", this.mht)),
                (this.mQ = !0),
                (this.pp = null);
        }
        CPt() {
            this.uAt.removeEventListener("pointerdown", this.H8e),
                (this.H8e = null),
                Dv.ti.Tz(this.KCe),
                (this.KCe = null),
                Dv.ti.Tz(this.Qbt),
                (this.Qbt = null),
                Dv.ti.Tz(this.uAt),
                (this.uAt = null),
                Dv.ti.Tz(this.K8e),
                (this.K8e = null),
                super.CPt();
        }
        O8e() {
            super.O8e(), this.H_();
        }
        H_() {
            this.see.Ogt(this);
        }
        Zie(t) {
            return (this.pp = t), this;
        }
        Zc() {
            return this.pp;
        }
        sde() {
            return !0;
        }
        q8e() {
            return this.uAt;
        }
        X8e() {
            return this.K8e;
        }
        qL(t) {
            (t = !!t),
                this.mQ !== t &&
                    (Dv.ti.CT(this.KCe, "disabled", !t),
                    Dv.ti.CT(this.K8e, "disabled", !t),
                    t || this.see.k8e(this),
                    (this.mQ = t),
                    this.Y8e(t));
        }
        $K() {
            return this.mQ;
        }
        Y8e(t) {}
        *Tfe() {}
        J8e() {
            return this.see.Z8e(this);
        }
    };
}
{
    const Fv = self.t;
    let Lv = null;
    const Bv = new Map([
        ["text", "text"],
        ["integer", "number"],
        ["float", "number"],
        ["percent", "text"],
        ["angle", "text"],
        ["custom-numeric", "text"],
        ["email", "email"],
        ["password", "password"],
        ["tel", "tel"],
        ["url", "url"],
    ]);
    Fv.ti.Tj.Q8e = class extends Fv.ti.Tj.W8e {
        constructor(t, i, e, s, n, r, h, o, a) {
            if ((super(t, i, e, n), Fv.k$(s), Fv.kDt(r), Fv.kDt(h), Fv.kDt(o), (s = s || "text"), !Bv.has(s)))
                throw new Error(`invalid InputProperty type '${s}'`);
            (this.Osi = s), (this.Rht = Fv.ti.gj("input", this.K8e)), (this.Rht.id = this.JD()), (this.t7e = !0);
            let l = Bv.get(this.Osi);
            this.TNs() && this.i7e() && (l = "text"),
                (this.Rht.type = l),
                "text" === l && this.Rht.setAttribute("spellcheck", "false"),
                this.TNs() && this.Rht.setAttribute("numeric", ""),
                this.Rht.setAttribute("autocomplete", "off"),
                (this.e7e = r),
                (this.s7e = h),
                (this.n7e = o),
                (this.r7e = this.see.h7e()),
                (this.o7e = !1),
                (this.a7e = a),
                (this.l7e = !1),
                (this.u7e = null),
                (this.RHs = null),
                (this.c7e = !1),
                (this.d7e = !0),
                (this.f7e = !1),
                (this.p7e = !1),
                (this.m7e = !1),
                (this.w7e = NaN),
                (this.g7e = !1),
                (this.y7e = NaN),
                (this.b7e = () => !0),
                (this.v7e = () => !0),
                (this.S7e = !0),
                (this.x7e = 6),
                (this.M7e = ""),
                (this.E7e = !1),
                (this.C7e = ""),
                (this._7e = (t) => this.T7e()),
                this.Rht.addEventListener("change", this._7e),
                (this.I7e = (t) => {
                    if (Fv.ti.uz.$4e()) return t.preventDefault(), void this.Rht.blur();
                    this.O8e(),
                        (this.d7e = !1),
                        this.see.P7e(() => {
                            this.Rht && this.H_();
                        });
                }),
                this.Rht.addEventListener("focus", this.I7e),
                (this.G7e = (t) => {
                    this.see.k8e(this),
                        (this.d7e = !0),
                        (this.f7e = !1),
                        this.A7e() && (this.see.Gee(this), (this.RHs = this.R7e()));
                }),
                this.Rht.addEventListener("blur", this.G7e),
                (this.k7e = -1),
                (this.O7e = () => {
                    if (this.Ewt) return;
                    const { value: t } = this.D7e();
                    t !== this.u7e &&
                        (this.p7e || (this.Lst(t), (this.p7e = !0)), (this.o7e = !0), this.T7e(t), (this.o7e = !1)),
                        (this.k7e = requestAnimationFrame(this.O7e));
                }),
                (this.F7e = () => {
                    this.d7e && ((this.f7e = !0), (this.d7e = !1)),
                        this.L7e() &&
                            -1 === this.k7e &&
                            ((this.p7e = !1),
                            (this.k7e = requestAnimationFrame(this.O7e)),
                            this.Rht.ownerDocument.addEventListener("pointerup", this.B7e),
                            this.Rht.ownerDocument.addEventListener("pointercancel", this.U7e));
                }),
                this.Rht.addEventListener("pointerdown", this.F7e),
                (this.qG = -1),
                (this.N7e = (t) => {
                    this.f7e &&
                        ((this.f7e = !1),
                        (this.qG = requestAnimationFrame(() => {
                            this.Rht && this.Rht.select(), (this.qG = -1);
                        })));
                }),
                this.Rht.addEventListener("pointerup", this.N7e),
                (this.j7e = (t) => {
                    (this.f7e = !0), (this.d7e = !1), cancelAnimationFrame(this.qG), (this.qG = -1);
                }),
                this.Rht.addEventListener("pointercancel", this.j7e),
                (this.B7e = null),
                (this.U7e = null),
                (this.$7e = !0),
                (this.z7e = (t) => {
                    t.preventDefault(), this.$7e && this.ogt(t.clientX, t.clientY);
                }),
                this.Rht.addEventListener("dragstart", this.z7e),
                (this.V7e = (t) => this.Uj(t)),
                this.Rht.addEventListener("keydown", this.V7e),
                (this.MR = null),
                (this.OR = null),
                (this.Ewt = !1),
                (this.KVi = 0),
                (this.XVi = 0),
                (this.W7e = 0),
                (this.H7e = 1),
                this.TNs() &&
                    ((this.MR = (t) => this.GR(t)),
                    (this.OR = (t) => this.CR(t)),
                    (this.B7e = (t) => {
                        -1 !== this.k7e && (cancelAnimationFrame(this.k7e), (this.k7e = -1)),
                            this.Rht.ownerDocument.removeEventListener("pointerup", this.B7e),
                            this.Rht.ownerDocument.removeEventListener("pointercancel", this.U7e);
                    }),
                    (this.U7e = (t) => {
                        (this.Ewt = !1),
                            Fv.ti.OF.kF(Lv),
                            (Lv = null),
                            cancelAnimationFrame(this.k7e),
                            (this.k7e = -1),
                            this.Rht.ownerDocument.removeEventListener("pointerup", this.B7e),
                            this.Rht.ownerDocument.removeEventListener("pointercancel", this.U7e),
                            this.Rht.ownerDocument.removeEventListener("pointermove", this.MR),
                            this.Rht.ownerDocument.removeEventListener("pointerup", this.OR);
                    })),
                this.e7e && ((this.u7e = this.R7e()), (this.RHs = this.u7e), this.K7e(this.u7e));
        }
        R7e() {
            return this.e7e ? (this.a7e ? this.see.q7e(this.e7e, this) : this.e7e(this)) : null;
        }
        X7e(t) {
            this.s7e && (this.a7e ? this.see.Y7e(this.s7e, t, this, this.u7e) : this.s7e(t, this, this.u7e));
        }
        Lst(t) {
            this.r7e && this.r7e(this.Zn(), t);
        }
        A7e() {
            let t;
            if (this.TNs() && Fv.Xl(this.RHs)) {
                let i, e, s, n;
                if (
                    ("integer" === this.Osi
                        ? ((t = parseInt(this.Rht.value)),
                          (i = this.g7e),
                          (e = this.m7e),
                          (s = this.w7e),
                          (n = this.y7e))
                        : "float" === this.Osi
                          ? ((t = parseFloat(this.Rht.value)),
                            (i = this.g7e),
                            (e = this.m7e),
                            (s = this.w7e),
                            (n = this.y7e))
                          : "percent" === this.Osi
                            ? ((t = parseFloat(this.Rht.value) / 100),
                              (i = !0),
                              (e = !0),
                              (s = Fv.Xl(this.w7e) ? this.w7e : 0),
                              (n = Fv.Xl(this.y7e) ? this.y7e : 1))
                            : "angle" === this.Osi || "custom-numeric" === this.Osi
                              ? ((t = parseFloat(this.Rht.value)),
                                (i = !0),
                                (e = !0),
                                (s = Fv.Xl(this.w7e) ? this.w7e : 0),
                                (n = Fv.Xl(this.y7e) ? this.y7e : 360))
                              : "custom-numeric" === this.Osi &&
                                ((t = parseFloat(this.Rht.value)),
                                (i = this.g7e),
                                (e = this.m7e),
                                (s = this.w7e),
                                (n = this.y7e)),
                    this.b7e() && i && t < s && this.RHs === s)
                )
                    return !1;
                if (this.v7e() && e && t > n && this.RHs === n) return !1;
                if (t === this.RHs) return !1;
            } else {
                if (Fv.YI(this.RHs)) return !1;
                if (this.Rht.value === this.RHs) return !1;
            }
            return !0;
        }
        K7e(t) {
            (this.c7e = !0), this.J7e(t), (this.c7e = !1);
        }
        CPt() {
            -1 !== this.k7e && cancelAnimationFrame(this.k7e),
                (this.O7e = null),
                (this.e7e = null),
                (this.s7e = null),
                (this.n7e = null),
                (this.r7e = null),
                (this.u7e = null),
                (this.RHs = null),
                this.TNs() &&
                    (this.Rht.ownerDocument.removeEventListener("pointermove", this.MR),
                    (this.MR = null),
                    this.Rht.ownerDocument.removeEventListener("pointerup", this.OR),
                    (this.OR = null),
                    this.Rht.ownerDocument.removeEventListener("pointerup", this.B7e),
                    (this.B7e = null),
                    this.Rht.ownerDocument.removeEventListener("pointercancel", this.U7e),
                    (this.U7e = null)),
                this.Rht.removeEventListener("keydown", this.V7e),
                (this.V7e = null),
                this.Rht.removeEventListener("dragstart", this.z7e),
                (this.z7e = null),
                this.Rht.removeEventListener("change", this._7e),
                (this._7e = null),
                this.Rht.removeEventListener("blur", this.G7e),
                (this.G7e = null),
                this.Rht.removeEventListener("focus", this.I7e),
                (this.I7e = null),
                this.Rht.removeEventListener("pointerdown", this.F7e),
                (this.F7e = null),
                this.Rht.removeEventListener("pointerup", this.N7e),
                (this.N7e = null),
                this.Rht.removeEventListener("pointercancel", this.j7e),
                (this.j7e = null),
                Fv.ti.Tz(this.Rht),
                (this.Rht = null),
                super.CPt();
        }
        coe() {
            return (this.l7e = !0), this;
        }
        Z7e() {
            return this.l7e;
        }
        TNs() {
            return (
                "integer" === this.Osi ||
                "float" === this.Osi ||
                "percent" === this.Osi ||
                "angle" === this.Osi ||
                "custom-numeric" === this.Osi
            );
        }
        L7e() {
            return "integer" === this.Osi || "float" === this.Osi;
        }
        $ne(t) {
            Fv.wi(t), (this.H7e = t);
        }
        Hhe(t) {
            return (this.$7e = !!t), this;
        }
        Jse(t) {
            if ((Fv.wi(t), !this.TNs())) throw new Error("cannot set minimum value on this property type");
            if (("integer" === this.Osi && (t = Math.floor(t)), this.g7e && t > this.y7e))
                throw new Error("cannot set a minimum value greater than the maximum value");
            return (this.m7e = !0), (this.w7e = t), this.Rht.setAttribute("min", t.toString()), this;
        }
        ire(t) {
            if ((Fv.wi(t), !this.TNs())) throw new Error("cannot set maximum value on this property type");
            if (("integer" === this.Osi && (t = Math.floor(t)), this.m7e && t < this.w7e))
                throw new Error("cannot set a maximum value less than the minimum value");
            return (this.g7e = !0), (this.y7e = t), this.Rht.setAttribute("max", t.toString()), this;
        }
        use(t, i) {
            if ((Fv.wi(t), Fv.wi(i), !this.TNs()))
                throw new Error("cannot set minimum/maximum value on this property type");
            if (i < t) throw new Error("cannot set a maximum value less than the minimum value");
            return (this.g7e = !1), this.Jse(t), (this.m7e = !1), this.ire(i), (this.m7e = !0), (this.g7e = !0), this;
        }
        hoe(t) {
            return Fv.yp(t), (this.b7e = t), this;
        }
        foe(t) {
            return Fv.yp(t), (this.v7e = t), this;
        }
        _oe(t, i) {
            if (t) {
                if ((Fv.wi(i), (i = Math.floor(i)) < 0 || i > 20)) throw new Error("invalid rounding digit count");
                if ("float" !== this.Osi) throw new Error("can only round 'float' input type");
                this.x7e = i;
            }
            (this.S7e = !!t), (this.u7e = null), this.xfe();
        }
        Q7e(t) {
            if ((Fv.wi(t), (t = Math.floor(t)), this.TNs()))
                throw new Error("cannot set a max length on this property type");
            return (
                t < 0 ? this.Rht.removeAttribute("maxlength") : this.Rht.setAttribute("maxlength", t.toString()), this
            );
        }
        Cte(t) {
            if ((Fv.vu(t), this.TNs())) throw new Error("cannot set a placeholder on this property type");
            return (this.M7e = t), this.E7e || this.Rht.setAttribute("placeholder", t), this;
        }
        t9e() {
            this.E7e &&
                (this.M7e ? this.Rht.setAttribute("placeholder", this.M7e) : this.Rht.removeAttribute("placeholder"),
                (this.E7e = !1));
        }
        i7e() {
            return this.t7e && Fv.fk.Bj && this.see.i9e();
        }
        sre(t) {
            if (((t = !!t), this.t7e === t)) return;
            this.t7e = t;
            let i = Bv.get(this.Osi);
            if ((this.TNs() && this.i7e() && (i = "text"), this.Rht.type !== i)) {
                let t = this.Rht.value;
                (this.Rht.type = i), (this.Rht.value = t);
            }
        }
        yfe(t) {
            return (
                Fv.vu(t),
                (this.C7e = t),
                this.e7e && ((this.u7e = this.R7e()), (this.RHs = this.u7e), this.K7e(this.u7e)),
                this
            );
        }
        J7e(t) {
            if (null === t)
                return (
                    (this.Rht.value = ""),
                    this.Rht.setAttribute("placeholder", self.lang("ui.bars.properties.multiple-placeholder")),
                    void (this.E7e = !0)
                );
            if ((this.t9e(), "integer" === this.Osi))
                Fv.PK(t),
                    (t = Math.floor(t)),
                    this.v7e() && this.g7e && t > this.y7e && (t = this.y7e),
                    this.b7e() && this.m7e && t < this.w7e && (t = this.w7e),
                    (this.Rht.value = t.toString());
            else if ("float" === this.Osi)
                Fv.PK(t),
                    this.v7e() && this.g7e && t > this.y7e && (t = this.y7e),
                    this.b7e() && this.m7e && t < this.w7e && (t = this.w7e),
                    this.S7e ? (this.Rht.value = Fv.toFixed(t, this.x7e)) : (this.Rht.value = t.toString());
            else if ("percent" === this.Osi)
                Fv.PK(t),
                    this.v7e() && this.g7e && t > this.y7e && (t = this.y7e),
                    this.b7e() && this.m7e && t < this.w7e && (t = this.w7e),
                    (t *= 100),
                    (this.Rht.value = Fv.toFixed(t, 2) + self.lang("ui.bars.properties.percent-suffix"));
            else if ("angle" === this.Osi)
                Fv.PK(t),
                    this.v7e() && this.g7e && t > this.y7e && (t = this.y7e),
                    this.b7e() && this.m7e && t < this.w7e && (t = this.w7e),
                    (t %= 360) < 0 && (t += 360),
                    (this.Rht.value = Fv.toFixed(t, 1) + self.lang("ui.bars.properties.angle-suffix"));
            else if ("custom-numeric" === this.Osi) {
                Fv.PK(t),
                    this.v7e() && this.g7e && t > this.y7e && (t = this.y7e),
                    this.b7e() && this.m7e && t < this.w7e && (t = this.w7e);
                const i = this.C7e ? this.C7e : "";
                this.S7e ? (this.Rht.value = Fv.toFixed(t, this.x7e) + i) : (this.Rht.value = t.toString() + i);
            } else Fv.vu(t), (this.Rht.value = t);
        }
        e9e(t) {
            if ((Fv.vu(t), this.Rht.value !== t && (!this.TNs() || t))) {
                if (this.TNs() && this.i7e()) {
                    let i = this.s9e(t);
                    return (
                        "number" == typeof i && isFinite(i) && this.J7e(i),
                        (this.o7e = !0),
                        this.T7e(),
                        void (this.o7e = !1)
                    );
                }
                if ("integer" === this.Osi) {
                    let i = parseInt(t, 10);
                    if (!isFinite(i)) return;
                    this.J7e(i);
                } else if ("float" === this.Osi || "angle" === this.Osi || "custom-numeric" === this.Osi) {
                    let i = parseFloat(t);
                    if (!isFinite(i)) return;
                    this.J7e(i);
                } else if ("percent" === this.Osi) {
                    let i = parseFloat(t);
                    if (!isFinite(i)) return;
                    (i /= 100), this.J7e(i);
                } else this.Rht.value = t;
                (this.o7e = !0), this.T7e(), (this.o7e = !1);
            }
        }
        D7e() {
            const t = this.Rht.value;
            let i = null,
                e = !1,
                s = !1;
            return (
                "integer" === this.Osi
                    ? ((i = parseInt(t, 10)), isFinite(i) ? (s = !0) : (i = NaN))
                    : "float" === this.Osi
                      ? ((i = parseFloat(t)), isFinite(i) ? (s = !0) : (i = NaN))
                      : "percent" === this.Osi
                        ? ((i = parseFloat(t)), isFinite(i) ? ((i /= 100), (s = !0)) : (i = NaN))
                        : "angle" === this.Osi
                          ? ((i = parseFloat(t)), isFinite(i) ? ((i %= 360), i < 0 && (i += 360), (s = !0)) : (i = NaN))
                          : "custom-numeric" === this.Osi
                            ? ((i = parseFloat(t)), isFinite(i) ? (s = !0) : (i = NaN))
                            : (i = t),
                s &&
                    (this.v7e() && this.g7e && i > this.y7e && ((i = this.y7e), (e = !0)),
                    this.b7e() && this.m7e && i < this.w7e && ((i = this.w7e), (e = !0))),
                { value: i, n9e: e }
            );
        }
        r9e() {
            return null === this.u7e
                ? ""
                : "percent" === this.Osi || "angle" === this.Osi || "custom-numeric" === this.Osi
                  ? this.Rht.value
                  : this.D7e().value.toString();
        }
        O8e() {
            this.Rht.select(), super.O8e();
        }
        fkt() {
            this.Rht && this.Rht.focus();
        }
        s9e(t) {
            let i = this.see.tYs();
            if ("percent" === this.Osi) {
                let i = self.lang("ui.bars.properties.percent-suffix");
                t.endsWith(i) && (t = t.substr(0, t.length - i.length));
            } else if ("angle" === this.Osi) {
                let i = self.lang("ui.bars.properties.angle-suffix");
                t.endsWith(i) && (t = t.substr(0, t.length - i.length));
            } else if ("custom-numeric" === this.Osi && this.C7e) {
                let i = this.C7e;
                t.endsWith(i) && (t = t.substr(0, t.length - i.length));
            }
            let e = i(t);
            return null === e
                ? NaN
                : ("integer" === this.Osi ? (e = Math.round(e)) : "percent" === this.Osi && (e /= 100), e);
        }
        T7e(t) {
            if (this.c7e || !this.s7e) return;
            const i = this.see;
            let e = !1,
                s = !1;
            if (void 0 === t)
                if (this.TNs() && this.i7e())
                    (t = this.s9e(this.Rht.value)),
                        isFinite(t) &&
                            ((e = !0),
                            this.b7e() && this.m7e && t < this.w7e && (t = this.w7e),
                            this.v7e() && this.g7e && t > this.y7e && (t = this.y7e));
                else {
                    const i = this.D7e();
                    (t = i.value), (s = i.n9e);
                }
            let n = !("number" == typeof t && isNaN(t));
            if (
                (n &&
                    (this.Ewt || this.o7e || this.p7e || this.Lst(t),
                    this.o7e || (this.p7e = !1),
                    this.X7e(t),
                    (this.u7e = t)),
                this.t9e(),
                this.e7e)
            ) {
                let t = this.R7e();
                const i = this.C7e || "percent" === this.Osi || "angle" === this.Osi;
                (!n || e || s || t !== this.u7e || i) && ((this.u7e = t), this.K7e(this.u7e));
            }
            n && (this.h9e(), i.See(this));
        }
        h9e() {
            this.GMt && this.GMt instanceof Fv.ti.Tj.o9e && this.GMt.a9e();
        }
        Ate() {
            return this.Rht;
        }
        ogt(t, i) {
            Fv.wi(t),
                Fv.wi(i),
                this.TNs() &&
                    (this.Ewt ||
                        (null !== this.u7e &&
                            ((this.Ewt = !0),
                            (this.KVi = t),
                            (this.XVi = i),
                            (this.W7e = 0),
                            (Lv = Fv.ti.OF.PF("ns-resize", this.Rht.ownerDocument, t, i)),
                            this.Lst(this.u7e),
                            this.Rht.ownerDocument.addEventListener("pointermove", this.MR),
                            this.Rht.ownerDocument.addEventListener("pointerup", this.OR))));
        }
        GR(t) {
            if (!t.isPrimary) return;
            if (!this.Ewt) return;
            t.preventDefault();
            let i = t.clientX,
                e = t.clientY,
                s = Fv.rE.kQ(t),
                n = t.shiftKey,
                r = this.XVi - e;
            if (
                ((r *= this.H7e),
                s ? (r *= 10) : n && (r /= 10),
                "integer" === this.Osi && ((this.W7e += r), (r = 0 | this.W7e), (this.W7e -= r)),
                "percent" === this.Osi ? (r /= 1e3) : "angle" === this.Osi && (r /= 5),
                0 !== r)
            ) {
                let t = this.u7e + r;
                this.b7e() && this.m7e && (this.u7e < this.w7e || t < this.w7e) && (t = this.w7e),
                    this.v7e() && this.g7e && (this.u7e > this.y7e || t > this.y7e) && (t = this.y7e),
                    this.K7e(t),
                    this.T7e(t),
                    (this.u7e = t);
            }
            this.Rht.select(), (this.KVi = i), (this.XVi = e);
        }
        CR(t) {
            t.isPrimary &&
                this.Ewt &&
                (t.preventDefault(),
                this.GR(t),
                (this.Ewt = !1),
                Fv.ti.OF.kF(Lv),
                (Lv = null),
                this.Rht.ownerDocument.removeEventListener("pointermove", this.MR),
                this.Rht.ownerDocument.removeEventListener("pointerup", this.OR));
        }
        Uj(t) {
            t.which === Fv.fO.o3 && (t.preventDefault(), this.Rht.blur(), this.see.l9e(this));
        }
        V8e() {
            this.n7e && !this.Ewt && (this.a7e ? this.qL(this.see.u9e(this.n7e)) : this.qL(this.n7e()));
        }
        Y8e(t) {
            (this.Rht.disabled = !t), (this.Rht.readOnly = !t);
        }
        xfe() {
            if (this.Ewt || !this.e7e) return;
            let t = this.R7e();
            t !== this.u7e && ((this.u7e = t), this.K7e(this.u7e), this.h9e());
        }
        *Tfe() {
            yield* super.Tfe(), yield this.Rht;
        }
        Mlt() {
            return this.Ewt;
        }
        EF() {
            this.Ewt && this.U7e && this.U7e();
        }
    };
}
{
    const Uv = self.t,
        Nv = /\\/g,
        jv = /\n/g,
        $v = /\t/g;
    function zv(t) {
        let i = t.replace(Nv, "\\\\");
        return (i = i.replace($v, "\\t")), i.replace(jv, "\\n");
    }
    function Vv(t) {
        let i = [];
        for (let e of t) i.push(e);
        let e = "";
        for (let t = 0, s = i.length; t < s; ++t) {
            let n = i[t];
            if ("\\" === n && t < s - 1) {
                let s = i[t + 1];
                switch (s) {
                    case "\\":
                        e += "\\";
                        break;
                    case "n":
                        e += "\n";
                        break;
                    case "t":
                        e += "\t";
                        break;
                    default:
                        e += "\\" + s;
                }
                ++t;
            } else e += n;
        }
        return e;
    }
    Uv.ti.Tj.N6s = class extends Uv.ti.Tj.W8e {
        constructor(t, i, e, s, n, r, h, o) {
            super(t, i, e, s),
                Uv.kDt(n),
                Uv.kDt(r),
                Uv.kDt(h),
                (this.c9e = Uv.ti.gj("div", this.K8e, null, "flexVstretch")),
                (this.Rht = Uv.ti.gj("input", this.c9e, null, "longTextProperty")),
                (this.Rht.type = "text"),
                (this.Rht.id = this.JD()),
                this.Rht.setAttribute("spellcheck", "false"),
                this.Rht.setAttribute("autocomplete", "off"),
                (this.A$i = Uv.ti.gj("button", this.c9e, null, "longTextProperty")),
                (this.A$i.textContent = self.lang("common.ellipsis")),
                (this.d9e = null),
                (this.e7e = n),
                (this.s7e = r),
                (this.n7e = h),
                (this.r7e = this.see.h7e()),
                (this.a7e = o),
                (this.u7e = null),
                (this.c7e = !1),
                (this.d7e = !0),
                (this.f7e = !1),
                (this.M7e = ""),
                (this.E7e = !1),
                (this.f9e = (t) => this.p9e()),
                this.A$i.addEventListener("click", this.f9e),
                (this.m9e = null),
                (this._7e = (t) => this.T7e()),
                this.Rht.addEventListener("change", this._7e),
                (this.I7e = (t) => {
                    this.O8e(),
                        (this.d7e = !1),
                        this.see.P7e(() => {
                            this.Rht && this.H_();
                        });
                }),
                this.Rht.addEventListener("focus", this.I7e),
                (this.G7e = (t) => {
                    this.see.k8e(this), (this.d7e = !0), (this.f7e = !1);
                }),
                this.Rht.addEventListener("blur", this.G7e),
                (this.F7e = (t) => {
                    this.d7e && ((this.f7e = !0), (this.d7e = !1));
                }),
                this.Rht.addEventListener("pointerdown", this.F7e),
                (this.N7e = (t) => {
                    this.f7e && (t.preventDefault(), (this.f7e = !1));
                }),
                this.Rht.addEventListener("pointerup", this.N7e),
                (this.j7e = (t) => {
                    (this.f7e = !1), (this.d7e = !1);
                }),
                this.Rht.addEventListener("pointercancel", this.j7e),
                (this.V7e = (t) => this.Uj(t)),
                this.Rht.addEventListener("keydown", this.V7e),
                this.Rht.addEventListener("dragstart", Uv.ti.uJt),
                this.e7e && ((this.u7e = this.R7e()), this.K7e(this.u7e));
        }
        R7e() {
            return this.e7e ? (this.a7e ? this.see.q7e(this.e7e, this) : this.e7e(this)) : null;
        }
        X7e(t) {
            this.s7e && (this.a7e ? this.see.Y7e(this.s7e, t, this) : this.s7e(t, this));
        }
        Lst() {
            this.r7e && this.r7e(this.Zn());
        }
        CPt() {
            this.w9e(),
                (this.e7e = null),
                (this.s7e = null),
                (this.n7e = null),
                (this.r7e = null),
                (this.u7e = null),
                this.Rht.removeEventListener("change", this._7e),
                (this._7e = null),
                this.Rht.removeEventListener("blur", this.G7e),
                (this.G7e = null),
                this.Rht.removeEventListener("focus", this.I7e),
                (this.I7e = null),
                this.Rht.removeEventListener("pointerdown", this.F7e),
                (this.F7e = null),
                this.Rht.removeEventListener("pointerup", this.N7e),
                (this.N7e = null),
                this.Rht.removeEventListener("pointercancel", this.j7e),
                (this.j7e = null),
                this.Rht.removeEventListener("keydown", this.V7e),
                (this.V7e = null),
                this.Rht.removeEventListener("dragstart", Uv.ti.uJt),
                Uv.ti.Tz(this.Rht),
                (this.Rht = null),
                this.A$i.removeEventListener("click", this.f9e),
                (this.f9e = null),
                (this.m9e = null),
                Uv.ti.Tz(this.A$i),
                (this.A$i = null),
                Uv.ti.Tz(this.c9e),
                (this.c9e = null),
                super.CPt();
        }
        w9e() {
            this.Rht.removeAttribute("list"), Uv.ti.Tz(this.d9e), (this.d9e = null);
        }
        Qre(t) {
            Uv.yp(t), (this.m9e = t);
        }
        Zre(t) {
            Uv.vu(t), (this.A$i.textContent = t);
        }
        Q7e(t) {
            return (
                Uv.wi(t),
                (t = Math.floor(t)) < 0
                    ? this.Rht.removeAttribute("maxlength")
                    : this.Rht.setAttribute("maxlength", t.toString()),
                this
            );
        }
        Cte(t) {
            return Uv.vu(t), (this.M7e = t), this.E7e || this.Rht.setAttribute("placeholder", t), this;
        }
        t9e() {
            this.E7e &&
                (this.M7e ? this.Rht.setAttribute("placeholder", this.M7e) : this.Rht.removeAttribute("placeholder"),
                (this.E7e = !1));
        }
        qoe(t) {
            if (this.gi()) return;
            this.w9e();
            const i = "list" + Math.floor(1e6 * Math.random());
            (this.d9e = document.createElement("datalist")), (this.d9e.id = i);
            for (const i of t) {
                const t = document.createElement("option");
                (t.value = i), this.d9e.appendChild(t);
            }
            this.Rht.parentElement.insertBefore(this.d9e, this.Rht), this.Rht.setAttribute("list", i);
        }
        O8e() {
            this.Rht.select(), super.O8e();
        }
        fkt() {
            this.Rht && this.Rht.focus();
        }
        K7e(t) {
            (this.c7e = !0), this.J7e(t), (this.c7e = !1);
        }
        J7e(t) {
            if (null === t)
                return (
                    (this.Rht.value = ""),
                    this.Rht.setAttribute("placeholder", self.lang("ui.bars.properties.multiple-placeholder")),
                    void (this.E7e = !0)
                );
            this.t9e(), (this.Rht.value = zv(t));
        }
        D7e() {
            return Vv(this.Rht.value);
        }
        T7e() {
            if (this.c7e || !this.s7e) return;
            this.Lst();
            let t = this.D7e();
            if ((this.X7e(t), (this.u7e = t), this.e7e)) {
                let t = this.R7e();
                (t === this.u7e && zv(t) === this.Rht.value) || ((this.u7e = t), this.K7e(this.u7e));
            }
            this.see.See(this);
        }
        p9e() {
            if ((this.O8e(), this.m9e)) {
                let t = this.m9e(this);
                return void (
                    t.then &&
                    t.then((t) => {
                        "string" == typeof t && this.Rht && (this.J7e(t), this.T7e());
                    })
                );
            }
            let t = Uv.ti.Ze.Ke("LongTextPropertyDialog");
            t.hr(this.Gqt),
                t.pr(this.D7e()).then((t) => {
                    null !== t && this.Rht && (t || null !== this.u7e) && (this.J7e(t), this.T7e());
                });
        }
        Uj(t) {
            t.which === Uv.fO.o3 && (t.preventDefault(), this.Rht.blur(), this.see.l9e(this));
        }
        Ate() {
            return this.Rht;
        }
        V8e() {
            this.n7e && (this.a7e ? this.qL(this.see.u9e(this.n7e)) : this.qL(this.n7e()));
        }
        Y8e(t) {
            (this.Rht.disabled = !t), (this.Rht.readOnly = !t), (this.A$i.disabled = !t);
        }
        xfe() {
            if (!this.e7e) return;
            let t = this.R7e();
            t !== this.u7e && ((this.u7e = t), this.K7e(this.u7e));
        }
        *Tfe() {
            yield* super.Tfe(), yield this.Rht;
        }
        static D6s(t) {
            return Uv.vu(t), zv(t);
        }
        static R6s(t) {
            return Uv.vu(t), Vv(t);
        }
    };
}
{
    const Wv = self.t,
        Hv = "__multiple__";
    Wv.ti.Tj.g9e = class extends Wv.ti.Tj.W8e {
        constructor(t, i, e, s, n, r, h, o) {
            super(t, i, e, s),
                Wv.kDt(n),
                Wv.kDt(r),
                Wv.kDt(h),
                (this.kge = Wv.ti.gj("select", this.K8e)),
                (this.kge.id = this.JD()),
                (this.e7e = n),
                (this.s7e = r),
                (this.n7e = h),
                (this.r7e = this.see.h7e()),
                (this.a7e = o),
                (this.y9e = !1),
                (this.b9e = null),
                (this.c7e = !1),
                (this.u7e = null),
                this.e7e && ((this.u7e = this.R7e()), null === this.u7e && this.v9e()),
                (this._7e = (t) => this.T7e()),
                this.kge.addEventListener("change", this._7e),
                (this.I7e = (t) => this.O8e()),
                this.kge.addEventListener("focus", this.I7e),
                (this.G7e = (t) => this.see.k8e(this)),
                this.kge.addEventListener("blur", this.G7e),
                (this.S9e = null);
        }
        CPt() {
            (this.e7e = null),
                (this.s7e = null),
                (this.n7e = null),
                (this.r7e = null),
                this.kge.removeEventListener("change", this._7e),
                (this._7e = null),
                this.kge.removeEventListener("focus", this.I7e),
                (this.I7e = null),
                this.kge.removeEventListener("blur", this.G7e),
                (this.G7e = null),
                Wv.ti.Tz(this.kge),
                (this.kge = null),
                this.S9e && (this.S9e.clear(), (this.S9e = null)),
                super.CPt();
        }
        R7e() {
            return this.e7e ? (this.a7e ? this.see.q7e(this.e7e, this) : this.e7e(this)) : null;
        }
        X7e(t) {
            this.s7e && (this.a7e ? this.see.Y7e(this.s7e, t, this) : this.s7e(t, this));
        }
        Lst(t) {
            this.r7e && this.r7e(this.Zn(), t);
        }
        x9e(t) {
            (this.c7e = !0), null === t ? this.v9e() : (this.kge.value = t), (this.c7e = !1);
        }
        v9e() {
            this.y9e || (this.xO(self.lang("ui.bars.properties.multiple-placeholder"), Hv), (this.y9e = !0)),
                (this.kge.value = Hv);
        }
        M9e() {
            this.b9e && (Wv.ti.Tz(this.b9e), (this.y9e = !1));
        }
        T7e() {
            !this.c7e &&
                this.s7e &&
                this.kge.value !== Hv &&
                (this.Lst(this.kge.value),
                this.X7e(this.kge.value),
                this.e7e &&
                    ((this.u7e = this.R7e()),
                    null !== this.u7e && this.M9e(),
                    this.kge.value !== this.u7e && this.x9e(this.u7e)),
                this.see.See(this));
        }
        Kle() {
            return this.kge;
        }
        xO(t, i, e = !1, s = "") {
            let n;
            if ((Wv.vu(t), Wv.k$(i), Wv.k$(s), (e = !!e), null == i && (i = t), s)) {
                const t = this.S9e.get(s);
                if (!t) throw new Error("missing options group");
                n = t;
            } else n = this.kge;
            let r = Wv.ti.gj("option", n);
            return (
                (r.text = t),
                (r.value = i),
                e && r.setAttribute("hidden", ""),
                i === this.u7e && (r.selected = !0),
                i === Hv && (this.b9e = r),
                this
            );
        }
        Goe(t, i) {
            Wv.vu(t), Wv.vu(i);
            const e = Wv.ti.gj("optgroup", this.kge);
            return e.setAttribute("label", i), this.S9e || (this.S9e = new Map()), this.S9e.set(t, e), this;
        }
        fkt() {
            this.kge && this.kge.focus();
        }
        V8e() {
            this.n7e && (this.a7e ? this.qL(this.see.u9e(this.n7e)) : this.qL(this.n7e()));
        }
        Y8e(t) {
            this.kge.disabled = !t;
        }
        xfe() {
            if (!this.e7e) return;
            let t = this.R7e();
            t !== this.u7e && ((this.u7e = t), this.x9e(this.u7e));
        }
        *Tfe() {
            yield* super.Tfe(), yield this.kge;
        }
    };
}
{
    const Kv = self.t;
    let qv = function (t) {
        t.preventDefault();
        let i = this.getAttribute("for"),
            e = this.ownerDocument.getElementById(i);
        e && e.focus();
    };
    Kv.ti.Tj.E9e = class extends Kv.ti.Tj.W8e {
        constructor(t, i, e, s, n, r, h, o) {
            if (
                (super(t, i, e, s),
                Kv.kDt(n),
                Kv.kDt(r),
                Kv.kDt(h),
                (this.c9e = Kv.ti.gj("div", this.K8e, null, "flexVstretch")),
                (this.C9e = Kv.ti.gj("input", this.c9e, null, "colorProperty")),
                (this.C9e.type = "color"),
                (this.C9e.id = this.JD()),
                (this._9e = Kv.ti.gj("input", this.c9e, null, "colorProperty")),
                (this._9e.type = "text"),
                this._9e.setAttribute("spellcheck", "false"),
                (this.e7e = n),
                (this.s7e = r),
                (this.n7e = h),
                (this.r7e = this.see.h7e()),
                (this.a7e = o),
                (this.c7e = !1),
                (this.T9e = Kv.m(Kv.nr, 0, 0, 0, 1)),
                (this.I9e = !1),
                (this.u7e = Kv.m(Kv.nr, 0, 0, 0, 1)),
                (this.RHs = null),
                this.e7e)
            ) {
                let t = this.R7e();
                null === t
                    ? ((this.I9e = !0), (this.u7e = null))
                    : t instanceof Kv.nr && (this.T9e.set(t), this.u7e.set(t));
            }
            (this.C9e.value = this.T9e.fW()),
                this.I9e
                    ? ((this._9e.value = ""),
                      this._9e.setAttribute("placeholder", self.lang("ui.bars.properties.multiple-placeholder")))
                    : (this._9e.value = this.T9e.iFe()),
                this.KCe.addEventListener("click", qv),
                (this.P9e = (t) => this.jDi()),
                this.C9e.addEventListener("change", this.P9e),
                (this.G9e = (t) => this.O8e()),
                this.C9e.addEventListener("focus", this.G9e),
                (this.A9e = (t) => this.R9e()),
                this.C9e.addEventListener("blur", this.A9e),
                (this.k9e = (t) => this.O9e()),
                this._9e.addEventListener("change", this.k9e),
                (this.D9e = (t) => {
                    if (Kv.ti.uz.$4e()) return t.preventDefault(), void this._9e.blur();
                    this.O8e();
                }),
                this._9e.addEventListener("focus", this.D9e),
                (this.F9e = (t) => this.see.k8e(this)),
                this._9e.addEventListener("blur", this.F9e),
                (this.L9e = (t) => this.Uj(t)),
                this._9e.addEventListener("keydown", this.L9e),
                this._9e.addEventListener("dragstart", Kv.ti.uJt);
        }
        CPt() {
            this.KCe.removeEventListener("click", qv),
                (this.e7e = null),
                (this.s7e = null),
                (this.n7e = null),
                (this.r7e = null),
                this.C9e.removeEventListener("change", this.P9e),
                (this.P9e = null),
                this.C9e.removeEventListener("focus", this.G9e),
                (this.G9e = null),
                this.C9e.removeEventListener("blur", this.A9e),
                (this.A9e = null),
                Kv.ti.Tz(this.C9e),
                (this.C9e = null),
                this._9e.removeEventListener("change", this.k9e),
                (this.k9e = null),
                this._9e.removeEventListener("focus", this.D9e),
                (this.D9e = null),
                this._9e.removeEventListener("blur", this.F9e),
                (this.F9e = null),
                this._9e.removeEventListener("keydown", this.L9e),
                (this.L9e = null),
                this._9e.removeEventListener("dragstart", Kv.ti.uJt),
                Kv.ti.Tz(this._9e),
                (this._9e = null),
                Kv.ti.Tz(this.c9e),
                (this.c9e = null),
                super.CPt();
        }
        X7e() {
            if (!this.s7e) return;
            let t = Kv.m(Kv.nr, this.T9e),
                i = Kv.m(Kv.nr, this.u7e);
            this.a7e ? this.see.Y7e(this.s7e, t, this, i) : this.s7e(t, this, i), this.see.See(this);
        }
        R7e() {
            if (!this.e7e) return null;
            if (this.a7e) {
                const t = this.see.q7e(this.e7e, this);
                return t && !this.RHs && ((this.RHs = Kv.m(Kv.nr, 0, 0, 0, 1)), this.RHs.set(t)), t;
            }
            {
                const t = this.e7e(this);
                return t && !this.RHs && ((this.RHs = Kv.m(Kv.nr, 0, 0, 0, 1)), this.RHs.set(t)), t;
            }
        }
        Lst() {
            this.r7e && this.r7e(this.Zn());
        }
        R9e() {
            this.jDi(!1), this.see.k8e(this);
        }
        jDi(t = !0) {
            if (this.c7e || !this.s7e) return;
            if (!t && this.I9e) return;
            const i = this.C9e.value,
                e = this.RHs && this.RHs.fW();
            this.T9e.uW(this.C9e.value),
                (this.c7e = !0),
                (this._9e.value = this.T9e.iFe()),
                (this.c7e = !1),
                (this.RHs = null),
                this.B9e(),
                e && e !== i && this.see.Gee(this),
                t && this.C9e.focus();
        }
        O9e() {
            if (!this.c7e && this.s7e) {
                if (!this.T9e.bS(this._9e.value))
                    return (
                        (this.c7e = !0),
                        this.I9e
                            ? ((this._9e.value = ""),
                              this._9e.setAttribute(
                                  "placeholder",
                                  self.lang("ui.bars.properties.multiple-placeholder")
                              ))
                            : ((this._9e.value = this.T9e.iFe()), this._9e.removeAttribute("placeholder")),
                        void (this.c7e = !1)
                    );
                (this.c7e = !0),
                    (this.C9e.value = this.T9e.fW()),
                    (this._9e.value = this.T9e.iFe()),
                    (this.c7e = !1),
                    this.B9e();
            }
        }
        B9e() {
            if (
                (this.u7e && this.T9e && !this.u7e.Xae(this.T9e) && this.Lst(),
                this.X7e(),
                this.u7e.set(this.T9e),
                (this.I9e = !1),
                this._9e.removeAttribute("placeholder"),
                this.e7e)
            ) {
                let t = this.R7e();
                null === t
                    ? ((this.I9e = !0),
                      this.T9e.ih(0, 0, 0),
                      this.u7e.ih(0, 0, 0),
                      (this.c7e = !0),
                      (this.C9e.value = this.T9e.fW()),
                      (this._9e.value = ""),
                      this._9e.setAttribute("placeholder", self.lang("ui.bars.properties.multiple-placeholder")),
                      (this.c7e = !1))
                    : this.T9e.Xae(t) ||
                      ((this.I9e = !1),
                      (this.c7e = !0),
                      this.T9e.ih(t.r, t.g, t.b),
                      this.u7e.ih(t.r, t.g, t.b),
                      (this.C9e.value = this.T9e.fW()),
                      (this._9e.value = this.T9e.iFe()),
                      (this.c7e = !1));
            }
        }
        Uj(t) {
            t.which === Kv.fO.o3 && (t.preventDefault(), this._9e.blur(), this.see.l9e(this));
        }
        fkt() {
            this.C9e && this.C9e.focus();
        }
        U9e() {
            return this.C9e;
        }
        V8e() {
            this.n7e && (this.a7e ? this.qL(this.see.u9e(this.n7e)) : this.qL(this.n7e()));
        }
        Y8e(t) {
            (this.C9e.disabled = !t), (this._9e.disabled = !t), (this._9e.readOnly = !t);
        }
        xfe() {
            if (!this.e7e) return;
            let t = this.R7e();
            (this.I9e && null === t) ||
                (!this.I9e && null !== t && t.Xae(this.T9e)) ||
                ((this.I9e = null === t),
                this.I9e
                    ? (this.T9e.ih(0, 0, 0),
                      this.u7e && this.u7e.ih(0, 0, 0),
                      (this.C9e.value = this.T9e.fW()),
                      (this._9e.value = ""),
                      this._9e.setAttribute("placeholder", self.lang("ui.bars.properties.multiple-placeholder")))
                    : (this.T9e.ih(t.r, t.g, t.b),
                      this.u7e || (this.u7e = Kv.m(Kv.nr, 0, 0, 0, 1)),
                      this.u7e.ih(t.r, t.g, t.b),
                      (this.C9e.value = this.T9e.fW()),
                      (this._9e.value = this.T9e.iFe()),
                      this._9e.removeAttribute("placeholder")));
        }
        *Tfe() {
            yield* super.Tfe(), yield this.C9e, yield this._9e;
        }
    };
}
{
    const Xv = self.t;
    function Yv(t) {
        t.preventDefault();
        let i = this.getAttribute("for"),
            e = this.ownerDocument.getElementById(i);
        e && e.focus();
    }
    Xv.ti.Tj.N9e = class extends Xv.ti.Tj.W8e {
        constructor(t, i, e, s, n, r, h, o) {
            super(t, i, e, s),
                Xv.kDt(n),
                Xv.kDt(r),
                Xv.kDt(h),
                (this.j9e = Xv.ti.gj("div", this.K8e, null, "checkpropertywrap")),
                (this.DQe = Xv.ti.gj("input", this.j9e)),
                (this.DQe.type = "checkbox"),
                (this.DQe.id = this.JD()),
                this.KCe.addEventListener("click", Yv),
                (this.e7e = n),
                (this.s7e = r),
                (this.n7e = h),
                (this.r7e = this.see.h7e()),
                (this.u7e = null),
                (this.a7e = o),
                (this.c7e = !1),
                this.e7e && ((this.u7e = this.R7e()), this.$9e(this.u7e)),
                (this._7e = (t) => this.T7e()),
                this.DQe.addEventListener("change", this._7e),
                (this.I7e = (t) => this.O8e()),
                this.DQe.addEventListener("focus", this.I7e),
                (this.G7e = (t) => this.see.k8e(this)),
                this.DQe.addEventListener("blur", this.G7e),
                (this.z9e = !1),
                (this.Qq = (t) => {
                    t.button === Xv.sQ.z0 &&
                        t.isPrimary &&
                        t.target === this.j9e &&
                        ("mouse" !== !t.pointerType && t.preventDefault(), (this.z9e = !0), this.DQe.focus());
                }),
                this.j9e.addEventListener("pointerdown", this.Qq),
                (this._6 = (t) => {
                    t.target === this.j9e && this.z9e && (t.preventDefault(), this.DQe.click()), (this.z9e = !1);
                }),
                this.j9e.addEventListener("UITap", this._6);
        }
        CPt() {
            this.KCe.removeEventListener("click", Yv),
                (this.e7e = null),
                (this.s7e = null),
                (this.n7e = null),
                (this.r7e = null),
                (this.u7e = null),
                this.DQe.removeEventListener("change", this._7e),
                (this._7e = null),
                this.DQe.removeEventListener("focus", this.I7e),
                (this.I7e = null),
                this.DQe.removeEventListener("blur", this.G7e),
                (this.G7e = null),
                this.j9e.removeEventListener("pointerdown", this.Qq),
                (this.Qq = null),
                this.j9e.removeEventListener("UITap", this._6),
                (this._6 = null),
                Xv.ti.Tz(this.DQe),
                (this.DQe = null),
                Xv.ti.Tz(this.j9e),
                (this.j9e = null),
                super.CPt();
        }
        R7e() {
            return this.e7e ? (this.a7e ? this.see.q7e(this.e7e, this) : this.e7e(this)) : null;
        }
        X7e(t) {
            this.s7e && ((t = !!t), this.a7e ? this.see.Y7e(this.s7e, t, this) : this.s7e(t, this));
        }
        Lst() {
            this.r7e && this.r7e(this.Zn(), !!this.DQe.checked);
        }
        $9e(t) {
            (this.c7e = !0),
                null === t ? (this.DQe.indeterminate = !0) : ((this.DQe.indeterminate = !1), (this.DQe.checked = !!t)),
                (this.c7e = !1);
        }
        T7e() {
            !this.c7e &&
                this.s7e &&
                (this.Lst(),
                this.X7e(!!this.DQe.checked),
                this.e7e && ((this.u7e = this.R7e()), !!this.DQe.checked !== this.u7e && this.$9e(this.u7e)),
                this.see.See(this));
        }
        fkt() {
            this.DQe && this.DQe.focus();
        }
        Ule() {
            return this.DQe;
        }
        V8e() {
            this.n7e && (this.a7e ? this.qL(this.see.u9e(this.n7e)) : this.qL(this.n7e()));
        }
        Y8e(t) {
            this.DQe.disabled = !t;
        }
        xfe() {
            if (!this.e7e) return;
            let t = this.R7e();
            t !== this.u7e && ((this.u7e = t), this.$9e(this.u7e));
        }
        *Tfe() {
            yield* super.Tfe(), yield this.K8e;
        }
    };
}
{
    const Jv = self.t;
    Jv.ti.Tj.V9e = class extends Jv.ti.Tj.W8e {
        constructor(t, i, e, s, n, r, h) {
            super(t, i, e, s),
                Jv.kDt(n),
                (this.W9e = Jv.ti.gj("span", this.K8e, null, "infoProperty")),
                this.W9e.setAttribute("tabindex", "-1"),
                (this.H9e = n),
                (this.u7e = null),
                (this.n7e = r),
                (this.a7e = h),
                this.xfe(),
                this.qL(!1);
        }
        R7e() {
            return this.H9e ? (this.a7e ? this.see.q7e(this.H9e, this) : this.H9e(this)) : null;
        }
        xfe() {
            if (!this.H9e) return;
            let t = this.R7e();
            null === t ? (t = self.lang("ui.bars.properties.multiple-placeholder")) : Jv.Kke(t) || (t = t.toString()),
                Jv.YBe(this.u7e, t) || ((this.u7e = t), Jv.hrt(this.W9e, this.u7e));
        }
        fkt() {
            this.W9e && this.W9e.focus();
        }
        CPt() {
            Jv.ti.Tz(this.W9e), (this.W9e = null), (this.H9e = null), (this.n7e = null), (this.u7e = null), super.CPt();
        }
        K9e() {
            return this.W9e;
        }
        V8e() {
            this.n7e && (this.a7e ? this.qL(this.see.u9e(this.n7e)) : this.qL(this.n7e()));
        }
    };
}
{
    const Zv = self.t;
    Zv.ti.Tj.q9e = class extends Zv.ti.Tj.W8e {
        constructor(t, i, e, s, n, r, h, o) {
            super(t, i, e, s),
                Zv.kDt(n),
                Zv.kDt(r),
                Zv.kDt(h),
                (this.c9e = Zv.ti.gj("div", this.K8e, null, "flexVstretch")),
                (this.X9e = Zv.ti.gj("div", this.c9e, null, "iconPropertyWrap")),
                (this.X9e.id = this.JD()),
                (this.iut = Zv.m(Zv.ti.met, self.app.Ent(), this.X9e)),
                (this.Y9e = Zv.ti.gj("div", this.X9e, null, "iconPropertyLabel")),
                (this.A$i = Zv.ti.gj("button", this.c9e, null, "iconProperty")),
                (this.A$i.textContent = self.lang("common.ellipsis")),
                (this.e7e = n),
                (this.s7e = r),
                (this.n7e = h),
                (this.r7e = this.see.h7e()),
                (this.a7e = o),
                (this.u7e = null),
                (this.f9e = (t) => this.p9e()),
                this.A$i.addEventListener("click", this.f9e),
                (this.J9e = null),
                (this.Z9e = null);
        }
        CPt() {
            (this.e7e = null),
                (this.s7e = null),
                (this.n7e = null),
                (this.r7e = null),
                (this.u7e = null),
                this.iut.Ut(),
                (this.iut = null),
                Zv.ti.Tz(this.Y9e),
                (this.Y9e = null),
                Zv.ti.Tz(this.X9e),
                (this.X9e = null),
                this.A$i.removeEventListener("click", this.f9e),
                (this.f9e = null),
                (this.J9e = null),
                (this.Z9e = null),
                Zv.ti.Tz(this.A$i),
                (this.A$i = null),
                Zv.ti.Tz(this.c9e),
                (this.c9e = null),
                super.CPt();
        }
        R7e() {
            return this.e7e ? (this.a7e ? this.see.q7e(this.e7e, this) : this.e7e(this)) : null;
        }
        X7e(t) {
            this.s7e && (this.a7e ? this.see.Y7e(this.s7e, t, this) : this.s7e(t, this));
        }
        Lst() {
            this.r7e && this.r7e(this.Zn());
        }
        wDs(t) {
            if (null === t)
                this.iut.zD(null), (this.Y9e.textContent = self.lang("ui.bars.properties.multiple-placeholder"));
            else {
                if (!this.Z9e) throw new Error("no display info function");
                const i = this.Z9e(t);
                null === i
                    ? (this.iut.zD(null), (this.Y9e.textContent = ""))
                    : (this.iut.zD(i.icon), (this.Y9e.textContent = i.text));
            }
        }
        fkt() {
            this.A$i && this.A$i.focus();
        }
        Qre(t) {
            Zv.yp(t), (this.J9e = t);
        }
        Zre(t) {
            Zv.vu(t), (this.A$i.textContent = t);
        }
        async p9e() {
            if (!this.J9e) throw new Error("no button click handler");
            const t = await this.J9e(this.u7e);
            this.A$i && null !== t && t !== this.u7e && (this.X7e(t), (this.u7e = t), this.wDs(t), this.see.See(this));
        }
        bae(t) {
            Zv.yp(t), (this.Z9e = t), this.e7e && ((this.u7e = this.R7e()), this.wDs(this.u7e));
        }
        V8e() {
            this.n7e && (this.a7e ? this.qL(this.see.u9e(this.n7e)) : this.qL(this.n7e()));
        }
        Y8e(t) {
            this.A$i.disabled = !t;
        }
        xfe() {
            if (!this.e7e) return;
            const t = this.R7e();
            t !== this.u7e && ((this.u7e = t), this.wDs(this.u7e));
        }
        *Tfe() {
            yield* super.Tfe(), yield this.X9e;
        }
    };
}
{
    const Qv = self.t;
    Qv.ti.Tj.Q9e = class extends Qv.ti.Tj.W8e {
        constructor(t, i, e, s, n, r) {
            if (
                (super(t, i, e, s),
                Qv.vu(n),
                (this.ttn = Qv.ti.gj("a", this.K8e)),
                this.ttn.setAttribute("tabindex", -1),
                this.qte() && this.ttn.setAttribute("title", this.qte()),
                (this.O5s = null),
                "string" == typeof r)
            )
                (this.ttn.href = r),
                    (this.O5s = (t) => {
                        t.preventDefault(), self.app.SN(r, "PropertiesBar-LinkProperty");
                    });
            else {
                if ("function" != typeof r) throw new TypeError("expected string or function");
                this.O5s = r;
            }
            this.ttn.addEventListener("click", this.O5s),
                (this.ttn.textContent = n),
                (this.I7e = (t) => this.O8e()),
                this.ttn.addEventListener("focus", this.I7e),
                (this.G7e = (t) => this.see.k8e(this)),
                this.ttn.addEventListener("blur", this.G7e);
        }
        CPt() {
            this.ttn.removeEventListener("focus", this.I7e),
                (this.I7e = null),
                this.ttn.removeEventListener("blur", this.G7e),
                (this.G7e = null),
                this.O5s && (this.ttn.removeEventListener("click", this.O5s), (this.O5s = null)),
                Qv.ti.Tz(this.ttn),
                (this.ttn = null),
                super.CPt();
        }
        fkt() {
            this.ttn && this.ttn.focus();
        }
        Ble() {
            return this.ttn;
        }
        itn(t) {
            if ((Qv.vu(t), this.O5s)) throw new Error("not an external link");
            this.ttn.href = t;
        }
        etn(t) {
            Qv.vu(t), (this.ttn.textContent = t);
        }
    };
}
{
    const tS = self.t;
    tS.ti.Tj.stn = class extends tS.ti.Tj.Hfe {
        constructor(t, i, e, s) {
            super(t, i, e, s),
                (this.cEt = tS.ti.gj("td", this.mht)),
                this.cEt.setAttribute("colspan", "2"),
                this.cEt.setAttribute("tabindex", "-1"),
                this.cEt.setAttribute("propgroup", ""),
                this.cEt.setAttribute("role", "heading"),
                (this.Qbt = tS.ti.gj("div", this.cEt, null, "propgroup-wrap"));
            let n = this.F8e();
            n > 0 && this.Qbt.setAttribute("level" + n, ""),
                (this.KCe = tS.ti.gj("label", this.Qbt, null, "propgroup-label")),
                (this.KCe.textContent = i),
                (this.ntn = tS.m(tS.ti.met, self.app.ht("expanded"), this.Qbt)),
                (this.Mai = !0),
                (this.rtn = []),
                (this.htn = (t) => this.O8e()),
                this.cEt.addEventListener("focus", this.htn),
                (this.otn = (t) => this.see.k8e(this)),
                this.cEt.addEventListener("blur", this.otn),
                (this.atn = (t) => this.xbt(!0)),
                this.KCe.addEventListener("UIDoubleTap", this.atn),
                this.ntn.FO().addEventListener("pointerdown", this.atn),
                this.mht.classList.add("propertyGroup");
        }
        CPt() {
            this.ntn.FO().removeEventListener("pointerdown", this.atn),
                this.ntn.Ut(),
                (this.ntn = null),
                this.KCe.removeEventListener("UIDoubleTap", this.atn),
                (this.atn = null),
                tS.ti.Tz(this.KCe),
                (this.KCe = null),
                tS.ti.Tz(this.Qbt),
                (this.Qbt = null),
                this.cEt.removeEventListener("blur", this.otn),
                (this.otn = null),
                this.cEt.removeEventListener("focus", this.htn),
                (this.htn = null),
                tS.ti.Tz(this.cEt),
                (this.cEt = null),
                super.CPt();
        }
        fkt() {
            this.cEt && this.cEt.focus();
        }
        q8e() {
            return this.cEt;
        }
        Moe() {
            return this.KCe;
        }
        ltn() {
            if (this.rtn.length <= 2) {
                for (let t of this.rtn) if (t instanceof tS.ti.Tj.stn) return !0;
                return !1;
            }
            return !0;
        }
        h_() {
            return this.Mai;
        }
        SO(t, i) {
            (t = !!t),
                (i = !!i),
                this.Mai !== t &&
                    (this.see.U8e() ||
                        (this.ltn() || (i = !1),
                        (this.Mai = t),
                        this.ntn.zD(self.app.ht(this.Mai ? "expanded" : "collapsed")),
                        this.utn(i)));
        }
        xbt(t) {
            (t = !!t), this.SO(!this.h_(), t);
        }
        B8e(t, i) {
            (t = !!t), (i = !!i), super.B8e(t, i), this.utn(i);
        }
        utn(t) {
            let i = this.Mai && this.obt();
            for (let e of this.rtn) e.B8e(i, t);
        }
        Mte(t, i, e, s, n, r, h) {
            let o = tS.m(tS.ti.Tj.Q8e, this.see, t, i, e, this, s, n, r, !!h);
            return o.B8e(this.Mai && this.obt()), this.see.eBs.push(o), this.rtn.push(o), o;
        }
        Hte(t, i, e, s, n, r) {
            let h = tS.m(tS.ti.Tj.N6s, this.see, t, i, this, e, s, n, !!r);
            return h.B8e(this.Mai && this.obt()), this.see.eBs.push(h), this.rtn.push(h), h;
        }
        nse(t, i, e, s, n, r) {
            let h = tS.m(tS.ti.Tj.g9e, this.see, t, i, this, e, s, n, !!r);
            return h.B8e(this.Mai && this.obt()), this.see.eBs.push(h), this.rtn.push(h), h;
        }
        Jte(t, i, e, s, n, r) {
            let h = tS.m(tS.ti.Tj.E9e, this.see, t, i, this, e, s, n, !!r);
            return h.B8e(this.Mai && this.obt()), this.see.eBs.push(h), this.rtn.push(h), h;
        }
        _te(t, i, e, s, n, r) {
            let h = tS.m(tS.ti.Tj.N9e, this.see, t, i, this, e, s, n, !!r);
            return h.B8e(this.Mai && this.obt()), this.see.eBs.push(h), this.rtn.push(h), h;
        }
        yse(t, i, e, s, n) {
            let r = tS.m(tS.ti.Tj.V9e, this.see, t, i, this, e, s, n);
            return r.B8e(this.Mai && this.obt()), this.see.eBs.push(r), this.rtn.push(r), r;
        }
        pae(t, i, e, s, n, r) {
            let h = tS.m(tS.ti.Tj.q9e, this.see, t, i, this, e, s, n, r);
            return h.B8e(this.Mai && this.obt()), this.see.eBs.push(h), this.rtn.push(h), h;
        }
        ane(t, i, e, s) {
            let n = tS.m(tS.ti.Tj.Q9e, this.see, t, i, this, e, s);
            return n.B8e(this.Mai && this.obt()), this.see.eBs.push(n), this.rtn.push(n), n;
        }
        zte(t, i) {
            let e = tS.m(tS.ti.Tj.stn, this.see, t, i, this);
            return e.B8e(this.Mai && this.obt()), this.see.eBs.push(e), this.rtn.push(e), e;
        }
        pse(t, i, e, s) {
            let n = tS.m(tS.ti.Tj.o9e, this.see, t, i, e, this, s);
            return n.B8e(this.Mai && this.obt()), this.see.eBs.push(n), this.rtn.push(n), n;
        }
        *children() {
            for (let t of this.rtn) yield t;
        }
        _A() {
            return { name: this.Zn(), expanded: this.h_(), children: this.rtn.map((t) => t._A()).filter((t) => t) };
        }
        xH(t) {
            if (t) {
                for (let i of t.children) {
                    let t = this.ctn(i.name);
                    t && t.xH(i);
                }
                this.SO(t.expanded);
            }
        }
        ctn(t) {
            tS.vu(t);
            for (let i of this.rtn) if (i.Zn() === t) return i;
        }
    };
}
{
    const iS = self.t,
        eS = 3;
    iS.ti.Tj.o9e = class extends iS.ti.Tj.W8e {
        constructor(t, i, e, s, n, r) {
            if ((super(t, i, e, n), iS.vu(s), !s)) throw new Error("non-empty separator required");
            (this.dtn = s),
                (this.ftn = []),
                (this.n7e = r),
                (this.ptn = iS.ti.gj("input", this.K8e)),
                (this.ptn.type = "text"),
                (this.ptn.id = this.JD()),
                this.ptn.setAttribute("spellcheck", "false"),
                (this.ntn = iS.m(iS.ti.met, self.app.ht("collapsed"), this.Qbt)),
                (this.mtn = (t) => this.xbt(!0)),
                this.ntn.FO().addEventListener("pointerdown", this.mtn),
                (this.c7e = !1),
                (this.d7e = !0),
                (this.f7e = !1),
                (this.r7e = this.see.h7e()),
                (this.RHs = null),
                (this.Mai = !1),
                (this.rtn = []),
                (this._7e = (t) => this.T7e()),
                this.ptn.addEventListener("change", this._7e),
                (this.I7e = (t) => {
                    if (iS.ti.uz.$4e()) return t.preventDefault(), void this.ptn.blur();
                    this.O8e(),
                        (this.d7e = !1),
                        this.see.P7e(() => {
                            this.ptn && this.H_();
                        });
                }),
                this.ptn.addEventListener("focus", this.I7e),
                (this.G7e = (t) => {
                    this.see.k8e(this),
                        (this.d7e = !0),
                        (this.f7e = !1),
                        this.RHs !== this.ptn.value && (this.see.Gee(this), (this.RHs = this.ptn.value));
                }),
                this.ptn.addEventListener("blur", this.G7e),
                (this.Qq = (t) => {
                    this.d7e && ((this.f7e = !0), (this.d7e = !1));
                }),
                this.ptn.addEventListener("pointerdown", this.Qq),
                (this.qG = -1),
                (this.OR = (t) => {
                    this.f7e &&
                        ((this.f7e = !1),
                        (this.qG = requestAnimationFrame(() => {
                            this.ptn && this.ptn.select(), (this.qG = -1);
                        })));
                }),
                this.ptn.addEventListener("pointerup", this.OR),
                (this.wtn = (t) => {
                    (this.d7e = !1), (this.f7e = !1), cancelAnimationFrame(this.qG), (this.qG = -1);
                }),
                this.ptn.addEventListener("pointercancel", this.wtn),
                (this.RR = (t) => this.Uj(t)),
                this.ptn.addEventListener("keydown", this.RR),
                this.ptn.addEventListener("dragstart", iS.ti.uJt),
                (this.atn = (t) => this.xbt(!0)),
                this.KCe.addEventListener("UIDoubleTap", this.atn);
        }
        CPt() {
            (this.r7e = null),
                (this.n7e = null),
                (this.RHs = null),
                this.KCe.removeEventListener("UIDoubleTap", this.atn),
                (this.atn = null),
                this.ptn.removeEventListener("change", this._7e),
                (this._7e = null),
                this.ptn.removeEventListener("focus", this.I7e),
                (this.I7e = null),
                this.ptn.removeEventListener("blur", this.G7e),
                (this.G7e = null),
                this.ptn.removeEventListener("pointerdown", this.Qq),
                (this.Qq = null),
                this.ptn.removeEventListener("pointerup", this.OR),
                (this.OR = null),
                this.ptn.removeEventListener("pointercancel", this.wtn),
                (this.wtn = null),
                this.ptn.removeEventListener("keydown", this.RR),
                (this.RR = null),
                this.ptn.removeEventListener("dragstart", iS.ti.uJt),
                iS.ti.Tz(this.ptn),
                (this.ptn = null),
                this.ntn.FO().removeEventListener("pointerdown", this.mtn),
                (this.mtn = null),
                this.ntn.Ut(),
                (this.ntn = null),
                super.CPt();
        }
        O8e() {
            this.ptn.select(), super.O8e();
        }
        fkt() {
            this.ptn && this.ptn.focus();
        }
        Lst() {
            this.r7e && this.r7e(this.Zn());
        }
        gtn() {
            let t = [];
            for (let i of this.rtn) i.Z7e() || t.push(i);
            return t;
        }
        dse(t) {
            if ("string" == typeof t) this.ftn = [t];
            else {
                if (!Array.isArray(t)) throw new Error("expected string or array");
                this.ftn = t;
            }
        }
        T7e() {
            if (this.c7e) return;
            this.Lst(), (this.c7e = !0);
            const t = this.ptn.value.trim(),
                i = this.dtn.trim();
            let e = t.split(i);
            if (1 === e.length)
                for (const i of this.ftn) {
                    const s = i.trim(),
                        n = t.split(s);
                    if (n.length >= 2) {
                        e = n;
                        break;
                    }
                }
            const s = this.gtn(),
                n = Math.min(e.length, s.length);
            for (let t = 0; t < n; ++t) {
                const i = e[t].trim();
                s[t].e9e(i);
            }
            this.a9e(), (this.c7e = !1);
        }
        a9e() {
            let t = "",
                i = this.gtn();
            for (let e = 0, s = i.length; e < s; ++e) {
                (t += i[e].r9e()), e < s - 1 && (t += this.dtn);
            }
            this.ptn.value !== t && ((this.c7e = !0), (this.ptn.value = t), (this.c7e = !1));
        }
        woe() {
            this.a9e(), (this.RHs = this.ptn.value);
        }
        Uj(t) {
            t.which === iS.fO.o3 && (t.preventDefault(), this.ptn.blur(), this.see.l9e(this));
        }
        V8e() {
            this.n7e && this.qL(this.n7e());
        }
        Y8e(t) {
            (this.ptn.disabled = !t), (this.ptn.readOnly = !t);
        }
        ytn() {
            return this.ptn;
        }
        h_() {
            return this.Mai;
        }
        SO(t, i) {
            (t = !!t),
                (i = !!i),
                this.Mai !== t &&
                    (this.rtn.length <= eS && (i = !1),
                    (this.Mai = t),
                    this.ntn.zD(self.app.ht(this.Mai ? "expanded" : "collapsed")),
                    this.utn(i));
        }
        xbt(t) {
            (t = !!t), this.SO(!this.h_(), t);
        }
        B8e(t, i) {
            (t = !!t), (i = !!i), super.B8e(t, i), this.utn(i);
        }
        utn(t) {
            let i = this.Mai && this.obt();
            for (let e of this.rtn) e.B8e(i, t);
        }
        Mte(t, i, e, s, n, r, h) {
            let o = iS.m(iS.ti.Tj.Q8e, this.see, t, i, e, this, s, n, r, !!h);
            return (
                o.B8e(this.Mai && this.obt()),
                this.see.eBs.push(o),
                this.rtn.push(o),
                this.a9e(),
                (this.RHs = this.ptn.value),
                o
            );
        }
        _A() {
            return { name: this.Zn(), expanded: this.h_(), children: this.rtn.map((t) => t._A()).filter((t) => t) };
        }
        xH(t) {
            if (t) {
                for (let i of t.children) {
                    let t = this.ctn(i.name);
                    t && t.xH(i);
                }
                this.SO(t.expanded);
            }
        }
        ctn(t) {
            iS.vu(t);
            for (let i of this.rtn) if (i.Zn() === t) return i;
        }
        *Tfe() {
            yield* super.Tfe(), yield this.ptn;
        }
    };
}
{
    const sS = self.t,
        nS = 2,
        rS = 300,
        hS = { resizable: !1, btn: { borderTop: !0, borderLeft: !1, borderRight: !1, borderBottom: !1 } };
    sS.ti.Tj.nee = class extends sS.Event.aG {
        constructor(t, i) {
            super(),
                sS.Crt(i),
                (i = Object.assign({}, hS, i)),
                (this.GMt = t),
                (this.mht = sS.ti.gj("ui-propertygrid", this.GMt)),
                (this.vtn = sS.ti.gj("ui-propertygrid-container", this.mht)),
                (this.Stn = sS.ti.gj("ui-propertygrid-table", this.vtn)),
                this.Stn.setAttribute("role", "none"),
                (this.xtn = sS.ti.gj("tr", this.Stn)),
                (this.Mtn = sS.ti.gj("td", this.xtn, null, "firstRow")),
                (this.Mtn.style.width = "50%"),
                this.Mtn.classList.add("firstRow"),
                (this.Etn = sS.ti.gj("td", this.xtn, null, "firstRow")),
                (this.Ctn = sS.ti.gj("ui-propertygrid-footer", this.mht)),
                (this.Ctn.style.display = "none"),
                i.btn.borderTop && this.Ctn.setAttribute("useBorderTop", ""),
                i.btn.borderLeft && this.Ctn.setAttribute("useBorderLeft", ""),
                i.btn.borderRight && this.Ctn.setAttribute("useBorderRight", ""),
                i.btn.borderBottom && this.Ctn.setAttribute("useBorderBottom", ""),
                (this._tn = sS.ti.gj("span", this.Ctn, null, "property-footer-title")),
                (this.Ttn = sS.ti.gj("span", this.Ctn, null, "property-footer-description")),
                (this.Itn = !!i.resizable),
                (this.eBs = []),
                (this.r7e = null),
                (this.Ptn = null),
                (this.WXs = null),
                (this.Gtn = 0),
                (this.Atn = null),
                (this.Rtn = 0),
                (this.ktn = []),
                (this.Otn = -1),
                (this.Dtn = []),
                (this.Ftn = () => this.Ltn(!1)),
                (this.Btn = -1),
                (this.Utn = []),
                (this.Ntn = () => this.jtn(!1)),
                (this.$tn = !0),
                (this.ztn = 1),
                (this.Qq = (t) => this.lz(t)),
                (this.MR = (t) => this.GR(t)),
                (this.wtn = (t) => this.n0(t)),
                (this.Vtn = (t) => this.Wtn(t)),
                (this.B7e = (t) => this.Htn(t)),
                (this.U7e = (t) => this.Ktn(t)),
                (this.qq = null),
                (this.uRi = {
                    onpointerdown: this.Qq,
                    onpointermove: this.Vtn,
                    onpointerup: this.B7e,
                    onpointercancel: this.U7e,
                }),
                (this.qtn = !1),
                (this.mGt = 0),
                (this.vGt = null),
                (this.Xtn = -1),
                this.Itn &&
                    (this.Stn.addEventListener("pointerdown", this.Qq, !0),
                    this.Stn.addEventListener("pointermove", this.MR),
                    this.Stn.addEventListener("pointercancel", this.wtn),
                    this.CF().addEventListener("pointermove", this.Vtn),
                    this.CF().addEventListener("pointerup", this.B7e),
                    this.CF().addEventListener("pointercancel", this.U7e)),
                (this.Ytn = 0);
        }
        Ut() {
            this.Jtn(),
                this._x(),
                this.wDt(),
                this.Stn.removeEventListener("pointerdown", this.Qq, !0),
                (this.Qq = null),
                this.Stn.removeEventListener("pointermove", this.MR),
                (this.MR = null),
                this.CF().removeEventListener("pointermove", this.Vtn),
                (this.Vtn = null),
                this.CF().removeEventListener("pointerup", this.B7e),
                (this.B7e = null),
                this.Stn.removeEventListener("pointercancel", this.wtn),
                (this.wtn = null),
                this.CF().removeEventListener("pointercancel", this.U7e),
                (this.U7e = null),
                sS.ti.Tz(this.vGt),
                (this.vGt = null),
                sS.ti.Tz(this.Etn),
                (this.Etn = null),
                sS.ti.Tz(this.Mtn),
                (this.Mtn = null),
                sS.ti.Tz(this.xtn),
                (this.xtn = null),
                sS.ti.Tz(this.Stn),
                (this.Stn = null),
                sS.ti.Tz(this.vtn),
                (this.vtn = null),
                sS.ti.Tz(this.Ctn),
                (this.Ctn = null),
                sS.ti.Tz(this.mht),
                (this.mht = null),
                (this.GMt = null),
                (this.Ftn = null),
                (this.Ntn = null),
                (this.WXs = null),
                super.Ut();
        }
        _x() {
            this.Jtn(),
                this.x3e(),
                sS.yh(this.ktn),
                this.Ztn("", ""),
                -1 !== this.Otn && (this.Az().cancelAnimationFrame(this.Otn), (this.Otn = -1)),
                sS.yh(this.Dtn),
                -1 !== this.Btn && (this.Az().cancelAnimationFrame(this.Btn), (this.Btn = -1)),
                sS.yh(this.Utn);
            for (let t = this.eBs.length - 1; t >= 0; --t) this.eBs[t].CPt();
            (this.r7e = null), (this.Ptn = null), sS.yh(this.eBs), (this.Gtn = 0);
        }
        wDt() {
            sS.ti.OF.kF(this.qq), (this.qq = null);
        }
        x3e() {
            let t = document.activeElement;
            for (; t; ) if (((t = t.parentElement), t === this.Stn)) return void document.activeElement.blur();
        }
        FO() {
            return this.mht;
        }
        G8e() {
            return "propid" + this.Gtn++;
        }
        R8e() {
            return this.Stn;
        }
        CF() {
            return this.FO().ownerDocument;
        }
        Az() {
            return this.CF().defaultView;
        }
        Ztn(t, i) {
            sS.vu(t), sS.vu(i);
            let e = this.vtn.scrollTop;
            if (t && "" !== t) {
                let i = self.lang("ui.bars.properties.footer-title-prefix"),
                    e = self.lang("ui.bars.properties.footer-title-suffix");
                this._tn.textContent = i + t + e;
            } else sS.ti.fMt(this._tn);
            i ? (this.Ttn.textContent = i) : sS.ti.fMt(this.Ttn),
                (this.Ctn.style.display = t || i ? "" : "none"),
                (this.vtn.scrollTop = e);
        }
        Vie(t) {
            if ((sS._T(t), !t.length)) throw new Error("cannot set empty item array");
            sS.Rm(this.ktn, t);
        }
        Cxt(t) {
            sS.Gct(t),
                this.GMt !== t &&
                    (this.GMt && this.GMt.removeChild(this.mht), (this.GMt = t), this.GMt.appendChild(this.mht));
        }
        Vte(t) {
            sS.kDt(t), (this.r7e = t);
        }
        h7e() {
            return this.r7e;
        }
        fne(t) {
            sS.kDt(t), (this.Ptn = t);
        }
        $8e() {
            return this.Qtn() ? null : this.Ptn;
        }
        q7e(t, i) {
            if (!this.ktn.length) throw new Error("no item array available");
            let e = t(this.ktn[0], i),
                s = e instanceof sS.nr;
            for (let n = 1, r = this.ktn.length; n < r; ++n) {
                let r = t(this.ktn[n], i);
                if (s) {
                    if (!e.Xae(r)) return null;
                } else if (r !== e) return null;
            }
            return e;
        }
        Y7e(t, i, e, s) {
            if (!this.ktn.length) throw new Error("no item array available");
            for (let n of this.ktn) t(n, i, e, s);
        }
        u9e(t) {
            sS.yp(t);
            for (let i of this.ktn) if (t(i)) return !0;
            return !1;
        }
        c$(t) {
            return sS.Et(t, sS.ti.Tj.Hfe), this.Atn === t;
        }
        D8e(t) {
            if ((sS.Et(t, sS.ti.Tj.Hfe), !this.eBs.includes(t))) throw new Error("property not from this grid");
            this.Jtn(),
                this.Atn && this.Atn.q8e().removeAttribute("selected"),
                (this.Atn = t),
                this.Atn.q8e().setAttribute("selected", ""),
                this.Ztn(this.Atn.Zn(), this.Atn.qte());
        }
        l9e(t) {
            sS.Et(t, sS.ti.Tj.Hfe);
            let i = this.eBs.indexOf(t);
            if (!(i < 0)) {
                ++i;
                for (let t = this.eBs.length; i < t; ++i) {
                    let t = this.eBs[i];
                    if (t.obt()) return this.D8e(t), void t.fkt();
                }
            }
        }
        k8e(t) {
            if ((sS.Et(t, sS.ti.Tj.Hfe), this.Atn === t)) {
                let t = this.Atn.q8e();
                t && t.removeAttribute("selected"), (this.Atn = null), this.Jtn();
            }
        }
        P7e(t) {
            sS.yp(t),
                this.Jtn(),
                (this.Xtn = self.setTimeout(() => {
                    (this.Xtn = -1), t();
                }, rS));
        }
        Jtn() {
            -1 !== this.Xtn && (self.clearTimeout(this.Xtn), (this.Xtn = -1));
        }
        Ogt(t) {
            this.Jtn(), sS.ti.H_(t.q8e(), this.vtn);
        }
        U8e() {
            return -1 !== this.Otn || -1 !== this.Btn;
        }
        N8e() {
            for (; -1 !== this.Otn; ) this.Ltn(!0);
            for (; -1 !== this.Btn; ) this.jtn(!0);
        }
        j8e(t) {
            sS.Et(t, sS.ti.Tj.Hfe),
                -1 !== this.Btn && this.N8e(),
                -1 === this.Otn && ((this.Otn = this.Az().requestAnimationFrame(this.Ftn)), (this.$tn = !0)),
                this.Dtn.push(t);
        }
        z8e(t) {
            sS.Et(t, sS.ti.Tj.Hfe),
                -1 !== this.Otn && this.N8e(),
                -1 === this.Btn && ((this.Btn = this.Az().requestAnimationFrame(this.Ntn)), (this.$tn = !0)),
                this.Utn.push(t);
        }
        Ltn(t) {
            (this.Otn = -1), this.$tn && ((this.ztn = Math.max(Math.round(this.Dtn.length / 10), 1)), (this.$tn = !1));
            for (let t = 0; t < this.ztn && this.Dtn.length; ++t) {
                this.Dtn.shift().Ete().removeAttribute("collapsed");
            }
            if (this.Dtn.length && !t) return void (this.Otn = this.Az().requestAnimationFrame(this.Ftn));
            let i = this.$8e();
            i && i();
        }
        jtn(t) {
            (this.Btn = -1), this.$tn && ((this.ztn = Math.max(Math.round(this.Utn.length / 10), 1)), (this.$tn = !1));
            for (let t = 0; t < this.ztn && this.Utn.length; ++t) {
                this.Utn.pop().Ete().setAttribute("collapsed", "");
            }
            if (this.Utn.length && !t) return void (this.Btn = this.Az().requestAnimationFrame(this.Ntn));
            let i = this.$8e();
            i && i();
        }
        See(t) {
            this.ute();
            const i = new sS.Event("afteranypropertychanged");
            (i.iet = t), this.dispatchEvent(i);
        }
        Gee(t) {
            this.ute();
            const i = new sS.Event("anypropertychangedafterblur");
            (i.iet = t), this.dispatchEvent(i);
        }
        ips(t, i, e) {
            const s = new sS.Event(t);
            (s.iet = i), (s.tde = e), this.dispatchEvent(s);
        }
        Z8e(t) {
            return new Promise((i) => {
                const e = (s) => {
                    s.iet === t && (this.removeEventListener("afteranypropertychanged", e), i(t));
                };
                this.addEventListener("afteranypropertychanged", e);
            });
        }
        ute() {
            this.cne(), this.tin();
        }
        cne() {
            for (let t of this.eBs) t.V8e();
        }
        tin() {
            for (let t of this.eBs) t.xfe();
        }
        yte() {
            return (this.Rtn = this.vtn.scrollTop), this.Rtn;
        }
        bte(t) {
            sS.HI(t), (this.vtn.scrollTop = "number" == typeof t ? t : this.Rtn);
        }
        iee(t) {
            sS.kDt(t), (this.WXs = t);
        }
        i9e() {
            return !!this.WXs;
        }
        tYs() {
            return this.WXs;
        }
        Mte(t, i, e, s, n, r, h) {
            let o = sS.m(sS.ti.Tj.Q8e, this, t, i, e, null, s, n, r, !!h);
            return this.eBs.push(o), o;
        }
        Hte(t, i, e, s, n, r) {
            let h = sS.m(sS.ti.Tj.N6s, this, t, i, null, e, s, n, !!r);
            return this.eBs.push(h), h;
        }
        nse(t, i, e, s, n, r) {
            let h = sS.m(sS.ti.Tj.g9e, this, t, i, null, e, s, n, !!r);
            return this.eBs.push(h), h;
        }
        Jte(t, i, e, s, n, r) {
            let h = sS.m(sS.ti.Tj.E9e, this, t, i, null, e, s, n, !!r);
            return this.eBs.push(h), h;
        }
        _te(t, i, e, s, n, r) {
            let h = sS.m(sS.ti.Tj.N9e, this, t, i, null, e, s, n, !!r);
            return this.eBs.push(h), h;
        }
        yse(t, i, e, s, n) {
            let r = sS.m(sS.ti.Tj.V9e, this, t, i, null, e, s, n);
            return this.eBs.push(r), r;
        }
        pae(t, i, e, s, n, r) {
            let h = sS.m(sS.ti.Tj.q9e, this, t, i, null, e, s, n, r);
            return this.eBs.push(h), h;
        }
        ane(t, i, e, s) {
            let n = sS.m(sS.ti.Tj.Q9e, this, t, i, null, e, s);
            return this.eBs.push(n), n;
        }
        zte(t, i) {
            let e = sS.m(sS.ti.Tj.stn, this, t, i, null);
            return this.eBs.push(e), e;
        }
        pse(t, i, e) {
            let s = sS.m(sS.ti.Tj.o9e, this, t, i, e, null);
            return this.eBs.push(s), s;
        }
        iin(t, i) {
            if ((sS.wi(t), sS.wi(i), !sS.ti.cE.IYe())) return !1;
            let e = this.vtn.getBoundingClientRect(),
                s = this.Mtn.getBoundingClientRect().width,
                n = e.left + s;
            return Math.abs(t - n) <= nS && i > e.top && i < e.bottom;
        }
        lz(t) {
            let i = t.clientX,
                e = t.clientY;
            t.button === sS.sQ.z0 &&
                t.isPrimary &&
                (this.qtn ||
                    (this.iin(i, e) &&
                        (t.preventDefault(),
                        t.stopPropagation(),
                        (this.qtn = !0),
                        (this.mGt = i),
                        (this.vGt = sS.ti.gj("div", this.vtn, null, "columnResizeIndicator")),
                        (this.vGt.style.height = this.Stn.getBoundingClientRect().height + "px"),
                        this.HBt(i))));
        }
        GR(t) {
            if (!t.isPrimary) return;
            const i = t.clientX,
                e = t.clientY;
            this.iin(i, e) && (this.qq || (this.qq = sS.ti.OF.PF("col-resize", this.CF(), i, e, this.uRi)));
        }
        n0(t) {
            this.wDt();
        }
        Wtn(t) {
            const i = t.clientX,
                e = t.clientY;
            t.isPrimary &&
                (this.qtn
                    ? (this.qq || (this.qq = sS.ti.OF.PF("col-resize", this.CF(), i, e, this.uRi)),
                      this.qtn && this.HBt(i))
                    : this.qq && !this.iin(i, e) && this.wDt());
        }
        HBt(t) {
            sS.wi(t), (t -= 2);
            let i = this.Stn.getBoundingClientRect(),
                e = i.left,
                s = Math.round(0.1 * i.width),
                n = Math.round(0.9 * i.width),
                r = sS.ft(t - e, s, n);
            this.vGt.style.transform = `translate(${r}px,0px)`;
        }
        Htn(t) {
            let i = t.clientX;
            t.clientY;
            if (!this.qtn) return;
            if (!t.isPrimary) return;
            (this.qtn = !1), sS.ti.Tz(this.vGt), (this.vGt = null);
            let e = this.Stn.getBoundingClientRect(),
                s = sS.ft((i - e.left) / e.width, 0.1, 0.9);
            this.Mtn.style.width = 100 * s + "%";
        }
        Ktn(t) {
            (this.qtn = !1), sS.ti.Tz(this.vGt), (this.vGt = null), this.wDt();
        }
        _A() {
            let t = { properties: [] };
            for (let i of this.eBs) {
                if (null !== i.nE()) continue;
                let e = i._A();
                e && t.properties.push(e);
            }
            return this.yte(), (t.scrollPosition = this.Rtn), t;
        }
        xH(t) {
            if (t && t.properties) {
                this.Ytn++;
                for (let i of t.properties) {
                    let t = this.ctn(i.name);
                    t && t.xH(i);
                }
                sS.Xl(t.scrollPosition) && ((this.Rtn = t.scrollPosition), this.bte()), this.Ytn--;
            }
        }
        Qtn() {
            return this.Ytn > 0;
        }
        ctn(t) {
            sS.vu(t);
            for (const i of this.eBs) if (i.Zn() === t) return i;
        }
        Nyi(t) {
            sS.vu(t);
            for (const i of this.eBs) if (i.L8e() === t) return i;
            return null;
        }
        ebi() {
            for (const t of this.eBs) if (t.Mlt()) return !0;
            return !1;
        }
        EF() {
            if (this.ebi()) for (const t of this.eBs) t.EF();
        }
    };
}
{
    const oS = self.t,
        aS = oS.sj(import.meta.url),
        lS = aS.getElementById("longTextPropertyDialog"),
        uS = "LongTextPropertyDialog",
        cS = (oS.ti.Tj.ein = class extends oS.ti.Ze {
            constructor() {
                super(lS),
                    (this.nin = aS.getElementById("longTextArea")),
                    (this.OWi = aS.getElementById("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this._Wt = aS.getElementById("cancelButton")),
                    (this._Wt.onclick = () => this.JLt());
            }
            fgt() {
                (this.OWi.textContent = self.lang("common.ok")), (this._Wt.textContent = self.lang("common.cancel"));
            }
            pr(t, i) {
                return oS.vu(t), (this.nin.value = t), super.pr(i);
            }
            egt() {
                this.WD(this.nin.value);
            }
        });
    oS.ti.SK.zgt.addEventListener("load", function () {
        oS.ti.Ze.Ugt(uS, cS);
    });
}
{
    const dS = self.t,
        fS = 80,
        pS = 20,
        mS = 10,
        wS = { title: "", pU: "", rin: !1, hin: !0, oin: !0, ain: !0, lin: !0 };
    dS.ti.Tj.Tab = class extends dS.MV {
        constructor(t, i) {
            super(),
                dS.Crt(i),
                (i = Object.assign({}, wS, i)),
                dS.vu(i.title),
                (this.F2e = t),
                (this.mht = dS.ti.gj("ui-tab")),
                this.mht.setAttribute("role", "tab");
            const e = this.F2e.FO();
            if ("front" !== i.uin || this.F2e.rB()) e.appendChild(this.mht);
            else {
                const t = this.F2e.M4e(0);
                e.insertBefore(this.mht, t.FO());
            }
            (this.cin = dS.ti.gj("span", this.mht)),
                (this.cin.textContent = i.title),
                (this.Zu = !1),
                (this.izs = i.title),
                (this.din = i.pU),
                (this.fZe = null),
                (this.fin = !0),
                (this.pin = !0),
                this.din && this.mht.setAttribute("title", this.din),
                (this.Ewt = !1),
                (this.T3 = 0),
                (this.E3 = 0),
                (this.win = !1),
                (this.pp = null),
                (this._a = dS.m(
                    dS.Ha,
                    dS.Xa.Wa(this.mht, "pointerdown", (t) => this.lz(t)),
                    dS.Xa.Wa(this.mht, "contextmenu", (t) => this.fz(t)),
                    dS.Xa.Wa(this.mht, "auxclick", (t) => this.gin(t)),
                    dS.Xa.Wa(this.mht, "click", (t) => this.gin(t))
                )),
                (this.MR = (t) => this.GR(t)),
                (this.OR = (t) => this.CR(t)),
                (this.wtn = (t) => this.n0(t)),
                i.rin &&
                    (this.mht.setAttribute("closebutton", ""),
                    (this.fZe = dS.m(dS.ti.Tj.jet, this.mht)),
                    (this.fZe.onclick = () => this.yin())),
                i.className && this.mht.classList.add(i.className),
                (this.fRi = !1),
                (this.bin = !1),
                (this.vin = !1),
                (this.Sin = !1),
                dS.GUt(i.hin) ? (this.fRi = i.hin) : (this.fRi = !!i.hin),
                dS.GUt(i.oin) ? (this.bin = i.oin) : (this.bin = !!i.oin),
                dS.GUt(i.ain) ? (this.vin = i.ain) : (this.vin = !!i.ain),
                dS.GUt(i.lin) ? (this.Sin = i.lin) : (this.Sin = !!i.lin),
                (this.di = !1);
        }
        CPt() {
            this._a.Ut(),
                (this._a = null),
                this.mht.ownerDocument.removeEventListener("pointerup", this.OR),
                (this.OR = null),
                this.mht.ownerDocument.removeEventListener("pointercancel", this.wtn),
                (this.wtn = null),
                this.mht.ownerDocument.removeEventListener("pointermove", this.MR),
                (this.MR = null),
                this.fZe && (this.fZe.Ut(), (this.fZe = null)),
                dS.ti.Tz(this.cin),
                (this.cin = null),
                dS.ti.Tz(this.mht),
                (this.mht = null),
                (this.pp = null),
                (this.F2e = null),
                (this.di = !0),
                dS.Ut(this);
        }
        gi() {
            return this.di;
        }
        xin() {
            return dS.GUt(this.fRi) ? this.fRi() : this.fRi;
        }
        A4e() {
            return dS.GUt(this.bin) ? this.bin() : this.bin;
        }
        Frt() {
            return dS.GUt(this.vin) ? this.vin() : this.vin;
        }
        R4e() {
            return dS.GUt(this.Sin) ? this.Sin() : this.Sin;
        }
        yin() {
            this.F2e.Min(this, "tabclose");
        }
        Ein(t) {
            (t = !!t), (this.fin = t), this.fZe && this.fZe.qL(t);
        }
        O4e() {
            return this.fin;
        }
        Xrt() {
            this.mht && this.mht.setAttribute("hide", "");
        }
        eD() {
            this.mht && this.mht.removeAttribute("hide");
        }
        lz(t) {
            let i = t.clientX,
                e = t.clientY;
            this.Ewt ||
                (1 !== t.button &&
                    (2 !== t.button || this.pin) &&
                    (this.F2e.I4e(this),
                    this.xin() &&
                        0 === t.button &&
                        ((this.Ewt = !0),
                        (this.T3 = i),
                        (this.E3 = e),
                        (this.win = !1),
                        this.mht.ownerDocument.addEventListener("pointermove", this.MR),
                        this.mht.ownerDocument.addEventListener("pointerup", this.OR),
                        this.mht.ownerDocument.addEventListener("pointercancel", this.wtn))));
        }
        gin(t) {
            if (1 === t.button) return t.preventDefault(), void this.UW().Min(this, "tabmiddleclick");
        }
        GR(t) {
            let i = t.clientX,
                e = t.clientY,
                s = t.pointerId;
            if (this.Ewt) {
                if ((this.F2e.Cin() && Math.abs(i - this.T3) >= mS && (this.win = !0), this.win)) {
                    let t = this.F2e._in(i, e);
                    if (t && t !== this && t.xin()) {
                        let s = this.rs(),
                            n = t.rs() - s,
                            r = !0;
                        return (
                            n > 0 && (this.Yn() < t.Yn() ? t.uF(i - n, e) || (r = !1) : t.uF(i + n, e) || (r = !1)),
                            void (r && this.F2e.Tin(this, t))
                        );
                    }
                }
                if (this.bin) {
                    let t = this.F2e.FO().getBoundingClientRect();
                    const n = pS;
                    let r = i >= t.left - n && e >= t.top - n && i <= t.right + n && e <= t.bottom + n;
                    dS.gt(this.T3, this.E3, i, e) > fS && !r && dS.fk.Bj && (this.CR(), this.UW().b4e(this, i, e, s));
                }
            }
        }
        CR(t) {
            (this.Ewt = !1),
                (this.win = !1),
                this.mht.ownerDocument.removeEventListener("pointerup", this.OR),
                this.mht.ownerDocument.removeEventListener("pointermove", this.MR),
                this.mht.ownerDocument.removeEventListener("pointercancel", this.wtn);
        }
        n0(t) {
            this.CR(t);
        }
        Iin(t) {
            this.pin = !!t;
        }
        fz(t) {
            this.pin && (this.F2e.S4e(this, t.clientX, t.clientY) || t.preventDefault());
        }
        Pin(t) {
            (t = !!t), this.Zu !== t && (dS.ti.CT(this.mht, "active", t), (this.Zu = t));
        }
        Yn() {
            return this.mht.getBoundingClientRect().left;
        }
        rs() {
            let t = this.mht.getBoundingClientRect();
            return t.right - t.left;
        }
        uF(t, i) {
            dS.wi(t), dS.wi(i);
            let e = this.mht.getBoundingClientRect();
            return t >= e.left && i >= e.top && t < e.right && i < e.bottom;
        }
        UW() {
            return this.F2e;
        }
        PEt(t) {
            dS.vu(t), this.izs !== t && ((this.izs = t), (this.cin.textContent = this.izs));
        }
        NH() {
            return this.izs;
        }
        f6i(t) {
            dS.vu(t),
                this.din !== t &&
                    ((this.din = t),
                    this.din ? this.mht.setAttribute("title", this.din) : this.mht.removeAttribute("title"));
        }
        aYi() {
            return this.din;
        }
        Zie(t) {
            this.pp = t;
        }
        Zc(t) {
            return this.pp;
        }
        Qte(t) {
            dS.qm(t, dS.nr), (this.mht.style.backgroundColor = t ? t.tFe() : "");
        }
        _yt(t) {
            dS.qm(t, dS.nr), (this.mht.style.color = t ? t.tFe() : "");
        }
        FO() {
            return this.mht;
        }
    };
}
{
    const gS = self.t,
        yS = new Set(["top", "bottom"]),
        bS = { p4e: !1, m4e: !1 };
    gS.ti.Tj.f4e = class extends gS.Event.aG {
        constructor(t, i) {
            super(),
                gS.Crt(i),
                (i = Object.assign({}, bS, i)),
                (this.GMt = t),
                (this.D2e = ""),
                (this.mht = gS.ti.gj("ui-tabbar", this.GMt)),
                this.mht.setAttribute("role", "tablist"),
                (this.Gin = !!i.p4e),
                (this.Ain = !!i.m4e),
                (this.$2e = []),
                (this.Rin = null),
                this.cet("bottom");
        }
        Ut() {
            for (let t = 0, i = this.$2e.length; t < i; ++t) this.$2e[t].CPt();
            gS.yh(this.$2e), gS.ti.Tz(this.mht), (this.mht = null), (this.GMt = null), (this.Rin = null), super.Ut();
        }
        FO() {
            return this.mht;
        }
        WW() {
            return this.Rin;
        }
        Cin() {
            return this.Ain;
        }
        cet(t) {
            if ((gS.vu(t), !yS.has(t))) throw new Error(`invalid tab side '${t}'`);
            this.D2e !== t &&
                (this.mht.removeAttribute("tabbed-" + this.D2e),
                (this.D2e = t),
                this.mht.setAttribute("tabbed-" + this.D2e, ""));
        }
        Trt() {
            return this.$2e.length;
        }
        Srt(t) {
            gS.Et(t, gS.ti.Tj.Tab), self.assert(this.$2e.includes(t), "tab is not part of this tab bar");
            for (let i = 0, e = this.$2e.length; i < e; ++i) if (this.$2e[i] === t) return i;
        }
        M4e(t) {
            return gS.wi(t), (t = Math.floor(t)) < 0 || t >= this.$2e.length ? null : this.$2e[t];
        }
        *tabs() {
            for (let t = 0, i = this.$2e.length; t < i; ++t) yield this.$2e[t];
        }
        rB() {
            return 0 === this.Trt();
        }
        urt(t, i) {
            gS.vu(t);
            let e = Object.assign({}, { title: t, rin: this.Gin }, i),
                s = gS.m(gS.ti.Tj.Tab, this, e);
            return (
                "front" === e.uin ? this.$2e.unshift(s) : this.$2e.push(s),
                this.Rin || ((this.Rin = s), this.kin()),
                this.Min(s, "tabadd"),
                s
            );
        }
        T4e(t) {
            if ((gS.wi(t), (t = Math.floor(t)) < 0 || t >= this.$2e.length))
                throw new RangeError("tab index out of range");
            let i = this.$2e[t];
            if ((i.CPt(), this.$2e.splice(t, 1), this.Rin === i)) {
                const i = Math.max(t - 1, 0);
                i < this.$2e.length ? this.I4e(this.$2e[i], !0) : (this.Rin = null);
            }
            this.Min(null, "tabremove");
        }
        Ert(t) {
            if ((gS.wi(t), (t = Math.floor(t)) < 0 || t >= this.$2e.length))
                throw new RangeError("tab index out of range");
            this.I4e(this.$2e[t]);
        }
        _in(t, i) {
            gS.wi(t), gS.wi(i);
            for (let e of this.$2e) if (e.uF(t, i)) return e;
            return null;
        }
        I4e(t, i = !1) {
            if ((gS.Et(t, gS.ti.Tj.Tab), this.Rin !== t)) {
                if (!this.$2e.includes(t)) throw new Error("tab does not belong to this tab bar");
                (this.Rin = t), this.kin(), this.Min(t, "activetabchanged", i);
            }
        }
        kin() {
            for (let t = 0, i = this.$2e.length; t < i; ++t) {
                let i = this.$2e[t];
                i.Pin(i === this.Rin);
            }
        }
        Tin(t, i) {
            gS.Et(t, gS.ti.Tj.Tab), gS.Et(i, gS.ti.Tj.Tab);
            const e = this.$2e.indexOf(t),
                s = this.$2e.indexOf(i);
            if (e < 0 || s < 0) throw new Error("cannot find tab");
            this.$2e.splice(e, 1), this.$2e.splice(s, 0, t), this.Oin();
            const n = new gS.Event("taborderchanged");
            (n.Wrt = t), (n.Din = i), this.dispatchEvent(n);
        }
        Oin() {
            for (let t of this.$2e) gS.ti.Tz(t.FO());
            for (let t of this.$2e) this.mht.appendChild(t.FO());
        }
        b4e(t, i, e, s) {
            gS.Et(t, gS.ti.Tj.Tab), gS.wi(i), gS.wi(e), gS.wi(s);
            let n = new gS.Event("tearofftab");
            (n.tab = t), (n.clientX = i), (n.clientY = e), (n.pointerId = s), this.dispatchEvent(n);
        }
        S4e(t, i, e) {
            gS.Et(t, gS.ti.Tj.Tab), gS.wi(i), gS.wi(e);
            let s = new gS.Event("tabcontextmenu", !0);
            return (s.tab = t), (s.clientX = i), (s.clientY = e), this.dispatchEvent(s);
        }
        Min(t, i, e = !1) {
            gS.qm(t, gS.ti.Tj.Tab), gS.vu(i);
            let s = new gS.Event(i);
            (s.tab = t), (s.P4e = e ? "removal" : ""), this.dispatchEvent(s);
        }
    };
}
{
    const vS = self.t,
        SS = {
            vMt: -1,
            Fj: !1,
            Dj: !1,
            btt: !1,
            cJi: !1,
            Hj: !1,
            HOt: !1,
            GTt: !0,
            vtt: !1,
            KOt: 0.5,
            jTt: " ",
            BTt: "auto",
            ETt: [],
        },
        xS = 400,
        MS = 10,
        ES = 100;
    vS.ti.Tj._j = class extends vS.Event.aG {
        constructor(t, i) {
            super(),
                vS.Gmt(t),
                vS.Crt(i),
                (i = Object.assign({}, SS, i)),
                vS.wi(i.vMt),
                (this.GMt = t),
                (this.Fin = i.vMt),
                this.Fin < 0 && (this.Fin = self.app.Ent()),
                (this.Lin = !!i.Fj && vS.fk.Bj),
                (this.$Se = !!i.Dj),
                (this.Bin = !!i.Hj),
                (this.Uin = !!i.HOt),
                (this.Nin = !!i.btt),
                (this.jin = !!i.cJi),
                (this.$in = !!i.GTt),
                (this.zin = !!i.vtt),
                (this.Vin = i.KOt),
                vS.wi(this.Vin),
                (this.mht = vS.ti.gj("ui-tree", this.GMt)),
                this.mht.setAttribute("role", "tree"),
                this.mht.setAttribute("tabindex", 0),
                (this.I7e = (t) => this.ove()),
                (this.G7e = (t) => this.F3t()),
                this.mht.addEventListener("focus", this.I7e),
                this.mht.addEventListener("blur", this.G7e),
                (this.Qq = (t) => this.lz(t)),
                this.mht.addEventListener("pointerdown", this.Qq),
                (this.RR = (t) => this.Uj(t)),
                this.Uin ? this.mht.setAttribute("fullrowselect", "") : this.mht.setAttribute("itemselect", ""),
                this.$in && this.mht.setAttribute("wraplongitems", ""),
                (this.Aqt = vS.m(vS.ti.Tj._O, this, null, null, "<root>")),
                (this.Win = self.app.ht("expanded")),
                (this.Hin = self.app.ht("collapsed")),
                (this.Kin = new Set()),
                (this.qin = 0),
                (this.Xin = null),
                (this.Yin = 0),
                (this.Jin = new Set()),
                (this._Gt = vS.ti.gj("div", null, null, "tree-insert-mark")),
                (this.Zin = null),
                (this.DGt = ""),
                (this.Qin = null),
                (this.qG = -1),
                (this.Awt = () => this.ten()),
                (this.ien = 0),
                (this.een = 0),
                (this.sen = 0),
                (this.nen = 0),
                (this.ren = ""),
                (this.hen = new vS.kj(() => this.oen(), ES)),
                this.hen.XA(!0),
                (this.aen = !1),
                (this.len = !0),
                (this.uen = null),
                (this.cen = vS.ti.gj("div", this.mht, null, "treeNoItems")),
                (this.cen.textContent = i.jTt || self.lang("ui.controls.tree.no-items-showing")),
                this.cen.setAttribute("position", i.BTt),
                (this.den = vS.ti.gj("div", this.cen, null, "treeNoItemsOptions"));
            for (const t of i.ETt) {
                vS.vu(t.text), vS.vu(t.tag);
                const i = vS.ti.gj("button", this.den, null, "treeNoItemsOption");
                (i.textContent = t.text),
                    i.addEventListener("click", () => this.fen("noitemsoptionclick", { tag: t.tag }));
            }
            (this.pen = !0),
                (this.men = vS.ti.gj("div", null, null, "treeNoSearchResults")),
                this.men.setAttribute("position", i.BTt),
                (this.wen = !1);
        }
        Ut() {
            this.hen.Ut(),
                (this.hen = null),
                this.CF().removeEventListener("keydown", this.RR),
                (this.RR = null),
                this.mht.removeEventListener("pointerdown", this.Qq),
                (this.Qq = null),
                this.Kin.clear(),
                (this.Xin = null),
                this.xF(),
                (this._Gt = null),
                this.gen(),
                (this.Awt = null),
                this.Aqt.Ut(!0),
                (this.Aqt = null),
                vS.ti.Tz(this.men),
                (this.men = null),
                vS.ti.Tz(this.cen),
                (this.cen = null),
                this.mht.removeEventListener("focus", this.I7e),
                this.mht.removeEventListener("blur", this.G7e),
                (this.I7e = null),
                (this.G7e = null),
                vS.ti.Tz(this.mht),
                (this.mht = null),
                (this.GMt = null),
                super.Ut();
        }
        gO(t) {
            (t = !!t), this.Aqt.jFt(t);
        }
        OO(t, i, e) {
            let s;
            (s = t instanceof vS.ti.Tj._O ? t : this.bO((i) => i.Zc() === t)),
                s && ((i = !!i), (e = !!e) ? s.jFt(i) : s.SO(!1, i));
        }
        PO(t) {
            (t = !!t), this.Aqt.FFt(t);
        }
        CO(t, i, e) {
            let s;
            (s = t instanceof vS.ti.Tj._O ? t : this.bO((i) => i.Zc() === t)),
                (i = !!i),
                (e = !!e) ? s.FFt(i) : s.SO(!0, i);
        }
        yen(t) {
            if ((vS.Et(t, vS.ti.Tj._O), t.Rit() !== this)) throw new Error("item from different tree");
        }
        ben(t) {
            if ((vS.qm(t, vS.ti.Tj._O), t && t.Rit() !== this)) throw new Error("item from different tree");
        }
        bO(t) {
            return this.Aqt.bO(t);
        }
        _x() {
            this.xF(), this.Aqt.cB(), this.TFt(!1), this.ven();
        }
        pps() {
            return this.Fin;
        }
        vO() {
            return this.Aqt;
        }
        FO() {
            return this.mht;
        }
        CF() {
            return this.mht.ownerDocument;
        }
        Az() {
            return this.CF().defaultView;
        }
        Sen() {
            return this.Win;
        }
        xen() {
            return this.Hin;
        }
        Men() {
            return this.Lin;
        }
        Een() {
            return this.$Se;
        }
        Cen() {
            return this.Nin;
        }
        _en() {
            return this.jin;
        }
        Ten() {
            return this.Bin;
        }
        Ien(t) {
            this.Bin = !!t;
        }
        Pen() {
            return this.Uin;
        }
        Gen() {
            return this.zin;
        }
        YHi(t) {
            this.yen(t), this.Kin.add(t), this.Aen(t, "itemselect");
        }
        Ren(t) {
            this.yen(t), this.Kin.delete(t);
        }
        rB() {
            return ![...this.Ca()].length;
        }
        eE() {
            let t = 0;
            for (const i of this.M_()) ++t;
            return t;
        }
        wgt() {
            for (const t of this.Kin) t.ken(), t.HIi();
            for (const t of this.Jin.values()) t.ken(), t.HIi();
        }
        fE(t = !1) {
            const i = this.Xin;
            this.qin++;
            for (const t of this.Kin) t.Pit(!1);
            this.qin--,
                (this.Xin = t ? i : null),
                self.assert(0 === this.Kin.size, "should have deleted all selected items");
        }
        Oen(t = !1) {
            const i = this.Xin;
            this.qin++;
            for (const t of this.Kin) t.Den(!1);
            this.qin--,
                this.Kin.clear(),
                (this.Xin = t ? i : null),
                self.assert(0 === this.Kin.size, "should have deleted all selected items");
        }
        *M_() {
            for (const t of this.Kin.values()) t.hMt() || (yield t);
        }
        sE() {
            return vS.vo(this.M_());
        }
        XF() {
            let t = [];
            for (let i of this.M_()) t.push(i);
            return this.Fen(t), t;
        }
        Len(t) {
            this.ben(t), (this.Xin = t);
        }
        Ben() {
            return this.Xin;
        }
        Ca() {
            return this.Aqt.Ca();
        }
        CEe() {
            return this.Aqt.CEe();
        }
        nLt(t, i) {
            vS.vu(t);
            const e = t.toLowerCase();
            for (const t of this.Ca()) if ((i || t.obt()) && t.E_().toLowerCase().startsWith(e)) return t;
            return null;
        }
        $Ji() {
            return this.qin > 0;
        }
        Uen(t, i) {
            if ((this.yen(t), this.yen(i), t === i)) return void t.Pit(!0);
            this.qin++;
            let e = !1,
                s = null,
                n = [];
            for (let r of this.Ca())
                if ((e || (r === t ? ((e = !0), (s = i)) : r === i && ((e = !0), (s = t))), e && (n.push(r), r === s)))
                    break;
            s === t && n.reverse();
            for (let t of n) t.Pit(!0);
            this.qin--;
        }
        XD(t) {
            this.qin++;
            for (const i of t) this.yen(i), i.Pit(!0);
            this.qin--;
        }
        Nen(t) {
            let i;
            this.qin++;
            for (const e of t) i || (i = e), e.Den(!0);
            (this.Kin = new Set(t)), this.qin--, this.Len(i);
        }
        ove() {
            this.CF().addEventListener("keydown", this.RR);
        }
        F3t() {
            this.CF().removeEventListener("keydown", this.RR);
        }
        lz(t) {
            if (t.target !== this.mht || vS.rE.kQ(t) || t.shiftKey) return;
            const i = this.mht.getBoundingClientRect(),
                e = i.left + this.mht.clientWidth,
                s = i.top + this.mht.clientHeight;
            i.left < t.clientX &&
                e > t.clientX &&
                i.top < t.clientY &&
                s > t.clientY &&
                (this.fen("emptyspaceclick"), this.fE());
        }
        Uj(t) {
            if (1 !== this.eE()) return;
            const i = t.which;
            if (i !== vS.fO.V8 && i !== vS.fO.K8) return;
            const e = this.sE(),
                s = [...this.CEe()];
            let n = s.indexOf(e);
            n < 0 || (i === vS.fO.V8 ? --n : ++n, n < 0 || n >= s.length || (s[n].D_(), s[n].H_(), t.preventDefault()));
        }
        jen() {
            return this.Vin;
        }
        uF(t, i, e, s, n) {
            vS.wi(t), vS.wi(i), vS.k$(e), vS._Y(n, vS.ti.Tj._O), (e = e || "full"), (s = !!s);
            const r = this.mht.getBoundingClientRect();
            if (t < r.left || i < r.top || t > r.right || i > r.bottom) return null;
            for (const s of n ?? this.Ca()) {
                if (!s || s.Ijt()) continue;
                const n = s.uF(t, i, e);
                if (n) return { item: s, HF: n.HF, NF: n.NF };
            }
            return s && t > r.left && i > r.top && t < r.right && i < r.bottom
                ? { item: this, HF: "tree", NF: !1 }
                : null;
        }
        WF(t, i) {
            if ((this.yen(t), vS.vu(i), t !== this.Zin || i !== this.DGt)) {
                if ((this.xF(), "inside" === i)) t.HO().setAttribute("insert-inside", "");
                else {
                    if ("before" !== i && "after" !== i) throw new Error("invalid insert mark type");
                    {
                        let e = t.FO();
                        e.parentElement.insertBefore(this._Gt, "before" === i ? e : e.nextSibling);
                    }
                }
                (this.Zin = t), (this.DGt = i);
            }
        }
        xF() {
            this.DGt &&
                ("inside" === this.DGt
                    ? this.Zin.HO().removeAttribute("insert-inside")
                    : ("before" !== this.DGt && "after" !== this.DGt) || vS.ti.Tz(this._Gt),
                (this.Zin = null),
                (this.DGt = ""));
        }
        $en() {
            return this.Zin;
        }
        WP(t) {
            !this.Qin &&
                this.Az() &&
                ((this.Qin = t),
                (this.nen = 0),
                (this.ien = performance.now()),
                (this.qG = this.Az().requestAnimationFrame(this.Awt)));
        }
        XP(t, i) {
            this.Qin && ((this.een = t), (this.sen = i));
        }
        ten() {
            if (((this.qG = -1), !this.Qin || !this.Az())) return;
            let t = performance.now(),
                i = (t - this.ien) / 1e3;
            this.ien = t;
            let e = this.mht.getBoundingClientRect();
            if (this.een >= e.left && this.een <= e.right)
                if (this.sen < e.top + MS) {
                    let t = this.mht.scrollTop - xS * i - this.nen;
                    (this.nen = Math.ceil(t) - t), (t = Math.ceil(t)), (this.mht.scrollTop = t);
                } else if (this.sen > e.bottom - MS) {
                    let t = this.mht.scrollTop + xS * i + this.nen;
                    (this.nen = t - Math.floor(t)), (t = Math.floor(t)), (this.mht.scrollTop = t);
                }
            this.qG = this.Az().requestAnimationFrame(this.Awt);
        }
        xFt() {
            return this.Qin;
        }
        IF() {
            return !!this.Qin;
        }
        Mlt() {
            return this.IF();
        }
        gen() {
            (this.Qin = null), -1 !== this.qG && this.Az() && (this.Az().cancelAnimationFrame(this.qG), (this.qG = -1));
        }
        EF() {
            if (this.Qin) this.Qin.zen(), this.Qin.Ven(), this.gen();
            else for (const t of this.Ca()) t.zen();
        }
        Wen(t, i) {
            (this.Yin += t ? 1 : -1), t ? this.Jin.add(i) : this.Jin.delete(i);
        }
        RT() {
            return this.Yin > 0;
        }
        Fen(t) {
            vS._T(t);
            for (let i of t) this.yen(i);
            this.Hen(), t.sort(vS.ti.Tj._O.Ken);
        }
        Hen() {
            let t = 0;
            for (let i of this.Ca()) i.qen(t++);
        }
        fen(t, i) {
            vS.vu(t);
            let e = new vS.Event(t, !0);
            return (e.DFt = this), this.dispatchEvent(Object.assign(e, i));
        }
        Aen(t, i, e) {
            this.yen(t), vS.vu(i);
            let s = new vS.Event(i, !0);
            return (
                (s.item = t),
                (s.ctrlKey = vS.rE.aE(vS.fO.Obi)),
                (s.metaKey = vS.rE.aE(vS.fO.H$e)),
                (s.shiftKey = vS.rE.aE(vS.fO.hE)),
                this.dispatchEvent(Object.assign(s, e))
            );
        }
        Xen(t, i, e, s) {
            this.yen(t), vS.vu(i), vS.wi(e), vS.wi(s);
            let n = new vS.Event(i, !0);
            return (
                (n.item = t),
                (n.clientX = e),
                (n.clientY = s),
                (n.ctrlKey = vS.rE.aE(vS.fO.Obi)),
                (n.metaKey = vS.rE.aE(vS.fO.H$e)),
                (n.shiftKey = vS.rE.aE(vS.fO.hE)),
                this.dispatchEvent(n)
            );
        }
        $P(t, i) {
            this.yen(t);
            let e = new vS.Event("itemcontextmenu", !0);
            return (e.item = t), (e.clientX = i.clientX), (e.clientY = i.clientY), this.dispatchEvent(e);
        }
        rO(t, i) {
            vS.vu(t),
                vS.Crt(i),
                (this.aen = !1),
                (this.len = !0),
                i && ((this.aen = !!i.uO), (this.len = !!i.Yen), vS.$ke(i.Jen), (this.uen = i.Jen)),
                (this.ren = t),
                i && i.hO ? this.oen() : this.hen.uE();
        }
        oen() {
            const t = this.ren.toLowerCase();
            let i = !0,
                e = !1;
            const s = new Set();
            for (const n of this.Ca())
                if (t) {
                    let r = n.E_().toLowerCase().includes(t);
                    if (this.uen && !r) for (const i of this.uen) if (((r = i(n, n.Zc(), t)), r)) break;
                    if ((n.Zen(r), r)) (e = !0), i && (this.aen && n.D_(), (i = !1));
                    else {
                        const t = n.nE();
                        t && !t.oE() && t.vXs() && (s.add(n), n.Qen());
                    }
                } else n.Qen(), (e = !0);
            for (const t of this.Ca()) {
                if (!t.vXs() || !t.eU()) continue;
                const i = t.pZ().some((t) => t.vXs());
                t.tsn(i, !0);
            }
            for (const t of s.values()) {
                const i = t.Zc();
                if (vS.ca(i, self.iE) || vS.GUt(i.r_)) {
                    if (!t.eU()) {
                        t.Zen(!1);
                        break;
                    }
                    t.pZ().some((t) => t.vXs()) || t.Zen(!1);
                }
            }
            if (!t) {
                for (const t of this.Ca()) t.isn();
                if (this.len) {
                    const t = this.sE();
                    t && t.obt() && t.H_();
                }
            }
            this.TFt(t && !e), this.ven();
            const n = new vS.Event("searchresultsupdate");
            this.dispatchEvent(n);
        }
        XFt(t) {
            vS.vu(t), (this.cen.textContent = t);
        }
        YFt(t) {
            (t = !!t), (this.den.style.display = t ? "" : "none");
        }
        ven() {
            const t = ![...this.Ca()].length;
            (this.pen = t),
                this.pen
                    ? (this.mht.contains(this.cen) || this.mht.appendChild(this.cen),
                      this.cen.contains(this.den) || this.cen.appendChild(this.den))
                    : this.mht.contains(this.cen) && vS.ti.Tz(this.cen);
        }
        SFt() {
            return this.wen;
        }
        TFt(t) {
            this.wen !== t
                ? ((this.wen = t),
                  this.wen
                      ? (this.mht.contains(this.men) || this.mht.appendChild(this.men),
                        (this.men.textContent = self.ej("ui.controls.tree.no-text-search-results", this.ren)))
                      : vS.ti.Tz(this.men))
                : this.wen &&
                  (this.mht.contains(this.men) || this.mht.appendChild(this.men),
                  (this.men.textContent = self.ej("ui.controls.tree.no-text-search-results", this.ren)));
        }
        _A() {
            return { name: this.Aqt.E_(), children: [...this.Aqt.children()].map((t) => t._A()) };
        }
        xH(t) {
            if ((vS.oN(t), !t)) return;
            if (this.ren) return;
            this.Aen(this.Aqt, "setjson");
            const i = [...this.Aqt.children()];
            for (let e = 0; e < i.length; e++) {
                const s = i[e];
                s && s.xH(this.esn(s, t.children), []);
            }
            this.Aen(this.Aqt, "setjsonfinish");
        }
        esn(t, i) {
            const e = t.E_();
            for (let t = 0; t < i.length; t++) {
                if (e === i[t].name) return i[t];
            }
        }
        MA(t, i, e) {
            if ((vS.oN(t), vS.wi(i), vS.yp(e), !t)) return;
            if (this.ren) return;
            let s = this.bO(e),
                n = t.children[i];
            s && n && s.xH(n);
        }
    };
}
{
    const CS = self.t,
        _S = self.assert;
    let TS = [{ height: "" }, { height: "" }];
    const IS = { duration: 200, easing: "ease" },
        PS = { enable: !0, addToParent: !0 },
        GS = 700,
        AS = 10;
    CS.ti.Tj._O = class t extends CS.MV {
        constructor(t, i, e, s, n, r, h) {
            if (
                (CS.Et(t, CS.ti.Tj._j),
                CS.qm(i, CS.ti.Tj._O),
                CS.vu(s),
                CS.HI(r),
                CS.oN(h),
                super(),
                (h = Object.assign({}, PS, h)),
                !(null == e || CS.tet(e) || e instanceof CS.ti.zrt))
            )
                throw new TypeError("invalid icon");
            (this.Ej = t),
                (this.GMt = i || null),
                (this.UNt = CS.tet(e) ? self.app.ht(e) : e),
                (this.Hin = null),
                (this.ux = s),
                (this.pp = n),
                (this.FDs = h.enable),
                (this.mht = null),
                (this.pEt = null),
                (this.Mai = !0),
                (this.ssn = !1),
                (this.mbt = null),
                (this.nsn = ""),
                (this.Rvs = []),
                (this.rsn = !1),
                (this.hsn = !1),
                (this.osn = null),
                (this.Qq = null),
                (this.asn = -1),
                (this.lsn = (t) => this.usn()),
                (this.csn = !0),
                (this.dsn = (t) => this.fsn(t)),
                (this.psn = 0),
                (this.msn = 0),
                (this.EGt = -1),
                (this.T3 = 0),
                (this.E3 = 0),
                (this.Ewt = !1),
                (this.MR = null),
                (this.OR = null),
                (this.wtn = null),
                (this.wsn = null),
                (this.gsn = 0),
                (this.ysn = 0),
                (this.fvt = (t) => this.cz(t)),
                (this.mEt = (t) => this.vEt(t)),
                (this.vbt = (t) => this.wbt()),
                (this.bsn = null),
                (this.dvt = !1),
                (this.S6 = (t) => this.fz(t)),
                (this.vsn = null),
                (this.Ssn = null),
                (this.xsn = null),
                (this.iut = null),
                (this.Msn = null),
                (this.Esn = null),
                (this.Y9e = null),
                (this.Rht = null),
                (this.Csn = null),
                (this._sn = null),
                (this.V7e = null),
                (this.Tsn = null),
                (this.Isn = null),
                (this.Psn = -1),
                this.oE() ||
                    (h.addToParent
                        ? (this.mht = CS.ti.gj("ui-treeitem", this.GMt.cMt(), null, null, null, r))
                        : (this.mht = CS.ti.gj("ui-treeitem")),
                    this.mht.setAttribute("role", "treeitem"),
                    this.mht.addEventListener("contextmenu", this.S6),
                    this.FDs || this.mht.setAttribute("disable", ""),
                    (this.pEt = CS.m(CS.ti.met, this.Ej.Sen().O5e(), this.mht)),
                    (this.bsn = CS.ti.gj("div", this.mht, null, "tree-item-wrap")),
                    this._B().addEventListener("UIDoubleTap", this.fvt),
                    (this.iut = CS.m(CS.ti.met, this.UNt || this.Ej.pps(), this.bsn)),
                    (this.Msn = (t) => this.Gsn(t)),
                    this.iut.FO().addEventListener("pointerdown", this.Msn),
                    (this.Y9e = CS.ti.gj("span", this.bsn, null, "tree-item-name")),
                    (this.Y9e.textContent = this.ux),
                    (this.Tsn = (t) => this.Asn()),
                    (this.Qq = (t) => this.lz(t)),
                    this._B().addEventListener("pointerdown", this.Qq),
                    (this.MR = (t) => this.GR(t)),
                    (this.OR = (t) => this.CR(t)),
                    (this.wtn = (t) => this.n0(t))),
                (this.Rsn = !1),
                (this.di = !1),
                (this.qet = !1);
        }
        ksn(t) {
            (t = !!t), (this.hsn = t);
        }
        d_(t) {
            return this.hsn;
        }
        cB() {
            this.kbt(), (this.rsn = !0);
            for (let t = this.Rvs.length - 1; t >= 0; --t) {
                let i = this.Rvs[t];
                i.ksn(!0), i.Ut();
            }
            CS.yh(this.Rvs), (this.rsn = !1), this.Yjt();
        }
        OJs(t) {
            if ((CS.Et(t, CS.ti.Tj._O), t.Ijt())) return;
            if (this.rsn) return;
            let i = this.Rvs.indexOf(t);
            _S(i >= 0, "cannot find child to remove"), this.Rvs.splice(i, 1), this.Rvs.length || this.Yjt();
        }
        Nit() {
            _S(this.Rit().Gen(), "configure tree to use detachable items"), this.Rit().wgt();
            const t = [];
            for (const i of this.Ca()) i.Ovt(), t.push(i);
            return this.cMt() && CS.ti.fMt(this.cMt()), CS.yh(this.Rvs), this.Yjt(), t;
        }
        Ovt() {
            this.HIi(), this.ken(), this.kbt(), this.Pit(!1), (this.Rsn = !0), CS.yh(this.Rvs), this.Yjt();
        }
        Ut(t) {
            if (!this.di) {
                if (((this.di = !0), this.oE() && !t)) throw new Error("root item cannot be removed");
                if (
                    (this.ken(),
                    (this.dsn = null),
                    this.HIi(),
                    this.kbt(),
                    this.Pit(!1),
                    this.Ej.Ben() === this && (this.Ej.eE() >= 1 ? this.Ej.Len(this.Ej.sE()) : this.Ej.Len(null)),
                    this.Ej.$en() === this && this.Ej.xF(),
                    this.Ewt && this.Ej.EF(),
                    this.cB(),
                    (this.vbt = null),
                    (this.Tsn = null),
                    this.oE() ||
                        (this._B().removeEventListener("UIDoubleTap", this.fvt),
                        this._B().removeEventListener("pointerdown", this.Qq),
                        this.CF().removeEventListener("pointermove", this.MR),
                        this.CF().removeEventListener("pointerup", this.OR),
                        this.CF().removeEventListener("pointercancel", this.wtn)),
                    this.pEt &&
                        (this.pEt.FO().removeEventListener("UITap", this.mEt), this.pEt.Ut(), (this.pEt = null)),
                    this.osn && (CS.ti.Tz(this.osn), (this.osn = null)),
                    this.Y9e && (CS.ti.Tz(this.Y9e), (this.Y9e = null)),
                    this.wsn && (CS.ti.Tz(this.wsn), (this.wsn = null)),
                    this.vsn &&
                        (this.vsn.removeEventListener("change", this.Ssn),
                        (this.Ssn = null),
                        this.vsn.removeEventListener("UIDoubleTap", this.xsn),
                        (this.xsn = null),
                        this.vsn.removeEventListener("pointerdown", CS.ti.sue),
                        CS.ti.Tz(this.vsn),
                        (this.vsn = null)),
                    this.iut &&
                        (this.iut.FO().removeEventListener("pointerdown", this.Msn),
                        (this.Msn = null),
                        this.iut.Ut(),
                        (this.iut = null)),
                    this.Esn)
                ) {
                    for (const t of this.Esn.values()) t.Osn.Ut();
                    this.Esn.clear(), (this.Esn = null);
                }
                this.bsn && (CS.ti.Tz(this.bsn), (this.bsn = null)),
                    this.mht &&
                        (this.mht.removeEventListener("contextmenu", this.S6), CS.ti.Tz(this.mht), (this.mht = null)),
                    (this.S6 = null),
                    (this.fvt = null),
                    (this.Qq = null),
                    (this.MR = null),
                    (this.OR = null),
                    (this.wtn = null),
                    (this.lsn = null),
                    (this.mEt = null),
                    this.GMt && -1 !== this.GMt.jO(this) && this.GMt.OJs(this),
                    this.GMt && !this.GMt.eU() && this.Yjt(),
                    this.oE() || this.Ej.Aen(this, "itemremove"),
                    (this.UNt = null),
                    (this.pp = null),
                    (this.Ej = null),
                    (this.GMt = null),
                    CS.Ut(this);
            }
        }
        FO() {
            return this.mht;
        }
        HO() {
            return this.bsn;
        }
        Aqi() {
            return this.Y9e;
        }
        _B() {
            return this.Ej.Pen() ? this.mht : this.bsn;
        }
        Rit() {
            return this.Ej;
        }
        Dsn(t) {
            this.Ej = t;
        }
        CF() {
            return this.mht.ownerDocument;
        }
        qL(t) {
            (t = !!t),
                this.FDs !== t &&
                    ((this.FDs = t),
                    this.FDs ? this.mht.removeAttribute("disable") : this.mht.setAttribute("disable", ""));
        }
        $K() {
            return this.FDs;
        }
        Ijt() {
            return this.Rsn;
        }
        gi() {
            return this.di;
        }
        *Ca() {
            this.oE() || (yield this);
            for (const t of this.Rvs) yield* t.Ca();
        }
        *CEe() {
            if ((this.oE() || (yield this), this.Fsn())) for (const t of this.Rvs) t.hMt() || (yield* t.CEe());
        }
        *children() {
            for (let t of this.Rvs) yield t;
        }
        lz(t) {
            if (t.button !== CS.sQ.z0) return;
            const i = t.clientX,
                e = t.clientY;
            this.Ej.Xen(this, "itemdown", i, e),
                this._B().setAttribute("pointerheld", ""),
                this.CF().addEventListener("pointermove", this.MR),
                this.CF().addEventListener("pointerup", this.OR),
                this.CF().addEventListener("pointercancel", this.wtn),
                (this.EGt = t.pointerId),
                (this.T3 = i),
                (this.E3 = e),
                (this.Ewt = !1),
                "match" === this.nsn && this.Lsn(!0),
                t.stopPropagation();
        }
        GR(t) {
            if (t.pointerId !== this.EGt) return;
            const i = t.clientX,
                e = t.clientY;
            if ((t.stopPropagation(), this.Ej.Ten() && !this.Ewt && CS.gt(this.T3, this.E3, i, e) >= AS)) {
                if ((this._B().removeAttribute("pointerheld", ""), !this.Ej.Xen(this, "dragstart", i, e)))
                    return (
                        (this.EGt = -1),
                        this.CF().removeEventListener("pointermove", this.MR),
                        this.CF().removeEventListener("pointerup", this.OR),
                        this.CF().removeEventListener("pointercancel", this.wtn),
                        void (this.c$() || this.D_())
                    );
                {
                    (this.Ewt = !0), this.ken(), this.Ej.Len(this), this.c$() || this.D_();
                    for (let t of this.Ej.M_()) t._B().setAttribute("dragged", "");
                    1 === this.Ej.eE()
                        ? ((this.wsn = this.bsn.cloneNode(!0)),
                          this.wsn.removeAttribute("selected"),
                          this.wsn.setAttribute("drag-thumbnail", ""))
                        : ((this.wsn = this.Y9e.cloneNode(!0)),
                          this.wsn.setAttribute("drag-thumbnail", ""),
                          (this.wsn.textContent = self.iG(
                              "ui.controls.tree.multi-select-drag-tooltip",
                              null,
                              this.Ej.eE()
                          )));
                    let t = CS.qfi(this.mht, "dialog");
                    if (t) {
                        t.appendChild(this.wsn);
                        let i = CS.ti.Ze.UZe(t);
                        (this.gsn = i.Hgi()), (this.ysn = i.Jgi());
                    } else this.CF().body.appendChild(this.wsn);
                    this.Ej.WP(this);
                }
            }
            this.Ewt &&
                (t.preventDefault(),
                this.Ej.Xen(this, "dragmove", i, e),
                (this.wsn.style.left = i - this.gsn + "px"),
                (this.wsn.style.top = e - this.ysn + "px"),
                this.Ej.XP(i, e));
        }
        fsn(t) {
            (this.psn = t.clientX), (this.msn = t.clientY);
        }
        CR(t) {
            if (t.pointerId !== this.EGt) return;
            const i = t.clientX,
                e = t.clientY;
            if (
                (this._B().removeAttribute("pointerheld", ""),
                this.CF().removeEventListener("pointermove", this.MR),
                this.CF().removeEventListener("pointerup", this.OR),
                this.CF().removeEventListener("pointercancel", this.wtn),
                this.Ewt)
            )
                this.Ven(), this.Ej.gen(), this.Ej.Xen(this, "drop", i, e);
            else {
                if (t.target === this.vsn) return;
                let s = !1;
                (s = 1 === this.Ej.eE() || this.Ej._en()),
                    this.Ej.Men() &&
                        this.c$() &&
                        s &&
                        this.uF(i, e, "label") &&
                        (this.ken(),
                        t.target !== this.iut.FO() &&
                            ((this.psn = i),
                            (this.msn = e),
                            this.CF().addEventListener("pointermove", this.dsn),
                            (this.asn = setTimeout(this.lsn, GS)))),
                    this.Ej.Xen(this, "itemclick", i, e);
                let n = this.Ej.Ben();
                if (this.Ej.Een()) {
                    let t = CS.rE.kQ(),
                        s = CS.rE.aE(CS.fO.hE);
                    if (t && s && n)
                        return (
                            this.Ej.Uen(this, n),
                            this.c$() && this.Ej.Len(this),
                            this.Ej.Cen() && this.Bsn(!0),
                            void this.Ej.Xen(this, "afteritemclick", i, e)
                        );
                    if (t) {
                        let t = !this.c$();
                        return (
                            this.Pit(t),
                            this.c$() && this.Ej.Len(this),
                            this.Ej.Cen() && this.Bsn(t),
                            void this.Ej.Xen(this, "afteritemclick", i, e)
                        );
                    }
                    if (s && n)
                        return (
                            this.Ej.fE(!0),
                            this.Ej.Uen(this, n),
                            this.Ej.Cen() && (this.Bsn(!0), n.Bsn(!0)),
                            void this.Ej.Xen(this, "afteritemclick", i, e)
                        );
                }
                this.Ej.Len(this),
                    this.Usn(!1),
                    this.Ej.fE(),
                    this.Pit(!0),
                    this.Usn(!0),
                    this.Ej.Cen() && this.Bsn(!0),
                    this.Ej.Xen(this, "afteritemclick", i, e);
            }
        }
        n0(t) {
            this._B().removeAttribute("pointerheld", ""),
                this.CF().removeEventListener("pointermove", this.MR),
                this.CF().removeEventListener("pointerup", this.OR),
                this.CF().removeEventListener("pointercancel", this.wtn),
                this.HIi(),
                this.ken(),
                this.Ej.fE(),
                this.Ven(),
                this.Ej.gen();
        }
        zen() {
            -1 !== this.EGt &&
                (this._B().removeAttribute("pointerheld", ""),
                this.CF().removeEventListener("pointermove", this.MR),
                this.CF().removeEventListener("pointerup", this.OR),
                this.CF().removeEventListener("pointercancel", this.wtn));
        }
        Ven() {
            (this.Ewt = !1), (this.EGt = -1);
            for (const t of this.Ej.M_()) t._B().removeAttribute("dragged");
            CS.ti.Tz(this.wsn), (this.wsn = null);
        }
        Bsn(t) {
            if (((t = !!t), this.eU())) for (let i of this.children()) i.Pit(t);
        }
        cz(t) {
            this.ken(), this.Ej.Aen(this, "itemdoubletap") && this.osn && this.xbt(!0);
        }
        Gsn(t) {
            this.ken(), t.button === CS.sQ.z0 && (this.Ej.Aen(this, "itemiconclick") || t.stopPropagation());
        }
        bO(t) {
            if ((CS.yp(t), t(this))) return this;
            for (let i = 0; i < this.Rvs.length; i++) {
                let e = this.Rvs[i].bO(t);
                if (e) return e;
            }
        }
        cMt() {
            return this.oE() ? this.Ej.FO() : this.osn;
        }
        eU() {
            return this.Rvs.length > 0;
        }
        gZ() {
            return this.Rvs;
        }
        *pZ() {
            for (const t of this.Rvs) yield t, yield* t.pZ();
        }
        Nsn() {
            return this.Rvs.length;
        }
        jO(t) {
            return CS.Et(t, CS.ti.Tj._O), this.Rvs.indexOf(t);
        }
        oE() {
            return !this.GMt;
        }
        nE() {
            return this.GMt;
        }
        JF(i) {
            let e, s;
            CS.GUt(i) ? (s = i) : (e = i), e && CS.Et(e, t), s && CS.yp(s);
            for (let t of this.Agt())
                if (e) {
                    if (t === e) return !0;
                } else if (s && s(t)) return !0;
            return !1;
        }
        *Agt() {
            let t = this.nE();
            for (; t; ) yield t, (t = t.oE() ? null : t.nE());
        }
        E_() {
            return this.ux;
        }
        In(t) {
            CS.vu(t), this.ux !== t && ((this.ux = t), this.Rht || (this.Y9e.textContent = t));
        }
        Zie(t) {
            this.pp = t;
        }
        Zc(t) {
            return this.pp;
        }
        uF(t, i, e) {
            let s;
            if ((CS.wi(t), CS.wi(i), CS.vu(e), "label" === e)) s = this.bsn.getBoundingClientRect();
            else {
                if ("full" !== e) throw new Error("invalid hit test type");
                s = this.mht.getBoundingClientRect();
            }
            if (t < s.left || t > s.right || i < s.top || i > s.bottom) return null;
            const n = (1 - this.Ej.jen()) / 2;
            let r = s.bottom - s.top,
                h = s.top + r * n,
                o = s.bottom - r * n,
                a = i >= s.top + r / 2,
                l = i > h && i <= o;
            return a && !l && this.Fsn() && this.eU() && (l = !0), { HF: a ? "after" : "before", NF: l };
        }
        jsn() {
            if ((this._ii(), this.Fsn())) for (let t of this.Rvs) t.jsn();
        }
        zD(t) {
            if (!(CS.tet(t) || t instanceof CS.ti.zrt)) throw new TypeError("invalid icon");
            this.iut && (CS.tet(t) ? this.iut.zD(self.app.ht(t)) : this.iut.zD(t));
        }
        $sn(t, i) {
            if ((CS.vu(t), !(CS.tet(i) || i instanceof CS.ti.zrt))) throw new TypeError("invalid icon");
            const e = this.Esn.get(t);
            e && (CS.tet(i) ? e.Osn.zD(self.app.ht(i)) : e.Osn.zD(i));
        }
        JB(t) {
            CS.yp(t), this.iut && (this.iut.JB(t), this.obt() && this._ii());
        }
        _ii() {
            this.iut._ii();
        }
        obt() {
            let t = this.GMt;
            for (; t; ) {
                if (!t.Fsn()) return !1;
                t = t.GMt;
            }
            return !0;
        }
        Lsn(t) {
            t = !!t;
            for (const i of this.Agt()) i.oE() || (i.Mai = t);
        }
        vEt(t) {
            t.detail.mK === CS.sQ.z0 && this.xbt(!0);
        }
        h_() {
            return this.Mai;
        }
        Fsn() {
            return this.vXs() ? this.ssn : this.h_() || this.ssn;
        }
        zsn(t) {
            return !!((t = !!t) && this.obt() && self.app.Cbt());
        }
        Vsn(t) {
            return (!(t = !!t) || (t && this.Abt())) && !!this.mbt;
        }
        SO(t, i, e) {
            if (this.oE()) throw new Error("cannot change expanded state of root item");
            if (((t = !!t), (i = !!(i && this.obt() && self.app.Cbt())), !this.osn))
                return e || (this.Mai = t), void this.pEt.zD(null);
            (!i || (i && this.Abt())) && (this.kbt(), (i = !1));
            if (this.Fsn() !== t)
                if (t) {
                    if (
                        (e ? (this.ssn = !0) : (this.Mai = !0),
                        this.osn.removeAttribute("collapsed"),
                        this.eU()
                            ? (this.pEt.zD(this.Ej.Sen()), this.Hin && this.iut.zD(this.UNt))
                            : (this.pEt.zD(null), this.iut.zD(this.UNt)),
                        e || this.Wsn(i),
                        this.obt() && this.jsn(),
                        i)
                    ) {
                        let t = this.osn.getBoundingClientRect(),
                            i = t.bottom - t.top;
                        (TS[0].height = "0px"),
                            (TS[1].height = `${i}px`),
                            (this.osn.style.overflow = "hidden"),
                            (this.mbt = this.osn.animate(TS, IS)),
                            (this.mbt.onfinish = this.vbt);
                    }
                } else if (
                    ((this.ssn = !1),
                    e || (this.Mai = !1),
                    this.eU()
                        ? (this.pEt.zD(this.Ej.xen()), this.Hin && this.iut.zD(this.Hin))
                        : (this.pEt.zD(null), this.iut.zD(this.UNt)),
                    e || this.Wsn(i),
                    i)
                ) {
                    let t = this.osn.getBoundingClientRect(),
                        i = t.bottom - t.top;
                    (TS[0].height = `${i}px`),
                        (TS[1].height = "0px"),
                        (this.osn.style.overflow = "hidden"),
                        (this.mbt = this.osn.animate(TS, IS)),
                        (this.mbt.onfinish = this.vbt);
                } else this.osn.setAttribute("collapsed", "");
        }
        isn() {
            this.Mai
                ? this.osn && this.osn.hasAttribute("collapsed")
                    ? ((this.Mai = !1), (this.ssn = !1), this.SO(!0, !1))
                    : this.SO(this.Mai, !1)
                : this.osn && !this.osn.hasAttribute("collapsed")
                  ? ((this.Mai = !0), (this.ssn = !1), this.SO(!1, !1))
                  : this.SO(this.Mai, !1);
        }
        Wsn(t) {
            this.qet || this.Ej.Aen(this, "itemexpand", { wMt: t });
        }
        Hsn() {
            let t = this.GMt;
            for (; t; ) {
                if (!t.oE() && t.Fsn()) return !0;
                t = t.nE();
            }
            return !1;
        }
        Ksn() {
            let t = this.GMt;
            for (; t; ) {
                if (!t.oE() && !t.Fsn()) return !0;
                t = t.nE();
            }
            return !1;
        }
        qsn() {
            if (!this.oE() && this.Fsn()) return !0;
            for (const t of this.Ca()) if (t.Fsn()) return !0;
            return !1;
        }
        Xsn() {
            if (!this.oE() && !this.Fsn()) return !0;
            for (const t of this.Ca()) if (!t.Fsn()) return !0;
            return !1;
        }
        FFt(t, i = !0, e = []) {
            let s;
            (t = !!t), (i = !!i) && ((s = this.Xsn()), s && this.Ej.Aen(this, "itemexpandmany"));
            let n = null;
            if (!this.oE()) {
                if (((t = this.zsn(t)), (t = this.Vsn(t)) && this.osn && !this.Fsn())) {
                    const t = new Promise((t) => {
                        (n = (i) => {
                            i.item === this && t();
                        }),
                            this.Ej.addEventListener("itemexpandfinish", n);
                    });
                    e.push({ promise: t, item: this, Ysn: n });
                }
                this.SO(!0, t);
            }
            let r = this.Rvs.length;
            for (let i = 0; i < r; i++) this.Rvs[i].FFt(t, !1, e);
            i && CS.Xee(s) && s
                ? e.length
                    ? Promise.all(e.map((t) => t.promise)).then(() => {
                          e.forEach((t) => this.Ej.removeEventListener("itemexpandfinish", t.Ysn)),
                              this.Ej.Aen(this, "itemexpandmanyfinish");
                      })
                    : this.Ej.Aen(this, "itemexpandmanyfinish")
                : e.forEach((t) => this.Ej.removeEventListener("itemexpandfinish", t.Ysn));
        }
        jFt(t, i = !0, e = []) {
            let s;
            (t = !!t), (i = !!i) && ((s = this.qsn()), s && this.Ej.Aen(this, "itemexpandmany"));
            let n = null;
            if (!this.oE()) {
                if (((t = this.zsn(t)), (t = this.Vsn(t)) && this.osn && this.Fsn())) {
                    const t = new Promise((t) => {
                        (n = (i) => {
                            i.item === this && t();
                        }),
                            this.Ej.addEventListener("itemexpandfinish", n);
                    });
                    e.push({ promise: t, item: this, Ysn: n });
                }
                this.SO(!1, t);
            }
            let r = this.Rvs.length;
            for (let i = 0; i < r; i++) this.Rvs[i].jFt(t, !1);
            i && CS.Xee(s) && s
                ? e.length
                    ? Promise.all(e.map((t) => t.promise)).then(() => {
                          e.forEach((t) => this.Ej.removeEventListener("itemexpandfinish", t.Ysn)),
                              this.Ej.Aen(this, "itemexpandmanyfinish");
                      })
                    : this.Ej.Aen(this, "itemexpandmanyfinish")
                : e.forEach((t) => this.Ej.removeEventListener("itemexpandfinish", t.Ysn));
        }
        xbt(t) {
            this.SO(!this.Fsn(), t, this.vXs());
        }
        Abt() {
            return !!this.mbt;
        }
        wbt() {
            this.mbt &&
                (this.Fsn() || this.osn.setAttribute("collapsed", ""),
                (this.osn.style.overflow = ""),
                (this.mbt = null),
                this.Ej.Aen(this, "itemexpandfinish"));
        }
        kbt() {
            this.mbt && (this.mbt.cancel(), this.wbt());
        }
        D_() {
            (this.c$() && 1 === this.Ej.eE()) || (this.Ej.fE(), this.Pit(!0));
        }
        xT() {
            this.Pit(!1);
        }
        c$(t) {
            return this.dvt;
        }
        Pit(t) {
            this.oE() ||
                ((t = !!t),
                this.ken(),
                this.dvt !== t &&
                    (t
                        ? (this.Ej.Aen(this, "beforeitemselect"),
                          this._B().setAttribute("selected", ""),
                          this.Ej.YHi(this),
                          this.Ej.Ben() || this.Ej.Len(this))
                        : (this._B().removeAttribute("selected"),
                          this.Ej.Ren(this),
                          this.Ej.Ben() === this &&
                              (this.Ej.eE() >= 1 ? this.Ej.Len(this.Ej.sE()) : this.Ej.Len(null))),
                    (this.dvt = t)));
        }
        Den(t) {
            this.oE() ||
                ((t = !!t),
                this.ken(),
                this.dvt !== t &&
                    (t ? this._B().setAttribute("selected", "") : this._B().removeAttribute("selected"),
                    (this.dvt = t)));
        }
        lMt() {
            if (!this.oE() && !this.osn) {
                if (
                    (this.mht.classList.add("parentItem"),
                    (this.osn = CS.ti.gj("ui-treeitem-children")),
                    this.Rvs.length && this.pEt)
                ) {
                    this.pEt.zD(null), this.pEt.FO().removeEventListener("UITap", this.mEt);
                    let t = this.Fsn() ? this.Ej.Sen() : this.Ej.xen();
                    this.pEt.zD(t),
                        this.Hin && ((t = this.Fsn() ? this.UNt : this.Hin), this.iut.zD(t)),
                        this.pEt.FO().addEventListener("UITap", this.mEt);
                }
                this.mht.parentElement || CS.ti.g9t(this.mht, this.GMt.cMt()),
                    this.mht.parentElement.insertBefore(this.osn, this.mht.nextSibling),
                    this.Fsn() || this.osn.setAttribute("collapsed", "");
            }
        }
        Jsn() {
            for (let t of this.Rvs) {
                let i = t.cMt();
                if (!i) continue;
                let e = t.FO();
                if (i.previousSibling === e) return;
                i.parentElement && i.parentElement.removeChild(i),
                    e.parentElement && e.parentElement.insertBefore(i, e.nextSibling);
            }
        }
        uMt() {
            const t = this.cMt();
            for (let i = 0; i < this.Rvs.length; i++) {
                const e = this.Rvs[i],
                    s = e.cMt();
                e && e.FO().parentElement === t && t.appendChild(e.FO()),
                    s && s.parentElement === t && t.appendChild(s);
            }
        }
        Yjt() {
            this.oE() ||
                (this.osn &&
                    (this.mht.classList.remove("parentItem"),
                    this.pEt.zD(null),
                    this.Hin && this.iut.zD(this.UNt),
                    this.pEt.FO().removeEventListener("UITap", this.mEt),
                    CS.ti.Tz(this.osn),
                    (this.osn = null)));
        }
        mB(t, i, e, s, n) {
            if (!(null == t || CS.tet(t) || t instanceof CS.ti.zrt)) throw new TypeError("invalid icon");
            CS.vu(i), this.lMt();
            let r = CS.m(CS.ti.Tj._O, this.Ej, this, t, i, e, s, n);
            return this.Zsn(r, s), (!n || (n && n.repositionChildContainers)) && this.Jsn(), r;
        }
        xO(t, i, e, s) {
            return (
                CS.Et(t, CS.ti.Tj._O),
                CS.k$(i),
                CS.HI(e),
                _S(this.Rit().Gen(), "configure tree to use detachable items"),
                _S(!t.gi(), "item already released"),
                _S(!t.oE(), "can not add root item"),
                _S(t.Ijt(), "item is not detached"),
                this.lMt(),
                i && t.In(i),
                (t.GMt = this),
                (t.Rsn = !1),
                (!s || (s && s.addToParent)) && CS.ti.g9t(t.FO(), this.cMt(), e),
                this.Zsn(t, e),
                (!s || (s && s.repositionChildContainers)) && this.Jsn(),
                t
            );
        }
        Zsn(t, i) {
            if (
                (CS.Et(t, CS.ti.Tj._O),
                CS.HI(i),
                CS.Xl(i) ? (i < 0 ? this.Rvs.unshift(t) : this.Rvs.splice(i, 0, t)) : this.Rvs.push(t),
                this.Rvs.length && this.pEt && !this.oE())
            ) {
                this.pEt.zD(null), this.pEt.FO().removeEventListener("UITap", this.mEt);
                let t = this.Fsn() ? this.Ej.Sen() : this.Ej.xen();
                this.pEt.zD(t),
                    this.Hin && ((t = this.Fsn() ? this.UNt : this.Hin), this.iut.zD(t)),
                    this.pEt.FO().addEventListener("UITap", this.mEt);
            }
            this.Ej.ven();
        }
        DE(t) {
            t ? this.mht.setAttribute("fade", "") : this.mht.removeAttribute("fade", "");
        }
        y_(t) {
            CS.Et(t, CS.ti.zrt), this.oE() || ((this.Hin = t), this.osn && !this.Fsn() && this.iut.zD(this.Hin));
        }
        w_(t) {
            CS.Et(t, CS.ti.zrt), this.oE() || ((this.UNt = t), this.osn && this.Fsn() && this.iut.zD(this.UNt));
        }
        fz(t) {
            this.c$() || this.D_(), this.ken(), this.Ej.$P(this, t) || (t.preventDefault(), t.stopPropagation());
        }
        ast(t) {
            t = !!t;
            const i = this.Ksn();
            i && this.Ej.Aen(this, "itemexpandmany");
            const e = [];
            let s = this.GMt;
            for (; s; ) {
                if (!s.oE()) {
                    let i = this.zsn(t);
                    i = this.Vsn(i);
                    let n = null;
                    if (i && this.osn && !this.Fsn()) {
                        const t = new Promise((t) => {
                            (n = (i) => {
                                i.item === this && t();
                            }),
                                this.Ej.addEventListener("itemexpandfinish", n);
                        });
                        e.push({ promise: t, item: this, Ysn: n });
                    }
                    s.SO(!0, i);
                }
                s = s.nE();
            }
            i
                ? e.length
                    ? Promise.all(e.map((t) => t.promise)).then(() => {
                          e.forEach((t) => this.Ej.removeEventListener("itemexpandfinish", t.Ysn)),
                              this.Ej.Aen(this, "itemexpandmanyfinish");
                      })
                    : this.Ej.Aen(this, "itemexpandmanyfinish")
                : e.forEach((t) => this.Ej.removeEventListener("itemexpandfinish", t.Ysn));
        }
        H_(t = "auto") {
            this.Ej && CS.ti.H_(this.mht, this.Ej.FO(), t);
        }
        DO(t) {
            (t = !!t), this.ast(t), this.H_();
        }
        usn() {
            (this.asn = -1),
                this.mht && this.CF().removeEventListener("pointermove", this.dsn),
                this.uF(this.psn, this.msn, "label") && this.Ej.Aen(this, "itemedit");
        }
        Usn(t) {
            this.csn = !!t;
        }
        ken() {
            this.csn &&
                (this.mht && this.CF().removeEventListener("pointermove", this.dsn),
                -1 !== this.asn && (clearTimeout(this.asn), (this.asn = -1)));
        }
        TJi() {
            return !!this.Rht;
        }
        __(t = this.E_(), i = 0, e = t.length) {
            if ((CS.k$(t), this.Rht || this.di)) return Promise.resolve("");
            this.D_(), this.DO();
            const s = this.Ej.FO(),
                n = s.getBoundingClientRect();
            let r = this.Y9e.getBoundingClientRect();
            const h = CS.ft(r.width + 5, 30, s.clientWidth - (r.left - n.left) - 15),
                o = r.left - n.left,
                a = r.top - n.top + s.scrollTop;
            return (
                (this.Rht = CS.ti.gj("input", this.Ej.FO(), null, "tree-edit-text")),
                (this.Rht.type = "text"),
                (this.Rht.style.left = `${o}px`),
                (this.Rht.style.top = `${a}px`),
                (this.Rht.style.width = `${h}px`),
                (this.Rht.style.maxWidth = `${h}px`),
                this.Rht.setAttribute("spellcheck", "false"),
                (this.Csn = (t) => this.YWe()),
                this.Rht.addEventListener("blur", this.Csn),
                (this._sn = (t) => this.Qsn()),
                this.Rht.addEventListener("input", this._sn),
                (this.V7e = (t) => this.tnn(t)),
                this.Rht.addEventListener("keydown", this.V7e, !0),
                this.Ej.FO().addEventListener("scroll", this.Tsn),
                this.Ej.Wen(!0, this),
                (this.Rht.value = t),
                this.Rht.focus(),
                this.Rht.setSelectionRange(i, e),
                (this.Y9e.textContent = "."),
                (r = this.Y9e.getBoundingClientRect()),
                (this.Rht.style.height = r.bottom - r.top + "px"),
                new Promise((t) => (this.Isn = t))
            );
        }
        tnn(t) {
            t.which === CS.fO.o3
                ? (t.preventDefault(), t.stopPropagation(), this.YWe())
                : t.which === CS.fO.oO && (t.preventDefault(), t.stopPropagation(), this.HIi());
        }
        Qsn() {
            const t = this.Ej.FO(),
                i = t.getBoundingClientRect();
            this.Y9e.textContent = this.Rht.value;
            const e = this.Y9e.getBoundingClientRect(),
                s = CS.ft(e.width + 5, 30, t.clientWidth - (e.left - i.left) - 15);
            (this.Rht.style.width = `${s}px`), (this.Rht.style.maxWidth = `${s}px`), (this.Y9e.textContent = ".");
        }
        Asn() {
            let t = this.Ej.FO().getBoundingClientRect(),
                i = this.Y9e.getBoundingClientRect();
            (this.Rht.style.left = i.left - t.left + "px"),
                (this.Rht.style.top = `${i.top - t.top + this.Ej.FO().scrollTop}px`);
            let e = this.Rht.getBoundingClientRect();
            (e.bottom > t.bottom + 1 || e.top < t.top - 1) && this.HIi();
        }
        inn() {
            this.Rht &&
                ((this.Y9e.textContent = this.ux),
                this.Ej.FO().removeEventListener("scroll", this.Tsn, { passive: !0 }),
                this.Ej.Wen(!1, this),
                this.Rht.removeEventListener("keydown", this.V7e, !0),
                (this.V7e = null),
                this.Rht.removeEventListener("input", this._sn),
                (this._sn = null),
                this.Rht.removeEventListener("blur", this.Csn),
                (this.Csn = null),
                CS.ti.Tz(this.Rht),
                (this.Rht = null));
        }
        HIi() {
            this.Rht && (this.inn(), this.Isn && this.Isn(null), (this.Isn = null));
        }
        YWe() {
            if (!this.Rht) return;
            let t = this.Rht.value;
            this.inn(), this.Isn && this.Isn(t), (this.Isn = null), this.D_(), this.Ej.FO().focus();
        }
        mLt() {
            if (this.oE()) throw new Error("cannot add checkbox to root item");
            this.vsn ||
                ((this.vsn = this.CF().createElement("input")),
                (this.vsn.className = "tree-checkbox"),
                (this.vsn.type = "checkbox"),
                (this.Ssn = (t) => this.enn(t)),
                this.vsn.addEventListener("change", this.Ssn),
                (this.xsn = (t) => t.stopPropagation()),
                this.vsn.addEventListener("UIDoubleTap", this.xsn),
                this.vsn.addEventListener("pointerdown", CS.ti.sue),
                this.bsn.insertBefore(this.vsn, this.bsn.firstChild));
        }
        snn(t, i) {
            this.dst(t, i, this.iut.FO());
        }
        dst(t, i, e) {
            if ((CS.vu(t), this.oE())) throw new Error("cannot add extra icons to root item");
            if ((this.Esn || (this.Esn = new Map()), this.Esn.has(t))) return;
            const s = CS.tet(i) ? self.app.ht(i) : i,
                n = CS.m(CS.ti.met, s, null);
            (e = e || this.Y9e),
                this.bsn.insertBefore(n.FO(), e),
                this.Esn.set(t, {
                    Osn: n,
                    nnn: (i) => {
                        this.ken(),
                            i.button === CS.sQ.z0 &&
                                (this.Ej.Aen(this, "itemiconclick", { rnn: t }) || i.stopPropagation());
                    },
                }),
                n.FO().addEventListener("pointerdown", this.Esn.get(t).nnn),
                n.FO().addEventListener("UIDoubleTap", CS.ti.sue);
        }
        wst(t) {
            if ((CS.vu(t), !this.Esn)) return;
            const i = this.Esn.get(t);
            i &&
                (i.Osn &&
                    (i.Osn.FO().removeEventListener("pointerdown", i.nnn),
                    i.Osn.FO().removeEventListener("UIDoubleTap", CS.ti.sue),
                    i.Osn.Ut()),
                this.Esn.delete(t));
        }
        enn(t) {
            this.ken(), this.Ej.Aen(this, "itemcheckchange") || t.stopPropagation();
        }
        yLt(t) {
            if (!this.vsn) throw new Error("no checkbox added");
            this.vsn.checked = !!t;
        }
        _Lt() {
            if (!this.vsn) throw new Error("no checkbox added");
            return !!this.vsn.checked;
        }
        Zen(t) {
            this.hnn(t ? "match" : "no-match");
        }
        Qen() {
            this.hnn(""), this.tsn(!1);
        }
        onn() {
            return this.nsn;
        }
        hMt() {
            return "no-match" === this.onn();
        }
        vXs() {
            return "match" === this.onn();
        }
        ann() {
            return "" === this.onn();
        }
        hnn(t) {
            if ("match" === t || this.nsn !== t) {
                if ("" === t) this.mht.classList.remove("searchMatch"), this.mht.classList.remove("searchNoMatch");
                else if ("match" === t) {
                    "match" !== this.nsn &&
                        (this.mht.classList.add("searchMatch"), this.mht.classList.remove("searchNoMatch"));
                    for (const t of this.Agt()) t.tsn(!0), "no-match" === t.onn() && t.hnn("");
                } else
                    "no-match" === t &&
                        (this.mht.classList.add("searchNoMatch"), this.mht.classList.remove("searchMatch"));
                this.nsn = t;
            }
        }
        tsn(t, i = !1) {
            (t = !!t),
                this.oE() ||
                    (i
                        ? (this.ssn === t && (this.ssn = !this.ssn), this.SO(t, !1, !0))
                        : this.SO(this.h_() || t, !1, !0));
        }
        qen(t) {
            CS.wi(t), (this.Psn = t);
        }
        lnn() {
            return this.Psn;
        }
        static Ken(t, i) {
            return t.lnn() - i.lnn();
        }
        _A() {
            return { name: this.E_(), expanded: this.h_(), children: [...this.children()].map((t) => t._A()) };
        }
        xH(t) {
            if (!t) return;
            (this.qet = !0), this.oE() || this.SO(t.expanded);
            const i = this.Zc();
            CS.ca(i, self.iE) && i.r_(this.h_()), CS.GUt(i.r_) && i.r_(this.h_());
            const e = [...this.children()];
            if (e.length)
                for (let i = 0; i < e.length; i++) {
                    const s = e[i];
                    s && s.xH(this.Ej.esn(e[i], t.children));
                }
            this.qet = !1;
        }
    };
}
{
    const RS = globalThis.t,
        kS = globalThis.assert,
        OS = ["static", "sortable", "draggable"],
        DS = ["left", "right"],
        FS = ["label-under", "label-right"],
        LS = 100,
        BS = { vMt: -1, Ome: "label-under", itemType: "static", Dj: !1, jTt: "", BTt: "auto", ETt: [], PMt: NaN };
    RS.ti.Tj.yMt = class extends RS.Event.aG {
        constructor(t, i) {
            if (
                (super(),
                RS.Gmt(t),
                RS.Crt(i),
                (i = Object.assign({}, BS, i)),
                RS.wi(i.vMt),
                RS.vu(i.Ome),
                RS.vu(i.itemType),
                !OS.includes(i.itemType))
            )
                throw new Error("invalid item type");
            if (!FS.includes(i.Ome)) throw new Error("invalid item style");
            (this.GMt = null),
                (this.mht = null),
                (this.Fin = i.vMt),
                this.Fin < 0 && (this.Fin = self.app.bet()),
                (this.jqt = i.itemType),
                (this.unn = i.Ome),
                (this.$Se = !!i.Dj),
                (this._ts = []),
                (this.Kin = new Set()),
                (this.cnn = []),
                t && "ui-iconview" === t.tagName.toLowerCase()
                    ? ((this.GMt = t.parentElement), (this.mht = t))
                    : ((this.GMt = t), (this.mht = RS.ti.gj("ui-iconview", this.GMt))),
                this.mht.setAttribute(this.unn, ""),
                (this.Qq = (t) => this.lz(t)),
                this.mht.addEventListener("pointerdown", this.Qq),
                this.mht.setAttribute("tabindex", 0),
                (this.I7e = (t) => this.ove()),
                (this.G7e = (t) => this.F3t()),
                this.mht.addEventListener("focus", this.I7e),
                this.mht.addEventListener("blur", this.G7e),
                (this.dnn = []),
                (this.RR = (t) => this.Uj(t)),
                (this.ren = ""),
                (this.fnn = null),
                (this.hen = new RS.kj(() => this.oen(), LS)),
                this.hen.XA(!0),
                (this.aen = !1),
                (this.men = RS.ti.gj("div", null, null, "iconViewNoSearchResults")),
                this.men.setAttribute("position", i.BTt),
                (this.wen = !1),
                (this.cen = RS.ti.gj("div", this.mht, null, "iconViewNoItems")),
                (this.cen.textContent = i.jTt || self.lang("ui.controls.icon-view.no-items-showing")),
                this.cen.setAttribute("position", i.BTt),
                (this.den = RS.ti.gj("div", this.cen, null, "iconViewNoItemsOptions"));
            for (const t of i.ETt) {
                RS.vu(t.text), RS.vu(t.tag);
                const i = RS.ti.gj("button", this.den, null, "treeNoItemsOption");
                (i.textContent = t.text),
                    i.addEventListener("click", () => this.pnn("noitemsoptionclick", { tag: t.tag }));
            }
            (this.pen = !0),
                (this.mnn = null),
                (this.Y0e = null),
                (this.wnn = RS.Xl(i.PMt) && i.PMt > 0 ? i.PMt : NaN),
                (this.gnn = []),
                (this.ynn = 0),
                (this.bnn = null),
                (this.vnn = null),
                (this.Snn = null),
                (this.xnn = null),
                (this.Mnn = null),
                (this.Enn = null),
                RS.Xl(this.wnn) &&
                    this.wnn > 0 &&
                    ((this.vnn = RS.ti.gj("div", this.GMt, null, "icon-view-pagination-controls")),
                    this.vnn.setAttribute("hide", ""),
                    (this.Snn = RS.ti.gj("button", this.vnn)),
                    (this.Snn.textContent = self.lang("common.previous")),
                    this.Snn.addEventListener("click", () => this.Cnn()),
                    (this.bnn = RS.ti.gj("label", this.vnn)),
                    (this.bnn.textContent = self.lang("ui.controls.icon-view.pagination.pages")),
                    (this.xnn = RS.ti.gj("select", this.vnn)),
                    this.xnn.addEventListener("change", () => this._nn()),
                    (this.Mnn = RS.ti.gj("label", this.vnn)),
                    (this.Enn = RS.ti.gj("button", this.vnn)),
                    (this.Enn.textContent = self.lang("common.next")),
                    this.Enn.addEventListener("click", () => this.Tnn()),
                    this.GMt && ((this.GMt.style.display = "flex"), (this.GMt.style.flexFlow = "column")));
        }
        Ut() {
            this._x(!0),
                this.CF().removeEventListener("keydown", this.RR),
                (this.RR = null),
                (this.fnn = null),
                this.hen.Ut(),
                (this.hen = null),
                this.mht.removeEventListener("pointerdown", this.Qq),
                (this.Qq = null),
                RS.ti.Tz(this.cen),
                (this.cen = null),
                RS.ti.Tz(this.men),
                (this.men = null),
                this.mht.removeEventListener("focus", this.I7e),
                this.mht.removeEventListener("blur", this.G7e),
                (this.I7e = null),
                (this.G7e = null),
                RS.ti.Tz(this.mht),
                (this.mht = null),
                (this.mnn = null),
                (this.GMt = null),
                super.Ut();
        }
        Cxt(t) {
            RS.Gct(t),
                this.GMt !== t &&
                    (this.GMt &&
                        (this.vnn && ((this.GMt.style.display = ""), (this.GMt.style.flexFlow = "")),
                        this.GMt.removeChild(this.mht)),
                    (this.GMt = t),
                    this.GMt.appendChild(this.mht),
                    this.vnn &&
                        (this.GMt.appendChild(this.vnn),
                        (this.GMt.style.display = "flex"),
                        (this.GMt.style.flexFlow = "column")));
        }
        CF() {
            return this.mht.ownerDocument;
        }
        Inn(t) {
            if ((RS.Et(t, RS.ti.Tj.$Nt), t.vwi() !== this)) throw new Error("item from different icon view");
        }
        _x(t) {
            for (const i of this.cnn) i.CPt(t);
            RS.yh(this.cnn);
            for (const i of this._ts) i.CPt(t);
            RS.yh(this._ts);
            for (const i of this.gnn) {
                for (const e of i) ("function" != typeof e.vwi || e.vwi()) && "function" == typeof e.CPt && e.CPt(t);
                RS.yh(i);
            }
            RS.yh(this.gnn),
                this.Kin.clear(),
                RS.yh(this.dnn),
                this.xnn && (RS.ti.fMt(this.xnn), RS.ti.Tz(this.vnn)),
                t ? RS.ti.fMt(this.mht) : (this.TFt(!1), this.ven());
        }
        zzi(t) {
            this.Inn(t), t.CPt(), this._ts.splice(this._ts.indexOf(t), 1), this.ven();
        }
        pps() {
            return this.Fin;
        }
        Pnn() {
            return this.unn;
        }
        Gnn() {
            return RS.Xl(this.wnn);
        }
        Ann() {
            return this.wnn;
        }
        Rnn() {
            return this.vnn;
        }
        Cnn() {
            if (!this.Gnn()) return;
            const t = this.ynn;
            if ((this.ynn--, this.ynn < 0 && (this.ynn = 0), t === this.ynn)) return;
            RS.yh(this._ts), this.Kin.clear(), RS.yh(this.dnn), RS.ti.fMt(this.mht), this.pnn("beforepagechange");
            const i = this.gnn[this.ynn];
            for (let t = 0; t < i.length; t++) {
                let e = i[t];
                if (!RS.ca(e, RS.ti.Tj.$Nt) && !RS.ca(e, RS.ti.Tj.tWi) && !RS.ca(e, RS.ti.Tj.knn)) {
                    const s = e?.ZMt;
                    "static" === this.jqt &&
                        (e = RS.m(RS.ti.Tj.$Nt, this, e.icon, e.text, e.Onn, e.index, e.group, !0)),
                        "sortable" === this.jqt && (e = RS.m(RS.ti.Tj.tWi, this, e.icon, e.text, e.Onn, e.index, !0)),
                        "draggable" === this.jqt && (e = RS.m(RS.ti.Tj.knn, this, e.icon, e.text, e.Onn, e.index, !0)),
                        s && s(e),
                        (i[t] = e);
                }
                this.mht.appendChild(e.FO()), this._ts.push(e);
            }
            (this.xnn.selectedIndex = this.ynn), this.TFt(!1), this.ven(), this.pnn("pagechange");
        }
        _nn() {
            if (!this.Gnn()) return;
            (this.ynn = this.xnn.selectedIndex),
                RS.yh(this._ts),
                this.Kin.clear(),
                RS.yh(this.dnn),
                RS.ti.fMt(this.mht),
                this.pnn("beforepagechange");
            const t = this.gnn[this.ynn];
            for (let i = 0; i < t.length; i++) {
                let e = t[i];
                if (!RS.ca(e, RS.ti.Tj.$Nt) && !RS.ca(e, RS.ti.Tj.tWi) && !RS.ca(e, RS.ti.Tj.knn)) {
                    const s = e?.ZMt;
                    "static" === this.jqt &&
                        (e = RS.m(RS.ti.Tj.$Nt, this, e.icon, e.text, e.Onn, e.index, e.group, !0)),
                        "sortable" === this.jqt && (e = RS.m(RS.ti.Tj.tWi, this, e.icon, e.text, e.Onn, e.index, !0)),
                        "draggable" === this.jqt && (e = RS.m(RS.ti.Tj.knn, this, e.icon, e.text, e.Onn, e.index, !0)),
                        s && s(e),
                        (t[i] = e);
                }
                this.mht.appendChild(e.FO()), this._ts.push(e);
            }
            (this.xnn.selectedIndex = this.ynn), this.TFt(!1), this.ven(), this.pnn("pagechange");
        }
        Tnn() {
            if (!this.Gnn()) return;
            const t = this.ynn;
            if ((this.ynn++, this.ynn >= this.gnn.length && (this.ynn = this.gnn.length - 1), t === this.ynn)) return;
            RS.yh(this._ts), this.Kin.clear(), RS.yh(this.dnn), RS.ti.fMt(this.mht), this.pnn("beforepagechange");
            const i = this.gnn[this.ynn];
            for (let t = 0; t < i.length; t++) {
                let e = i[t];
                if (!RS.ca(e, RS.ti.Tj.$Nt) && !RS.ca(e, RS.ti.Tj.tWi) && !RS.ca(e, RS.ti.Tj.knn)) {
                    const s = e?.ZMt;
                    "static" === this.jqt &&
                        (e = RS.m(RS.ti.Tj.$Nt, this, e.icon, e.text, e.Onn, e.index, e.group, !0)),
                        "sortable" === this.jqt && (e = RS.m(RS.ti.Tj.tWi, this, e.icon, e.text, e.Onn, e.index, !0)),
                        "draggable" === this.jqt && (e = RS.m(RS.ti.Tj.knn, this, e.icon, e.text, e.Onn, e.index, !0)),
                        s && s(e),
                        (i[t] = e);
                }
                this.mht.appendChild(e.FO()), this._ts.push(e);
            }
            (this.xnn.selectedIndex = this.ynn), this.TFt(!1), this.ven(), this.pnn("pagechange");
        }
        Een() {
            return this.$Se;
        }
        nzi(t) {
            (t = !!t), this.$Se !== t && (t || this.fE(), (this.$Se = t));
        }
        FO() {
            return this.mht;
        }
        jvt() {
            return this.Y0e || (this.Y0e = this.mht.getBoundingClientRect()), this.Y0e;
        }
        nE() {
            return this.GMt;
        }
        Dnn() {
            return this.mnn;
        }
        Fnn(t) {
            RS.Et(t, RS.ti.Tj.$Nt), (this.mnn = t);
        }
        xFt() {
            return RS.ti.Tj.tWi.xFt();
        }
        IF() {
            return RS.ti.Tj.tWi.Mlt();
        }
        Mlt() {
            return RS.ti.Tj.tWi.Mlt();
        }
        EF() {
            this.Mlt() && RS.ti.Tj.tWi.EF();
        }
        items() {
            return this._ts;
        }
        *CEe() {
            for (const t of this._ts) t.Fre() || (yield t);
        }
        lii() {
            return this._ts.length;
        }
        gii(t) {
            return RS.wi(t), (t = Math.floor(t)) < 0 || t >= this._ts.length ? null : this._ts[t];
        }
        Lnn() {
            return RS.vo(this.items());
        }
        sWi(t) {
            this.Inn(t);
            let i = this.uii(t) - 1;
            return RS.wOe(i, this._ts) ? this._ts[i] : null;
        }
        ive(t) {
            this.Inn(t);
            let i = this.uii(t) + 1;
            return RS.wOe(i, this._ts) ? this._ts[i] : null;
        }
        ezi(t) {
            if ((RS.vu(t), !OS.includes(t))) throw new Error("invalid item type");
            this.jqt = t;
        }
        Nqt() {
            return "static" === this.jqt
                ? RS.ti.Tj.$Nt
                : "sortable" === this.jqt
                  ? RS.ti.Tj.tWi
                  : "draggable" === this.jqt
                    ? RS.ti.Tj.knn
                    : void 0;
        }
        HHi(t) {
            RS.yp(t);
            for (let i of this._ts) if (t(i)) return i;
            return null;
        }
        qzi() {
            this._ts.reverse();
            let t = this.mht.firstChild;
            for (let i = this.mht.children.length - 1; i > 0; i--) {
                let i = this.mht.lastChild;
                this.mht.removeChild(i), this.mht.insertBefore(i, t);
            }
        }
        mzi(t, i) {
            if ((RS.wi(t), RS.wi(i), t < 0 || t >= this._ts.length)) throw new Error("invalid item index");
            if (i < 0 || i >= this._ts.length) throw new Error("invalid item index");
            if (t === i) return;
            let e = this._ts[t].FO();
            this.mht.removeChild(e);
            let s = this._ts[i].FO();
            t < i ? this.mht.insertBefore(e, s.nextSibling) : this.mht.insertBefore(e, s),
                this._ts.splice(i, 0, this._ts.splice(t, 1)[0]);
        }
        YHi(t) {
            this.Inn(t), this.Kin.add(t), (this.mnn = t), this.Aen(t, "itemselect");
        }
        Ren(t) {
            this.Inn(t), this.Kin.delete(t), this.mnn === t && (this.mnn = null), this.Aen(t, "itemunselect");
        }
        eE() {
            return this.Kin.size;
        }
        yzi(t) {
            t.Pit(!0);
        }
        Uen(t, i) {
            if ((RS.Et(t, RS.ti.Tj.$Nt), RS.Et(i, RS.ti.Tj.$Nt), this.Inn(t), this.Inn(i), t === i))
                return this.pnn("beforeselectrange"), t.Pit(!0), void this.pnn("selectrange");
            let e = !1,
                s = null;
            const n = [];
            for (const r of this.items())
                if ((e || (r === t ? ((e = !0), (s = i)) : r === i && ((e = !0), (s = t))), e && (n.push(r), r === s)))
                    break;
            s === t && n.reverse(), this.pnn("beforeselectrange");
            for (const t of n) t.Fre() || t.Pit(!0);
            this.pnn("selectrange");
        }
        fE() {
            for (let t of this.Kin) t.Pit(!1);
            self.assert(0 === this.Kin.size, "should have deleted all selected items");
        }
        M_() {
            return this.Kin.values();
        }
        CMt() {
            return [...this.Kin.values()].map((t) => t.Zc());
        }
        sE() {
            return RS.vo(this.Kin);
        }
        Gme() {
            const t = this.Lnn();
            t && t.D_();
        }
        KSe() {
            const t = this.Lnn();
            t && (t.D_(), t.H_());
        }
        ove() {
            this.CF().addEventListener("keydown", this.RR);
        }
        F3t() {
            this.CF().removeEventListener("keydown", this.RR);
        }
        Uj(t) {
            if (1 !== this.eE()) return;
            const i = t.which;
            if (i !== RS.fO.V8 && i !== RS.fO.K8 && i !== RS.fO.W8 && i !== RS.fO.N8) return;
            const e = this.sE();
            let s = this._ts.indexOf(e);
            if (!(s < 0)) {
                if (i === RS.fO.W8)
                    do {
                        --s;
                    } while (s >= 0 && this._ts[s].Fre());
                else if (i === RS.fO.N8)
                    do {
                        ++s;
                    } while (s < this._ts.length && this._ts[s].Fre());
                else {
                    e.cYe();
                    const t = e.jvt(),
                        n = i === RS.fO.K8 ? 1 : -1;
                    s += n;
                    for (let i = this._ts.length; s >= 0 && s < i; s += n) {
                        const i = this._ts[s];
                        if (i.Fre()) continue;
                        i.cYe();
                        const e = i.jvt();
                        if (
                            !(e.right < t.left + 1 || e.left > t.right - 1) &&
                            ((1 === n && e.top > t.bottom - 1) || (-1 === n && e.bottom < t.top + 1))
                        )
                            break;
                    }
                }
                s < 0 || s >= this._ts.length || (this._ts[s].D_(), this._ts[s].H_(), t.preventDefault());
            }
        }
        lz(t) {
            if (t.target !== this.mht || RS.rE.kQ(t) || t.shiftKey) return;
            const i = this.mht.getBoundingClientRect(),
                e = i.left + this.mht.clientWidth,
                s = i.top + this.mht.clientHeight;
            i.left < t.clientX &&
                e > t.clientX &&
                i.top < t.clientY &&
                s > t.clientY &&
                (this.pnn("emptyspaceclick"), this.fE());
        }
        Bnn(t) {
            this.Inn(t), this.dnn.push(t), this.dnn.length > 2 && this.dnn.shift();
        }
        Unn() {
            return this.dnn;
        }
        pnn(t, i) {
            RS.vu(t);
            let e = new RS.Event(t, !0);
            return (e.Nnn = this), this.dispatchEvent(Object.assign(e, i));
        }
        Aen(t, i) {
            this.Inn(t), RS.vu(i);
            let e = new RS.Event(i, !0);
            return (e.item = t), this.dispatchEvent(e);
        }
        $P(t, i) {
            this.Inn(t);
            let e = new RS.Event("itemcontextmenu", !0);
            return (e.item = t), (e.clientX = i.clientX), (e.clientY = i.clientY), this.dispatchEvent(e);
        }
        uii(t) {
            return this.Inn(t), this._ts.indexOf(t);
        }
        jnn(t) {
            return this.Inn(t), Array.prototype.indexOf.call(this.mht.children, t.FO());
        }
        $nn(t, i, e) {
            this.Inn(t), RS.wi(i), RS.vu(e);
            let s = this._ts;
            if (i < 0 || i >= s.length) throw new Error("new index is out of bounds");
            if (!DS.includes(e))
                throw new Error(`invalid position, '${e}' was used. Only ${DS.toString()} are valid positions.`);
            let n = this._ts[i];
            if (n === t) return;
            this.FO().removeChild(t.FO()),
                "left" === e && this.FO().insertBefore(t.FO(), n.FO()),
                "right" === e && n.FO().parentNode.insertBefore(t.FO(), n.FO().nextSibling);
            let r = this.uii(t),
                h = 0;
            return (
                i > r
                    ? ("left" === e && ((h = i > 0 ? i - 1 : 0), s.splice(h, 0, s.splice(r, 1)[0])),
                      "right" === e && ((h = i), s.splice(h, 0, s.splice(r, 1)[0])))
                    : ("left" === e && ((h = i), s.splice(h, 0, s.splice(r, 1)[0])),
                      "right" === e && ((h = i < s.length - 1 ? i + 1 : i), s.splice(h, 0, s.splice(r, 1)[0]))),
                h
            );
        }
        znn(t, i, e) {
            RS.wi(i), RS.vu(e), this.Inn(t);
            let s = this._ts;
            if (i < 0 || i >= s.length) throw new Error("new index is out of bounds");
            if (!DS.includes(e))
                throw new Error(`invalid position, '${e}' was used. Only ${DS.toString()} are valid positions.`);
            let n = 0;
            return (
                i > this.uii(t)
                    ? ("left" === e && (n = i > 0 ? i - 1 : 0), "right" === e && (n = i))
                    : ("left" === e && (n = i), "right" === e && (n = i < s.length - 1 ? i + 1 : i)),
                n
            );
        }
        Vnn() {
            this.Y0e = this.mht.getBoundingClientRect();
            for (let t of this._ts) t.cYe();
        }
        iWi() {}
        eWi() {}
        xO(t, i, e, s, n, r) {
            let h;
            if ((RS.qm(t, RS.ti.zrt), RS.$rt(i), RS.HI(s), RS.qm(n, RS.ti.Tj.Wnn), n && (s = null), this.Gnn())) {
                if (
                    (kS(!n, "groups not supported with pagination"),
                    kS(!s, "indexing not supported with pagination"),
                    (n = null),
                    (s = null),
                    !(this._ts.length <= this.Ann()))
                ) {
                    "static" === this.jqt &&
                        (h = { icon: t, text: i, Onn: e, Onn: e, index: s, group: n, ZMt: r?.ZMt }),
                        "sortable" === this.jqt &&
                            (h = { icon: t, text: i, Onn: e, Onn: e, index: s, group: n, ZMt: r?.ZMt }),
                        "draggable" === this.jqt &&
                            (h = { icon: t, text: i, Onn: e, Onn: e, index: s, group: n, ZMt: r?.ZMt });
                    let o = this.gnn[this.gnn.length - 1];
                    return o || (o = this.Hnn(!0)), o.length >= this.Ann() && (o = this.Hnn(!0)), void o.push(h);
                }
                {
                    "static" === this.jqt && (h = RS.m(RS.ti.Tj.$Nt, this, t, i, e, s, n, !0)),
                        "sortable" === this.jqt && (h = RS.m(RS.ti.Tj.tWi, this, t, i, e, s, !0)),
                        "draggable" === this.jqt && (h = RS.m(RS.ti.Tj.knn, this, t, i, e, s, !0));
                    let o = this.gnn[this.gnn.length - 1];
                    o || (o = this.Hnn()),
                        o.length >= this.Ann() && (o = this.Hnn()),
                        o.push(h),
                        this._ts.push(h),
                        r?.ZMt && r.ZMt(h);
                }
            } else
                "static" === this.jqt && (h = RS.m(RS.ti.Tj.$Nt, this, t, i, e, s, n, !0)),
                    "sortable" === this.jqt && (h = RS.m(RS.ti.Tj.tWi, this, t, i, e, s, !0)),
                    "draggable" === this.jqt && (h = RS.m(RS.ti.Tj.knn, this, t, i, e, s, !0)),
                    RS.Xl(s) ? (s < 0 ? this._ts.unshift(h) : this._ts.splice(s, 0, h)) : this._ts.push(h),
                    r?.ZMt && r.ZMt(h);
            return this.ven(), h;
        }
        Hnn(t) {
            t = !!t;
            const i = [],
                e = RS.ti.gj("option", this.xnn);
            return (
                this.gnn.push(i),
                (e.value = this.gnn.length - 1),
                (e.textContent = String(this.gnn.length)),
                t &&
                    (this.Rnn().removeAttribute("hide"),
                    this.vnn &&
                        this.GMt &&
                        (this.GMt.appendChild(this.vnn),
                        (this.GMt.style.display = "flex"),
                        (this.GMt.style.flexFlow = "column"))),
                (this.Mnn.textContent = self.ej("ui.controls.icon-view.pagination.total", this.gnn.length)),
                i
            );
        }
        Goe(t) {
            if ((RS.vu(t), "sortable" === this.jqt))
                throw new Error("not yet implemented: groups for sortable icon views");
            let i = RS.m(RS.ti.Tj.Wnn, this, t);
            return this.cnn.push(i), this.ven(), i;
        }
        rO(t, i) {
            RS.vu(t),
                RS.Crt(i),
                (this.aen = !1),
                i && (this.aen = !!i.uO),
                (this.ren = t),
                (this.fnn = null),
                this.hen.uE();
        }
        Kwe(t, i, e) {
            RS.yp(t),
                RS.k$(i),
                RS.Crt(e),
                (this.ren = i || ""),
                (this.fnn = t),
                (this.aen = !1),
                !e || ((this.aen = !!e.uO), void 0 === e.Knn || e.Knn) ? this.hen.uE() : this.oen();
        }
        oen() {
            let t = this.ren.toLowerCase(),
                i = !1,
                e = this.fnn,
                s = !0;
            for (let n of this.items())
                if (e) {
                    let t = e(n);
                    n.Ivt(!t), t && (s && (this.aen && n.D_(), (s = !1)), (i = !0));
                } else if (t) {
                    let e = n.qnn(t);
                    n.Ivt(!e), e && (s && (this.aen && n.D_(), (s = !1)), (i = !0));
                } else n.Ivt(!1), (i = !0);
            this.TFt(!i), (this.fnn = null);
            const n = new RS.Event("searchresultsupdate");
            this.dispatchEvent(n);
        }
        XFt(t) {
            RS.vu(t), (this.cen.textContent = t);
        }
        YFt(t) {
            (t = !!t), (this.den.style.display = t ? "" : "none");
        }
        ven() {
            let t = !this._ts.length && !this.cnn.length;
            (this.pen = t),
                this.pen
                    ? (this.mht.contains(this.cen) || this.mht.appendChild(this.cen),
                      this.cen.contains(this.den) || this.cen.appendChild(this.den))
                    : this.mht.contains(this.cen) && RS.ti.Tz(this.cen);
        }
        TFt(t) {
            this.pen ||
                (this.wen !== t
                    ? ((this.wen = t),
                      this.wen
                          ? (this.mht.contains(this.men) || this.mht.appendChild(this.men),
                            this.fnn && !this.ren
                                ? (this.men.textContent = self.lang("ui.controls.icon-view.no-search-results"))
                                : (this.men.textContent = self.ej(
                                      "ui.controls.icon-view.no-text-search-results",
                                      this.ren
                                  )))
                          : RS.ti.Tz(this.men))
                    : this.wen &&
                      (this.mht.contains(this.men) || this.mht.appendChild(this.men),
                      this.fnn && !this.ren
                          ? (this.men.textContent = self.lang("ui.controls.icon-view.no-search-results"))
                          : (this.men.textContent = self.ej(
                                "ui.controls.icon-view.no-text-search-results",
                                this.ren
                            ))));
        }
    };
}
{
    const US = self.t;
    US.ti.Tj.$Nt = class extends US.MV {
        constructor(t, i, e, s, n, r, h) {
            if (
                (US.Et(t, US.ti.Tj.yMt),
                US.qm(i, US.ti.zrt),
                US.$rt(e),
                US.HI(n),
                US.qm(r, US.ti.Tj.Wnn),
                (h = !!h),
                super(),
                (this.gMt = t),
                (this.UNt = i || null),
                (this.ux = e),
                (this.pp = s),
                (this.dvt = !1),
                (this.Xnn = r),
                (this.Ynn = !1),
                (this.EGt = -1),
                (this.T3 = 0),
                (this.E3 = 0),
                (this.Y0e = null),
                (this.mht = null),
                US.Xl(n))
            ) {
                let t = null;
                h && (t = this.gMt.FO()), (this.mht = US.ti.gj("ui-iconviewitem", t, null, null, null, n));
            } else {
                let t = null;
                h && (t = this.Xnn ? this.Xnn.Jnn() : this.gMt.FO()), (this.mht = US.ti.gj("ui-iconviewitem", t));
            }
            (this.Qbt = US.ti.gj("div", this.mht, null, "iconViewItemWrap")),
                (this.iut = US.m(US.ti.met, this.UNt || this.gMt.pps(), this.Qbt)),
                (this.Y9e = US.ti.gj("span", this.Qbt, null, "iconViewItemText")),
                US.hrt(this.Y9e, this.ux),
                (this.fvt = (t) => this.cz(t)),
                this.mht.addEventListener("UIDoubleTap", this.fvt),
                (this.S6 = (t) => this.fz(t)),
                this.mht.addEventListener("contextmenu", this.S6),
                (this.Qq = (t) => this.lz(t)),
                this.mht.addEventListener("pointerdown", this.Qq),
                (this.MR = (t) => this.GR(t)),
                (this.OR = (t) => this.CR(t)),
                (this.wtn = (t) => this.n0(t));
        }
        CPt(t) {
            this.Pit(!1),
                this.mht.removeEventListener("pointerdown", this.Qq),
                (this.Qq = null),
                this.CF().removeEventListener("pointermove", this.MR),
                (this.MR = null),
                this.CF().removeEventListener("pointerup", this.OR),
                (this.OR = null),
                this.CF().removeEventListener("pointercancel", this.wtn),
                (this.wtn = null),
                this.mht.removeEventListener("UIDoubleTap", this.fvt),
                (this.fvt = null),
                this.mht.removeEventListener("contextmenu", this.S6),
                (this.S6 = null),
                this.iut.Ut(t),
                (this.iut = null),
                t || (US.ti.Tz(this.Y9e), US.ti.Tz(this.Qbt), US.ti.Tz(this.mht)),
                (this.Y9e = null),
                (this.Qbt = null),
                (this.mht = null),
                (this.gMt = null),
                (this.UNt = null),
                (this.pp = null),
                US.Ut(this);
        }
        CF() {
            return this.mht.ownerDocument;
        }
        Az() {
            return this.CF().defaultView;
        }
        zD(t) {
            US.Et(t, US.ti.zrt), this.iut && this.iut.zD(t);
        }
        JB(t) {
            US.yp(t), this.iut && this.iut.JB(t);
        }
        _ii() {
            this.iut._ii();
        }
        lz(t) {
            t.stopPropagation(),
                t.button === US.sQ.z0 &&
                    t.isPrimary &&
                    (this.gMt.Bnn(this),
                    this.cYe(),
                    this.mht.setAttribute("pointerheld", ""),
                    this.CF().addEventListener("pointermove", this.MR),
                    this.CF().addEventListener("pointerup", this.OR),
                    this.CF().addEventListener("pointercancel", this.wtn),
                    (this.EGt = t.pointerId),
                    (this.T3 = t.clientX),
                    (this.E3 = t.clientY));
        }
        cz(t) {
            this.gMt.Unn().every((t) => t === this) && this.gMt.Aen(this, "itemdoubletap");
        }
        GR(t) {
            t.pointerId === this.EGt && t.isPrimary;
        }
        CR(t) {
            if (this.mht && t.pointerId === this.EGt && t.isPrimary) {
                if (
                    (this.mht.removeAttribute("pointerheld", ""),
                    this.CF().removeEventListener("pointermove", this.MR),
                    this.CF().removeEventListener("pointerup", this.OR),
                    this.CF().removeEventListener("pointercancel", this.wtn),
                    this.gMt.Aen(this, "itemclick"),
                    this.gMt.Een())
                ) {
                    let t = US.rE.kQ(),
                        i = US.rE.aE(US.fO.hE),
                        e = this.gMt.Dnn();
                    if (t && i && e) return this.gMt.Uen(this, e), void this.gMt.Fnn(this);
                    if (i && e) return this.gMt.fE(), this.gMt.Uen(this, e), void this.gMt.Fnn(this);
                    if (t) return void this.Pit(!this.c$());
                }
                this.Znn(t.clientX, t.clientY) && this.D_();
            }
        }
        n0(t) {
            this.mht && this.mht.removeAttribute("pointerheld", "");
            const i = t ? t.currentTarget : this.CF();
            i.removeEventListener("pointermove", this.MR),
                i.removeEventListener("pointerup", this.OR),
                i.removeEventListener("pointercancel", this.wtn),
                this.gMt && this.gMt.fE();
        }
        D_() {
            (this.c$() && 1 === this.gMt.eE()) || (this.gMt.fE(), this.Pit(!0));
        }
        xT() {
            this.Pit(!1);
        }
        c$() {
            return this.dvt;
        }
        Pit(t) {
            (t = !!t),
                this.dvt !== t &&
                    (t
                        ? (this.gMt.Aen(this, "beforeitemselect"),
                          this.mht.setAttribute("selected", ""),
                          this.gMt.YHi(this))
                        : (this.mht.removeAttribute("selected"), this.gMt.Ren(this)),
                    (this.dvt = t));
        }
        FO() {
            return this.mht;
        }
        vwi() {
            return this.gMt;
        }
        Zie(t) {
            this.pp = t;
        }
        Zc() {
            return this.pp;
        }
        jvt() {
            return this.Y0e;
        }
        In(t) {
            US.$rt(t), US.YBe(this.ux, t) || ((this.ux = t), US.hrt(this.Y9e, this.ux));
        }
        E_() {
            return this.ux;
        }
        Ivt(t) {
            (t = !!t),
                this.Ynn !== t &&
                    ((this.Ynn = t),
                    this.Ynn
                        ? (this.Pit(!1), this.mht.setAttribute("hidden", ""), this.Xnn && this.Xnn.Qnn(this, !0))
                        : (this.mht.removeAttribute("hidden"), this.Xnn && this.Xnn.Qnn(this, !1)));
        }
        Fre() {
            return this.Ynn;
        }
        H_(t = "auto") {
            US.ti.H_(this.mht, this.gMt.FO(), t);
        }
        qnn(t) {
            return this.ux.toLowerCase().includes(t);
        }
        cYe() {
            this.Y0e = this.mht.getBoundingClientRect();
        }
        fz(t) {
            (this.vwi().Een() && this.c$()) || this.D_(),
                this.gMt.$P(this, t) || (t.preventDefault(), t.stopPropagation());
        }
        Znn(t, i) {
            if ((US.wi(t), US.wi(i), !this.Y0e)) return !1;
            let e = this.Y0e;
            return t >= e.left && i >= e.top && t < e.right && i < e.bottom;
        }
    };
}
{
    const NS = self.t,
        jS = 500,
        $S = 20;
    let zS = 0,
        VS = 0,
        WS = 0,
        HS = 0,
        KS = null,
        qS = !1,
        XS = !0,
        YS = null,
        JS = null,
        ZS = null,
        QS = null,
        tx = 0,
        ix = 0,
        ex = 0,
        sx = !1,
        nx = !1,
        rx = -1;
    function hx(t, i) {
        -1 === rx &&
            (sx || nx) &&
            KS &&
            YS &&
            (rx = requestAnimationFrame(() => {
                if (((rx = -1), !YS)) return;
                let e = YS.FO(),
                    s = YS.jvt(),
                    n = s.width,
                    r = s.height,
                    h = t - s.left,
                    o = i - s.top,
                    a = 0,
                    l = 0;
                sx &&
                    (h <= $S || h >= n - $S) &&
                    (h <= $S ? (a = -Math.abs(h - $S)) : h >= n - $S && (a = Math.abs(h - (n - $S)))),
                    nx &&
                        (o <= $S || o >= r - $S) &&
                        (o <= $S ? (l = -Math.abs(o - $S)) : o >= r - $S && (l = Math.abs(o - (r - $S)))),
                    (0 === a && 0 === l) ||
                        (0 !== a && 0 !== l && ((a /= Math.SQRT2), (l /= Math.SQRT2)),
                        0 !== a && (e.scrollLeft += a / self.devicePixelRatio),
                        0 !== l && (e.scrollTop += l / self.devicePixelRatio),
                        YS.Vnn(),
                        hx(zS, VS));
            }));
    }
    function ox(t, i) {
        (zS = t.clientX), (VS = t.clientY);
        let e = Math.abs(WS - zS),
            s = Math.abs(HS - VS);
        if (KS && XS) {
            if ("sortable" === i) NS.ti.Tj.tWi.pnn("attemptitemsort", JS, zS, VS);
            XS = !1;
        }
        if (e * e + s * s < jS && !qS) return;
        if (KS && !qS) {
            switch (i) {
                case "sortable":
                    NS.ti.Tj.tWi.pnn("startitemsort", JS, zS, VS);
                    break;
                case "draggable":
                    NS.ti.Tj.tWi.pnn("dragstart", JS, zS, VS);
            }
            (KS.style.visibility = "visible"), (qS = !0);
        }
        NS.ti.Tj.tWi.trn(zS, VS);
        if (KS && YS)
            switch ((hx(zS, VS), i)) {
                case "sortable":
                    if (ZS) {
                        if (ZS.Znn(zS, VS)) {
                            let t = ZS.FO();
                            return t.setAttribute("drop-target", ""), void t.setAttribute("hit-side", ZS.irn(zS, VS));
                        }
                        ZS.ern();
                    }
                    for (let t of YS.items())
                        if (t !== JS && t.Znn(zS, VS)) {
                            ZS = t;
                            let i = ZS.FO();
                            return i.setAttribute("drop-target", ""), void i.setAttribute("hit-side", t.irn(zS, VS));
                        }
                    ZS = null;
                    break;
                case "draggable":
                    qS && NS.ti.Tj.tWi.pnn("dragmove", JS, zS, VS);
            }
    }
    function ax(t, i) {
        if (KS)
            switch ((KS.parentNode.removeChild(KS), i)) {
                case "sortable":
                    if (ZS !== JS && JS && ZS) {
                        const t = YS.eE();
                        if (t <= 1) {
                            let t = YS.jnn(ZS),
                                i = YS.jnn(JS),
                                e = ZS.FO().getAttribute("hit-side");
                            (t = YS.$nn(JS, t, e)), NS.ti.Tj.tWi.srn(i, t, JS);
                        } else if (t > 1) {
                            let t = YS.jnn(ZS),
                                i = ZS.irn(zS, VS);
                            const e = [...YS.M_()],
                                s = e.map((t) => ({ Izi: YS.jnn(t), Ezi: NaN, item: t, nrn: NaN, delta: NaN }));
                            let n = YS.jnn(JS);
                            const r = [],
                                h = [];
                            for (const t of s)
                                (t.delta = Math.abs(t.Izi - n)),
                                    t.Izi < n
                                        ? ((t.Ezi = n - t.delta), r.push(t))
                                        : t.Izi > n && ((t.Ezi = n + t.delta), h.push(t));
                            r.sort((t, i) => i.Ezi - t.Ezi), h.sort((t, i) => t.Ezi - i.Ezi);
                            const o = [],
                                a = [],
                                l = YS.jnn(JS);
                            (t = YS.$nn(JS, t, i)), o.push(l), a.push(t);
                            for (let i = 0; i < r.length; i++) {
                                const e = r[i];
                                (t = YS.jnn(JS)), (e.Izi = YS.jnn(e.item)), (e.Ezi = t - e.delta);
                                let s = "right";
                                e.Ezi < 0 && ((e.Ezi = 0), (s = "left")),
                                    (e.Ezi = YS.$nn(e.item, e.Ezi, s)),
                                    NS.Xl(e.Izi) && NS.Xl(e.Ezi) && (o.push(e.Izi), a.push(e.Ezi));
                            }
                            for (let i = 0; i < h.length; i++) {
                                const e = h[i];
                                (t = YS.jnn(JS)), (e.Izi = YS.jnn(e.item)), (e.Ezi = t + e.delta);
                                let s = "left";
                                e.Ezi >= YS.lii() && ((e.Ezi = YS.lii() - 1), (s = "right")),
                                    (e.Ezi = YS.$nn(e.item, e.Ezi, s)),
                                    NS.Xl(e.Izi) && NS.Xl(e.Ezi) && (o.push(e.Izi), a.push(e.Ezi));
                            }
                            NS.ti.Tj.tWi.rrn(o, a, e);
                        }
                    }
                    ux();
                    break;
                case "draggable":
                    qS && NS.ti.Tj.tWi.pnn("drop", JS, t.clientX, t.clientY), ux();
            }
    }
    function lx(t, i) {
        KS && KS.parentNode.removeChild(KS), ux(), cancelAnimationFrame(rx), (rx = -1);
    }
    function ux() {
        ZS && ZS.ern(), (KS = null), (YS = null), (ZS = null), (JS = null);
    }
    NS.ti.Tj.tWi = class extends NS.ti.Tj.$Nt {
        constructor(t, i, e, s, n, r) {
            NS.Et(t, NS.ti.Tj.yMt),
                NS.qm(i, NS.ti.zrt),
                NS.$rt(e),
                NS.HI(n),
                super(t, i, e, s, n, void 0, (r = !!r)),
                (this.hrn = NS.ti.gj("div", this.mht, null, "dropTargetDownArrow")),
                (this.orn = NS.ti.gj("div", this.mht, null, "dropTargetUpArrow")),
                (this.arn = NS.ti.gj("div", this.mht, null, "dropTargetBorder"));
        }
        CPt() {
            cancelAnimationFrame(rx),
                NS.ti.Tz(this.hrn),
                NS.ti.Tz(this.orn),
                NS.ti.Tz(this.arn),
                (this.hrn = null),
                (this.orn = null),
                (this.arn = null),
                super.CPt();
        }
        lz(t) {
            if ((super.lz(t), t.button !== NS.sQ.z0)) return;
            if (!t.isPrimary) return;
            let i = this.vwi();
            i.Vnn();
            let e = this.mht.cloneNode(!0);
            e.setAttribute("ghost", ""),
                e.setAttribute(i.Pnn(), ""),
                (e.style.visibility = "hidden"),
                i.eE() > 1 &&
                    (e.textContent = self.iG("ui.controls.icon-view.multi-select-drag-tooltip", null, i.eE())),
                (qS = !1),
                (XS = !0);
            let s,
                n = NS.qfi(i.nE(), "dialog");
            (s = n || this.mht.ownerDocument.body),
                s.appendChild(e),
                (tx = s.offsetLeft),
                (ix = s.offsetTop),
                (ex = NS.ti.Tj.tWi.lrn(s)),
                (QS = e.getBoundingClientRect()),
                (KS = e),
                (ZS = this),
                (JS = this),
                (YS = i),
                cancelAnimationFrame(rx),
                (rx = -1),
                (sx = YS.FO().clientWidth < YS.FO().scrollWidth),
                (nx = YS.FO().clientHeight < YS.FO().scrollHeight),
                (zS = t.clientX),
                (VS = t.clientY),
                (WS = t.clientX),
                (HS = t.clientY),
                NS.ti.Tj.tWi.trn(zS, VS);
        }
        GR(t) {
            super.GR(t), t.isPrimary && this.Dwi(t, "sortable");
        }
        CR(t) {
            super.CR(t), t.isPrimary && this.Nwi(t, "sortable");
        }
        n0(t) {
            super.n0(t), this.Vwi(t, "sortable");
        }
        Dwi(t, i) {
            NS.vu(i), ox(t, i);
        }
        Nwi(t, i) {
            NS.vu(i), ax(t, i);
        }
        Vwi(t, i) {
            NS.vu(i), lx();
        }
        Znn(t, i) {
            if ((NS.wi(t), NS.wi(i), !this.Y0e)) return !1;
            let e = this.Y0e;
            return t >= e.left && i >= e.top && t < e.right && i < e.bottom;
        }
        irn(t, i) {
            if ((NS.wi(t), NS.wi(i), !this.Y0e)) return "";
            let e = this.Y0e;
            return t >= e.left && t <= e.left + e.width / 2 ? "left" : "right";
        }
        ern() {
            let t = this.FO();
            t.removeAttribute("drop-target"), t.removeAttribute("hit-side");
        }
        static trn(t, i) {
            if ((NS.wi(t), NS.wi(i), KS)) {
                let e = -tx + t - ex - QS.width / 2,
                    s = -ix + i - ex - QS.height / 2,
                    n = NS.qfi(KS, "dialog");
                if (n) {
                    let t = NS.ti.Ze.UZe(n);
                    (e -= t.Yn()), (s -= t.qn());
                }
                KS.style.transform = `translateX(${e}px) translateY(${s}px)`;
            }
        }
        static lrn(t) {
            NS.Gct(t);
            let i = NS.ti.oJ(
                ["border-width", "border-left-width", "border-right-width", "border-bottom-width", "border-top-width"],
                { lJ: t }
            );
            if (!i.endsWith("px")) throw new Error("CSS style for menu border-width must be in units of 'px'");
            return parseFloat(i) || 0;
        }
        static pnn(t, i, e, s) {
            NS.vu(t);
            let n = new NS.Event(t);
            (n.item = i), (n.clientX = e), (n.clientY = s), i.vwi().dispatchEvent(n);
        }
        static srn(t, i, e) {
            NS.wi(t), NS.wi(i), NS.Et(e, NS.ti.Tj.$Nt);
            let s = new NS.Event("itemsorted");
            (s.Izi = t), (s.Ezi = i), (s.item = e), e.vwi().dispatchEvent(s);
        }
        static rrn(t, i, e) {
            NS._T(t), NS._T(i), NS.HZ(e, NS.ti.Tj.$Nt);
            let s = new NS.Event("itemssorted");
            (s.Azi = t), (s.Pzi = i), (s.items = e), e[0].vwi().dispatchEvent(s);
        }
        static Mlt() {
            return !!KS;
        }
        static xFt() {
            if (KS) return JS;
        }
        static EF() {
            KS && (JS ? JS.n0() : lx());
        }
    };
}
{
    const cx = self.t;
    cx.ti.Tj.knn = class extends cx.ti.Tj.tWi {
        constructor(t, i, e, s, n, r) {
            cx.Et(t, cx.ti.Tj.yMt),
                cx.qm(i, cx.ti.zrt),
                cx.$rt(e),
                cx.HI(n),
                super(t, i, e, s, n, (r = !!r)),
                (this.hrn.style.display = "none"),
                (this.orn.style.display = "none"),
                (this.arn.style.display = "none");
        }
        Dwi(t, i) {
            cx.vu(i), super.Dwi(t, "draggable");
        }
        Nwi(t, i) {
            cx.vu(i), super.Nwi(t, "draggable");
        }
        Vwi(t, i) {
            cx.vu(i), super.Vwi(t, "draggable");
        }
    };
}
{
    const dx = self.t;
    dx.ti.Tj.Wnn = class extends dx.MV {
        constructor(t, i) {
            dx.Et(t, dx.ti.Tj.yMt),
                dx.vu(i),
                super(),
                (this.gMt = t),
                (this.Gqt = i),
                (this.cEt = dx.ti.gj("div", this.gMt.FO(), null, "iconview-group")),
                (this.fEt = dx.ti.gj("div", this.cEt, null, "iconview-grouptitle")),
                (this.uAt = dx.ti.gj("span", this.fEt, null, "iconview-groupname")),
                (this.crn = dx.ti.gj("span", this.fEt, null, "iconview-grouprule")),
                (this.HEi = dx.ti.gj("div", this.cEt, null, "iconview-groupcontent")),
                (this._ts = []),
                (this.drn = 0),
                (this.Ynn = !1),
                (this.uAt.textContent = this.Gqt);
        }
        Jnn() {
            return this.HEi;
        }
        CPt(t) {
            dx.yh(this._ts),
                t ||
                    (dx.ti.Tz(this.HEi),
                    dx.ti.Tz(this.crn),
                    dx.ti.Tz(this.uAt),
                    dx.ti.Tz(this.fEt),
                    dx.ti.Tz(this.cEt)),
                (this.HEi = null),
                (this.crn = null),
                (this.uAt = null),
                (this.fEt = null),
                (this.cEt = null),
                (this.gMt = null),
                dx.Ut(this);
        }
        xO(t, i, e, s) {
            let n = this.gMt.xO(t, i, e, s, this);
            return this._ts.push(n), n;
        }
        Qnn(t, i) {
            dx.Et(t, dx.ti.Tj.$Nt), (i = !!i) ? this.drn++ : this.drn--, this.Ivt(this.drn === this._ts.length);
        }
        Ivt(t) {
            (t = !!t), this.Ynn !== t && ((this.Ynn = t), dx.ti.CT(this.cEt, "hidden", this.Ynn));
        }
        Fre() {
            return this.Ynn;
        }
    };
}
{
    const fx = self.t,
        px = { wrap: !0, flex: !0 };
    fx.ti.Hde = class extends fx.Event.aG {
        constructor(t, i, e) {
            fx.Gct(t),
                fx.Et(i, fx.ti.Window),
                fx.oN(e),
                super(),
                (e = Object.assign({}, px, e)),
                (this.GMt = t),
                (this.frn = i),
                (this.prn = []),
                (this.mrn = new Map()),
                (this.wrn = !1),
                (this.aBi = null),
                (this.grn = []),
                (this.S3t = e),
                this.S3t.flex && (this.GMt.style.display = "flex"),
                (this.L3t = (t) => this.QA()),
                (this.W3t = (t) => this.tz()),
                (this.H3t = (t) => this.iz()),
                (this.$3t = (t) => this.sz()),
                this.frn.addEventListener("beforepopupopen", this.L3t),
                this.frn.addEventListener("afterpopupopen", this.W3t),
                this.frn.addEventListener("beforepopupclose", this.H3t),
                this.frn.addEventListener("afterpopupclose", this.$3t),
                this.TR();
        }
        Ut() {
            fx.yh(this.grn), (this.grn = null), this.Pz();
            for (let t = 0; t < this.prn.length; t++) this.prn[t].yrn() && this.prn[t].Ut();
            for (let t of this.mrn) t.Ut();
            fx.ti.Tz(this.aBi),
                Array.prototype.forEach.call(this.GMt.getElementsByTagName("ui-toolbar-remaining-space"), (t) => {
                    fx.ti.Tz(t);
                }),
                Array.prototype.forEach.call(this.GMt.getElementsByTagName("ui-toolbar-container"), (t) => {
                    fx.ti.Tz(t);
                }),
                this.frn.removeEventListener("beforepopupopen", this.L3t),
                (this.L3t = null),
                this.frn.removeEventListener("afterpopupopen", this.W3t),
                (this.W3t = null),
                this.frn.removeEventListener("beforepopupclose", this.H3t),
                (this.H3t = null),
                this.frn.removeEventListener("afterpopupclose", this.$3t),
                (this.$3t = null),
                (this.frn = null),
                (this.GMt.style.display = ""),
                (this.GMt = null),
                (this.prn = null),
                (this.aBi = null),
                (this.mrn = null),
                super.Ut();
        }
        tTt() {
            return this.aBi;
        }
        KZt() {
            if (!this.GMt) throw new Error("missing parent element");
            let t = this.GMt.querySelector("ui-toolbar-container[level='0']");
            if (!t) throw new Error("missing root container element");
            return t;
        }
        Qde(t, i, e, s) {
            fx.vu(t), fx.wi(i), fx._T(e), (s = Object.assign({}, this.S3t, s));
            let n = fx.m(fx.ti.Tj.brn, this, this.GMt, t, i, "horizontal", "required", s);
            return this.prn.push(n), (this.wrn = !0), this.vrn(n, e), n;
        }
        LPi(t, i, e, s) {
            fx.vu(t), fx.wi(i), fx._T(e), (s = Object.assign({}, this.S3t, s));
            let n = fx.m(fx.ti.Tj.brn, this, this.GMt, t, i, "vertical", "required", s);
            return this.prn.push(n), (this.wrn = !0), this.vrn(n, e), n;
        }
        BPi(t, i, e, s) {
            fx.vu(t), fx.wi(i), fx._T(e), (s = Object.assign({}, this.S3t, s));
            let n = fx.m(fx.ti.Tj.brn, this, this.GMt, t, i, "horizontal", "optional", s);
            this.mrn.set(t, n), this.vrn(n, e);
        }
        Srn(t, i, e) {
            fx.vu(t), fx.wi(i), fx._T(e);
            let s = fx.m(fx.ti.Tj.brn, this, this.GMt, t, i, "vertical", "optional", this.S3t);
            this.mrn.set(t, s), this.vrn(s, e);
        }
        zPi(t) {
            fx.yp(t), this.grn.push(t);
        }
        xrn() {
            return !!this.grn && !!this.grn.length && this.grn.some((t) => t());
        }
        r_i(t, i) {
            fx.vu(t), (i = !!i);
            let e = this.mrn.get(t);
            if ((self.assert(e, "optional toolbar is not present in this toolbar layout"), i)) {
                if (-1 !== this.prn.indexOf(e)) return;
                this.prn.push(e);
            } else {
                if (-1 === this.prn.indexOf(e)) return;
                this.prn.splice(this.prn.indexOf(e), 1);
            }
            e.tO(i), (this.wrn = !0);
        }
        qPi(t) {
            t = !!t;
            for (let i of this.mrn.keys()) this.r_i(i, t);
        }
        QPi() {
            for (let t = 0; t < this.prn.length; t++) {
                if (this.prn[t].Mrn()) return !0;
            }
            return !1;
        }
        ZPi(t) {
            return fx.vu(t), !!this.mrn.get(t);
        }
        FFi(t) {
            fx.vu(t);
            for (let i = 0; i < this.prn.length; i++) {
                let e = this.prn[i];
                e.She() == t && e.Ern();
            }
        }
        QO() {
            if (!this.wrn) return;
            this.wrn = !1;
            let t = 0,
                i = 0;
            this.aBi && ((t = this.aBi.scrollLeft), (i = this.aBi.scrollTop));
            let e = this.GMt.querySelector("ui-toolbar-container[level='0']");
            e && e.parentNode.removeChild(e);
            let s = this.prn.length,
                n = this.GMt,
                r = this.GMt.getBoundingClientRect();
            for (let t = 0; t < s; t++) {
                let i = this.prn[t],
                    e = i.FO(),
                    h = fx.ti.gj("ui-toolbar-container", n);
                h.setAttribute("level", t.toString()), h.appendChild(e);
                let o,
                    a = h.getBoundingClientRect();
                i.zqi() ? h.setAttribute("horizontal", "") : i.Wqi() && h.setAttribute("vertical", ""),
                    i.Crn()
                        ? h.setAttribute("wrap", "")
                        : i.cO()
                          ? (h.style.setProperty("--parent-x-offset", `${Math.abs(r.left - a.left)}px`),
                            h.style.setProperty("--parent-y-offset", `${Math.abs(r.top - a.top)}px`))
                          : (h.style.setProperty("--parent-x-offset", "0px"),
                            h.style.setProperty("--parent-y-offset", "0px")),
                    t == s - 1
                        ? this.aBi
                            ? (o = h.appendChild(this.aBi))
                            : ((o = fx.ti.gj("ui-toolbar-layout-remaining-space", h)),
                              this.S3t.wrap && o.setAttribute("wrap", ""))
                        : (o = fx.ti.gj("ui-toolbar-remaining-space", h)),
                    (n = o);
            }
            for (let t = 0; t < s; t++) this.prn[t].bte();
            (this.aBi = n), (this.aBi.scrollLeft = t), (this.aBi.scrollTop = i);
        }
        H4i() {
            if (!this.S3t.wrap) {
                let t = this.GMt.getBoundingClientRect(),
                    i = this.GMt.querySelectorAll("ui-toolbar-container"),
                    e = i.length;
                for (let s = 0; s < e; s++) {
                    let e = i[s],
                        n = e.getBoundingClientRect(),
                        r = (e.style, Number(e.getAttribute("level")));
                    this.prn[r].cO()
                        ? (e.style.setProperty("--parent-x-offset", `${Math.abs(t.left - n.left)}px`),
                          e.style.setProperty("--parent-y-offset", `${Math.abs(t.top - n.top)}px`))
                        : (e.style.setProperty("--parent-x-offset", "0px"),
                          e.style.setProperty("--parent-y-offset", "0px"));
                }
            }
        }
        fm(t) {
            if (fx.q$t(t)) for (let i = 0; i < this.prn.length; i++) this.prn[i].fm(t);
            else if (fx.tet(t)) {
                let i = this.Ke(t);
                i && i.fm();
            } else for (let t = 0; t < this.prn.length; t++) this.prn[t].fm();
        }
        Ke(t) {
            fx.vu(t);
            for (let i = 0; i < this.prn.length; i++) if (this.prn[i].She() === t) return this.prn[i];
        }
        FO(t) {
            fx.vu(t);
            for (let i = 0; i < this.prn.length; i++) {
                let e = this.prn[i].Zde(t);
                if (e && e.She() === t) return e;
            }
            throw new Error("id does not correspong to any toolbar element");
        }
        _rn(t) {
            fx.vu(t);
            let i = this.FO(t);
            return !!i && i.cO();
        }
        QI() {
            const t = {};
            for (const i of this.prn) {
                t[i.She()] = i.QI();
            }
            return t;
        }
        ZI(t) {
            if (t)
                for (const i of Object.keys(t)) {
                    const e = this.Ke(i);
                    e && e.ZI(t[i]);
                }
        }
        TR() {
            for (const t of this.prn) t.iWi();
        }
        Pz() {
            for (const t of this.prn) t.eWi();
        }
        QA() {
            this.Pz();
        }
        tz() {
            this.TR();
        }
        iz() {
            this.Pz();
        }
        sz() {
            this.TR();
        }
        static Trn(t) {
            (t.group = ""),
                (t.XZt = function (i) {
                    return fx.vu(i), (t.group = i), t;
                });
        }
        static Irn(t) {
            (t.options = {}),
                (t._Tt = function (i) {
                    return fx.Dpt(i), (t.options = i), t;
                });
        }
        static qde(t, i, e, s, n) {
            fx.vu(t), fx.Et(i, fx.ti.zrt), fx.k$(e);
            let r = { type: "click", id: t, icon: i, pU: e, Prn: s, disable: (n = !!n) };
            return this.Trn(r), this.Irn(r), r;
        }
        static YZt(t, i, e, s, n) {
            fx.vu(t), fx.Et(i, fx.ti.zrt), fx.k$(e);
            let r = { type: "check", id: t, icon: i, pU: e, Grn: s, disable: (n = !!n) };
            return this.Trn(r), this.Irn(r), r;
        }
        static Arn(t, i, e, s, n, r) {
            fx.vu(t), fx.Et(i, fx.ti.zrt), fx.Et(e, fx.ti.zrt), fx.k$(s);
            let h = { type: "switch", id: t, Rrn: i, krn: e, pU: s, Grn: n, disable: (r = !!r) };
            return this.Trn(h), this.Irn(h), h;
        }
        static jZt(t, i, e, s, n) {
            fx.vu(t), fx.Et(i, fx.ti.zrt), fx.k$(e);
            let r = { type: "radio", id: t, icon: i, pU: e, Grn: s, disable: (n = !!n) };
            return this.Trn(r), this.Irn(r), r;
        }
        static Fde(t, i, e, s, n, r, h) {
            fx.vu(t), fx.Et(i, fx.ti.zrt), fx.k$(e), fx.k$(s);
            let o = { type: "split", id: t, icon: i, Orn: e, Drn: s, Frn: n, Lrn: r, disable: (h = !!h) };
            return this.Trn(o), this.Irn(o), o;
        }
        static Brn(t, i, e, s, n, r, h) {
            fx.vu(t), fx.Et(i, fx.ti.zrt), fx.k$(e), fx.k$(s);
            let o = { type: "splitcheck", id: t, icon: i, Orn: e, Drn: s, Frn: n, Lrn: r, disable: (h = !!h) };
            return this.Trn(o), this.Irn(o), o;
        }
        static VZt(t, i, e, s, n, r, h) {
            fx.vu(t), fx.Et(i, fx.ti.zrt), fx.k$(e), fx.k$(s);
            let o = { type: "splitradio", id: t, icon: i, Orn: e, Drn: s, Frn: n, Lrn: r, disable: (h = !!h) };
            return this.Trn(o), this.Irn(o), o;
        }
        static YO(t, i, e) {
            fx.k$(i);
            let s = { id: i, type: "separator", hidden: (t = !!t), disable: (e = !!e) };
            return this.Trn(s), this.Irn(s), s;
        }
        static HPi(t, i, e, s, n, r, h, o, a) {
            fx.vu(t), fx.wi(i), fx.wi(e), fx.HI(s), fx.HI(n), fx.k$(r);
            let l = {
                type: "slider",
                id: t,
                min: i,
                max: e,
                step: s,
                value: n,
                label: r,
                Urn: h,
                disable: (o = !!o),
                Nrn: (a = !!a),
            };
            return this.Trn(l), this.Irn(l), l;
        }
        static $Pi(t, i, e, s, n, r, h) {
            fx.vu(t), fx._T(i), fx.HI(e), fx.k$(s);
            let o = {
                type: "stepslider",
                id: t,
                jrn: i,
                value: e,
                label: s,
                Urn: n,
                disable: (r = !!r),
                Nrn: (h = !!h),
            };
            return this.Trn(o), this.Irn(o), o;
        }
        static $rn(t, i, e) {
            fx.vu(t);
            let s = { type: "color", id: t, zrn: i, disable: (e = !!e) };
            return this.Trn(s), this.Irn(s), s;
        }
        static lQt(t, i, e, s, n) {
            fx.vu(t), fx.k$(i);
            let r = { type: "checkbox", id: t, label: i, Grn: e, disable: (s = !!s), Nrn: (n = !!n) };
            return this.Trn(r), this.Irn(r), r;
        }
        static Yzt(t, i, e, s, n, r, h, o, a, l) {
            fx.vu(t), fx.HI(i), fx.HI(e), fx.HI(s), fx.HI(n), fx.k$(r), fx.k$(h);
            let u = {
                type: "spinner",
                id: t,
                min: i,
                max: e,
                step: s,
                value: n,
                label: r,
                pU: h,
                Vrn: o,
                disable: (a = !!a),
                Nrn: (l = !!l),
            };
            return this.Trn(u), this.Irn(u), u;
        }
        static xTt(t, i, e, s, n, r) {
            fx.vu(t), fx.kDt(s), fx.k$(i);
            let h = { type: "textbox", value: i, label: e, id: t, zrn: s, disable: (n = !!n), Nrn: r };
            return this.Trn(h), this.Irn(h), h;
        }
        static yTt(t, i, e, s, n, r) {
            fx.vu(t), fx.kDt(s), fx.Pce(i);
            let h = { type: "dropdown", id: t, values: i, label: e, zrn: s, disable: (n = !!n), Nrn: r };
            return this.Trn(h), this.Irn(h), h;
        }
        static Nti(t, i, e, s, n, r) {
            fx.vu(t), fx.kDt(s), fx.Pce(i);
            let h = { type: "editable-dropdown", id: t, values: i, label: e, zrn: s, disable: (n = !!n), Nrn: r };
            return this.Trn(h), this.Irn(h), h;
        }
        static Xde() {
            return this._Bt(26);
        }
        static bTt() {
            return this._Bt(35);
        }
        static Wrn() {
            return this._Bt(45);
        }
        static _Bt(t) {
            return fx.wi(t), Math.round(fx.ti._Bt() * (t / 13));
        }
        static kKi(t, i) {
            fx.Gct(t), fx.Et(i, fx.ti.Hde);
            for (let e = 0; e < i.prn.length; e++) for (const s of i.prn[e].elements()) if (fx.sU(t, s)) return !0;
            return !1;
        }
        vrn(t, i) {
            for (let e = 0; e < i.length; e++) {
                let s = i[e];
                switch (s.type) {
                    case "click":
                        t.qde(s.id, s.icon, s.pU, s.Prn, s.options, s.disable, s.group);
                        break;
                    case "check":
                        t.YZt(s.id, s.icon, s.pU, s.Grn, s.options, s.disable, s.group);
                        break;
                    case "switch":
                        t.Arn(s.id, s.Rrn, s.krn, s.pU, s.Grn, s.options, s.disable, s.group);
                        break;
                    case "radio":
                        t.jZt(s.id, s.icon, s.pU, s.Grn, s.options, s.disable, s.group);
                        break;
                    case "split":
                        t.Fde(s.id, s.icon, s.Orn, s.Drn, s.Frn, s.Lrn, s.disable, s.group);
                        break;
                    case "splitcheck":
                        t.Brn(s.id, s.icon, s.Orn, s.Drn, s.Frn, s.Lrn, s.disable, s.group);
                        break;
                    case "splitradio":
                        t.VZt(s.id, s.icon, s.Orn, s.Drn, s.Frn, s.Lrn, s.disable, s.group);
                        break;
                    case "separator":
                        t.YO(s.hidden, s.id, s.disable, s.group);
                        break;
                    case "slider":
                        t.HPi(s.id, s.min, s.max, s.step, s.value, s.label, s.Urn, s.disable, s.Nrn, s.group);
                        break;
                    case "stepslider":
                        t.$Pi(s.id, s.jrn, s.value, s.label, s.Urn, s.disable, s.Nrn, s.group);
                        break;
                    case "color":
                        t.$rn(s.id, s.zrn, s.disable, s.group);
                        break;
                    case "checkbox":
                        t.lQt(s.id, s.label, s.Grn, s.disable, s.Nrn, s.group);
                        break;
                    case "textbox":
                        t.Hrn(s.id, s.value, s.label, s.zrn, s.disable, s.Nrn, s.group, s.options);
                        break;
                    case "dropdown":
                        t.yTt(s.id, s.values, s.label, s.zrn, s.options, s.disable, s.Nrn, s.group);
                        break;
                    case "editable-dropdown":
                        t.Nti(s.id, s.values, s.label, s.zrn, s.options, s.disable, s.Nrn, s.group);
                        break;
                    case "spinner":
                        t.Yzt(s.id, s.min, s.max, s.step, s.value, s.label, s.pU, s.Vrn, s.disable, s.Nrn, s.group);
                }
            }
        }
    };
}
{
    const mx = self.t,
        wx = self.assert,
        gx = new Set(["horizontal", "vertical"]),
        yx = new Set(["required", "optional"]);
    mx.ti.Tj.brn = class extends mx.MV {
        constructor(t, i, e, s, n, r, h) {
            if (
                (mx.Et(t, mx.ti.Hde), mx.Gct(i), mx.vu(e), mx.wi(s), mx.vu(n), mx.vu(r), mx.Dpt(h), super(), !gx.has(n))
            )
                throw new Error(`invalid toolbar layout '${n}'`);
            if (!yx.has(r)) throw new Error(`invalid toolbar type '${r}'`);
            (this.S3t = h),
                (this.Krn = t),
                (this.TWi = i),
                (this.lp = s),
                (this.nes = e),
                (this.W0e = "horizontal" === n),
                (this.Osi = r),
                (this.h3e = !0),
                (this.qrn = !0),
                (this.Xrn = !!h.wrap),
                (this.jci = []),
                (this.mht = mx.ti.gj("ui-toolbar")),
                this.mht.setAttribute("role", "toolbar"),
                this.mht.setAttribute(n, ""),
                (this.C7i = null),
                (this.Yrn = !1),
                this.Xrn
                    ? this.mht.setAttribute("wrap", "")
                    : ((this.C7i = (t) => this.DG(t)), this.mht.addEventListener("scroll", this.C7i)),
                this.tO(!1),
                (this.zwt = 0),
                (this.Lwt = 0);
        }
        Ut() {
            this.mht.removeEventListener("scroll", this.C7i), (this.C7i = null);
            for (let t = 0; t < this.jci.length; t++) this.jci[t].Ut();
            mx.ti.Tz(this.mht), (this.mht = null), (this.TWi = null), (this.jci = null), mx.Ut(this);
        }
        tO(t, i) {
            if (((t = !!t), (i = !!i), this.Mrn() || i)) {
                if (t) {
                    if (this.h3e) return;
                    this.mht.style.display = "";
                } else {
                    if (!this.h3e) return;
                    this.mht.style.display = "none";
                }
                this.h3e = t;
            }
        }
        lki(t) {
            t = !!t;
            for (let i = 0; i < this.jci.length; i++) this.jci[i].tO(t);
        }
        cO() {
            return this.h3e;
        }
        su() {
            return this.lp;
        }
        Jrn() {
            (this.zwt = this.mht.scrollLeft), (this.Lwt = this.mht.scrollTop);
        }
        bte() {
            (this.mht.scrollLeft = this.zwt), (this.mht.scrollTop = this.Lwt);
        }
        She() {
            return this.nes;
        }
        FO() {
            return this.mht;
        }
        tTt() {
            let t = this.mht.nextSibling;
            for (; t; ) {
                if ("UI-TOOLBAR-REMAINING-SPACE" === t.tagName) return t;
                if ("UI-TOOLBAR-LAYOUT-REMAINING-SPACE" === t.tagName) return t;
                t = t.nextSibling;
            }
        }
        Zrn() {
            return this.Krn;
        }
        LYt() {
            return this.S3t;
        }
        yrn() {
            return "required" === this.Osi;
        }
        Mrn() {
            return "optional" === this.Osi;
        }
        zqi() {
            return this.W0e;
        }
        Wqi() {
            return !this.W0e;
        }
        Crn() {
            return this.Xrn;
        }
        Yde() {
            this.mht.setAttribute("transparent", "");
        }
        qde(t, i, e, s, n, r, h) {
            mx.vu(t), mx.Et(i, mx.ti.zrt), mx.k$(e), mx.kDt(s), mx.vu(h);
            let o = mx.m(mx.ti.Tj.brn.Ys, this, t, i, e, "click", s, n);
            o.lht(!r), o.XZt(h), this.jci.push(o);
        }
        YZt(t, i, e, s, n, r, h) {
            mx.vu(t), mx.Et(i, mx.ti.zrt), mx.k$(e), mx.kDt(s), mx.vu(h);
            let o = mx.m(mx.ti.Tj.brn.Ys, this, t, i, e, "check", s, n);
            o.lht(!r), o.XZt(h), this.jci.push(o);
        }
        Arn(t, i, e, s, n, r, h, o) {
            mx.vu(t), mx.Et(i, mx.ti.zrt), mx.Et(e, mx.ti.zrt), mx.k$(s), mx.kDt(n), mx.vu(o);
            let a = mx.m(mx.ti.Tj.brn.Qrn, this, t, i, e, s, "check", n, r);
            a.lht(!h), a.XZt(o), this.jci.push(a);
        }
        jZt(t, i, e, s, n, r, h) {
            mx.vu(t), mx.Et(i, mx.ti.zrt), mx.k$(e), mx.kDt(s), mx.vu(h);
            let o = mx.m(mx.ti.Tj.brn.Ys, this, t, i, e, "radio", s, n);
            o.lht(!r), o.XZt(h), this.jci.push(o);
        }
        Fde(t, i, e, s, n, r, h, o) {
            mx.vu(t), mx.Et(i, mx.ti.zrt), mx.k$(e), mx.k$(s), mx.kDt(n), mx.kDt(r), mx.vu(o);
            let a = mx.m(mx.ti.Tj.brn.thn, this, t, i, e, s, n, r);
            a.lht(!h), a.XZt(o), a.O4t("click"), this.jci.push(a);
        }
        Brn(t, i, e, s, n, r, h, o) {
            mx.vu(t), mx.Et(i, mx.ti.zrt), mx.k$(e), mx.k$(s), mx.kDt(n), mx.kDt(r), mx.vu(o);
            let a = mx.m(mx.ti.Tj.brn.thn, this, t, i, e, s, n, r);
            a.lht(!h), a.XZt(o), a.O4t("check"), this.jci.push(a);
        }
        VZt(t, i, e, s, n, r, h, o) {
            mx.vu(t), mx.Et(i, mx.ti.zrt), mx.k$(e), mx.k$(s), mx.kDt(n), mx.kDt(r), mx.vu(o);
            let a = mx.m(mx.ti.Tj.brn.thn, this, t, i, e, s, n, r);
            a.lht(!h), a.XZt(o), a.O4t("radio"), this.jci.push(a);
        }
        YO(t, i, e, s) {
            mx.k$(i), mx.vu(s), (t = !!t);
            let n = mx.m(mx.ti.Tj.brn.ihn, this, t, i);
            n.lht(!e), n.XZt(s), this.jci.push(n);
        }
        HPi(t, i, e, s, n, r, h, o, a, l) {
            mx.vu(t), mx.wi(i), mx.wi(e), mx.HI(s), mx.HI(n), mx.k$(r), mx.kDt(h), mx.vu(l), (a = !!a);
            let u = mx.m(mx.ti.Tj.brn.ehn, this, t, i, e, s, n, r, h, a);
            u.lht(!o), u.XZt(l), this.jci.push(u);
        }
        $Pi(t, i, e, s, n, r, h, o) {
            mx.vu(t), mx._T(i), mx.HI(e), mx.k$(s), mx.kDt(n), mx.vu(o), (h = !!h);
            let a = mx.m(mx.ti.Tj.brn.shn, this, t, i, e, s, n, h);
            a.lht(!r), a.XZt(o), this.jci.push(a);
        }
        $rn(t, i, e, s) {
            mx.vu(t), mx.kDt(i), mx.vu(s);
            let n = mx.m(mx.ti.Tj.brn.nbi, this, t, i);
            n.lht(!e), n.XZt(s), this.jci.push(n);
        }
        lQt(t, i, e, s, n, r) {
            mx.vu(t), mx.k$(i), mx.kDt(e), mx.vu(r), (n = !!n);
            let h = mx.m(mx.ti.Tj.brn.nhn, this, t, i, e, n);
            h.lht(!s), h.XZt(r), this.jci.push(h);
        }
        Yzt(t, i, e, s, n, r, h, o, a, l, u) {
            mx.vu(t), mx.HI(i), mx.HI(e), mx.HI(s), mx.HI(n), mx.k$(r), mx.k$(h), mx.kDt(o), mx.vu(u), (l = !!l);
            let c = mx.m(mx.ti.Tj.brn.rhn, this, t, i, e, s, n, r, h, o, l);
            c.lht(!a), c.XZt(u), this.jci.push(c);
        }
        Hrn(t, i, e, s, n, r, h, o) {
            mx.vu(t), mx.kDt(s), mx.k$(i), mx.vu(h);
            let a = mx.m(mx.ti.Tj.brn.hhn, this, t, i, e, s, r, o);
            a.lht(!n), a.XZt(h), this.jci.push(a);
        }
        yTt(t, i, e, s, n, r, h, o) {
            mx.vu(t), mx.kDt(s), mx.Pce(i), mx.vu(o);
            let a = mx.m(mx.ti.Tj.brn.ohn, this, t, i, e, s, n, h);
            a.lht(!r), a.XZt(o), this.jci.push(a);
        }
        Nti(t, i, e, s, n, r, h, o) {
            mx.vu(t), mx.kDt(s), mx.Pce(i), mx.vu(o);
            let a = mx.m(mx.ti.Tj.brn.ahn, this, t, i, e, s, n, h);
            a.lht(!r), a.XZt(o), this.jci.push(a);
        }
        fm(t) {
            if (mx.q$t(t)) {
                mx.vu(t["element-group"]), "no-group" === t["element-group"] && (t["element-group"] = "");
                for (let i = 0; i < this.jci.length; i++) {
                    let e = this.jci[i];
                    e.lhn() === t["element-group"] && e.fm();
                }
            } else if (mx.tet(t)) this.uhn(t);
            else for (let t = 0; t < this.jci.length; t++) this.jci[t].fm();
        }
        Ern() {
            for (let t = 0; t < this.jci.length; t++) this.jci[t].Ern();
        }
        lht(t) {
            (t = !!t) !== this.qrn &&
                (t ? this.mht.removeAttribute("disable") : this.mht.setAttribute("disable", ""), (this.qrn = t));
        }
        $K() {
            return this.qrn;
        }
        uhn(t) {
            mx.vu(t);
            let i = this.Zde(t);
            i && i.fm();
        }
        pme(t, i) {
            mx.vu(t), (i = !!i);
            let e = this.Zde(t);
            wx(e, "element is not part of toolbar"), e.lht(i);
        }
        _0t(t, i) {
            mx.vu(t);
            let e = this.Zde(t);
            wx(e, "element is not part of toolbar"), e.chn(i);
        }
        Zde(t) {
            mx.vu(t);
            for (let i = 0; i < this.jci.length; i++) if (this.jci[i].She() === t) return this.jci[i];
        }
        *elements() {
            for (let t = 0; t < this.jci.length; t++) yield this.jci[t].FO();
        }
        h0t(t, ...i) {
            mx.vu(t);
            let e = this.Zde(t);
            e && e.Yti(...i);
        }
        dhn() {
            return this.Yrn;
        }
        QI() {
            return { scrollLeft: this.zwt, scrollTop: this.Lwt };
        }
        ZI(t) {
            t &&
                ((this.zwt = t.scrollLeft),
                (this.Lwt = t.scrollTop),
                (this.mht.scrollLeft = this.zwt),
                (this.mht.scrollTop = this.Lwt));
        }
        iWi() {
            for (let t = 0; t < this.jci.length; t++) this.jci[t].iWi();
        }
        eWi() {
            for (let t = 0; t < this.jci.length; t++) this.jci[t].eWi();
        }
        fhn() {
            this.Yrn = !1;
        }
        DG(t) {
            this.Jrn(), (this.Yrn = !0);
        }
    };
}
{
    const bx = self.t;
    bx.ti.Tj.brn.Element = class extends bx.MV {
        constructor(t, i, e) {
            bx.Et(t, bx.ti.Tj.brn),
                bx.k$(i),
                bx.kDt(e),
                super(),
                (this.phn = t),
                (this.nes = i),
                (this.mht = null),
                (this.mhn = e),
                (this.gai = !0),
                (this.FDs = !0),
                (this.Xnn = "");
        }
        FO() {
            return this.mht;
        }
        She() {
            return this.nes;
        }
        CF() {
            return this.mht.ownerDocument || document;
        }
        whn() {
            this.phn.LYt().wrap && this.mht.setAttribute("wrap", "");
        }
        tO(t) {
            (t = !!t), this.gai !== t && ((this.mht.style.display = t ? "" : "none"), (this.gai = t));
        }
        cO() {
            return this.gai;
        }
        lht(t) {
            (t = !!t),
                this.FDs !== t &&
                    (t ? this.mht.removeAttribute("disable") : this.mht.setAttribute("disable", ""), (this.FDs = t));
        }
        $K() {
            return this.FDs;
        }
        chn(t) {}
        XZt(t) {
            bx.vu(t), (this.Xnn = t);
        }
        lhn() {
            return this.Xnn;
        }
        ame(t) {
            bx.vu(t), this.mht.setAttribute("title", t);
        }
        ghn(...t) {
            this.mhn && this.mhn(...t);
        }
        Ut() {
            bx.ti.Tz(this.mht), (this.mht = null), (this.phn = null), (this.mhn = null);
        }
        gl() {
            bx._2();
        }
        fm() {
            bx._2();
        }
        Ern() {
            bx._2();
        }
        Yti() {
            bx._2();
        }
        iWi() {}
        eWi() {}
        yhn(t, i) {
            for (var e in (bx.Dpt(t), bx._T(i), t))
                t.hasOwnProperty(e) &&
                    self.assert(
                        i.includes(e),
                        `'${e}' is not a supported update property. Supported update properties for this control are '${i.toString()}'`
                    );
        }
    };
}
{
    const vx = self.t,
        Sx = ["color"];
    vx.ti.Tj.brn.nbi = class extends vx.ti.Tj.brn.Element {
        constructor(t, i, e) {
            super(t, i, e),
                (this.bhn = (t) => this.jDi(t)),
                (this.mht = vx.ti.gj("ui-toolbar-color-picker", this.phn.FO())),
                (this.vhn = vx.ti.gj("input", this.mht, null, null, { type: "color" })),
                this.vhn.addEventListener("change", this.bhn),
                (this.eut = vx.ti.gj("span", this.mht)),
                (this.eut.innerHTML = this.vhn.value),
                this.whn();
        }
        Ut() {
            this.vhn.removeEventListener("change", this.bhn),
                vx.ti.Tz(this.vhn),
                vx.ti.Tz(this.eut),
                (this.bhn = null),
                (this.vhn = null),
                (this.eut = null),
                super.Ut();
        }
        gl(t) {
            vx.Dpt(t), this.yhn(t, Sx), t.hasOwnProperty("color") && vx.tet(t.color) && (this.vhn.value = t.color);
        }
        fm() {}
        Ern() {
            this.Shn();
        }
        Yti() {
            this.$K();
        }
        jDi(t) {
            (this.eut.innerHTML = this.vhn.value), this.Shn();
        }
        Shn() {
            let t = new vx.Event("colorchange");
            (t.xhn = this.phn.She()),
                (t.Mhn = this.nes.toLowerCase()),
                (t.color = this.vhn.value),
                this.phn.Zrn().dispatchEvent(t),
                this.ghn(this.vhn.value);
        }
    };
}
{
    const xx = self.t,
        Mx = ["min", "max", "step", "value", "label"];
    xx.ti.Tj.brn.ehn = class extends xx.ti.Tj.brn.Element {
        constructor(t, i, e, s, n, r, h, o, a) {
            xx.wi(e),
                xx.wi(s),
                xx.wi(n),
                xx.HI(r),
                xx.k$(h),
                super(t, i, o),
                (this.Ehn = e),
                (this.Chn = s),
                (this.iPs = n || 1),
                (this.Fvs = r || 0),
                (this._hn = this.Fvs),
                (this.mht = xx.ti.gj("ui-toolbar-slider", this.phn.FO())),
                (this.vhn = xx.ti.gj("input", this.mht, null, null, {
                    type: "range",
                    min: e.toString(),
                    max: s.toString(),
                    step: this.iPs.toString(),
                    value: this.Fvs.toString(),
                })),
                (this.Thn = xx.ti.gj("input", this.mht, null, null, {
                    type: "number",
                    min: e.toString(),
                    max: s.toString(),
                    step: this.iPs.toString(),
                    value: this.vhn.value.toString(),
                })),
                (this.eut = xx.ti.gj("span")),
                a
                    ? (this.eut.setAttribute("side", "right"), this.mht.appendChild(this.eut))
                    : (this.eut.setAttribute("side", "left"), this.mht.insertBefore(this.eut, this.vhn)),
                (this.eut.textContent = h || i.charAt(0).toUpperCase() + i.slice(1)),
                (this._a = null),
                (this.Ihn = null),
                this.Phn(),
                this.Ghn(),
                this.whn();
        }
        Ut() {
            xx.ti.Tz(this.vhn),
                xx.ti.Tz(this.eut),
                xx.ti.Tz(this.Thn),
                this._a && (this._a.Ua(), (this._a = null)),
                this.Ihn && (this.Ihn.Ua(), (this.Ihn = null)),
                (this.vhn = null),
                (this.eut = null),
                (this.Thn = null),
                super.Ut();
        }
        gl(t) {
            if (
                (xx.Dpt(t),
                this.yhn(t, Mx),
                t.hasOwnProperty("min") &&
                    xx.Xl(t.min) &&
                    ((this.Ehn = t.min), (this.vhn.min = this.Ehn.toString()), (this.Thn.min = this.Ehn.toString())),
                t.hasOwnProperty("max") &&
                    xx.Xl(t.max) &&
                    ((this.Chn = t.max), (this.vhn.max = this.Chn.toString()), (this.Thn.max = this.Ehn.toString())),
                t.hasOwnProperty("step") &&
                    xx.Xl(t.step) &&
                    ((this.iPs = t.step), (this.vhn.step = t.step.toString()), (this.Thn.step = t.step.toString())),
                t.hasOwnProperty("value") && xx.Xl(t.value))
            ) {
                let i = t.value.toString();
                (this.vhn.value = i), (this.Thn.value = i);
            }
            t.hasOwnProperty("label") && xx.tet(t.label) && (this.vhn.label = t.label);
        }
        fm() {}
        Ern() {
            this.Ahn("sliderchange");
        }
        Yti() {
            this.$K();
        }
        Phn() {
            this._a = xx.m(
                xx.Ha,
                xx.Xa.Wa(this.vhn, "input change", (t) => this.Ybi(t)),
                xx.Xa.Wa(this.Thn, "keypress", (t) => this.Rhn(t)),
                xx.Xa.Wa(this.Thn, "change input", (t) => this.khn(t)),
                xx.Xa.Wa(this.Thn, "blur", (t) => this.F3t())
            );
        }
        Ghn() {
            this.Ihn = xx.mCi(this.Thn);
        }
        Ybi(t) {
            (this.Thn.value = this.vhn.value),
                (this._hn = Number(this.vhn.value)),
                "change" === t.type && this.Ahn("sliderchange"),
                "input" === t.type && this.Ahn("sliderinput");
        }
        Rhn(t) {
            t.key.match(/[0-9.e\-]/) || t.preventDefault();
        }
        khn(t) {
            let i = this.Thn.value;
            if (i.length && ((i = Number(i)), !isNaN(i))) {
                let t = this.Ohn(),
                    e = this.Dhn();
                if (((i > e || i < t) && ((i = xx.ft(i, t, e)), (this.Thn.value = i)), this.vhn.value === i.toString()))
                    return;
                (this.vhn.value = i), (this._hn = i), this.Ahn("sliderinput");
            }
        }
        F3t() {
            let t = this.Thn.value;
            if (((t = Number(t)), isNaN(t))) this.Thn.value = this._hn;
            else {
                let i = this.Ohn(),
                    e = this.Dhn();
                if (
                    ((t = xx.ft(t, i, e)),
                    (t /= this.iPs),
                    (t = Math.round(t) * this.iPs),
                    this.Thn.value === t.toString())
                )
                    return;
                (this.Thn.value = t), (this.vhn.value = t), (this._hn = t), this.Ahn("sliderinput");
            }
        }
        Fhn(t) {
            (this.Ehn = t), this.Thn.setAttribute("min", t);
        }
        Ohn() {
            return this.Ehn;
        }
        Lhn(t) {
            (this.Chn = t), this.Thn.setAttribute("max", t);
        }
        Dhn() {
            return this.Chn;
        }
        Ahn(t) {
            xx.vu(t);
            let i = new xx.Event(t);
            (i.xhn = this.phn.She()), (i.MNi = this.nes.toLowerCase()), (i.jNi = NaN);
            let e = Number(this.vhn.value);
            xx.Xl(e) ? (i.jNi = xx.ft(e, this.Ehn, this.Chn)) : (i.jNi = this.Ehn),
                this.phn.Zrn().dispatchEvent(i),
                this.ghn(i.jNi);
        }
    };
}
{
    const Ex = self.t,
        Cx = self.assert,
        _x = ["steps", "percentage", "value", "label"],
        Tx = ["linear", "logarithmic"];
    Ex.ti.Tj.brn.shn = class extends Ex.ti.Tj.brn.ehn {
        constructor(t, i, e, s, n, r, h) {
            Ex._T(e),
                super(t, i, 0, 100, 1, Ex.ft(s, 0, 100), n, r, h),
                (this.Bhn = []),
                this.Uhn(e),
                this.Fhn(this.Bhn[0].Nhn),
                this.Lhn(this.Bhn.at(-1).jhn),
                (this.vhn.value = Ex.ft(s, 0, 100).toString()),
                (this.Thn.value = this.$hn());
        }
        Ut() {
            Ex.yh(this.Bhn), (this.Bhn = null), super.Ut();
        }
        gl(t) {
            if (
                (Ex.Dpt(t),
                this.yhn(t, _x),
                t.hasOwnProperty("steps") &&
                    Ex.vwt(t.steps) &&
                    (this.Uhn(t.steps),
                    this.Fhn(this.Bhn[0].Nhn),
                    this.Lhn(this.Bhn.at(-1).jhn),
                    (this.Thn.value = this.$hn())),
                t.hasOwnProperty("percentage") && Ex.Xl(t.percentage))
            ) {
                let i = Math.floor(t.percentage);
                (this.vhn.value = Ex.ft(i, 0, 100).toString()), (this.Thn.value = this.$hn());
            }
            if (t.hasOwnProperty("value") && Ex.Xl(t.value)) {
                let i = Math.floor(t.value);
                (this.Thn.value = Ex.ft(i, this.Bhn[0].Nhn, this.Bhn.at(-1).jhn).toString()),
                    (this.vhn.value = this.zhn());
            }
            t.hasOwnProperty("label") && Ex.tet(t.label) && (this.vhn.label = t.label);
        }
        fm() {}
        Ern() {
            this.Ahn("sliderchange");
        }
        Yti() {
            this.$K();
        }
        Phn() {
            this._a = Ex.m(
                Ex.Ha,
                Ex.Xa.Wa(this.vhn, "input change", (t) => this.Ybi(t)),
                Ex.Xa.Wa(this.Thn, "keypress", (t) => this.Rhn(t)),
                Ex.Xa.Wa(this.Thn, "change input", (t) => this.khn(t))
            );
        }
        Uhn(t) {
            Ex._T(t), Cx(t.length, "no steps defined for the step slider"), Ex.yh(this.Bhn);
            let i = 0;
            for (var e = 0; e < t.length; e++) {
                let s = t[e];
                if (
                    (Ex.Dpt(s),
                    Ex.wi(s.VPi),
                    Ex.wi(s.max),
                    Ex.HI(s.min),
                    Ex.vu(s.scale),
                    Cx(s.VPi <= 100, "percentage slice of a step can not be larger than 100%"),
                    Cx(s.VPi > 0, "percentage slice of a step can not be lower than 0%"),
                    Cx(Tx.includes(s.scale), `unexpected scale value '${s.scale}' for step. Valid values are '${Tx}'`),
                    e > 0 &&
                        Ex.Xl(s.min) &&
                        (() => {})("only the first step of a step slider needs to define a minimum value"),
                    "logarithmic" === s.scale &&
                        Cx(0 !== s.max, "maximum value must be different of 0 when using a logarithmic scale"),
                    0 === e)
                ) {
                    switch (s.scale) {
                        case "linear":
                            this.Bhn.push({ Vhn: 0, Whn: s.VPi, Nhn: s.min || 0, jhn: s.max, scale: s.scale });
                            break;
                        case "logarithmic":
                            this.Bhn.push({ Vhn: 0, Whn: s.VPi, Nhn: s.min || 1, jhn: s.max, scale: s.scale });
                    }
                    i += s.VPi;
                } else {
                    let n = t[e - 1];
                    this.Bhn.push({ Vhn: n.VPi, Whn: s.VPi, Nhn: n.max, jhn: s.max, scale: s.scale }),
                        (i += s.VPi - n.VPi);
                }
            }
            Cx(100 === i, "steps can not add up to more than 100%");
        }
        Ybi(t) {
            let i = this.$hn();
            (this.Thn.value = i),
                (this._hn = Number(this.vhn.value)),
                "change" === t.type && this.Ahn("sliderchange"),
                "input" === t.type && this.Ahn("sliderinput");
        }
        Rhn(t) {
            t.key.match(/[0-9.e\-]/) || t.preventDefault();
        }
        khn(t) {
            let i = this.Thn.value,
                e = this.Ohn(),
                s = this.Dhn();
            (i > s || i < e) && ((i = Ex.ft(i, e, s)), (this.Thn.value = i));
            let n = this.zhn();
            Ex.Xl(n) && ((n = Ex.ft(n, 0, 100)), (this.vhn.value = n), (this._hn = n), this.Hhn("sliderinput"));
        }
        Ahn(t) {
            Ex.vu(t);
            let i = this.$hn();
            this.ips(t, i);
        }
        Hhn(t) {
            Ex.vu(t);
            let i = this.Ohn(),
                e = this.Dhn(),
                s = Number(this.Thn.value);
            (s > e || s < i) && (s = Ex.ft(s, i, e)), this.ips(t, s);
        }
        ips(t, i) {
            Ex.vu(t), Ex.wi(i);
            let e = new Ex.Event(t);
            (e.xhn = this.phn.She()),
                (e.MNi = this.nes.toLowerCase()),
                (e.jNi = i),
                this.phn.Zrn().dispatchEvent(e),
                this.ghn(e.jNi);
        }
        Khn() {
            let t = this.vhn.value;
            for (let i of this.Bhn) if (t >= i.Vhn && t <= i.Whn) return i;
        }
        qhn() {
            let t = this.Thn.value;
            for (let i of this.Bhn) if (t >= i.Nhn && t <= i.jhn) return i;
        }
        Xhn(t) {
            for (let i = 0; i < this.Bhn.length; i++) {
                if (t === this.Bhn[i] && 0 !== i) return this.Bhn[i - 1];
            }
        }
        $hn() {
            let t = Number(this.vhn.value),
                i = this.Khn();
            if ((Cx(!isNaN(t), "step slider value is not a number"), i))
                switch (i.scale) {
                    case "linear":
                        let e,
                            s = this.Xhn(i);
                        return (e = s ? this.Yhn(s).jhn : i.Nhn), Math.round(Ex.Vft(t, i.Vhn, i.Whn, e, i.jhn));
                    case "logarithmic":
                        let n = i.Vhn,
                            r = i.Whn,
                            h = Math.log(i.Nhn),
                            o = (Math.log(i.jhn) - h) / (r - n);
                        return Math.round(Math.exp(h + o * (t - n)));
                }
        }
        zhn() {
            let t = Number(this.Thn.value),
                i = this.qhn();
            if ((Cx(!isNaN(t), "step slider value is not a number"), i))
                switch (i.scale) {
                    case "linear":
                        let e,
                            s = this.Xhn(i);
                        return (e = s ? this.Yhn(s).jhn : i.Nhn), Math.round(Ex.Vft(t, e, i.jhn, i.Vhn, i.Whn));
                    case "logarithmic":
                        let n = i.Vhn,
                            r = i.Whn,
                            h = Math.log(i.Nhn),
                            o = (Math.log(i.jhn) - h) / (r - n);
                        return Math.round((Math.log(t) - h) / o + n);
                }
        }
    };
}
{
    const Ix = self.t,
        Px = [];
    Ix.ti.Tj.brn.ihn = class extends Ix.ti.Tj.brn.Element {
        constructor(t, i, e) {
            (i = !!i),
                super(t, e),
                (this.mht = Ix.ti.gj("ui-toolbar-separator", this.phn.FO())),
                (this.mht.style.visibility = i ? "hidden" : ""),
                this.phn.zqi() &&
                    (this.mht.setAttribute("horizontal", ""), (this.mht.style.height = `${this.phn.su()}px`)),
                this.phn.Wqi() &&
                    (this.mht.setAttribute("vertical", ""), (this.mht.style.width = `${this.phn.su()}px`)),
                this.whn();
        }
        Ut() {
            super.Ut();
        }
        gl(t) {
            Ix.Dpt(t), this.yhn(t, Px);
        }
        fm() {}
        Ern() {}
        Yti() {}
    };
}
{
    const Gx = self.t,
        Ax = ["tooltip"],
        Rx = new Set(["click", "check", "radio"]),
        kx = 1e3,
        Ox = 5,
        Dx = 100;
    let Fx = !1;
    const Lx = { button: Gx.sQ.z0, preventDefault: () => {}, fireEvent: !0 },
        Bx = { Jhn: !1, Hti: "", Wti: "default" },
        Ux = new Map();
    Ux.set("select", ["border-color"]);
    const Nx = new Map();
    Nx.set("dropdown", "select");
    const jx = new Map();
    Gx.ti.Tj.brn.Ys = class extends Gx.ti.Tj.brn.Element {
        constructor(t, i, e, s, n, r, h) {
            if ((Gx.Et(e, Gx.ti.zrt), Gx.k$(s), Gx.vu(n), super(t, i, r), !Rx.has(n)))
                throw new Error(`invalid button type "${n}"`);
            if (
                ((this.Osi = n),
                (this.S3t = Object.assign({}, Bx, h)),
                (this.Zhn = !1),
                (this.Qhn = !1),
                (this.ton = -1),
                (this.ion = -1),
                (this.eon = !1),
                (this.son = !1),
                (this.mht = Gx.ti.gj("ui-toolbar-button", this.phn.FO())),
                "default" !== this.S3t.Wti && this.mht.setAttribute("corners", this.S3t.Wti),
                this.S3t.Hti)
            ) {
                const t = Nx.get(this.S3t.Hti);
                if (t) {
                    this.mht.setAttribute("support", t);
                    const i = Ux.get(t);
                    if (i)
                        for (const e of i) {
                            const s = `${t}-${e}`;
                            if (jx.has(s)) {
                                const t = jx.get(s);
                                this.mht.style.setProperty(`--${e}`, t);
                            } else {
                                const n = Gx.ti.gj(t, document.body),
                                    r = getComputedStyle(n).getPropertyValue(i);
                                this.mht.style.setProperty(`--${e}`, r), jx.set(s, r), Gx.ti.Tz(n);
                            }
                        }
                }
            }
            this.iut = Gx.m(Gx.ti.met, e, this.mht);
            let o = this.phn.su();
            (this.mht.style.width = `${o}px`),
                (this.mht.style.height = `${o}px`),
                s && (this.mht.setAttribute("title", s), this.mht.setAttribute("aria-label", s)),
                "click" === this.Osi
                    ? ((this.k3t = this.non(this.ron)),
                      (this.C3t = this.non(this.hon)),
                      (this.oon = this.non()),
                      (this.Qki = this.non(this.aon)),
                      (this.lon = this.non(this.uon)),
                      (this.con = this.non(this.don)))
                    : "check" === this.Osi
                      ? ((this.k3t = this.non(this.fon)),
                        (this.C3t = this.non()),
                        (this.oon = this.non(this.pon)),
                        (this.Qki = this.non(this.mon)),
                        (this.lon = this.non(this.won)),
                        (this.con = this.non(this.gon)))
                      : "radio" === this.Osi &&
                        ((this.k3t = this.non(this.fon)),
                        (this.C3t = this.non()),
                        (this.oon = this.non(this.yon)),
                        (this.Qki = this.non(this.bon)),
                        (this.lon = this.non(this.won)),
                        (this.con = this.non(this.gon))),
                (this.von = this.non(this.fz)),
                (this.Son = this.non(this.xon)),
                this.mht.addEventListener("pointerdown", this.k3t),
                this.mht.addEventListener("pointerup", this.C3t),
                this.mht.addEventListener("pointerup", this.oon),
                this.mht.addEventListener("pointercancel", this.Qki),
                this.mht.addEventListener("contextmenu", this.von),
                this.mht.addEventListener("mouseout", this.lon),
                this.mht.addEventListener("mouseover", this.con),
                this.whn(),
                (this.Mon = NaN),
                (this.Eon = NaN),
                (this.Con = (t) => {
                    (this.Mon = NaN), (this.Eon = NaN);
                }),
                (this._on = (t) => {
                    (this.Mon = t.clientX), (this.Eon = t.clientY);
                }),
                this.iWi();
        }
        Ut() {
            (this.S3t = null),
                this.mht.removeEventListener("pointerdown", this.k3t),
                this.mht.removeEventListener("pointerup", this.C3t),
                this.mht.removeEventListener("pointerup", this.oon),
                this.mht.removeEventListener("pointercancel", this.Qki),
                this.mht.removeEventListener("mouseout", this.lon),
                this.mht.removeEventListener("mouseover", this.con),
                Gx.ti.Tz(this.mht),
                this.iut.Ut(),
                (this.iut = null),
                (this.k3t = null),
                (this.C3t = null),
                (this.lon = null),
                (this.con = null),
                clearTimeout(this.ton),
                (this.ton = -1),
                clearTimeout(this.ion),
                (this.ion = -1),
                super.Ut();
        }
        iWi() {
            const t = this.mht.ownerDocument;
            t.addEventListener("pointerdown", this.Con, !0), t.addEventListener("pointermove", this._on, !0);
        }
        eWi() {
            const t = this.mht.ownerDocument;
            t.removeEventListener("pointerdown", this.Con, !0), t.removeEventListener("pointermove", this._on, !0);
        }
        gl(t) {
            Gx.Dpt(t),
                this.yhn(t, Ax),
                t.hasOwnProperty("tooltip") &&
                    Gx.tet(t.tooltip) &&
                    (this.mht.setAttribute("title", t.tooltip), this.mht.setAttribute("aria-label", t.tooltip));
        }
        fm() {
            this.mht.removeAttribute("mouse-down"),
                this.mht.removeAttribute("mouse-over"),
                this.Zhn &&
                    !this.eon &&
                    ((this.Zhn = !1),
                    this.mht.addEventListener("pointerup", this.C3t),
                    this.mht.addEventListener("pointercancel", this.Qki),
                    this.mht.addEventListener("mouseout", this.lon),
                    this.mht.addEventListener("mouseover", this.con)),
                clearTimeout(this.ton),
                (this.ton = -1),
                clearTimeout(this.ion),
                (this.ion = -1);
        }
        Ern() {}
        Yti(t = !0) {
            if (this.$K())
                if (((t = !!t), (this.Qhn = !1), "click" === this.Osi)) {
                    if (this.son) return;
                    this.ron(Lx, !1),
                        (this.son = !0),
                        (this.ion = setTimeout(() => {
                            (this.son = !1), this.hon(Lx, t, !1), (this.ion = -1);
                        }, Dx));
                } else "check" === this.Osi ? this.Ton(t, !1, !0, !1) : "radio" === this.Osi && this.Ion(t, !0, !1);
        }
        lht(t) {
            super.lht(t), t || this.fm();
        }
        zD(t) {
            this.iut.zD(t);
        }
        chn(t) {
            if ("check" === this.Osi)
                switch (t) {
                    case "check":
                        return this.Ton(!1, !0, !0, !1);
                    case "uncheck":
                        return this.fm();
                }
            else if ("radio" === this.Osi)
                switch (t) {
                    case "check":
                        return this.Ion(!1, !0, !1);
                    case "uncheck":
                        return this.fm();
                }
        }
        non(t) {
            return (i) => {
                t && (this.phn.Zrn().xrn() || t.call(this, i));
            };
        }
        ron(t, i = void 0) {
            this.phn.fhn(),
                (Fx =
                    void 0 === i
                        ? !(!t.pointerType || "mouse" === t.pointerType)
                        : !!t.pointerType && "mouse" !== t.pointerType),
                (Fx || t.button === Gx.sQ.z0) &&
                    (this.son || ((this.Qhn = !1), this.mht.setAttribute("mouse-down", "")));
        }
        hon(t, i = !0, e = void 0) {
            const s = Fx;
            void 0 === e && (Fx = !(!t.pointerType || "mouse" === t.pointerType));
            let n = !1;
            if (
                ((Fx || t.button === Gx.sQ.z0) && this.mht.hasAttribute("mouse-down") ? this.son && (n = !0) : (n = !0),
                n)
            )
                return (
                    (Fx = s),
                    void (t.pointerType && "mouse" !== t.pointerType && this.mht.removeAttribute("mouse-over"))
                );
            this.Qhn || this.phn.dhn() || (t.preventDefault(), i && this.Pon()),
                this.mht.removeAttribute("mouse-down"),
                t.pointerType && "mouse" !== t.pointerType && this.mht.removeAttribute("mouse-over");
        }
        uon(t) {
            Fx || this.son || (this.mht.removeAttribute("mouse-down"), this.mht.removeAttribute("mouse-over"));
        }
        don(t) {
            Fx || this.son || this.mht.setAttribute("mouse-over", "");
        }
        fon(t) {
            this.phn.fhn(),
                (Fx = !!t.pointerType && "mouse" !== t.pointerType),
                (this.Qhn = !1),
                (Fx || t.button === Gx.sQ.z0) &&
                    -1 === this.ton &&
                    (this.ton = Fx ? setTimeout(this.Son, kx) : setTimeout(this.Son, Ox));
        }
        pon(t) {
            -1 !== this.ton && (t.preventDefault(), clearTimeout(this.ton), (this.ton = -1), this.Ton());
        }
        won(t) {
            this.mht.removeAttribute("mouse-down"), this.mht.removeAttribute("mouse-over");
        }
        gon(t) {
            Fx || this.mht.setAttribute("mouse-over", "");
        }
        yon(t) {
            -1 !== this.ton && (t.preventDefault(), clearTimeout(this.ton), (this.ton = -1), this.Ion());
        }
        n0(t) {
            this.fm();
        }
        aon(t) {
            this.n0(t);
        }
        mon(t) {
            this.n0(t);
        }
        bon(t) {
            this.n0(t);
        }
        fz(t) {
            t.preventDefault(), this.phn.dhn() || (t.button === Gx.sQ.s2t && ((this.Qhn = !0), this.Gon(t)));
        }
        Ton(t = !0, i = !0, e = !1, s = !0) {
            if (!this.Qhn && (!this.phn.dhn() || e)) {
                if (Gx.Xl(this.Mon) && Gx.Xl(this.Eon) && s) {
                    const t = this.mht.getBoundingClientRect();
                    if (!Gx.Rect.Lbt(t).i6(this.Mon, this.Eon)) return;
                }
                (this.eon = !0),
                    (this.Zhn = !this.Zhn),
                    t && this.Aon(),
                    this.Zhn
                        ? (this.mht.setAttribute("mouse-down", ""),
                          this.mht.removeAttribute("mouse-over"),
                          this.mht.removeEventListener("pointerup", this.C3t),
                          this.mht.removeEventListener("pointercancel", this.Qki),
                          this.mht.removeEventListener("mouseout", this.lon),
                          this.mht.removeEventListener("mouseover", this.con))
                        : (this.mht.removeAttribute("mouse-down"),
                          Fx || this.mht.setAttribute("mouse-over", ""),
                          i || this.mht.removeAttribute("mouse-over"),
                          this.mht.addEventListener("pointerup", this.C3t),
                          this.mht.addEventListener("pointercancel", this.Qki),
                          this.mht.addEventListener("mouseout", this.lon),
                          this.mht.addEventListener("mouseover", this.con)),
                    (this.eon = !1);
            }
        }
        Ion(t = !0, i = !1, e = !0) {
            if (!this.Qhn && (!this.phn.dhn() || i)) {
                if (Gx.Xl(this.Mon) && Gx.Xl(this.Eon) && e) {
                    const t = this.mht.getBoundingClientRect();
                    if (!Gx.Rect.Lbt(t).i6(this.Mon, this.Eon)) return;
                }
                (this.eon = !0),
                    this.Zhn ||
                        ((this.Zhn = !0),
                        t && this.Ron(),
                        this.mht.setAttribute("mouse-down", ""),
                        this.mht.removeAttribute("mouse-over"),
                        this.mht.removeEventListener("pointerup", this.C3t),
                        this.mht.removeEventListener("pointercancel", this.Qki),
                        this.mht.removeEventListener("mouseout", this.lon),
                        this.mht.removeEventListener("mouseover", this.con)),
                    (this.eon = !1);
            }
        }
        xon() {
            "check" === this.Osi ? this.Ton() : "radio" === this.Osi && this.Ion(), (this.ton = -1);
        }
        Pon() {
            let t = new Gx.Event("click");
            (t.xhn = this.phn.She()), (t.g0t = this.nes), this.phn.Zrn().dispatchEvent(t), this.ghn();
        }
        Aon() {
            let t = new Gx.Event("check");
            (t.xhn = this.phn.She()),
                (t.g0t = this.nes),
                (t.checked = this.Zhn),
                this.phn.Zrn().dispatchEvent(t),
                this.ghn(this.Zhn);
        }
        Ron() {
            let t = new Gx.Event("radio");
            (t.xhn = this.phn.She()),
                (t.g0t = this.nes),
                (t.checked = this.Zhn),
                this.phn.Zrn().dispatchEvent(t),
                this.ghn(this.Zhn);
        }
        Gon(t) {
            let i = new Gx.Event("buttoncontextmenu");
            (i.xhn = this.phn.She()),
                (i.g0t = this.nes),
                (i.clientX = t.clientX),
                (i.clientY = t.clientY),
                this.phn.Zrn().dispatchEvent(i);
        }
        FO() {
            return this.mht;
        }
    };
}
{
    const $x = self.t,
        zx = ["checked"];
    $x.ti.Tj.brn.nhn = class extends $x.ti.Tj.brn.Element {
        constructor(t, i, e, s, n) {
            $x.k$(e),
                super(t, i, s),
                (this.mht = $x.ti.gj("ui-toolbar-checkbox", this.phn.FO())),
                (this.kon = $x.ti.gj("div", null, null, "checkboxWrapper")),
                (this.vhn = $x.ti.gj("input", this.kon, null, null, { type: "checkbox" })),
                (this.Oon = (t) => this.Aon(this.vhn.checked)),
                this.vhn.addEventListener("change", this.Oon),
                (this.Don = (t) => {
                    this.Yti(), this.Oon();
                }),
                (this.Fon = (t) => {}),
                (this.eut = null),
                e &&
                    ((this.eut = $x.ti.gj("span", null)),
                    $x.hrt(this.eut, e),
                    this.eut.addEventListener("pointerup", this.Don),
                    this.eut.addEventListener("pointercancel", this.Fon)),
                (this.mht.style.height = `${this.phn.su()}px`),
                this.phn.LYt().wrap && this.mht.setAttribute("wrap", ""),
                n
                    ? (this.mht.appendChild(this.eut), this.mht.appendChild(this.kon))
                    : (this.mht.appendChild(this.kon), this.mht.appendChild(this.eut));
        }
        Ut() {
            this.vhn.removeEventListener("change", this.Oon),
                this.eut &&
                    (this.eut.removeEventListener("pointerup", this.Don),
                    this.eut.removeEventListener("pointercancel", this.Fon)),
                $x.ti.Tz(this.vhn),
                $x.ti.Tz(this.kon),
                $x.ti.Tz(this.eut),
                $x.ti.Tz(this.mht),
                (this.Oon = null),
                (this.phn = null),
                (this.mht = null),
                (this.kon = null),
                (this.vhn = null),
                (this.eut = null);
        }
        kk() {
            return this.vhn.checked;
        }
        GHt(t) {
            this.vhn.checked = !!t;
        }
        gl(t) {
            $x.Dpt(t), this.yhn(t, zx), t.hasOwnProperty("checked") && (this.vhn.checked = !!t.checked);
        }
        fm() {}
        Ern() {
            this.Aon();
        }
        Yti() {
            this.$K() && (this.vhn.checked = !this.vhn.checked);
        }
        Aon(t) {
            let i = new $x.Event("checkboxchecked");
            (i.xhn = this.phn.She()),
                (i.hUi = this.nes),
                (i.checked = this.vhn.checked),
                this.phn.Zrn().dispatchEvent(i),
                this.ghn(this.vhn.checked);
        }
    };
}
{
    const Vx = self.t,
        Wx = ["min", "max", "step", "value", "label"],
        Hx = "first",
        Kx = "change",
        qx = "focus",
        Xx = "blur",
        Yx = 10;
    Vx.ti.Tj.brn.rhn = class extends Vx.ti.Tj.brn.Element {
        constructor(t, i, e, s, n, r, h, o, a, l) {
            Vx.HI(e),
                Vx.HI(s),
                Vx.HI(n),
                Vx.HI(r),
                Vx.k$(h),
                Vx.k$(o),
                super(t, i, a),
                (this.Ehn = e),
                (this.Chn = s),
                (this.iPs = n || 1),
                (this.Fvs = r || 0),
                (this.Lon = null),
                (this.Bon = !0),
                (this.NXt = !1),
                (this.Uon = ""),
                (this.Non = !1),
                (this.jon = !1),
                (this.$on = !1),
                (this.zon = -1),
                (this.mht = Vx.ti.gj("ui-toolbar-spinner", this.phn.FO())),
                o && this.mht.setAttribute("title", o),
                (this.Von = {}),
                (this.Von.type = "number"),
                (this.Von.step = this.iPs.toString()),
                (this.Von.value = this.Fvs.toString()),
                Vx.Xl(e) && (this.Von.min = e.toString()),
                Vx.Xl(s) && (this.Von.max = s.toString()),
                (this.vhn = Vx.ti.gj("input", this.mht, null, null, this.Von)),
                (this.vhn.style.height = `${this.phn.su()}px`),
                (this.Won = null),
                (this.Hon = null),
                (this.Kon = null),
                (this.qon = h || i.charAt(0).toUpperCase() + i.slice(1)),
                (this.eut = document.createElement("span")),
                (this.eut.textContent = this.qon),
                l ? this.mht.appendChild(this.eut) : this.mht.insertBefore(this.eut, this.vhn),
                (this.Xon = (t) => this.Yon(t)),
                (this.QUi = (t) => this.tVi(t)),
                (this.mGi = (t) => this.Jon(t)),
                (this.gGi = (t) => this.Zon(t)),
                (this.JGi = (t) => this.ove(t)),
                this.vhn.addEventListener("focus", this.JGi),
                (this.HGi = (t) => this.F3t(t)),
                (this._a = Vx.m(
                    Vx.Ha,
                    Vx.Xa.Wa(this.vhn, "pointerdown", (t) => this.lz(t)),
                    Vx.Xa.Wa(this.vhn, "pointerup", (t) => this.CR(t)),
                    Vx.Xa.Wa(this.vhn, "pointercancel", (t) => this.n0(t)),
                    Vx.Xa.Wa(this.vhn, "change", this.Xon),
                    Vx.Xa.Wa(this.vhn, "input", this.QUi),
                    Vx.mCi(this.vhn)
                )),
                this.whn();
        }
        sii() {
            let t = 0;
            this.Won ? ((t = this.Won.value), (t = Vx.ti.Tj.brn.rhn.oee(t))) : (t = parseFloat(this.vhn.value)),
                Vx.Xl(t) || (t = 0);
            const i = parseFloat(this.vhn.min),
                e = parseFloat(this.vhn.max);
            return Vx.Xl(i) && t < i ? (t = i) : Vx.Xl(e) && t > e && (t = e), t;
        }
        Ut() {
            this.Qon(),
                this.vhn.removeEventListener("focus", this.JGi),
                (this.JGi = null),
                Vx.ti.Tz(this.vhn),
                Vx.ti.Tz(this.eut),
                this._a.Ua(),
                (this._a = null),
                (this.jon = null),
                this.Hon && this.Hon.Ua(),
                this.Kon && this.Kon.Ua(),
                (this.Hon = null),
                (this.Kon = null),
                (this.vhn = null),
                (this.eut = null),
                super.Ut();
        }
        iWi() {
            this.Kon && this.Kon.SHe();
        }
        gl(t) {
            if ((Vx.Dpt(t), this.yhn(t, Wx), t.hasOwnProperty("min") && Vx.Xl(t.min))) {
                let i = t.min;
                (this.Ehn = i),
                    (this.Von.min = i.toString()),
                    (this.vhn.min = i.toString()),
                    Number(this.vhn.value) < i &&
                        ((this.vhn.value = i.toString()), (this.Von.value = i.toString()), (this.Fvs = i)),
                    this.Won &&
                        ((this.Won.min = i.toString()), Number(this.Won.value) < i && (this.Won.value = i.toString()));
            }
            if (t.hasOwnProperty("max") && Vx.Xl(t.max)) {
                let i = t.max;
                (this.Chn = i),
                    (this.Von.max = i.toString()),
                    (this.vhn.max = i.toString()),
                    Number(this.vhn.value) > i &&
                        ((this.vhn.value = i.toString()), (this.Von.value = i.toString()), (this.Fvs = i)),
                    this.Won &&
                        ((this.Won.max = i.toString()), Number(this.Won.value) > i && (this.Won.value = i.toString()));
            }
            if (t.hasOwnProperty("step") && Vx.Xl(t.step)) {
                let i = t.step;
                (this.iPs = i),
                    (this.Von.step = i.toString()),
                    (this.vhn.step = i.toString()),
                    this.Won && (this.Won.step = i.toString());
            }
            if (t.hasOwnProperty("value") && Vx.Xl(t.value)) {
                let i = t.value;
                (this.Fvs = i),
                    (this.Von.value = i.toString()),
                    (this.vhn.value = i.toString()),
                    this.vhn.min &&
                        this.Fvs < Number(this.vhn.min) &&
                        ((this.vhn.value = this.vhn.min.toString()),
                        (this.Von.value = this.vhn.min.toString()),
                        (this.Fvs = Number(this.vhn.min)),
                        (i = Number(this.vhn.min))),
                    this.vhn.max &&
                        this.Fvs > Number(this.vhn.max) &&
                        ((this.vhn.value = this.vhn.max.toString()),
                        (this.Von.value = this.vhn.max.toString()),
                        (this.Fvs = Number(this.vhn.max)),
                        (i = Number(this.vhn.min))),
                    this.Won && this.ian(i.toString());
            }
            t.hasOwnProperty("label") && Vx.tet(t.label) && ((this.qon = t.label), (this.eut.textContent = this.qon));
        }
        fm() {}
        Ern() {
            this.ean("spinnerchange");
        }
        Yti() {
            this.$K();
        }
        san(t) {
            Vx.vu(t), this.qon !== t && ((this.qon = t), (this.eut.textContent = t));
        }
        nan() {
            return this.qon;
        }
        lz(t) {
            (this.zon = Number(this.vhn.value)), (this.Non = !0), this.phn.fhn(), (this.NXt = !0);
        }
        CR(t) {
            this.NXt &&
                (Vx.fk.l7i && t.preventDefault(),
                (this.NXt = !1),
                (this.Bon = !0),
                this.zon === Number(this.vhn.value)
                    ? (this.ove(), this.Won && this.Non && this.Won.ownerDocument.execCommand("selectAll", !1))
                    : this.vhn.addEventListener("blur", this.HGi));
        }
        n0(t) {
            (this.Bon = !0),
                (this.NXt = !1),
                (this.Uon = ""),
                (this.Non = !1),
                (this.jon = !1),
                (this.$on = !1),
                (this.zon = -1),
                this.vhn.addEventListener("focus", this.JGi),
                this.vhn.removeEventListener("blur", this.HGi),
                this.Qon();
        }
        ove(t) {
            if (this.NXt) return;
            if (this.Won) return;
            const i = this.vhn.getBoundingClientRect();
            (this.Uon = this.vhn.value),
                (this.vhn.style.display = "none"),
                (this.Von.value = this.vhn.value),
                (this.Von.min = this.vhn.min.toString()),
                (this.Von.max = this.vhn.max.toString()),
                (this.Von.step = this.vhn.step.toString());
            const e = Object.assign({}, this.Von, { type: "text" });
            (this.Won = Vx.ti.gj("input", this.mht, "spinnerEditInput", null, e, 1)),
                (this.Won.style.width = `${i.width}px`),
                (this.Won.style.height = `${i.height}px`),
                (this.Hon = Vx.mCi(this.Won)),
                (this.Kon = Vx.vHe(this.Won)),
                this.Won.addEventListener("change", this.Xon),
                this.Won.addEventListener("input", this.QUi),
                this.Won.addEventListener("blur", this.gGi),
                this.Won.addEventListener("focus", this.mGi),
                (this.$on = !0),
                this.Won.focus(),
                (this.$on = !1);
        }
        F3t(t) {
            this.NXt ||
                ((this.Bon = !0),
                this.vhn.removeEventListener("blur", this.HGi),
                this.zon !== Number(this.vhn.value) && this.ran(),
                this.Fg(this.vhn.value));
        }
        Yon(t) {
            if (this.jon) return;
            this.Won && this.Fg(this.sii());
            this.sii();
            const i = new Vx.Event("spinnerchange");
            (i.xhn = this.phn.She()),
                (i.tHt = this.nes.toLowerCase()),
                (i.iHt = this.sii()),
                this.phn.Zrn().dispatchEvent(i),
                (this.Non = !1);
        }
        tVi(t) {
            this.jon ||
                (this.Won && this.Fg(this.sii()),
                this.Bon ? ((this.Bon = !1), this.han()) : this.ean("spinnerinput"),
                (this.Non = !1));
        }
        Jon(t) {
            (this.$on = !1),
                this.Won && ((this.Won.value = this.Uon), this.Won.removeEventListener("focus", this.mGi), this.oan());
        }
        Zon(t) {
            if (this.$on) return;
            this.vhn.removeEventListener("focus", this.JGi);
            const i = this.sii();
            (this.vhn.style.display = ""),
                (this.vhn.value = i),
                this.Fg(i),
                this.Qon(),
                setTimeout(() => {
                    this.vhn &&
                        (this.vhn.blur(),
                        this.vhn.addEventListener("focus", this.JGi),
                        this.zon !== Number(this.vhn.value) && this.ran());
                }, Yx);
        }
        Qon() {
            this.Won &&
                ((this.Bon = !0),
                this.Hon.Ua(),
                (this.Hon = null),
                this.Kon.Ua(),
                (this.Kon = null),
                this.Won.removeEventListener("change", this.Xon),
                this.Won.removeEventListener("input", this.QUi),
                this.Won.removeEventListener("focus", this.mGi),
                this.Won.removeEventListener("blur", this.gGi),
                Vx.ti.Tz(this.Won),
                (this.Won = null));
        }
        Fg(t) {
            "" === t
                ? (this.vhn.value = "0")
                : this.Ehn && Number(t) < this.Ehn
                  ? (this.vhn.value = this.Ehn.toString())
                  : this.Chn && Number(t) > this.Chn
                    ? (this.vhn.value = this.Chn.toString())
                    : (this.vhn.value = t);
        }
        ian(t) {
            this.Won && ((this.jon = !0), (this.Won.value = t), (this.jon = !1));
        }
        han() {
            let t = new Vx.Event("firstspinnerinput"),
                i = this.sii();
            (t.xhn = this.phn.She()),
                (t.tHt = this.nes.toLowerCase()),
                (t.iHt = i),
                (this.Lon = i),
                this.phn.Zrn().dispatchEvent(t),
                this.ghn(this.sii(), Hx);
        }
        oan() {
            let t = new Vx.Event("focusspinnerinput"),
                i = this.sii();
            (t.xhn = this.phn.She()),
                (t.tHt = this.nes.toLowerCase()),
                (t.iHt = i),
                this.phn.Zrn().dispatchEvent(t),
                this.ghn(this.sii(), qx);
        }
        ran() {
            let t = new Vx.Event("blurspinnerinput"),
                i = this.sii();
            (t.xhn = this.phn.She()),
                (t.tHt = this.nes.toLowerCase()),
                (t.iHt = i),
                this.phn.Zrn().dispatchEvent(t),
                this.ghn(this.sii(), Xx);
        }
        ean(t) {
            Vx.vu(t);
            let i = this.sii();
            if (i === this.Lon) return;
            let e = new Vx.Event(t);
            (e.xhn = this.phn.She()),
                (e.tHt = this.nes.toLowerCase()),
                (e.iHt = i),
                (this.Lon = i),
                this.phn.Zrn().dispatchEvent(e),
                this.ghn(i, Kx);
        }
        static oee(t) {
            Vx.vu(t);
            try {
                const i = self.Nte.Ite(t);
                return "number" == typeof i && isFinite(i) ? i : 0;
            } catch (i) {
                if (t.trim().startsWith(".")) {
                    const i = parseFloat(t.trim());
                    if (isFinite(i)) return i;
                }
                return 0;
            }
        }
    };
}
{
    const Jx = self.t,
        Zx = ["value", "label"];
    Jx.ti.Tj.brn.hhn = class extends Jx.ti.Tj.brn.Element {
        constructor(t, i, e, s, n, r, h) {
            Jx.k$(s),
                Jx.k$(e),
                super(t, i, n),
                (this.Bon = !0),
                (this.mht = Jx.ti.gj("ui-toolbar-textbox", this.phn.FO())),
                (this.vhn = document.createElement("input")),
                (this.vhn.type = h?.type ?? "text"),
                (this.vhn.value = e),
                (this.vhn.style.height = `${this.phn.su()}px`),
                (this.vhn.placeholder = h?.OTt ?? ""),
                (this._a = Jx.m(
                    Jx.Ha,
                    Jx.Xa.Wa(this.vhn, "input", (t) => this.oCs(t)),
                    Jx.Xa.Wa(this.vhn, "change", (t) => this.oCs(t))
                )),
                this.mht.appendChild(this.vhn),
                (this.eut = null),
                s &&
                    ((this.eut = document.createElement("span")),
                    r ? this.mht.insertBefore(this.eut, this.vhn) : this.mht.appendChild(this.eut),
                    Jx.hrt(this.eut, s)),
                this.whn();
        }
        kk() {
            return this.vhn.value;
        }
        GHt(t) {
            Jx.vu(t), (this.vhn.value = t);
        }
        Ate() {
            return this.vhn;
        }
        Ut() {
            Jx.ti.Tz(this.vhn),
                Jx.ti.Tz(this.eut),
                this._a.Ua(),
                (this._a = null),
                (this.vhn = null),
                (this.eut = null),
                super.Ut();
        }
        gl(t) {
            Jx.Dpt(t),
                this.yhn(t, Zx),
                t.hasOwnProperty("value") && Jx.tet(t.value) && (this.vhn.value = t.value.toString()),
                t.hasOwnProperty("label") && Jx.tet(t.label) && (this.vhn.label = t.label);
        }
        fm() {}
        Ern() {
            this.oCs();
        }
        Yti() {
            this.$K();
        }
        oCs(t) {
            const i = t ? t.type : "input",
                e = new Jx.Event("input" === i ? "textinput" : "textchange");
            (e.xhn = this.phn.She()),
                (e.aan = this.nes.toLowerCase()),
                (e.lan = this.kk()),
                this.phn.Zrn().dispatchEvent(e),
                this.ghn(this.kk(), e.type);
        }
    };
}
{
    const Qx = self.t,
        tM = ["value", "label", "values", "subValues"],
        iM = { Wti: "default" };
    Qx.ti.Tj.brn.ohn = class extends Qx.ti.Tj.brn.Element {
        constructor(t, i, e, s, n, r, h, o = "ui-toolbar-dropdown") {
            Qx.k$(s),
                Qx._T(e),
                super(t, i, n),
                (r = Object.assign({}, iM, r)),
                (this.Bon = !0),
                (this.mht = Qx.ti.gj(o, this.phn.FO())),
                (this.vhn = document.createElement("select")),
                (this.vhn.style.height = `${this.phn.su()}px`),
                this.vhn.setAttribute("corners", r.Wti),
                this.mht.appendChild(this.vhn);
            for (let t of e)
                if (!Qx.GUt(t.XCt) || t.XCt())
                    if (Qx.vwt(t.vTt)) {
                        const i = document.createElement("optgroup");
                        i.setAttribute("value", t.value), (i.label = t.label);
                        for (const e of t.vTt) {
                            if (Qx.GUt(e.XCt) && !e.XCt()) continue;
                            const t = document.createElement("option");
                            (t.value = e.value),
                                (t.textContent = e.label),
                                e.selected && t.setAttribute("selected", ""),
                                e.disabled && t.setAttribute("disabled", ""),
                                i.appendChild(t);
                        }
                        this.vhn.appendChild(i);
                    } else {
                        let i = document.createElement("option");
                        this.vhn.appendChild(i),
                            (i.value = t.value),
                            (i.textContent = t.label),
                            t.selected && i.setAttribute("selected", ""),
                            t.disabled && i.setAttribute("disabled", "");
                    }
            (this.vhn.selectedIndex = 0),
                (this._a = Qx.m(
                    Qx.Ha,
                    Qx.Xa.Wa(this.vhn, "change", (t) => this.oCs(t))
                )),
                (this.eut = null),
                s &&
                    ((this.eut = document.createElement("span")),
                    h ? this.mht.insertBefore(this.eut, this.vhn) : this.mht.appendChild(this.eut),
                    Qx.hrt(this.eut, s)),
                this.whn();
        }
        kk() {
            return this.vhn.value;
        }
        dTt(t) {
            Qx.wi(t), (this.vhn.selectedIndex = t);
        }
        LQt(t) {
            Qx.vu(t), (this.vhn.value = t);
        }
        Ut() {
            Qx.ti.Tz(this.vhn),
                Qx.ti.Tz(this.eut),
                this._a.Ua(),
                (this._a = null),
                (this.vhn = null),
                (this.eut = null),
                super.Ut();
        }
        gl(t) {
            if ((Qx.Dpt(t), this.yhn(t, tM), t.hasOwnProperty("values") && Qx.vwt(t.values))) {
                for (; this.vhn.firstChild; ) this.vhn.removeChild(this.vhn.firstChild);
                let i = t.values;
                for (let t of i) {
                    if (Qx.GUt(t.XCt) && !t.XCt()) continue;
                    let i = document.createElement("option");
                    this.vhn.appendChild(i),
                        (i.value = t.value),
                        (i.textContent = t.label),
                        t.selected && i.setAttribute("selected", ""),
                        t.disabled && i.setAttribute("disabled", "");
                }
            }
            if (
                t.hasOwnProperty("subValues") &&
                Qx.Gat(t.subValues) &&
                Qx.tet(t.subValues.parent) &&
                Qx.vwt(t.subValues.children)
            ) {
                const i = t.subValues.parent,
                    e = Array.from(this.vhn.children),
                    s = e.filter((t) => "OPTGROUP" === t.tagName),
                    n = e.filter((t) => "OPTION" === t.tagName).find((t) => t.value === i),
                    r = s.find((t) => t.getAttribute("value") === i),
                    h = n ?? r;
                if (h)
                    if (t.subValues.children.length) {
                        const i = document.createElement("optgroup");
                        i.setAttribute("value", h?.value ?? h?.getAttribute("value")),
                            (i.label = h.label ?? h?.textContent);
                        for (const e of t.subValues.children) {
                            if (Qx.GUt(e.XCt) && !e.XCt()) continue;
                            const t = document.createElement("option");
                            (t.value = e.value),
                                (t.textContent = e.label),
                                e.selected && t.setAttribute("selected", ""),
                                e.disabled && t.setAttribute("disabled", ""),
                                i.appendChild(t);
                        }
                        this.vhn.replaceChild(i, h);
                    } else {
                        const t = document.createElement("option");
                        (t.value = h?.value ?? h?.getAttribute("value")),
                            (t.textContent = h.label ?? h?.textContent),
                            t.setAttribute("selected", ""),
                            this.vhn.replaceChild(t, h);
                    }
            }
            t.hasOwnProperty("value") && Qx.tet(t.value) && (this.vhn.value = t.value.toString()),
                t.hasOwnProperty("label") && Qx.tet(t.label) && (this.vhn.label = t.label);
        }
        fm() {}
        Ern() {
            this.oCs();
        }
        Yti() {
            this.$K();
        }
        oCs() {
            let t = new Qx.Event("optionselected");
            (t.xhn = this.phn.She()),
                (t.uan = this.nes.toLowerCase()),
                (t.can = this.kk()),
                this.phn.Zrn().dispatchEvent(t),
                this.ghn(this.kk());
        }
    };
}
{
    const eM = self.t,
        sM = { Fti: null, Lti: !0 };
    eM.ti.Tj.brn.ahn = class extends eM.ti.Tj.brn.ohn {
        constructor(t, i, e, s, n, r, h) {
            super(t, i, e, s, n, (r = Object.assign({}, sM, r)), h, "ui-toolbar-editable-dropdown"),
                (this.dan = r.Fti),
                (this.S3t = r),
                (this.fan = eM.ti.gj("div", this.mht, null, "wrapper")),
                this.fan.appendChild(this.vhn),
                (this._9e = eM.ti.gj("input", this.fan, null, "textInput", { type: "text" })),
                (this._9e.style.height = `${this.phn.su()}px`),
                r.Lti
                    ? this.vhn.setAttribute("pointer-edit", "")
                    : ((this._9e.tabIndex = "-1"), (this._9e.style.pointerEvents = "none")),
                (this.man = (t) => this.wan(t)),
                this._9e.addEventListener("blur", this.man),
                (this.gan = (t) => this.yan(t)),
                this._9e.addEventListener("focus", this.gan),
                (this.kut = (t) => this.Uj(t)),
                this._9e.addEventListener("keydown", this.kut),
                (this.ban = -1),
                requestAnimationFrame(() => this.vhn.blur(), 16);
        }
        Ut() {
            (this.dan = null),
                (this.S3t = null),
                this._9e.removeEventListener("change", this.man),
                (this.man = null),
                this._9e.removeEventListener("focus", this.gan),
                (this.gan = null),
                this._9e.removeEventListener("keydown", this.kut),
                (this.kut = null),
                eM.ti.Tz(this.fan),
                (this.fan = null),
                eM.ti.Tz(this._9e),
                (this._9e = null),
                super.Ut();
        }
        Yti() {
            this.$K() && ((this._9e.style.pointerEvents = ""), this._9e.focus());
        }
        wan(t) {
            const i = this.ban;
            -1 !== i &&
                (this.van(i),
                (this._9e.value = ""),
                (this.ban = -1),
                (this.vhn.selectedIndex = i),
                this.vhn.removeAttribute("hide-drop-down"),
                !1 === this.S3t.Lti && (this._9e.style.pointerEvents = "none"),
                this.San());
        }
        van(t) {
            const i = [];
            for (let e = 0; e < this.vhn.length; e++) {
                const s = this.vhn.options[e];
                t === e
                    ? i.push({ value: this._9e.value, label: this._9e.value })
                    : i.push({ value: s.value, label: s.text });
            }
            this.gl({ values: i });
        }
        yan(t) {
            (this._9e.value = this.kk()),
                (this.ban = this.vhn.selectedIndex),
                (this.vhn.selectedIndex = -1),
                this.vhn.setAttribute("hide-drop-down", "");
        }
        Uj(t) {
            this._9e.ownerDocument.activeElement === this._9e &&
                ((t.keyCode !== eM.fO.o3 && t.keyCode !== eM.fO.oO) || this._9e.blur());
        }
        San() {
            let t = new eM.Event("optionrenamed");
            (t.xhn = this.phn.She()),
                (t.uan = this.nes.toLowerCase()),
                (t.can = this.kk()),
                this.phn.Zrn().dispatchEvent(t),
                this.dan && this.dan(this.kk());
        }
    };
}
{
    const nM = self.t,
        rM = ["tooltip"],
        hM = ["primary", "secondary"],
        oM = new Set(["click", "check", "radio"]),
        aM = 1e3,
        lM = 5;
    let uM = !1;
    nM.ti.Tj.brn.thn = class extends nM.ti.Tj.brn.Element {
        constructor(t, i, e, s, n, r, h) {
            nM.Et(e, nM.ti.zrt),
                nM.k$(s),
                nM.k$(n),
                nM.kDt(h),
                super(t, i, r),
                (this.xan = h),
                (this.Qhn = !1),
                (this.M6t = "click"),
                (this.mht = nM.ti.gj("ui-toolbar-split-button", this.phn.FO())),
                (this.mht.style.height = `${this.phn.su()}px`),
                this.mht.setAttribute("type", "split"),
                (this.Man = nM.ti.gj("div", this.mht)),
                (this.Ean = nM.ti.gj("div", this.mht)),
                this.Man.setAttribute("primary", ""),
                this.Ean.setAttribute("secondary", ""),
                s && (this.Man.setAttribute("title", s), this.Man.setAttribute("aria-label", s)),
                n && (this.Ean.setAttribute("title", n), this.Ean.setAttribute("aria-label", n)),
                (this.Can = nM.m(nM.ti.met, e, this.Man)),
                (this._an = nM.ti.gj("div", this.Ean, null, "arrow")),
                this.mht.style.setProperty("--arrow-size", self.app.Ent() / 2 + "px"),
                this.mht.style.setProperty("--arrow-color", self.app.p8e()),
                (this._a = nM.m(
                    nM.Ha,
                    nM.Xa.Wa(this.Man, "pointerdown", (t) => this.lz(t)),
                    nM.Xa.Wa(this.Man, "pointerup", (t) => this.CR(t)),
                    nM.Xa.Wa(this.Man, "pointerup", (t) => this.Tan(t)),
                    nM.Xa.Wa(this.Man, "pointercancel", (t) => this.n0(t)),
                    nM.Xa.Wa(this.Man, "mouseout", (t) => this.Ian(t)),
                    nM.Xa.Wa(this.Man, "mouseover", (t) => this.Pan(t)),
                    nM.Xa.Wa(this.Man, "contextmenu", (t) => this.fz(t)),
                    nM.Xa.Wa(this.Ean, "pointerdown", (t) => this.lz(t)),
                    nM.Xa.Wa(this.Ean, "pointerup", (t) => this.CR(t)),
                    nM.Xa.Wa(this.Ean, "pointerup", (t) => this.Tan(t)),
                    nM.Xa.Wa(this.Ean, "pointercancel", (t) => this.n0(t)),
                    nM.Xa.Wa(this.Ean, "mouseout", (t) => this.Ian(t)),
                    nM.Xa.Wa(this.Ean, "mouseover", (t) => this.Pan(t)),
                    nM.Xa.Wa(this.Ean, "contextmenu", (t) => this.fz(t)),
                    nM.Xa.Wa(self.app, "settingschange", (t) => this.Gan(t))
                )),
                (this.Son = (t) => this.xon(t)),
                (this.eon = !1),
                (this.ton = -1),
                (this.Zhn = !1),
                (this.Aan = !1),
                (this.Ran = !1),
                (this.kan = !1),
                (this.Oan = !1),
                (this.Dan = !1),
                (this.Fan = !1),
                (this.Lan = !1),
                (this.Ban = !1),
                this.whn();
        }
        Ut() {
            clearTimeout(this.ton),
                (this.ton = -1),
                this._a.Ua(),
                (this._a = null),
                this.Can.Ut(),
                (this.Can = null),
                nM.ti.Tz(this._an),
                (this._an = null),
                nM.ti.Tz(this.Man),
                (this.Man = null),
                nM.ti.Tz(this.Ean),
                (this.Ean = null),
                super.Ut();
        }
        gl(t) {
            nM.Dpt(t),
                this.yhn(t, rM),
                nM.oN(t.tooltip),
                t.tooltip && this.yhn(t.tooltip, hM),
                t.hasOwnProperty("tooltip") &&
                    nM.q$t(t.tooltip) &&
                    this.ame(t.tooltip.primary ?? "", t.tooltip.secondary ?? "");
        }
        lht(t) {
            super.lht(t), t || this.fm();
        }
        ame(t, i) {
            nM.k$(t),
                nM.k$(i),
                t && (this.Man.setAttribute("title", t), this.Man.setAttribute("aria-label", t)),
                i && (this.Ean.setAttribute("title", i), this.Ean.setAttribute("aria-label", i));
        }
        zD(t) {
            this.Can.zD(t);
        }
        fm() {
            clearTimeout(this.ton),
                (this.ton = -1),
                this.Zhn && !this.eon && (this.Zhn = !1),
                (this.Aan = !1),
                (this.Ran = !1),
                (this.kan = !1),
                (this.Oan = !1),
                (this.Dan = !1),
                (this.Fan = !1),
                (this.Lan = !1),
                (this.Ban = !1),
                this.Man.removeAttribute("mouse-down"),
                this.Man.removeAttribute("mouse-over-light"),
                this.Man.removeAttribute("mouse-over"),
                this.Ean.removeAttribute("mouse-down"),
                this.Ean.removeAttribute("mouse-over-light"),
                this.Ean.removeAttribute("mouse-over");
        }
        O4t(t) {
            if ((nM.vu(t), !oM.has(t))) throw new Error(`invalid button mode "${t}"`);
            this.M6t = t;
        }
        Ern() {}
        Yti(t = !0) {
            this.$K() &&
                this.Uan(
                    (t) => this.Nan(t),
                    (t) => this.jan(t),
                    (t) => this.$an(t),
                    t
                );
        }
        Nan(t) {
            this.Man.setAttribute("mouse-down", ""),
                this.Man.removeAttribute("mouse-down-light"),
                this.Ean.removeAttribute("mouse-down", ""),
                this.Ean.removeAttribute("mouse-down-light"),
                this.zan();
        }
        jan(t) {
            this.Ton(t, !0, !0);
        }
        $an(t) {
            this.Ion(t, !0, !0);
        }
        Jti() {
            this.mht.setAttribute("type", "single"),
                (this.mht.style.width = `${this.phn.su()}px`),
                (this.mht.style.padding = ""),
                this.Ean.setAttribute("hide", "");
        }
        jti() {
            this.mht.setAttribute("type", "split"),
                (this.mht.style.width = ""),
                (this.mht.style.padding = ""),
                this.Ean.removeAttribute("hide");
        }
        Van() {
            this.mht.setAttribute("type", "wide"),
                (this.mht.style.width = ""),
                (this.mht.style.padding = `0 ${self.app.Ent() / 4 + 1}px`),
                this.Ean.setAttribute("hide", "");
        }
        lz(t) {
            this.phn.fhn(),
                (uM = "mouse" !== t.pointerType),
                (uM || t.button === nM.sQ.z0) &&
                    ((this.Qhn = !1),
                    this.Uan(
                        (t) => this.Wan(t),
                        (t) => this.Han(t),
                        (t) => this.Han(t),
                        t
                    ));
        }
        Wan(t) {
            this.mht.setAttribute("mouse-down", ""),
                t.target === this.Man &&
                    (this.Aan || this.Man.setAttribute("mouse-down", ""),
                    this.Ran || this.Ean.removeAttribute("mouse-down")),
                t.target === this.Ean &&
                    (this.Aan || this.Man.removeAttribute("mouse-down"),
                    this.Ran || this.Ean.setAttribute("mouse-down", ""));
        }
        Han(t) {
            if (-1 === this.ton)
                if (t.target === this.Man) this.ton = uM ? setTimeout(this.Son, aM) : setTimeout(this.Son, lM);
                else if (t.target === this.Ean) {
                    const i = this.Aan;
                    (this.Aan = !0), this.Wan(t), i || (this.Aan = !1);
                }
        }
        xon() {
            "check" === this.M6t
                ? (this.Ton(), (this.ton = -1))
                : "radio" === this.M6t && (this.Ion(), (this.ton = -1));
        }
        Ton(t = !0, i = !0, e = !1) {
            this.Qhn ||
                (this.phn.dhn() && !e) ||
                ((this.eon = !0),
                (this.Zhn = !this.Zhn),
                t && this.Kan(),
                this.Zhn
                    ? (this.mht.setAttribute("mouse-down", ""),
                      this.Man.setAttribute("mouse-down", ""),
                      this.Man.removeAttribute("mouse-over"),
                      this.Man.removeAttribute("mouse-over-light"),
                      this.Ean.setAttribute("mouse-over-light", ""),
                      this.Ean.removeAttribute("mouse-over"),
                      (this.kan = !0),
                      (this.Oan = !1),
                      (this.Dan = !0),
                      (this.Fan = !1),
                      (this.Lan = !0),
                      (this.Ban = !1))
                    : (this.mht.removeAttribute("mouse-down"),
                      this.Man.removeAttribute("mouse-down"),
                      uM ||
                          (this.mht.setAttribute("mouse-over", ""),
                          this.Man.setAttribute("mouse-over", ""),
                          this.Man.setAttribute("mouse-over-light", "")),
                      i ||
                          (this.mht.removeAttribute("mouse-over"),
                          this.Man.removeAttribute("mouse-over"),
                          this.Man.removeAttribute("mouse-over-light")),
                      this.Ean.setAttribute("mouse-over-light", ""),
                      this.Ean.removeAttribute("mouse-over"),
                      (this.kan = !1),
                      (this.Oan = !1),
                      (this.Dan = !1),
                      (this.Fan = !1),
                      (this.Lan = !1),
                      (this.Ban = !1)),
                (this.eon = !1));
        }
        Ion(t = !0, i = !1) {
            this.Qhn ||
                (this.phn.dhn() && !i) ||
                ((this.eon = !0),
                this.Zhn ||
                    ((this.Zhn = !0),
                    t && this.qan(),
                    this.mht.setAttribute("mouse-down", ""),
                    this.Man.setAttribute("mouse-down", ""),
                    this.Man.removeAttribute("mouse-over"),
                    this.Man.removeAttribute("mouse-over-light"),
                    this.Ean.setAttribute("mouse-over-light", ""),
                    this.Ean.removeAttribute("mouse-over"),
                    (this.kan = !0),
                    (this.Oan = !1),
                    (this.Dan = !0),
                    (this.Fan = !1),
                    (this.Lan = !0),
                    (this.Ban = !1)),
                (this.eon = !1));
        }
        CR(t) {
            t.preventDefault(),
                this.Uan(
                    (t) => this.Xan(t),
                    (t) => this.Yan(t),
                    (t) => this.Jan(t),
                    t
                );
        }
        Xan(t) {
            (uM || t.button === nM.sQ.z0) &&
                this.mht.hasAttribute("mouse-down") &&
                (this.Qhn ||
                    this.phn.dhn() ||
                    (t.target === this.Man && "click" === this.M6t && this.zan(t),
                    t.target === this.Ean && this.Zan(t)),
                this.kan || this.Oan || this.mht.removeAttribute("mouse-down"),
                this.kan || (this.Man.removeAttribute("mouse-down"), this.Man.removeAttribute("mouse-down-light")),
                this.Oan || (this.Ean.removeAttribute("mouse-down"), this.Ean.removeAttribute("mouse-down-light")));
        }
        Yan(t) {
            const i = this.kan;
            (this.kan = !0), this.Xan(t), i || (this.kan = !1);
        }
        Jan(t) {
            const i = this.kan;
            (this.kan = !0), this.Xan(t), i || (this.kan = !1);
        }
        Tan(t) {
            t.preventDefault(),
                this.Uan(
                    (t) => this.Qan(t),
                    (t) => this.tln(t),
                    (t) => this.iln(t),
                    t
                );
        }
        Qan(t) {}
        tln(t) {
            -1 !== this.ton && (clearTimeout(this.ton), (this.ton = -1), this.Ton());
        }
        iln(t) {
            -1 !== this.ton && (clearTimeout(this.ton), (this.ton = -1), this.Ion());
        }
        n0(t) {
            this.mht.removeAttribute("mouse-down"), this.mht.removeAttribute("mouse-over"), this.fm();
        }
        Ian(t) {
            uM ||
                (this.Dan ||
                    this.Fan ||
                    (this.mht.removeAttribute("mouse-down"), this.mht.removeAttribute("mouse-over")),
                this.Dan || (this.Man.removeAttribute("mouse-down"), this.Man.removeAttribute("mouse-over")),
                this.Fan ||
                    (this.Zhn && this.Ean.setAttribute("mouse-over-light", ""),
                    this.Ean.removeAttribute("mouse-down"),
                    this.Ean.removeAttribute("mouse-over")));
        }
        Pan(t) {
            uM ||
                (this.mht.setAttribute("mouse-over", ""),
                t.target === this.Man &&
                    (this.Lan ||
                        (this.Man.setAttribute("mouse-over", ""), this.Man.removeAttribute("mouse-over-light", "")),
                    this.Ban ||
                        (this.Ean.setAttribute("mouse-over-light", ""), this.Ean.removeAttribute("mouse-over"))),
                t.target !== this.Ean ||
                    this.Ban ||
                    (this.Lan ||
                        (this.Man.setAttribute("mouse-over-light", ""), this.Man.removeAttribute("mouse-over")),
                    this.Ban ||
                        (this.Ean.setAttribute("mouse-over", ""), this.Ean.removeAttribute("mouse-over-light"))));
        }
        Uan(t, i, e, s) {
            switch (this.M6t) {
                case "click":
                    return t(s);
                case "check":
                    return i(s);
                case "radio":
                    return e(s);
            }
        }
        fz(t) {
            t.preventDefault(), this.phn.dhn() || (t.button === nM.sQ.s2t && ((this.Qhn = !0), this.Gon(t)));
        }
        Gan(t) {
            this.mht.style.setProperty("--arrow-color", self.app.p8e());
        }
        zan(t) {
            let i = new nM.Event("primaryclick");
            (i.xhn = this.phn.She()),
                (i.g0t = this.nes),
                (i.clientX = t ? t.clientX : 0),
                (i.clientY = t ? t.clientY : 0),
                this.phn.Zrn().dispatchEvent(i),
                this.ghn();
        }
        Kan(t) {
            let i = new nM.Event("primarycheck");
            (i.xhn = this.phn.She()),
                (i.g0t = this.nes),
                (i.clientX = t ? t.clientX : 0),
                (i.clientY = t ? t.clientY : 0),
                (i.checked = this.Zhn),
                this.phn.Zrn().dispatchEvent(i),
                this.ghn();
        }
        qan(t) {
            let i = new nM.Event("primaryradio");
            (i.xhn = this.phn.She()),
                (i.g0t = this.nes),
                (i.clientX = t ? t.clientX : 0),
                (i.clientY = t ? t.clientY : 0),
                (i.checked = this.Zhn),
                this.phn.Zrn().dispatchEvent(i),
                this.ghn();
        }
        Zan(t) {
            let i = new nM.Event("secondaryclick");
            (i.xhn = this.phn.She()),
                (i.g0t = this.nes),
                (i.clientX = t.clientX),
                (i.clientY = t.clientY),
                this.phn.Zrn().dispatchEvent(i),
                this.xan && this.xan();
        }
        Gon(t) {
            let i = new nM.Event("splitbuttoncontextmenu");
            (i.xhn = this.phn.She()),
                (i.g0t = this.nes),
                (i.clientX = t.clientX),
                (i.clientY = t.clientY),
                this.phn.Zrn().dispatchEvent(i);
        }
        eln() {
            return this.Man;
        }
    };
}
{
    const cM = self.t,
        dM = ["checked", "tooltip"];
    cM.ti.Tj.brn.Qrn = class extends cM.ti.Tj.brn.Ys {
        constructor(t, i, e, s, n, r, h, o) {
            cM.Et(e, cM.ti.zrt),
                cM.Et(s, cM.ti.zrt),
                cM.k$(n),
                cM.vu(r),
                super(t, i, e, n, r, h, o),
                (this.sln = cM.m(cM.ti.met, s, this.mht)),
                this.sln.FO().setAttribute("hide", "");
        }
        Ut() {
            this.sln.Ut(), (this.sln = null), super.Ut();
        }
        fm() {
            super.fm(), this.iut.FO().removeAttribute("hide"), this.sln.FO().setAttribute("hide", "");
        }
        gl(t) {
            cM.Dpt(t),
                this.yhn(t, dM),
                t.hasOwnProperty("checked") && this.chn(t.checked ? "check" : "uncheck"),
                t.hasOwnProperty("tooltip") &&
                    cM.tet(t.tooltip) &&
                    (this.mht.setAttribute("title", t.tooltip), this.mht.setAttribute("aria-label", t.tooltip)),
                this.nln();
        }
        Ton(t = !0, i = !0, e = !1, s = !0) {
            super.Ton(t, i, e, s), this.nln();
        }
        Ion(t = !0, i = !1, e = !0) {
            super.Ion(t, i, e), this.nln();
        }
        nln() {
            this.Zhn
                ? (this.iut.FO().setAttribute("hide", ""), this.sln.FO().removeAttribute("hide"))
                : (this.iut.FO().removeAttribute("hide"), this.sln.FO().setAttribute("hide", ""));
        }
    };
}
{
    const fM = self.t,
        pM = 100,
        mM = 200,
        wM = 50;
    fM.ti.Tj.rln = class extends fM.Event.aG {
        constructor() {
            super(), (this.mht = null), (this.hln = []), (this.oln = -1), (this.aln = () => this.lln());
        }
        Ut() {
            fM.ti.Tz(this.mht), (this.mht = null);
            for (let t of this.hln) t.Ut();
            fM.yh(this.hln),
                this.oln > -1 && (window.clearTimeout(this.oln), (this.oln = -1)),
                (this.aln = null),
                super.Ut();
        }
        uln(t) {
            if (this.hln.length >= pM) throw new Error("too much content added to status indicator");
            if (this.hln.includes(t)) throw new Error("already added");
            this.hln.push(t), this.cln();
        }
        dln(t) {
            let i = this.hln.indexOf(t);
            if (i < 0) throw new Error("content not added to status indicator");
            this.hln.splice(i, 1), this.cln();
        }
        cln() {
            this.oln > -1 || (this.oln = window.setTimeout(this.aln, this.mht ? wM : mM));
        }
        lln() {
            if (((this.oln = -1), this.hln.length)) {
                this.B8e(!0);
                let t = "";
                for (let i = 0; i < this.hln.length; ++i) i >= 1 && (t += "<br/>"), (t += this.hln[i].fln());
                fM.hrt(this.mht, new fM.qke(t));
            } else this.B8e(!1);
        }
        B8e(t) {
            (t = !!t),
                !!this.mht !== t &&
                    (t
                        ? ((this.mht = fM.ti.gj("ui-statusIndicator", document.body)),
                          this.mht.setAttribute("role", "status"))
                        : (fM.ti.Tz(this.mht), (this.mht = null)));
        }
    };
}
{
    const gM = self.t;
    gM.ti.Tj.pln = class {
        constructor(t, i) {
            gM.Et(t, gM.ti.Tj.rln), gM.vu(i), (this.mln = t), (this.wln = i), (this.f6e = 0);
        }
        Ut() {
            this.f6e > 0 && (this.mln.dln(this), (this.f6e = 0)), (this.mln = null);
        }
        BD() {
            0 === this.f6e && this.mln.uln(this), this.f6e++, this.mln.cln();
        }
        zb() {
            if (this.f6e <= 0) throw new Error("removed too many times");
            this.f6e--, 0 === this.f6e ? this.mln.dln(this) : this.mln.cln();
        }
        fln() {
            return gM.JBe(this.wln, this.f6e);
        }
    };
}
{
    const yM = self.t;
    yM.ti.Tj.gln = class {
        constructor(t, i) {
            yM.Et(t, yM.ti.Tj.rln), yM.vu(i), (this.mln = t), (this.wln = i), (this.yln = 0), (this.Zu = !1);
        }
        Ut() {
            this.Zu && (this.mln.dln(this), (this.Zu = !1)), (this.mln = null);
        }
        bln(t) {
            yM.wi(t),
                (t = yM.ft(t, 0, 1)),
                this.Zu || (this.mln.uln(this), (this.Zu = !0)),
                this.yln !== t && ((this.yln = t), this.mln.cln());
        }
        PL() {
            this.Zu && (this.mln.dln(this), (this.Zu = !1), (this.yln = 0));
        }
        fln() {
            return yM.JBe(this.wln, Math.round(1e3 * this.yln) / 10);
        }
    };
}
{
    const bM = self.t;
    bM.ti.Tj.vln = class {
        constructor(t, i) {
            bM.Et(t, bM.ti.Tj.rln), bM.vu(i), (this.mln = t), (this.ux = i), (this.Zu = !1);
        }
        Ut() {
            this.Zu && (this.mln.dln(this), (this.Zu = !1)), (this.mln = null);
        }
        eD() {
            !this.Zu && this.mln && (this.mln.uln(this), (this.Zu = !0));
        }
        In(t) {
            bM.vu(t), this.mln && (this.eD(), this.ux !== t && ((this.ux = t), this.mln.cln()));
        }
        fln() {
            return this.ux;
        }
    };
}
{
    const vM = self.t,
        SM = [{ opacity: "1" }, { opacity: "0" }],
        xM = [
            { transform: "scale(0.85)", opacity: "0" },
            { transform: "scale(1)", opacity: "1" },
        ],
        MM = { duration: 100, easing: "ease-out" },
        EM = { bjt: 1e4, maxWidth: "300px", align: "center", anchor: "auto", clientX: null, clientY: null },
        CM = 5,
        _M = new Set([
            "top-left",
            "top",
            "top-right",
            "left",
            "center",
            "right",
            "bottom-left",
            "bottom",
            "bottom-right",
        ]),
        TM = new Set(["auto", "top", "bottom"]);
    let IM = null;
    const PM = {};
    vM.ti.Tj.UK = class extends vM.MV {
        constructor(t, i, e, s, n, r) {
            if ((vM.rOe(t, HTMLElement, Range), vM.$rt(e), vM.$rt(s), vM.Crt(n), super(), r !== PM))
                throw new Error(
                    "Balloon tip can not be created directly. Use C3.UI.Controls.BalloonTip.ShowAt instead."
                );
            "string" == typeof i && (i = self.app.krt(i)),
                vM.qm(i, vM.ti.zrt),
                (this.Hci = t),
                (this.Sln = e),
                (this.xln = s),
                (this.di = !1),
                (n = Object.assign({}, EM, n)),
                vM.vu(n.maxWidth),
                vM.wi(n.bjt),
                vM.vu(n.align),
                vM.HI(n.clientX),
                vM.HI(n.clientY);
            let h = n.clientX,
                o = n.clientY,
                a = Number.isFinite(h) && Number.isFinite(o);
            if (!_M.has(n.align)) throw new Error("invalid alignment");
            if (!TM.has(n.anchor)) throw new Error("invalid alignment");
            IM && IM.Mln(),
                (IM = this),
                (this.DGs = n.maxWidth),
                (this.Eln = n.bjt),
                (this.jMi = n.align),
                (this.Cln = n.anchor),
                (this.mht = null),
                (this._ln = -1),
                (this.Qq = (t) => this.lz()),
                (this.Tln = !1);
            let l = this.Hci;
            l instanceof Range && (l = this.Hci.commonAncestorContainer);
            let u = null,
                c = vM.qfi(l, "dialog"),
                d = 0,
                f = 0;
            if (vM.ti.ZSe.xz()) u = vM.ti.ZSe.QSe();
            else if (c) {
                const t = vM.ti.Ze.UZe(c);
                t.lBi() || ((d = t.Hgi()), (f = t.Jgi())), (u = c);
            } else u = l.ownerDocument.body;
            (this.mht = vM.ti.gj("ui-balloontip", u)),
                (this.Iln = vM.ti.gj("ui-balloontip-icon", this.mht)),
                (this.Pln = vM.ti.gj("ui-balloontip-text", this.mht)),
                (this.fCt = vM.m(vM.ti.met, i || self.app.bet())),
                this.Iln.appendChild(this.fCt.FO()),
                (this.fEt = vM.ti.gj("ui-balloontip-title", this.Pln)),
                (this.bj = vM.ti.gj("ui-balloontip-body", this.Pln)),
                vM.hrt(this.fEt, this.Sln),
                vM.hrt(this.bj, this.xln),
                (this.fEt.style.maxWidth = this.DGs),
                (this.bj.style.maxWidth = this.DGs);
            let p = this.Iln.getBoundingClientRect(),
                m = this.Pln.getBoundingClientRect();
            this.mht.style.width = `${p.width + m.width}px`;
            let w = this.Hci.getBoundingClientRect(),
                g = 0,
                y = 0;
            switch (this.jMi) {
                case "top-left":
                    (g = 0), (y = 0);
                    break;
                case "top":
                    (g = w.width / 2), (y = 0);
                    break;
                case "top-right":
                    (g = w.width), (y = 0);
                    break;
                case "left":
                    (g = 0), (y = w.height / 2);
                    break;
                case "center":
                    (g = w.width / 2), (y = w.height / 2);
                    break;
                case "right":
                    (g = w.width), (y = w.height / 2);
                    break;
                case "bottom-left":
                    (g = 0), (y = w.height);
                    break;
                case "bottom":
                    (g = w.width / 2), (y = w.height);
                    break;
                case "bottom-right":
                    (g = w.width), (y = w.height);
                    break;
                default:
                    throw new Error("invalid alignment");
            }
            let b = w.left + g,
                v = w.top + y;
            a && ((b = h - d), (v = o - f));
            let S = this.mht.ownerDocument.defaultView.getComputedStyle(this.mht);
            const x = parseInt(S.getPropertyValue("--balloontip-padding"));
            let M = x,
                E = x,
                C = b - 2 * M - d,
                _ = v + E - f,
                T = this.mht.ownerDocument.defaultView.getComputedStyle(this.mht),
                I = parseInt(T.width),
                P = parseInt(T.height),
                G = I + 4 * M,
                A = P + 4 * E;
            (this.Act = vM.ti.Tj.UK.Gln()),
                this.Act.setAttributeNS(null, "width", G),
                this.Act.setAttributeNS(null, "height", A),
                this.mht.style.setProperty("--balloontip-left", -M + "px"),
                this.mht.style.setProperty("--balloontip-top", -E + "px"),
                (this.BVi = this.Act.querySelector(".balloontipPath")),
                this.mht.insertBefore(this.Act, this.Iln);
            let R = null;
            if (this.Aln(C + 2 * M, I - M, d))
                switch (this.Cln) {
                    case "auto":
                    case "top":
                        this.Rln(_ + E, P, f)
                            ? ((this.mht.style.top = `${_}px`),
                              (this.mht.style.left = `${C}px`),
                              (this.mht.style.transformOrigin = b - C - d + "px 0%"),
                              (R = this.kln))
                            : ((this.mht.style.top = _ - P - 4 * E + "px"),
                              (this.mht.style.left = `${C}px`),
                              (this.mht.style.transformOrigin = b - C - d + "px 100%"),
                              (R = this.Oln));
                        break;
                    case "bottom":
                        this.Dln(_ + E, P, f)
                            ? ((this.mht.style.top = _ - P - 4 * E + "px"),
                              (this.mht.style.left = `${C}px`),
                              (this.mht.style.transformOrigin = b - C - d + "px 100%"),
                              (R = this.Oln))
                            : ((this.mht.style.top = `${_}px`),
                              (this.mht.style.left = `${C}px`),
                              (this.mht.style.transformOrigin = b - C - d + "px 0%"),
                              (R = this.kln));
                }
            else
                switch (this.Cln) {
                    case "auto":
                    case "top":
                        if (this.Rln(_ + E, P, f)) {
                            let t = C - I + 2 * M;
                            (this.mht.style.top = `${_}px`),
                                (this.mht.style.left = `${t}px`),
                                (this.mht.style.transformOrigin = b - t - d + "px 0%"),
                                (R = this.Fln);
                        } else {
                            let t = C - I + 2 * M;
                            (this.mht.style.top = _ - P - 4 * E + "px"),
                                (this.mht.style.left = `${t}px`),
                                (this.mht.style.transformOrigin = b - t - d + "px 100%"),
                                (R = this.Lln);
                        }
                        break;
                    case "bottom":
                        if (this.Dln(_ + E, P, f)) {
                            let t = C - I + 2 * M;
                            (this.mht.style.top = _ - P - 4 * E + "px"),
                                (this.mht.style.left = `${t}px`),
                                (this.mht.style.transformOrigin = b - t - d + "px 100%"),
                                (R = this.Lln);
                        } else {
                            let t = C - I + 2 * M;
                            (this.mht.style.top = `${_}px`),
                                (this.mht.style.left = `${t}px`),
                                (this.mht.style.transformOrigin = b - t - d + "px 0%"),
                                (R = this.Fln);
                        }
                }
            this.BVi.setAttributeNS(null, "d", R(M, E, G - M, A - E, M, E)), this.v5e(xM, MM, "show");
        }
        rHi() {
            let t = this.Hci;
            return t instanceof Range && (t = this.Hci.commonAncestorContainer), t.ownerDocument;
        }
        Bln() {
            return this.rHi().defaultView;
        }
        v5e(t, i, e) {
            let s;
            "show" === e && (s = this.Uln),
                "hide" === e && (s = this.Nln),
                self.app.Cbt()
                    ? ((this.ZJe = this.mht.animate(t, i)), (this.ZJe.onfinish = (t) => s.call(this)))
                    : s.call(this);
        }
        Uln() {
            vM.gi(this) ||
                this.di ||
                ((this._ln = setTimeout(() => this.Mln(), this.Eln)),
                this.rHi().addEventListener("pointerdown", this.Qq));
        }
        Nln() {
            this.CPt();
        }
        lz() {
            this.Mln();
        }
        Mln() {
            this.di || this.Tln || (IM === this && (IM = null), (this.Tln = !0), this.v5e(SM, MM, "hide"));
        }
        CPt() {
            vM.gi(this) ||
                this.di ||
                ((this.di = !0),
                IM === this && (IM = null),
                -1 !== this._ln && (clearTimeout(this._ln), (this._ln = -1)),
                this.rHi().removeEventListener("pointerdown", this.Qq),
                (this.Qq = null),
                this.fCt && this.fCt.Ut(),
                vM.ti.Tz(this.fEt),
                vM.ti.Tz(this.fEt),
                vM.ti.Tz(this.fEt),
                vM.ti.Tz(this.Act),
                vM.ti.Tz(this.Iln),
                vM.ti.Tz(this.Pln),
                vM.ti.Tz(this.mht),
                (this.Iln = null),
                (this.Pln = null),
                (this.fCt = null),
                (this.Act = null),
                (this.fEt = null),
                (this.bj = null),
                (this.Hci = null),
                (this.mht = null),
                vM.Ut(this));
        }
        kln(t, i, e, s, n, r) {
            return `M ${t + CM} ${i}\n\t\t\t\tL ${t + n} ${i}\n\t\t\t\tL ${t + 2 * n} ${i - r}\n\t\t\t\tL ${t + 2 * n} ${i}\n\t\t\t\tL ${e - CM} ${i}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${e} ${i + CM}\n\t\t\t\tL ${e} ${s - CM}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${e - CM} ${s}\n\t\t\t\tL ${t + CM} ${s}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${t} ${s - CM}\n\t\t\t\tL ${t} ${i + CM}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${t + CM} ${i}\n\t\t\t\tZ`;
        }
        Fln(t, i, e, s, n, r) {
            return `M ${e / 2} ${i}\n\t\t\t\tL ${t + e - 4 * n} ${i}\n\t\t\t\tL ${t + e - 4 * n + n} ${i - r}\n\t\t\t\tL ${t + e - 4 * n + n} ${i}\n\t\t\t\tL ${e - CM} ${i}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${e} ${i + CM}\n\t\t\t\tL ${e} ${s - CM}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${e - CM} ${s}\n\t\t\t\tL ${t + CM} ${s}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${t} ${s - CM}\n\t\t\t\tL ${t} ${i + CM}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${t + CM} ${i}\n\t\t\t\tZ`;
        }
        Oln(t, i, e, s, n, r) {
            return `M ${t + CM} ${i}\n\t\t\t\tL ${e - CM} ${i}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${e} ${i + CM}\n\t\t\t\tL ${e} ${s - CM}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${e - CM} ${s}\n\t\t\t\tL ${t + 2 * n} ${s}\n\t\t\t\tL ${t + 2 * n} ${s + r}\n\t\t\t\tL ${t + n} ${s}\n\t\t\t\tL ${t + CM} ${s}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${t} ${s - CM}\n\t\t\t\tL ${t} ${i + CM}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${t + CM} ${i}\n\t\t\t\tZ`;
        }
        Lln(t, i, e, s, n, r) {
            return `M ${t + CM} ${i}\n\t\t\t\tL ${e - CM} ${i}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${e} ${i + CM}\n\t\t\t\tL ${e} ${s - CM}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${e - CM} ${s}\n\t\t\t\tL ${t + e - 4 * n + n} ${s}\n\t\t\t\tL ${t + e - 4 * n + n} ${s + r}\n\t\t\t\tL ${t + e - 4 * n} ${s}\n\t\t\t\tL ${t + CM} ${s}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${t} ${s - CM}\n\t\t\t\tL ${t} ${i + CM}\n\t\t\t\tA ${CM} ${CM} 0 0 1 ${t + CM} ${i}\n\t\t\t\tZ`;
        }
        Aln(t, i, e) {
            return t + i + e < this.Bln().innerWidth;
        }
        jln(t, i, e) {
            return t - e > 0;
        }
        Dln(t, i, e) {
            return t - e > 0;
        }
        Rln(t, i, e) {
            return t + i + e < this.Bln().innerHeight;
        }
        $ln(t) {
            return vM.Et(t, vM.ti.Ze), vM.sU(this.mht, t.FO());
        }
        static XO(t, i, e, s, n) {
            let r = t;
            if ((r instanceof Range && (r = t.commonAncestorContainer), r.ownerDocument.defaultView))
                return vM.m(vM.ti.Tj.UK, t, i, e, s, n, PM);
        }
        static EQ() {
            return !!IM;
        }
        static xwi() {
            IM && IM.Mln();
        }
        static zln(t) {
            vM.Et(t, vM.ti.Ze), IM && IM.$ln(t) && IM.Mln();
        }
        static aQe() {
            IM && IM.CPt();
        }
        static lQe(t) {
            vM.Et(t, vM.ti.Ze), IM && IM.$ln(t) && IM.CPt();
        }
        static Gln() {
            return new DOMParser()
                .parseFromString(
                    '<svg id="balloontip-svg" xmlns="http://www.w3.org/2000/svg">\n\t\t    <path class="balloontipPath"></path>\n\t\t</svg>',
                    "image/svg+xml"
                )
                .getElementById("balloontip-svg");
        }
    };
}
{
    const GM = self.t,
        AM = self.assert,
        RM = { Hj: !1, Dj: !1, border: !1, VIi: !0, overflow: "auto", gnt: !0, mnt: !0, vnt: () => 1 },
        kM = 400,
        OM = ["auto", "scroll", "hidden"];
    GM.ti.Tj.Table = class extends GM.Event.aG {
        constructor(t, i) {
            super(),
                GM.Gct(t),
                GM.Crt(i),
                (i = Object.assign({}, RM, i)),
                (this.GMt = t),
                (this.Bin = !!i.Hj),
                (this.$Se = !!i.Dj),
                (this.Vln = !!i.VIi),
                (this.Wln = i.overflow),
                (this.$Je = !!i.gnt),
                (this.Hln = i.vnt),
                AM(OM.includes(this.Wln), `unexpected 'overflow' value, valid values are '${OM}'`),
                (this.Dqs = GM.ti.gj("ui-table", this.GMt)),
                i.border && this.Dqs.setAttribute("own-border", ""),
                (this.Kln = null),
                (this.Dci = []),
                (this.qln = new Set()),
                (this.MG = null),
                (this.Xln = (t) => this.DG(t)),
                (this.Yln = () => this.Jln()),
                (this.Zln = 0),
                (this.jGt = 0),
                (this.qG = -1),
                (this._Gt = GM.ti.gj("div", null, null, "table-insert-mark")),
                (this.Qln = null),
                (this.DGt = ""),
                (this.tun = !1),
                (this.iun = null),
                (this.qG = -1),
                (this.Awt = () => this.ten()),
                (this.ien = 0),
                (this.een = 0),
                (this.sen = 0),
                (this.nen = 0),
                (this.eun = !1),
                (this.sun = null),
                (this.nun = null),
                (this.hun = null),
                (this.oun = i.mnt),
                (this.h3e = !0),
                (this.aun = 0);
        }
        Ut() {
            this._x(),
                this.xF(),
                (this._Gt = null),
                this.lun(),
                this.uun(),
                (this.Awt = null),
                this.Kln && (this.Kln.Ut(), (this.Kln = null)),
                this.hun && (GM.ti.Tz(this.hun), (this.hun = null)),
                this.nun && (this.nun.Ut(), (this.nun = null)),
                -1 !== this.qG && (this.Az().cancelAnimationFrame(this.qG), (this.qG = -1)),
                this.MG &&
                    (this.MG.removeEventListener("scroll", this.Xln, { passive: !0 }),
                    (this.Xln = null),
                    GM.ti.Tz(this.MG),
                    (this.MG = null)),
                GM.ti.Tz(this.Dqs),
                (this.Dqs = null),
                (this.Yln = null),
                (this.GMt = null),
                super.Ut();
        }
        _x() {
            this.qln.clear(), this.xF();
            for (let t of this.Dci) t.Ut();
            for (const t of this.Kln.cun()) t.dun();
            GM.yh(this.Dci);
        }
        gl() {
            for (const t of this.Kln.cun()) t.gl();
            for (const t of this.Dci) t.gl();
        }
        $at() {
            let t = 0;
            for (const i of this.Kln.cun()) i.fun() && (t += i.pun());
            return t;
        }
        Aat() {
            let t = 0;
            for (const i of this.Kln.cun()) i.fun() || (t += i.mun());
            return t;
        }
        jat() {
            return !!this.Dci.some((t) => t.jat());
        }
        FO() {
            return this.Dqs;
        }
        CF() {
            return this.FO().ownerDocument;
        }
        Az() {
            return this.CF().defaultView;
        }
        Ten() {
            return this.Bin;
        }
        Een() {
            return this.$Se;
        }
        h7() {
            return this.$Je;
        }
        wun() {
            return this.Hln();
        }
        gun() {
            return this.Vln;
        }
        yun(t, i) {
            (this.eun = t), (this.sun = i);
        }
        bun() {
            return this.eun;
        }
        vun(t) {
            this.Sun(t), this.qln.add(t);
        }
        xun(t) {
            this.Sun(t), this.qln.delete(t);
        }
        eE() {
            return this.qln.size;
        }
        EF() {
            this.Mlt() &&
                (this.tun && (this.iun && this.iun.EF(), this.lun()),
                this.eun && (this.sun && this.sun.EF(), this.uun()));
        }
        Mlt() {
            return !!this.tun || !!this.eun;
        }
        fE() {
            this.Mun();
            for (let t of this.qln) t.Pit(!1);
            this.Eun(), this.Cun("allunselected"), AM(0 === this.qln.size, "should have deleted all selected row");
        }
        P$t() {
            return this.qln.values();
        }
        qWt() {
            return GM.vo(this.qln);
        }
        WIi() {
            return this.qln.size > 0;
        }
        _un() {
            return this.Kln;
        }
        Mun() {
            this.aun++;
        }
        Eun() {
            this.aun--, AM(this.aun >= 0, "missing matching call to block events");
        }
        Tun() {
            return this.aun > 0;
        }
        Iun() {
            return this.MG;
        }
        Pun(t) {
            this.oun ? this.MG.insertBefore(t, this.nun.FO()) : this.MG.appendChild(t);
        }
        mut(t) {
            for (const i of this.Dci) if (i.Zc() === t) return i;
            return null;
        }
        bnt() {
            if (this.Dci.length) throw new Error("table must be empty before setting the top row");
            return (
                this.Kln && this.Kln.Ut(),
                (this.Kln = GM.m(GM.ti.Tj.Table.Gun, this)),
                (this.MG = GM.ti.gj("div", this.Dqs, null, "table-scroll-container")),
                this.MG.addEventListener("scroll", this.Xln, { passive: !0 }),
                (this.MG.style.overflow = this.Wln),
                this.Kln
            );
        }
        Snt(t) {
            this.QLt();
            let i = GM.m(GM.ti.Tj.Table.w$t, t, this);
            return this.Dci.push(i), i;
        }
        QLt() {
            !this.nun && this.oun && (this.nun = GM.m(GM.ti.Tj.Table.w$t, null, this, !0));
        }
        Ume() {
            if (this.hun) return this.hun;
            if (!this.nun) throw new Error("must create padding row before footer element");
            this.hun = GM.ti.gj("div", null, null, "tableFooterElem");
            const t = this.nun.FO();
            return t.insertBefore(this.hun, t.firstChild), this.hun;
        }
        WZe() {
            return this.hun;
        }
        KIi(t) {
            GM.yp(t);
            for (let i of this.Dci) if (t(i)) return i;
        }
        kHt(t) {
            GM.Et(t, GM.ti.Tj.Table.w$t);
            let i = this.Dci.indexOf(t);
            if (i < 0) throw new Error("cannot find row");
            this.Dci[i].Ut(), this.Dci.splice(i, 1);
        }
        HIi() {
            for (let t of this.Dci) t.HIi();
        }
        DG(t) {
            let i = this.MG.scrollLeft,
                e = this.MG.scrollTop;
            if ((this.Zln !== i || this.jGt !== e) && ((this.Zln = i), (this.jGt = e), -1 === this.qG)) {
                this.Az() && (this.qG = this.Az().requestAnimationFrame(this.Yln));
            }
        }
        Jln() {
            const t = this.Kln.FO(),
                i = `${this.Zln}px`;
            (t.style.marginLeft = `-${i}`), (t.style.paddingRight = i);
            for (const t of this.rows()) {
                t.FO().style.setProperty("--width-offset", i);
            }
            this.qG = -1;
        }
        Sun(t) {
            if ((GM.Et(t, GM.ti.Tj.Table.w$t), t.ult() !== this)) throw new Error("row from different table");
        }
        *rows() {
            for (let t of this.Dci) yield t;
        }
        uF(t, i) {
            GM.wi(t), GM.wi(i);
            let e = this.Dqs.getBoundingClientRect();
            if (t < e.left || i < e.top || t > e.right || i > e.bottom) return null;
            for (let e of this.rows()) {
                let s = e.uF(t, i);
                if (s) return { rlt: e, HF: s.HF };
            }
            return null;
        }
        WF(t, i) {
            if ((this.Sun(t), GM.vu(i), "before" !== i && "after" !== i)) throw new Error("invalid insert mark type");
            if (t === this.Qln && i === this.DGt) return;
            this.xF();
            let e = t.FO();
            e.parentElement.insertBefore(this._Gt, "before" === i ? e : e.nextSibling), (this.Qln = t), (this.DGt = i);
        }
        xF() {
            this.DGt && (GM.ti.Tz(this._Gt), (this.Qln = null), (this.DGt = ""));
        }
        Aun() {
            return this.Qln;
        }
        Wnt(t) {
            !this.tun &&
                this.Az() &&
                ((this.iun = t),
                (this.tun = !0),
                (this.nen = 0),
                (this.ien = performance.now()),
                (this.qG = this.Az().requestAnimationFrame(this.Awt)));
        }
        jnt(t, i) {
            this.tun && ((this.een = t), (this.sen = i));
        }
        ten() {
            if (((this.qG = -1), !this.tun || !this.Az())) return;
            let t = performance.now(),
                i = (t - this.ien) / 1e3;
            this.ien = t;
            let e = this.Dqs.getBoundingClientRect();
            if (this.een >= e.left && this.een <= e.right)
                if (this.sen < e.top) {
                    let t = this.MG.scrollTop - kM * i - this.nen;
                    (this.nen = Math.ceil(t) - t), (t = Math.ceil(t)), this.VQt(t);
                } else if (this.sen > e.bottom) {
                    let t = this.MG.scrollTop + kM * i + this.nen;
                    (this.nen = t - Math.floor(t)), (t = Math.floor(t)), this.VQt(t);
                }
            this.qG = this.Az().requestAnimationFrame(this.Awt);
        }
        r9i() {
            return this.MG.scrollTop;
        }
        Run(t) {
            GM.wi(t), (this.MG.scrollLeft = t), (this.Zln = this.MG.scrollLeft);
        }
        Hbt() {
            return this.MG.scrollTop;
        }
        VQt(t) {
            GM.wi(t), (this.MG.scrollTop = t), (this.jGt = this.MG.scrollTop);
        }
        lun() {
            this.iun && this.iun.EF(),
                (this.iun = null),
                (this.tun = !1),
                -1 !== this.qG && this.Az() && (this.Az().cancelAnimationFrame(this.qG), (this.qG = -1));
        }
        uun() {
            this.sun && this.sun.EF(), (this.sun = null), this.yun(!1);
        }
        kun(t, i, e, s, n, r) {
            if (this.Tun()) return;
            let h = new GM.Event(i),
                o = null;
            return !e || ((o = e.getAttribute("columnName")), o)
                ? ((h.rlt = t),
                  (h.iat = o),
                  r && ((s = r.clientX), (n = r.clientY), (h._ot = r)),
                  void 0 !== s && void 0 !== n && ((h.clientX = s), (h.clientY = n)),
                  (h.Qlt = e ? t.znt(h.iat) : null),
                  this.dispatchEvent(h))
                : void 0;
        }
        Cun(t, i, e, s) {
            if (this.Tun()) return;
            let n = new GM.Event(t);
            return (
                (n.table = this),
                s && ((i = s.clientX), (e = s.clientY), (n._ot = s)),
                void 0 !== i && void 0 !== e && ((n.clientX = i), (n.clientY = e)),
                this.dispatchEvent(n)
            );
        }
        cO() {
            return this.h3e;
        }
        tO(t) {
            (t = !!t),
                this.h3e !== t &&
                    ((this.h3e = t), this.h3e ? (this.Dqs.style.display = "") : (this.Dqs.style.display = "none"));
        }
        _A() {
            const t = {};
            if (((t.scrollLeft = this.Zln), (t.scrollTop = this.jGt), this.qln.size)) {
                const i = [];
                for (let t of this.qln.values()) i.push({ number: t.LIi(), selected: t.c$() });
                t.selectedRows = i;
            } else t.selectedRows = null;
            return (t.columnsUIStateJson = this.Kln.cun().map((t) => t._A())), t;
        }
        xH(t, i) {
            if (t) {
                if (
                    (GM.Xl(t.scrollLeft) && ((this.MG.scrollLeft = t.scrollLeft), (this.Zln = t.scrollLeft)),
                    GM.Xl(t.scrollTop) && ((this.MG.scrollTop = t.scrollTop), (this.jGt = t.scrollTop)),
                    t.selectedRows && t.selectedRows.length)
                ) {
                    this.Mun();
                    for (let i of t.selectedRows)
                        for (let t of this.rows()) t.LIi() === i.number && i.selected && t.D_();
                    this.Eun(), this.WIi() && this.Cun("rowsselected");
                }
                if (t.columnsUIStateJson && t.columnsUIStateJson.length)
                    for (const e of t.columnsUIStateJson) {
                        const t = this.Kln.Oun(e.id);
                        t && t.xH(e, i);
                    }
                this.Jln(), this.gl(), this.jat();
            }
        }
    };
}
{
    const DM = self.t,
        FM = 10,
        LM = { Rnt: !1, cursor: "" };
    DM.ti.Tj.Table.w$t = class extends DM.Event.aG {
        constructor(t, i, e, s) {
            DM.Et(i, DM.ti.Tj.Table),
                (e = !!e),
                super(),
                (this.fnt = i),
                (this.pp = t),
                (this.Dun = e),
                (this.dvt = !1),
                (this.h3e = !0),
                (this.Kln = i._un()),
                (this.Fun = DM.ti.gj("ui-table-row")),
                this.Fun.setAttribute("tabindex", -1),
                this.Dun && this.Fun.setAttribute("filler", ""),
                this.Dun ? this.fnt.Iun().appendChild(this.Fun) : this.fnt.Pun(this.Fun),
                (this.Lun = []),
                (this.Bun = new Set()),
                (this.Nci = this.Kln.cun()),
                (this.Uun = []);
            for (let t = 0; t < this.Nci.length; t++) {
                let i,
                    e = this.Nci[t],
                    s = e.She(),
                    n = e.su();
                const r = Object.assign({}, e.LYt());
                (r.Nun = r.xnt),
                    (r.jun = e),
                    (r.$un = !1),
                    (i =
                        e.fun() && t === this.Nci.length - 1
                            ? DM.m(DM.ti.Tj.Table.OHt, this.fnt, this.Fun, -1, s, r)
                            : DM.m(DM.ti.Tj.Table.OHt, this.fnt, this.Fun, n, s, r)),
                    e.zun(i),
                    this.Uun.push(i);
            }
            (this._6 = (t) => this.az(t)),
                (this.fvt = (t) => this.cz(t)),
                (this.S6 = (t) => this.fz(t)),
                (this.I7e = (t) => this.ove(t)),
                (this.G7e = (t) => this.F3t(t)),
                (this.EGt = -1),
                (this.T3 = 0),
                (this.E3 = 0),
                (this.Ewt = !1),
                (this.Qq = null),
                (this.MR = null),
                (this.OR = null),
                (this.wtn = null),
                this.Fun.addEventListener("UIDoubleTap", this.fvt),
                this.Dun ||
                    (this.Fun.addEventListener("focus", this.I7e),
                    this.Fun.addEventListener("UITap", this._6),
                    this.fnt.gun() && this.Fun.addEventListener("blur", this.G7e),
                    this.fnt.Ten() &&
                        ((this.Qq = (t) => this.lz(t)),
                        (this.MR = (t) => this.GR(t)),
                        (this.OR = (t) => this.CR(t)),
                        (this.wtn = (t) => this.n0(t)),
                        this.Fun.addEventListener("pointerdown", this.Qq))),
                this.Fun.addEventListener("contextmenu", this.S6);
        }
        Ut() {
            this.fnt.Aun() === this && this.fnt.xF();
            for (let t of this.Lun) t.Ut();
            for (let t of this.Uun) t.Ut();
            DM.yh(this.Uun),
                DM.yh(this.Lun),
                this.Bun.clear(),
                this.Pit(!1),
                DM.ti.Tz(this.Fun),
                this.Fun.removeEventListener("focus", this.I7e),
                (this.I7e = null),
                this.Fun.removeEventListener("blur", this.G7e),
                (this.G7e = null),
                this.Fun.removeEventListener("UITap", this._6),
                (this._6 = null),
                this.Fun.removeEventListener("UIDoubleTap", this.fvt),
                (this.fvt = null),
                this.Fun.removeEventListener("pointerdown", this.Qq),
                (this.Qq = null),
                this.CF().removeEventListener("pointermove", this.MR),
                (this.MR = null),
                this.CF().removeEventListener("pointerup", this.OR),
                (this.OR = null),
                this.CF().removeEventListener("pointercancel", this.wtn),
                (this.wtn = null),
                this.Fun.removeEventListener("contextmenu", this.S6),
                (this.S6 = null),
                (this.Bun = null),
                (this.Lun = null),
                (this.Fun = null),
                (this.Nci = null),
                (this.fnt = null),
                (this.pp = null),
                (this.Kln = null),
                (this.Uun = null),
                super.Ut();
        }
        gl() {
            for (const t of this.Lun) t.gl();
            for (const t of this.Uun) t.gl();
        }
        jat() {
            const t = (t) => t.jat();
            return !!this.Nci.some(t) || !!this.Uun.some(t);
        }
        Zc() {
            return this.pp;
        }
        ult() {
            return this.fnt;
        }
        FO() {
            return this.Fun;
        }
        CF() {
            return this.FO().ownerDocument;
        }
        LIi() {
            return Array.prototype.indexOf.call(this.Fun.parentElement.children, this.Fun);
        }
        znt(t) {
            DM.vu(t);
            for (let i of this.Lun) if (i.Vun() === t) return i;
            return null;
        }
        HIi() {
            for (let t of this.Lun) t.kl() && t.HIi();
        }
        Pnt(t, i, e) {
            DM.vu(t), this.Wun(t), (e = Object.assign({}, LM, e));
            let s = this.Fun.querySelector(`[columnName="${t}"]`);
            return this.Lun.push(DM.m(DM.ti.Tj.Table.Hun, s, i, e)), this;
        }
        Gnt(t, i, e) {
            DM.vu(t), this.Wun(t), (e = Object.assign({}, LM, e));
            let s = this.Fun.querySelector(`[columnName="${t}"]`);
            return this.Lun.push(DM.m(DM.ti.Tj.Table.aEi, s, i, e)), this;
        }
        knt(t, i, e, s) {
            DM.vu(t), this.Wun(t), ((s = Object.assign({}, LM, s)).table = this.fnt), (s.rlt = this), (s.Kun = e);
            let n = this.Fun.querySelector(`[columnName="${t}"]`);
            return this.Lun.push(DM.m(DM.ti.Tj.Table.qun, n, i, s)), this;
        }
        iEi(t, i, e) {
            DM.vu(t), this.Wun(t), (e = Object.assign({}, LM, e));
            let s = this.Fun.querySelector(`[columnName="${t}"]`);
            return this.Lun.push(DM.m(DM.ti.Tj.Table.Xun, s, i, e)), this;
        }
        Ont(t, i, e) {
            DM.vu(t), this.Wun(t), (e = Object.assign({}, LM, e));
            let s = this.Fun.querySelector(`[columnName="${t}"]`);
            return this.Lun.push(DM.m(DM.ti.Tj.Table.Yun, s, i, e)), this;
        }
        $$t(t, i, e) {
            DM.vu(t),
                i && DM.Et(i, i.ownerDocument.defaultView.DocumentFragment),
                this.Wun(t),
                (e = Object.assign({}, LM, e));
            let s = this.Fun.querySelector(`[columnName="${t}"]`);
            return this.Lun.push(DM.m(DM.ti.Tj.Table.Jun, s, i, e)), this;
        }
        cct(t, i, e) {
            DM.vu(t), this.Wun(t), ((e = Object.assign({}, LM, e)).table = this.fnt), (e.rlt = this);
            let s = this.Fun.querySelector(`[columnName="${t}"]`);
            return this.Lun.push(DM.m(DM.ti.Tj.Table.Zun, s, i, e)), this;
        }
        wzt(t, i, e) {
            DM.vu(t), this.Wun(t), ((e = Object.assign({}, LM, e)).table = this.fnt), (e.rlt = this);
            let s = this.Fun.querySelector(`[columnName="${t}"]`);
            return this.Lun.push(DM.m(DM.ti.Tj.Table.Qun, s, i, e)), this;
        }
        Wun(t) {
            if (this.Bun.has(t)) throw new Error(`field '${t}' has already been set`);
            if (!this.Nci.some((i) => i.She() === t)) throw new Error(`field '${t}' does not exist`);
            this.Bun.add(t);
        }
        az(t) {
            this.fnt.kun(this, "rowtapped", t.target, t.clientX, t.clientY, t);
        }
        cz(t) {
            this.Dun
                ? this.fnt.Cun("tablespacedoubletap", t.clientX, t.clientY, t)
                : this.fnt.kun(this, "rowdoubletapped", t.target, t.clientX, t.clientY, t);
        }
        fz(t) {
            t.preventDefault(),
                t.stopPropagation(),
                this.Dun
                    ? this.fnt.Cun("tablecontextmenu", t.clientX, t.clientY, t)
                    : this.fnt.kun(this, "rowcontextmenu", t.target, t.clientX, t.clientY, t);
        }
        tO(t) {
            (t = !!t),
                this.h3e !== t &&
                    ((this.h3e = t), this.h3e ? (this.Fun.style.display = "") : (this.Fun.style.display = "none"));
        }
        D_(t) {
            this.c$() || ((this.fnt.Een() && DM.rE.vdt()) || this.fnt.fE(), this.Pit(!0));
        }
        xT() {
            this.Pit(!1);
        }
        Pit(t) {
            (t = !!t),
                this.dvt !== t &&
                    (t
                        ? (this.Fun.setAttribute("selected", ""), this.fnt.kun(this, "rowselected"), this.fnt.vun(this))
                        : (this.Fun.removeAttribute("selected"),
                          this.fnt.kun(this, "rowunselected"),
                          this.fnt.xun(this)),
                    (this.dvt = t));
        }
        c$() {
            return this.dvt;
        }
        ove(t) {
            this.D_();
        }
        F3t(t) {
            this.fnt.Een() ? DM.rE.vdt() || this.fnt.fE() : this.Pit(!1);
        }
        uF(t, i) {
            if ((DM.wi(t), DM.wi(i), this.Dun)) return null;
            let e = this.Fun.getBoundingClientRect();
            if (t < e.left || t > e.right || i < e.top || i > e.bottom) return null;
            let s = e.bottom - e.top;
            return { HF: i >= e.top + s / 2 ? "after" : "before" };
        }
        EF() {
            this.CF().removeEventListener("pointermove", this.MR),
                this.CF().removeEventListener("pointerup", this.OR),
                this.CF().removeEventListener("pointercancel", this.wtn),
                (this.Ewt = !1),
                (this.EGt = -1);
        }
        lz(t) {
            t.button === DM.sQ.z0 &&
                (this.fnt.bun() ||
                    (-1 === this.EGt &&
                        (this.CF().addEventListener("pointermove", this.MR),
                        this.CF().addEventListener("pointerup", this.OR),
                        this.CF().addEventListener("pointercancel", this.wtn),
                        (this.EGt = t.pointerId),
                        (this.T3 = t.clientX),
                        (this.E3 = t.clientY),
                        (this.Ewt = !1))));
        }
        GR(t) {
            if ((t.preventDefault(), t.pointerId === this.EGt && !this.fnt.bun())) {
                if (this.fnt.Ten() && !this.Ewt && DM.gt(this.T3, this.E3, t.clientX, t.clientY) >= FM) {
                    if (!this.fnt.kun(this, "dragstart", t.target, t.clientX, t.clientY, t))
                        return (
                            (this.EGt = -1),
                            this.CF().removeEventListener("pointermove", this.MR),
                            this.CF().removeEventListener("pointerup", this.OR),
                            void this.CF().removeEventListener("pointercancel", this.wtn)
                        );
                    (this.Ewt = !0), this.fnt.Wnt(this);
                }
                this.Ewt &&
                    (this.fnt.kun(this, "dragmove", null, t.clientX, t.clientY, t), this.fnt.jnt(t.clientX, t.clientY));
            }
        }
        CR(t) {
            if (t.pointerId !== this.EGt) return;
            const i = this.Ewt;
            if ((this.EF(), i)) {
                if (!this.fnt) return;
                this.fnt.lun(), this.fnt.kun(this, "drop", null, t.clientX, t.clientY, t);
            }
        }
        n0(t) {
            this.CR(t);
        }
    };
}
{
    const BM = self.t,
        UM = 3;
    BM.ti.Tj.Table.OHt = class extends BM.Event.aG {
        constructor(t, i, e, s, n) {
            BM.Et(t, BM.ti.Tj.Table),
                BM.Gct(i),
                BM.wi(e),
                BM.k$(s),
                BM.Dpt(n),
                super(),
                (this.fnt = t),
                (this.GMt = i),
                (this.lp = e),
                (this.nes = s),
                (this.dXt = n),
                (this.mht = null),
                (this.tcn = null),
                (this.icn = null),
                (this.ecn = null),
                (this.scn = null),
                (this.Uun = null),
                (this.j9i = 0),
                (this.ncn = 0),
                (this.rcn = 0),
                (this.hcn = -1),
                (this.ocn = -1),
                (this.acn = !!this.dXt.$un),
                (this.lcn = this.dXt.jun),
                (this.ucn = ""),
                (this.mht = s
                    ? BM.ti.gj("ui-table-column", i, null, null, { columnName: s })
                    : BM.ti.gj("ui-table-column", i)),
                this.acn && this.mht.setAttribute("top-row-column", ""),
                this.mht.setAttribute("horizontal-align", n.Nun),
                this.mht.setAttribute("has-size-styles", ""),
                this.mht.setAttribute("current-size", ""),
                this.mht.setAttribute("min-size", this.dXt.Vnt),
                e && -1 !== e
                    ? ((this.mht.style.width = `${e}px`),
                      this.mht.setAttribute("current-size", `${e}px`),
                      (this.mht.style.maxWidth = `${e}px`),
                      (this.mht.style.minWidth = `${e}px`))
                    : (this.mht.removeAttribute("has-size-styles"),
                      (this.mht.style.width = `${this.dXt.Vnt}px`),
                      this.mht.setAttribute("current-size", `${this.dXt.Vnt}px`)),
                (this.ccn = -1),
                (this.k3t = (t) => this.lz(t)),
                (this.A3t = (t) => this.GR(t)),
                (this.C3t = (t) => this.CR(t)),
                (this.dcn = (t) => this.fcn(t)),
                (this.Qki = (t) => this.n0(t)),
                this.mht.addEventListener("pointerdown", this.k3t),
                this.mht.addEventListener("pointermove", this.dcn);
        }
        Ut() {
            this.mht.removeEventListener("pointerdown", this.k3t),
                this.mht.removeEventListener("pointermove", this.dcn),
                this.fnt.CF().removeEventListener("pointermove", this.A3t, { passive: !0 }),
                this.fnt.CF().removeEventListener("pointerup", this.C3t),
                this.fnt.CF().removeEventListener("pointercancel", this.Qki),
                BM.ti.Tz(this.mht),
                this.tcn && BM.yh(this.tcn),
                this.icn && BM.yh(this.icn),
                this.Uun && BM.yh(this.Uun),
                (this.k3t = null),
                (this.A3t = null),
                (this.C3t = null),
                (this.dcn = null),
                (this.tcn = null),
                (this.ecn = null),
                (this.icn = null),
                (this.scn = null),
                (this.Uun = null),
                (this.fnt = null),
                (this.GMt = null),
                (this.mht = null),
                (this.dXt = null),
                (this.lcn = null),
                super.Ut();
        }
        dun() {
            this.Uun && BM.yh(this.Uun);
        }
        gl() {
            if (!this.fun()) return;
            this.pcn();
            const t = this.mcn();
            -1 !== t && this.wcn(t);
        }
        jat() {
            this.pcn();
            const t = this.su(),
                i = Number(this.mht.getAttribute("min-size"));
            return t !== i && -1 !== i && -1 !== t && t < i && (this.gcn(i), !0);
        }
        FO() {
            return this.mht;
        }
        LYt() {
            return this.dXt;
        }
        fun() {
            return -1 === this.lp;
        }
        ycn() {
            return 0 === this.bcn(this.mht);
        }
        vcn() {
            return this.bcn(this.mht) === this.fnt._un().cun().length - 1;
        }
        She() {
            return this.nes;
        }
        pcn() {
            this.ccn = -1;
        }
        pun() {
            return Number(this.mht.getAttribute("min-size"));
        }
        mun() {
            const t = getComputedStyle(this.mht);
            return this.mht.getBoundingClientRect().width + parseInt(t.padding) + parseInt(t.borderWidth);
        }
        Scn() {
            return parseFloat(this.mht.style.width);
        }
        wcn(t) {
            BM.wi(t);
            const i = `${t}px`;
            (this.mht.style.width = i),
                this.mht.removeAttribute("has-size-styles"),
                this.fun() ||
                    (this.mht.setAttribute("has-size-styles", ""),
                    (this.mht.style.maxWidth = i),
                    (this.mht.style.minWidth = i),
                    this.en(t));
        }
        gcn(t) {
            BM.wi(t), (this.tcn = this.xcn(0));
            for (let i of this.tcn) {
                const e = `${t}px`;
                (i.style.width = e),
                    i.removeAttribute("has-size-styles"),
                    this.fun() ||
                        (i.setAttribute("has-size-styles", ""), (i.style.maxWidth = e), (i.style.minWidth = e));
            }
            if ((this.en(t), this.Mcn())) for (const i of this.Mcn()) i.en(t);
            BM.yh(this.tcn), (this.tcn = null);
        }
        mcn() {
            return this.acn ? this.su() : -1 === this.lp ? ((this.ccn = this.lcn.su()), this.ccn) : this.lp;
        }
        su() {
            if (-1 !== this.ccn) return this.ccn;
            if (-1 === this.lp) {
                let t = getComputedStyle(this.mht),
                    i = parseInt(t.width);
                return BM.Xl(i) && (this.ccn = i), this.ccn;
            }
            return this.lp;
        }
        en(t) {
            BM.wi(t), -1 !== this.lp && (this.lp = t);
        }
        zun(t) {
            BM.Et(t, BM.ti.Tj.Table.OHt), this.Uun || (this.Uun = []), this.Uun.push(t);
        }
        Mcn() {
            return this.Uun;
        }
        EF() {
            this.n0();
        }
        bcn(t) {
            const i = Array.prototype.filter.call(
                t.parentNode.childNodes,
                (t) => "ui-table-column" === t.tagName.toLowerCase()
            );
            return Array.prototype.indexOf.call(i, t);
        }
        xcn(t) {
            BM.wi(t);
            let i = this.bcn(this.mht) + t,
                e = this.fnt.FO().getElementsByTagName("ui-table-column");
            return (
                0 === t ? (this.ecn = this.fnt._un().cun()[i]) : (this.scn = this.fnt._un().cun()[i]),
                Array.prototype.filter.call(e, (t) => this.bcn(t) === i)
            );
        }
        lz(t) {
            if (!this.fnt.h7()) return;
            this.fnt.gl();
            let i = this.mht,
                e = i.getBoundingClientRect(),
                s = t.clientX - e.left;
            if (((this.j9i = t.clientX), i.style.width)) this.ncn = parseFloat(i.style.width);
            else {
                let t = parseInt(getComputedStyle(i).padding);
                this.ncn = e.width - 2 * t;
            }
            if (s <= UM) {
                if (this.ycn()) return;
                return (
                    this.fnt.yun(!0, this),
                    (this.ucn = "left"),
                    (this.tcn = this.xcn(0)),
                    (this.icn = this.xcn(-1)),
                    this.scn && (this.scn.pcn(), (this.rcn = this.scn.su())),
                    this.fnt.CF().addEventListener("pointermove", this.A3t, { passive: !0 }),
                    this.fnt.CF().addEventListener("pointerup", this.C3t),
                    this.fnt.CF().addEventListener("pointercancel", this.Qki),
                    this.mht.removeEventListener("pointermove", this.dcn),
                    void this.fnt.Cun("columnresizestart", void 0, void 0, t)
                );
            }
            return s >= e.width - UM
                ? (this.fnt.yun(!0, this),
                  (this.ucn = "right"),
                  (this.tcn = this.xcn(0)),
                  (this.icn = this.xcn(1)),
                  this.scn && (this.scn.pcn(), (this.rcn = this.scn.su())),
                  this.fnt.CF().addEventListener("pointermove", this.A3t),
                  this.fnt.CF().addEventListener("pointerup", this.C3t),
                  this.fnt.CF().addEventListener("pointercancel", this.Qki),
                  this.mht.removeEventListener("pointermove", this.dcn, { passive: !0 }),
                  void this.fnt.Cun("columnresizestart", void 0, void 0, t))
                : void 0;
        }
        Ecn(t, i) {
            BM.wi(t), BM._T(i);
            const e = `${Math.floor(t)}px`;
            for (let t of i) {
                if (t.getAttribute("current-size") === e) continue;
                t.setAttribute("current-size", e), (t.style.width = e);
                const i = t.hasAttribute("has-size-styles");
                i && (t.style.maxWidth = e), i && (t.style.minWidth = e);
            }
        }
        GR(t) {
            const i = this.fnt.wun();
            let e = Math.floor((t.clientX - this.j9i) / i);
            "left" === this.ucn && (e *= -1), (this.hcn = this.ncn + e);
            let s = Number(this.mht.getAttribute("min-size"));
            if (((s = -1 === s ? 0 : s), this.hcn < s))
                return (
                    (this.hcn = s),
                    this.Ecn(this.hcn, this.tcn),
                    void (this.scn && ((this.ocn = this.rcn + (this.ncn - s)), this.Ecn(this.ocn, this.icn)))
                );
            if (this.scn) {
                this.ocn = this.rcn - e;
                let t = Number(this.icn[0].getAttribute("min-size"));
                if (((t = -1 === t ? 0 : t), this.ocn < t))
                    return (
                        (this.ocn = t),
                        this.Ecn(this.ocn, this.icn),
                        (this.hcn = this.ncn + (this.rcn - t)),
                        void this.Ecn(this.hcn, this.tcn)
                    );
            }
            this.Ecn(this.hcn, this.tcn),
                this.Ecn(this.ocn, this.icn),
                this.fnt.Cun("columnresizeupdate", void 0, void 0, t);
        }
        fcn(t) {
            if (!this.fnt.h7()) return;
            let i = this.mht,
                e = i.getBoundingClientRect(),
                s = t.clientX - e.left;
            return s <= UM
                ? 0 === this.bcn(i)
                    ? void this.fnt.FO().removeAttribute("resizing-column")
                    : void this.fnt.FO().setAttribute("resizing-column", "")
                : s >= e.width - UM
                  ? this.fun() && this.vcn()
                      ? void this.fnt.FO().removeAttribute("resizing-column")
                      : void this.fnt.FO().setAttribute("resizing-column", "")
                  : void this.fnt.FO().removeAttribute("resizing-column");
        }
        CR(t) {
            if (this.ecn && -1 !== this.hcn) {
                let t = this.hcn > 0 ? this.hcn : 0;
                if ((this.ecn.en(t), this.ecn.Mcn())) for (let i of this.ecn.Mcn()) i.en(t);
            }
            if (this.scn && -1 !== this.ocn) {
                let t = this.ocn > 0 ? this.ocn : 0;
                if ((this.scn.en(t), this.scn.Mcn())) for (let i of this.scn.Mcn()) i.en(t);
            }
            BM.yh(this.tcn),
                BM.yh(this.icn),
                (this.hcn = -1),
                (this.ocn = -1),
                (this.ecn = null),
                (this.scn = null),
                (this.ucn = ""),
                this.fnt.yun(!1),
                this.fnt.FO().removeAttribute("resizing-column"),
                this.fnt.CF().removeEventListener("pointermove", this.A3t, { passive: !0 }),
                this.fnt.CF().removeEventListener("pointerup", this.C3t),
                this.fnt.CF().removeEventListener("pointercancel", this.Qki),
                this.mht.addEventListener("pointermove", this.dcn),
                this.fnt.Cun("columnresize", void 0, void 0, t),
                this.fnt.Cun("columnresizeend", void 0, void 0, t);
        }
        n0(t) {
            this.fnt && this.fnt.bun() && this.CR(t);
        }
        _A() {
            const t = {};
            if (
                ((t.id = this.She()),
                (t.computedSize = this.fun() ? -1 : this.Scn()),
                (t.hasSizeStyle = this.mht.hasAttribute("has-size-styles")),
                (t.currentSize = this.mht.hasAttribute("current-size") ? this.mht.getAttribute("current-size") : ""),
                this.mht.style.width)
            )
                t.currentColumnSize = parseFloat(this.mht.style.width);
            else {
                let i = this.mht.getBoundingClientRect(),
                    e = parseInt(getComputedStyle(this.mht).padding);
                t.currentColumnSize = i.width - 2 * e;
            }
            return this.scn && (this.scn.pcn(), (t.currentAdjacentColumnSize = this.scn.su())), t;
        }
        xH(t, i) {
            if (t) {
                if (
                    (t.hasOwnProperty("hasSizeStyle") && this.mht.setAttribute("has-size-styles", ""),
                    t.hasOwnProperty("computedSize") && this.gcn(t.computedSize),
                    t.hasOwnProperty("currentColumnSize") && this.ecn)
                ) {
                    const i = t.currentColumnSize > 0 ? t.currentColumnSize : 0;
                    if ((this.ecn.en(i), this.ecn.Mcn())) for (const t of this.ecn.Mcn()) t.en(i);
                }
                if (t.hasOwnProperty("currentAdjacentColumnSize") && this.scn && this.ecn) {
                    const i = t.currentAdjacentColumnSize > 0 ? t.currentAdjacentColumnSize : 0;
                    if ((this.scn.en(i), this.ecn.Mcn())) for (const t of this.scn.Mcn()) t.en(i);
                }
            }
        }
    };
}
{
    const NM = self.t,
        jM = self.assert,
        $M = { Nun: "left", _nt: "left", xnt: "left", Vnt: -1, $un: !1 },
        zM = ["left", "center", "right"];
    NM.ti.Tj.Table.Gun = class extends NM.Event.aG {
        constructor(t) {
            super(),
                (this.fnt = t),
                (this.mht = NM.ti.gj("ui-table-row")),
                this.mht.setAttribute("topRow", ""),
                this.fnt.FO().appendChild(this.mht),
                (this.Ccn = !1),
                (this.Nci = []),
                (this.MUi = (t) => {
                    t.preventDefault(), this.fnt.Cun("tablecontextmenu", t.clientX, t.clientY, t);
                }),
                this.mht.addEventListener("contextmenu", this.MUi);
        }
        Ut() {
            this.mht.removeEventListener("contextmenu", this.MUi),
                (this.MUi = null),
                NM.ti.Tz(this.mht),
                (this.mht = null);
            for (let t of this.Nci) t.Ut();
            NM.yh(this.Nci), (this.Nci = null), (this.fnt = null), (this.Ccn = !1), super.Ut();
        }
        FO() {
            return this.mht;
        }
        cun() {
            return this.Nci;
        }
        Oun(t) {
            NM.vu(t);
            for (const i of this.Nci) if (i.She() === t) return i;
        }
        _cn(t) {
            return NM.Et(t, NM.ti.Tj.Table.OHt), -1 !== this.Nci.indexOf(t);
        }
        Nnt(t, i, e, s) {
            if ((NM.vu(t), NM.wi(i), NM.k$(e), NM.oN(s), this.Ccn))
                throw new Error("only one auto sizing column at the end of the table is allowed");
            (s = Object.assign({}, $M, s)),
                jM(zM.includes(s._nt), `unexpected header horizontal align value ${s._nt}, supported values are ${zM}`),
                jM(
                    zM.includes(s.xnt),
                    `unexpected content horizontal align value ${s.xnt}, supported values are ${zM}`
                ),
                (s.Nun = s._nt),
                (s.$un = !0);
            let n = NM.m(NM.ti.Tj.Table.OHt, this.fnt, this.mht, i, t, s);
            if ((n.FO().classList.add("top-row-column"), e)) {
                NM.ti.gj("div", n.FO()).textContent = e;
            }
            return this.Nci.push(n), this;
        }
        Cnt(t, i, e) {
            NM.vu(t),
                NM.k$(i),
                NM.oN(e),
                this.Nnt(t, -1, i, e),
                this.fnt.FO().setAttribute("flex-filler", ""),
                (this.Ccn = !0);
        }
    };
}
{
    const VM = self.t;
    VM.ti.Tj.Table.Tcn = class {
        constructor() {
            this.Icn = !1;
        }
        Vun() {
            VM._2();
        }
        Ut() {
            VM._2();
        }
        gl() {
            VM._2();
        }
        FO() {
            VM._2();
        }
        kl() {
            return this.Icn;
        }
    };
}
{
    const WM = self.t,
        HM = { Rnt: !1, cursor: null, Int: null };
    WM.ti.Tj.Table.Hun = class extends WM.ti.Tj.Table.Tcn {
        constructor(t, i, e) {
            WM.Gct(t),
                super(),
                (this.iut = null),
                (e = Object.assign({}, HM, e)),
                WM.ca(i, WM.ti.zrt) && ((this.iut = WM.m(WM.ti.met, i || {}, t)), this.Pcn(e, this.iut.FO())),
                WM.ca(i, WM.ti.KAe) &&
                    ((this.iut = WM.ti.gj("div")),
                    t.appendChild(this.iut),
                    i.out().then((t) => {
                        this.Gcn(t, e, this.iut),
                            this.Pcn(e, this.iut),
                            this.iut && this.GMt && this.iut.appendChild(t);
                    })),
                (this.GMt = t),
                this.GMt.setAttribute("icon", "");
        }
        Vun() {
            return this.GMt.getAttribute("columnName");
        }
        Ut() {
            WM.ca(this.iut, WM.ti.met) ? this.iut.Ut() : WM.ti.Tz(this.iut), (this.iut = null), (this.GMt = null);
        }
        gl() {}
        FO() {
            return WM.ca(this.iut, WM.ti.met) ? this.iut.FO() : this.iut;
        }
        zD(t) {
            WM.ca(this.iut, WM.ti.met) && this.iut.zD(t);
        }
        Pcn(t, i) {
            (this.iut || this.GMt) &&
                (t.Rnt ? i.classList.add("table-column-content-with-pointer") : i.classList.add("table-column-content"),
                t.cursor && (i.style.cursor = t.cursor));
        }
        Gcn(t, i, e) {
            (this.iut || this.GMt) &&
                (i.Int && WM.Xl(i.Int.width) && (e.style.width = `${i.Int.width}px`),
                i.Int && WM.Xl(i.Int.height) && (e.style.height = `${i.Int.height}px`),
                i.Int && WM.Xl(i.Int.width) && t.setAttribute("width", i.Int.width),
                i.Int && WM.Xl(i.Int.height) && t.setAttribute("height", i.Int.height));
        }
    };
}
{
    const KM = self.t,
        qM = self.assert;
    KM.ti.Tj.Table.Yun = class extends KM.ti.Tj.Table.Tcn {
        constructor(t, i, e) {
            KM.Gct(t), super();
            const s = typeof i;
            qM("function" === s || "string" === s || "number" === s || "object" === s, "unexpected type"),
                (this.ux = KM.ti.gj("div", t, null, "table-column-content")),
                (this.Acn = "function" === s ? i : null),
                KM.hrt(this.ux, "function" === s ? i() : i),
                (this.GMt = t);
        }
        Vun() {
            return this.GMt.getAttribute("columnName");
        }
        Ut() {
            KM.ti.Tz(this.ux), (this.ux = null), (this.GMt = null), (this.Acn = null);
        }
        gl() {
            this.Acn && this.ux && KM.hrt(this.ux, this.Acn());
        }
        In(t) {
            KM.$rt(t), KM.hrt(this.ux, t);
        }
        E_() {
            return this.ux.textContent;
        }
        FO() {
            return this.ux;
        }
    };
}
{
    const XM = self.t,
        YM = self.assert;
    XM.ti.Tj.Table.Xun = class extends XM.ti.Tj.Table.Tcn {
        constructor(t, i, e) {
            XM.Gct(t), super();
            const s = typeof i;
            YM("function" === s || "string" === s || "number" === s || "object" === s, "unexpected type"),
                (this.UWs = XM.ti.gj("div", t, null, "table-column-content")),
                (this.Rcn = "function" === s ? i : null),
                XM.hrt(this.UWs, "function" === s ? i().toString() : i.toString()),
                (this.GMt = t);
        }
        Vun() {
            return this.GMt.getAttribute("columnName");
        }
        Ut() {
            XM.ti.Tz(this.UWs), (this.UWs = null), (this.GMt = null), (this.Rcn = null);
        }
        gl() {
            this.Rcn && this.UWs && XM.hrt(this.UWs, this.Rcn().toString());
        }
        FO() {
            return this.UWs;
        }
    };
}
{
    const JM = self.t,
        ZM = self.assert,
        QM = 30;
    JM.ti.Tj.Table.aEi = class extends JM.ti.Tj.Table.Tcn {
        constructor(t, i, e) {
            JM.Gct(t), super();
            const s = typeof i;
            ZM("function" === s || "string" === s || "number" === s || "object" === s, "unexpected type"),
                (this.GMt = t),
                (this.kcn = "function" === s ? i() : i),
                (this.Acn = "function" === s ? i : null),
                (this.ux = JM.ti.gj("div", this.GMt, null, "table-column-content")),
                JM.hrt(this.ux, this.kcn),
                (this.Rht = null),
                (this.Isn = null),
                (this.Ocn = null),
                (this.Csn = null),
                (this.V7e = null),
                (this.Dcn = null),
                (this.Fcn = (t) => this.Asn()),
                (this.Icn = !0),
                (this.Lcn = NaN);
        }
        Ut() {
            this.inn(),
                JM.ti.Tz(this.ux),
                (this.kcn = null),
                (this.ux = null),
                (this.GMt = null),
                (this.Isn = null),
                (this.Ocn = null),
                (this.Csn = null),
                (this.V7e = null),
                (this.Dcn = null),
                (this.Fcn = null),
                (this.Acn = null),
                JM.Xl(this.Lcn) && (self.clearTimeout(this.Lcn), (this.Lcn = NaN));
        }
        gl() {
            this.Acn && this.ux && ((this.kcn = this.Acn()), (this.ux.textContent = this.kcn));
        }
        Vun() {
            return this.GMt.getAttribute("columnName");
        }
        FO() {
            return this.ux;
        }
        In(t) {
            JM.vu(t), (this.kcn = t), (this.ux.textContent = this.kcn);
        }
        E_() {
            return this.kcn;
        }
        __() {
            return this.Rht
                ? Promise.resolve(null)
                : this.GMt
                  ? ((this.Rht = JM.ti.gj("input", this.GMt, null, "table-edit-text")),
                    this.Rht.classList.add("table-column-input"),
                    (this.Rht.type = "text"),
                    this.Rht.setAttribute("spellcheck", "false"),
                    this.Rht.addEventListener("UITap", JM.ti.int),
                    this.Rht.addEventListener("UIDoubleTap", JM.ti.int),
                    (this.Lcn = window.setTimeout((t) => {
                        (this.Lcn = NaN),
                            this.Rht &&
                                ((this.Csn = (t) => this.YWe()),
                                this.Rht.addEventListener("blur", this.Csn),
                                this.Rht.select());
                    }, QM)),
                    (this.V7e = (t) => this.tnn(t)),
                    this.Rht.addEventListener("keydown", this.V7e, !0),
                    this.GMt.addEventListener("scroll", this.Fcn, { passive: !0 }),
                    (this.Rht.value = this.kcn),
                    this.Rht.focus(),
                    (this.ux.textContent = ""),
                    new Promise((t, i) => {
                        (this.Isn = t), (this.Ocn = i);
                    }))
                  : Promise.resolve(null);
        }
        tnn(t) {
            t.which === JM.fO.o3
                ? (t.preventDefault(), t.stopPropagation(), this.YWe())
                : t.which === JM.fO.oO && (t.preventDefault(), t.stopPropagation(), this.HIi());
        }
        YWe() {
            if (!this.Rht) return;
            let t = this.Rht.value;
            this.inn(), this.Isn && this.Isn(t), (this.Isn = null), (this.Ocn = null);
        }
        HIi() {
            this.Rht && (this.inn(), this.Isn && this.Isn(null), (this.Isn = null), (this.Ocn = null));
        }
        inn() {
            this.Rht &&
                ((this.kcn = this.Rht.value),
                (this.ux.textContent = this.kcn),
                this.GMt.removeEventListener("scroll", this.Fcn, { passive: !0 }),
                this.Rht.removeEventListener("keydown", this.V7e, !0),
                this.Rht.removeEventListener("blur", this.Csn),
                this.Rht.removeEventListener("contextmenu", this.Dcn),
                this.Rht.removeEventListener("UITap", JM.ti.int),
                this.Rht.removeEventListener("UIDoubleTap", JM.ti.int),
                JM.ti.Tz(this.Rht),
                (this.V7e = null),
                (this.Csn = null),
                (this.Rht = null));
        }
        Asn() {
            (this.Rht.style.left = `${this.ux.offsetLeft}px`),
                (this.Rht.style.top = this.ux.offsetTop - this.GMt.scrollTop + "px");
            let t = this.GMt.getBoundingClientRect(),
                i = this.Rht.getBoundingClientRect();
            (i.bottom > t.bottom || i.top < t.top || i.left < t.left || i.right > t.right) && this.HIi();
        }
    };
}
{
    const tE = self.t,
        iE = self.assert,
        eE = 30;
    tE.ti.Tj.Table.qun = class extends tE.ti.Tj.Table.Tcn {
        constructor(t, i, e) {
            tE.Gct(t), super();
            let s = typeof e.Kun;
            iE("function" === s || "string" === s, "unexpected type'"),
                (this.GMt = t),
                (this.Bcn = e.Kun),
                (this.fnt = e.table),
                (this.Ucn = e.rlt),
                (this.Ncn = e.Dnt ? e.Dnt : self.lang("common.ellipsis")),
                (s = typeof i),
                iE("function" === s || "string" === s, "unexpected type"),
                (this.Acn = "function" === s ? i : null),
                (this.Ect = tE.ti.gj("div", this.GMt, null, "table-column-content-long-text")),
                this.Ect.classList.add("table-column-content"),
                (this.Rht = tE.ti.gj("input", this.Ect)),
                (this.Rht.type = "text"),
                (this.Rht.value = "function" === s ? i() : i),
                this.Rht.setAttribute("spellcheck", "false"),
                this.Rht.setAttribute("autocomplete", "off"),
                (this.A$i = tE.ti.gj("button", this.Ect)),
                (this.A$i.textContent = this.Ncn),
                (this.jcn = (t) => this.p9e(t)),
                this.A$i.addEventListener("click", this.jcn),
                (this.Icn = !0),
                (this.$cn = null),
                (this.Lcn = NaN),
                (this.Isn = null),
                (this.Ocn = null),
                (this.zcn = (t) => this.YWe()),
                (this.Vcn = (t) => this.tnn(t)),
                (this.Fcn = (t) => this.Asn());
        }
        Ut() {
            this.inn(),
                (this.$cn = null),
                (this.Isn = null),
                (this.Ocn = null),
                (this.zcn = null),
                (this.Vcn = null),
                (this.Fcn = null),
                this.A$i.removeEventListener("click", this.jcn),
                (this.jcn = null),
                tE.ti.Tz(this.A$i),
                (this.A$i = null),
                tE.ti.Tz(this.Rht),
                (this.Rht = null),
                tE.ti.Tz(this.Ect),
                (this.Ect = null),
                (this.GMt = null),
                (this.Bcn = null),
                (this.fnt = null),
                (this.Ucn = null),
                (this.Acn = null);
        }
        gl() {
            this.Acn && this.Rht && (this.Rht.value = this.Acn());
        }
        Vun() {
            return this.GMt.getAttribute("columnName");
        }
        FO() {
            return this.Ect;
        }
        E_() {
            return this.Rht.value;
        }
        oat() {
            return this.$cn
                ? Promise.resolve(null)
                : this.GMt
                  ? ((this.$cn = tE.ti.gj("input", this.GMt, null, "long-table-edit-text")),
                    this.$cn.classList.add("table-column-input"),
                    (this.$cn.type = "text"),
                    this.$cn.setAttribute("spellcheck", "false"),
                    this.$cn.addEventListener("UITap", tE.ti.int),
                    this.$cn.addEventListener("UIDoubleTap", tE.ti.int),
                    (this.Lcn = window.setTimeout((t) => {
                        (this.Lcn = NaN), this.$cn && (this.$cn.addEventListener("blur", this.zcn), this.$cn.select());
                    }, eE)),
                    this.$cn.addEventListener("keydown", this.Vcn, !0),
                    this.GMt.addEventListener("scroll", this.Fcn, { passive: !0 }),
                    (this.$cn.value = this.Rht.value),
                    this.$cn.focus(),
                    (this.Rht.textContent = "."),
                    new Promise((t, i) => {
                        (this.Isn = t), (this.Ocn = i);
                    }))
                  : Promise.resolve(null);
        }
        __() {
            let t = tE.ti.Ze.Ke("LongTextPropertyDialog");
            switch (typeof this.Bcn) {
                case "function":
                    t.hr(this.Bcn());
                    break;
                case "string":
                    t.hr(this.Bcn);
            }
            const i = this.Acn ? this.Acn() : this.Rht.value;
            return t.pr(i).then((t) => (null === t ? null : (this.Rht && (this.Rht.value = t), t)));
        }
        p9e(t) {
            this.fnt.kun(this.Ucn, "longtextedittapped", this.GMt, t.clientX, t.clientY, t);
        }
        tnn(t) {
            t.which === tE.fO.o3
                ? (t.preventDefault(), t.stopPropagation(), this.YWe())
                : t.which === tE.fO.oO && (t.preventDefault(), t.stopPropagation(), this.HIi());
        }
        YWe() {
            if (!this.$cn) return;
            let t = this.$cn.value;
            this.inn(), this.Isn && this.Isn(t), (this.Isn = null), (this.Ocn = null);
        }
        HIi() {
            this.$cn && (this.inn(), this.Isn && this.Isn(null), (this.Isn = null), (this.Ocn = null));
        }
        inn() {
            this.$cn &&
                ((this.Rht.textContent = this.$cn.value),
                this.GMt.removeEventListener("scroll", this.Fcn, { passive: !0 }),
                this.$cn.removeEventListener("keydown", this.Vcn, !0),
                this.$cn.removeEventListener("blur", this.zcn),
                this.$cn.removeEventListener("UITap", tE.ti.int),
                this.$cn.removeEventListener("UIDoubleTap", tE.ti.int),
                tE.ti.Tz(this.$cn),
                (this.$cn = null));
        }
        Asn() {
            (this.$cn.style.left = `${this.Rht.offsetLeft}px`),
                (this.$cn.style.top = this.Rht.offsetTop - this.GMt.scrollTop + "px");
            let t = this.GMt.getBoundingClientRect(),
                i = this.$cn.getBoundingClientRect();
            (i.bottom > t.bottom || i.top < t.top || i.left < t.left || i.right > t.right) && this.HIi();
        }
    };
}
{
    const sE = self.t;
    sE.ti.Tj.Table.Jun = class extends sE.ti.Tj.Table.Tcn {
        constructor(t, i, e) {
            if ((sE.Gct(t), i && sE.qm(i, i.ownerDocument.defaultView.DocumentFragment), super(), (this.GMt = t), i)) {
                let t = i.childNodes;
                for (let i = 0, e = t.length; i < e; i++)
                    t[i].classList.add("table-column-content"),
                        sE.AOe(t[i]) && t[i].classList.add("table-column-input");
                this.GMt.appendChild(i);
            }
        }
        Vun() {
            return this.GMt.getAttribute("columnName");
        }
        Ut() {
            this.GMt = null;
        }
        gl() {}
        FO() {
            return this.GMt;
        }
    };
}
{
    const nE = self.t,
        rE = self.assert;
    nE.ti.Tj.Table.Zun = class extends nE.ti.Tj.Table.Tcn {
        constructor(t, i, e) {
            nE.Gct(t),
                super(),
                rE(nE.GUt(i) || nE.vwt(i), "unexpected type"),
                (this.fnt = e.table),
                (this.Ucn = e.rlt),
                (this.kge = nE.ti.gj("select", t, null, "table-column-content-select")),
                (this.Wcn = (t) => this.oct(t)),
                this.kge.addEventListener("change", this.Wcn),
                (this.Hcn = i),
                this.Kcn(),
                nE.Xl(e.selectedIndex) && -1 !== e.selectedIndex && (this.kge.selectedIndex = e.selectedIndex),
                (this.GMt = t);
        }
        Vun() {
            return this.GMt.getAttribute("columnName");
        }
        Ut() {
            this.kge.removeEventListener("change", this.Wcn),
                (this.Wcn = null),
                nE.ti.Tz(this.kge),
                (this.kge = null),
                (this.GMt = null),
                (this.Hcn = null),
                (this.fnt = null),
                (this.Ucn = null);
        }
        E_() {
            return this.kge.options[this.kge.selectedIndex].textContent;
        }
        kk() {
            return this.kge.value;
        }
        Zc() {
            const t = this.kge.selectedIndex;
            if (nE.GUt(this.Hcn)) {
                const i = this.Hcn()[t];
                if (nE.tet(i)) return null;
                if (nE.q$t(i)) return i.userData;
            }
            if (nE.vwt(this.Hcn)) {
                const i = this.Hcn[t];
                if (nE.tet(i)) return null;
                if (nE.q$t(i)) return i.userData;
            }
            return null;
        }
        gl() {
            const t = this.kge.selectedIndex;
            this.Hcn && this.kge && (this.kge.replaceChildren(), this.Kcn(), (this.kge.selectedIndex = t));
        }
        FO() {
            return this.kge;
        }
        Kcn() {
            if (nE.GUt(this.Hcn))
                for (const t of this.Hcn()) {
                    if (nE.tet(t)) {
                        nE.ti.gj("option", this.kge).textContent = t;
                    }
                    if (nE.q$t(t)) {
                        nE.vu(t.value), nE.vu(t.text);
                        const i = nE.ti.gj("option", this.kge);
                        (i.value = t.value), (i.textContent = t.text);
                    }
                }
            if (nE.vwt(this.Hcn))
                for (const t of this.Hcn) {
                    if (nE.tet(t)) {
                        nE.ti.gj("option", this.kge).textContent = t;
                    }
                    if (nE.q$t(t)) {
                        nE.vu(t.value), nE.vu(t.text);
                        const i = nE.ti.gj("option", this.kge);
                        (i.value = t.value), (i.textContent = t.text);
                    }
                }
        }
        oct(t) {
            this.fnt.kun(this.Ucn, "selectoptionchange", this.GMt, t.clientX, t.clientY, t);
        }
    };
}
{
    const hE = self.t,
        oE = self.assert;
    hE.ti.Tj.Table.Qun = class extends hE.ti.Tj.Table.Tcn {
        constructor(t, i, e) {
            hE.Gct(t), super();
            const s = typeof i;
            oE("function" === s || "boolean" === s, "unexpected type"),
                (this.fnt = e.table),
                (this.Ucn = e.rlt),
                (this.Rht = hE.ti.gj("input", t, null, "table-column-content")),
                (this.Rht.type = "checkbox"),
                (this.qcn = (t) => this.YLt(t)),
                this.Rht.addEventListener("change", this.qcn),
                (this.Xcn = "function" === s ? i : null),
                (this.Rht.checked = "function" === s ? !!this.Xcn() : !!i),
                (this.GMt = t);
        }
        Vun() {
            return this.GMt.getAttribute("columnName");
        }
        Ut() {
            this.Rht.removeEventListener("change", this.qcn),
                (this.qcn = null),
                hE.ti.Tz(this.Rht),
                (this.Rht = null),
                (this.GMt = null),
                (this.Xcn = null),
                (this.fnt = null),
                (this.Ucn = null);
        }
        gl() {
            this.Xcn && this.Rht && (this.Rht.checked = !!this.Xcn());
        }
        GHt(t) {
            this.Rht.checked = !!t;
        }
        kk() {
            return this.Rht.checked;
        }
        FO() {
            return this.Rht;
        }
        YLt(t) {
            this.fnt.kun(this.Ucn, "checkboxchange", this.GMt, t.clientX, t.clientY, t);
        }
    };
}
{
    const aE = self.t;
    aE.ti.Tj.jet = class extends aE.Event.aG {
        constructor(t) {
            super(),
                aE.Gct(t),
                (this.mht = aE.ti.gj("ui-close-button", t)),
                this.mht.setAttribute("title", self.lang("ui.controls.close-button.close-tooltip")),
                this.mht.setAttribute("aria-label", self.lang("ui.controls.close-button.close-tooltip")),
                this.mht.setAttribute("role", "button"),
                (this.e8e = null),
                self.app
                    .Mnt("close")
                    .out()
                    .then((t) => {
                        aE.gi(this) || this.Ycn(t);
                    }),
                (this.onclick = null),
                (this.mQ = !0),
                (this.Jcn = (t) => this.ICe(t)),
                this.mht.addEventListener("click", this.Jcn),
                (this.Qq = (t) => this.lz(t)),
                this.mht.addEventListener("pointerdown", this.Qq),
                (this.di = !1);
        }
        Ut() {
            (this.di = !0),
                aE.ti.Tz(this.e8e),
                (this.e8e = null),
                this.mht.removeEventListener("pointerdown", this.Qq),
                (this.Qq = null),
                this.mht.removeEventListener("click", this.Jcn),
                (this.Jcn = null),
                (this.onclick = null),
                aE.ti.Tz(this.mht),
                (this.mht = null),
                super.Ut();
        }
        Ycn(t) {
            this.di || ((this.e8e = t), this.e8e.setAttribute("role", "none"), this.mht.appendChild(this.e8e));
        }
        FO() {
            return this.mht;
        }
        ICe(t) {
            0 === t.button && this.mQ && (t.stopPropagation(), this.onclick && this.onclick());
        }
        lz(t) {
            t.stopPropagation();
        }
        qL(t) {
            (t = !!t),
                this.mQ !== t &&
                    ((this.mQ = t),
                    t
                        ? (this.mht.classList.remove("disabled"),
                          this.mht.setAttribute("title", self.lang("ui.controls.close-button.close-tooltip")),
                          this.mht.setAttribute("aria-disabled", "true"))
                        : (this.mht.classList.add("disabled"),
                          this.mht.removeAttribute("title"),
                          this.mht.removeAttribute("aria-disabled")));
        }
    };
}
{
    const lE = self.t;
    lE.ti.Tj.yZe = class extends lE.Event.aG {
        constructor(t) {
            super(),
                lE.Gct(t),
                (this.din = self.lang("ui.controls.menu-dots-button.options-tooltip")),
                (this.mht = lE.ti.gj("ui-menu-dots-button", t)),
                this.mht.setAttribute("title", this.din),
                this.mht.setAttribute("aria-label", this.din),
                (this.e8e = null),
                self.app
                    .Mnt("menu-dots")
                    .out()
                    .then((t) => {
                        lE.gi(this) || this.Ycn(t);
                    }),
                (this.onclick = null),
                (this.mQ = !0),
                (this.Qq = (t) => this.lz(t)),
                this.mht.addEventListener("pointerdown", this.Qq),
                (this.di = !1);
        }
        Ut() {
            (this.di = !0),
                lE.ti.Tz(this.e8e),
                (this.e8e = null),
                this.mht.removeEventListener("pointerdown", this.Qq),
                (this.Qq = null),
                (this.onclick = null),
                lE.ti.Tz(this.mht),
                (this.mht = null),
                super.Ut();
        }
        Ycn(t) {
            this.di || ((this.e8e = t), this.mht.appendChild(this.e8e));
        }
        FO() {
            return this.mht;
        }
        f6i(t) {
            lE.vu(t),
                (this.din = t),
                this.mht.setAttribute("title", this.din),
                this.mht.setAttribute("aria-label", this.din);
        }
        lz(t) {
            0 === t.button && this.mQ && (t.stopPropagation(), this.onclick && this.onclick());
        }
        qL(t) {
            (t = !!t),
                this.mQ !== t &&
                    ((this.mQ = t),
                    t
                        ? (this.mht.classList.remove("disabled"),
                          this.mht.setAttribute("title", this.din),
                          this.mht.setAttribute("aria-disabled", "true"))
                        : (this.mht.classList.add("disabled"),
                          this.mht.removeAttribute("title"),
                          this.mht.removeAttribute("aria-disabled")));
        }
    };
}
{
    const uE = self.t;
    uE.ti.Tj.bZe = class extends uE.Event.aG {
        constructor(t) {
            super(),
                uE.Gct(t),
                (this.mht = uE.ti.gj("ui-back-button")),
                t.insertBefore(this.mht, t.firstChild),
                this.mht.setAttribute("title", self.lang("ui.controls.back-button.back-tooltip")),
                this.mht.setAttribute("aria-label", self.lang("ui.controls.back-button.back-tooltip")),
                (this.e8e = null),
                self.app
                    .Mnt("back")
                    .out()
                    .then((t) => this.Ycn(t)),
                (this.onclick = null),
                (this.Qq = (t) => this.lz(t)),
                this.mht.addEventListener("pointerdown", this.Qq),
                (this.gai = !0),
                (this.di = !1);
        }
        Ut() {
            (this.di = !0),
                uE.ti.Tz(this.e8e),
                (this.e8e = null),
                this.mht.removeEventListener("pointerdown", this.Qq),
                (this.Qq = null),
                (this.onclick = null),
                uE.ti.Tz(this.mht),
                (this.mht = null),
                super.Ut();
        }
        Ycn(t) {
            this.di || ((this.e8e = t), this.mht.appendChild(this.e8e));
        }
        tO(t) {
            this.gai !== t && ((this.mht.style.visibility = t ? "visible" : "hidden"), (this.gai = t));
        }
        FO() {
            return this.mht;
        }
        lz(t) {
            0 === t.button && (t.stopPropagation(), this.onclick && this.onclick());
        }
    };
}
{
    const cE = self.t;
    cE.ti.Tj.hve = class extends cE.Event.aG {
        constructor(t) {
            cE.nOe(t, HTMLElement),
                super(),
                (this.mht = t),
                (this.Ebe = cE.m(
                    cE.Ha,
                    cE.Xa.Wa(this.mht, "keydown", (t) => this.Uj(t)),
                    cE.Xa.Wa(this.mht, "keypress", (t) => this.n6t(t)),
                    cE.Xa.Wa(this.mht, "paste", (t) => this.$j(t)),
                    cE.Xa.Wa(this.mht, "cut", (t) => this.Lj(t)),
                    cE.Xa.Wa(this.mht, "blur", (t) => this.F3t(t))
                )),
                (this.Ude = []),
                (this.Pde = []),
                (this.uli = null),
                (this.Zcn = new Map()),
                this.Zcn.set("delete", (t) => this.Qcn(t)),
                this.Zcn.set("backspace", (t) => this.tdn(t));
            const i = (t) => this.idn(t, this.Pde, this.Ude),
                e = (t) => this.idn(t, this.Ude, this.Pde);
            cE.fk.q9t
                ? (this.Zcn.set("cmd-shift-z", i), this.Zcn.set("cmd-y", i), this.Zcn.set("cmd-z", e))
                : (this.Zcn.set("ctrl-shift-z", i), this.Zcn.set("ctrl-y", i), this.Zcn.set("ctrl-z", e)),
                cE.ti.CT(this.mht, "contenteditable", !0);
        }
        Ut() {
            (this.mht = null),
                this.Ebe.Ua(),
                (this.Ebe = null),
                cE.yh(this.Ude),
                cE.yh(this.Pde),
                (this.Ude = null),
                (this.Pde = null),
                (this.uli = null),
                this.Zcn.clear(),
                (this.Zcn = null),
                super.Ut();
        }
        FO() {
            return this.mht;
        }
        In(t, i) {
            cE.vu(t), (i = !!i), this.mht.textContent !== t && (i || this.Lst(), (this.mht.textContent = t));
        }
        edn(t) {
            const i = [];
            return (
                cE.fk.q9t && t.metaKey && i.push("cmd"),
                t.ctrlKey && i.push("ctrl"),
                t.shiftKey && i.push("shift"),
                i.push(t.key.toLowerCase()),
                i.join("-")
            );
        }
        sdn() {
            return cE.qJt.Ive(this.mht);
        }
        ndn(t) {
            t && cE.qJt.BJt(this.mht, t.start, t.end);
        }
        Lst() {
            cE.yh(this.Pde);
            let t = this.mht.textContent,
                i = this.sdn();
            this.Ude.push(() => {
                const e = this.mht.textContent,
                    s = this.sdn();
                (this.mht.textContent = t),
                    this.ndn(i),
                    (t = e),
                    (i = s),
                    this.mht.dispatchEvent(new Event("modified"));
            });
        }
        F3t(t) {
            this.uli = null;
        }
        Uj(t) {
            const i = this.edn(t),
                e = this.Zcn.get(i);
            e && e(t);
        }
        n6t(t) {
            const i = this.sdn();
            if (!i) return;
            const e = this.uli,
                s = "Enter" === t.key ? "\n" : t.key;
            i.start === i.end
                ? ((e && "insert" === e.type && e.cursor.end === i.end) || this.Lst(),
                  (i.end = i.start = i.end + s.length),
                  (this.uli = { type: "insert", cursor: i }))
                : (this.Lst(), (i.end = i.start = i.start + s.length), (this.uli = { type: "insert", cursor: i }));
        }
        $j(t) {
            const i = this.sdn();
            if (!i) return;
            t.preventDefault();
            const { start: e, end: s } = i,
                n = t.clipboardData.getData("text"),
                r = this.mht.textContent,
                h = r.slice(0, e) + n + r.slice(s);
            this.In(h),
                (i.end = i.start = e + n.length),
                this.ndn(i),
                this.mht.dispatchEvent(new Event("modified")),
                (this.uli = { type: "paste", cursor: i });
        }
        Lj(t) {
            const i = this.sdn();
            i && (this.Lst(), (i.end = i.start), (this.uli = { type: "cut", cursor: i }));
        }
        Qcn(t) {
            const i = this.sdn();
            if (!i) return;
            const e = this.uli;
            i.start === i.end
                ? (e && "delete" === e.type && e.cursor.end === i.end) ||
                  (this.Lst(), (this.uli = { type: "delete", cursor: i }))
                : (this.Lst(), (this.uli = { type: "deleteRange", cursor: i }));
        }
        tdn(t) {
            const i = this.sdn();
            if (!i) return;
            const e = this.uli;
            i.start === i.end
                ? ((e && "delete" === e.type && e.cursor.end === i.end) || this.Lst(),
                  (i.end = i.start = i.end - 1),
                  (this.uli = { type: "delete", cursor: i }))
                : (this.Lst(), (i.end = i.start), (this.uli = { type: "deleteRange", cursor: i }));
        }
        idn(t, i, e) {
            t.preventDefault();
            const s = i.pop();
            s && (s(), e.push(s));
        }
    };
}
{
    const dE = self.t,
        fE = self.assert,
        pE = [{ opacity: "1" }, { opacity: "0" }],
        mE = [
            { transform: "scale(0.85)", opacity: "0" },
            { transform: "scale(1)", opacity: "1" },
        ],
        wE = [{ opacity: "0" }, { opacity: "1" }],
        gE = { duration: 100, easing: "ease-out" },
        yE = ["top-left", "top", "top-right", "left", "center", "right", "bottom-left", "bottom", "bottom-right"],
        bE = ["right", "left"],
        vE = 4,
        SE = { rdn: null, className: "", id: "" };
    let xE = null,
        ME = NaN;
    function EE(t) {
        xE && xE.GR(t);
    }
    dE.ti.LO = class extends dE.MV {
        constructor(t, i, e, s) {
            dE.Gct(t),
                dE.HI(i),
                dE.qm(e, dE.ti.LO.hdn),
                dE.Crt(s),
                super(),
                (s = Object.assign({}, SE, s)),
                (this.odn = t),
                (this.vbi = null),
                (this.nes = s.id),
                (this.adn = s.className),
                (this.ldn = s.rdn || null),
                (this.udn = !1),
                (this.mht = dE.ti.gj("ui-menu")),
                this.mht.setAttribute("role", "menu"),
                this.adn && (this.mht.className = this.adn),
                (this._ts = []),
                (this.Y0e = null),
                (this.cdn = []),
                (this.ddn = null),
                (this.ZJe = null),
                (this.QJe = !1),
                (this.bye = !1),
                (this.Zu = !1),
                (this.fdn = e),
                (this.h3e = !0),
                this.pdn(!1),
                (this.mdn = 0),
                (this.wdn = !1),
                (this.e5 = 0),
                (this.h5 = 0),
                (this.gdn = "right"),
                (this.HJe = null),
                (this.Mwi = dE.fk.ZP && window.matchMedia("(max-width: 500px), (max-height: 500px)").matches),
                (this.tZe = !1),
                (this.ydn = !1),
                (this.mZe = null),
                this.Mwi && this.mht.setAttribute("compact", ""),
                (this.C7i = (t) => this.DG(t)),
                this.mht.addEventListener("scroll", this.C7i, { passive: !0 }),
                this.mht.addEventListener("contextmenu", dE.ti.sue),
                (this.Djs = () => dE.ti.LO.xwi()),
                self.app.addEventListener("projectobjectdelete", this.Djs),
                (this.Fin = i || (this.Mwi ? self.app.bet() : self.app.Ent())),
                (this.di = !1);
        }
        Ut() {
            fE(!this.di, "already released"),
                this.bdn() && this.vdn() && this.tZe && dE.ti.jqe.Xrt(),
                self.app.removeEventListener("projectobjectdelete", this.Djs),
                (this.Djs = null),
                this.Sdn(),
                this.ZJe && (this.ZJe.finish(), (this.ZJe = null));
            for (let t of this._ts) t.CPt();
            dE.yh(this._ts);
            for (let t of this.cdn) dE.ti.Tz(t);
            dE.yh(this.cdn),
                (this.ddn = null),
                this.mht &&
                    (this.mht.removeEventListener("scroll", this.C7i),
                    (this.C7i = null),
                    this.mht.removeEventListener("contextmenu", dE.ti.sue),
                    dE.ti.Tz(this.mht),
                    (this.mht = null)),
                (this.Y0e = null),
                (this.ZJe = null),
                (this.odn = null),
                (this.fdn = null),
                (this.di = !0),
                dE.Ut(this);
        }
        gi() {
            return this.di;
        }
        FO() {
            return this.mht;
        }
        CF() {
            return this.mht.ownerDocument;
        }
        Az() {
            return this.CF().defaultView;
        }
        JD() {
            return this.nes;
        }
        xdn() {
            return this.adn;
        }
        Mdn() {
            return this.ddn || this.mht;
        }
        pps() {
            return this.Fin;
        }
        Edn() {
            return this.fdn;
        }
        Cdn() {
            if (isNaN(ME)) {
                let t = dE.ti.oJ("padding-top", { lJ: this.mht });
                if (!t.endsWith("px")) throw new Error("CSS style for menu padding-top must be in units of 'px'");
                ME = parseFloat(t) || 0;
            }
            return ME;
        }
        gu() {
            return this.Zu;
        }
        _dn() {
            return this.wdn;
        }
        DG(t) {
            this.wdn = !0;
        }
        Tdn() {
            this.wdn = !1;
        }
        Idn() {
            this.Tdn();
            for (let t of this._ts) {
                if (!t.Pdn()) continue;
                if (!t.Gdn()) continue;
                let i = t.Adn();
                i && i.Rdn().Idn();
            }
        }
        XNt() {
            return this._ts.length;
        }
        PW() {
            return !!this._ts.length;
        }
        xO(t, i, e, s) {
            "string" == typeof t && (t = self.app.kdn(t, this.Fin)),
                dE.qm(t, dE.ti.zrt),
                dE.vu(i),
                dE.kDt(e),
                dE.Crt(s),
                this.ydn || ((this.ydn = !0), this.Mwi && this.vdn() && this.Odn());
            let n = dE.m(dE.ti.LO.hdn, this, t, i, e, s);
            return this._ts.push(n), this.Ddn(), n;
        }
        YO() {
            let t = dE.m(dE.ti.LO.ihn, this);
            return this._ts.push(t), this.Ddn(), t;
        }
        kO(t, i, e, s) {
            "string" == typeof t && (t = self.app.kdn(t, this.Fin)),
                dE.qm(t, dE.ti.zrt),
                dE.vu(i),
                dE.Crt(e),
                dE.Crt(s);
            let n = this.xO(t, i, null, e);
            return n.Fdn(s), n.Adn();
        }
        BT() {
            if (!this.bdn()) {
                if (this.Ldn()) throw new Error("already in a group");
                (this.ddn = dE.ti.gj("div", this.FO(), null, "menuitemgroup")), this.cdn.push(this.ddn);
            }
        }
        MT() {
            if (!this.bdn()) {
                if (!this.Ldn()) throw new Error("not in a group");
                this.ddn = null;
            }
        }
        Bdn() {
            if (!this.Ldn()) throw new Error("not in a group");
            dE.ti.Tz(this.ddn), (this.ddn = null), this.cdn.pop();
        }
        Ldn() {
            return !!this.ddn;
        }
        Odn() {
            this.mZe = dE.HHe.BD(() => this.Xrt());
            const t = this.Ldn();
            t && this.Bdn(),
                this.xO(self.app.kdn("close", this.pps()), self.lang("common.close-menu"), dE.uC, {
                    id: "compact-mode-close-button",
                }),
                this.YO(),
                t && this.BT();
        }
        Udn(t) {
            dE.yp(t), fE(!this.mZe, "already set back stack entry"), (this.mZe = dE.HHe.BD(t));
        }
        Ddn() {
            null !== this.ldn && this._ts.length > this.ldn && (this.udn = !0);
        }
        XO(t, i, e) {
            if (
                (dE.wi(t),
                dE.wi(i),
                dE.HI(e),
                fE(!this.di, "menu was released"),
                fE(!this.Zu, "showing already active menu"),
                this.ddn)
            )
                throw new Error("group not finished");
            if (this.vdn()) {
                dE.ti.LO.xwi(), dE.ti.Tj.UK.xwi(), (xE = this);
                let e = new Promise((t) => (this.HJe = t));
                return (
                    this.Mwi && !dE.ti.ZSe.xz() && ((this.tZe = !0), dE.ti.jqe.eD(this.odn)),
                    this.Ndn(t, i),
                    this.jdn(),
                    this.vbi.addEventListener("pointerdown", dE.ti.LO.lz, !0),
                    this.vbi.addEventListener("keydown", dE.ti.LO.Uj),
                    this.vbi.defaultView.addEventListener("resize", dE.ti.LO.xwi),
                    this.vbi.defaultView.addEventListener("unload", dE.ti.LO.xwi),
                    this.vbi.addEventListener("pointermove", EE),
                    !this.udn &&
                        this.mht.scrollHeight <= this.mht.offsetHeight &&
                        this.vbi.addEventListener("wheel", dE.ti.LO.$dn, !0),
                    dE.Xr || this.vbi.defaultView.addEventListener("blur", dE.ti.LO.xwi),
                    e
                );
            }
            this.zdn() &&
                (this.Vdn() ? this.Edn().Rdn()._dn() && this.Ndn(t, i, e) : this.Ndn(t, i, e),
                this.jdn(),
                this.mht.scrollHeight > this.mht.offsetHeight &&
                    this.mht.ownerDocument.removeEventListener("wheel", dE.ti.LO.$dn, !0));
        }
        Yue(t = "top-left", i = 0, e = 0, s = "right") {
            if ((dE.vu(t), dE.wi(i), dE.wi(e), dE.vu(s), !yE.includes(t))) throw new Error("invalid alignment");
            if (!bE.includes(s)) throw new Error("invalid preferred expand direction");
            this.gdn = s;
            const n = this.odn.getBoundingClientRect();
            switch (t) {
                case "top-left":
                    return this.XO(n.left + i, n.top + e);
                case "top":
                    return this.XO(n.left + n.width / 2 + i, n.top + e);
                case "top-right":
                    return this.XO(n.right + i, n.top + e);
                case "left":
                    return this.XO(n.left + i, n.top + n.height / 2 + e);
                case "center":
                    return this.XO(n.left + n.width / 2 + i, n.top + n.height / 2 + e);
                case "right":
                    return this.XO(n.right + i, n.top + n.height / 2 + e);
                case "bottom-left":
                    return this.XO(n.left + i, n.bottom + e);
                case "bottom":
                    return this.XO(n.left + n.width / 2 + i, n.bottom + e);
                case "bottom-right":
                    return this.XO(n.right + i, n.bottom + e);
            }
        }
        Xrt(t) {
            (t || (!this.bye && !this.Wdn() && this.Zu)) &&
                ((this.Zu = !1),
                this.Hdn(),
                this.mZe && (this.mZe.Ut(), (this.mZe = null)),
                this.vdn() &&
                    (xE === this && (xE = null),
                    this.tZe && dE.ti.jqe.Xrt(),
                    this.vbi &&
                        (this.vbi.removeEventListener("pointerdown", dE.ti.LO.lz, !0),
                        this.vbi.removeEventListener("keydown", dE.ti.LO.Uj),
                        this.vbi.removeEventListener("wheel", dE.ti.LO.$dn, !0),
                        this.vbi.defaultView.removeEventListener("resize", dE.ti.LO.xwi),
                        this.vbi.defaultView.removeEventListener("unload", dE.ti.LO.xwi),
                        this.vbi.removeEventListener("pointermove", EE),
                        dE.Xr || this.vbi.defaultView.removeEventListener("blur", dE.ti.LO.xwi)),
                    this.Sdn()),
                (this.vbi = null),
                this.Kdn());
        }
        Sdn() {
            this.HJe && (this.HJe(), (this.HJe = null));
        }
        uF(t, i) {
            if ((dE.wi(t), dE.wi(i), fE(!this.di, "menu was released"), this.bye || !this.Zu || this.Wdn())) return !1;
            let e = this.Y0e;
            return e ? t >= e.left && i >= e.top && t < e.right && i < e.bottom : void 0;
        }
        Ndn(t, i, e) {
            if (
                ((this.vbi = this.odn.ownerDocument),
                this.Mwi ||
                    ((this.mht.style.left = "0px"),
                    (this.mht.style.top = "0px"),
                    (this.mht.style.width = ""),
                    (this.mht.style.height = "")),
                !this.Vdn())
            ) {
                let t = this.vbi.body;
                dE.ti.ZSe.xz() && (t = dE.ti.ZSe.QSe()), t.appendChild(this.mht);
                let i = dE.qfi(this.odn, "dialog");
                if (i && !dE.ti.ZSe.xz()) {
                    dE.ti.Tz(this.mht), i.appendChild(this.mht);
                    let t = dE.ti.Ze.UZe(i);
                    t && !t.lBi() && ((this.e5 = t.Hgi()), (this.h5 = t.Jgi()));
                }
            }
            if (this.Mwi) return void (this.Y0e = this.mht.getBoundingClientRect());
            let s = this.mht.getBoundingClientRect(),
                n = s.right - s.left,
                r = s.bottom - s.top;
            if (this.udn && this._ts.length) {
                let t = this._ts[this.ldn - 1].qdn();
                (r = t.top - s.top),
                    (this.mht.style.maxHeight = t.top - s.top + "px"),
                    (this.mht.style.overflowY = "scroll");
            }
            let h = "",
                o = "",
                a = this.vbi.defaultView.innerWidth,
                l = this.vbi.defaultView.innerHeight,
                u = 0;
            if (this.fdn) {
                let t = this.fdn.qdn();
                u = t.right - t.left;
            }
            const c = t - (n + u) >= 0;
            if (!(t + n + vE <= a) || (c && "right" !== this.gdn))
                if (c) (t -= n + u), (h = "100%");
                else {
                    t - u > a - t ? ((t = 0), dE.fk.ZP && (i = e), (h = "100%")) : ((t = a - n), (h = "0%"));
                }
            else h = "0%";
            let d = "number" == typeof e ? e : i;
            i + r + vE <= l
                ? (o = "0%")
                : d - r >= 0
                  ? ((i = d - r), (o = "100%"))
                  : ((o = (100 * i) / l + "%"), (i = 0), (this.mht.style.height = Math.min(r, l - 5) + "px")),
                (this.mht.style.transformOrigin = `${h} ${o}`);
            const f = dE.j1t(t - this.e5),
                p = dE.j1t(i - this.h5);
            (this.mht.style.left = `${f}px`),
                (this.mht.style.top = `${p}px`),
                "DIALOG" === this.Xdn().tagName && (this.mht.style.width = `${n}px`);
        }
        jdn() {
            fE(!this.di, "menu was released"),
                fE(!this.QJe, "already fading in"),
                this.bye &&
                    this.ZJe &&
                    ((this.bye = !1), (this.ZJe.onfinish = null), this.ZJe.finish(), (this.ZJe = null)),
                (this.QJe = !0),
                (this.Zu = !0),
                this.Wdn() ? (this.pdn(!0), this.v5e(this.Mwi ? wE : mE, gE)) : this.rQe();
        }
        Kdn() {
            fE(!this.bye, "already animating out"),
                fE(xE !== this, "should not be current menu"),
                dE.gi(this) ||
                    this.di ||
                    ((this.bye = !0),
                    this.QJe && ((this.QJe = !1), this.ZJe)
                        ? this.ZJe.reverse()
                        : this.Ydn()
                          ? this.v5e(pE, gE)
                          : this.rQe());
        }
        v5e(t, i) {
            self.app.Cbt()
                ? (fE(!this.ZJe, "already animating"),
                  (this.ZJe = this.mht.animate(t, i)),
                  (this.ZJe.onfinish = (t) => this.rQe()))
                : this.rQe();
        }
        rQe() {
            if (dE.gi(this) || this.di) return;
            let t = !1;
            this.bye &&
                (fE(xE !== this, "should not be current menu"), this.vdn() && (t = !0), this.zdn() && this.pdn(!1)),
                this.QJe && (this.Y0e = this.mht.getBoundingClientRect()),
                (this.QJe = !1),
                (this.bye = !1),
                (this.ZJe = null),
                t && this.Ut();
        }
        Jdn(t) {
            dE.qm(t, dE.ti.LO.hdn);
            for (let i of this._ts) i.Pit(i === t);
        }
        Hdn() {
            for (let t of this._ts) {
                if (!t.Pdn()) continue;
                let i = t.Adn();
                i && i.Rdn().Xrt();
            }
        }
        Zdn() {
            for (let t of this._ts) {
                if (!t.Pdn()) continue;
                let i = t.Adn();
                i && i.Rdn().Ut();
            }
        }
        Qdn(t, i, e = !1) {
            for (let s of this._ts) {
                if (!s.Pdn()) continue;
                let n = s.Adn();
                if (n) {
                    if (n.tfn().uF(t, i, e)) return !0;
                    if (n.Rdn().ifn(t, i, e)) return !0;
                }
            }
            return !1;
        }
        ifn(t, i, e = !1) {
            return this.uF(t, i, e) || this.Qdn(t, i, e);
        }
        pdn(t) {
            if (
                ((t = !!t),
                this.h3e !== t &&
                    ((this.h3e = t), this.mht.setAttribute("visible", this.h3e ? "true" : "false"), !this.h3e))
            )
                for (let t of this._ts) t.Pit(!1);
        }
        efn() {
            return this.bye;
        }
        mft() {
            return this.Zu;
        }
        Wdn() {
            return !this.h3e;
        }
        Ydn() {
            return this.h3e;
        }
        zdn() {
            return !!this.fdn;
        }
        vdn() {
            return !this.fdn;
        }
        bdn() {
            return this.Mwi;
        }
        sfn(t) {
            this.Mwi && ((this.Zu = !!t), this.pdn(this.Zu));
        }
        nfn() {
            return this.mht.scrollHeight > this.mht.clientHeight;
        }
        Vdn() {
            return !!this.mht.parentNode;
        }
        Xdn() {
            return this.mht.parentNode;
        }
        static EQ() {
            return !!xE;
        }
        static xwi(t) {
            xE &&
                (!t || ("blur" !== t.type && "unload" !== t.type)
                    ? (fE(!xE.gi(), "menu was released"), xE.Xrt(xE.bdn()), (xE = null))
                    : dE.ti.LO.aQe());
        }
        static aQe() {
            xE && (fE(!xE.gi(), "menu was released"), xE.Zdn(), xE.Ut(), (xE = null));
        }
        static PKi(t) {
            return dE.Gct(t), dE.ykt(t, ["ui-menu"]);
        }
        static cTi(t, i, e) {
            return !!xE && (fE(!xE.gi(), "menu was released"), (!e || xE.Az() === e) && xE.ifn(t, i));
        }
        static lz(t) {
            xE &&
                (fE(!xE.gi(), "menu was released"),
                xE.Idn(),
                xE.ifn(t.clientX, t.clientY) ||
                    (xE.bdn() && (t.stopPropagation(), t.preventDefault()), dE.ti.LO.xwi()));
        }
        GR(t) {
            if (this.gi()) return;
            const i = dE.ti.LO.rfn(this, []).reverse();
            let e = !1,
                s = !1;
            for (const n of i) {
                for (let i of n._ts) {
                    if (!i.Pdn()) continue;
                    i.GR(t);
                    let n = i.Adn();
                    n && n.hfn(t), s || (n && n.PW() && n.GR(t) && (e = !0));
                }
                e && (s = !0);
            }
        }
        static rfn(t, i) {
            dE.Et(t, dE.ti.LO), dE._T(i), i.push(t);
            for (const e of t._ts) {
                if (!e.Pdn() || !e.Gdn()) continue;
                const t = e.Adn();
                t.PW() && this.rfn(t.Rdn(), i);
            }
            return i;
        }
        static Uj(t) {
            xE && t.which === dE.fO.oO && dE.ti.LO.xwi();
        }
        static $dn(t) {
            dE.ti.LO.EQ() && (t.preventDefault(), t.stopPropagation());
        }
        ofn(t) {
            return dE.ti.afn.ofn(this.JD(), t);
        }
    };
}
{
    const CE = self.t,
        _E = 16,
        TE = 25,
        IE = { GO: !1, bold: !1, pU: "", Wue: !1, lfn: !1, id: "" };
    let PE = 0;
    CE.ti.LO.hdn = class extends CE.MV {
        constructor(t, i, e, s, n) {
            if (
                (CE.Et(t, CE.ti.LO),
                CE.qm(i, CE.ti.zrt),
                CE.vu(e),
                CE.kDt(s),
                CE.Crt(n),
                (n = Object.assign({}, IE, n)),
                CE.vu(n.pU),
                super(),
                (this.ufn = t),
                (this.cfn = null),
                (this.mht = CE.ti.gj("ui-menuitem", this.ufn.Mdn())),
                this.mht.setAttribute("role", "menuitem"),
                (this.Y0e = null),
                (this.dvt = !1),
                (this.nes = n.id),
                (this.mQ = this.lB().ofn(this.nes)),
                (this.j9i = 0),
                (this.R9i = 0),
                (this.dfn = !1),
                (this.ffn = !0),
                (this.iut = null),
                (this.e8e = null),
                i)
            ) {
                this.iut = CE.m(CE.ti.met, { icon: i, D6e: n.Wue }, this.mht);
                let t = i.wCe();
                t &&
                    t.out().then((t) => {
                        this.iut && (this.iut.K6e(t), (this.iut = null), (this.e8e = t));
                    });
            } else this.iut = CE.m(CE.ti.met, this.ufn.pps(), this.mht);
            (this.pfn = CE.ti.gj("span", this.mht, null, "menu-item-text")),
                (this.pfn.textContent = e),
                (this.O5s = s),
                (this.mfn = !!n.GO),
                (this.wfn = !!n.lfn),
                n.bold && this.mht.setAttribute("bold", ""),
                n.pU && this.mht.setAttribute("title", n.pU),
                this.mQ || this.mht.setAttribute("disabled", ""),
                (this.Qq = (t) => this.lz(t)),
                this.mht.addEventListener("pointerdown", this.Qq),
                (this.OR = (t) => this.CR(t)),
                this.mht.addEventListener("pointerup", this.OR, !0),
                (this.wtn = (t) => this.n0(t)),
                this.mht.addEventListener("pointercancel", this.wtn, !0),
                (this.gfn = null),
                (this.yfn = new Promise((t, i) => {
                    this.gfn = t;
                })),
                (this.bfn = !1),
                (this.vfn = (t) => this.fz(t)),
                this.mht.addEventListener("contextmenu", this.vfn, !0),
                this.mQ && CE.ti.afn.Sfn() && "help" !== this.nes && this.mht.classList.add("highlight");
        }
        CPt() {
            this.cfn && (this.cfn.Ut(), (this.cfn = null)),
                this.iut && (this.iut.Ut(), (this.iut = null)),
                CE.ti.Tz(this.e8e),
                (this.e8e = null),
                this.pfn && (CE.ti.Tz(this.pfn), (this.pfn = null)),
                this.mht &&
                    (this.mht.removeEventListener("contextmenu", this.vfn, !0),
                    this.mht.removeEventListener("pointerup", this.OR, !0),
                    (this.OR = null),
                    this.mht.removeEventListener("pointerdown", this.Qq),
                    (this.Qq = null),
                    CE.ti.Tz(this.mht),
                    (this.mht = null)),
                (this.gfn = null),
                (this.yfn = null),
                (this.ufn = null),
                (this.O5s = null),
                (this.Y0e = null),
                CE.Ut(this);
        }
        FO() {
            return this.mht;
        }
        Adn() {
            return this.cfn;
        }
        Rdn() {
            return this.ufn;
        }
        JD() {
            return this.nes;
        }
        lB() {
            let t = this.Rdn();
            do {
                if (t.vdn()) return t;
                t = t.Edn().Rdn();
            } while (t);
            throw new Error("unable to get root menu");
        }
        Pdn() {
            return !0;
        }
        Gdn() {
            return !!this.Adn();
        }
        qdn(t) {
            return (t = !!t)
                ? ((this.Y0e = this.mht.getBoundingClientRect()), this.Y0e)
                : (this.Y0e || (this.Y0e = this.mht.getBoundingClientRect()), this.Y0e);
        }
        Fdn(t) {
            CE.Crt(t),
                this.cfn ||
                    (self.assert(!this.O5s, "submenu items should not have a callback function"),
                    (t = Object.assign({ className: this.ufn.xdn() }, t)),
                    (this.cfn = CE.m(CE.ti.LO.xfn, this, this.ufn.pps(), t)));
        }
        Mfn(t) {}
        Efn(t) {}
        lz(t) {
            this.ufn.gu() &&
                this.mQ &&
                (t.button !== CE.sQ.s2t || this.lB().bdn() ? (this.bfn = !1) : (this.bfn = !0),
                this.ufn.nfn() || (t.preventDefault(), t.stopPropagation()),
                (this.j9i = t.clientX),
                (this.R9i = t.clientY),
                "mouse" !== t.pointerType && this.ufn.Jdn(this));
        }
        GR(t) {
            if (CE.gi(this)) return;
            if (this.lB().bdn()) return;
            let i = this.ffn || this.ufn._dn(),
                e = this.uF(t.clientX, t.clientY, i);
            !this.dfn && e
                ? ((this.dfn = !0), (this.ffn = !1), this.Mfn(t))
                : this.dfn && !e && ((this.dfn = !1), this.Efn(t));
        }
        CR(t) {
            if (!this.ufn.gu() || !this.mQ) return;
            if ((t.preventDefault(), t.button === CE.sQ.iQ)) return;
            const i = "mouse" !== t.pointerType;
            if (i) {
                let i = this.Rdn();
                if (!this.uF(t.clientX, t.clientY)) return void i.Jdn(null);
                if (i._dn()) return void i.Jdn(null);
            }
            if (this.Gdn()) return void ((this.cfn.gu() && !i) || this.ufn.Hdn());
            let e = t.clientX,
                s = t.clientY;
            if (CE.gt(this.j9i, this.R9i, e, s) >= TE) return void this.ufn.Jdn(null);
            const n = this.O5s;
            n &&
                (this.mfn
                    ? (n(), CE.ti.afn.Cfn("menuitemchosen", this))
                    : (PE++,
                      PE > 1 ||
                          (window.addEventListener("keydown", CE.ti.sue, !0),
                          window.addEventListener("keyup", CE.ti.sue, !0),
                          window.addEventListener("keypress", CE.ti.sue, !0)),
                      window.setTimeout(() => {
                          PE--,
                              PE > 0 ||
                                  (window.removeEventListener("keydown", CE.ti.sue, !0),
                                  window.removeEventListener("keyup", CE.ti.sue, !0),
                                  window.removeEventListener("keypress", CE.ti.sue, !0)),
                              n(),
                              CE.ti.afn.Cfn("menuitemchosen", this);
                      }, _E))),
                this.wfn ||
                    (this.bfn
                        ? this.yfn.then(() => {
                              CE.ti.LO.xwi();
                          })
                        : CE.ti.LO.xwi());
        }
        n0(t) {
            (this.dfn = !1), (this.bfn = !1), this.ufn.Jdn(null);
        }
        fz(t) {
            t.preventDefault(), t.stopPropagation(), this.gfn();
        }
        uF(t, i, e) {
            CE.wi(t), CE.wi(i);
            let s = this.Rdn();
            return (
                !(s.efn() || !s.mft() || s.Wdn()) &&
                ((e = !!e),
                (this.Y0e = this.qdn(e)),
                t >= this.Y0e.left && i >= this.Y0e.top && t < this.Y0e.right && i < this.Y0e.bottom)
            );
        }
        Pit(t) {
            (t = !!t) && !this.dvt
                ? this.mht.setAttribute("selected", "")
                : !t && this.dvt && this.mht.removeAttribute("selected"),
                (this.dvt = t);
        }
    };
}
{
    const GE = self.t;
    GE.ti.LO.ihn = class extends GE.MV {
        constructor(t) {
            GE.Et(t, GE.ti.LO),
                super(),
                (this.ufn = t),
                (this.mht = GE.ti.gj("ui-menuseparator", this.ufn.FO())),
                this.mht.setAttribute("role", "separator");
        }
        CPt() {
            GE.ti.Tz(this.mht), (this.mht = null), (this.ufn = null), GE.Ut(this);
        }
        Pdn() {
            return !1;
        }
        Pit(t) {}
    };
}
{
    const AE = self.t,
        RE = 300,
        kE = 500;
    AE.ti.LO.xfn = class extends AE.MV {
        constructor(t, i, e) {
            AE.Et(t, AE.ti.LO.hdn),
                AE.HI(i),
                AE.Crt(e),
                super(),
                (this._fn = t),
                (this.Fin = i),
                (this.odn = this._fn.FO()),
                (this.iut = null),
                (this.e8e = null),
                (this.Tfn = !1),
                (this.Ifn = !1),
                (this.Pfn = !1),
                (this.Gfn = !1),
                (this.Afn = !1),
                (this.Rfn = !0),
                (this.kfn = -1),
                (this.Ofn = -1),
                (this.k5s = 0),
                (this.mFe = 0),
                (this.wFe = 0),
                this.odn.setAttribute("sub-menu", "empty"),
                (this.Dfn = -1),
                (this._ln = -1),
                (this.OR = (t) => this.CR(t)),
                (this.wtn = (t) => this.n0(t)),
                (this.Qq = (t) => this.lz(t)),
                (this.mZe = null),
                (this.ufn = AE.m(AE.ti.LO, this.odn, this.Fin, this._fn, e));
        }
        Ut() {
            this.Ffn(),
                this.Lfn(),
                this.odn.removeEventListener("pointerup", this.OR),
                this.odn.removeEventListener("pointercancel", this.wtn),
                this.odn.removeEventListener("pointerdown", this.Qq),
                this.odn.removeEventListener("contextmenu", AE.ti.sue, !0),
                this.iut && (this.iut.Ut(), (this.iut = null)),
                AE.ti.Tz(this.e8e),
                (this.e8e = null),
                this.ufn && !AE.gi(this.ufn) && this.ufn.FO() && this.ufn.Ut(),
                (this.ufn = null),
                (this.OR = null),
                (this.wtn = null),
                (this.Qq = null),
                (this.odn = null),
                (this._fn = null),
                AE.Ut(this);
        }
        Rdn() {
            return this.ufn;
        }
        tfn() {
            return this._fn;
        }
        PW() {
            return this.Tfn;
        }
        lB() {
            let t = this._fn.Rdn();
            do {
                if (t.vdn()) return t;
                t = t.Edn().Rdn();
            } while (t);
            throw new Error("unable to get root menu");
        }
        xO(t, i, e, s) {
            return this.Bfn(), this.Rdn().xO(t, i, e, s);
        }
        YO() {
            return this.Bfn(), this.Rdn().YO();
        }
        kO(t, i, e) {
            return this.Bfn(), this.Rdn().kO(t, i);
        }
        BT() {
            this.Rdn().BT();
        }
        MT() {
            this.Rdn().MT();
        }
        Ldn() {
            this.Rdn().Ldn();
        }
        lz(t) {
            (this.Ifn = !1), (this.Pfn = !1);
        }
        n0(t) {
            (this.Gfn = !1), (this.Afn = !1), this.Ffn(), this.Lfn(), this._fn.Rdn().Jdn(null);
        }
        CR(t) {
            const i = "mouse" !== t.pointerType;
            if (!((i && this.ufn.efn()) || t.button === AE.sQ.iQ)) {
                if (i) {
                    let i = this._fn.Rdn();
                    if (!this._fn.uF(t.clientX, t.clientY)) return void i.Jdn(null);
                    if (this.lB().bdn() && (this.Ifn || this.Pfn)) return void i.Jdn(null);
                    if (i._dn()) return void i.Jdn(null);
                }
                this.Ufn();
            }
        }
        Mfn(t) {
            this.Ffn(),
                this.Lfn(),
                (this.Dfn = setTimeout(() => {
                    this.Nfn();
                }, RE));
        }
        Efn() {
            (this.Gfn = !1),
                (this.Afn = !1),
                this.Ffn(),
                this.Lfn(),
                (this._ln = setTimeout(() => {
                    this.jfn(this.kfn, this.Ofn);
                }, kE));
        }
        GR(t) {
            if (AE.gi(this)) return;
            let i = this.Rfn || !this.ufn._dn(),
                e = !1,
                s = this._fn.uF(this.kfn, this.Ofn, i);
            return (
                s && (e = s),
                !this.Gfn && s
                    ? ((this.Gfn = !0), (this.Rfn = !1), this.lB().bdn() || this.Mfn(t))
                    : this.Gfn && !s && ((this.Gfn = !1), this.lB().bdn() ? (this.Ifn = !0) : this.Efn(t)),
                (s = this.ufn.uF(this.kfn, this.Ofn)),
                s && (e = s),
                !this.Afn && s
                    ? (this.Afn = !0)
                    : this.Afn && !s && ((this.Afn = !1), this.lB().bdn() ? (this.Pfn = !0) : this.Efn(t)),
                e
            );
        }
        hfn(t) {
            (this.kfn = t.clientX), (this.Ofn = t.clientY);
        }
        Ffn() {
            -1 !== this.Dfn && (clearTimeout(this.Dfn), (this.Dfn = -1));
        }
        Lfn() {
            -1 !== this._ln && (clearTimeout(this._ln), (this._ln = -1));
        }
        gu() {
            return this.Rdn().gu();
        }
        Ufn() {
            this._fn.Rdn().sfn(!1);
            let t = this._fn.Rdn();
            const i = this.lB().bdn(),
                e = t.efn(),
                s = t.Wdn(),
                n = t.gu();
            if (!i && (e || s || !n)) return;
            let r = this.Rdn();
            if (!r.gu()) {
                if ((this.Ffn(), this.Lfn(), 0 === this.k5s && 0 === this.mFe && 0 === this.wFe)) {
                    let i = t.Cdn(),
                        e = this._fn.qdn(!0);
                    (this.k5s = e.left + e.width), (this.mFe = e.top - i), (this.wFe = e.bottom + i);
                } else if (t._dn()) {
                    let i = t.Cdn(),
                        e = this._fn.qdn(!0);
                    (this.k5s = e.left + e.width), (this.mFe = e.top - i), (this.wFe = e.bottom + i);
                }
                r.XO(this.k5s, this.mFe, this.wFe), i && r.Udn(() => this.$fn());
            }
        }
        Nfn() {
            (this.Dfn = -1), this.Rdn().gu() || (this._fn.Rdn().Hdn(), this.Ufn());
        }
        jfn(t, i) {
            AE.wi(t), AE.wi(i), (this._ln = -1);
            const e = this.Rdn();
            e.gu() && !e.ifn(t, i) && e.Xrt();
        }
        Bfn() {
            if (!this.Tfn) {
                this.odn.setAttribute("sub-menu", "full");
                let t = self.app.ht("menu-submenu");
                this.iut = AE.m(AE.ti.met, t, this.odn);
                let i = t.wCe();
                i &&
                    i.out().then((t) => {
                        this.iut && (this.iut.K6e(t), (this.iut = null), (this.e8e = t));
                    }),
                    this.odn.addEventListener("pointerup", this.OR),
                    this.odn.addEventListener("pointercancel", this.wtn),
                    this.odn.addEventListener("pointerdown", this.Qq),
                    this.odn.addEventListener("contextmenu", AE.ti.sue, !0),
                    (this.Tfn = !0);
                const e = this.lB();
                if (e.bdn()) {
                    const t = this.Rdn(),
                        i = t.Ldn();
                    i && t.Bdn(),
                        t.xO(self.app.kdn("back", e.pps()), self.lang("common.back"), () => this.$fn(), {
                            lfn: !0,
                            id: "compact-mode-back-button",
                        }),
                        t.YO(),
                        i && t.BT();
                }
            }
        }
        $fn() {
            this._fn && (this._fn.Rdn().sfn(!0), this.ufn.Xrt());
        }
    };
}
{
    const OE = self.t,
        DE = OE.m(OE.Event.aG),
        FE = new Map();
    OE.ti.afn = class {
        constructor() {
            throw new TypeError("static class can't be instantiated");
        }
        static Cfn(t, i) {
            OE.vu(t), OE.qm(i, OE.ti.LO.hdn);
            const e = new OE.Event(t);
            (e.zfn = i), this.dispatchEvent(e);
        }
        static addEventListener(t, i, e) {
            DE.addEventListener(t, i, e);
        }
        static removeEventListener(t, i, e) {
            DE.removeEventListener(t, i, e);
        }
        static dispatchEvent(t) {
            return DE.dispatchEvent(t);
        }
        static Vfn(t) {
            return OE.ti.afn.Wfn(t, "menuitemchosen");
        }
        static Wfn(t, i) {
            return (
                OE._T(t),
                OE.vu(i),
                new Promise((e) => {
                    const s = (n) => {
                        t.includes(n.zfn.JD()) && (OE.ti.afn.removeEventListener(i, s), e(n.zfn));
                    };
                    OE.ti.afn.addEventListener(i, s);
                })
            );
        }
        static Hfn(t) {
            OE._T(t), FE.clear();
            for (const [i, e] of t) OE.vu(i), OE._T(e), FE.set(i, new Set(e));
        }
        static Kfn() {
            FE.clear();
        }
        static ofn(t, i) {
            if (0 === FE.size) return !0;
            if ("compact-mode-close-button" === i || "compact-mode-back-button" === i) return !0;
            const e = FE.get(t);
            return !!e && e.has(i);
        }
        static Sfn() {
            return FE.size > 0;
        }
    };
}
{
    const LE = self.t,
        BE = self.assert;
    function UE(t, i) {
        return !!t == !!i;
    }
    LE.ti.qfn = class {
        constructor(...t) {
            if (t.length < 2) throw new Error("missing arguments");
            (this.O5s = null),
                (this.eut = ""),
                (this.Xfn = t.at(-2)),
                (this.Yfn = !1),
                (this.Jfn = !1),
                (this.Zfn = !1),
                (this.$Di = !1),
                (this.Qfn = !1),
                (this.tpn = !1),
                (this.ipn = !1);
            let i = [];
            for (let e = 0, s = t.length - 2; e < s; ++e) {
                let s = t[e];
                if ((LE.vu(s), i.includes(s))) throw new Error("duplicate modifier");
                switch ((i.push(s), s)) {
                    case "ctrl":
                        this.Yfn = !0;
                        break;
                    case "shift":
                        this.Jfn = !0;
                        break;
                    case "alt":
                        this.Zfn = !0;
                        break;
                    case "meta":
                        this.$Di = !0;
                        break;
                    case "alt-gr":
                        this.Qfn = !0;
                        break;
                    default:
                        throw new Error("invalid modifier");
                }
            }
            let e = t.at(-1);
            if ("function" == typeof e) this.O5s = e;
            else {
                if ("string" != typeof e) throw new TypeError("expected function or string");
                this.eut = e;
            }
            BE(LE.Xl(this.Xfn) || LE.tet(this.Xfn), "key must be a number or a string");
        }
        epn() {
            return (this.tpn = !0), this;
        }
        spn() {
            return this.tpn;
        }
        npn() {
            return (this.ipn = !0), this;
        }
        rpn() {
            return this.ipn;
        }
        Wns(t) {
            return this.Qfn && t.getModifierState("AltGraph")
                ? (BE(!this.Yfn, "alt-gr can not be pressed together with ctrl"),
                  BE(!this.Zfn, "alt-gr can not be pressed together with alt"),
                  !!LE.fO.Tdt(t.key, this.Xfn) && UE(t.shiftKey, this.Jfn) && UE(t.metaKey, this.$Di))
                : !!LE.fO.Tdt(t.which, this.Xfn) &&
                      UE(t.ctrlKey, this.Yfn) &&
                      UE(t.shiftKey, this.Jfn) &&
                      UE(t.altKey, this.Zfn) &&
                      UE(t.metaKey, this.$Di);
        }
        hpn(t) {
            if (this.O5s) return this.O5s(t), !0;
            {
                let t = LE.ti.cE.Wq();
                return !!t && t.Rj(this.eut);
            }
        }
    };
}
{
    const NE = self.t;
    NE.ti.opn = class {
        constructor(t) {
            (this.ZAe = t),
                (this.apn = []),
                (this.lpn = window.C3_IsPopupWindow),
                (this.upn = !0),
                window.addEventListener("keydown", (t) => this.Uj(t, !1)),
                this.lpn &&
                    (window.addEventListener("keyup", (t) => this.PR(t)),
                    window.addEventListener("keypress", (t) => this.n6t(t))),
                t.addEventListener("external-keyboard-shortcut", (t) => this.Uj(t._ot, !0));
        }
        cpn(t) {
            NE.HZ(t, NE.ti.qfn), NE.Uc(this.apn, t);
        }
        dpn() {
            this.upn = !1;
        }
        Uj(t, i) {
            const e = NE.Put();
            for (const s of this.apn)
                if ((!e || s.spn()) && (!self.app.Skt() || s.rpn()) && s.Wns(t)) {
                    if (this.lpn)
                        t.preventDefault(),
                            window.opener.postMessage(
                                {
                                    type: "popup-keyboard-shortcut",
                                    event: {
                                        key: t.key,
                                        keyCode: t.keyCode,
                                        keyIdentifier: t.keyIdentifier,
                                        keyLocation: t.keyLocation,
                                        code: t.code,
                                        location: t.location,
                                        char: t.char,
                                        charCode: t.charCode,
                                        which: t.which,
                                        ctrlKey: t.ctrlKey,
                                        shiftKey: t.shiftKey,
                                        altKey: t.altKey,
                                        metaKey: t.metaKey,
                                        repeat: t.repeat,
                                        isComposing: t.isComposing,
                                    },
                                },
                                location.origin
                            );
                    else {
                        this.upn = !0;
                        const e = s.hpn(this.ZAe);
                        i && (t.JYe = e), NE.ti.LO.xwi(), e && !i && this.upn && t.preventDefault();
                    }
                    return;
                }
            this.lpn &&
                !e &&
                window.opener.postMessage(
                    {
                        type: "popup-keydown",
                        event: {
                            key: t.key,
                            keyCode: t.keyCode,
                            keyIdentifier: t.keyIdentifier,
                            keyLocation: t.keyLocation,
                            code: t.code,
                            location: t.location,
                            char: t.char,
                            charCode: t.charCode,
                            which: t.which,
                            ctrlKey: t.ctrlKey,
                            shiftKey: t.shiftKey,
                            altKey: t.altKey,
                            metaKey: t.metaKey,
                            repeat: t.repeat,
                            isComposing: t.isComposing,
                        },
                    },
                    location.origin
                );
        }
        PR(t) {
            NE.Put() ||
                window.opener.postMessage(
                    {
                        type: "popup-keyup",
                        event: {
                            key: t.key,
                            keyCode: t.keyCode,
                            keyIdentifier: t.keyIdentifier,
                            keyLocation: t.keyLocation,
                            code: t.code,
                            location: t.location,
                            char: t.char,
                            charCode: t.charCode,
                            which: t.which,
                            ctrlKey: t.ctrlKey,
                            shiftKey: t.shiftKey,
                            altKey: t.altKey,
                            metaKey: t.metaKey,
                            repeat: t.repeat,
                            isComposing: t.isComposing,
                        },
                    },
                    location.origin
                );
        }
        n6t(t) {
            NE.Put() ||
                window.opener.postMessage(
                    {
                        type: "popup-keypress",
                        event: {
                            key: t.key,
                            keyCode: t.keyCode,
                            keyIdentifier: t.keyIdentifier,
                            keyLocation: t.keyLocation,
                            code: t.code,
                            location: t.location,
                            char: t.char,
                            charCode: t.charCode,
                            which: t.which,
                            ctrlKey: t.ctrlKey,
                            shiftKey: t.shiftKey,
                            altKey: t.altKey,
                            metaKey: t.metaKey,
                            repeat: t.repeat,
                            isComposing: t.isComposing,
                        },
                    },
                    location.origin
                );
        }
    };
}
{
    const jE = self.t;
    jE.fpn = class extends jE.MV {
        constructor(t, i) {
            super(),
                jE.Et(t, jE.pz.constructor),
                jE.vu(i),
                (this.cYi = t),
                (this.Gqt = i),
                (this.ppn = `@font-face {\n\t\t\tfont-family: '${this.Gqt}';\n\t\t\tsrc: `),
                (this.mpn = null),
                (this.wpn = ""),
                (this.gpn = []),
                (this.ypn = null);
        }
        Zn() {
            return this.Gqt;
        }
        iYe(t, i, e, s) {
            jE.Et(t, Blob), jE.vu(i), jE.vu(e);
            let n = URL.createObjectURL(t);
            this.gpn.push(n), (this.ppn += `url('${n}')`);
            let r = jE.pz.bpn(i, e);
            r && (this.ppn += ` format('${r}')`), (this.ppn += s ? ";\n}" : ", ");
        }
        async vpn() {
            return (
                (this.mpn = new Blob([this.ppn], { type: "text/css" })),
                (this.wpn = URL.createObjectURL(this.mpn)),
                (this.ypn = await jE.zOe(this.wpn)),
                this.ypn.setAttribute("data-comment", "webfont-" + this.Gqt),
                void 0 !== document.fonts &&
                    "function" == typeof document.fonts.load &&
                    (await document.fonts.load("1em '" + this.Gqt + "'")),
                jE.pz.Spn(this),
                this
            );
        }
        Ut() {
            if (this.cYi) {
                this.cYi.xpn(this), (this.cYi = null);
                for (let t of this.gpn) URL.revokeObjectURL(t);
                jE.yh(this.gpn),
                    this.wpn && (URL.revokeObjectURL(this.wpn), (this.wpn = "")),
                    (this.mpn = null),
                    jE.ti.Tz(this.ypn),
                    (this.ypn = null);
            }
        }
    };
}
{
    const $E = self.t;
    class zE extends $E.Event.aG {
        constructor() {
            super(), (this.Mpn = new Map());
        }
        gYt(t, i, e, s) {
            if (($E.vu(t), $E.vu(i), $E.vu(e), $E.Et(s, Blob), this.Mpn.has(t.toLowerCase())))
                return Promise.resolve(this.Mpn.get(t.toLowerCase()));
            const n = $E.m($E.fpn, this, t);
            return n.iYe(s, i.toLowerCase(), e.toLowerCase(), !0), this.Mpn.set(t.toLowerCase(), n), n.vpn();
        }
        xpn(t) {
            $E.Et(t, $E.fpn), this.Mpn.delete(t.Zn().toLowerCase());
        }
        Spn(t) {
            $E.Et(t, $E.fpn);
            let i = new $E.Event("fontload");
            (i.font = t), this.dispatchEvent(i);
        }
        bpn(t, i) {
            return (
                $E.vu(t),
                $E.vu(i),
                (t = t.toLowerCase()),
                (i = i.toLowerCase()),
                "application/font-woff" === t || i.endsWith("woff")
                    ? "woff"
                    : "font/woff2" === t || i.endsWith("woff2")
                      ? "woff2"
                      : "application/vnd.ms-fontobject" === t || i.endsWith("eot")
                        ? "embedded-opentype"
                        : i.endsWith("ttf")
                          ? "truetype"
                          : i.endsWith("otf")
                            ? "opentype"
                            : ""
            );
        }
    }
    $E.pz = $E.m(zE);
}
{
    const VE = self.t;
    VE.ti.SK.addEventListener("showmodal", (t) => {
        (t.i8t.e6i() && !t.i8t.cgt()) || VE.ti.Cpn.Epn();
    }),
        VE.ti.SK.addEventListener("hidemodal", (t) => {
            (t.i8t.e6i() && !t.i8t.cgt()) || VE.ti.Cpn.Ut();
        }),
        (VE.ti.Cpn = class {
            constructor() {}
            static Ut() {
                for (let t of this._pn.values()) {
                    for (let i of t) i.CPt(!1);
                    VE.yh(t);
                }
            }
            static Tpn(t) {
                VE.Et(t, VE.ti.Notification);
                let i = this._pn.get(t.Ipn());
                i.unshift(t);
                for (let t = 0; t < i.length; t++) i[t].Ppn(t);
                if (i.length >= this.Gpn + 1) {
                    let t = i.at(-1);
                    this.Apn(t), t.Mln();
                }
            }
            static Rpn(t) {
                VE.Et(t, VE.ti.Notification), this.Apn(t);
            }
            static kpn(t) {
                VE.Et(t, VE.ti.Notification);
                let i = this._pn.get(t.Ipn());
                for (let t = 0; t < i.length; t++) {
                    let e = i[t];
                    e.Lfn(), t === i.length - 1 && e.Opn();
                }
            }
            static Epn() {
                for (let t of this._pn.values()) for (let i of t) i.Mln();
            }
            static Dpn(t) {
                VE.Et(t, VE.ti.Notification);
                let i = this._pn.get(t.Ipn()),
                    e = i.indexOf(t);
                if (e > 0) {
                    let t = 0;
                    for (var s = e - 1; s >= 0; s--) t += i[s].aoe();
                    return t;
                }
                return 0;
            }
            static Apn(t) {
                VE.Et(t, VE.ti.Notification);
                let i = this._pn.get(t.Ipn()),
                    e = i.indexOf(t);
                -1 !== e && i.splice(e, 1), i.length && this.kpn(i[0]);
            }
        }),
        (VE.ti.Cpn._pn = new Map([
            ["top-left", []],
            ["top-right", []],
            ["bottom-left", []],
            ["bottom-right", []],
        ])),
        (VE.ti.Cpn.Gpn = 4);
}
{
    const WE = self.t,
        HE = new Set(["top-left", "top-right", "bottom-left", "bottom-right"]),
        KE = 5,
        qE = 5e3,
        XE = { align: "top-right", bjt: 1300, z4i: !1, onclick: null },
        YE = {};
    WE.ti.Notification = class extends WE.Event.aG {
        constructor(t, i, e, s, n) {
            if ((WE.$rt(i), WE.$rt(e), WE.Crt(s), n !== YE))
                throw new Error("notifications can only be created using C3.UI.Notification.ShowAt() method");
            if (
                (super(),
                "string" == typeof t && (t = self.app.krt(t)),
                t || (t = self.app.krt("info")),
                WE.qm(t, WE.ti.zrt),
                !t.L5e())
            )
                throw new Error("notifications can only use medium icons");
            if (
                ((this.Sln = i),
                (this.xln = e),
                (s = Object.assign({}, XE, s)),
                WE.vu(s.align),
                WE.wi(s.bjt),
                !HE.has(s.align))
            )
                throw new Error("invalid alignment");
            (this.di = !1),
                (this.Fpn = -1),
                (this.jMi = s.align),
                (this.Lpn = !!s.z4i),
                (this.Bpn = 0),
                (this._ln = -1),
                (this.Upn = !1),
                (this.Eln = s.bjt),
                (this.Npn = () => this.jpn()),
                (this.$pn = () => this.zpn()),
                (this.Vpn = () => this.Wpn()),
                (this.Hpn = () => this.Mln()),
                (this.Kpn = (t) => this.qpn(t)),
                (this.Xpn = (t) => this.Ypn(t)),
                (this.mht = WE.ti.gj("ui-notification")),
                (this.Jpn = null),
                this.Lpn && (this.Jpn = WE.ti.SK.o$i()),
                this.Jpn
                    ? (this.Jpn.FO().appendChild(this.mht),
                      this.Jpn.addEventListener("positionchange", this.Npn),
                      this.Jpn.addEventListener("widthchange", this.Npn),
                      this.Jpn.addEventListener("heightchange", this.Npn),
                      this.Jpn.addEventListener("startdragging", this.Vpn),
                      this.Jpn.addEventListener("finishdragging", this.$pn),
                      this.Jpn.addEventListener("startresizing", this.Vpn),
                      this.Jpn.addEventListener("finishresizing", this.$pn))
                    : (document.body.appendChild(this.mht), this.mht.setAttribute("document-parent", "")),
                (this.A5t = !1),
                (this.Iln = null),
                (this.Pln = null),
                (this.fCt = null),
                (this.fEt = null),
                (this.bj = null),
                this.mht.ownerDocument.defaultView &&
                    (!this.Jpn || (!this.Jpn.pmi() && this.Jpn.xz())) &&
                    ((this.A5t = !0),
                    this.mht.setAttribute("align", this.jMi),
                    (this.mht.style.transitionDuration = s.duration),
                    (this.Iln = WE.ti.gj("ui-notification-icon", this.mht)),
                    (this.Pln = WE.ti.gj("ui-notification-text", this.mht)),
                    (this.fCt = WE.m(WE.ti.met, t)),
                    this.Iln.appendChild(this.fCt.FO()),
                    (this.fEt = WE.ti.gj("ui-notification-title", this.Pln)),
                    (this.bj = WE.ti.gj("ui-notification-body", this.Pln)),
                    WE.hrt(this.fEt, this.Sln),
                    WE.hrt(this.bj, this.xln),
                    (this._S = this.mht.getBoundingClientRect().height),
                    "function" == typeof s.onclick &&
                        this.mht.addEventListener("click", () => {
                            this.Mln(), s.onclick();
                        }),
                    WE.ti.Cpn.Tpn(this),
                    self.app.Cbt() || (this.mht.style.transition = "none"),
                    this.Zpn());
        }
        CPt(t = !0) {
            WE.gi(this) ||
                this.di ||
                (clearTimeout(this.Fpn),
                (this.di = !0),
                (t = !!t) && WE.ti.Cpn.Rpn(this),
                this.Jpn &&
                    (this.Jpn.removeEventListener("positionchange", this.Npn),
                    this.Jpn.removeEventListener("widthchange", this.Npn),
                    this.Jpn.removeEventListener("heightchange", this.Npn),
                    this.Jpn.removeEventListener("startdragging", this.Vpn),
                    this.Jpn.removeEventListener("finishdragging", this.$pn),
                    this.Jpn.removeEventListener("startresizing", this.Vpn),
                    this.Jpn.removeEventListener("finishresizing", this.$pn),
                    (this.Jpn = null),
                    (this.Npn = null),
                    (this.Vpn = null),
                    (this.$pn = null)),
                this.mht.removeEventListener("transitionend", this.Kpn),
                (this.Kpn = null),
                this.mht.removeEventListener("transitionend", this.Xpn),
                (this.Xpn = null),
                this.Lfn(),
                this.fCt && this.fCt.Ut(),
                WE.ti.Tz(this.fEt),
                WE.ti.Tz(this.Iln),
                WE.ti.Tz(this.Pln),
                WE.ti.Tz(this.mht),
                (this.Iln = null),
                (this.Pln = null),
                (this.fCt = null),
                (this.fEt = null),
                (this.bj = null),
                (this.mht = null),
                WE.Ut(this));
        }
        Qpn() {
            return this.A5t;
        }
        Ipn() {
            return this.jMi;
        }
        tmn() {
            return this.Eln;
        }
        aoe() {
            return this._S + KE;
        }
        Ppn(t) {
            WE.wi(t), t >= WE.ti.Cpn.Gpn - 1 && (t = WE.ti.Cpn.Gpn - 1), this.Bpn !== t && ((this.Bpn = t), this.jpn());
        }
        Zpn() {
            this.jpn(),
                this.mht.setAttribute("showing", this.jMi),
                self.app.Cbt() ? this.mht.addEventListener("transitionend", this.Kpn) : WE.ti.Cpn.kpn(this);
        }
        qpn(t) {
            WE.gi(this) ||
                this.di ||
                ("transform" === t.propertyName &&
                    (this.mht.removeEventListener("transitionend", this.Kpn), WE.ti.Cpn.kpn(this)));
        }
        imn() {
            this.Upn ||
                ((this.Upn = !0),
                this.mht.removeAttribute("showing"),
                ("top-left" !== this.jMi && "bottom-left" !== this.jMi) || this.mht.setAttribute("hiding-left", ""),
                ("top-right" !== this.jMi && "bottom-right" !== this.jMi) || this.mht.setAttribute("hiding-right", ""),
                self.app.Cbt()
                    ? (this.mht.addEventListener("transitionend", this.Xpn),
                      (this.Fpn = setTimeout(() => {
                          this.CPt();
                      }, qE)))
                    : this.CPt());
        }
        Ypn(t) {
            WE.gi(this) ||
                this.di ||
                ("transform" === t.propertyName &&
                    (this.mht.removeEventListener("transitionend", this.Xpn), this.CPt()));
        }
        Lfn() {
            clearTimeout(this._ln);
        }
        Opn() {
            this._ln = setTimeout(this.Hpn, this.Eln);
        }
        emn() {
            this.mht.setAttribute("no-position-transitions", "");
        }
        Wpn() {
            this.mht.setAttribute("no-transitions", "");
        }
        zpn() {
            this.mht.removeAttribute("no-transitions");
        }
        smn() {
            return !this.mht.hasAttribute("no-transitions");
        }
        Mln() {
            this.Lfn(), this.smn() || (this.zpn(), this.emn()), this.imn();
        }
        jpn() {
            let t = this.mht.style,
                i = WE.ti.Cpn.Dpn(this);
            if (this.Jpn && !this.Jpn.lBi()) {
                let e = this.mht.ownerDocument,
                    s = e.defaultView,
                    n = s.innerWidth || e.documentElement.clientWidth || e.body.clientWidth,
                    r = s.innerHeight || e.documentElement.clientHeight || e.body.clientHeight,
                    h = this.Jpn.Hgi(),
                    o = this.Jpn.Jgi(),
                    a = n - (h + this.Jpn.rs()),
                    l = r - (o + this.Jpn.ls());
                "top-left" === this.jMi
                    ? ((t.left = -h + "px"), (t.top = `${-o + i}px`))
                    : "top-right" === this.jMi
                      ? ((t.right = -a + "px"), (t.top = `${-o + i}px`))
                      : "bottom-left" === this.jMi
                        ? ((t.left = -h + "px"), (t.bottom = `${-l + i}px`))
                        : "bottom-right" === this.jMi && ((t.right = -a + "px"), (t.bottom = `${-l + i}px`));
            } else
                "top-left" === this.jMi
                    ? ((t.left = "0px"), (t.top = `${i}px`))
                    : "top-right" === this.jMi
                      ? ((t.right = "0px"), (t.top = `${i}px`))
                      : "bottom-left" === this.jMi
                        ? ((t.left = "0px"), (t.bottom = `${i}px`))
                        : "bottom-right" === this.jMi && ((t.right = "0px"), (t.bottom = `${i}px`));
        }
        static XO(t, i, e, s) {
            if (!self.app.nmn()) return;
            const n = WE.ti.SK.o$i();
            if (n && n.e6i() && !s.z4i && !n.agt()) return;
            const r = WE.m(WE.ti.Notification, t, i, e, s, YE);
            r.Qpn() || r.CPt(!1);
        }
    };
}
{
    const JE = self.t,
        ZE = JE.sj(import.meta.url).getElementById("ui-loader-template"),
        QE = !1;
    JE.ti.hkt = class {
        constructor(t) {
            JE.qm(t, HTMLElement), (this.element = document.createElement("ui-loader"));
            const i = ZE.content.cloneNode(!0);
            QE ? this.element.createShadowRoot().appendChild(i) : this.element.appendChild(i),
                t && t.appendChild(this.element);
        }
        tO(t) {
            t ? this.element.removeAttribute("hidden", "") : this.element.setAttribute("hidden", "");
        }
        ejt() {
            this.element.setAttribute("pause", "");
        }
        rmn() {
            this.element.removeAttribute("pause");
        }
        get nkt() {
            return this.element.getElementsByTagName("ui-loader-message")[0].textContent;
        }
        set nkt(t) {
            this.element.getElementsByTagName("ui-loader-message")[0].textContent = t;
        }
        remove() {
            this.element.remove();
        }
    };
}
{
    const tC = self.t;
    (tC.vF = tC.m(tC.Event.aG)),
        (tC.APt = class {
            constructor(t, i, e) {
                if ((tC.vu(t), tC.x$(i), tC.UAe(e, "#document"), e === document))
                    throw new Error("component cannot reference main document");
                (this.nes = t), (this.hmn = i), (this.LAe = e), (this.BAe = e.documentURI);
            }
            Ut() {
                (this.nes = null), (this.hmn = null), (this.LAe = null), (this.BAe = null);
            }
            JD() {
                return this.nes;
            }
            WZ() {
                return this.hmn;
            }
            sj() {
                return this.LAe;
            }
            YAe() {
                return this.BAe;
            }
        });
}
{
    const iC = self.t,
        eC = "c3-user-settings",
        sC = [
            "account",
            "account-access-code",
            "account-login",
            "account-logout",
            "account-register",
            "add",
            "add-folder",
            "addon",
            "align-bottom",
            "align-top",
            "align-left",
            "align-vcenter",
            "align-hcenter",
            "align-right",
            "align-edge-left",
            "align-edge-top",
            "align-edge-right",
            "align-edge-bottom",
            "all-frames",
            "all-columns",
            "all-rows",
            "ambiguous",
            "animation",
            "animation-column",
            "animation-row",
            "array",
            "arrow-pointer",
            "archive",
            "async-action",
            "async-end",
            "audio",
            "auto-keyframes",
            "back",
            "bar",
            "bookmark",
            "breakpoint",
            "breakpoint-active-left",
            "breakpoint-active-right",
            "brush",
            "bucket",
            "build",
            "c3-mono",
            "check",
            "cleanup",
            "clear",
            "cloud",
            "cloud-upload",
            "close",
            "closed-folder",
            "code",
            "collapsed",
            "compress",
            "color",
            "copy",
            "crop",
            "cross",
            "csv",
            "cut",
            "debug",
            "default-interpolation",
            "delete",
            "delete-all",
            "delete-column",
            "delete-row",
            "dictionary",
            "disabled",
            "dot",
            "download",
            "dpad",
            "dropbox",
            "duplicate",
            "edit",
            "ellipse",
            "eraser",
            "error",
            "event-comment",
            "event-sheet",
            "exit-fullscreen",
            "expanded",
            "export",
            "external",
            "eye-dropper",
            "file",
            "file-preview",
            "flag",
            "flash",
            "flowchart",
            "focus",
            "font",
            "frame",
            "fullscreen",
            "function",
            "generic-file",
            "globe",
            "global-variable",
            "google-drive",
            "goto",
            "grid",
            "guided-tour",
            "hand",
            "help",
            "home",
            "html",
            "html-tag",
            "image",
            "import",
            "import-files",
            "insert-row-before",
            "insert-row-after",
            "insert-column-before",
            "insert-column-after",
            "install-app",
            "instance-variable",
            "info",
            "invert-ease",
            "invisible",
            "javascript",
            "javascript-color",
            "json",
            "language",
            "layers",
            "layout",
            "line",
            "link",
            "link-anchor",
            "local-variable",
            "location-pin",
            "locked",
            "loop-condition",
            "menu-dots",
            "menu-submenu",
            "mesh",
            "mirror-h",
            "mirror-v",
            "move-down",
            "move-up",
            "new",
            "next",
            "numbers",
            "offline",
            "onedrive",
            "open",
            "open-folder",
            "open-popup",
            "origin",
            "output",
            "paste",
            "patch",
            "pause",
            "pause-timeline",
            "pdf",
            "pin",
            "pin-off",
            "play",
            "polygon",
            "preview",
            "preview-debug",
            "previous",
            "print",
            "rectangle",
            "rectangle-select",
            "redo",
            "reload",
            "remote-preview",
            "remove",
            "replace",
            "replica",
            "resize",
            "reverse",
            "rotate-acw",
            "rotate-cw",
            "save",
            "scene-graph",
            "scirra-store",
            "scroll",
            "search",
            "security-shield",
            "select-all",
            "send-to-back",
            "send-to-front",
            "set-keyframes",
            "settings",
            "share-arrow",
            "shared-folder",
            "shopping-cart",
            "skip-first",
            "skip-last",
            "skip-next",
            "skip-previous",
            "sort",
            "sound",
            "space-horiz",
            "space-vert",
            "star",
            "statistics",
            "stop",
            "style",
            "support",
            "template",
            "terms",
            "text-overlay-l",
            "text-overlay-r",
            "text-short",
            "thumbnail",
            "tiles",
            "timeline",
            "timeline-ui",
            "timer",
            "toggle-background",
            "tools",
            "touch",
            "transition",
            "translucent",
            "trigger-condition",
            "typescript",
            "typescript-color",
            "undo",
            "unknown-file",
            "unlocked",
            "update",
            "upload",
            "up-arrow",
            "video",
            "videogame",
            "view",
            "visible",
            "warning",
            "wrap-selection",
            "xml",
            "z-order",
            "zoom-in",
            "zoom-out",
            "zoom-reset",
            "family-overlay-mask",
            "custom-ace-overlay-mask",
            { name: "effect", color: "--effect-icon-color" },
            { name: "family-overlay", color: "--family-overlay-icon-color" },
            { name: "custom-ace", color: "--custom-ace-icon-color" },
            { name: "custom-ace-overlay", color: "--custom-ace-overlay-icon-color" },
            { name: "image-point", color: "#FF0000" },
            { name: "invert", color: "--invert-icon-color" },
            { e$e: "origin", name: "origin-cursor", color: "#FFFFFF" },
            { e$e: "image-point", name: "image-point-cursor", color: "#00FFFF" },
            { e$e: "animation", name: "default-animation", color: "--default-icon-color" },
        ],
        nC = new Set([
            "save",
            "undo",
            "redo",
            "preview",
            "preview-debug",
            "menu-submenu",
            "account",
            "open-folder",
            "closed-folder",
        ]),
        rC = new Set([
            "animation",
            "event-sheet",
            "instance-variable",
            "layout",
            "loop-condition",
            "trigger-condition",
        ]),
        hC = !!window.C3_IsPopupWindow;
    let oC = !1;
    iC.CJe = class extends iC.Event.aG {
        constructor() {
            if ((super(), oC)) throw new Error("only one C3.App should be instantiated");
            (oC = !0),
                (this.Gqt = "MyApp"),
                (this.wot = new Map()),
                (this.lpn = hC),
                (this.omn = null),
                (this.amn = 0),
                (this.lmn = 0),
                (this.umn = 0),
                (this.cmn = {}),
                (this.dmn = !1),
                "loading" === document.readyState
                    ? document.addEventListener("DOMContentLoaded", () => {
                          (this.amn = Math.round(1.54 * iC.ti._Bt())),
                              (this.lmn = 2 * this.amn),
                              (this.umn = 2 * this.lmn);
                      })
                    : ((this.amn = Math.round(1.54 * iC.ti._Bt())),
                      (this.lmn = 2 * this.amn),
                      (this.umn = 2 * this.lmn)),
                (this.fmn = new Map()),
                (this.pmn = new Map()),
                (this.mmn = new Map()),
                (window.app = this);
        }
        wmn() {
            this.lpn || ((this.omn = iC.m(iC.ti.QO, "main", !1)), this.omn.Z0e(!0));
        }
        gmn() {
            self.C3_HideLoader(),
                iC.ti.Xqe("supportMessage"),
                iC.ti.Yqe("noscript"),
                iC.ti.Yqe("script[src$='supportCheck.js']"),
                iC.ti.Yqe("script[src$='es2015check.js']"),
                this.omn.Z0e(!1);
        }
        Zn() {
            return this.Gqt;
        }
        tXe() {
            return this.omn;
        }
        Ent() {
            return this.amn;
        }
        bet() {
            return this.lmn;
        }
        IMt() {
            return this.umn;
        }
        pps(t) {
            switch ((iC.vu(t), t)) {
                case "small":
                    return this.amn;
                case "medium":
                    return this.lmn;
                case "large":
                    return this.umn;
                default:
                    throw new Error("invalid icon size specifier");
            }
        }
        lBi() {
            return this.lpn;
        }
        ymn() {
            const t = new iC.Event("load");
            return (t.app = this), (t.gF = this.lpn), iC.vF.Aze(t);
        }
        bmn() {
            const t = new iC.Event("afterload");
            return (t.app = this), (t.gF = this.lpn), iC.vF.Aze(t);
        }
        gst(t) {
            return iC.vu(t), this.wot.get(t);
        }
        vmn(t) {
            return iC.vu(t), this.wot.has(t);
        }
        Nq(t, i, e) {
            if ((iC.vu(t), iC.x$(i), iC.UAe(e, "#document"), e === document))
                throw new Error("cannot register component with main document");
            if (this.vmn(t)) throw new Error(`component id '${t}' already registered`);
            let s = iC.m(iC.APt, t, i, e);
            this.wot.set(t, s);
            let n = new iC.Event("registercomponent");
            (n.app = this), (n.component = s), iC.vF.dispatchEvent(n);
        }
        Smn(t) {
            if ((iC.vu(t), !this.vmn(t))) throw new Error(`component id '${t}' is not registered`);
            let i = this.wot.get(t),
                e = new iC.Event("unregistercomponent");
            (e.app = this), (e.component = i), iC.vF.dispatchEvent(e), i.Ut(), this.wot.delete(t);
        }
        vst(t) {
            const i = this.gst(t);
            return i ? i.WZ() : null;
        }
        xmn() {
            return {};
        }
        async Mmn() {
            const t = await localforage.getItem(eC),
                i = Object.assign({}, this.xmn(), t);
            return (this.cmn = i), (this.dmn = !0), i;
        }
        Emn() {
            return this.dmn;
        }
        $J() {
            return this.cmn;
        }
        y6i() {
            return localforage.setItem(eC, this.cmn).catch((t) => this.cme(t));
        }
        Cmn(t) {
            iC.vu(t);
            let i = new iC.Event(t);
            (i._mn = this.cmn), this.dispatchEvent(i);
        }
        Cbt() {
            return !0;
        }
        zQ() {
            return !0;
        }
        Tmn() {
            let t = document.body.parentElement,
                i = this.zQ() ? "highgfxmode" : "lowgfxmode",
                e = this.zQ() ? "lowgfxmode" : "highgfxmode";
            t.removeAttribute(e), t.setAttribute(i, "");
        }
        Imn() {
            this.Tmn(), iC.zTe();
            const t = [];
            for (const i of nC) t.push(this.fmn.get(i).aEs());
            return Promise.all(t);
        }
        async Pmn() {
            iC.ZJ("PrefetchAllIcons");
            const t = [];
            for (const [i, e] of this.fmn.entries()) nC.has(i) || t.push(e.aEs());
            await Promise.all(t), iC.dq("PrefetchAllIcons");
        }
        Gmn() {
            let t = iC.ti.VW.NXe();
            for (let i of sC) {
                let e,
                    s = null,
                    n = null;
                "object" == typeof i
                    ? ((e = i.name), (s = i.color), (n = i.e$e), s.startsWith("--") && (s = iC.ti.VW.NW(s)))
                    : ((e = i), rC.has(i) && (s = iC.ti.VW.NW("--project-item-icon-color")));
                let r = n || e,
                    h = iC.m(iC.ti.KAe, this, `${t}${r}.svg`, { name: e, color: s });
                this.fmn.set(e, h);
            }
        }
        async Amn() {
            const t = [];
            for (let i of sC) {
                let e = "",
                    s = null;
                "object" == typeof i
                    ? ((e = i.name), (s = i.color), s.startsWith("--") && (s = iC.ti.VW.NW(s)))
                    : ((e = i), rC.has(i) && (s = iC.ti.VW.NW("--project-item-icon-color"))),
                    e && s && t.push(this.fmn.get(e).Ki(s));
            }
            await Promise.all(t);
        }
        ht(t) {
            iC.vu(t);
            let i = this.fmn.get(t);
            if (i) return i.KB();
            throw new Error(`common small icon '${t}' not found`);
        }
        krt(t) {
            iC.vu(t);
            let i = this.fmn.get(t);
            if (i) return i.Iue();
            throw new Error(`common medium icon '${t}' not found`);
        }
        lcs(t) {
            iC.vu(t);
            let i = this.fmn.get(t);
            if (i) return i.Wos();
            throw new Error(`common large icon '${t}' not found`);
        }
        hEs(t, i) {
            switch ((iC.vu(t), iC.vu(i), i)) {
                case "small":
                    return this.ht(t);
                case "medium":
                    return this.krt(t);
                case "large":
                    return this.lcs(t);
                default:
                    throw new Error("invalid icon size");
            }
        }
        kdn(t, i) {
            return iC.vu(t), iC.wi(i), i <= this.Ent() ? this.ht(t) : i <= this.bet() ? this.krt(t) : this.lcs(t);
        }
        async c8e(t) {
            const i = iC.ti.VW.NXe();
            if (t.startsWith(i)) {
                const i = iC.dts(t).toLowerCase(),
                    e = await iC.ti.VW.jXe();
                return e.hasOwnProperty(i) ? e[i] : iC.gAe(t);
            }
            return iC.gAe(t);
        }
        Mnt(t) {
            return iC.vu(t), this.fmn.get(t) || null;
        }
        ime(t) {
            if ((iC.vu(t), this.pmn.has(t))) return this.pmn.get(t);
            let i = new Blob(
                    [
                        `<svg version="1.1"\n\t\t\tbaseProfile="full"\n\t\t\twidth="100%" height="100%"\n\t\t\tstyle="text-rendering:geometricPrecision; image-rendering:optimizeQuality;"\n\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\tstroke="black"\n\t\t\tfill="black">\n\t\n\t\t\t<text x="50%" y="50%" dy=".45em" font-size="10" text-anchor="middle" stroke-width="1.1px">${t}</text>\n\t\t</svg>`,
                    ],
                    { type: "image/svg+xml" }
                ),
                e = URL.createObjectURL(i),
                s = iC.m(iC.ti.KAe, self.app, e, {});
            return this.pmn.set(t, s), s;
        }
        FW(t, i) {
            if ((iC.Dpt(i), iC.vu(i.name), iC.vu(i.color), this.mmn.has(i.name))) return this.mmn.get(i.name);
            const e = iC.m(iC.ti.KAe, self.app, t.Rmn(), { name: "plugin-" + t.JD() + "-" + i.name, color: i.color });
            return this.mmn.set(i.name, e), e;
        }
        VXe() {
            return this.fmn.values();
        }
        cme(t) {
            (() => {})("Storage write error:", t);
        }
    };
}
{
    const aC = self.t,
        lC = self.sG,
        uC = lC.hG,
        cC = lC.ems,
        dC = lC.eG,
        fC = uC.create(),
        pC = uC.create(),
        mC = uC.create(),
        wC = cC.create(),
        gC = dC.create(),
        yC = uC.create(),
        bC = uC.create(),
        vC = uC.create(),
        SC = uC.create(),
        xC = uC.create(),
        MC = uC.create(),
        EC = uC.create(),
        CC = uC.create(),
        _C = cC.rMe(0, 0, 1, 1);
    function TC(t, i, e, s) {
        const n = mC;
        uC.mMe(fC, e, i),
            uC.mMe(pC, t, i),
            uC.QMe(n, fC, pC),
            uC.normalize(n, n),
            s.set(n[0], n[1], n[2], uC.dot(t, n));
    }
    function IC(t, i, e, s, n, r, h) {
        const o = h.x,
            a = h.y,
            l = h.z,
            u = h.w,
            c = h.xF,
            d = h.yF,
            f = h.zF,
            p = 1 - c,
            m = 1 - d,
            w = 1 - f;
        if (o * t * c + o * s * p + a * i * d + a * n * m + l * e * f + l * r * w >= u) return !0;
        return o * s * c + o * t * p + a * n * d + a * i * m + l * r * f + l * e * w > u;
    }
    function PC(t, i, e, s) {
        return s.x * t + s.y * i + s.z * e >= s.w;
    }
    aC.bn = {
        Ga(t, i, e, s, n, r, h) {
            const o = s[0] * t + s[4] * i + s[8] * e + s[12],
                a = s[1] * t + s[5] * i + s[9] * e + s[13],
                l = s[2] * t + s[6] * i + s[10] * e + s[14],
                u = s[3] * t + s[7] * i + s[11] * e + s[15];
            let c = n[0] * o + n[4] * a + n[8] * l + n[12] * u,
                d = n[1] * o + n[5] * a + n[9] * l + n[13] * u,
                f = n[2] * o + n[6] * a + n[10] * l + n[14] * u,
                p = n[3] * o + n[7] * a + n[11] * l + n[15] * u;
            return (
                0 !== p &&
                ((p = 1 / p),
                (c *= p),
                (d *= p),
                (f *= p),
                (h[0] = (0.5 * c + 0.5) * r[2] + r[0]),
                (h[1] = (0.5 * d + 0.5) * r[3] + r[1]),
                (h[2] = 0.5 * (1 + f)),
                !0)
            );
        },
        kmn(t, i, e, s, n, r, h) {
            const o = gC,
                a = wC;
            return (
                dC.multiply(o, n, s),
                null !== dC.oMe(o, o) &&
                    ((a[0] = ((t - r[0]) / r[2]) * 2 - 1),
                    (a[1] = ((i - r[1]) / r[3]) * 2 - 1),
                    (a[2] = 2 * e - 1),
                    (a[3] = 1),
                    cC.sTe(a, a, o),
                    0 !== a[3] &&
                        ((a[3] = 1 / a[3]), (h[0] = a[0] * a[3]), (h[1] = a[1] * a[3]), (h[2] = a[2] * a[3]), !0))
            );
        },
        d$s(t, i, e, s, n, r, h) {
            const o = fC,
                a = pC;
            if (!aC.bn.kmn(t, i, 0, s, n, r, o)) return !1;
            if (!aC.bn.kmn(t, i, 1, s, n, r, a)) return !1;
            const l = pC;
            uC.mMe(l, a, o);
            const u = mC;
            uC.set(u, 0, 0, 1);
            const c = -e,
                d = uC.dot(u, l);
            let f = 0;
            if (0 === d) {
                if (0 !== uC.dot(u, o) + c) return !1;
            } else if (((f = -(uC.dot(o, u) + c) / d), f < 0)) return !1;
            return uC.qMe(h, o, l, f), !0;
        },
    };
    class GC {
        constructor() {
            (this.x = NaN),
                (this.y = NaN),
                (this.z = NaN),
                (this.w = NaN),
                (this.xF = NaN),
                (this.yF = NaN),
                (this.zF = NaN);
        }
        set(t, i, e, s) {
            (this.x = t),
                (this.y = i),
                (this.z = e),
                (this.w = s),
                (this.xF = t > 0 ? 1 : 0),
                (this.yF = i > 0 ? 1 : 0),
                (this.zF = e > 0 ? 1 : 0);
        }
    }
    aC.bn.p$s = class {
        constructor() {
            (this.Omn = new GC()),
                (this.Dmn = new GC()),
                (this.Fmn = new GC()),
                (this.Lmn = new GC()),
                (this.Bmn = new GC()),
                (this.Umn = new GC());
        }
        w$s(t, i) {
            const e = _C;
            aC.bn.kmn(0, 1, 0, t, i, e, yC),
                aC.bn.kmn(1, 1, 0, t, i, e, bC),
                aC.bn.kmn(0, 0, 0, t, i, e, vC),
                aC.bn.kmn(1, 0, 0, t, i, e, SC),
                aC.bn.kmn(0, 1, 1, t, i, e, xC),
                aC.bn.kmn(1, 1, 1, t, i, e, MC),
                aC.bn.kmn(0, 0, 1, t, i, e, EC),
                aC.bn.kmn(1, 0, 1, t, i, e, CC),
                TC(vC, yC, xC, this.Omn),
                TC(yC, bC, MC, this.Dmn),
                TC(bC, SC, CC, this.Fmn),
                TC(SC, vC, EC, this.Lmn),
                TC(EC, xC, MC, this.Umn),
                TC(SC, bC, yC, this.Bmn);
        }
        Wbs(t, i, e, s, n, r) {
            return (
                IC(t, i, e, s, n, r, this.Omn) &&
                IC(t, i, e, s, n, r, this.Dmn) &&
                IC(t, i, e, s, n, r, this.Fmn) &&
                IC(t, i, e, s, n, r, this.Lmn) &&
                IC(t, i, e, s, n, r, this.Bmn) &&
                IC(t, i, e, s, n, r, this.Umn)
            );
        }
        Nmn(t, i, e) {
            return !PC(t, i, e, this.Bmn);
        }
    };
}
{
    const AC = self.t;
    AC.bn.jmn = class {
        constructor(t, i, e, s, n, r, h) {
            (this.ci = t),
                (this.$Ke = 0),
                (this.$mn = null),
                (this.zmn = ""),
                (this.gms = e),
                (this.zc = AC.m(AC.nr)),
                this.zc.set(s),
                (this.rms = n),
                (this.Vmn = r),
                (this.Wmn = h),
                "string" == typeof i ? (this.zmn = i) : ((this.$mn = i), (this.zmn = this.$mn.Zn()));
        }
        Ut() {
            if (this.$Ke > 0) throw new Error("releasing state group still in use");
            (this.ci = null), (this.$mn = null), (this.zmn = "");
        }
        AXe() {
            const t = this.ci;
            t.xg(this.$mn), t.Ch(this.gms), t.Ki(this.zc), t.UL(this.rms), t.wg(this.Vmn), t.bg(this.Wmn), t.Hmn(this);
        }
        Kmn() {
            return AC.bn.jmn.qmn(this.zmn, this.gms, this.zc, this.rms, this.Vmn, this.Wmn);
        }
        Xmn() {
            ++this.$Ke;
        }
        Ymn() {
            --this.$Ke;
        }
        Jmn() {
            return this.$Ke;
        }
        je() {
            this.$mn = null;
        }
        gC(t) {
            if (((this.$mn = t.Zmn(this.zmn)), !this.$mn)) throw new Error("failed to restore shader program");
        }
        static qmn(t, i, e, s, n, r) {
            return (
                ("string" == typeof t ? t : t.Zn()) +
                "," +
                i +
                "," +
                e.getR() +
                "," +
                e.getG() +
                "," +
                e.getB() +
                "," +
                e.getA() +
                "," +
                s +
                "," +
                n +
                "," +
                r
            );
        }
    };
}
{
    const RC = globalThis.t,
        kC = globalThis.assert,
        OC = 65535;
    function DC(t, i, e) {
        const s = e.ss(),
            n = e.ns(),
            r = e.gg() - s,
            h = e.Cr() - n;
        return [s + r * t + (e.ao() - s) * i, n + h * t + (e.lo() - n) * i];
    }
    (RC.bn.TX = class {
        constructor(t, i, e) {
            (this.Qmn = t),
                (this.twn = i),
                (this.Ucn = e),
                (this.tp = NaN),
                (this.ep = NaN),
                (this.rms = NaN),
                (this._u = NaN),
                (this._v = NaN),
                (this.tp = 0),
                (this.ep = 0),
                (this.rms = 0),
                (this._u = 0),
                (this._v = 0);
        }
        tIs(t, i, e, s) {
            (this.tp = t), (this.ep = i), (this._u = e), (this._v = s);
        }
        Yn() {
            return this.tp;
        }
        eu(t) {
            this.tp !== t && ((this.tp = t), this.Qmn.iwn());
        }
        qn() {
            return this.ep;
        }
        iu(t) {
            this.ep !== t && ((this.ep = t), this.Qmn.iwn());
        }
        FL() {
            return this.rms;
        }
        aie(t) {
            this.rms !== t && ((this.rms = Math.max(t, 0)), this.Qmn.iwn());
        }
        L4() {
            return this._u;
        }
        j4(t) {
            this._u = t;
        }
        W4() {
            return this._v;
        }
        X4(t) {
            this._v = t;
        }
        ewn(t, i, e) {
            ([this.tp, this.ep] = DC(t.tp, t.ep, i)),
                (this.rms = t.rms),
                (this._u = RC.bt(e.un(), e.Rr(), t._u)),
                (this._v = RC.bt(e.pn(), e._r(), t._v));
        }
        swn(t, i, e) {
            ([this.tp, this.ep] = DC(t.tp, t.ep, i)), (this.rms = t.rms), ([this._u, this._v] = DC(t._u, t._v, e));
        }
        QI() {
            return { x: this.Yn(), y: this.qn(), z: this.FL(), u: this.L4(), v: this.W4() };
        }
        gls(t) {
            this.eu(t.x), this.iu(t.y), t.hasOwnProperty("z") && this.aie(t.z), this.j4(t.u), this.X4(t.v);
        }
        Ll() {
            return this.Qmn;
        }
        Gle() {
            return this.twn;
        }
        Ple() {
            return this.Ucn;
        }
    }),
        (RC.bn.CSs = class {
            constructor(t, i, e) {
                if (t < 2 || i < 2) throw new Error("invalid mesh size");
                (this.nwn = t),
                    (this.rwn = i),
                    (this.jvs = e || null),
                    (this.hwn = []),
                    (this.own = 0),
                    (this.awn = 0),
                    (this.lwn = 1),
                    (this.uwn = 1),
                    (this.cwn = 0),
                    (this.dwn = !1),
                    (this.fwn = []),
                    (this.pwn = 0),
                    (this.mwn = !0);
                const s = t - 1,
                    n = i - 1;
                for (let e = 0; e < i; ++e) {
                    const i = [];
                    for (let r = 0; r < t; ++r) {
                        const t = RC.m(RC.bn.TX, this, r, e),
                            h = r / s,
                            o = e / n;
                        t.tIs(h, o, h, o), i.push(t);
                    }
                    this.hwn.push(i);
                }
            }
            Ut() {
                RC.yh(this.hwn), RC.yh(this.fwn);
            }
            Hn() {
                return this.nwn;
            }
            Wn() {
                return this.rwn;
            }
            kte() {
                return this.jvs;
            }
            PSs() {
                return this.hwn;
            }
            iwn() {
                (this.dwn = !0), (this.mwn = !0);
            }
            wwn() {
                if (!this.dwn) return;
                let t = 1 / 0,
                    i = 1 / 0,
                    e = -1 / 0,
                    s = -1 / 0,
                    n = 0;
                for (const r of this.hwn)
                    for (const h of r) {
                        const r = h.Yn(),
                            o = h.qn();
                        (t = Math.min(t, r)),
                            (i = Math.min(i, o)),
                            (e = Math.max(e, r)),
                            (s = Math.max(s, o)),
                            (n = Math.max(n, h.FL()));
                    }
                (this.own = t), (this.awn = i), (this.lwn = e), (this.uwn = s), (this.cwn = n), (this.dwn = !1);
            }
            I9() {
                return this.wwn(), this.own;
            }
            M9() {
                return this.wwn(), this.awn;
            }
            G9() {
                return this.wwn(), this.lwn;
            }
            O9() {
                return this.wwn(), this.uwn;
            }
            gwn() {
                return this.wwn(), this.cwn;
            }
            Kei() {
                return this.gwn() > 0;
            }
            Xn(t, i) {
                return (
                    (t = Math.floor(t)),
                    (i = Math.floor(i)),
                    t < 0 || t >= this.nwn || i < 0 || i >= this.rwn ? null : this.hwn[i][t]
                );
            }
            _Ss(t, i, e) {
                RC.Et(t, RC.bn.CSs), RC.Et(i, RC.Bi), RC.UM(e, RC.Rect, RC.Bi);
                const s = e instanceof RC.Rect;
                if (t.Hn() !== this.Hn() || t.Wn() !== this.Wn()) throw new Error("source mesh wrong size");
                const n = t.hwn,
                    r = this.hwn;
                for (let t = 0, h = r.length; t < h; ++t) {
                    const h = n[t],
                        o = r[t];
                    for (let t = 0, n = o.length; t < n; ++t) {
                        const n = h[t],
                            r = o[t];
                        s ? r.ewn(n, i, e) : r.swn(n, i, e);
                    }
                }
                this.mwn = !0;
            }
            ywn(t) {
                if (!this.mwn && this.pwn === t) return;
                const i = this.nwn,
                    e = this.rwn,
                    s = this.fwn,
                    n = Math.floor(OC / i) - 1;
                if (n <= 0) throw new Error("mesh too large");
                const r = Math.ceil((e - 1) / n);
                r < s.length && (s.length = r);
                let h = 0;
                for (let o = 0; o < r; ++o) {
                    const r = Math.min(n, e - h - 1);
                    kC(r > 0, "invalid mesh chunk");
                    const a = (r + 1) * i,
                        l = 3 * a,
                        u = 2 * a,
                        c = (i - 1) * r * 6;
                    if (o === s.length)
                        s.push({ bwn: new Float32Array(l), vwn: new Float32Array(u), Swn: new Uint16Array(c) });
                    else {
                        const t = s[o];
                        t.bwn.length !== l && (t.bwn = new Float32Array(l)),
                            t.vwn.length !== u && (t.vwn = new Float32Array(u)),
                            t.Swn.length !== c && (t.Swn = new Uint16Array(c));
                    }
                    const { bwn: d, vwn: f, Swn: p } = s[o];
                    this.xwn(h, r, t, d, f, p), (h += n);
                }
                (this.pwn = t), (this.mwn = !1);
            }
            xwn(t, i, e, s, n, r) {
                const h = this.hwn,
                    o = this.nwn;
                let a = 0,
                    l = 0,
                    u = 0;
                for (let c = t, d = t + i + 1; c < d; ++c) {
                    const i = h[c],
                        f = c + 1,
                        p = c - t,
                        m = p * o,
                        w = (p + 1) * o;
                    for (let t = 0, h = i.length; t < h; ++t) {
                        const o = i[t],
                            c = t + 1;
                        if (
                            ((s[a++] = o.Yn()),
                            (s[a++] = o.qn()),
                            (s[a++] = o.FL() + e),
                            (n[l++] = o.L4()),
                            (n[l++] = o.W4()),
                            c < h && f < d)
                        ) {
                            const i = t + m,
                                e = c + m,
                                s = c + w,
                                n = t + w;
                            (r[u++] = i), (r[u++] = e), (r[u++] = s), (r[u++] = i), (r[u++] = s), (r[u++] = n);
                        }
                    }
                }
            }
            qi(t, i) {
                this.ywn(i);
                for (const { bwn: i, vwn: e, Swn: s } of this.fwn) t.$l(i, e, s);
            }
            Fbs(t, i) {
                i || (i = (t, i, e) => [t, i, e]);
                const e = this.hwn;
                let s = e[0];
                for (let n = 1, r = e.length; n < r; ++n) {
                    const h = e[n];
                    let o = s[0],
                        a = h[0];
                    for (let e = 1, l = h.length; e < l; ++e) {
                        const u = s[e],
                            c = h[e],
                            [d, f, p] = i(o.Yn(), o.qn(), o.FL()),
                            [m, w, g] = i(u.Yn(), u.qn(), u.FL()),
                            [y, b, v] = i(c.Yn(), c.qn(), c.FL()),
                            [S, x, M] = i(a.Yn(), a.qn(), a.FL());
                        t.ah(d, f, p, m, w, g),
                            t.ah(d, f, p, y, b, v),
                            t.ah(d, f, p, S, x, M),
                            e === l - 1 && t.ah(m, w, g, y, b, v),
                            n === r - 1 && t.ah(S, x, M, y, b, v),
                            (o = u),
                            (a = c);
                    }
                    s = h;
                }
            }
            jws(t) {
                const i = 0.001,
                    e = 0.99999999,
                    s = t.yus(),
                    n = [],
                    r = this.Hn() - 1,
                    h = this.Wn() - 1,
                    o = 1 / r,
                    a = 1 / h,
                    l = r - 1,
                    u = h - 1;
                let c = s[0],
                    d = s[1],
                    f = RC.ft(Math.floor(c * r), 0, l),
                    p = RC.ft(Math.floor(d * h), 0, u),
                    m = !0,
                    w = 0,
                    g = 0,
                    y = 0;
                let b = -1;
                const v = () => {
                    (c = RC.ft(RC.bt(c, w, y), 0, 1)), (d = RC.ft(RC.bt(d, g, y), 0, 1)), n.push(c, d);
                };
                for (let t = 0, S = s.length; t < S; t += 2) {
                    (c = s[t]),
                        (d = s[t + 1]),
                        n.push(c, d),
                        (f = RC.ft(Math.floor(c * r), 0, l)),
                        (p = RC.ft(Math.floor(d * h), 0, u));
                    const x = (t + 2) % S;
                    for (w = s[x], g = s[x + 1], b = -1; ; ) {
                        if (n.length > 1e6) throw new Error("Too many mesh poly points");
                        const t = f * o,
                            s = p * a,
                            r = (f + 1) * o,
                            h = (p + 1) * a;
                        if (
                            ((m = RC.ODe(c, d, t, s, r, s, r, h)),
                            0 !== b && ((y = RC.kDe(c, d, w, g, t, s, r, h, -0.001)), y >= 0 && y <= e))
                        )
                            v(), (m = !m), (b = 0);
                        else if (p > 0 && 2 !== b && ((y = RC.kDe(c, d, w, g, t, s, r, s, i)), y >= 0 && y <= e))
                            v(), p--, (m = !1), (b = 4);
                        else if (f < l && 3 !== b && ((y = RC.kDe(c, d, w, g, r, s, r, h, i)), y >= 0 && y <= e))
                            v(), f++, (m = !1), (b = 1);
                        else if (f > 0 && 1 !== b && ((y = RC.kDe(c, d, w, g, t, s, t, h, i)), y >= 0 && y <= e))
                            v(), f--, (m = !0), (b = 3);
                        else {
                            if (!(p < u && 4 !== b && ((y = RC.kDe(c, d, w, g, t, h, r, h, i)), y >= 0 && y <= e)))
                                break;
                            v(), p++, (m = !0), (b = 2);
                        }
                    }
                }
                return RC.m(RC.df, n);
            }
            Rws(t, i) {
                const e = this.Mwn(t);
                this.Ewn(e), i.wus(e);
            }
            Mwn(t) {
                const i = [],
                    e = t.yus();
                for (let t = 0, s = e.length; t < s; t += 2) {
                    const s = e[t],
                        n = e[t + 1],
                        [r, h] = this.Cwn(s, n);
                    i.push(r, h);
                }
                return i;
            }
            Cwn(t, i) {
                const e = this.Hn() - 1,
                    s = this.Wn() - 1,
                    n = 1 / e,
                    r = 1 / s,
                    h = RC.ft(Math.floor(t * e), 0, e - 1),
                    o = RC.ft(Math.floor(i * s), 0, s - 1),
                    a = h * n,
                    l = o * r,
                    u = (h + 1) * n,
                    c = (o + 1) * r,
                    d = this.Xn(h, o),
                    f = this.Xn(h + 1, o + 1),
                    p = RC.ODe(t, i, a, l, u, l, u, c),
                    m = p ? a + n : a,
                    w = p ? l : l + r,
                    g = this.Xn(h + (p ? 1 : 0), o + (p ? 0 : 1)),
                    [y, b, v] = RC.DDe(t, i, a, l, m, w, u, c);
                return RC.FDe(y, b, v, d.Yn(), d.qn(), d.FL(), g.Yn(), g.qn(), g.FL(), f.Yn(), f.qn(), f.FL());
            }
            Ewn(t) {
                const i = [],
                    e = 1e-7;
                let s = t[0],
                    n = t[1],
                    r = s - t.at(-2),
                    h = n - t.at(-1);
                for (let o = 0, a = t.length; o < a; o += 2) {
                    const l = (o + 2) % a,
                        u = t[l],
                        c = t[l + 1],
                        d = u - s,
                        f = c - n,
                        p = Math.abs(d) < e && Math.abs(r) < e && Math.sign(f) === Math.sign(h),
                        m = Math.abs(f) < e && Math.abs(h) < e && Math.sign(d) === Math.sign(r);
                    ((!p && !m && Math.abs(d / r - f / h) > 0.001) || (0 == d && 0 === f)) && i.push(s, n),
                        (s = u),
                        (n = c),
                        (r = d),
                        (h = f);
                }
                i.length >= 6 && i.length < t.length && RC.Rm(t, i);
            }
            QI() {
                return { cols: this.Hn(), rows: this.Wn(), points: this.hwn.map((t) => t.map((t) => t.QI())) };
            }
            gls(t) {
                const i = this.Hn(),
                    e = this.Wn();
                if (t.cols !== i || t.rows !== e) throw new Error("mesh data wrong size");
                const s = t.points;
                for (let t = 0; t < e; ++t) {
                    const e = s[t];
                    for (let s = 0; s < i; ++s) {
                        this.Xn(s, t).gls(e[s]);
                    }
                }
            }
        });
}
{
    const FC = self.t,
        LC = self.sG,
        BC = LC.hG,
        UC = LC.ems,
        NC = LC.eG,
        jC = NC.create(),
        $C = BC.rMe(0, 0, 0),
        zC = BC.rMe(0, 0, 0),
        VC = BC.rMe(0, 0, 0),
        WC = BC.rMe(0, 1, 0),
        HC = (UC.rMe(0, 0, 0, 0), new FC.Bi()),
        KC = new FC.Rect(),
        qC = new FC.Bi(0, 0, 1, 0, 1, 1, 0, 1),
        XC = { _wn: 1, Twn: 1e4 },
        YC = NC.rMe(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 1);
    FC.bn.dS = class {
        constructor(t) {
            (t = Object.assign({}, XC, t)),
                (this.RS = 0),
                (this._S = 0),
                (this.Iwn = FC.ut(45)),
                (this.Pwn = Math.tan(this.Iwn / 2)),
                (this.Gwn = NC.create()),
                (this.Awn = NC.create()),
                (this.Rwn = !1),
                (this.kwn = t._wn),
                (this.Own = t.Twn),
                (this.Dwn = []),
                (this.Fwn = new Map()),
                (this.Lwn = null),
                (this.Bwn = null),
                (this.Uwn = null),
                (this.Nwn = null),
                (this.jwn = null),
                (this.$wn = null),
                (this.zwn = null),
                (this.Vwn = null),
                (this.Wwn = null),
                (this.Hwn = null),
                (this.Kwn = null),
                (this.qwn = null),
                (this.Xwn = new Map()),
                (this.Ywn = null),
                (this.Jwn = []),
                (this.Zwn = new Map()),
                (this.Qwn = 0),
                (this.tgn = 0),
                (this.W5 = 1),
                (this.ign = [this.W5]),
                (this.egn = 1),
                (this.sgn = [this.egn]),
                (this.ngn = 0.5),
                (this.rgn = [this.ngn]),
                (this.hgn = 0),
                (this.ogn = !0),
                (this.agn = !1);
        }
        GZt() {
            (this.Qwn = 0),
                (this.tgn = 0),
                (this.Lwn = null),
                (this.Bwn = null),
                (this.Uwn = null),
                (this.Nwn = null),
                (this.jwn = null),
                (this.$wn = null),
                (this.zwn = null),
                (this.Vwn = null),
                (this.Wwn = null),
                (this.Hwn = null),
                (this.Kwn = null),
                (this.qwn = null),
                this.lgn();
        }
        nq() {
            this.GZt(), (this.Ywn = null);
        }
        ugn() {
            for (const t of this.Dwn) t.Ut();
            this.GZt();
        }
        rs() {
            return this.RS;
        }
        ls() {
            return this._S;
        }
        Rn(t) {
            return this.cgn() ? 100 : t / (2 * this.dgn());
        }
        kn(t) {
            if (this.cgn()) {
                return t / (2 * this.dgn()) / this.Rn(t);
            }
            return 1;
        }
        aL(t) {
            FC.wi(t), (this.kwn = t);
        }
        aX() {
            return this.kwn;
        }
        cL(t) {
            FC.wi(t), (this.Own = t);
        }
        cX() {
            return this.Own;
        }
        iL(t) {
            FC.wi(t), (this.Iwn = t), (this.Pwn = Math.tan(this.Iwn / 2));
        }
        fgn() {
            return this.Iwn;
        }
        dgn() {
            return this.Pwn;
        }
        tL() {
            this.Rwn = !1;
        }
        sL() {
            this.Rwn = !0;
        }
        cgn() {
            return !this.Rwn;
        }
        pgn() {
            return this.Rwn;
        }
        fL(t, i, e = 0.5, s = 0.5) {
            const n = this.aX(),
                r = this.cX(),
                h = this.fgn();
            if (0.5 === e && 0.5 === s) this.vp() ? NC.jMe(t, h, i, n, r) : NC.perspective(t, h, i, n, r);
            else {
                const h = 2 * (e = 1 - e) - 2,
                    o = 2 * e,
                    a = 2 * s - 2,
                    l = 2 * s,
                    u = this.dgn() * n,
                    c = u * i;
                NC.UMe(t, h * c, o * c, a * u, l * u, n, r), this.vp() && NC.mul(t, YC, t);
            }
        }
        a$s(t, i, e, s = 1) {
            const n = self.devicePixelRatio,
                r = (2 * this.Rn(e) * n * this.dgn()) / e,
                h = (i * r) / (2 * n * s),
                o = (e * r) / (2 * n * s),
                a = -h,
                l = h,
                u = -o,
                c = o;
            this.vp() ? NC.WMe(t, a, l, u, c, this.aX(), this.cX()) : NC.VMe(t, a, l, u, c, this.aX(), this.cX());
        }
        u$s(t, i, e, s, n, r = 1) {
            let h = 1;
            this.cgn() && (h = (200 * this.dgn()) / n);
            const o = VC;
            BC.set(o, h, -h, 1);
            const a = $C,
                l = zC;
            BC.multiply(a, i, o), BC.multiply(l, e, o), NC.HMe(t, a, l, s || WC), (o[2] = r), NC.scale(t, t, o);
        }
        Yz(t, i, e, s, n, r, h, o) {
            return BC.set($C, t, i, e), BC.set(zC, s, n, r), this.u$s(jC, $C, zC, WC, h, o), jC;
        }
        mgn(t) {
            this.Dwn.push(t), this.Fwn.set(t.Zn(), t);
        }
        wgn(t) {
            const i = this.Dwn.indexOf(t);
            -1 !== i && this.Dwn.splice(i, 1), this.Fwn.delete(t.Zn());
        }
        lgn() {
            FC.yh(this.Dwn), this.Fwn.clear();
        }
        Zmn(t) {
            return this.Fwn.get(t) || null;
        }
        ggn() {
            return this.Lwn;
        }
        an() {
            this.xg(this.Lwn);
        }
        ygn() {
            return this.Bwn;
        }
        bgn() {
            this.xg(this.Bwn);
        }
        hI() {
            this.xg(this.Uwn);
        }
        rv() {
            this.xg(this.Nwn);
        }
        us() {
            this.xg(this.jwn);
        }
        vgn() {
            this.xg(this.$wn);
        }
        Im() {
            this.xg(this.zwn);
        }
        Sgn() {
            this.xg(this.Vwn);
        }
        xgn() {
            this.xg(this.Wwn);
        }
        Mgn() {
            this.xg(this.Hwn);
        }
        Egn() {
            this.xg(this.Kwn);
        }
        uo() {
            this.xg(this.qwn);
        }
        Hmn(t) {
            this.Ywn = t;
        }
        Cgn() {
            return this.Ywn;
        }
        _gn(t, i, e, s, n, r) {
            const h = FC.bn.jmn.qmn(t, i, e, s, n, r);
            let o = this.Xwn.get(h);
            return o || ((o = FC.m(FC.bn.jmn, this, t, i, e, s, n, r)), this.Xwn.set(h, o)), o.Xmn(), o;
        }
        Tgn(t) {
            t.Ymn(), 0 === t.Jmn() && (this.Ywn === t && (this.Ywn = null), this.Xwn.delete(t.Kmn()), t.Ut());
        }
        Ign(t) {
            FC.yh(this.Jwn), this.Zwn.clear();
            let i = 0;
            for (const e of t) {
                const t = e[0],
                    s = e[1],
                    n = e[2];
                this.Jwn.push([s, n]), this.Zwn.set(t, { number: i, Pgn: s, Ggn: n }), i++;
            }
        }
        Agn(t) {
            return this.Jwn[t];
        }
        Rgn(t) {
            return this.Agn(t)[0];
        }
        kgn(t) {
            return this.Agn(t)[1];
        }
        Ogn(t) {
            const i = this.Zwn.get(t);
            if (void 0 === i) throw new Error("invalid blend name");
            return i;
        }
        S$s(t) {
            const i = this.Zwn.get(t);
            if (void 0 === i) throw new Error("invalid blend name");
            return i.number;
        }
        WL(t) {
            this.Qwn = t;
        }
        Dgn() {
            return this.Qwn;
        }
        UL(t) {
            (this.tgn = t), (this.Ywn = null);
        }
        Fgn() {
            return this.tgn;
        }
        $n(t, i, e, s) {
            const n = FC.wt(t, i, e, s),
                r = Math.sin(n),
                h = Math.cos(n),
                o = 0.5 * this.W5,
                a = r * o,
                l = h * o,
                u = this.egn;
            2 === u
                ? this.Lgn(t, i, 0, e, s, 0, a, l)
                : 1 === u
                  ? this.Bgn(t, i, 0, e, s, 0, a, l)
                  : this.Ugn(t, i, 0, e, s, 0, a, l);
        }
        ah(t, i, e, s, n, r) {
            const h = FC.wt(t, i, s, n),
                o = Math.sin(h),
                a = Math.cos(h),
                l = 0.5 * this.W5,
                u = o * l,
                c = a * l,
                d = this.egn;
            2 === d
                ? this.Lgn(t, i, e, s, n, r, u, c)
                : 1 === d
                  ? this.Bgn(t, i, e, s, n, r, u, c)
                  : this.Ugn(t, i, e, s, n, r, u, c);
        }
        Lgn(t, i, e, s, n, r, h, o) {
            const a = this.ngn,
                l = t + a - o,
                u = i + a - h,
                c = s + a + o,
                d = n + a + h,
                f = 2 * o,
                p = 2 * h,
                m = l + h,
                w = u - o,
                g = l - h + f,
                y = u + o + p,
                b = c + h,
                v = d - o,
                S = c - h - f,
                x = d + o - p;
            this.Dg(m, w, e, b, v, r, S, x, r, g, y, e, qC);
        }
        Bgn(t, i, e, s, n, r, h, o) {
            const a = this.ngn,
                l = t + a - o,
                u = i + a - h,
                c = s + a + o,
                d = n + a + h,
                f = l + h,
                p = u - o,
                m = l - h,
                w = u + o,
                g = c + h,
                y = d - o,
                b = c - h,
                v = d + o;
            this.Dg(f, p, e, g, y, r, b, v, r, m, w, e, qC);
        }
        Ugn(t, i, e, s, n, r, h, o) {
            const a = this.ngn,
                l = t + a,
                u = i + a,
                c = s + a,
                d = n + a,
                f = l + h,
                p = u - o,
                m = l - h,
                w = u + o,
                g = c + h,
                y = d - o,
                b = c - h,
                v = d + o;
            this.Dg(f, p, e, g, y, r, b, v, r, m, w, e, qC);
        }
        ULs(t, i, e, s, n, r) {
            const h = FC.wt(t, i, e, s),
                o = Math.sin(h),
                a = Math.cos(h),
                l = 0.5 * this.W5,
                u = o * l,
                c = a * l,
                d = this.egn;
            2 === d
                ? this.Ngn(t, i, e, s, u, c, n, r)
                : 1 === d
                  ? this.jgn(t, i, e, s, u, c, n, r)
                  : this.$gn(t, i, e, s, u, c, n, r);
        }
        Ngn(t, i, e, s, n, r, h, o) {
            const a = this.ngn,
                l = t + a - r,
                u = i + a - n,
                c = e + a + r,
                d = s + a + n,
                f = 2 * r,
                p = 2 * n,
                m = l + n,
                w = u - r,
                g = l - n + f,
                y = u + r + p,
                b = c + n,
                v = d - r,
                S = c - n - f,
                x = d + r - p;
            HC.set(m, w, b, v, S, x, g, y), KC.set(h, 0, o, 0), this.Ts(HC, KC);
        }
        jgn(t, i, e, s, n, r, h, o) {
            const a = this.ngn,
                l = t + a - r,
                u = i + a - n,
                c = e + a + r,
                d = s + a + n,
                f = l + n,
                p = u - r,
                m = l - n,
                w = u + r,
                g = c + n,
                y = d - r,
                b = c - n,
                v = d + r;
            HC.set(f, p, g, y, b, v, m, w), KC.set(h, 0, o, 0), this.Ts(HC, KC);
        }
        $gn(t, i, e, s, n, r, h, o) {
            const a = this.ngn,
                l = t + a,
                u = i + a,
                c = e + a,
                d = s + a,
                f = l + n,
                p = u - r,
                m = l - n,
                w = u + r,
                g = c + n,
                y = d - r,
                b = c - n,
                v = d + r;
            HC.set(f, p, g, y, b, v, m, w), KC.set(h, 0, o, 0), this.Ts(HC, KC);
        }
        C3(t, i, e, s) {
            const n = 0.5 * this.W5,
                r = this.egn;
            2 === r ? this.zgn(t, i, e, s, n) : 1 === r ? this.Vgn(t, i, e, s, n) : this.Wgn(t, i, e, s, n);
        }
        zgn(t, i, e, s, n) {
            this.Lgn(t, i, 0, e, i, 0, 0, n),
                this.Lgn(e, i, 0, e, s, 0, n, 0),
                this.Lgn(e, s, 0, t, s, 0, 0, -n),
                this.Lgn(t, s, 0, t, i, 0, -n, 0);
        }
        Vgn(t, i, e, s, n) {
            this.Bgn(t, i, 0, e, i, 0, 0, n),
                this.Bgn(e, i, 0, e, s, 0, n, 0),
                this.Bgn(e, s, 0, t, s, 0, 0, -n),
                this.Bgn(t, s, 0, t, i, 0, -n, 0);
        }
        Wgn(t, i, e, s, n) {
            this.Ugn(t, i, 0, e, i, 0, 0, n),
                this.Ugn(e, i, 0, e, s, 0, n, 0),
                this.Ugn(e, s, 0, t, s, 0, 0, -n),
                this.Ugn(t, s, 0, t, i, 0, -n, 0);
        }
        dn(t) {
            this.C3(t.un(), t.pn(), t.Rr(), t._r());
        }
        rn(t) {
            const i = FC.wt(t.ss(), t.ns(), t.gg(), t.Cr()),
                e = Math.sin(i),
                s = Math.cos(i),
                n = 0.5 * this.W5,
                r = e * n,
                h = s * n,
                o = this.egn;
            2 === o ? this.Hgn(t, r, h) : 1 === o ? this.Kgn(t, r, h) : this.qgn(t, r, h);
        }
        Hgn(t, i, e) {
            this.Lgn(t.ss(), t.ns(), 0, t.gg(), t.Cr(), 0, i, e),
                this.Lgn(t.gg(), t.Cr(), 0, t.vr(), t.Mr(), 0, e, -i),
                this.Lgn(t.vr(), t.Mr(), 0, t.ao(), t.lo(), 0, -i, -e),
                this.Lgn(t.ao(), t.lo(), 0, t.ss(), t.ns(), 0, -e, i);
        }
        Kgn(t, i, e) {
            this.Bgn(t.ss(), t.ns(), 0, t.gg(), t.Cr(), 0, i, e),
                this.Bgn(t.gg(), t.Cr(), 0, t.vr(), t.Mr(), 0, e, -i),
                this.Bgn(t.vr(), t.Mr(), 0, t.ao(), t.lo(), 0, -i, -e),
                this.Bgn(t.ao(), t.lo(), 0, t.ss(), t.ns(), 0, -e, i);
        }
        qgn(t, i, e) {
            this.Ugn(t.ss(), t.ns(), 0, t.gg(), t.Cr(), 0, i, e),
                this.Ugn(t.gg(), t.Cr(), 0, t.vr(), t.Mr(), 0, e, -i),
                this.Ugn(t.vr(), t.Mr(), 0, t.ao(), t.lo(), 0, -i, -e),
                this.Ugn(t.ao(), t.lo(), 0, t.ss(), t.ns(), 0, -e, i);
        }
        mL(t) {
            (this.W5 = t), (this.ign[this.ign.length - 1] = t);
        }
        zNi() {
            return this.W5;
        }
        ho(t) {
            if (this.ign.length >= 100) throw new Error("pushed too many line widths - check push/pop pairs");
            this.ign.push(t), (this.W5 = t);
        }
        po() {
            if (this.ign.length <= 1) throw new Error("cannot pop last line width - check push/pop pairs");
            this.ign.pop(), (this.W5 = this.ign.at(-1));
        }
        Xgn() {
            (this.egn = 0), (this.sgn[this.sgn.length - 1] = 0);
        }
        Ygn() {
            (this.egn = 1), (this.sgn[this.sgn.length - 1] = 0);
        }
        Jgn() {
            (this.egn = 2), (this.sgn[this.sgn.length - 1] = 0);
        }
        Zgn(t) {
            if ((FC.vu(t), "butt" === t)) this.Qgn();
            else if ("square" === t) this.co();
            else {
                if ("zag" !== t) throw new Error("invalid line cap");
                this.q5();
            }
        }
        Qgn() {
            if (this.sgn.length >= 100) throw new Error("pushed too many line caps - check push/pop pairs");
            this.sgn.push(0), (this.egn = 0);
        }
        co() {
            if (this.sgn.length >= 100) throw new Error("pushed too many line caps - check push/pop pairs");
            this.sgn.push(1), (this.egn = 1);
        }
        q5() {
            if (this.sgn.length >= 100) throw new Error("pushed too many line caps - check push/pop pairs");
            this.sgn.push(2), (this.egn = 2);
        }
        fo() {
            if (this.sgn.length <= 1) throw new Error("cannot pop last line cap - check push/pop pairs");
            this.sgn.pop(), (this.egn = this.sgn.at(-1));
        }
        yL(t) {
            (this.ngn = t), (this.rgn[this.rgn.length - 1] = t);
        }
        tyn() {
            return this.ngn;
        }
        oo(t) {
            if (this.rgn.length >= 100) throw new Error("pushed too many line offsets - check push/pop pairs");
            this.rgn.push(t), (this.ngn = t);
        }
        do() {
            if (this.rgn.length <= 1) throw new Error("cannot pop last line offset - check push/pop pairs");
            this.rgn.pop(), (this.ngn = this.rgn.at(-1));
        }
        Qi() {
            this.wg(0), this.bg(0);
        }
        Mm(t) {
            const i = t.length / 2;
            if (i < 3) throw new Error("need at least 3 points");
            const e = i - 2,
                s = e - 1,
                n = t[0],
                r = t[1];
            for (let i = 0; i < e; i += 2) {
                const e = 2 * i,
                    h = t[e + 2],
                    o = t[e + 3],
                    a = t[e + 4],
                    l = t[e + 5];
                if (i === s) this.iyn(n, r, h, o, a, l, a, l);
                else {
                    const i = t[e + 6],
                        s = t[e + 7];
                    this.iyn(n, r, h, o, a, l, i, s);
                }
            }
        }
        PL() {
            this.eyn(!0), this.hgn++;
        }
        syn() {
            return this.hgn;
        }
        nyn() {
            this.hgn++;
        }
        ryn(t) {
            this.ogn = !!t;
        }
        hyn() {
            return this.ogn;
        }
        fq(t) {
            this.agn = !!t;
        }
        oyn() {
            return this.agn;
        }
        ayn() {
            return !1;
        }
        vp() {
            return !1;
        }
        lyn() {
            FC._2();
        }
        uyn() {
            FC._2();
        }
        cyn() {
            FC._2();
        }
        dyn() {
            return this.lyn() + this.uyn() + this.cyn();
        }
        fyn() {
            return FC.m(FC.bn.wn, this);
        }
    };
}
{
    const JC = self.t;
    JC.bn.pyn = class {
        constructor(t, i) {
            JC.Et(t, JC.bn.dS),
                JC.vu(i.name),
                (this.Gqt = i.name),
                (this.ci = t),
                (this.myn = i.wyn || 0),
                (this.gyn = i.yyn || 0),
                (this.byn = !!i.vyn),
                (this.Syn = !!i.xyn),
                (this.Myn = !!i.Eyn),
                (this.Cyn = !!i._yn),
                (this.Tyn = !!i.animated),
                (this.Iyn = !!i.Bei),
                (this.Pyn = !!i.Hei),
                (this.Gyn = !1),
                (this.Ayn = this.byn || this.Iyn || 0 !== this.myn || 0 !== this.gyn);
        }
        Ut() {
            this.ci = null;
        }
        Vi() {
            return this.ci;
        }
        Zn() {
            return this.Gqt;
        }
        Ryn() {
            return 0 !== this.myn || 0 !== this.gyn;
        }
        kyn() {
            return this.myn;
        }
        Oyn() {
            return this.gyn;
        }
        Jei() {
            return this.byn;
        }
        wl() {
            return this.Syn;
        }
        Dyn() {
            return this.Myn;
        }
        Fyn() {
            return this.Cyn;
        }
        Lyn() {
            return this.Tyn;
        }
        Hrs() {
            return this.Iyn;
        }
        zei() {
            return this.Pyn;
        }
        Byn() {
            return this.Gyn;
        }
        Uyn() {
            return this.Ayn;
        }
        Nyn() {
            return !1;
        }
    };
}
{
    const ZC = self.t,
        QC = 4096,
        t_ = 4,
        i_ = new Set([
            "serif",
            "sans-serif",
            "monospace",
            "cursive",
            "fantasy",
            "system-ui",
            "ui-serif",
            "ui-sans-serif",
            "ui-monospace",
            "ui-rounded",
            "math",
            "emoji",
            "fangsong",
        ]),
        e_ = { timeout: 60 },
        s_ = new ZC.nr(0, 0, 0, 1),
        n_ = new Set(["left", "center", "right"]),
        r_ = new Set(["top", "center", "bottom"]),
        h_ = new Set(["word", "cjk", "character"]),
        o_ = new Set(["ltr", "rtl"]),
        a_ = 1e3,
        l_ = 10,
        u_ = 2,
        c_ = new Set();
    function d_(t, i, e, s, n, r) {
        i ? t.strokeRect(e, s, n, r) : t.fillRect(e, s, n, r);
    }
    function f_(t, i) {
        t = t.trim();
        const e = parseFloat(t);
        return isFinite(e) ? (t.endsWith("%") ? (i * e) / 100 : e) : 0;
    }
    ZC.pz &&
        ZC.pz.addEventListener("fontload", (t) => {
            const i = t.font.Zn();
            for (const t of c_) (t.CS() || ZC.iy(t.jyn(), i)) && (t.Hx(), t.$yn());
        });
    let p_ = !1,
        m_ = !1;
    ZC.bn.wn = class {
        constructor(t, i) {
            ZC.Et(t, ZC.bn.dS),
                ZC.Crt(i),
                (i = Object.assign({}, e_, i)),
                (this.ci = t),
                (this.zyn = "Arial"),
                (this.A6s = 16),
                (this.Vyn = 1),
                (this.Ox = 0),
                (this.Wyn = !1),
                (this.Hyn = !1),
                (this.Kyn = "black"),
                (this.mx = !1),
                (this.mNe = null),
                (this.qyn = !0),
                (this.AC = null),
                (this.Xyn = new Set()),
                (this.Cx = "left"),
                (this.vx = "top"),
                (this.ux = ""),
                (this.gx = null),
                (this.wx = ZC.m(ZC.bx)),
                (this.yx = "word"),
                (this.Yyn = "ltr"),
                (this.xx = !1),
                (this.Sx = !1),
                (this.Jyn = !1),
                (this.Zyn = !1),
                (this.Px = -1),
                (this.Vx = 0),
                (this.hx = 0),
                (this.ox = 0),
                (this.RS = 0),
                (this._S = 0),
                (this.Qyn = 1),
                (this.tbn = null),
                (this.ibn = null),
                (this.ebn = null),
                (this.sbn = null),
                (this.zEi = -1),
                (this.WEi = -1),
                (this.nbn = ""),
                (this.rbn = ""),
                (this.hbn = ""),
                (this.obn = 1),
                (this.abn = 1),
                (this.kx = (t) => this.Gx(t)),
                (this.lbn = new Map()),
                (this.ubn = new ZC.oG(() => this.$yn(!0), u_)),
                (this.ii = null),
                (this.cbn = !0),
                (this.dbn = new ZC.Rect()),
                (this.fbn = 1),
                (this.dis = new ZC.oG(() => {
                    this.pis(), this.pbn(8, 8), this.mbn();
                }, i.timeout)),
                (this.yn = null),
                (this.di = !1),
                c_.add(this);
        }
        Ut() {
            (this.AC = null),
                this.Xyn.clear(),
                (this.mNe = null),
                (this.gx = null),
                (this.tbn = null),
                (this.ibn = null),
                (this.ebn = null),
                (this.sbn = null),
                (this.kx = null),
                this.$yn(),
                this.ubn.Ut(),
                this.dis.Ut(),
                (this.yn = null),
                this.pis(),
                this.wx._x(),
                (this.wx = null),
                (this.ci = null),
                (this.di = !0),
                c_.delete(this);
        }
        mbn() {
            this.Jyn = !0;
        }
        Ux() {
            this.mbn(), (this.Sx = !0);
        }
        Hx() {
            this.Ux(), (this.xx = !0);
        }
        lr(t) {
            if (((t = !!t), this.mx === t)) return;
            this.mx = t;
            const i = this.mx ? "alphabetic" : "top";
            this.ibn && (this.ibn.textBaseline = i), this.ebn && (this.ebn.textBaseline = i), this.$yn(), this.Hx();
        }
        CS() {
            return this.mx;
        }
        EC(t) {
            ZC.qm(t, ZC.bNe),
                this.mNe !== t &&
                    ((this.mNe = t),
                    this.wx.EC(t),
                    this.mNe && this.mNe.Kb() && this.mNe.Kni().then(() => this.mbn()),
                    this.Hx());
        }
        UC(t) {
            (t = !!t), this.qyn !== t && ((this.qyn = t), this.mbn());
        }
        Or(t) {
            ZC.vu(t), t || (t = "serif"), this.zyn !== t && ((this.zyn = t), this.$yn(), this.Hx());
        }
        jyn() {
            return this.zyn;
        }
        xn(t) {
            ZC.wi(t), t < 0.1 && (t = 0.1), this.A6s !== t && ((this.A6s = t), this.$yn(), this.Hx());
        }
        _ct() {
            return this.A6s;
        }
        wbn(t) {
            ZC.wi(t), this.Vyn !== t && ((this.Vyn = t), this.$yn(), this.Hx());
        }
        $y(t) {
            ZC.wi(t), this.Ox !== t && ((this.Ox = t), this.Ux());
        }
        TS() {
            return this.Ox;
        }
        HC(t) {
            (t = !!t), this.Wyn !== t && ((this.Wyn = t), this.$yn(), this.Hx());
        }
        gbn() {
            return this.Wyn;
        }
        ar(t) {
            (t = !!t), this.Hyn !== t && ((this.Hyn = t), this.$yn(), this.Hx());
        }
        ybn() {
            return this.Hyn;
        }
        Wx(t) {
            ZC.wi(t), (t = Math.floor(t)), this.Px !== t && ((this.Px = t), this.mbn());
        }
        Xx() {
            return this.Px;
        }
        bbn(t, i) {
            let e = [];
            (this.Wyn || i.wS("b")) && e.push("bold"), (this.Hyn || i.wS("i")) && e.push("italic");
            const s = i.Nx("size"),
                n = (s ? parseFloat(s.Ax) : this.A6s) * this.Vyn;
            t ? e.push(n + "pt") : e.push(n * this.vbn() + "pt");
            let r = this.zyn;
            const h = i.Nx("font");
            return (
                h && h.Ax && ((r = h.Ax), this.AC && !this.Xyn.has(r) && (this.AC(r), this.Xyn.add(r))),
                r && (i_.has(r) ? e.push(r) : e.push('"' + r + '"')),
                e.join(" ")
            );
        }
        Ki(t) {
            t instanceof ZC.nr && (t = t.tFe()), ZC.vu(t), this.Kyn !== t && ((this.Kyn = t), this.mbn());
        }
        Tn(t, i, e) {
            ZC.wi(t), ZC.wi(i), ZC.wi(e), s_.ih(t, i, e), this.Ki(s_);
        }
        vn(t) {
            if ((ZC.vu(t), !n_.has(t))) throw new Error("invalid horizontal alignment");
            this.Cx !== t && ((this.Cx = t), this.Ux());
        }
        Sbn() {
            return this.Cx;
        }
        Mn(t) {
            if ((ZC.vu(t), !r_.has(t))) throw new Error("invalid vertical alignment");
            this.vx !== t && ((this.vx = t), this.Ux());
        }
        xbn() {
            return this.vx;
        }
        By(t) {
            if (!h_.has(t)) throw new Error("invalid word wrap mode");
            this.yx !== t && ((this.yx = t), this.$yn(), this.Hx());
        }
        Mbn() {
            return this.yx;
        }
        WC(t) {
            if ((ZC.vu(t), !o_.has(t))) throw new Error("invalid text direction");
            this.Yyn !== t &&
                ((this.Yyn = t),
                this.ibn && (this.ibn.direction = this.Yyn),
                this.ebn && (this.ebn.direction = this.Yyn),
                this.$yn(),
                this.Hx());
        }
        Ebn() {
            return this.Yyn;
        }
        In(t) {
            ZC.vu(t), this.ux !== t && ((this.ux = t), this.$yn(), this.Hx());
        }
        E_() {
            return this.ux;
        }
        vbn() {
            return this.fbn * this.Qyn * self.devicePixelRatio;
        }
        zC(t) {
            (t = !!t), this.cbn !== t && ((this.cbn = t), (this.Zyn = !0));
        }
        Cbn() {
            return this.cbn;
        }
        en(t, i, e) {
            if ((ZC.wi(t), ZC.wi(i), ZC.HI(e), void 0 === e && (e = 1), t <= 0 || t <= 0)) return;
            if (this.hx === t && this.ox === i && this.Qyn === e) return;
            const s = this.hx;
            (this.hx = t), (this.ox = i), (this.Qyn = e);
            const n = self.devicePixelRatio;
            (this.RS = this.hx * this.Qyn * n), (this._S = this.ox * this.Qyn * n);
            const r = Math.max(this.RS, this._S),
                h = Math.min(this.ci._bn(), QC);
            let o = 1;
            r > h && ((o = h / r), (this.RS = Math.min(this.RS * o, h)), (this._S = Math.min(this._S * o, h))),
                (this.fbn = o),
                this.hx !== s ? this.Hx() : this.Ux();
        }
        rs() {
            return this.RS;
        }
        ls() {
            return this._S;
        }
        FC() {
            return this.Qyn;
        }
        OS() {
            return this.Yx(), this.wx.PS();
        }
        VS() {
            return this.Yx(), this.wx.HNe() + this.wx.kS() * (this.Ox + t_) - this.Ox;
        }
        Tbn() {
            this.Yx();
            let t = 0;
            for (const i of this.wx.qx()) for (const e of i.Qx()) t += e.vNe();
            return t;
        }
        Li() {
            return this.dis.fm(), this.Ibn(), this.ii;
        }
        $x(t, i) {
            this.Yx();
            const e = this.vbn(),
                s = this.wx.qx();
            for (const n of s) {
                const s = n.ONe() * e;
                if (i >= n.Jx() - n.ls() * e + s && i < n.Jx() + s)
                    for (const i of n.Qx()) if (t >= i.Kx() && t < i.Kx() + i.rs() * e) return i;
            }
            return null;
        }
        *Zx(t) {
            this.Yx();
            const i = this.wx.qx();
            for (const e of i)
                for (const i of e.Qx()) {
                    const e = i.Nx("tag");
                    e && ZC.iy(e.Ax, t) && (yield i);
                }
        }
        tS(t, i) {
            for (const e of this.Zx(t)) {
                if (0 === i) return e;
                --i;
            }
            return null;
        }
        eS(t) {
            let i = 0;
            for (const e of this.Zx(t)) ++i;
            return i;
        }
        Ibn() {
            (!this.ii || this.Jyn || this.Sx || this.xx || this.Zyn) &&
                (this.di || this.RS <= 0 || this._S <= 0 || this.Pbn());
        }
        Pbn() {
            this.di ||
                (this.Yx(),
                this.pbn(Math.max(ZC.Sn(Math.ceil(this.RS)), 128), Math.max(ZC.Sn(Math.ceil(this._S)), 64)),
                this.Gbn(),
                this.Abn(),
                this.dis.fm());
        }
        pbn(t, i) {
            this.tbn || (this.tbn = ZC.lx(16, 16));
            let e = !1;
            (this.zEi === t && this.WEi === i) ||
                ((this.zEi = t), (this.WEi = i), (this.tbn.width = t), (this.tbn.height = i), (e = !0)),
                this.ibn || ((this.ibn = this.tbn.getContext("2d")), (e = !0)),
                e
                    ? ((this.ibn.textBaseline = this.mx ? "alphabetic" : "top"),
                      (this.ibn.direction = this.Yyn),
                      (this.ibn.font = this.nbn),
                      (this.ibn.fillStyle = this.hbn),
                      (this.ibn.strokeStyle = this.hbn),
                      (this.ibn.globalAlpha = this.obn),
                      (this.ibn.lineWidth = this.abn))
                    : this.ibn.clearRect(0, 0, t, i);
        }
        Rbn() {
            this.ebn ||
                ((this.ebn = ZC.lx(16, 16).getContext("2d")),
                (this.sbn = ZC.lx(16, 16).getContext("2d")),
                (this.ebn.textBaseline = this.mx ? "alphabetic" : "top"),
                (this.sbn.textBaseline = "top"),
                (this.ebn.direction = this.Yyn),
                (this.sbn.direction = this.Yyn));
        }
        kbn(t) {
            this.rbn !== t && ((this.rbn = t), (this.ebn.font = t), (this.sbn.font = t));
        }
        Obn() {
            if (!p_) {
                (p_ = !0), this.Rbn();
                const t = this.ebn.measureText("test");
                m_ = "number" == typeof t.fontBoundingBoxAscent && "number" == typeof t.fontBoundingBoxDescent;
            }
            return m_;
        }
        Yx() {
            this.iS(), this.sS();
        }
        iS() {
            this.xx &&
                (this.Rbn(),
                !this.mx || (this.gx && this.gx.toString() === this.ux) || (this.gx = new ZC.nS(this.ux, { rS: !0 })),
                this.ubn.fm(),
                this.wx.bx(this.mx ? this.gx.aS() : this.ux, this.kx, this.hx, this.yx, 0),
                (this.xx = !1));
        }
        sS() {
            this.Sx && (this.lS(), (this.Sx = !1));
        }
        $yn(t) {
            this.lbn.clear(), t || this.ubn.jo();
        }
        Dbn(t, i) {
            const e = this.lbn;
            if ((e.set(t, i), e.size > a_)) {
                let t = 0;
                for (const i of e.keys()) if ((e.delete(i), t++, t >= l_)) break;
            }
        }
        Gx(t) {
            const i = t.cNe() ? t.Lx().join("") : " ",
                e = this.bbn(!0, t),
                s = e + "|" + i,
                n = this.lbn;
            let r = n.get(s);
            if (r) return n.delete(s), n.set(s, r), r;
            this.kbn(e);
            const h = this.ebn.measureText(i);
            let o = 0;
            if (this.mx && this.Obn()) {
                const t = this.sbn.measureText(i);
                o = h.fontBoundingBoxAscent - t.fontBoundingBoxAscent;
            }
            const a = t.Nx("size"),
                l = (a ? parseFloat(a.Ax) : this.A6s) * this.Vyn;
            var u;
            return (
                (r = {
                    width: h.width,
                    height: ((u = l), u * (4 / 3)),
                    fontBoundingBoxAscent: h.fontBoundingBoxAscent || 0,
                    fontBoundingBoxDescent: h.fontBoundingBoxDescent || 0,
                    rNe: o,
                }),
                this.Dbn(s, r),
                r
            );
        }
        Fbn(t) {
            this.nbn !== t && ((this.nbn = t), (this.ibn.font = t));
        }
        Lbn(t) {
            this.hbn !== t && ((this.hbn = t), (this.ibn.fillStyle = t), (this.ibn.strokeStyle = t));
        }
        Bbn(t) {
            this.obn !== t && ((this.obn = t), (this.ibn.globalAlpha = t));
        }
        Ubn(t) {
            this.abn !== t && ((this.abn = t), (this.ibn.lineWidth = t));
        }
        lS() {
            const t = this.vbn(),
                i = (t_ + this.Ox) * t;
            let e = 0;
            const s = this.wx.qx();
            if (0 === s.length) return;
            for (const t of s) {
                t.oS(NaN), t.cS(NaN);
                for (const i of t.Qx()) i.oS(NaN), i.cS(NaN);
            }
            const n = this.mx && this.Obn();
            let r = s[0].ls() * t;
            if ("center" === this.vx) {
                const h = s.reduce((e, s) => e + s.ls() * t + i, 0) - i;
                (e = Math.max(this._S / 2 - h / 2, 0)), n && (r = s[0].DNe() * t);
            } else if ("bottom" === this.vx) {
                const r = s.reduce((e, s) => e + s.ls() * t + i, 0) - this.Ox * t,
                    h = n ? s.at(-1).ONe() * t : 0;
                e = this._S - r - h - 2;
            }
            for (let n = 0, h = s.length; n < h; ++n) {
                const h = s[n],
                    o = h.ls() * t,
                    a = e;
                if (this.mx) {
                    if (((e += 0 === n ? r : o), n > 0 && e > this._S - t_ * t)) break;
                } else if (n > 0 && e >= this._S - o) break;
                a >= 0 && this.uS(h, e, t), this.mx || (e += o), (e += i);
            }
        }
        uS(t, i, e) {
            let s = 0;
            "center" === this.Cx
                ? (s = Math.floor((this.RS - t.rs() * e) / 2))
                : "right" === this.Cx && (s = this.RS - t.rs() * e),
                t.oS(s),
                t.cS(i);
            for (const n of "ltr" === this.Yyn ? t.Qx() : t.ZNe()) this.Nbn(n, s, i, e), (s += n.rs() * e);
        }
        Nbn(t, i, e, s) {
            const n = t.Nx("offsetx");
            i += n ? f_(n.Ax, t.ls()) * s : 0;
            const r = t.Nx("offsety");
            if (((e += r ? f_(r.Ax, t.ls()) * s : 0), t.Dx())) {
                const i = t.Nx("iconoffsety");
                e += i ? f_(i.Ax, t.ls()) * s : 0.2 * t.ls() * s;
            }
            t.oS(i), t.cS(e);
        }
        Gbn() {
            if (!this.Jyn) return;
            (this.ibn.imageSmoothingEnabled = this.qyn), (this.ibn.imageSmoothingQuality = "high"), (this.Vx = 0);
            const t = this.vbn(),
                i = this.wx.qx();
            for (const e of i) this.jbn(e, t);
            this.Jyn = !1;
        }
        jbn(t, i) {
            const e = t.Kx(),
                s = t.Jx();
            if (Number.isFinite(e) && Number.isFinite(s))
                for (const e of "ltr" === this.Yyn ? t.Qx() : t.ZNe()) this.mS(e, i, t.ls());
        }
        mS(t, i, e) {
            const s = this.ibn,
                n = t.Kx(),
                r = t.Jx();
            if (!Number.isFinite(n) || !Number.isFinite(r)) return;
            const h = e / 16;
            let o = t.rs() * i;
            const a = t.ls() * i,
                l = t.ls() / 16,
                u = (t_ + this.Ox) * i;
            let c = t.cNe() ? t.Lx() : null;
            if (-1 !== this.Px) {
                if (this.Vx >= this.Px) return;
                t.cNe() &&
                    this.Vx + c.length > this.Px &&
                    ((c = c.slice(0, this.Px - this.Vx)), (o = this.Gx(t).width * i)),
                    (this.Vx += t.vNe());
            }
            const d = t.Nx("background"),
                f = t.wS("u"),
                p = t.wS("s");
            if ((t.cNe() && ZC.gS(c) && !d && !f && !p) || t.wS("hide")) return;
            const m = t.Nx("color"),
                w = t.Nx("opacity");
            this.Bbn(w ? parseFloat(w.Ax) / 100 : 1), d && (this.Lbn(d.Ax), s.fillRect(n, r - a, o, a + u));
            const g = t.Nx("linethickness"),
                y = g ? parseFloat(g.Ax) : 1,
                b = t.wS("stroke");
            if ((b && this.Ubn(0.5 * l * y * this.vbn()), t.cNe())) {
                const i = c.join("");
                if ((this.Fbn(this.bbn(!1, t)), !b)) {
                    this.Ubn(0.5 * l * y * this.vbn());
                    const e = t.Nx("outlineback");
                    e && (this.Lbn(e.Ax), this.$bn(!0, i, n, r, o));
                }
                if ((this.Lbn(m ? m.Ax : this.Kyn), this.$bn(b, i, n, r, o), !b)) {
                    this.Ubn(0.5 * l * y * this.vbn());
                    const e = t.Nx("outline");
                    e && (this.Lbn(e.Ax), this.$bn(!0, i, n, r, o));
                }
            } else if (t.Dx() && t.rs() > 0) {
                const i = t.xi(this.mNe);
                i && s.drawImage(i, n, r - a, o, a);
            }
            if ((this.Lbn(m ? m.Ax : this.Kyn), f && d_(s, b, n, r + i * h, o, i * h * y), p)) {
                const t = i * l,
                    e = r - a / 4 + t / 2;
                s.fillRect(n, e - (t * y) / 2, o, t * y);
            }
        }
        $bn(t, i, e, s, n) {
            "rtl" === this.Yyn && (e += n),
                t
                    ? "Gecko" === ZC.fk.FRe
                        ? this.ibn.strokeText(i, e, s, n)
                        : this.ibn.strokeText(i, e, s)
                    : "Gecko" === ZC.fk.FRe
                      ? this.ibn.fillText(i, e, s, n)
                      : this.ibn.fillText(i, e, s);
        }
        Abn() {
            this.ci.fi() ||
                ((this.ii && !this.Zyn) ||
                    (this.pis(),
                    (this.ii = this.ci.DL(this.tbn.width, this.tbn.height, { _h: this.cbn, Dh: "high" })),
                    (this.Zyn = !1)),
                this.ci.HL(this.tbn, this.ii),
                this.dbn.set(0, 0, this.RS / this.ii.rs(), this._S / this.ii.ls()),
                this.yn && this.yn());
        }
        hn() {
            return this.dbn;
        }
        pis() {
            this.ii && (this.ci.fi() || this.ci.mi(this.ii), (this.ii = null));
        }
        static je() {
            for (const t of c_) t.pis();
        }
        static zbn() {
            return c_.values();
        }
    };
}
{
    const w_ = globalThis.t,
        g_ = globalThis.assert,
        y_ = 65535;
    function b_(t, i, e) {
        const s = e.ss(),
            n = e.ns(),
            r = e.gg() - s,
            h = e.Cr() - n;
        return [s + r * t + (e.ao() - s) * i, n + h * t + (e.lo() - n) * i];
    }
    (w_.bn.TX = class {
        constructor(t, i, e) {
            (this.Qmn = t),
                (this.twn = i),
                (this.Ucn = e),
                (this.tp = NaN),
                (this.ep = NaN),
                (this.rms = NaN),
                (this._u = NaN),
                (this._v = NaN),
                (this.tp = 0),
                (this.ep = 0),
                (this.rms = 0),
                (this._u = 0),
                (this._v = 0);
        }
        tIs(t, i, e, s) {
            (this.tp = t), (this.ep = i), (this._u = e), (this._v = s);
        }
        Yn() {
            return this.tp;
        }
        eu(t) {
            this.tp !== t && ((this.tp = t), this.Qmn.iwn());
        }
        qn() {
            return this.ep;
        }
        iu(t) {
            this.ep !== t && ((this.ep = t), this.Qmn.iwn());
        }
        FL() {
            return this.rms;
        }
        aie(t) {
            this.rms !== t && ((this.rms = Math.max(t, 0)), this.Qmn.iwn());
        }
        L4() {
            return this._u;
        }
        j4(t) {
            this._u = t;
        }
        W4() {
            return this._v;
        }
        X4(t) {
            this._v = t;
        }
        ewn(t, i, e) {
            ([this.tp, this.ep] = b_(t.tp, t.ep, i)),
                (this.rms = t.rms),
                (this._u = w_.bt(e.un(), e.Rr(), t._u)),
                (this._v = w_.bt(e.pn(), e._r(), t._v));
        }
        swn(t, i, e) {
            ([this.tp, this.ep] = b_(t.tp, t.ep, i)), (this.rms = t.rms), ([this._u, this._v] = b_(t._u, t._v, e));
        }
        QI() {
            return { x: this.Yn(), y: this.qn(), z: this.FL(), u: this.L4(), v: this.W4() };
        }
        gls(t) {
            this.eu(t.x), this.iu(t.y), t.hasOwnProperty("z") && this.aie(t.z), this.j4(t.u), this.X4(t.v);
        }
        Ll() {
            return this.Qmn;
        }
        Gle() {
            return this.twn;
        }
        Ple() {
            return this.Ucn;
        }
    }),
        (w_.bn.CSs = class {
            constructor(t, i, e) {
                if (t < 2 || i < 2) throw new Error("invalid mesh size");
                (this.nwn = t),
                    (this.rwn = i),
                    (this.jvs = e || null),
                    (this.hwn = []),
                    (this.own = 0),
                    (this.awn = 0),
                    (this.lwn = 1),
                    (this.uwn = 1),
                    (this.cwn = 0),
                    (this.dwn = !1),
                    (this.fwn = []),
                    (this.pwn = 0),
                    (this.mwn = !0);
                const s = t - 1,
                    n = i - 1;
                for (let e = 0; e < i; ++e) {
                    const i = [];
                    for (let r = 0; r < t; ++r) {
                        const t = w_.m(w_.bn.TX, this, r, e),
                            h = r / s,
                            o = e / n;
                        t.tIs(h, o, h, o), i.push(t);
                    }
                    this.hwn.push(i);
                }
            }
            Ut() {
                w_.yh(this.hwn), w_.yh(this.fwn);
            }
            Hn() {
                return this.nwn;
            }
            Wn() {
                return this.rwn;
            }
            kte() {
                return this.jvs;
            }
            PSs() {
                return this.hwn;
            }
            iwn() {
                (this.dwn = !0), (this.mwn = !0);
            }
            wwn() {
                if (!this.dwn) return;
                let t = 1 / 0,
                    i = 1 / 0,
                    e = -1 / 0,
                    s = -1 / 0,
                    n = 0;
                for (const r of this.hwn)
                    for (const h of r) {
                        const r = h.Yn(),
                            o = h.qn();
                        (t = Math.min(t, r)),
                            (i = Math.min(i, o)),
                            (e = Math.max(e, r)),
                            (s = Math.max(s, o)),
                            (n = Math.max(n, h.FL()));
                    }
                (this.own = t), (this.awn = i), (this.lwn = e), (this.uwn = s), (this.cwn = n), (this.dwn = !1);
            }
            I9() {
                return this.wwn(), this.own;
            }
            M9() {
                return this.wwn(), this.awn;
            }
            G9() {
                return this.wwn(), this.lwn;
            }
            O9() {
                return this.wwn(), this.uwn;
            }
            gwn() {
                return this.wwn(), this.cwn;
            }
            Kei() {
                return this.gwn() > 0;
            }
            Xn(t, i) {
                return (
                    (t = Math.floor(t)),
                    (i = Math.floor(i)),
                    t < 0 || t >= this.nwn || i < 0 || i >= this.rwn ? null : this.hwn[i][t]
                );
            }
            _Ss(t, i, e) {
                w_.Et(t, w_.bn.CSs), w_.Et(i, w_.Bi), w_.UM(e, w_.Rect, w_.Bi);
                const s = e instanceof w_.Rect;
                if (t.Hn() !== this.Hn() || t.Wn() !== this.Wn()) throw new Error("source mesh wrong size");
                const n = t.hwn,
                    r = this.hwn;
                for (let t = 0, h = r.length; t < h; ++t) {
                    const h = n[t],
                        o = r[t];
                    for (let t = 0, n = o.length; t < n; ++t) {
                        const n = h[t],
                            r = o[t];
                        s ? r.ewn(n, i, e) : r.swn(n, i, e);
                    }
                }
                this.mwn = !0;
            }
            ywn(t) {
                if (!this.mwn && this.pwn === t) return;
                const i = this.nwn,
                    e = this.rwn,
                    s = this.fwn,
                    n = Math.floor(y_ / i) - 1;
                if (n <= 0) throw new Error("mesh too large");
                const r = Math.ceil((e - 1) / n);
                r < s.length && (s.length = r);
                let h = 0;
                for (let o = 0; o < r; ++o) {
                    const r = Math.min(n, e - h - 1);
                    g_(r > 0, "invalid mesh chunk");
                    const a = (r + 1) * i,
                        l = 3 * a,
                        u = 2 * a,
                        c = (i - 1) * r * 6;
                    if (o === s.length)
                        s.push({ bwn: new Float32Array(l), vwn: new Float32Array(u), Swn: new Uint16Array(c) });
                    else {
                        const t = s[o];
                        t.bwn.length !== l && (t.bwn = new Float32Array(l)),
                            t.vwn.length !== u && (t.vwn = new Float32Array(u)),
                            t.Swn.length !== c && (t.Swn = new Uint16Array(c));
                    }
                    const { bwn: d, vwn: f, Swn: p } = s[o];
                    this.xwn(h, r, t, d, f, p), (h += n);
                }
                (this.pwn = t), (this.mwn = !1);
            }
            xwn(t, i, e, s, n, r) {
                const h = this.hwn,
                    o = this.nwn;
                let a = 0,
                    l = 0,
                    u = 0;
                for (let c = t, d = t + i + 1; c < d; ++c) {
                    const i = h[c],
                        f = c + 1,
                        p = c - t,
                        m = p * o,
                        w = (p + 1) * o;
                    for (let t = 0, h = i.length; t < h; ++t) {
                        const o = i[t],
                            c = t + 1;
                        if (
                            ((s[a++] = o.Yn()),
                            (s[a++] = o.qn()),
                            (s[a++] = o.FL() + e),
                            (n[l++] = o.L4()),
                            (n[l++] = o.W4()),
                            c < h && f < d)
                        ) {
                            const i = t + m,
                                e = c + m,
                                s = c + w,
                                n = t + w;
                            (r[u++] = i), (r[u++] = e), (r[u++] = s), (r[u++] = i), (r[u++] = s), (r[u++] = n);
                        }
                    }
                }
            }
            qi(t, i) {
                this.ywn(i);
                for (const { bwn: i, vwn: e, Swn: s } of this.fwn) t.$l(i, e, s);
            }
            Fbs(t, i) {
                i || (i = (t, i, e) => [t, i, e]);
                const e = this.hwn;
                let s = e[0];
                for (let n = 1, r = e.length; n < r; ++n) {
                    const h = e[n];
                    let o = s[0],
                        a = h[0];
                    for (let e = 1, l = h.length; e < l; ++e) {
                        const u = s[e],
                            c = h[e],
                            [d, f, p] = i(o.Yn(), o.qn(), o.FL()),
                            [m, w, g] = i(u.Yn(), u.qn(), u.FL()),
                            [y, b, v] = i(c.Yn(), c.qn(), c.FL()),
                            [S, x, M] = i(a.Yn(), a.qn(), a.FL());
                        t.ah(d, f, p, m, w, g),
                            t.ah(d, f, p, y, b, v),
                            t.ah(d, f, p, S, x, M),
                            e === l - 1 && t.ah(m, w, g, y, b, v),
                            n === r - 1 && t.ah(S, x, M, y, b, v),
                            (o = u),
                            (a = c);
                    }
                    s = h;
                }
            }
            jws(t) {
                const i = 0.001,
                    e = 0.99999999,
                    s = t.yus(),
                    n = [],
                    r = this.Hn() - 1,
                    h = this.Wn() - 1,
                    o = 1 / r,
                    a = 1 / h,
                    l = r - 1,
                    u = h - 1;
                let c = s[0],
                    d = s[1],
                    f = w_.ft(Math.floor(c * r), 0, l),
                    p = w_.ft(Math.floor(d * h), 0, u),
                    m = !0,
                    w = 0,
                    g = 0,
                    y = 0;
                let b = -1;
                const v = () => {
                    (c = w_.ft(w_.bt(c, w, y), 0, 1)), (d = w_.ft(w_.bt(d, g, y), 0, 1)), n.push(c, d);
                };
                for (let t = 0, S = s.length; t < S; t += 2) {
                    (c = s[t]),
                        (d = s[t + 1]),
                        n.push(c, d),
                        (f = w_.ft(Math.floor(c * r), 0, l)),
                        (p = w_.ft(Math.floor(d * h), 0, u));
                    const x = (t + 2) % S;
                    for (w = s[x], g = s[x + 1], b = -1; ; ) {
                        if (n.length > 1e6) throw new Error("Too many mesh poly points");
                        const t = f * o,
                            s = p * a,
                            r = (f + 1) * o,
                            h = (p + 1) * a;
                        if (
                            ((m = w_.ODe(c, d, t, s, r, s, r, h)),
                            0 !== b && ((y = w_.kDe(c, d, w, g, t, s, r, h, -0.001)), y >= 0 && y <= e))
                        )
                            v(), (m = !m), (b = 0);
                        else if (p > 0 && 2 !== b && ((y = w_.kDe(c, d, w, g, t, s, r, s, i)), y >= 0 && y <= e))
                            v(), p--, (m = !1), (b = 4);
                        else if (f < l && 3 !== b && ((y = w_.kDe(c, d, w, g, r, s, r, h, i)), y >= 0 && y <= e))
                            v(), f++, (m = !1), (b = 1);
                        else if (f > 0 && 1 !== b && ((y = w_.kDe(c, d, w, g, t, s, t, h, i)), y >= 0 && y <= e))
                            v(), f--, (m = !0), (b = 3);
                        else {
                            if (!(p < u && 4 !== b && ((y = w_.kDe(c, d, w, g, t, h, r, h, i)), y >= 0 && y <= e)))
                                break;
                            v(), p++, (m = !0), (b = 2);
                        }
                    }
                }
                return w_.m(w_.df, n);
            }
            Rws(t, i) {
                const e = this.Mwn(t);
                this.Ewn(e), i.wus(e);
            }
            Mwn(t) {
                const i = [],
                    e = t.yus();
                for (let t = 0, s = e.length; t < s; t += 2) {
                    const s = e[t],
                        n = e[t + 1],
                        [r, h] = this.Cwn(s, n);
                    i.push(r, h);
                }
                return i;
            }
            Cwn(t, i) {
                const e = this.Hn() - 1,
                    s = this.Wn() - 1,
                    n = 1 / e,
                    r = 1 / s,
                    h = w_.ft(Math.floor(t * e), 0, e - 1),
                    o = w_.ft(Math.floor(i * s), 0, s - 1),
                    a = h * n,
                    l = o * r,
                    u = (h + 1) * n,
                    c = (o + 1) * r,
                    d = this.Xn(h, o),
                    f = this.Xn(h + 1, o + 1),
                    p = w_.ODe(t, i, a, l, u, l, u, c),
                    m = p ? a + n : a,
                    w = p ? l : l + r,
                    g = this.Xn(h + (p ? 1 : 0), o + (p ? 0 : 1)),
                    [y, b, v] = w_.DDe(t, i, a, l, m, w, u, c);
                return w_.FDe(y, b, v, d.Yn(), d.qn(), d.FL(), g.Yn(), g.qn(), g.FL(), f.Yn(), f.qn(), f.FL());
            }
            Ewn(t) {
                const i = [],
                    e = 1e-7;
                let s = t[0],
                    n = t[1],
                    r = s - t.at(-2),
                    h = n - t.at(-1);
                for (let o = 0, a = t.length; o < a; o += 2) {
                    const l = (o + 2) % a,
                        u = t[l],
                        c = t[l + 1],
                        d = u - s,
                        f = c - n,
                        p = Math.abs(d) < e && Math.abs(r) < e && Math.sign(f) === Math.sign(h),
                        m = Math.abs(f) < e && Math.abs(h) < e && Math.sign(d) === Math.sign(r);
                    ((!p && !m && Math.abs(d / r - f / h) > 0.001) || (0 == d && 0 === f)) && i.push(s, n),
                        (s = u),
                        (n = c),
                        (r = d),
                        (h = f);
                }
                i.length >= 6 && i.length < t.length && w_.Rm(t, i);
            }
            QI() {
                return { cols: this.Hn(), rows: this.Wn(), points: this.hwn.map((t) => t.map((t) => t.QI())) };
            }
            gls(t) {
                const i = this.Hn(),
                    e = this.Wn();
                if (t.cols !== i || t.rows !== e) throw new Error("mesh data wrong size");
                const s = t.points;
                for (let t = 0; t < e; ++t) {
                    const e = s[t];
                    for (let s = 0; s < i; ++s) {
                        this.Xn(s, t).gls(e[s]);
                    }
                }
            }
        });
}
{
    const v_ = self.t,
        S_ = self.sG.eG,
        x_ = new Map([
            ["float", 1],
            ["percent", 1],
            ["sampler", 1],
            ["vec2", 2],
            ["vec3", 3],
            ["color", 3],
            ["vec4", 4],
            ["mat4", 16],
        ]);
    v_.bn.Vbn = class {
        constructor(t, i, e) {
            if (!x_.has(e)) throw new Error("invalid uniform type");
            (this.jvs = t),
                (this.Wbn = this.jvs.Hbn()),
                (this.Gqt = i),
                (this.Osi = e),
                (this.Kbn = "color" === this.Osi),
                (this.qbn = this.Wbn.getUniformLocation(this.jvs.ghs(), i)),
                (this.Xbn = !!this.qbn);
            const s = x_.get(e);
            (this.u7e = new Float32Array(s)), (this.Ybn = new Float32Array(s));
        }
        Ut() {
            (this.jvs = null), (this.Wbn = null), (this.qbn = null);
        }
        Jbn() {
            return this.Xbn;
        }
        lmt() {
            return this.Osi;
        }
        Zbn() {
            return this.Kbn;
        }
        Qbn(t) {
            this.Jbn() && ((this.u7e[0] = t), this.Ybn.set(this.u7e), this.Wbn.uniform1f(this.qbn, t));
        }
        tvn(t) {
            this.Jbn() && ((this.u7e[0] = t), this.Ybn.set(this.u7e), this.Wbn.uniform1i(this.qbn, t));
        }
        ivn(t, i) {
            this.Jbn() &&
                ((this.u7e[0] = t), (this.u7e[1] = i), this.Ybn.set(this.u7e), this.Wbn.uniform2f(this.qbn, t, i));
        }
        evn(t, i, e) {
            this.Jbn() &&
                ((this.u7e[0] = t),
                (this.u7e[1] = i),
                (this.u7e[2] = e),
                this.Ybn.set(this.u7e),
                this.Wbn.uniform3f(this.qbn, t, i, e));
        }
        svn(t, i, e, s) {
            this.Jbn() &&
                ((this.u7e[0] = t),
                (this.u7e[1] = i),
                (this.u7e[2] = e),
                (this.u7e[3] = s),
                this.Ybn.set(this.u7e),
                this.Wbn.uniform4f(this.qbn, t, i, e, s));
        }
        nvn(t) {
            t = Math.fround(t);
            const i = this.u7e;
            i[0] !== t && ((i[0] = t), this.Wbn.uniform1f(this.qbn, t));
        }
        rvn(t) {
            const i = this.u7e;
            i[0] !== t && ((i[0] = t), this.Wbn.uniform1i(this.qbn, t));
        }
        hvn(t, i) {
            (t = Math.fround(t)), (i = Math.fround(i));
            const e = this.u7e;
            (e[0] === t && e[1] === i) || ((e[0] = t), (e[1] = i), this.Wbn.uniform2f(this.qbn, t, i));
        }
        ovn(t, i, e) {
            (t = Math.fround(t)), (i = Math.fround(i)), (e = Math.fround(e));
            const s = this.u7e;
            (s[0] === t && s[1] === i && s[2] === e) ||
                ((s[0] = t), (s[1] = i), (s[2] = e), this.Wbn.uniform3f(this.qbn, t, i, e));
        }
        avn(t, i, e, s) {
            (t = Math.fround(t)), (i = Math.fround(i)), (e = Math.fround(e)), (s = Math.fround(s));
            const n = this.u7e;
            (n[0] === t && n[1] === i && n[2] === e && n[3] === s) ||
                ((n[0] = t), (n[1] = i), (n[2] = e), (n[3] = s), this.Wbn.uniform4f(this.qbn, t, i, e, s));
        }
        lvn(t) {
            const i = this.u7e;
            S_.wMe(i, t) || (v_.pOe(i, t, 0), this.Wbn.uniformMatrix4fv(this.qbn, !1, t));
        }
        uvn(t) {
            const i = this.Ybn;
            return this.Zbn()
                ? i[0] === Math.fround(t.getR()) && i[1] === Math.fround(t.getG()) && i[2] === Math.fround(t.getB())
                : i[0] === Math.fround(t);
        }
        cvn(t) {
            const i = this.Ybn;
            this.Zbn() ? ((i[0] = t.getR()), (i[1] = t.getG()), (i[2] = t.getB())) : (i[0] = t);
        }
        dvn(t) {
            return this.Ybn[0] === Math.fround(t);
        }
        fvn(t, i) {
            const e = this.Ybn;
            return e[0] === Math.fround(t) && e[1] === Math.fround(i);
        }
        pvn(t) {
            this.Ybn[0] = t;
        }
        mvn(t, i) {
            const e = this.Ybn;
            (e[0] = t), (e[1] = i);
        }
    };
}
{
    const M_ = self.t,
        E_ = self.sG,
        C_ =
            (E_.hG,
            E_.eG,
            new Set([
                "aPos",
                "aTex",
                "aColor",
                "aPoints",
                "matP",
                "matMV",
                "samplerFront",
                "samplerBack",
                "samplerDepth",
                "destStart",
                "destEnd",
                "srcStart",
                "srcEnd",
                "srcOriginStart",
                "srcOriginEnd",
                "pixelSize",
                "seconds",
                "devicePixelRatio",
                "layerScale",
                "layerAngle",
                "layoutStart",
                "layoutEnd",
                "color",
                "color2_",
                "pointTexStart",
                "pointTexEnd",
                "zElevation",
                "tileSize",
                "tileSpacing",
                "outlineThickness",
                "zNear",
                "zFar",
            ]));
    M_.bn.wvn = class extends M_.bn.pyn {
        static async gvn(t, i) {
            const e = t.eZt(),
                s = i.src,
                n = i.yvn,
                r = i.name,
                h = e.createShader(e.FRAGMENT_SHADER);
            e.shaderSource(h, s), e.compileShader(h);
            const o = e.createShader(e.VERTEX_SHADER);
            e.shaderSource(o, n), e.compileShader(o);
            const a = e.createProgram();
            e.attachShader(a, h),
                e.attachShader(a, o),
                e.bindAttribLocation(a, 0, "aPos"),
                e.bindAttribLocation(a, 1, "aTex"),
                e.bindAttribLocation(a, 2, "aColor"),
                e.bindAttribLocation(a, 3, "aPoints"),
                e.linkProgram(a);
            const l = t.bvn();
            if (
                (l ? await t.vvn(() => e.getProgramParameter(a, l.COMPLETION_STATUS_KHR)) : await M_.STi(5),
                !e.getShaderParameter(h, e.COMPILE_STATUS))
            ) {
                const t = e.getShaderInfoLog(h);
                throw (
                    (e.deleteShader(h),
                    e.deleteShader(o),
                    e.deleteProgram(a),
                    new Error("Error compiling fragment shader: " + t))
                );
            }
            if (!e.getShaderParameter(o, e.COMPILE_STATUS)) {
                const t = e.getShaderInfoLog(o);
                throw (
                    (e.deleteShader(h),
                    e.deleteShader(o),
                    e.deleteProgram(a),
                    new Error("Error compiling vertex shader: " + t))
                );
            }
            if (!e.getProgramParameter(a, e.LINK_STATUS)) {
                const t = e.getProgramInfoLog(a);
                throw (
                    (e.deleteShader(h),
                    e.deleteShader(o),
                    e.deleteProgram(a),
                    new Error("Error linking shader program: " + t))
                );
            }
            const u = M_.WBe(e.getProgramInfoLog(a) || "").trim();
            return (
                u && !M_.zBe(u) && console.info(`[WebGL] Shader program '${r}' compilation log: `, u),
                e.deleteShader(h),
                e.deleteShader(o),
                a
            );
        }
        static async mF(t, i) {
            const e = await M_.bn.wvn.gvn(t, i);
            return new M_.bn.wvn(t, e, i);
        }
        constructor(t, i, e) {
            super(t, e);
            const s = t.eZt(),
                n = t.Svn();
            t.eyn(),
                s.useProgram(i),
                (this.Wbn = s),
                (this.$mn = i),
                (this.xvn = "<default-device-transform>" === e.name);
            const r = s.getAttribLocation(i, "aPos"),
                h = s.getAttribLocation(i, "aTex"),
                o = s.getAttribLocation(i, "aColor");
            (this.Mvn = s.getAttribLocation(i, "aPoints")),
                -1 !== r &&
                    (s.bindBuffer(s.ARRAY_BUFFER, t.Evn),
                    s.vertexAttribPointer(r, 3, s.FLOAT, !1, 0, 0),
                    s.enableVertexAttribArray(r)),
                -1 !== h &&
                    (s.bindBuffer(s.ARRAY_BUFFER, t.Cvn),
                    s.vertexAttribPointer(h, 2, s.FLOAT, !1, 0, 0),
                    s.enableVertexAttribArray(h)),
                -1 !== o &&
                    (s.bindBuffer(s.ARRAY_BUFFER, t._vn),
                    s.vertexAttribPointer(o, 4, t.Tvn() ? s.HALF_FLOAT : s.FLOAT, !1, 0, 0),
                    s.enableVertexAttribArray(o)),
                -1 !== this.Mvn &&
                    (s.bindBuffer(s.ARRAY_BUFFER, t.Ivn),
                    s.vertexAttribPointer(this.Mvn, 4, s.FLOAT, !1, 0, 0),
                    s.enableVertexAttribArray(this.Mvn)),
                s.bindBuffer(s.ARRAY_BUFFER, null),
                (this.Pvn = new M_.bn.Vbn(this, "matP", "mat4")),
                (this.Gvn = new M_.bn.Vbn(this, "matMV", "mat4")),
                (this.Avn = new M_.bn.Vbn(this, "color", "vec4")),
                (this.Rvn = new M_.bn.Vbn(this, "samplerFront", "sampler")),
                (this.kvn = new M_.bn.Vbn(this, "pointTexStart", "vec2")),
                (this.Ovn = new M_.bn.Vbn(this, "pointTexEnd", "vec2")),
                (this.Dvn = new M_.bn.Vbn(this, "zElevation", "float")),
                (this.Fvn = new M_.bn.Vbn(this, "tileSize", "vec2")),
                (this.Lvn = new M_.bn.Vbn(this, "tileSpacing", "vec2")),
                (this.Bvn = new M_.bn.Vbn(this, "color2_", "vec4")),
                (this.Uvn = new M_.bn.Vbn(this, "outlineThickness", "float")),
                (this.Nvn = new M_.bn.Vbn(this, "samplerBack", "sampler")),
                (this.jvn = new M_.bn.Vbn(this, "samplerDepth", "sampler")),
                (this.$vn = new M_.bn.Vbn(this, "destStart", "vec2")),
                (this.zvn = new M_.bn.Vbn(this, "destEnd", "vec2")),
                (this.Vvn = new M_.bn.Vbn(this, "srcStart", "vec2")),
                (this.Wvn = new M_.bn.Vbn(this, "srcEnd", "vec2")),
                (this.Hvn = new M_.bn.Vbn(this, "srcOriginStart", "vec2")),
                (this.Kvn = new M_.bn.Vbn(this, "srcOriginEnd", "vec2")),
                (this.qvn = new M_.bn.Vbn(this, "pixelSize", "vec2")),
                (this.Xvn = new M_.bn.Vbn(this, "seconds", "float")),
                (this.Yvn = new M_.bn.Vbn(this, "devicePixelRatio", "float")),
                (this.Jvn = new M_.bn.Vbn(this, "layerScale", "float")),
                (this.Zvn = new M_.bn.Vbn(this, "layerAngle", "float")),
                (this.Qvn = new M_.bn.Vbn(this, "layoutStart", "vec2")),
                (this.tSn = new M_.bn.Vbn(this, "layoutEnd", "vec2")),
                (this.iSn = new M_.bn.Vbn(this, "zNear", "float")),
                (this.eSn = new M_.bn.Vbn(this, "zFar", "float")),
                (this.sSn = !!(
                    this.qvn.Jbn() ||
                    this.Xvn.Jbn() ||
                    this.Nvn.Jbn() ||
                    this.$vn.Jbn() ||
                    this.zvn.Jbn() ||
                    this.Vvn.Jbn() ||
                    this.Wvn.Jbn() ||
                    this.Hvn.Jbn() ||
                    this.Kvn.Jbn() ||
                    this.Yvn.Jbn() ||
                    this.Jvn.Jbn() ||
                    this.Zvn.Jbn() ||
                    this.Qvn.Jbn() ||
                    this.tSn.Jbn()
                ));
            const a = e.parameters || [];
            (this.nSn = []),
                (this.Gyn = this.qvn.Jbn() || this.Vvn.Jbn() || this.Wvn.Jbn() || this.Hvn.Jbn() || this.Kvn.Jbn()),
                (this.rSn = !1),
                (this.hSn = !1),
                this.Avn.svn(1, 1, 1, 1),
                this.Bvn.svn(1, 1, 1, 1),
                this.Rvn.tvn(0),
                this.Nvn.tvn(1),
                this.jvn.tvn(2),
                this.kvn.ivn(0, 0),
                this.Ovn.ivn(1, 1),
                this.Dvn.Qbn(0),
                this.Fvn.ivn(0, 0),
                this.Lvn.ivn(0, 0),
                this.$vn.ivn(0, 0),
                this.zvn.ivn(1, 1),
                this.Vvn.ivn(0, 0),
                this.Wvn.ivn(0, 0),
                this.Hvn.ivn(0, 0),
                this.Kvn.ivn(0, 0),
                this.qvn.ivn(0, 0),
                this.Yvn.Qbn(1),
                this.iSn.Qbn(t.aX()),
                this.eSn.Qbn(t.cX()),
                this.Jvn.Qbn(1),
                this.Zvn.Qbn(0),
                this.Xvn.Qbn(0),
                this.Qvn.ivn(0, 0),
                this.tSn.ivn(0, 0),
                this.Uvn.Qbn(1);
            for (const t of a) {
                const i = t[0],
                    e = t[2],
                    s = new M_.bn.Vbn(this, i, e);
                "color" === e ? s.evn(0, 0, 0) : s.Qbn(0), this.nSn.push(s);
            }
            this.xvn ? this.oSn(n.aSn) : (this.lSn(n.aSn, !0), this.uSn(n.cSn, !0));
            const l = n.dSn;
            s.useProgram(l ? l.$mn : null);
        }
        Ut() {
            this.Wbn.deleteProgram(this.$mn), (this.$mn = null), this.ci.wgn(this), (this.Wbn = null), super.Ut();
        }
        Hbn() {
            return this.Wbn;
        }
        ghs() {
            return this.$mn;
        }
        I$t() {
            return this.nSn.length;
        }
        fSn(t) {
            return t < 0 || t >= this.nSn.length ? null : this.nSn[t].lmt();
        }
        pSn(t) {
            for (let i = 0, e = t.length; i < e; ++i) if (!this.nSn[i].uvn(t[i])) return !1;
            return !0;
        }
        mSn(t) {
            for (let i = 0, e = t.length; i < e; ++i) this.nSn[i].cvn(t[i]);
        }
        wSn(t, i, e, s, n, r, h, o, a, l) {
            return (
                !this.Nvn.Jbn() &&
                !(this.qvn.Jbn() && !this.qvn.fvn(n, r)) &&
                !(this.$vn.Jbn() && !this.$vn.fvn(t.un(), t.pn())) &&
                !(this.zvn.Jbn() && !this.zvn.fvn(t.Rr(), t._r())) &&
                !(this.Yvn.Jbn() && !this.Yvn.dvn(h)) &&
                !(this.Jvn.Jbn() && !this.Jvn.dvn(o)) &&
                !(this.Zvn.Jbn() && !this.Zvn.dvn(a)) &&
                !(this.Vvn.Jbn() && !this.Vvn.fvn(i.un(), i.pn())) &&
                !(this.Wvn.Jbn() && !this.Wvn.fvn(i.Rr(), i._r())) &&
                !(this.Hvn.Jbn() && !this.Hvn.fvn(e.un(), e.pn())) &&
                !(this.Kvn.Jbn() && !this.Kvn.fvn(e.Rr(), e._r())) &&
                !(this.Qvn.Jbn() && !this.Qvn.fvn(s.un(), s.pn())) &&
                !(this.tSn.Jbn() && !this.tSn.fvn(s.pn(), s._r())) &&
                !(this.Xvn.Jbn() && !this.Xvn.dvn(l))
            );
        }
        gSn(t, i, e, s, n, r, h, o, a, l) {
            this.Nvn.Jbn() ||
                (this.qvn.Jbn() && this.qvn.mvn(n, r),
                this.$vn.Jbn() && this.$vn.mvn(t.un(), t.pn()),
                this.zvn.Jbn() && this.zvn.mvn(t.Rr(), t._r()),
                this.Yvn.Jbn() && this.Yvn.pvn(h),
                this.Jvn.Jbn() && this.Jvn.pvn(o),
                this.Zvn.Jbn() && this.Zvn.pvn(a),
                this.Vvn.Jbn() && this.Vvn.mvn(i.un(), i.pn()),
                this.Wvn.Jbn() && this.Wvn.mvn(i.Rr(), i._r()),
                this.Hvn.Jbn() && this.Hvn.mvn(e.un(), e.pn()),
                this.Kvn.Jbn() && this.Kvn.mvn(e.Rr(), e._r()),
                this.Qvn.Jbn() && this.Qvn.mvn(s.un(), s.pn()),
                this.tSn.Jbn() && this.tSn.mvn(s.pn(), s._r()),
                this.Xvn.Jbn() && this.Xvn.pvn(l));
        }
        lSn(t, i) {
            (this.rSn && !i) || this.xvn || (this.Pvn.Jbn() && this.Pvn.lvn(t), (this.rSn = !0));
        }
        ySn() {
            this.rSn = !1;
        }
        uSn(t, i) {
            (this.hSn && !i) || this.xvn || (this.Gvn.Jbn() && this.Gvn.lvn(t), (this.hSn = !0));
        }
        bSn() {
            this.hSn = !1;
        }
        oSn(t) {
            if (!this.xvn) throw new Error("not device transform shader");
            this.Pvn.lvn(t);
            const i = this.ci,
                e = i.rs() / 2,
                s = i.ls() / 2,
                n = i.Yz(e, s, i.Rn(i.ls()), e, s, 0, i.ls());
            this.Gvn.lvn(n);
        }
        oSi(t) {
            this.Avn.Jbn() && this.Avn.avn(t[0], t[1], t[2], t[3]);
        }
        static vSn() {
            return C_;
        }
        static SSn(t) {
            return t
                ? "\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t"
                : "";
        }
        static xSn(t) {
            const i = t ? "highp" : "mediump";
            return [
                "attribute highp vec3 aPos;",
                `attribute ${i} vec2 aTex;`,
                `varying ${i} vec2 vTex;`,
                "attribute lowp vec4 aColor;",
                "varying lowp vec4 vColor;",
                "uniform highp mat4 matP;",
                "uniform highp mat4 matMV;",
                "void main(void) {",
                "\tgl_Position = matP * matMV * vec4(aPos, 1.0);",
                "\tvTex = aTex;",
                "\tvColor = aColor;",
                "}",
            ].join("\n");
        }
        static MSn(t) {
            const i = t ? "highp" : "mediump";
            return [
                "#version 300 es",
                "in highp vec3 aPos;",
                `in ${i} vec2 aTex;`,
                `out ${i} vec2 vTex;`,
                "in lowp vec4 aColor;",
                "out lowp vec4 vColor;",
                "uniform highp mat4 matP;",
                "uniform highp mat4 matMV;",
                "void main(void) {",
                "\tgl_Position = matP * matMV * vec4(aPos, 1.0);",
                "\tvTex = aTex;",
                "\tvColor = aColor;",
                "}",
            ].join("\n");
        }
        static ESn() {
            return [
                "varying mediump vec2 vTex;",
                "varying lowp vec4 vColor;",
                "uniform lowp sampler2D samplerFront;",
                "void main(void) {",
                "\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;",
                "}",
            ].join("\n");
        }
        static CSn() {
            return [
                "#extension GL_EXT_frag_depth : enable",
                "varying mediump vec2 vTex;",
                "varying lowp vec4 vColor;",
                "uniform lowp sampler2D samplerFront;",
                "void main(void) {",
                "\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;",
                "\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);",
                "}",
            ].join("\n");
        }
        static _Sn(t) {
            return [
                "#version 300 es",
                M_.bn.wvn.SSn(t),
                "in mediump vec2 vTex;",
                "out lowp vec4 outColor;",
                "in lowp vec4 vColor;",
                "uniform lowp sampler2D samplerFront;",
                "void main(void) {",
                "\toutColor = texture(samplerFront, vTex) * vColor;",
                "\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);",
                "}",
            ].join("\n");
        }
        static TSn() {
            return [
                "varying highp vec2 vTex;",
                "varying lowp vec4 vColor;",
                "uniform lowp sampler2D samplerFront;",
                "uniform highp vec2 srcStart;",
                "uniform highp vec2 pixelSize;",
                "uniform highp vec2 tileSize;",
                "uniform highp vec2 tileSpacing;",
                "void main(void) {",
                "\thighp vec2 tile = floor(vTex);",
                "\thighp vec2 tex = fract(vTex);",
                "\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);",
                "\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;",
                "\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;",
                "\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;",
                "}",
            ].join("\n");
        }
        static ISn() {
            return [
                "#extension GL_EXT_frag_depth : enable",
                "varying highp vec2 vTex;",
                "varying lowp vec4 vColor;",
                "uniform lowp sampler2D samplerFront;",
                "uniform highp vec2 srcStart;",
                "uniform highp vec2 pixelSize;",
                "uniform highp vec2 tileSize;",
                "uniform highp vec2 tileSpacing;",
                "void main(void) {",
                "\thighp vec2 tile = floor(vTex);",
                "\thighp vec2 tex = fract(vTex);",
                "\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);",
                "\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;",
                "\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;",
                "\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;",
                "\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);",
                "}",
            ].join("\n");
        }
        static PSn(t) {
            return [
                "#version 300 es",
                M_.bn.wvn.SSn(t),
                "in highp vec2 vTex;",
                "out lowp vec4 outColor;",
                "in lowp vec4 vColor;",
                "uniform lowp sampler2D samplerFront;",
                "uniform highp vec2 srcStart;",
                "uniform highp vec2 pixelSize;",
                "uniform highp vec2 tileSize;",
                "uniform highp vec2 tileSpacing;",
                "void main(void) {",
                "\thighp vec2 tile = floor(vTex);",
                "\thighp vec2 tex = fract(vTex);",
                "\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);",
                "\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;",
                "\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;",
                "\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;",
                "\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);",
                "}",
            ].join("\n");
        }
        static GSn(t, i, e, s) {
            let n = "";
            return (
                t >= 2
                    ? (n = "#version 300 es\n" + M_.bn.wvn.SSn(s))
                    : (i && (n = "#extension GL_EXT_frag_depth : enable\n"),
                      e &&
                          ((n += "#extension GL_EXT_shader_texture_lod : enable\n"),
                          (n += "#extension GL_OES_standard_derivatives : enable\n"))),
                n +
                    `\nprecision highp float;\n${t >= 2 ? "in" : "varying"} vec2 vTex;\n${t >= 2 ? "out lowp vec4 outColor;" : ""}\n${t >= 2 ? "in" : "varying"} lowp vec4 vColor;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t >= 2 ? "return textureGrad(samplerFront, p, ddx, ddy);" : ""}\n\t${t < 2 && e ? "return texture2DGradEXT(samplerFront, p, ddx, ddy);" : ""}\n\t${t < 2 && !e ? "return texture2D(samplerFront, p);" : ""}\n}\n\nvoid main(void) {\n\t\n\t${t < 2 ? "lowp vec4 outColor;" : ""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t >= 2 || e ? "dFdx(vTex)" : "vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t >= 2 || e ? "dFdy(vTex)" : "vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= vColor;\n\t${t < 2 ? "gl_FragColor = outColor;" : ""}\n\t${t >= 2 ? "gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);" : ""}\n\t${t < 2 && i ? "gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);" : ""}\n}\n`
            );
        }
        static ASn() {
            return [
                "attribute vec4 aPoints;",
                "varying float pointOpacity;",
                "uniform float zElevation;",
                "uniform mat4 matP;",
                "uniform mat4 matMV;",
                "void main(void) {",
                "\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);",
                "\tgl_PointSize = aPoints.z;",
                "\tpointOpacity = aPoints.w;",
                "}",
            ].join("\n");
        }
        static RSn() {
            return [
                "#version 300 es",
                "in vec4 aPoints;",
                "out float pointOpacity;",
                "uniform float zElevation;",
                "uniform mat4 matP;",
                "uniform mat4 matMV;",
                "void main(void) {",
                "\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);",
                "\tgl_PointSize = aPoints.z;",
                "\tpointOpacity = aPoints.w;",
                "}",
            ].join("\n");
        }
        static kSn() {
            return [
                "uniform lowp sampler2D samplerFront;",
                "varying lowp float pointOpacity;",
                "uniform mediump vec2 pointTexStart;",
                "uniform mediump vec2 pointTexEnd;",
                "uniform lowp vec4 color;",
                "void main(void) {",
                "\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);",
                "\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);",
                "\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));",
                "\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;",
                "}",
            ].join("\n");
        }
        static OSn() {
            return [
                "#extension GL_EXT_frag_depth : enable",
                "uniform lowp sampler2D samplerFront;",
                "varying lowp float pointOpacity;",
                "uniform mediump vec2 pointTexStart;",
                "uniform mediump vec2 pointTexEnd;",
                "uniform lowp vec4 color;",
                "void main(void) {",
                "\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);",
                "\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);",
                "\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));",
                "\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;",
                "\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);",
                "}",
            ].join("\n");
        }
        static DSn(t) {
            return [
                "#version 300 es",
                M_.bn.wvn.SSn(t),
                "uniform lowp sampler2D samplerFront;",
                "in lowp float pointOpacity;",
                "uniform mediump vec2 pointTexStart;",
                "uniform mediump vec2 pointTexEnd;",
                "uniform lowp vec4 color;",
                "out lowp vec4 outColor;",
                "void main(void) {",
                "\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);",
                "\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);",
                "\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));",
                "\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;",
                "\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);",
                "}",
            ].join("\n");
        }
        static FSn() {
            return ["varying lowp vec4 vColor;", "void main(void) {", "\tgl_FragColor = vColor;", "}"].join("\n");
        }
        static LSn() {
            return [
                "precision lowp float;",
                "varying mediump vec2 vTex;",
                "varying vec4 vColor;",
                "uniform vec4 color2_;",
                "vec3 fromLinear(vec3 linearRGB)",
                "{",
                "\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));",
                "\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);",
                "\tvec3 lower = linearRGB * vec3(12.92);",
                "\treturn mix(higher, lower, vec3(cutoff));",
                "}",
                "vec3 toLinear(vec3 sRGB)",
                "{",
                "\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));",
                "\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));",
                "\tvec3 lower = sRGB/vec3(12.92);",
                "\treturn mix(higher, lower, vec3(cutoff));",
                "}",
                "void main(void) {",
                "\tvec3 linearGrad = mix(toLinear(vColor.rgb), toLinear(color2_.rgb), vTex.x);",
                "\tfloat a = mix(vColor.a, color2_.a, vTex.x);",
                "\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);",
                "}",
            ].join("\n");
        }
        static BSn() {
            return [
                "precision lowp float;",
                "varying highp vec2 vTex;",
                "varying vec4 vColor;",
                "void main(void) {",
                "\thighp float grad = vTex.x / (1.0 - vTex.y);",
                "\tgl_FragColor = vColor * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);",
                "}",
            ].join("\n");
        }
        static USn() {
            return [
                "varying mediump vec2 vTex;",
                "varying lowp vec4 vColor;",
                "void main(void) {",
                "\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;",
                "\tgl_FragColor = vColor * f;",
                "}",
            ].join("\n");
        }
        static NSn() {
            return [
                "varying highp vec2 vTex;",
                "varying lowp vec4 vColor;",
                "void main(void) {",
                "\thighp vec2 diff = vTex - vec2(0.5, 0.5);",
                "\thighp vec2 diffSq = diff * diff;",
                "\thighp float f = step(diffSq.x + diffSq.y, 0.25);",
                "\tgl_FragColor = vColor * f;",
                "}",
            ].join("\n");
        }
        static jSn() {
            return [
                "varying highp vec2 vTex;",
                "varying lowp vec4 vColor;",
                "uniform highp vec2 pixelSize;",
                "uniform highp float outlineThickness;",
                "void main(void) {",
                "\thighp vec2 diff = vTex - vec2(0.5, 0.5);",
                "\thighp vec2 diffSq = diff * diff;",
                "\thighp float distSq = diffSq.x + diffSq.y;",
                "\thighp vec2 norm = normalize(diff);",
                "\thighp vec2 halfNorm = norm * 0.5;",
                "\thighp float innerF = step(distSq, 0.25);",
                "\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;",
                "\thighp vec2 innerEdgeSq = innerEdge * innerEdge;",
                "\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);",
                "\tgl_FragColor = vColor * innerF * outerF;",
                "}",
            ].join("\n");
        }
        static $Sn() {
            return [
                "varying highp vec2 vTex;",
                "varying lowp vec4 vColor;",
                "uniform highp vec2 pixelSize;",
                "void main(void) {",
                "\thighp vec2 diff = vTex - vec2(0.5, 0.5);",
                "\thighp vec2 diffSq = diff * diff;",
                "\thighp vec2 norm = normalize(diff);",
                "\thighp vec2 halfNorm = norm * 0.5;",
                "\thighp vec2 halfNormSq = halfNorm * halfNorm;",
                "\thighp vec2 innerEdge = halfNorm - pixelSize * norm;",
                "\thighp vec2 innerEdgeSq = innerEdge * innerEdge;",
                "\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);",
                "\tgl_FragColor = vColor * f;",
                "}",
            ].join("\n");
        }
        static zSn() {
            return [
                "varying highp vec2 vTex;",
                "varying lowp vec4 vColor;",
                "uniform highp vec2 pixelSize;",
                "uniform highp float outlineThickness;",
                "void main(void) {",
                "\thighp vec2 diff = vTex - vec2(0.5, 0.5);",
                "\thighp vec2 diffSq = diff * diff;",
                "\thighp float distSq = diffSq.x + diffSq.y;",
                "\thighp vec2 norm = normalize(diff);",
                "\thighp vec2 halfNorm = norm * 0.5;",
                "\thighp vec2 halfNormSq = halfNorm * halfNorm;",
                "\thighp vec2 pxNorm = pixelSize * norm;",
                "\thighp vec2 innerEdge1 = halfNorm - pxNorm;",
                "\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;",
                "\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);",
                "\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;",
                "\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;",
                "\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);",
                "\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;",
                "\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);",
                "\tgl_FragColor = vColor * innerF * outerF;",
                "}",
            ].join("\n");
        }
    };
}
{
    const __ = self.t,
        T_ = self.sG,
        I_ = (T_.ems, T_.eG),
        P_ = 1,
        G_ = 2,
        A_ = 3,
        R_ = 4,
        k_ = 5,
        O_ = 6,
        D_ = 7,
        F_ = 8,
        L_ = 9,
        B_ = 10,
        U_ = 11,
        N_ = 12,
        j_ = 13,
        $_ = 14,
        z_ = 15,
        V_ = 16,
        W_ = 17,
        H_ = 18,
        K_ = 19,
        q_ = 20,
        X_ = 21,
        Y_ = 22,
        J_ = 23,
        Z_ = 24,
        Q_ = 25,
        tT = 26,
        iT = 27,
        eT = 28,
        sT = 29,
        nT = 30;
    (__.bn.VSn = class {
        constructor(t) {
            (this.rM = t),
                (this.cSn = I_.create()),
                (this.aSn = I_.create()),
                (this.WSn = null),
                (this.HSn = null),
                (this.KSn = !1),
                (this.dSn = null),
                (this.qSn = new __.Rect()),
                (this.clearColor = __.m(__.nr, 0, 0, 0, 0));
        }
    }),
        (__.bn.XSn = class {
            constructor(t) {
                const i = new ArrayBuffer(96);
                (this.Osi = 0),
                    (this.YSn = t),
                    (this.Wbn = t.rM.eZt()),
                    (this.JSn = 0),
                    (this.ZSn = 0),
                    (this.QSn = null),
                    (this.txn = new Float32Array(i, 0, 16)),
                    (this.ixn = new Float32Array(i, 64, 4)),
                    (this.exn = new Float32Array(i, 80, 4)),
                    (this.sxn = []);
            }
            nxn(t, i) {
                (this.Osi = P_), (this.JSn = t), (this.ZSn = i);
            }
            rxn() {
                const t = this.Wbn;
                t.drawElements(t.TRIANGLES, this.ZSn, t.UNSIGNED_SHORT, this.JSn);
            }
            hxn(t) {
                (this.Osi = G_), (this.QSn = t);
            }
            oxn() {
                const t = this.Wbn,
                    i = this.QSn;
                t.bindTexture(t.TEXTURE_2D, i ? i.axn() : null);
            }
            lxn(t) {
                (this.Osi = q_), t.jDe(this.ixn, 0);
            }
            uxn() {
                const t = this.ixn,
                    i = this.YSn.dSn;
                i.Bvn.Jbn() && i.Bvn.avn(t[0], t[1], t[2], t[3]);
            }
            cxn(t, i) {
                (this.Osi = A_), (this.JSn = t), (this.ZSn = i);
            }
            dxn() {
                this.Wbn.blendFunc(this.JSn, this.ZSn);
            }
            fxn(t, i, e, s) {
                this.Osi = R_;
                const n = this.ixn;
                (n[0] = t), (n[1] = i), (n[2] = e), (n[3] = s);
            }
            pxn() {
                const t = this.ixn;
                this.Wbn.viewport(t[0], t[1], t[2], t[3]);
            }
            mxn(t) {
                (this.Osi = k_), I_.mn(this.txn, t);
            }
            wxn() {
                const t = this.YSn,
                    i = t.rM.Dwn,
                    e = t.dSn,
                    s = this.txn;
                for (let t = 0, n = i.length; t < n; ++t) {
                    const n = i[t];
                    n === e ? n.lSn(s, !0) : n.ySn();
                }
                I_.mn(t.aSn, s);
            }
            gxn(t) {
                (this.Osi = O_), I_.mn(this.txn, t);
            }
            yxn() {
                const t = this.YSn,
                    i = t.rM.Dwn,
                    e = t.dSn,
                    s = this.txn;
                for (let t = 0, n = i.length; t < n; ++t) {
                    const n = i[t];
                    n === e ? n.uSn(s, !0) : n.bSn();
                }
                I_.mn(t.cSn, s);
            }
            bxn(t) {
                (this.Osi = D_), (this.QSn = t);
            }
            vxn() {
                const t = this.Wbn,
                    i = this.QSn,
                    e = this.YSn;
                i
                    ? ((e.WSn = i.Sxn()),
                      (e.HSn = i.xxn()),
                      e.KSn && e.HSn
                          ? t.bindFramebuffer(t.FRAMEBUFFER, e.HSn)
                          : t.bindFramebuffer(t.FRAMEBUFFER, e.WSn))
                    : ((e.WSn = null), (e.HSn = null), t.bindFramebuffer(t.FRAMEBUFFER, null));
            }
            Mxn(t) {
                (this.Osi = F_), t.jDe(this.txn, 0);
            }
            Exn(t, i, e, s) {
                this.Osi = F_;
                const n = this.txn;
                (n[0] = t), (n[1] = i), (n[2] = e), (n[3] = s);
            }
            Cxn() {
                const t = this.Wbn,
                    i = this.txn,
                    e = this.YSn.clearColor,
                    s = i[0],
                    n = i[1],
                    r = i[2],
                    h = i[3];
                e._bs(s, n, r, h) || (t.clearColor(s, n, r, h), e.dvs(s, n, r, h)), t.clear(t.COLOR_BUFFER_BIT);
            }
            _xn(t) {
                (this.Osi = $_), t.jDe(this.txn, 0);
            }
            Txn() {
                const t = this.txn;
                this.YSn.qSn.set(t[0], t[1], t[2], t[3]);
            }
            Ixn(t, i, e) {
                (this.Osi = L_), (this.JSn = t), (this.ZSn = 1), (this.txn[0] = i), e.jDe(this.ixn, 0);
            }
            Pxn() {
                const t = this.Wbn,
                    i = this.YSn,
                    e = i.rM.Bwn;
                t.useProgram(e.$mn), e.lSn(i.aSn, !1), e.uSn(i.cSn, !1);
                const s = i.qSn;
                e.kvn.Jbn() && e.kvn.hvn(s.un(), s.pn()), e.Ovn.Jbn() && e.Ovn.hvn(s.Rr(), s._r());
                const n = this.txn[0];
                if ((e.Dvn.Jbn() && e.Dvn.nvn(n), e.Avn.Jbn())) {
                    const t = this.ixn;
                    e.Avn.avn(t[0], t[1], t[2], t[3]);
                }
                t.drawArrays(t.POINTS, this.JSn / 4, this.ZSn), t.useProgram(i.dSn.$mn);
            }
            Gxn(t) {
                (this.Osi = B_), (this.QSn = t);
            }
            Axn() {
                const t = this.Wbn,
                    i = this.YSn,
                    e = this.QSn;
                (i.dSn = e), t.useProgram(e.$mn), e.lSn(i.aSn, !1), e.uSn(i.cSn, !1);
            }
            Rxn() {
                this.Osi = U_;
            }
            kxn() {
                const t = this.YSn.dSn,
                    i = this.Wbn,
                    e = this.txn,
                    s = this.ixn,
                    n = this.exn;
                if (t.Nvn.Jbn()) {
                    const t = this.YSn.rM,
                        e = this.QSn;
                    t.Oxn !== e &&
                        (i.activeTexture(i.TEXTURE1),
                        i.bindTexture(i.TEXTURE_2D, e ? e.axn() : null),
                        (t.Oxn = e),
                        i.activeTexture(i.TEXTURE0));
                }
                t.qvn.Jbn() && t.qvn.hvn(e[0], e[1]),
                    t.$vn.Jbn() && t.$vn.hvn(e[2], e[3]),
                    t.zvn.Jbn() && t.zvn.hvn(e[4], e[5]),
                    t.Yvn.Jbn() && t.Yvn.nvn(this.ZSn),
                    t.Jvn.Jbn() && t.Jvn.nvn(e[6]),
                    t.Zvn.Jbn() && t.Zvn.nvn(e[7]),
                    t.Vvn.Jbn() && t.Vvn.hvn(e[12], e[13]),
                    t.Wvn.Jbn() && t.Wvn.hvn(e[14], e[15]),
                    t.Hvn.Jbn() && t.Hvn.hvn(n[0], n[1]),
                    t.Kvn.Jbn() && t.Kvn.hvn(n[2], n[3]),
                    t.Qvn.Jbn() && t.Qvn.hvn(s[0], s[1]),
                    t.tSn.Jbn() && t.tSn.hvn(s[2], s[3]),
                    t.Xvn.Jbn() && t.Xvn.nvn(this.JSn);
            }
            Dxn() {
                this.Osi = N_;
            }
            Fxn() {
                const t = this.YSn.dSn.nSn,
                    i = this.sxn;
                for (let e = 0, s = t.length; e < s; ++e) {
                    const s = t[e],
                        n = i[e];
                    s.Zbn() ? s.ovn(n.getR(), n.getG(), n.getB()) : s.nvn(n);
                }
            }
            Lxn(t) {
                (this.Osi = j_), (this.QSn = t);
            }
            Bxn() {
                const t = this.Wbn,
                    i = this.QSn,
                    e = this.YSn.WSn;
                i !== e && t.bindFramebuffer(t.FRAMEBUFFER, i),
                    t.invalidateFramebuffer(t.FRAMEBUFFER, [t.COLOR_ATTACHMENT0]),
                    i !== e && t.bindFramebuffer(t.FRAMEBUFFER, e);
            }
            Uxn(t, i, e) {
                this.Osi = V_;
                const s = this.txn,
                    n = this.YSn.rM;
                (s[0] = t.rs()),
                    (s[1] = t.ls()),
                    (s[2] = i ? i.rs() : n.rs()),
                    (s[3] = i ? i.ls() : n.ls()),
                    (s[4] = t.Sq() ? 1 : 0),
                    (s[5] = "stretch" === e);
                const r = this.sxn;
                __.yh(r), r.push(t.Sxn()), r.push(i ? i.Sxn() : null);
            }
            Nxn() {
                const t = this.txn,
                    i = this.sxn,
                    e = this.Wbn,
                    s = t[0],
                    n = t[1],
                    r = t[2],
                    h = t[3],
                    o = 0 !== t[4],
                    a = 0 !== t[5],
                    l = i[0],
                    u = i[1];
                if ((e.bindFramebuffer(e.READ_FRAMEBUFFER, l), e.bindFramebuffer(e.DRAW_FRAMEBUFFER, u), a))
                    e.blitFramebuffer(0, 0, s, n, 0, 0, r, h, e.COLOR_BUFFER_BIT, o ? e.LINEAR : e.NEAREST);
                else {
                    const t = Math.min(s, r),
                        i = Math.min(n, h),
                        o = Math.max(n - h, 0),
                        a = Math.max(h - n, 0);
                    e.blitFramebuffer(0, o, t, i + o, 0, a, t, i + a, e.COLOR_BUFFER_BIT, e.NEAREST);
                }
            }
            jxn(t) {
                (this.Osi = W_), (this.QSn = t);
            }
            $xn() {
                this.QSn.zxn(), (this.QSn = null);
            }
            Vxn(t) {
                (this.Osi = H_), (this.QSn = t);
            }
            Wxn() {
                this.QSn.Hxn(), (this.QSn = null);
            }
            Kxn(t, i, e) {
                this.Osi = K_;
                const s = this.txn;
                (s[0] = t), (s[1] = i), (s[2] = e);
            }
            qxn() {
                const t = this.YSn.dSn,
                    i = this.txn;
                t.qvn.Jbn() && t.qvn.hvn(i[0], i[1]), t.Uvn.Jbn() && t.Uvn.nvn(i[2]);
            }
            Xxn(t, i, e, s, n, r, h) {
                this.Osi = z_;
                const o = this.txn;
                t.jDe(o, 0),
                    (o[4] = 1 / i),
                    (o[5] = 1 / e),
                    (o[6] = s / i),
                    (o[7] = n / e),
                    (o[8] = r / i),
                    (o[9] = h / e);
            }
            Yxn() {
                const t = this.YSn.dSn,
                    i = this.txn;
                t.Vvn.Jbn() && t.Vvn.hvn(i[0], i[1]),
                    t.qvn.Jbn() && t.qvn.hvn(i[4], i[5]),
                    t.Fvn.Jbn() && t.Fvn.hvn(i[6], i[7]),
                    t.Lvn.Jbn() && t.Lvn.hvn(i[8], i[9]);
            }
            Jxn(t, i, e, s, n, r, h) {
                this.Osi = eT;
                const o = this.txn;
                (o[0] = 1 / t), (o[1] = 1 / i), (o[2] = e), (o[3] = s), (o[4] = n), (o[5] = r), (o[6] = h);
            }
            Zxn() {
                const t = this.YSn.dSn,
                    i = this.txn;
                t.qvn.Jbn() && t.qvn.hvn(i[0], i[1]),
                    t.Fvn.Jbn() && t.Fvn.hvn(i[2], i[3]),
                    t.Uvn.Jbn() && t.Uvn.nvn(i[4]),
                    t.Lvn.Jbn() && t.Lvn.hvn(i[5], i[6]);
            }
            Qxn(t) {
                (this.Osi = X_), (this.JSn = t ? 1 : 0);
            }
            tMn() {
                const t = this.Wbn,
                    i = 0 !== this.JSn;
                i || t.depthMask(!0), t.clear(t.DEPTH_BUFFER_BIT), i || t.depthMask(!1);
            }
            iMn(t) {
                (this.Osi = Y_), (this.JSn = t ? 1 : 0);
            }
            eMn() {
                const t = this.Wbn;
                0 === this.JSn ? (t.disable(t.DEPTH_TEST), t.depthMask(!1)) : (t.enable(t.DEPTH_TEST), t.depthMask(!0));
            }
            sMn(t) {
                (this.Osi = J_), (this.JSn = t ? 1 : 0);
            }
            nMn() {
                const t = this.Wbn,
                    i = this.YSn,
                    e = i.rM,
                    s = 0 !== this.JSn;
                (i.KSn = s),
                    t.activeTexture(t.TEXTURE2),
                    s
                        ? (i.HSn && t.bindFramebuffer(t.FRAMEBUFFER, i.HSn), t.bindTexture(t.TEXTURE_2D, e.rMn()))
                        : (t.bindTexture(t.TEXTURE_2D, null), i.HSn && t.bindFramebuffer(t.FRAMEBUFFER, i.WSn)),
                    t.activeTexture(t.TEXTURE0);
            }
            hMn() {
                this.Osi = Z_;
            }
            oMn() {
                const t = this.Wbn;
                t.clear(t.STENCIL_BUFFER_BIT),
                    t.enable(t.STENCIL_TEST),
                    t.stencilFunc(t.ALWAYS, 1, 1),
                    t.stencilOp(t.KEEP, t.KEEP, t.REPLACE),
                    t.colorMask(!1, !1, !1, !1);
            }
            aMn() {
                this.Osi = Q_;
            }
            lMn() {
                const t = this.Wbn;
                t.enable(t.STENCIL_TEST),
                    t.colorMask(!0, !0, !0, !0),
                    t.stencilFunc(t.EQUAL, 1, 1),
                    t.stencilOp(t.KEEP, t.KEEP, t.KEEP);
            }
            uMn() {
                this.Osi = tT;
            }
            cMn() {
                const t = this.Wbn;
                t.disable(t.STENCIL_TEST);
            }
            dMn(t, i, e, s, n) {
                (this.Osi = iT), (this.JSn = t ? 1 : 0);
                const r = this.txn;
                (r[0] = i), (r[1] = e), (r[2] = s), (r[3] = n);
            }
            fMn() {
                const t = this.Wbn,
                    i = this.txn;
                1 === this.JSn
                    ? (t.enable(t.SCISSOR_TEST), t.scissor(i[0], i[1], i[2], i[3]))
                    : t.disable(t.SCISSOR_TEST);
            }
            pMn(t) {
                (this.Osi = sT), (this.JSn = t);
            }
            mMn() {
                const t = this.Wbn,
                    i = this.JSn;
                0 === i
                    ? t.disable(t.CULL_FACE)
                    : (t.enable(t.CULL_FACE), 1 === i ? t.cullFace(t.BACK) : t.cullFace(t.FRONT));
            }
            wMn(t) {
                (this.Osi = nT), (this.JSn = t);
            }
            gMn() {
                const t = this.Wbn;
                t.frontFace(0 === this.JSn ? t.CW : t.CCW);
            }
            Ske() {
                switch (this.Osi) {
                    case 1:
                        return void this.rxn();
                    case 2:
                        return void this.oxn();
                    case 3:
                        return void this.dxn();
                    case 4:
                        return void this.pxn();
                    case 5:
                        return void this.wxn();
                    case 6:
                        return void this.yxn();
                    case 7:
                        return void this.vxn();
                    case 8:
                        return void this.Cxn();
                    case 9:
                        return void this.Pxn();
                    case 10:
                        return void this.Axn();
                    case 11:
                        return void this.kxn();
                    case 12:
                        return void this.Fxn();
                    case 13:
                        return void this.Bxn();
                    case 14:
                        return void this.Txn();
                    case 15:
                        return void this.Yxn();
                    case 16:
                        return void this.Nxn();
                    case 17:
                        return void this.$xn();
                    case 18:
                        return void this.Wxn();
                    case 19:
                        return void this.qxn();
                    case 20:
                        return void this.uxn();
                    case 21:
                        return void this.tMn();
                    case 22:
                        return void this.eMn();
                    case 23:
                        return void this.nMn();
                    case 24:
                        return void this.oMn();
                    case 25:
                        return void this.lMn();
                    case 26:
                        return void this.cMn();
                    case 27:
                        return void this.fMn();
                    case 28:
                        return void this.Zxn();
                    case 29:
                        return void this.mMn();
                    case 30:
                        return void this.gMn();
                }
            }
        });
}
{
    const rT = self.t,
        hT = new Set(["rgba8", "rgb8", "rgba4", "rgb5_a1", "rgb565"]),
        oT = new Set(["nearest", "bilinear", "trilinear"]),
        aT = new Set(["default", "low", "high"]),
        lT = new Set(["clamp-to-edge", "repeat", "mirror-repeat"]);
    function uT(t, i) {
        let e, s, n, r;
        switch (t) {
            case "rgba8":
                (e = i.RGBA8), (s = i.RGBA), (n = i.RGBA), (r = i.UNSIGNED_BYTE);
                break;
            case "rgb8":
                (e = i.RGB8), (s = i.RGB), (n = i.RGB), (r = i.UNSIGNED_BYTE);
                break;
            case "rgba4":
                (e = i.RGBA4), (s = i.RGBA), (n = i.RGBA), (r = i.UNSIGNED_SHORT_4_4_4_4);
                break;
            case "rgb5_a1":
                (e = i.RGB5_A1), (s = i.RGBA), (n = i.RGBA), (r = i.UNSIGNED_SHORT_5_5_5_1);
                break;
            case "rgb565":
                (e = i.RGB565), (s = i.RGB), (n = i.RGB), (r = i.UNSIGNED_SHORT_5_6_5);
                break;
            default:
                throw new Error("invalid pixel format");
        }
        return { yMn: e, bMn: s, format: n, type: r };
    }
    const cT = {
            ji: "clamp-to-edge",
            Ri: "clamp-to-edge",
            Oi: "trilinear",
            Pi: 0,
            vMn: "rgba8",
            _h: !0,
            Dh: "default",
            SMn: !0,
            Rf: !1,
            width: -1,
            height: -1,
        },
        dT = { SMn: !0, flipY: !1 },
        fT = new Set();
    rT.bn.xMn = class {
        constructor(t) {
            rT.Et(t, rT.bn.hq),
                (this.ci = t),
                (this.ii = null),
                (this.RS = 0),
                (this._S = 0),
                (this.DHs = !0),
                (this.QC = "clamp-to-edge"),
                (this.KC = "clamp-to-edge"),
                (this.MMn = "trilinear"),
                (this.EMn = 0),
                (this.CMn = "rgba8"),
                (this._Mn = !1),
                (this.TMn = "default"),
                (this.$Ke = 0);
        }
        IMn(t, i) {
            if (
                !(
                    ("undefined" != typeof HTMLImageElement && t instanceof HTMLImageElement) ||
                    ("undefined" != typeof HTMLCanvasElement && t instanceof HTMLCanvasElement) ||
                    ("undefined" != typeof ImageBitmap && t instanceof ImageBitmap) ||
                    ("undefined" != typeof OffscreenCanvas && t instanceof OffscreenCanvas) ||
                    t instanceof ImageData ||
                    t instanceof ArrayBuffer
                )
            )
                throw new Error("invalid texture source");
            if ((rT.Crt(i), (i = Object.assign({}, cT, i)), this.ii)) throw new Error("already created texture");
            if (
                (rT.vu(i.ji),
                rT.vu(i.Ri),
                rT.vu(i.vMn),
                rT.vu(this.MMn),
                rT.wi(i.Pi),
                (this.QC = i.ji),
                (this.KC = i.Ri),
                (this.MMn = i.Oi),
                (this.EMn = i.Pi),
                (this.CMn = i.vMn),
                (this._Mn = !!i._h && this.ci.hyn()),
                (this.TMn = i.Dh),
                !lT.has(this.QC) || !lT.has(this.KC))
            )
                throw new Error("invalid wrap mode");
            if (!oT.has(this.MMn)) throw new Error("invalid sampling");
            if (!hT.has(this.CMn)) throw new Error("invalid pixel format");
            if (!aT.has(this.TMn)) throw new Error("invalid mipmap quality");
            if (((this.DHs = !0), t instanceof ArrayBuffer || null === t || i.Rf)) {
                if (
                    (rT.wi(i.width),
                    rT.wi(i.height),
                    (this.RS = i.width),
                    (this._S = i.height),
                    t instanceof ArrayBuffer && t.byteLength !== this.RS * this._S * 4)
                )
                    throw new Error("ArrayBuffer wrong size");
            } else (this.RS = t.width), (this._S = t.height);
            if (this.RS <= 0 || this._S <= 0) throw new Error("invalid texture data size");
            if (i.Rf) {
                const i = rT.lx(this.RS, this._S);
                i.getContext("2d").drawImage(t, 0, 0, this.RS, this._S), (t = i);
            }
            const e = rT.vDe(this.RS) && rT.vDe(this._S),
                s = this.ci._bn();
            if (this.RS > s || this._S > s) throw new Error("texture data exceeds maximum texture size");
            const n = this.ci.eZt(),
                r = this.ci.PMn();
            (this.ii = n.createTexture()),
                n.bindTexture(n.TEXTURE_2D, this.ii),
                n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL, i.SMn),
                n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL, !1);
            const h = uT(this.CMn, n);
            if (this.ci.cC() || e || !this.GMn())
                if (r >= 2) {
                    let i;
                    (i = this._Mn ? Math.floor(Math.log2(Math.max(this.RS, this._S)) + 1) : 1),
                        n.texStorage2D(n.TEXTURE_2D, i, h.yMn, this.RS, this._S),
                        t instanceof ArrayBuffer
                            ? n.texSubImage2D(
                                  n.TEXTURE_2D,
                                  0,
                                  0,
                                  0,
                                  this.RS,
                                  this._S,
                                  h.format,
                                  h.type,
                                  new Uint8Array(t)
                              )
                            : null !== t && n.texSubImage2D(n.TEXTURE_2D, 0, 0, 0, h.format, h.type, t);
                } else
                    t instanceof ArrayBuffer
                        ? n.texImage2D(n.TEXTURE_2D, 0, h.bMn, this.RS, this._S, 0, h.format, h.type, new Uint8Array(t))
                        : null === t
                          ? n.texImage2D(n.TEXTURE_2D, 0, h.bMn, this.RS, this._S, 0, h.format, h.type, null)
                          : n.texImage2D(n.TEXTURE_2D, 0, h.bMn, h.format, h.type, t);
            else {
                if (null === t)
                    throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");
                if (
                    (t instanceof ArrayBuffer && (t = new ImageData(new Uint8ClampedArray(t), this.RS, this._S)),
                    t instanceof ImageData)
                ) {
                    const i = rT.lx(this.RS, this._S);
                    i.getContext("2d").putImageData(t, 0, 0), (t = i);
                }
                const i = rT.lx(rT.Sn(this.RS), rT.Sn(this._S)),
                    e = i.getContext("2d");
                (e.imageSmoothingEnabled = "nearest" !== this.MMn),
                    e.drawImage(t, 0, 0, this.RS, this._S, 0, 0, i.width, i.height),
                    n.texImage2D(n.TEXTURE_2D, 0, h.bMn, h.format, h.type, i);
            }
            null !== t && this.AMn(n), n.bindTexture(n.TEXTURE_2D, null), this.ci.RMn(), (this.$Ke = 1), fT.add(this);
        }
        kMn(t, i, e) {
            if ((rT.wi(t), rT.wi(i), rT.Crt(e), (e = Object.assign({}, cT, e)), this.ii))
                throw new Error("already created texture");
            if (
                (rT.vu(e.ji),
                rT.vu(e.Ri),
                rT.vu(e.vMn),
                rT.vu(this.MMn),
                (this.QC = e.ji),
                (this.KC = e.Ri),
                (this.MMn = e.Oi),
                (this.CMn = e.vMn),
                (this._Mn = !!e._h && this.ci.hyn()),
                (this.TMn = e.Dh),
                !lT.has(this.QC) || !lT.has(this.KC))
            )
                throw new Error("invalid wrap mode");
            if (!oT.has(this.MMn)) throw new Error("invalid sampling");
            if (!hT.has(this.CMn)) throw new Error("invalid pixel format");
            if (!aT.has(this.TMn)) throw new Error("invalid mipmap quality");
            (this.DHs = !1), (this.RS = Math.floor(t)), (this._S = Math.floor(i));
            const s = rT.vDe(this.RS) && rT.vDe(this._S),
                n = this.ci._bn();
            if (this.RS <= 0 || this._S <= 0) throw new Error("invalid texture size");
            if (this.RS > n || this._S > n) throw new Error("texture exceeds maximum texture size");
            if (!this.ci.cC() && this.GMn() && !s) throw new Error("non-power-of-two tiled textures not supported");
            const r = this.ci.eZt(),
                h = this.ci.PMn();
            (this.ii = r.createTexture()),
                r.bindTexture(r.TEXTURE_2D, this.ii),
                r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL, e.SMn),
                r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL, !1);
            const o = uT(this.CMn, r),
                a = h >= 2 ? o.yMn : o.bMn;
            r.texImage2D(r.TEXTURE_2D, 0, a, this.RS, this._S, 0, o.format, o.type, null),
                this.AMn(r),
                r.bindTexture(r.TEXTURE_2D, null),
                this.ci.RMn(),
                (this.$Ke = 1),
                fT.add(this);
        }
        OMn(t) {
            if ("default" === this.TMn) return this.DHs ? t.NICEST : t.FASTEST;
            if ("low" === this.TMn) return t.FASTEST;
            if ("high" === this.TMn) return t.NICEST;
            throw new Error("invalid mipmap quality");
        }
        GMn() {
            return "clamp-to-edge" !== this.QC || "clamp-to-edge" !== this.KC;
        }
        DMn(t, i) {
            if ((rT.vu(i), "clamp-to-edge" === i)) return t.CLAMP_TO_EDGE;
            if ("repeat" === i) return t.REPEAT;
            if ("mirror-repeat" === i) return t.MIRRORED_REPEAT;
            throw new Error("invalid wrap mode");
        }
        AMn(t) {
            const i = rT.vDe(this.RS) && rT.vDe(this._S);
            if (
                (t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, this.DMn(t, this.QC)),
                t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, this.DMn(t, this.KC)),
                "nearest" === this.MMn)
            )
                t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.NEAREST),
                    t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.NEAREST),
                    (this._Mn = !1);
            else if ((t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.LINEAR), (i || this.ci.cC()) && this._Mn)) {
                t.hint(t.GENERATE_MIPMAP_HINT, this.OMn(t)), t.generateMipmap(t.TEXTURE_2D);
                const i = "trilinear" === this.MMn && !this.ci.oyn();
                t.texParameteri(
                    t.TEXTURE_2D,
                    t.TEXTURE_MIN_FILTER,
                    i ? t.LINEAR_MIPMAP_LINEAR : t.LINEAR_MIPMAP_NEAREST
                );
            } else t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.LINEAR), (this._Mn = !1);
            const e = this.ci.FMn();
            e &&
                this.EMn > 0 &&
                "nearest" !== this.MMn &&
                t.texParameterf(t.TEXTURE_2D, e.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(this.EMn, this.ci.LMn()));
        }
        C8t(t, i) {
            if (
                !(
                    ("undefined" != typeof HTMLImageElement && t instanceof HTMLImageElement) ||
                    ("undefined" != typeof HTMLVideoElement && t instanceof HTMLVideoElement) ||
                    ("undefined" != typeof HTMLCanvasElement && t instanceof HTMLCanvasElement) ||
                    ("undefined" != typeof ImageBitmap && t instanceof ImageBitmap) ||
                    ("undefined" != typeof OffscreenCanvas && t instanceof OffscreenCanvas) ||
                    t instanceof ImageData
                )
            )
                throw new Error("invalid texture source");
            if (!this.ii || this.$Ke <= 0) throw new Error("texture not created");
            if (this.DHs) throw new Error("cannot update static texture");
            rT.Crt(i), (i = Object.assign({}, dT, i));
            const e = t.width || t.videoWidth,
                s = t.height || t.videoHeight,
                n = this.ci.PMn(),
                r = this.ci.eZt();
            r.bindTexture(r.TEXTURE_2D, this.ii),
                r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL, i.SMn),
                r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL, !!i.flipY);
            const h = uT(this.CMn, r),
                o = n >= 2 ? h.yMn : h.bMn;
            try {
                if (this.RS === e && this._S === s) {
                    const i = rT.vDe(this.RS) && rT.vDe(this._S);
                    r.texSubImage2D(r.TEXTURE_2D, 0, 0, 0, h.format, h.type, t),
                        (i || this.ci.cC()) &&
                            this._Mn &&
                            (r.hint(r.GENERATE_MIPMAP_HINT, this.OMn(r)), r.generateMipmap(r.TEXTURE_2D));
                } else {
                    (this.RS = e), (this._S = s);
                    const i = rT.vDe(this.RS) && rT.vDe(this._S);
                    if (!this.ci.cC() && this.GMn() && !i)
                        throw new Error("non-power-of-two tiled textures not supported");
                    r.texImage2D(r.TEXTURE_2D, 0, o, h.format, h.type, t),
                        (i || this.ci.cC()) &&
                            this._Mn &&
                            (r.hint(r.GENERATE_MIPMAP_HINT, this.OMn(r)), r.generateMipmap(r.TEXTURE_2D));
                }
            } catch (t) {
                console.error("Error updating WebGL texture: ", t);
            }
            r.bindTexture(r.TEXTURE_2D, null), this.ci.RMn();
        }
        ygt() {
            if (this.$Ke > 0) throw new Error("texture still has references");
            if (!this.ii) throw new Error("already deleted texture");
            fT.delete(this);
            this.ci.eZt().deleteTexture(this.ii), (this.ii = null);
        }
        Fft() {
            return !!this.ii;
        }
        axn() {
            return this.ii;
        }
        Vi() {
            return this.ci;
        }
        BMn() {
            this.$Ke++;
        }
        UMn() {
            if (this.$Ke <= 0) throw new Error("no more references");
            this.$Ke--;
        }
        NMn() {
            return this.$Ke;
        }
        rs() {
            return this.RS;
        }
        ls() {
            return this._S;
        }
        BHs() {
            return this.DHs;
        }
        HX() {
            let t = this.RS * this._S;
            switch (this.CMn) {
                case "rgba8":
                    t *= 4;
                    break;
                case "rgb8":
                    t *= 3;
                    break;
                case "rgba4":
                case "rgb5_a1":
                case "rgb565":
                    t *= 2;
            }
            return this._Mn && (t += Math.floor(t / 3)), t;
        }
        static je() {
            fT.clear();
        }
        static jMn() {
            return fT.values();
        }
    };
}
{
    const pT = self.t,
        mT = self.assert,
        wT = self.sG,
        gT = (wT.hG, wT.eG),
        yT = new Set(["nearest", "bilinear", "trilinear"]),
        bT = { Oi: "trilinear", alpha: !0, qJ: !1, $Mn: !0, zMn: !0, VMn: 0 },
        vT = new Set();
    pT.bn.WMn = class {
        constructor(t) {
            pT.Et(t, pT.bn.hq),
                (this.ci = t),
                (this.HMn = null),
                (this.KMn = null),
                (this.ii = null),
                (this.qMn = null),
                (this.RS = 0),
                (this._S = 0),
                (this.XMn = !0),
                (this.MMn = "trilinear"),
                (this.YMn = !0),
                (this.hms = !1),
                (this.JMn = !0),
                (this.ZMn = 0),
                (this.QMn = gT.create()),
                (this.NG = 0),
                (this.VG = 0),
                (this.KG = 0);
        }
        mue(t, i, e) {
            pT.wi(t), pT.wi(i), pT.Crt(e), (e = Object.assign({}, bT, e));
            const s = this.ci.PMn();
            if (this.ii || this.qMn) throw new Error("already created render target");
            if (
                ((this.MMn = e.Oi),
                (this.YMn = !!e.alpha),
                (this.hms = !!e.qJ),
                (this.JMn = !!e.$Mn),
                (this.XMn = !!e.zMn),
                (this.ZMn = e.VMn),
                pT.vu(this.MMn),
                !yT.has(this.MMn))
            )
                throw new Error("invalid sampling");
            if (this.ZMn > 0 && (s < 2 || this.JMn)) throw new Error("invalid use of multisampling");
            if ((s < 2 && (this.JMn = !0), (this.RS = t), (this._S = i), this.RS <= 0 || this._S <= 0))
                throw new Error("invalid render target size");
            this.tEn();
            const n = this.ci.eZt();
            if (((this.HMn = n.createFramebuffer()), this.hms && (this.KMn = n.createFramebuffer()), this.JMn)) {
                this.ii = this.ci.DL(this.RS, this._S, { Oi: this.MMn, vMn: this.YMn ? "rgba8" : "rgb8", _h: !1 });
                const t = this.ii.axn();
                n.bindFramebuffer(n.FRAMEBUFFER, this.HMn),
                    n.framebufferTexture2D(n.FRAMEBUFFER, n.COLOR_ATTACHMENT0, n.TEXTURE_2D, t, 0),
                    this.hms &&
                        (n.bindFramebuffer(n.FRAMEBUFFER, this.KMn),
                        n.framebufferTexture2D(n.FRAMEBUFFER, n.COLOR_ATTACHMENT0, n.TEXTURE_2D, t, 0));
            } else {
                (this.qMn = n.createRenderbuffer()), n.bindRenderbuffer(n.RENDERBUFFER, this.qMn);
                const t = this.YMn ? n.RGBA8 : n.RGB8;
                if (this.ZMn > 0) {
                    const i = n.getInternalformatParameter(n.RENDERBUFFER, t, n.SAMPLES);
                    if (i && i[0]) {
                        const t = i[0];
                        this.ZMn > t && (this.ZMn = t);
                    } else this.ZMn = 0;
                }
                0 === this.ZMn
                    ? n.renderbufferStorage(n.RENDERBUFFER, t, this.RS, this._S)
                    : n.renderbufferStorageMultisample(n.RENDERBUFFER, this.ZMn, t, this.RS, this._S),
                    n.bindFramebuffer(n.FRAMEBUFFER, this.HMn),
                    n.framebufferRenderbuffer(n.FRAMEBUFFER, n.COLOR_ATTACHMENT0, n.RENDERBUFFER, this.qMn),
                    this.hms &&
                        (n.bindFramebuffer(n.FRAMEBUFFER, this.KMn),
                        n.framebufferRenderbuffer(n.FRAMEBUFFER, n.COLOR_ATTACHMENT0, n.RENDERBUFFER, this.qMn)),
                    n.bindRenderbuffer(n.RENDERBUFFER, null);
            }
            const r = this.ci.rMn();
            this.hms &&
                r &&
                (n.bindFramebuffer(n.FRAMEBUFFER, this.HMn),
                this.ci.iEn()
                    ? n.framebufferTexture2D(n.FRAMEBUFFER, n.DEPTH_STENCIL_ATTACHMENT, n.TEXTURE_2D, r, 0)
                    : n.framebufferRenderbuffer(n.FRAMEBUFFER, n.DEPTH_STENCIL_ATTACHMENT, n.RENDERBUFFER, r)),
                mT(
                    n.checkFramebufferStatus(n.FRAMEBUFFER) === n.FRAMEBUFFER_COMPLETE,
                    "WebGLRenderTarget framebuffer is incomplete"
                ),
                n.bindFramebuffer(n.FRAMEBUFFER, null),
                vT.add(this);
        }
        eEn(t, i) {
            if (this.RS === t && this._S === i) return;
            (this.RS = t), (this._S = i), this.tEn();
            const e = this.ci.eZt();
            e.bindFramebuffer(e.FRAMEBUFFER, this.HMn),
                this.ii
                    ? this.ii.C8t(new ImageData(this.RS, this._S))
                    : (e.bindRenderbuffer(e.RENDERBUFFER, this.qMn),
                      e.renderbufferStorage(e.RENDERBUFFER, this.YMn ? e.RGBA8 : e.RGB8, this.RS, this._S),
                      e.bindRenderbuffer(e.RENDERBUFFER, null));
            const s = this.ci.rMn();
            this.hms &&
                s &&
                (this.ci.iEn()
                    ? e.framebufferTexture2D(e.FRAMEBUFFER, e.DEPTH_STENCIL_ATTACHMENT, e.TEXTURE_2D, s, 0)
                    : e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_STENCIL_ATTACHMENT, e.RENDERBUFFER, s)),
                mT(
                    e.checkFramebufferStatus(e.FRAMEBUFFER) === e.FRAMEBUFFER_COMPLETE,
                    "WebGLRenderTarget framebuffer is incomplete"
                ),
                e.bindFramebuffer(e.FRAMEBUFFER, null);
        }
        ygt() {
            if (!this.ii && !this.qMn) throw new Error("already deleted render target");
            vT.delete(this);
            const t = this.ci.eZt();
            this.ii
                ? (t.bindFramebuffer(t.FRAMEBUFFER, this.HMn),
                  t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, null, 0),
                  this.hms &&
                      (t.bindFramebuffer(t.FRAMEBUFFER, this.KMn),
                      t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, null, 0)),
                  this.ci.mi(this.ii),
                  (this.ii = null))
                : this.qMn &&
                  (t.bindFramebuffer(t.FRAMEBUFFER, this.HMn),
                  t.framebufferRenderbuffer(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.RENDERBUFFER, null),
                  this.hms &&
                      (t.bindFramebuffer(t.FRAMEBUFFER, this.KMn),
                      t.framebufferRenderbuffer(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.RENDERBUFFER, null)),
                  t.deleteRenderbuffer(this.qMn),
                  (this.qMn = null)),
                t.bindFramebuffer(t.FRAMEBUFFER, null),
                this.ci.PMn() >= 2 &&
                    (t.bindFramebuffer(t.READ_FRAMEBUFFER, null), t.bindFramebuffer(t.DRAW_FRAMEBUFFER, null)),
                t.deleteFramebuffer(this.HMn),
                this.hms && t.deleteFramebuffer(this.KMn);
            const i = this.ci.Svn();
            (i.WSn = null), (i.HSn = null), (this.HMn = null);
        }
        tEn() {
            this.ci.fL(this.QMn, this.RS / this._S),
                (this.NG = this.ci.fgn()),
                (this.VG = this.ci.aX()),
                (this.KG = this.ci.cX());
        }
        Sxn() {
            return this.HMn;
        }
        xxn() {
            return this.KMn;
        }
        Vi() {
            return this.ci;
        }
        Li() {
            return this.ii;
        }
        sEn() {
            return (
                (this.ci.fgn() === this.NG && this.ci.aX() === this.VG && this.ci.cX() === this.KG) || this.tEn(),
                this.QMn
            );
        }
        Sq() {
            return "nearest" !== this.MMn;
        }
        nEn() {
            return this.YMn;
        }
        rEn() {
            return this.JMn;
        }
        hEn() {
            return this.hms;
        }
        rs() {
            return this.RS;
        }
        ls() {
            return this._S;
        }
        oEn() {
            return this.XMn;
        }
        aEn() {
            return this.ZMn;
        }
        LYt() {
            const t = { Oi: this.MMn, alpha: this.YMn, $Mn: this.JMn };
            return this.XMn || ((t.width = this.RS), (t.height = this._S)), t;
        }
        lEn(t) {
            return (
                ("nearest" !== (t = Object.assign({}, bT, t)).Oi) === this.Sq() &&
                !!t.alpha === this.nEn() &&
                !!t.qJ === this.hEn() &&
                !(this.ci.PMn() >= 2 && !!t.$Mn !== this.rEn()) &&
                ("number" == typeof t.width || "number" == typeof t.height
                    ? !this.oEn() && this.rs() === Math.floor(t.width) && this.ls() === Math.floor(t.height)
                    : this.oEn())
            );
        }
        uEn() {
            return this.ii ? this.ii.axn() : null;
        }
        HX() {
            return this.ii ? this.ii.HX() : this.RS * this._S * (this.YMn ? 4 : 3);
        }
        static async cEn(t, i) {
            const e = await t.dEn(i, !0);
            return await pT.rfs(e);
        }
        static je() {
            vT.clear();
        }
        static fEn() {
            return vT.values();
        }
        static pEn(t, i) {
            for (const e of vT) e.oEn() && e.eEn(t, i);
        }
    };
}
{
    const ST = self.t;
    class xT {
        constructor(t) {
            (this.Wbn = t.eZt()),
                (this.Yqt = t.PMn()),
                (this.mEn = t.wEn()),
                (this.gEn = null),
                (this.Zu = !1),
                (this.yEn = !1),
                (this.VQs = 0),
                1 === this.Yqt ? (this.gEn = this.mEn.createQueryEXT()) : (this.gEn = this.Wbn.createQuery());
        }
        Ut() {
            this.bEn(), (this.Wbn = null), (this.mEn = null), (this.yEn = !1);
        }
        bEn() {
            this.gEn &&
                (1 === this.Yqt ? this.mEn.deleteQueryEXT(this.gEn) : this.Wbn.deleteQuery(this.gEn),
                (this.gEn = null));
        }
        zxn() {
            if (this.Zu) throw new Error("query already active");
            1 === this.Yqt
                ? this.mEn.beginQueryEXT(this.mEn.TIME_ELAPSED_EXT, this.gEn)
                : this.Wbn.beginQuery(this.mEn.TIME_ELAPSED_EXT, this.gEn),
                (this.Zu = !0);
        }
        Hxn() {
            if (!this.Zu) throw new Error("query not active");
            1 === this.Yqt
                ? this.mEn.endQueryEXT(this.mEn.TIME_ELAPSED_EXT)
                : this.Wbn.endQuery(this.mEn.TIME_ELAPSED_EXT),
                (this.Zu = !1);
        }
        vEn() {
            if (!this.gEn || this.yEn || this.Zu) return;
            let t = !1;
            t =
                1 === this.Yqt
                    ? this.mEn.getQueryObjectEXT(this.gEn, this.mEn.QUERY_RESULT_AVAILABLE_EXT)
                    : this.Wbn.getQueryParameter(this.gEn, this.Wbn.QUERY_RESULT_AVAILABLE);
            const i = this.Wbn.getParameter(this.mEn.GPU_DISJOINT_EXT);
            t &&
                !i &&
                (1 === this.Yqt
                    ? (this.VQs = this.mEn.getQueryObjectEXT(this.gEn, this.mEn.QUERY_RESULT_EXT))
                    : (this.VQs = this.Wbn.getQueryParameter(this.gEn, this.Wbn.QUERY_RESULT)),
                (this.VQs /= 1e9),
                (this.yEn = !0)),
                (t || i) && this.bEn();
        }
        SEn() {
            return this.yEn;
        }
        M3s() {
            if (!this.yEn) throw new Error("no result available");
            return this.VQs;
        }
    }
    ST.bn.xEn = class {
        constructor(t) {
            (this.ci = t),
                (this.hgn = t.syn()),
                (this.Zu = !1),
                (this.MEn = null),
                (this.EEn = !1),
                (this.CEn = null),
                (this._En = []);
        }
        Ut() {
            for (const t of this._En) t instanceof xT && t.Ut();
            ST.yh(this._En), (this.MEn = null), (this.CEn = null), (this.ci = null);
        }
        zxn() {
            if (this.Zu) throw new Error("query already active");
            const t = this.ci.TEn();
            t.length > 0
                ? ((this.EEn = !0), (this.MEn = t.at(-1)), this.MEn.IEn(), this.MEn._En.push(this))
                : ((this.EEn = !1), (this.MEn = null)),
                (this.Zu = !0),
                t.push(this),
                this.PEn();
        }
        Hxn() {
            if (!this.Zu) throw new Error("query not active");
            if (this.ci.TEn().pop() !== this) throw new Error("can only end most nested query");
            (this.Zu = !1), this.IEn(), this.MEn && (this.MEn.PEn(), (this.MEn = null));
        }
        PEn() {
            (this.CEn = ST.m(xT, this.ci)), this._En.push(this.CEn), this.CEn.zxn();
        }
        IEn() {
            this.CEn.Hxn(), (this.CEn = null);
        }
        vEn() {
            for (const t of this._En) t.vEn();
        }
        Qxs() {
            return this.EEn;
        }
        SEn() {
            return this._En.every((t) => t.SEn());
        }
        M3s() {
            return this._En.reduce((t, i) => t + i.M3s(), 0);
        }
        syn() {
            return this.hgn;
        }
    };
}
{
    const MT = self.t;
    MT.bn.GEn = class {
        constructor(t, i = 1e3) {
            (this.ci = t), (this.AEn = i), (this.eKe = []), this.ci.REn(this);
        }
        Ut() {
            this._x(), this.ci.kEn(this), (this.ci = null);
        }
        _x() {
            for (const t of this.eKe) t.Ut();
            MT.yh(this.eKe);
        }
        OEn() {
            const t = new MT.bn.xEn(this.ci);
            if ((this.eKe.push(t), this.eKe.length > this.AEn)) {
                this.eKe.shift().Ut();
            }
            return t;
        }
        DEn(t) {
            for (const i of this.eKe) {
                if (i.syn() >= t) return;
                if (i.Qxs()) return;
                i.vEn();
            }
        }
        FEn(t, i) {
            if (i <= t) return NaN;
            let e = 0;
            for (const s of this.eKe) {
                if (s.syn() >= i) break;
                if (!(s.syn() < t)) {
                    if (!s.SEn()) return NaN;
                    e += s.M3s();
                }
            }
            return e;
        }
        LEn(t) {
            for (let i = 0, e = this.eKe.length; i < e; ++i) {
                const e = this.eKe[i];
                if (!(e.syn() < t)) return void (i > 0 && this.eKe.splice(0, i));
                e.Ut();
            }
        }
    };
}
{
    const ET = self.t,
        CT = self.assert,
        _T = self.sG,
        TT = (_T.hG, _T.ems),
        IT = _T.eG,
        PT = { powerPreference: "default", tq: !0, alpha: !1, qJ: !1, QJ: !1, iq: 2, JJ: !1 },
        GT = new Set(["default", "low-power", "high-performance"]),
        AT = 65535,
        RT = 6 * AT,
        kT = 8e3,
        OT = kT - 4,
        DT = new ET.Bi(0, 0, 1, 0, 1, 1, 0, 1),
        FT = IT.create(),
        LT = IT.create(),
        BT = new ET.Bi(),
        UT = new ET.Rect();
    let NT = null;
    ET.Xr &&
        ((self.BEn = function () {
            NT ? NT.UEn() : (() => {})("WEBGL_lose_context not supported");
        }),
        (self.NEn = function () {
            NT ? NT.jEn() : (() => {})("WEBGL_lose_context not supported");
        }));
    const jT = new Set();
    let $T = -1;
    function zT() {
        $T = -1;
        for (const t of jT) t.$En() && (t.resolve(), jT.delete(t));
        jT.size > 0 && ($T = self.requestAnimationFrame(zT));
    }
    ET.bn.hq = class extends ET.bn.dS {
        constructor(t, i) {
            if ((super(i), (i = Object.assign({}, PT, i)), ET.vu(i.powerPreference), !GT.has(i.powerPreference)))
                throw new Error("invalid power preference");
            const e = {
                alpha: !!i.alpha,
                depth: !1,
                antialias: !1,
                powerPreference: i.powerPreference,
                failIfMajorPerformanceCaveat: !!i.JJ,
            };
            let s = null,
                n = 0;
            if (
                (i.iq >= 2 && ((s = t.getContext("webgl2", e)), (n = 2)),
                s || ((s = t.getContext("webgl", e)), (n = 1)),
                !s)
            )
                throw new Error("renderer-unavailable (could not get WebGL context)");
            (this.Wbn = s),
                (this.zEn = s.getContextAttributes()),
                (this.VEn = s.getParameter(s.VERSION)),
                (this.Yqt = n),
                (this.wBs = TT.create()),
                (this.WEn = !1),
                (this.HEn = IT.create()),
                (this.KEn = !!i.qJ),
                (this.qEn = !(!i.qJ || !i.QJ)),
                (this.XEn = this.KEn),
                (this.YEn = !1),
                (this.JEn = null),
                (this.ZEn = !0),
                (this.QEn = 0),
                (this.tCn = 0),
                (this.Evn = null),
                (this.Cvn = null),
                (this._vn = null),
                (this.iCn = null),
                (this.Ivn = null),
                (this.eCn = this.Yqt >= 2 && void 0 !== globalThis.Float16Array),
                (this.sCn = new Float32Array(3 * AT)),
                (this.nCn = new Uint16Array(RT)),
                (this.rCn = new Float32Array(2 * AT)),
                (this.hCn = this.eCn ? new globalThis.Float16Array(4 * AT) : new Float32Array(4 * AT)),
                (this.Oli = new Float32Array(4 * kT)),
                (this.oCn = 0),
                (this.aCn = 0),
                (this.lCn = 0),
                (this.uCn = null),
                (this.cCn = null),
                (this.dCn = []),
                (this.fCn = 0),
                (this.pCn = 0),
                (this.mCn = null),
                (this.wCn = 0),
                (this.YSn = ET.m(ET.bn.VSn, this)),
                (this.gCn = ET.m(ET.nr, 1, 1, 1, 1)),
                (this.yCn = null),
                (this.Oxn = null),
                (this.bCn = 0),
                (this.vCn = 0),
                (this.SCn = new ET.Rect()),
                (this.xCn = ET.m(ET.Rect, 0, 0, -1, -1)),
                (this.MCn = 0),
                (this.ECn = 0),
                (this.CCn = 0),
                (this._Cn = -1),
                (this.TCn = 0),
                (this.ICn = 0),
                (this.PCn = "(unavailable)"),
                (this.GCn = "(unavailable)"),
                (this.ACn = []),
                (this.RCn = !1),
                (this.kCn = null),
                (this.OCn = null),
                (this.DCn = null),
                (this.FCn = null),
                (this.LCn = null),
                (this.BCn = null),
                (this.UCn = null),
                (this.NCn = 0),
                (this.jCn = !!i.tq),
                (this.mEn = null),
                (this.$Cn = new Set()),
                (this.zCn = []);
        }
        ayn() {
            return !0;
        }
        async nq() {
            super.nq();
            const t = this.Wbn;
            this.gCn.dvs(1, 1, 1, 1),
                (this.yCn = null),
                (this.Oxn = null),
                (this.oCn = 0),
                (this.aCn = 0),
                (this.lCn = 0),
                ET.yh(this.dCn),
                (this.fCn = 0),
                (this.pCn = 0),
                (this.uCn = null),
                (this.mCn = null),
                this.SCn.set(0, 0, 1, 1),
                (this.wCn = 0);
            const i = this.YSn;
            (i.dSn = null),
                (i.WSn = null),
                (i.HSn = null),
                i.clearColor.dvs(0, 0, 0, 0),
                i.qSn.set(0, 0, 1, 1),
                t.clearColor(0, 0, 0, 0),
                t.clear(t.COLOR_BUFFER_BIT),
                t.enable(t.BLEND),
                t.blendFunc(t.ONE, t.ONE_MINUS_SRC_ALPHA),
                (this.bCn = t.ONE),
                (this.vCn = t.ONE_MINUS_SRC_ALPHA),
                this.VCn(t),
                t.cullFace(t.BACK),
                t.disable(t.CULL_FACE),
                (this.ECn = 0),
                t.frontFace(t.CW),
                (this.CCn = 0),
                t.disable(t.STENCIL_TEST),
                t.disable(t.DITHER),
                this.KEn
                    ? (t.enable(t.DEPTH_TEST), t.depthMask(!0), t.depthFunc(t.LEQUAL))
                    : (t.disable(t.DEPTH_TEST), t.depthMask(!1)),
                (this.XEn = this.KEn),
                (this.YEn = !1),
                (this.Ivn = t.createBuffer()),
                t.bindBuffer(t.ARRAY_BUFFER, this.Ivn),
                t.bufferData(t.ARRAY_BUFFER, this.Oli.byteLength, t.DYNAMIC_DRAW),
                (this.Evn = t.createBuffer()),
                t.bindBuffer(t.ARRAY_BUFFER, this.Evn),
                t.bufferData(t.ARRAY_BUFFER, this.sCn.byteLength, t.DYNAMIC_DRAW),
                (this.Cvn = t.createBuffer()),
                t.bindBuffer(t.ARRAY_BUFFER, this.Cvn),
                t.bufferData(t.ARRAY_BUFFER, this.rCn.byteLength, t.DYNAMIC_DRAW),
                (this._vn = t.createBuffer()),
                t.bindBuffer(t.ARRAY_BUFFER, this._vn),
                t.bufferData(t.ARRAY_BUFFER, this.hCn.byteLength, t.DYNAMIC_DRAW),
                (this.iCn = t.createBuffer()),
                t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.iCn),
                t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.nCn.byteLength, t.DYNAMIC_DRAW),
                t.activeTexture(t.TEXTURE0),
                t.bindTexture(t.TEXTURE_2D, null),
                (this._Cn = t.getParameter(t.MAX_TEXTURE_SIZE));
            const e = t.getParameter(t.ALIASED_POINT_SIZE_RANGE);
            (this.TCn = e[0]),
                (this.ICn = e[1]),
                this.ICn > 2048 && (this.ICn = 2048),
                (this.ACn = t.getSupportedExtensions());
            const s = t.getExtension("WEBGL_debug_renderer_info");
            if (
                (s &&
                    ((this.PCn = t.getParameter(s.UNMASKED_VENDOR_WEBGL)),
                    (this.GCn = t.getParameter(s.UNMASKED_RENDERER_WEBGL))),
                (this.kCn = t.getExtension("KHR_parallel_shader_compile")),
                this.Yqt >= 2 &&
                    ("Chromium" !== ET.fk.FRe || ET.fk.DRe >= 135) &&
                    (this.DCn = t.getExtension("EXT_conservative_depth")),
                ET.Xr && (NT = t.getExtension("WEBGL_lose_context")),
                this.jCn &&
                    (1 === this.PMn()
                        ? (this.mEn = t.getExtension("EXT_disjoint_timer_query"))
                        : (this.mEn =
                              t.getExtension("EXT_disjoint_timer_query_webgl2") ||
                              t.getExtension("EXT_disjoint_timer_query"))),
                (this.OCn = t.getExtension("EXT_texture_filter_anisotropic")),
                this.OCn ? (this.NCn = t.getParameter(this.OCn.MAX_TEXTURE_MAX_ANISOTROPY_EXT)) : (this.NCn = 0),
                this.PMn() < 2 &&
                    this.KEn &&
                    this.qEn &&
                    ((this.FCn = t.getExtension("WEBGL_depth_texture")), !this.FCn))
            )
                throw new Error("no depth texture support");
            this.PMn() < 2 &&
                ((this.LCn = t.getExtension("EXT_frag_depth")),
                (this.BCn = t.getExtension("OES_standard_derivatives")),
                (this.UCn = t.getExtension("EXT_shader_texture_lod")));
            const n = ET.bn.wvn,
                r = n.xSn(!1);
            let h = n.ESn(),
                o = r,
                a = n.kSn(),
                l = n.ASn(),
                u = n.TSn(),
                c = n.xSn(!0),
                d = !1;
            this.KEn &&
                (this.PMn() < 2
                    ? this.LCn && ((h = n.CSn()), (a = n.OSn()), (u = n.ISn()), (d = !0))
                    : ((o = n.MSn()),
                      (h = n._Sn(this.WCn())),
                      (a = n.DSn(this.WCn())),
                      (l = n.RSn()),
                      (u = n.PSn(this.WCn())),
                      (c = n.MSn(!0))));
            const f = n.GSn(this.PMn(), d, this.BCn && this.UCn, this.WCn()),
                p = this.PMn() >= 2 ? n.MSn() : r,
                m = [
                    [h, o, "<default>"],
                    [h, o, "<default-device-transform>"],
                    [a, l, "<point>"],
                    [n.FSn(), r, "<fill>"],
                    [n.LSn(), r, "<lineargradient>"],
                    [n.BSn(), r, "<penumbra>"],
                    [n.NSn(), r, "<hardellipse>"],
                    [n.jSn(), r, "<hardellipseoutline>"],
                    [n.$Sn(), r, "<smoothellipse>"],
                    [n.zSn(), r, "<smoothellipseoutline>"],
                    [n.USn(), r, "<smoothline>"],
                    [u, c, "<tilemap>"],
                    [f, p, "<tilerandomization>"],
                ],
                w = await Promise.all(m.map((t) => this.HCn({ src: t[0], yvn: t[1], name: t[2] })));
            (this.Lwn = w[0]),
                (this.cCn = w[1]),
                (this.Bwn = w[2]),
                (this.jwn = w[3]),
                (this.$wn = w[4]),
                (this.zwn = w[5]),
                (this.Vwn = w[6]),
                (this.Wwn = w[7]),
                (this.Hwn = w[8]),
                (this.Kwn = w[9]),
                (this.qwn = w[10]),
                (this.Uwn = w[11]),
                (this.Nwn = w[12]),
                this.an();
        }
        async HCn(t) {
            const i = await ET.bn.wvn.mF(this, t);
            return this.mgn(i), i;
        }
        KCn() {
            this.uCn = null;
        }
        en(t, i, e) {
            if (this.RS === t && this._S === i && !e) return;
            this.eyn();
            const s = this.Wbn,
                n = this.YSn;
            (this.RS = t),
                (this._S = i),
                this.qCn(0, 0, t, i),
                this.fL(this.HEn, t / i),
                this.Xz(this.HEn),
                this.cCn &&
                    (s.useProgram(this.cCn.ghs()),
                    this.cCn.oSn(this.Gwn),
                    (this.uCn = this.cCn),
                    (this.YSn.dSn = this.cCn)),
                s.bindTexture(s.TEXTURE_2D, null),
                s.activeTexture(s.TEXTURE1),
                s.bindTexture(s.TEXTURE_2D, null),
                s.activeTexture(s.TEXTURE0),
                (this.yCn = null),
                (this.Oxn = null),
                this.KEn && this.ZEn && this.XCn(this.RS, this._S),
                this.mCn && this.mCn.eEn(this.RS, this._S),
                s.bindFramebuffer(s.FRAMEBUFFER, null),
                (this.mCn = null),
                (n.WSn = null),
                (n.HSn = null);
        }
        XCn(t, i) {
            const e = this.Wbn;
            (this.JEn && this.QEn === t && this.tCn === i) ||
                (this.qEn
                    ? (this.JEn && e.deleteTexture(this.JEn),
                      (this.JEn = e.createTexture()),
                      e.bindTexture(e.TEXTURE_2D, this.JEn),
                      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.NEAREST),
                      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.NEAREST),
                      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
                      e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
                      this.PMn() >= 2
                          ? e.texImage2D(
                                e.TEXTURE_2D,
                                0,
                                e.DEPTH24_STENCIL8,
                                t,
                                i,
                                0,
                                e.DEPTH_STENCIL,
                                e.UNSIGNED_INT_24_8,
                                null
                            )
                          : this.FCn
                            ? e.texImage2D(
                                  e.TEXTURE_2D,
                                  0,
                                  e.DEPTH_STENCIL,
                                  t,
                                  i,
                                  0,
                                  e.DEPTH_STENCIL,
                                  this.FCn.UNSIGNED_INT_24_8_WEBGL,
                                  null
                              )
                            : CT(!1, "no depth texture support"),
                      e.bindTexture(e.TEXTURE_2D, null))
                    : (this.JEn && e.deleteRenderbuffer(this.JEn),
                      (this.JEn = e.createRenderbuffer()),
                      e.bindRenderbuffer(e.RENDERBUFFER, this.JEn),
                      e.renderbufferStorage(e.RENDERBUFFER, this.Yqt >= 2 ? e.DEPTH24_STENCIL8 : e.DEPTH_STENCIL, t, i),
                      e.bindRenderbuffer(e.RENDERBUFFER, null)),
                (this.QEn = t),
                (this.tCn = i));
        }
        YCn(t, i) {
            this.KEn && ((this.ZEn = !1), this.XCn(t, i));
        }
        JCn() {
            this.KEn && ((this.ZEn = !0), this.XCn(this.RS, this._S));
        }
        qCn(t, i, e, s) {
            const n = this.wBs;
            if (n[0] === t && n[1] === i && n[2] === e && n[3] === s) return;
            this.ZCn().fxn(t, i, e, s), TT.set(n, t, i, e, s), (this.pCn = 0);
        }
        iL(t) {
            super.iL(t), this.fL(this.HEn, this.RS / this._S);
        }
        aL(t) {
            super.aL(t), this.fL(this.HEn, this.RS / this._S);
        }
        cL(t) {
            super.cL(t), this.fL(this.HEn, this.RS / this._S);
        }
        Xz(t) {
            if (IT.wMe(this.Gwn, t)) return;
            this.ZCn().mxn(t), IT.mn(this.Gwn, t), (this.pCn = 0), (this.WEn = !0);
        }
        QCn() {
            let t, i, e;
            const s = this.mCn;
            null === s
                ? ((t = this.HEn), (i = this.rs()), (e = this.ls()))
                : ((t = s.sEn()), (i = s.rs()), (e = s.ls())),
                this.Xz(t),
                this.qCn(0, 0, i, e);
        }
        Zz(t) {
            if (IT.wMe(this.Awn, t)) return;
            this.ZCn().gxn(t), IT.mn(this.Awn, t), (this.pCn = 0), (this.WEn = !0);
        }
        t_n() {
            this.WEn = !1;
        }
        C$s() {
            return this.WEn;
        }
        Svn() {
            return this.YSn;
        }
        ZCn() {
            const t = this.dCn;
            return this.fCn === t.length && t.push(new ET.bn.XSn(this.YSn)), t[this.fCn++];
        }
        eyn() {
            0 !== this.fCn &&
                (this.fi() ||
                    (this.i_n(),
                    this.e_n(),
                    (this.fCn = 0),
                    (this.oCn = 0),
                    (this.aCn = 0),
                    (this.lCn = 0),
                    (this.pCn = 0)));
        }
        i_n() {
            const t = this.Wbn;
            this.oCn > 0 &&
                (t.bindBuffer(t.ARRAY_BUFFER, this.Evn),
                t.bufferSubData(t.ARRAY_BUFFER, 0, this.sCn.subarray(0, 3 * this.oCn)),
                t.bindBuffer(t.ARRAY_BUFFER, this.Cvn),
                t.bufferSubData(t.ARRAY_BUFFER, 0, this.rCn.subarray(0, 2 * this.oCn)),
                t.bindBuffer(t.ARRAY_BUFFER, this._vn),
                t.bufferSubData(t.ARRAY_BUFFER, 0, this.hCn.subarray(0, 4 * this.oCn))),
                this.aCn > 0 &&
                    (t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.iCn),
                    t.bufferSubData(t.ELEMENT_ARRAY_BUFFER, 0, this.nCn.subarray(0, this.aCn))),
                this.lCn > 0 &&
                    (t.bindBuffer(t.ARRAY_BUFFER, this.Ivn),
                    t.bufferSubData(t.ARRAY_BUFFER, 0, this.Oli.subarray(0, this.lCn)));
        }
        e_n() {
            const t = this.dCn;
            for (let i = 0, e = this.fCn; i < e; ++i) t[i].Ske();
        }
        Lo() {
            return this.gCn.getA();
        }
        ps(t, i, e, s) {
            const n = this.gCn;
            n._bs(t, i, e, s) || (n.dvs(t, i, e, s), (this.Ywn = null), 2 === this.pCn && (this.pCn = 0));
        }
        nu(t) {
            const i = this.gCn;
            i.getA() !== t && (i.yS(t), (this.Ywn = null), 2 === this.pCn && (this.pCn = 0));
        }
        Ki(t) {
            const i = this.gCn;
            i.equals(t) || (i.set(t), (this.Ywn = null), 2 === this.pCn && (this.pCn = 0));
        }
        ln() {
            this.ps(1, 1, 1, 1);
        }
        Zi() {
            return this.gCn;
        }
        vs(t) {
            if (t === this.yCn) return;
            CT(!t || !this.mCn || t !== this.mCn.Li(), "setting texture to current render texture");
            this.ZCn().hxn(t), (this.yCn = t), (this.pCn = 0);
        }
        RMn() {
            this.yCn = null;
        }
        Ch(t) {
            const i = this.Agn(t);
            this.s_n(i[0], i[1]);
        }
        Sh(t) {
            const i = this.Ogn(t);
            this.s_n(i.Pgn, i.Ggn);
        }
        s_n(t, i) {
            if (t === this.bCn && i === this.vCn) return;
            this.ZCn().cxn(t, i), (this.bCn = t), (this.vCn = i), (this.pCn = 0), (this.Ywn = null);
        }
        n_n() {
            return this.bCn === this.Wbn.ONE && this.vCn === this.Wbn.ONE_MINUS_SRC_ALPHA;
        }
        cs() {
            this.s_n(this.Wbn.ONE, this.Wbn.ONE_MINUS_SRC_ALPHA);
        }
        r_n() {
            this.s_n(this.Wbn.SRC_ALPHA, this.Wbn.ONE_MINUS_SRC_ALPHA);
        }
        wg(t) {
            if (this.ECn === t) return;
            this.ZCn().pMn(t), (this.ECn = t), (this.pCn = 0), (this.Ywn = null);
        }
        h_n() {
            return this.ECn;
        }
        bg(t) {
            if (this.CCn === t) return;
            this.ZCn().wMn(t), (this.CCn = t), (this.pCn = 0), (this.Ywn = null);
        }
        o_n() {
            return this.CCn;
        }
        a_n() {
            this.s_n(this.Wbn.ONE, this.Wbn.ZERO);
        }
        Rect(t) {
            this.O3(t.un(), t.pn(), t.Rr(), t._r());
        }
        O3(t, i, e, s) {
            this.iyn(t, i, e, i, e, s, t, s);
        }
        l_n(t, i) {
            if (((this.oCn + t > AT || this.aCn + i > RT) && this.eyn(), 1 === this.pCn))
                this.dCn[this.fCn - 1].ZSn += i;
            else {
                this.ZCn().nxn(2 * this.aCn, i), (this.pCn = 1);
            }
        }
        u_n() {
            const t = this.oCn;
            let i = this.aCn;
            this.aCn += 6;
            const e = this.nCn;
            (e[i++] = t), (e[i++] = t + 1), (e[i++] = t + 2), (e[i++] = t), (e[i++] = t + 2), (e[i] = t + 3);
        }
        Bi(t) {
            this.no(t, DT);
        }
        iyn(t, i, e, s, n, r, h, o) {
            this.l_n(4, 6), this.u_n();
            const a = this.sCn,
                l = this.oCn;
            this.oCn += 4;
            let u = 3 * l;
            const c = this.Qwn + this.tgn;
            (a[u++] = t),
                (a[u++] = i),
                (a[u++] = c),
                (a[u++] = e),
                (a[u++] = s),
                (a[u++] = c),
                (a[u++] = n),
                (a[u++] = r),
                (a[u++] = c),
                (a[u++] = h),
                (a[u++] = o),
                (a[u] = c),
                DT.jDe(this.rCn, 2 * l),
                this.gCn.XDe(this.hCn, 4 * l);
        }
        Ts(t, i) {
            this.l_n(4, 6), this.u_n();
            const e = this.oCn;
            (this.oCn += 4),
                t.qFe(this.sCn, 3 * e, this.Qwn + this.tgn),
                i.SFe(this.rCn, 2 * e),
                this.gCn.XDe(this.hCn, 4 * e);
        }
        no(t, i) {
            this.l_n(4, 6), this.u_n();
            const e = this.oCn;
            (this.oCn += 4),
                t.qFe(this.sCn, 3 * e, this.Qwn + this.tgn),
                i.jDe(this.rCn, 2 * e),
                this.gCn.XDe(this.hCn, 4 * e);
        }
        c_n(t, i, e) {
            this.l_n(4, 6), this.u_n();
            const s = this.oCn;
            (this.oCn += 4),
                t.qFe(this.sCn, 3 * s, this.Qwn + this.tgn),
                i.jDe(this.rCn, 2 * s),
                this.hCn.set(e, 4 * s);
        }
        Og(t, i, e, s, n, r, h, o, a, l, u, c, d) {
            this.l_n(4, 6), this.u_n();
            const f = this.sCn,
                p = this.oCn;
            this.oCn += 4;
            let m = 3 * p;
            const w = this.Qwn + this.tgn;
            (f[m++] = t),
                (f[m++] = i),
                (f[m++] = w + e),
                (f[m++] = s),
                (f[m++] = n),
                (f[m++] = w + r),
                (f[m++] = h),
                (f[m++] = o),
                (f[m++] = w + a),
                (f[m++] = l),
                (f[m++] = u),
                (f[m] = w + c),
                d.SFe(this.rCn, 2 * p),
                this.gCn.XDe(this.hCn, 4 * p);
        }
        Dg(t, i, e, s, n, r, h, o, a, l, u, c, d) {
            this.l_n(4, 6), this.u_n();
            const f = this.sCn,
                p = this.oCn;
            this.oCn += 4;
            let m = 3 * p;
            const w = this.Qwn + this.tgn;
            (f[m++] = t),
                (f[m++] = i),
                (f[m++] = w + e),
                (f[m++] = s),
                (f[m++] = n),
                (f[m++] = w + r),
                (f[m++] = h),
                (f[m++] = o),
                (f[m++] = w + a),
                (f[m++] = l),
                (f[m++] = u),
                (f[m] = w + c),
                d.jDe(this.rCn, 2 * p),
                this.gCn.XDe(this.hCn, 4 * p);
        }
        d_n(t, i, e, s, n, r, h, o, a, l, u, c, d, f) {
            this.l_n(4, 6), this.u_n();
            const p = this.sCn,
                m = this.oCn;
            this.oCn += 4;
            let w = 3 * m;
            const g = this.Qwn + this.tgn;
            (p[w++] = t),
                (p[w++] = i),
                (p[w++] = g + e),
                (p[w++] = s),
                (p[w++] = n),
                (p[w++] = g + r),
                (p[w++] = h),
                (p[w++] = o),
                (p[w++] = g + a),
                (p[w++] = l),
                (p[w++] = u),
                (p[w] = g + c),
                d.jDe(this.rCn, 2 * m),
                this.hCn.set(f, 4 * m);
        }
        $l(t, i, e, s) {
            if (t.length % 3 != 0) throw new Error("vertex buffer length not multiple of 3");
            if (t.length > 3 * AT) throw new Error(`too many vertices (${t.length / 3}, limit ${AT})`);
            if (e.length % 3 != 0) throw new Error("index buffer length not multiple of 3");
            if (e.length > RT) throw new Error(`too many indices (${e.length}, limit ${RT})`);
            this.l_n(t.length, e.length);
            const n = this.oCn;
            this.sCn.set(t, 3 * n), this.rCn.set(i, 2 * n);
            const r = this.nCn;
            if (0 === n) r.set(e, this.aCn);
            else {
                let t = this.aCn;
                for (let i = 0, s = e.length; i < s; ++i) r[t++] = e[i] + n;
            }
            const h = this.hCn;
            if (null != s) h.set(s, 4 * n);
            else {
                const i = this.gCn,
                    e = i.getR(),
                    s = i.getG(),
                    r = i.getB(),
                    o = i.getA();
                let a = 4 * n;
                for (let i = 0, n = t.length; i < n; ++i) (h[a++] = e), (h[a++] = s), (h[a++] = r), (h[a++] = o);
            }
            (this.oCn += t.length / 3), (this.aCn += e.length);
        }
        f_n(t, i) {
            this.UL(0), IT.mn(FT, this.Gwn), IT.mn(LT, this.Awn), this.QCn();
            const [e, s] = this.p_n(this.mCn),
                n = this.Yz(0, 0, this.Rn(s), 0, 0, 0, s);
            if ((this.Zz(n), "crop" === t && this.mCn && i)) {
                const t = this.RS / 2,
                    e = this._S / 2,
                    s = i.rs(),
                    n = i.ls(),
                    r = this.mCn.rs(),
                    h = this.mCn.ls(),
                    o = Math.min(r, s),
                    a = Math.min(h, n),
                    l = Math.max(n - h, 0),
                    u = Math.max(h - n, 0);
                UT.set(-t, e - u, -t + o, e - a - u), BT.gn(UT), UT.set(0, l, o, a + l), UT.Tg(s, n), this.Ts(BT, UT);
            } else {
                const t = e / 2,
                    i = s / 2;
                this.O3(-t, i, t, -i);
            }
            this.Xz(FT), this.Zz(LT);
        }
        bu(t) {
            if (this.SCn.equals(t)) return;
            this.SCn.mn(t);
            this.ZCn()._xn(t), (this.pCn = 0);
        }
        xu() {}
        Mp(t, i, e, s) {
            this.lCn >= OT && this.eyn();
            let n = this.lCn;
            const r = this.Qwn + this.tgn;
            if (2 === this.pCn && this.wCn === r) this.dCn[this.fCn - 1].ZSn++;
            else {
                this.ZCn().Ixn(n, r, this.gCn), (this.pCn = 2), (this.wCn = r);
            }
            const h = this.Oli;
            (h[n++] = t), (h[n++] = i), (h[n++] = e), (h[n++] = s), (this.lCn = n);
        }
        xg(t) {
            if (this.uCn === t) return;
            this.ZCn().Gxn(t), (this.uCn = t), (this.pCn = 0), (this.Ywn = null);
        }
        yg() {
            return this.uCn;
        }
        m_n() {
            this.xg(this.cCn);
        }
        w_n(t) {
            this.ZCn().lxn(t), (this.pCn = 0);
        }
        g_n(t, i, e = 1) {
            this.ZCn().Kxn(t, i, e), (this.pCn = 0);
        }
        oI(t, i, e, s, n, r, h) {
            if (this.uCn !== this.Uwn) throw new Error("must set tilemap fill mode first");
            this.ZCn().Xxn(t, i, e, s, n, r, h), (this.pCn = 0);
        }
        av(t, i, e, s, n, r, h) {
            if (this.uCn !== this.Nwn) throw new Error("must set tile randomization mode first");
            this.ZCn().Jxn(t, i, e, s, n, r, h), (this.pCn = 0);
        }
        y_n(t, i, e, s, n, r, h, o, a, l, u) {
            const c = this.uCn;
            if (((u %= 10800), !c.sSn || c.wSn(i, e, s, n, r, h, o, a, l, u))) return;
            const d = this.ZCn();
            d.Rxn(), c.gSn(i, e, s, n, r, h, o, a, l, u);
            const f = d.txn;
            (f[0] = r), (f[1] = h), i.jDe(f, 2), (f[6] = a), (f[7] = l), e.jDe(f, 12);
            const p = d.ixn;
            n.jDe(p, 0);
            const m = p[1];
            (p[1] = p[3]),
                (p[3] = m),
                s.jDe(d.exn, 0),
                (d.JSn = u),
                (d.ZSn = o),
                c.Nvn.Jbn()
                    ? (CT(!t || !this.mCn || t !== this.mCn, "Warning: setting texture1 to current render texture"),
                      (d.QSn = t ? t.Li() : null))
                    : (d.QSn = null),
                (this.pCn = 0);
        }
        b_n(t) {
            const i = this.uCn;
            if (0 === t.length || i.pSn(t)) return;
            const e = this.ZCn();
            e.Dxn(), i.mSn(t), ET.Rm(e.sxn, t), (this.pCn = 0);
        }
        y$s(t, i, e, s) {
            this.ZCn().Exn(t, i, e, s), (this.pCn = 0);
        }
        _x(t) {
            this.ZCn().Mxn(t), (this.pCn = 0);
        }
        BV() {}
        PL() {
            super.PL(), this.Wbn.flush();
        }
        kLs() {
            if (!this.KEn || !this.mCn || !this.mCn.hEn()) return;
            this.ZCn().Qxn(this.XEn), (this.pCn = 0);
        }
        SL(t) {
            if (((t = !!t), this.XEn === t)) return;
            if (!this.KEn) return;
            this.XEn = t;
            this.ZCn().iMn(t), (this.pCn = 0);
        }
        v_n() {
            return this.XEn;
        }
        rMn() {
            return this.JEn;
        }
        iEn() {
            return this.qEn;
        }
        S_n(t) {
            if (((t = !!t), !this.qEn)) return;
            if (this.YEn === t) return;
            if (t && this.v_n()) throw new Error("depth still enabled");
            this.YEn = t;
            this.ZCn().sMn(t), (this.pCn = 0);
        }
        x_n(t, i, e, s, n = 0) {
            if (
                ((t = Math.floor(t)),
                (i = Math.floor(i)),
                (e = Math.floor(e)),
                (s = Math.floor(s)),
                this.xCn.yFe(t, i, e, s))
            )
                return;
            this.xCn.Np(t, i, e, s);
            i = (n || this.p_n(this.$Vs())[1]) - i - s;
            this.ZCn().dMn(!0, t, i, e, s), (this.pCn = 0);
        }
        M_n() {
            if (-1 === this.xCn.Rr()) return;
            this.xCn.set(0, 0, -1, -1);
            this.ZCn().dMn(!1, 0, 0, 0, 0), (this.pCn = 0);
        }
        E_n() {
            for (const t of this.$Cn) t.DEn(this.hgn);
        }
        fi() {
            return !this.Wbn || this.Wbn.isContextLost() || this.RCn;
        }
        je() {
            super.ugn(), ET.bn.xMn.je(), ET.bn.WMn.je(), ET.bn.wn.je();
            for (const t of this.$Cn) t._x();
            (this.ACn = []),
                (this.mEn = null),
                (this.kCn = null),
                (this.DCn = null),
                (this.OCn = null),
                (this.FCn = null),
                (this.LCn = null),
                (this.BCn = null),
                (this.UCn = null),
                (this.NCn = 0),
                (this.PCn = "(unavailable)"),
                (this.GCn = "(unavailable)"),
                (this.uCn = null),
                (this.cCn = null),
                (this.JEn = null);
            for (const t of this.Xwn.values()) t.je();
        }
        async gC() {
            (this.RCn = !0), await this.nq(), (this.RCn = !1);
            for (const t of this.Xwn.values()) t.gC(this);
            this.en(this.RS, this._S, !0);
        }
        ki(t, i) {
            if (this.fi()) throw new Error("context lost");
            this.eyn();
            const e = ET.m(ET.bn.xMn, this);
            return e.IMn(t, i), e;
        }
        async Ti(t, i) {
            if (this.fi()) throw new Error("context lost");
            if (((i = Object.assign({}, i)), ET.Y$.$es)) {
                let e = await createImageBitmap(t, { premultiplyAlpha: "premultiply" });
                const s = (i.ji && "clamp-to-edge" !== i.ji) || (i.Ri && "clamp-to-edge" !== i.Ri),
                    n = ET.vDe(e.width) && ET.vDe(e.height);
                return (
                    this.cC() || n || !s
                        ? (i.SMn = !1)
                        : ET.Y$.zRe
                          ? ((e = await createImageBitmap(t, {
                                premultiplyAlpha: "premultiply",
                                resizeWidth: ET.Sn(e.width),
                                resizeHeight: ET.Sn(e.height),
                            })),
                            (i.SMn = !1))
                          : (e = await createImageBitmap(t, { premultiplyAlpha: "none" })),
                    await ET.Roe(() => this.ki(e, i))
                );
            }
            if (t instanceof Blob) {
                if ("undefined" == typeof Image) throw new Error("texture upload variant not supported in worker");
                const i = await ET.pC(t);
                t = i;
            }
            return await ET.Roe(() => this.ki(t, i));
        }
        DL(t, i, e) {
            this.eyn();
            const s = ET.m(ET.bn.xMn, this);
            return s.kMn(t, i, e), s;
        }
        HL(t, i, e) {
            this.eyn(), i.C8t(t, e);
        }
        mi(t) {
            t &&
                (t.UMn(),
                t.NMn() > 0 ||
                    (this.eyn(),
                    t === this.yCn && (this.Wbn.bindTexture(this.Wbn.TEXTURE_2D, null), (this.yCn = null)),
                    t === this.Oxn &&
                        (this.Wbn.activeTexture(this.Wbn.TEXTURE1),
                        this.Wbn.bindTexture(this.Wbn.TEXTURE_2D, null),
                        this.Wbn.activeTexture(this.Wbn.TEXTURE0),
                        (this.Oxn = null)),
                    t.ygt()));
        }
        vq(t) {
            ET.Crt(t);
            let i = this.RS,
                e = this._S,
                s = !0;
            if (
                (t &&
                    ("number" == typeof t.width && ((i = Math.floor(t.width)), (s = !1)),
                    "number" == typeof t.height && ((e = Math.floor(t.height)), (s = !1))),
                i <= 0 || e <= 0)
            )
                throw new Error("invalid size");
            this.eyn();
            const n = ET.m(ET.bn.WMn, this);
            return (
                n.mue(i, e, Object.assign({ zMn: s }, t)),
                (this.mCn = null),
                (this.YSn.WSn = null),
                (this.YSn.HSn = null),
                n
            );
        }
        vL(t, i = !0) {
            if (t === this.mCn) return;
            t && t.oEn() && t.eEn(this.RS, this._S);
            this.ZCn().bxn(t), (this.mCn = t), (this.pCn = 0), i && this.QCn();
        }
        $Vs() {
            return this.mCn;
        }
        p_n(t) {
            return t ? [t.rs(), t.ls()] : [this.RS, this._S];
        }
        C_n(t, i = "stretch") {
            if (
                (CT(t !== this.mCn, "copying render target to itself"),
                this.Yqt < 2 || (this.mCn && this.mCn.aEn() > 0))
            )
                this.a_n(), this.ln(), this.JVs(t, i);
            else {
                this.ZCn().Uxn(t, this.mCn, i), (this.pCn = 0);
            }
        }
        JVs(t, i = "stretch") {
            CT(t !== this.mCn, "drawing render target to itself");
            const e = t.Li();
            if (!e) throw new Error("not a texture-backed render target");
            this.vs(e), this.f_n(i, e);
        }
        HVs(t) {
            if (this.Yqt < 2) return;
            this.ZCn().Lxn(t.Sxn()), (this.pCn = 0);
        }
        __n(t) {
            this.vL(null), this.eyn();
            const i = t.Li();
            i === this.yCn && (this.Wbn.bindTexture(this.Wbn.TEXTURE_2D, null), (this.yCn = null)),
                i === this.Oxn &&
                    (this.Wbn.activeTexture(this.Wbn.TEXTURE1),
                    this.Wbn.bindTexture(this.Wbn.TEXTURE_2D, null),
                    this.Wbn.activeTexture(this.Wbn.TEXTURE0),
                    (this.Oxn = null)),
                t.ygt();
        }
        async dEn(t, i, e) {
            this.eyn();
            const s = this.mCn;
            let n, r, h;
            t ? ((n = t.rs()), (r = t.ls()), (h = t.Sxn())) : ((n = this.rs()), (r = this.ls()), (h = null));
            let o = 0,
                a = 0,
                l = n,
                u = r;
            if (e) {
                (o = ET.ft(Math.floor(e.un()), 0, n - 1)), (a = ET.ft(Math.floor(e.pn()), 0, r - 1));
                let t = e.width();
                t = 0 === t ? n - o : ET.ft(Math.floor(t), 0, n - o);
                let i = e.height();
                (i = 0 === i ? r - a : ET.ft(Math.floor(i), 0, r - a)), (l = t), (u = i), (a = r - (a + u));
            }
            const c = this.Wbn;
            c.bindFramebuffer(c.FRAMEBUFFER, h);
            const d = () => {
                c.bindFramebuffer(c.FRAMEBUFFER, null),
                    (this.mCn = null),
                    (this.YSn.WSn = null),
                    (this.YSn.HSn = null),
                    this.vL(s);
            };
            let f;
            if (!i && this.PMn() >= 2) {
                c.bindFramebuffer(c.READ_FRAMEBUFFER, h);
                const t = c.createBuffer(),
                    i = l * u * 4,
                    e = c.PIXEL_PACK_BUFFER;
                c.bindBuffer(e, t),
                    c.bufferData(e, i, c.STREAM_READ),
                    c.readPixels(o, a, l, u, c.RGBA, c.UNSIGNED_BYTE, 0),
                    c.bindFramebuffer(c.READ_FRAMEBUFFER, null),
                    c.bindBuffer(e, null),
                    d();
                const s = c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE, 0);
                await this.vvn(() => c.getSyncParameter(s, c.SYNC_STATUS) === c.SIGNALED),
                    c.deleteSync(s),
                    (f = new ImageData(l, u)),
                    c.bindBuffer(e, t),
                    c.getBufferSubData(e, 0, new Uint8Array(f.data.buffer), 0, i),
                    c.bindBuffer(e, null),
                    c.deleteBuffer(t);
            } else
                (f = new ImageData(l, u)),
                    c.readPixels(o, a, l, u, c.RGBA, c.UNSIGNED_BYTE, new Uint8Array(f.data.buffer)),
                    d();
            return f;
        }
        T_n() {
            this.SL(!0);
            this.ZCn().hMn(), (this.pCn = 0), (this.MCn = 1);
        }
        I_n(t = !1) {
            this.SL(t);
            this.ZCn().aMn(), (this.pCn = 0), (this.MCn = 2);
        }
        P_n() {
            return 2 === this.MCn;
        }
        G_n(t = !0) {
            this.SL(t);
            this.ZCn().uMn(), (this.pCn = 0), (this.MCn = 0);
        }
        A_n(t) {
            if (!this.R_n()) return;
            this.ZCn().jxn(t), (this.pCn = 0);
        }
        k_n(t) {
            if (!this.R_n()) return;
            this.ZCn().Vxn(t), (this.pCn = 0);
        }
        vvn(t) {
            const i = new Promise((i) => jT.add({ resolve: i, $En: t }));
            return -1 === $T && ($T = self.requestAnimationFrame(zT)), i;
        }
        lyn() {
            return this.RS * this._S * (this.zEn.alpha ? 4 : 3);
        }
        uyn() {
            let t = 0;
            for (const i of ET.bn.WMn.fEn()) i.Li() || (t += i.HX());
            return t;
        }
        cyn() {
            let t = 0;
            for (const i of ET.bn.xMn.jMn()) t += i.HX();
            return t;
        }
        O_n() {
            return this.VEn;
        }
        PMn() {
            return this.Yqt;
        }
        Tvn() {
            return this.eCn;
        }
        mCt() {
            return "webgl" + this.PMn();
        }
        cC() {
            return this.PMn() >= 2;
        }
        _bn() {
            return this._Cn;
        }
        Tp() {
            return this.TCn;
        }
        Ip() {
            return this.ICn;
        }
        D_n() {
            return this.PCn;
        }
        F_n() {
            return this.GCn;
        }
        L_n() {
            if (this.PMn() >= 2) return "webgl2";
            {
                const t = [];
                return (
                    this.LCn && t.push("EXT_frag_depth"),
                    this.BCn && t.push("OES_standard_derivatives"),
                    this.UCn && t.push("EXT_shader_texture_lod"),
                    t.length > 0 ? "webgl1:" + t.join(",") : "webgl1:none"
                );
            }
        }
        B_n() {
            return this.ACn;
        }
        R_n() {
            return !!this.mEn;
        }
        wEn() {
            return this.mEn;
        }
        bvn() {
            return this.kCn;
        }
        WCn() {
            return !!this.DCn;
        }
        FMn() {
            return this.OCn;
        }
        LMn() {
            return this.NCn;
        }
        REn(t) {
            this.$Cn.add(t);
        }
        kEn(t) {
            this.$Cn.delete(t);
        }
        TEn() {
            return this.zCn;
        }
        eZt() {
            return this.Wbn;
        }
        VCn(t) {
            this.Ign([
                ["normal", t.ONE, t.ONE_MINUS_SRC_ALPHA],
                ["additive", t.ONE, t.ONE],
                ["xor", t.ONE, t.ONE_MINUS_SRC_ALPHA],
                ["copy", t.ONE, t.ZERO],
                ["destination-over", t.ONE_MINUS_DST_ALPHA, t.ONE],
                ["source-in", t.DST_ALPHA, t.ZERO],
                ["destination-in", t.ZERO, t.SRC_ALPHA],
                ["source-out", t.ONE_MINUS_DST_ALPHA, t.ZERO],
                ["destination-out", t.ZERO, t.ONE_MINUS_SRC_ALPHA],
                ["source-atop", t.DST_ALPHA, t.ONE_MINUS_SRC_ALPHA],
                ["destination-atop", t.ONE_MINUS_DST_ALPHA, t.SRC_ALPHA],
            ]);
        }
        U_n() {
            return this.fyn();
        }
    };
}
{
    const VT = self.t,
        WT = self.sG,
        HT = (WT.hG, WT.eG),
        KT = self.assert,
        qT = self.GPUBufferUsage,
        XT = self.GPUShaderStage,
        YT = (self.GPUMapMode, self.GPUTextureUsage),
        JT = { powerPreference: "default", qJ: !1, JJ: !1, N_n: !1, j_n: "bilinear", $_n: !1, QJ: !1, z_n: !0 },
        ZT = 65535,
        QT = 6 * ZT,
        tI = Math.floor(ZT / 4),
        iI = ZT,
        eI = 4 * tI - 16,
        sI = 1,
        nI = 2,
        rI = 4,
        hI = 8,
        oI = 16,
        aI = 32,
        lI = 64,
        uI = 128,
        cI = 256,
        dI = 512,
        fI = 1024,
        pI = 2048,
        mI = 4096,
        wI = 8192,
        gI = 16384,
        yI = 32768,
        bI = 65536,
        vI = 1 << 17,
        SI = 1 << 18,
        xI = 1 << 19,
        MI = 1 << 20,
        EI = 1 << 21,
        CI = 1 << 22,
        _I = 1 << 23,
        TI = 1 << 24,
        II = 1 << 25,
        PI = 1 << 26,
        GI = 1 << 27,
        AI = 1 << 28,
        RI = 1 << 29,
        kI = 1 << 30,
        OI = 1,
        DI = oI | aI | wI | lI | uI | cI,
        FI = DI | hI | sI,
        LI = DI | gI,
        BI = dI | fI | pI | mI,
        UI = 2,
        NI = 4,
        jI = 2,
        $I = 4,
        zI = new VT.Bi(0, 0, 1, 0, 1, 1, 0, 1),
        VI = VT.m(VT.r4),
        WI = VT.m(VT.Rect),
        HI = (VT.m(VT.Rect), VT.m(VT.Bi));
    VT.bn.sq = class extends VT.bn.dS {
        constructor(t) {
            super(t),
                (this.V_n = null),
                (this.Bui = null),
                (this.W_n = null),
                (this.H_n = null),
                (this.xG = null),
                (this.K_n = null),
                (this.q_n = ""),
                (this.X_n = null),
                (this.Y_n = null),
                (this.F8s = 0),
                (this.T8s = 0),
                (this.J_n = HT.create()),
                (this.JEn = null),
                (this.Z_n = null),
                (this.Q_n = null),
                (this.tTn = null),
                (this.iTn = null),
                (this.eTn = null),
                (this.QEn = 0),
                (this.tCn = 0),
                (this.sTn = null),
                (this.nTn = null),
                (this.rTn = null),
                (this.hTn = null),
                (this.Evn = null),
                (this.Cvn = null),
                (this.oTn = null),
                (this._vn = null),
                (this.iCn = null),
                (this.aTn = null),
                (this.Ivn = null),
                (this.lTn = VT.bn.cTn.uTn()),
                (this.dTn = VT.bn.cTn.fTn()),
                (this.pTn = null),
                (this.mTn = null),
                (this.wTn = VT.bn.cTn.gTn()),
                (this.yTn = VT.bn.cTn.bTn()),
                (this.vTn = null),
                (this.STn = null),
                (this.xTn = VT.bn.cTn.MTn()),
                (this.ETn = VT.bn.cTn.CTn()),
                (this._Tn = null),
                (this.TTn = null),
                (this.ITn = null),
                (this.sCn = new Float32Array(3 * ZT)),
                (this.rCn = new Float32Array(2 * ZT)),
                (this.PTn = new Uint32Array(ZT)),
                (this.hCn = null),
                (this.nCn = new Uint16Array(QT)),
                (this.Oli = new Float32Array(4 * tI)),
                (this.oCn = 0),
                (this.aCn = 0),
                (this.GTn = 0),
                (this.ATn = VT.m(VT.nr, 1, 1, 1, 1)),
                (this.lCn = 0),
                (this.RTn = VT.m(VT.bn.kTn, this)),
                (this.OTn = yI),
                (this.DTn = 0),
                (this.FTn = 0),
                (this.LTn = 0),
                (this.BTn = 0),
                (this.UTn = 0),
                (this.NTn = 0),
                (this.jTn = 0),
                (this.$Tn = 0),
                (this.zTn = 0),
                (this.VTn = VT.m(VT.Rect, 0, 0, 0, 0)),
                (this.WTn = VT.m(VT.nr, 1, 1, 1, 1)),
                (this.HTn = VT.m(VT.nr, 1, 1, 1, 1)),
                (this.KTn = VT.m(VT.Rect, 0, 0, 0, 0)),
                (this.qTn = 0),
                (this.XTn = ""),
                (this.YTn = null),
                (this.JTn = null),
                (this.ZTn = null),
                (this.QTn = null),
                (this.tIn = null),
                (this.iIn = null),
                (this.eIn = null),
                (this.sIn = null),
                (this.nIn = null),
                (this.rIn = null),
                (this.hIn = null),
                (this.oIn = null),
                (this.aIn = null),
                (this.lIn = new Set()),
                (this.uIn = new Set()),
                (this._Cn = 8192),
                (this.cIn = null),
                (this.dIn = null),
                (this.fIn = null),
                (this.pIn = null),
                (this.mIn = 0),
                (this.wIn = 0),
                (this.gIn = 0),
                (this.yIn = 0),
                (this.bIn = null),
                (this.vIn = null),
                (this.SIn = new Map()),
                (this.xIn = null),
                (this.MIn = null),
                (this.EIn = []),
                (this.CIn = null),
                (this.mCn = null),
                (this._In = !1),
                (this.TIn = "bilinear"),
                (this.IIn = !1),
                (this.qEn = !1),
                (this.PIn = null),
                (this.GIn = !1),
                (this.AIn = -1),
                (this.RIn = -1),
                (this.kIn = new Set()),
                (this.oq = null),
                (this.aq = null),
                this.VCn();
        }
        vp() {
            return !0;
        }
        OIn(t, i) {
            i ? (this.OTn |= t) : (this.OTn &= ~t);
        }
        DIn(t) {
            return 0 !== (this.OTn & t);
        }
        FIn(t, i) {
            i ? (this.DTn |= t) : (this.DTn &= ~t);
        }
        LIn(t) {
            return 0 !== (this.DTn & t);
        }
        async mF(t, i) {
            if (((i = Object.assign({}, JT, i)), !navigator.gpu))
                throw new Error("renderer-unavailable (WebGPU not supported)");
            i.qJ && (this.OTn |= xI),
                i.z_n && (this.OTn |= bI),
                (this._In = !!i.N_n),
                (this.TIn = i.j_n),
                (this.IIn = !!i.$_n),
                (this.V_n = {}),
                (this.qEn = !(!i.qJ || !i.QJ)),
                "default" !== i.powerPreference && (this.V_n.powerPreference = i.powerPreference),
                (this.xG = t),
                await this.BIn(i.JJ);
        }
        async BIn(t) {
            for (this.H_n = null, await this.UIn(t); !this.H_n; ) (this.Bui = null), await this.UIn(t);
            await this.nq();
        }
        async UIn(t) {
            if (!this.Bui) {
                if (((this.Bui = await navigator.gpu.requestAdapter(this.V_n)), !this.Bui))
                    throw new Error("renderer-unavailable (no WebGPU adapter available)");
                if (t && (this.Bui.isFallbackAdapter || this.Bui.info.isFallbackAdapter))
                    throw new Error("renderer-unavailable (WebGPU provided fallback adapter)");
                if ("adreno-7xx" === this.Bui.info.architecture)
                    throw new Error(
                        "WebGPU disabled on adreno-7xx devices - see https://issues.chromium.org/issues/329702056"
                    );
            }
            const i = [];
            if (
                (this.Bui.features.has("timestamp-query") && i.push("timestamp-query"),
                this.Bui.features.has("shader-f16") && i.push("shader-f16"),
                (this.H_n = await this.Bui.requestDevice({
                    requiredFeatures: i,
                    requiredLimits: { maxTextureDimension2D: this.Bui.limits.maxTextureDimension2D },
                })),
                !this.H_n)
            )
                return null;
            (this._Cn = this.H_n.limits.maxTextureDimension2D),
                this.OIn(GI, this.H_n.features.has("timestamp-query")),
                this.OIn(AI, this.H_n.features.has("shader-f16")),
                this.OIn(RI, this.DIn(AI) && void 0 !== globalThis.Float16Array),
                this.H_n.lost.then((t) => this.NIn(t)),
                this.OIn(yI, !1);
        }
        async NIn(t) {
            console.log("[WebGPU] Device lost: ", t),
                super.ugn(),
                this.RTn.je(),
                VT.bn.jIn.je(),
                VT.bn.$In.je(),
                VT.bn.wn.je(),
                (this.q_n = ""),
                (this.X_n = null),
                (this.Y_n = null),
                (this.JEn = null),
                (this.Q_n = null),
                (this.Z_n = null),
                (this.tTn = null),
                (this.iTn = null),
                (this.eTn = null),
                (this.Evn = null),
                (this.Cvn = null),
                (this.oTn = null),
                (this._vn = null),
                (this.iCn = null),
                (this.aTn = null),
                (this.Ivn = null),
                (this.sTn = null),
                (this.nTn = null),
                (this.rTn = null),
                (this.hTn = null),
                (this.JTn = null),
                (this.YTn = null),
                (this.oIn = null),
                (this.ZTn = null),
                (this.QTn = null),
                (this.tIn = null),
                (this.cIn = null),
                (this.pIn = null),
                (this.iIn = null),
                (this.eIn = null),
                (this.sIn = null),
                (this.nIn = null),
                (this.rIn = null),
                (this.hIn = null),
                (this.dIn = null),
                (this.fIn = null),
                (this.CIn = null),
                (this.mCn = null),
                (this.aIn = null),
                (this.PIn = null),
                (this.bIn = null),
                (this.vIn = null),
                this.lIn.clear(),
                this.uIn.clear(),
                this.SIn.clear();
            for (const t of this.Xwn.values()) t.je();
            (this.H_n = null),
                (this.Bui = null),
                (this.W_n = null),
                (this.OTn |= yI),
                this.oq && this.oq(),
                await this.BIn();
            for (const t of this.Xwn.values()) t.gC(this);
            this.en(this.RS, this._S, !0), this.aq && this.aq();
        }
        async nq() {
            super.nq();
            const t = this.H_n;
            (this.q_n = navigator.gpu.getPreferredCanvasFormat()), (this.X_n = null), (this.Y_n = null);
            let i = YT.RENDER_ATTACHMENT;
            this._In && (i |= YT.TEXTURE_BINDING),
                this.IIn && (i |= YT.COPY_SRC),
                this.q_n.startsWith("rgba8") || this.q_n.startsWith("bgra8")
                    ? (this.XTn = this.q_n)
                    : (this.XTn = "rgba8unorm"),
                (this.OTn &= xI | GI | AI | RI | bI),
                (this.OTn |= BI),
                (this.DTn = 0),
                this.DIn(xI) && (this.OTn |= MI | EI | PI),
                (this.oCn = 0),
                (this.aCn = 0),
                (this.mIn = 0),
                (this.gIn = 0),
                (this.yIn = 0),
                (this.wIn = 0),
                this.ATn.dvs(1, 1, 1, 1),
                this.WTn.dvs(1, 1, 1, 1),
                this.HTn.dvs(1, 1, 1, 1),
                (this.hCn = this.Tvn() ? new globalThis.Float16Array(4 * iI) : new Float32Array(4 * iI)),
                (this.pTn = new ArrayBuffer(this.dTn)),
                (this.mTn = new Float32Array(this.pTn)),
                (this.vTn = new ArrayBuffer(this.yTn)),
                (this.STn = new Float32Array(this.vTn)),
                (this._Tn = new ArrayBuffer(this.ETn)),
                (this.TTn = new Float32Array(this._Tn)),
                (this.ITn = new Uint32Array(this._Tn)),
                (this.Evn = t.createBuffer({
                    label: "vertexbuffer",
                    size: this.sCn.byteLength,
                    usage: qT.VERTEX | qT.COPY_DST,
                })),
                (this.Cvn = t.createBuffer({
                    label: "texcoordbuffer",
                    size: this.rCn.byteLength,
                    usage: qT.VERTEX | qT.COPY_DST,
                })),
                (this.oTn = t.createBuffer({
                    label: "texindexbuffer",
                    size: this.PTn.byteLength,
                    usage: qT.VERTEX | qT.COPY_DST,
                })),
                (this._vn = t.createBuffer({
                    label: "colorbuffer",
                    size: this.hCn.byteLength,
                    usage: qT.VERTEX | qT.COPY_DST,
                })),
                (this.iCn = t.createBuffer({
                    label: "indexbuffer",
                    size: this.nCn.byteLength,
                    usage: qT.INDEX | qT.COPY_DST,
                })),
                (this.aTn = t.createBuffer({
                    label: "pointsindexbuffer",
                    size: 6 * tI * 2,
                    usage: qT.INDEX,
                    mappedAtCreation: !0,
                }));
            const e = this.aTn.getMappedRange();
            this.zIn(e),
                this.aTn.unmap(),
                (this.Ivn = t.createBuffer({
                    label: "pointbuffer",
                    size: this.Oli.byteLength,
                    usage: qT.VERTEX | qT.STORAGE | qT.COPY_DST,
                })),
                (this.YTn = t.createBindGroupLayout({
                    label: "bufferbindgrouplayout",
                    entries: [
                        { binding: 0, visibility: XT.VERTEX, buffer: { type: "uniform", minBindingSize: this.dTn } },
                        { binding: 1, visibility: XT.FRAGMENT, buffer: { type: "uniform", minBindingSize: this.yTn } },
                        {
                            binding: 3,
                            visibility: XT.VERTEX,
                            buffer: { type: "read-only-storage", minBindingSize: this.Oli.byteLength },
                        },
                        { binding: 4, visibility: XT.FRAGMENT, buffer: { type: "uniform", minBindingSize: this.ETn } },
                        { binding: 5, visibility: XT.FRAGMENT, buffer: { type: "uniform" } },
                    ],
                }));
            const s = [],
                n = VT.bn.WIn.VIn();
            for (let t = 0; t < n; ++t)
                s.push(
                    { binding: 2 * t, visibility: XT.FRAGMENT, sampler: { type: "filtering" } },
                    {
                        binding: 2 * t + 1,
                        visibility: XT.FRAGMENT,
                        texture: { sampleType: "float", viewDimension: "2d" },
                    }
                );
            (this.ZTn = t.createBindGroupLayout({ label: "texturebindgrouplayout", entries: s })),
                (this.QTn = t.createBindGroupLayout({
                    label: "backtexturebindgrouplayout",
                    entries: [
                        {
                            binding: 0,
                            visibility: XT.FRAGMENT,
                            sampler: { type: "nearest" === this.TIn ? "non-filtering" : "filtering" },
                        },
                        { binding: 1, visibility: XT.FRAGMENT, texture: { sampleType: "float", viewDimension: "2d" } },
                    ],
                })),
                (this.tIn = t.createBindGroupLayout({
                    label: "depthtexturebindgrouplayout",
                    entries: [
                        { binding: 0, visibility: XT.FRAGMENT, sampler: { type: "non-filtering" } },
                        { binding: 1, visibility: XT.FRAGMENT, texture: { sampleType: "depth", viewDimension: "2d" } },
                    ],
                })),
                (this.cIn = t.createPipelineLayout({ bindGroupLayouts: [this.YTn, this.ZTn, this.QTn, this.tIn] }));
            const r = VT.bn.cTn,
                h = this.HIn(),
                o = this.Tvn();
            (this.dIn = t.createShaderModule({ label: "<default vertex module>", code: r.KIn(r.xSn(o), h) })),
                this.dIn.getCompilationInfo().then((t) => r.qIn("<default>", "vertex", t)),
                (this.fIn = t.createShaderModule({ label: "<normalized vertex module>", code: r.KIn(r.XIn(o), h) })),
                this.fIn.getCompilationInfo().then((t) => r.qIn("<normalized>", "vertex", t));
            const a = await Promise.all([
                r.mF(this, { name: "<default>", src: r.YIn(!1, o), JIn: r.YIn(!0, o), yvn: r.ZIn(o), QIn: r.tPn(o) }),
                r.mF(this, {
                    name: "<single-texture-fill>",
                    src: r.iPn(!1, o),
                    JIn: r.iPn(!0, o),
                    yvn: r.ZIn(o),
                    QIn: r.tPn(o),
                }),
                r.mF(this, { name: "<generate-mipmap>", src: r.ePn(), yvn: r.sPn() }),
                r.mF(this, { name: "<point>", src: r.nPn(!1), JIn: r.nPn(!0), yvn: r.rPn() }),
                r.mF(this, { name: "<tilemap>", src: r.hPn(!1), JIn: r.hPn(!0) }),
                r.mF(this, { name: "<fill>", src: r.oPn() }),
                r.mF(this, { name: "<lineargradient>", src: r.aPn() }),
                r.mF(this, { name: "<penumbra>", src: r.lPn() }),
                r.mF(this, { name: "<hardellipse>", src: r.uPn() }),
                r.mF(this, { name: "<hardellipseoutline>", src: r.cPn() }),
                r.mF(this, { name: "<smoothellipse>", src: r.dPn() }),
                r.mF(this, { name: "<smoothellipseoutline>", src: r.fPn() }),
                r.mF(this, { name: "<tilerandomization>", src: r.GSn(!1), JIn: r.GSn(!0) }),
                r.mF(this, { name: "<smoothline>", src: r.pPn() }),
            ]);
            (this.Lwn = a[0]),
                (this.vIn = a[1]),
                (this.bIn = a[2]),
                (this.Bwn = a[3]),
                (this.Uwn = a[4]),
                (this.jwn = a[5]),
                (this.$wn = a[6]),
                (this.zwn = a[7]),
                (this.Vwn = a[8]),
                (this.Wwn = a[9]),
                (this.Hwn = a[10]),
                (this.Kwn = a[11]),
                (this.Nwn = a[12]),
                (this.qwn = a[13]);
            for (const t of a) this.mgn(t);
            0 !== (this.OTn & bI) ? ((this.OTn |= vI | SI), (this.pIn = this.Lwn)) : (this.pIn = this.vIn),
                (this.aIn = this.bIn.mPn()),
                (this.sTn = t.createBuffer({
                    label: "vertexuniformbuffer",
                    size: this.dTn,
                    usage: qT.UNIFORM | qT.COPY_DST,
                })),
                (this.nTn = t.createBuffer({
                    label: "fragmentuniformbuffer",
                    size: this.yTn,
                    usage: qT.UNIFORM | qT.COPY_DST,
                })),
                (this.rTn = t.createBuffer({
                    label: "fragmentc3paramsuniformbuffer",
                    size: this.ETn,
                    usage: qT.UNIFORM | qT.COPY_DST,
                })),
                (this.hTn = t.createBuffer({
                    label: "fragmentdefaultcustomparamsbuffer",
                    size: 16,
                    usage: qT.UNIFORM | qT.COPY_DST,
                })),
                (this.BTn = 0),
                (this.UTn = this.dTn),
                this.wPn(),
                this.gPn(),
                this.yPn(),
                (this.NTn = 0),
                (this.jTn = this.yTn),
                this.bPn(),
                this.vPn(),
                (this.JTn = this.SPn(this.hTn)),
                (this.oIn = this.JTn);
            const l = VT.lx(32, 32);
            l.getContext("2d"),
                (this.iIn = await this.Ti(l)),
                (this.eIn = null),
                (this.sIn = this.iIn.xPn()),
                (this.GTn = 0),
                (this.nIn = null),
                (this.rIn = this.iIn.MPn()),
                this.iIn.EPn(),
                (this.Z_n = this.H_n.createTexture({
                    label: "nulldepthbuffer",
                    size: [8, 8, 1],
                    format: this.CPn(),
                    usage: YT.TEXTURE_BINDING,
                })),
                (this.tTn = this.Z_n.createView({ label: "nulldepthbufferview", aspect: "depth-only" })),
                (this.eTn = this.H_n.createBindGroup({
                    label: "nulldepthbufferbindgroup",
                    layout: this.tIn,
                    entries: [
                        { binding: 0, resource: this._Pn({ Oi: "nearest" }) },
                        { binding: 1, resource: this.tTn },
                    ],
                })),
                (this.hIn = this.eTn),
                (this.CIn = VT.m(VT.bn.$In, this, !0)),
                this.CIn.Li().TPn(i, this.q_n),
                (this.mCn = this.CIn),
                this.IPn(),
                (this.W_n = this.Bui.info),
                this.K_n || (this.K_n = this.xG.getContext("webgpu")),
                this.K_n.configure({ device: t, format: this.q_n, usage: i, alphaMode: "premultiplied" });
        }
        SPn(t) {
            return this.H_n.createBindGroup({
                layout: this.YTn,
                entries: [
                    { binding: 0, resource: { buffer: this.sTn } },
                    { binding: 1, resource: { buffer: this.nTn } },
                    { binding: 3, resource: { buffer: this.Ivn } },
                    { binding: 4, resource: { buffer: this.rTn } },
                    { binding: 5, resource: { buffer: t } },
                ],
            });
        }
        zIn(t) {
            KT(t.byteLength % 12 == 0, "wrong size index buffer");
            const i = new Uint16Array(t);
            let e = 0,
                s = i.length,
                n = 0;
            for (; e < s; )
                (i[e++] = n),
                    (i[e++] = n + 1),
                    (i[e++] = n + 2),
                    (i[e++] = n),
                    (i[e++] = n + 2),
                    (i[e++] = n + 3),
                    (n += 4);
        }
        PPn() {
            return this.H_n;
        }
        GPn() {
            return this.dIn;
        }
        APn() {
            return this.fIn;
        }
        async HCn(t) {
            const i = await VT.bn.cTn.mF(this, t);
            return this.mgn(i), i;
        }
        mCt() {
            return "webgpu";
        }
        RPn() {
            return this.q_n;
        }
        CPn() {
            return "depth24plus-stencil8";
        }
        kPn() {
            return this.X_n;
        }
        OPn() {
            return this.Y_n;
        }
        DPn() {
            return this._In;
        }
        FPn() {
            return this.IIn;
        }
        LPn() {
            return this.cIn;
        }
        BPn() {
            return this.ZTn;
        }
        UPn() {
            return this.QTn;
        }
        NPn() {
            return this.TIn;
        }
        jPn() {
            return this.XTn;
        }
        _bn() {
            return this._Cn;
        }
        fi() {
            return this.DIn(yI);
        }
        R_n() {
            return this.DIn(GI);
        }
        HIn() {
            return this.DIn(AI);
        }
        Tvn() {
            return this.DIn(RI);
        }
        lyn() {
            const t = this.rs() * this.ls();
            let i = t * VT.bn.jIn.$Pn(this.q_n);
            return this.zPn() && (i += t * VT.bn.jIn.$Pn(this.CPn())), i;
        }
        uyn() {
            let t = 0;
            for (const i of VT.bn.$In.fEn()) i.VPn() || (t += i.Li().HX());
            return t;
        }
        cyn() {
            let t = 0;
            for (const i of VT.bn.jIn.jMn()) i.WPn() || (t += i.HX());
            return t;
        }
        cC() {
            return !0;
        }
        HPn() {
            return this.RTn;
        }
        en(t, i, e) {
            (this.RS !== t || this._S !== i || e) &&
                (this.eyn(),
                (this.RS = t),
                (this._S = i),
                (this.F8s = t),
                (this.T8s = i),
                this.CIn.tEn(),
                this.Xz(this.CIn.sEn()),
                this.mCn && this.mCn.eEn(this.RS, this._S),
                this.DIn(xI) && this.DIn(PI) && this.XCn(t, i));
        }
        XCn(t, i) {
            if (this.JEn) {
                if (this.QEn === t && this.tCn === i) return;
                this.JEn.destroy();
            }
            let e = YT.RENDER_ATTACHMENT;
            this.qEn && (e |= YT.TEXTURE_BINDING),
                (this.JEn = this.H_n.createTexture({
                    label: "depthbuffer",
                    size: [t, i, 1],
                    format: this.CPn(),
                    usage: e,
                })),
                (this.Q_n = this.JEn.createView({ label: "depthbufferview" })),
                this.qEn &&
                    (this.iTn = this.H_n.createBindGroup({
                        label: "depthbufferbindgroup",
                        layout: this.tIn,
                        entries: [
                            { binding: 0, resource: this._Pn({ Oi: "nearest" }) },
                            {
                                binding: 1,
                                resource: this.JEn.createView({ label: "depthbufferview", aspect: "depth-only" }),
                            },
                        ],
                    })),
                (this.QEn = t),
                (this.tCn = i);
        }
        YCn(t, i) {
            this.zPn() && (this.OIn(PI, !1), this.XCn(t, i));
        }
        JCn() {
            this.zPn() && (this.OIn(PI, !0), this.XCn(this.RS, this._S));
        }
        Xz(t) {
            HT.wMe(this.Gwn, t) || (HT.mn(this.Gwn, t), this.wPn());
        }
        QCn() {
            this.Xz(this.mCn.sEn());
        }
        Zz(t) {
            HT.wMe(this.Awn, t) || (HT.mn(this.Awn, t), this.wPn());
        }
        t_n() {
            this.FIn(OI, !1);
        }
        C$s() {
            return this.LIn(OI);
        }
        ki(t, i) {
            if ((VT.Cv(t), t && !VT.bn.jIn.KPn(t))) {
                const i = t.width || t.videoWidth,
                    e = t.height || t.videoHeight,
                    s = VT.lx(i, e);
                s.getContext("2d").drawImage(t, 0, 0, i, e), (t = s);
            }
            this.eyn();
            const e = VT.m(VT.bn.jIn, this);
            return e.mue(t, i), e;
        }
        async Ti(t, i) {
            if (VT.bn.jIn.KPn(t)) return this.ki(t, i);
            {
                if (!VT.Y$.$es) throw new Error("no support for ImageBitmapOptions");
                const e = await createImageBitmap(t, { premultiplyAlpha: "premultiply" });
                return this.ki(e, i);
            }
        }
        _Pn(t) {
            const i = t.ji || "clamp-to-edge",
                e = t.Ri || "clamp-to-edge",
                s = t.Oi;
            let n = t.Pi || 0;
            "trilinear" !== s && (n = 0);
            const r = `${i},${e},${s},${n}`;
            let h = this.SIn.get(r);
            if (h) return h;
            const o = {
                addressModeU: i,
                addressModeV: e,
                magFilter: "nearest",
                minFilter: "nearest",
                mipmapFilter: "nearest",
            };
            return (
                ("bilinear" !== s && "trilinear" !== s) || ((o.magFilter = "linear"), (o.minFilter = "linear")),
                "trilinear" === s && ((o.mipmapFilter = "linear"), n > 1 && (o.maxAnisotropy = n)),
                (h = this.H_n.createSampler(o)),
                this.SIn.set(r, h),
                h
            );
        }
        mPn() {
            return this.aIn;
        }
        DL(t, i, e) {
            this.eyn();
            const s = VT.m(VT.bn.jIn, this);
            return s.kMn(t, i, e), s;
        }
        HL(t, i, e) {
            return i.C8t(t, e);
        }
        mi(t) {
            t &&
                (t.UMn(),
                t.NMn() > 0 ||
                    (this.fi() || (this.eyn(), this.eIn === t && this.vs(null), this.nIn === t && this.qPn(null)),
                    t.ygt()));
        }
        XPn(t, i) {
            this.fi() || (i ? this.lIn.add(t) : this.lIn.delete(t));
        }
        YPn(t, i) {
            i ? this.uIn.add(t) : this.uIn.delete(t);
        }
        JPn(t) {
            const i = [t],
                e = VT.bn.WIn.VIn();
            for (const t of this.uIn) t.Ut();
            for (const s of this.lIn) {
                if (i.length >= e) break;
                s !== t && i.push(s);
            }
            i.length < 2 || VT.m(VT.bn.WIn, this, i);
        }
        BV() {
            this.ZPn();
        }
        QPn() {
            this.ZPn();
        }
        ZPn() {
            (this.X_n = this.K_n.getCurrentTexture()),
                (this.Y_n = this.X_n.createView({ label: "swapchaintextureview" })),
                this.CIn.Li().tGn();
        }
        PL() {
            null === this.MIn && this.CIn.iGn() && this.eGn(),
                super.PL(),
                this.RTn.sGn(this.hgn),
                this.CIn.Li().nGn(),
                (this.X_n = null),
                (this.Y_n = null);
        }
        IPn() {
            (this.xIn = this.H_n.createCommandEncoder()), (this.OTn &= ~gI);
        }
        rGn(t) {
            if (!this.R_n()) throw new Error("GPU profiling not supported");
            if (this.PIn) throw new Error("already started frame timing");
            return (this.GIn = !1), this.kIn.clear(), (this.PIn = VT.m(VT.bn.hGn, this, t)), this.PIn;
        }
        oGn(t, i) {
            if (this.R_n()) {
                if (!this.PIn) throw new Error("not started frame timing");
                if (t < 0 || i < 0 || t === i) throw new Error("invalid timestamp index");
                this.aGn(), (this.GIn = !0), (this.AIn = t), (this.RIn = i);
            }
        }
        lGn() {
            this.GIn && (this.aGn(), (this.GIn = !1));
        }
        l_n(t, i) {
            if (this.oCn + t > ZT || this.aCn + i > QT) this.eyn();
            else if (0 !== (this.OTn & sI)) return void (this.LTn += i);
            null === this.MIn && this.eGn(), (this.OTn |= sI), (this.FTn = this.aCn), (this.LTn = i);
        }
        u_n() {
            const t = this.oCn;
            let i = this.aCn;
            this.aCn += 6;
            const e = this.nCn;
            (e[i++] = t), (e[i++] = t + 1), (e[i++] = t + 2), (e[i++] = t), (e[i++] = t + 2), (e[i] = t + 3);
        }
        uGn() {
            const t = this.OTn;
            if (0 === (t & sI)) return;
            const i = this.MIn;
            if (0 !== (t & oI)) {
                const e = this.mCn;
                i.setViewport(0, 0, e.rs(), e.ls(), 0, 1),
                    0 !== (t & nI) ? i.setIndexBuffer(this.aTn, "uint16") : i.setIndexBuffer(this.iCn, "uint16"),
                    i.setVertexBuffer(0, this.Evn),
                    i.setVertexBuffer(1, this.Cvn),
                    i.setVertexBuffer(2, this._vn),
                    i.setVertexBuffer(3, this.oTn),
                    0 !== (t & (_I | TI)) && i.setStencilReference(1),
                    0 !== (t & rI) && this.cGn(i, this.VTn, e);
            }
            if (0 !== (t & aI)) {
                let e = 0;
                0 !== (t & kI)
                    ? (e = 4)
                    : 0 !== (t & _I)
                      ? (e = 2)
                      : 0 !== (t & TI)
                        ? (e = 3)
                        : (t & (MI | EI)) === (MI | EI) && (e = 1),
                    i.setPipeline(this.pIn.dGn(this.mIn, e, this.gIn, this.yIn, this.wIn));
            }
            if (
                (0 !== (t & wI) && i.setBindGroup(0, this.oIn),
                0 !== (t & lI) && i.setBindGroup(1, this.sIn),
                0 !== (t & uI) && i.setBindGroup(2, this.rIn),
                0 !== (t & cI) && i.setBindGroup(3, this.hIn),
                0 !== (t & hI))
            ) {
                const e = this.mCn;
                0 !== (t & rI) ? this.cGn(i, this.VTn, e) : i.setScissorRect(0, 0, e.rs(), e.ls());
            }
            i.drawIndexed(this.LTn, 1, this.FTn, 0, 0), (this.OTn &= ~FI);
        }
        cGn(t, i, e) {
            const s = e.rs(),
                n = e.ls();
            let r = VT.ft(i.un(), 0, s),
                h = VT.ft(i.pn(), 0, n),
                o = VT.ft(i.Rr(), r, s),
                a = VT.ft(i._r(), h, n);
            Number.isNaN(r) && (r = 0),
                Number.isNaN(h) && (h = 0),
                Number.isNaN(o) && (o = s),
                Number.isNaN(a) && (a = n),
                t.setScissorRect(r, h, o - r, a - h);
        }
        eGn() {
            KT(!this.MIn, "expected no render pass");
            const t = this.OTn;
            0 !== (t & BI) && this.fGn();
            let i = null;
            (i = 0 !== (t & _I) ? this.pGn() : 0 !== (t & TI) ? this.mGn() : this.wGn()),
                (this.MIn = this.xIn.beginRenderPass(i)),
                (this.OTn |= LI);
        }
        wGn() {
            const t = this.OTn,
                i = this.mCn,
                e = {
                    colorAttachments: [
                        {
                            view: i.gGn(),
                            loadOp: i.iGn() ? "clear" : "load",
                            clearValue: i.yGn().toJSON(),
                            storeOp: "store",
                        },
                    ],
                };
            return (
                this.bGn(e),
                i.vGn(!1),
                (t & (EI | MI)) === (EI | MI) &&
                    ((e.depthStencilAttachment = {
                        view: this.Q_n,
                        depthLoadOp: 0 !== (t & CI) ? "clear" : "load",
                        depthClearValue: 1,
                        depthStoreOp: "store",
                        stencilLoadOp: "clear",
                        stencilClearValue: 0,
                        stencilStoreOp: "discard",
                    }),
                    (this.OTn &= ~CI)),
                e
            );
        }
        pGn() {
            const t = this.OTn,
                i = {
                    colorAttachments: [],
                    depthStencilAttachment: {
                        view: this.Q_n,
                        depthLoadOp: 0 !== (t & CI) ? "clear" : "load",
                        depthClearValue: 1,
                        depthStoreOp: "store",
                        stencilLoadOp: 0 !== (t & II) ? "clear" : "load",
                        stencilClearValue: 0,
                        stencilStoreOp: "store",
                    },
                };
            return this.bGn(i), (this.OTn &= ~(CI | II)), i;
        }
        mGn() {
            const t = this.mCn,
                i = {
                    colorAttachments: [
                        {
                            view: t.gGn(),
                            loadOp: t.iGn() ? "clear" : "load",
                            clearValue: t.yGn().toJSON(),
                            storeOp: "store",
                        },
                    ],
                    depthStencilAttachment: { view: this.Q_n, depthReadOnly: !0, stencilReadOnly: !0 },
                };
            return this.bGn(i), t.vGn(!1), i;
        }
        bGn(t) {
            if (!this.GIn) return;
            const i = { querySet: this.PIn.SGn(), endOfPassWriteIndex: this.RIn };
            this.kIn.has(this.AIn) || ((i.beginningOfPassWriteIndex = this.AIn), this.kIn.add(this.AIn)),
                (t.timestampWrites = i);
        }
        xGn(t) {
            if (!t.iGn()) return;
            this.aGn();
            this.xIn
                .beginRenderPass({
                    colorAttachments: [
                        { view: t.gGn(), loadOp: "clear", clearValue: t.yGn().toJSON(), storeOp: "store" },
                    ],
                })
                .end(),
                (this.OTn |= gI),
                t.vGn(!1);
        }
        aGn() {
            null !== this.MIn && (this.uGn(), this.MIn.end(), (this.MIn = null));
        }
        eyn(t = !1) {
            this.aGn(),
                this.PIn && t && (this.PIn.W5s(this.xIn), (this.OTn |= gI)),
                0 !== (this.OTn & gI) && (this.EIn.push(this.xIn.finish()), this.IPn()),
                0 !== this.EIn.length &&
                    (this.i_n(),
                    this.H_n.queue.submit(this.EIn),
                    VT.yh(this.EIn),
                    this.RTn.MGn(),
                    this.PIn && t && (this.PIn.EGn(), (this.PIn = null)));
        }
        i_n() {
            const t = this.H_n.queue;
            if (this.oCn > 0) {
                const i = this.oCn;
                t.writeBuffer(this.Evn, 0, this.sCn.buffer, 0, 3 * i * $I),
                    t.writeBuffer(this.Cvn, 0, this.rCn.buffer, 0, 2 * i * $I),
                    0 !== (this.OTn & bI) && t.writeBuffer(this.oTn, 0, this.PTn.buffer, 0, i * NI);
                const e = this.Tvn() ? jI : $I;
                t.writeBuffer(this._vn, 0, this.hCn.buffer, 0, 4 * i * e), (this.oCn = 0);
            }
            this.aCn > 0 &&
                (this.aCn % 2 != 0 && (this.nCn[this.aCn++] = 0),
                t.writeBuffer(this.iCn, 0, this.nCn.buffer, 0, this.aCn * UI),
                (this.aCn = 0)),
                this.lCn > 0 && (t.writeBuffer(this.Ivn, 0, this.Oli.buffer, 0, this.lCn * $I), (this.lCn = 0));
        }
        wPn() {
            (this.OTn |= dI), (this.DTn |= OI), this.CGn(this.lTn.transform);
        }
        gPn() {
            const t = this.lTn._Gn;
            this.KTn.jDe(this.mTn, t.offset / 4), this.CGn(t);
        }
        yPn() {
            const t = this.lTn.fBs;
            (this.mTn[t.offset / 4] = this.qTn), this.CGn(t);
        }
        CGn(t) {
            const i = t.offset,
                e = t.end;
            0 !== (this.OTn & fI)
                ? ((this.BTn = Math.min(this.BTn, i)), (this.UTn = Math.max(this.UTn, e)))
                : ((this.OTn |= fI), (this.BTn = i), (this.UTn = e), this.aGn());
        }
        bPn() {
            this.TGn(this.WTn, this.wTn.IGn);
        }
        vPn() {
            this.TGn(this.HTn, this.wTn.PGn);
        }
        TGn(t, i) {
            t.jDe(this.STn, i.offset / 4), this.GGn(i);
        }
        AGn(t, i) {
            t.jDe(this.STn, i.offset / 4), this.GGn(i);
        }
        GGn(t) {
            const i = t.offset,
                e = t.end;
            0 !== (this.OTn & pI)
                ? ((this.NTn = Math.min(this.NTn, i)), (this.jTn = Math.max(this.jTn, e)))
                : ((this.OTn |= pI), (this.NTn = i), (this.jTn = e), this.aGn());
        }
        RGn(t, i) {
            this.TTn[i.offset / 4] !== Math.fround(t) && ((this.TTn[i.offset / 4] = t), this.kGn(i));
        }
        OGn(t, i) {
            this.ITn[i.offset / 4] !== t && ((this.ITn[i.offset / 4] = t), this.kGn(i));
        }
        DGn(t, i) {
            t.BDe(this.TTn, i.offset / 4) || (t.jDe(this.TTn, i.offset / 4), this.kGn(i));
        }
        kGn(t) {
            const i = t.offset,
                e = t.end;
            0 !== (this.OTn & mI)
                ? ((this.$Tn = Math.min(this.$Tn, i)), (this.zTn = Math.max(this.zTn, e)))
                : ((this.OTn |= mI), (this.$Tn = i), (this.zTn = e), this.aGn());
        }
        fGn() {
            const t = this.OTn;
            0 !== (t & dI) &&
                (HT.multiply(this.J_n, this.Gwn, this.Awn), this.mTn.set(this.J_n, this.lTn.transform.offset / 4)),
                0 !== (t & fI) && this.RTn.FGn(this.xIn, this.sTn, this.pTn, this.BTn, this.UTn - this.BTn),
                0 !== (t & pI) && this.RTn.FGn(this.xIn, this.nTn, this.vTn, this.NTn, this.jTn - this.NTn),
                0 !== (t & mI) && this.RTn.FGn(this.xIn, this.rTn, this._Tn, this.$Tn, this.zTn - this.$Tn),
                (this.OTn = (t & ~BI) | gI);
        }
        vq(t) {
            VT.Crt(t);
            let i = this.RS,
                e = this._S,
                s = !0;
            if (
                (t &&
                    ("number" == typeof t.width && ((i = Math.floor(t.width)), (s = !1)),
                    "number" == typeof t.height && ((e = Math.floor(t.height)), (s = !1))),
                i <= 0 || e <= 0)
            )
                throw new Error("invalid size");
            this.eyn();
            const n = VT.m(VT.bn.$In, this);
            return n.mue(i, e, Object.assign({ zMn: s }, t)), n;
        }
        vL(t, i = !0) {
            null === t && (t = this.CIn),
                this.mCn !== t &&
                    (this.aGn(),
                    (this.mCn = t),
                    this.OIn(EI, t.hEn()),
                    t.oEn() && !t.VPn() && t.eEn(this.RS, this._S),
                    i && this.QCn());
        }
        HVs(t) {}
        $Vs() {
            return this.mCn === this.CIn ? null : this.mCn;
        }
        p_n(t) {
            return null === t ? [this.RS, this._S] : [t.rs(), t.ls()];
        }
        LGn() {
            return this.CIn;
        }
        __n(t) {
            this.eyn(), this.mCn === t && this.vL(null);
            const i = t.Li();
            this.eIn === i && this.vs(null), this.nIn === i && this.qPn(null), t.ygt();
        }
        async dEn(t, i, e) {
            this.xGn(t), this.eyn(), null === t && (t = this.CIn);
            const s = this.H_n,
                n = t.rs(),
                r = t.ls();
            let h = 0,
                o = 0,
                a = n,
                l = r;
            if (e) {
                (h = VT.ft(Math.floor(e.un()), 0, n - 1)), (o = VT.ft(Math.floor(e.pn()), 0, r - 1));
                let t = e.width();
                t = 0 === t ? n - h : VT.ft(Math.floor(t), 0, n - h);
                let i = e.height();
                (i = 0 === i ? r - o : VT.ft(Math.floor(i), 0, r - o)), (a = t), (l = i);
            }
            const u = s.createCommandEncoder(),
                c = t.Li();
            let d = c.axn(),
                f = null;
            "rgba8unorm" === c.BGn() ? c.UGn() || VT.fxs() : ((f = this.NGn(c, "rgba8unorm", u)), (d = f));
            const p = 4 * a,
                m = 256 * Math.ceil(p / 256),
                w = s.createBuffer({ size: m * l, usage: qT.MAP_READ | qT.COPY_DST });
            u.copyTextureToBuffer({ texture: d, origin: [h, o, 0] }, { buffer: w, bytesPerRow: m }, [a, l, 1]);
            const g = u.finish();
            s.queue.submit([g]), f && f.destroy(), await w.mapAsync(self.GPUMapMode.READ);
            const y = w.getMappedRange().slice(0);
            let b;
            if (m === p) b = new ImageData(new Uint8ClampedArray(y), a, l);
            else {
                const t = new ArrayBuffer(p * l),
                    i = new Uint8Array(t);
                for (let t = 0; t < l; ++t) {
                    const e = t * m,
                        s = t * p;
                    i.set(new Uint8Array(y, e, p), s);
                }
                b = new ImageData(new Uint8ClampedArray(t), a, l);
            }
            return w.destroy(), b;
        }
        NGn(t, i, e) {
            const s = this.H_n,
                n = t.rs(),
                r = t.ls();
            if (t.BGn() === i) throw new Error("no conversion necessary");
            t.rEn() || VT.fxs();
            const h = s.createTexture({ size: [n, r, 1], format: i, usage: YT.COPY_SRC | YT.RENDER_ATTACHMENT }),
                o = this.bIn.mPn(i),
                a = o.getBindGroupLayout(0),
                l = this._Pn({ Oi: "nearest" }),
                u = t.axn().createView({ baseMipLevel: 0, mipLevelCount: 1 }),
                c = h.createView({ baseMipLevel: 0, mipLevelCount: 1 }),
                d = e.beginRenderPass({
                    colorAttachments: [{ view: c, loadOp: "clear", clearValue: [0, 0, 0, 0], storeOp: "store" }],
                }),
                f = s.createBindGroup({
                    layout: a,
                    entries: [
                        { binding: 0, resource: l },
                        { binding: 1, resource: u },
                    ],
                });
            return d.setPipeline(o), d.setBindGroup(0, f), d.draw(4), d.end(), h;
        }
        SL(t) {
            0 !== (this.OTn & xI) &&
                ((t = !!t), (0 !== (this.OTn & MI)) !== t && (0 !== (this.OTn & EI) && this.aGn(), this.OIn(MI, t)));
        }
        v_n() {
            return this.DIn(MI);
        }
        zPn() {
            return this.DIn(xI);
        }
        S_n(t) {
            if (!this.qEn) return;
            if (t && this.v_n()) throw new Error("depth still enabled");
            const i = t ? this.iTn : this.eTn;
            this.hIn !== i && (this.uGn(), (this.hIn = i), (this.OTn |= cI));
        }
        _x(t) {
            this.aGn(), this.mCn.vGn(!0), this.mCn.yGn().set(t);
        }
        y$s(t, i, e, s) {
            this.aGn(), this.mCn.vGn(!0), this.mCn.yGn().dvs(t, i, e, s);
        }
        kLs() {
            (this.OTn & (xI | EI)) === (xI | EI) && (this.aGn(), (this.OTn |= CI));
        }
        x_n(t, i, e, s) {
            (t = Math.floor(t)),
                (i = Math.floor(i)),
                (e = Math.floor(e)),
                (s = Math.floor(s)),
                (0 !== (this.OTn & rI) && this.VTn.yFe(t, i, e, s)) ||
                    (this.uGn(), (this.OTn |= rI | hI), this.VTn.Np(t, i, e, s));
        }
        M_n() {
            0 !== (this.OTn & rI) && (this.uGn(), (this.OTn &= ~rI), (this.OTn |= hI));
        }
        ggn() {
            return 0 !== (this.OTn & bI) ? this.Lwn : this.vIn;
        }
        an() {
            this.xg(this.ggn());
        }
        xg(t) {
            if (this.pIn !== t) {
                if (t === this.Lwn && 0 === (this.OTn & bI))
                    throw new Error("cannot set multitexture fill program when multitexturing not allowed");
                this.uGn(), (this.pIn = t), (this.Ywn = null), (this.OTn |= aI), this.jGn(t === this.Lwn);
            }
        }
        yg() {
            return this.pIn;
        }
        jGn(t) {
            if (((t = !!t), (0 !== (this.OTn & vI)) === t)) return;
            this.OIn(vI, t);
            const i = null === this.eIn ? this.iIn : this.eIn;
            this.$Gn(i);
        }
        zGn(t) {
            (t = !!t), (0 !== (this.OTn & SI)) !== t && (this.uGn(), this.OIn(SI, t), this.OIn(aI, !0));
        }
        VGn(t) {
            (t = !!t), (0 !== (this.OTn & kI)) !== t && (this.uGn(), this.OIn(kI, t), (this.OTn |= aI));
        }
        WGn() {
            return this.DIn(kI);
        }
        vs(t) {
            t !== this.eIn && ((this.eIn = t), null === t && (t = this.iIn), this.$Gn(t));
        }
        $Gn(t) {
            if (0 !== (this.OTn & vI)) {
                const i = t.HGn();
                if (null !== i) return this.KGn(i), (this.GTn = t.qGn()), void this.zGn(!0);
            }
            this.KGn(t.xPn()), (this.GTn = 0), this.zGn(!1);
        }
        KGn(t) {
            t !== this.sIn && (this.uGn(), (this.sIn = t), (this.OTn |= lI));
        }
        XGn(t) {
            this.eIn === t && (this.uGn(), (this.sIn = t.xPn()), (this.OTn |= lI));
        }
        YGn(t) {
            if (this.sIn !== t) return;
            this.uGn();
            const i = null === this.eIn ? this.iIn : this.eIn;
            (this.sIn = i.xPn()), (this.GTn = 0), (this.OTn |= lI);
        }
        qPn(t) {
            t !== this.nIn &&
                ((this.nIn = t), null === t && (t = this.iIn), this.uGn(), (this.rIn = t.MPn()), (this.OTn |= uI));
        }
        JGn(t, i, e, s, n, r) {
            const h = t.ZGn(),
                o = i.ZGn();
            if (0 === (h & YT.COPY_SRC)) throw new Error("source texture missing COPY_SRC usage");
            if (0 === (o & YT.COPY_DST)) throw new Error("destination texture missing COPY_DST usage");
            if (t === i) throw new Error("invalid destination");
            const a = Math.min(t.rs(), i.rs()),
                l = Math.min(t.ls(), i.ls());
            (n = Math.min(n, a - e)),
                (r = Math.min(r, l - s)),
                n <= 0 ||
                    r <= 0 ||
                    (this.aGn(),
                    this.xIn.copyTextureToTexture(
                        { texture: t.axn(), origin: [e, s] },
                        { texture: i.axn(), origin: [e, s] },
                        [n, r]
                    ),
                    (this.OTn |= gI));
        }
        QGn(t) {
            return t >= 2 ? 4 : 1;
        }
        tAn(t) {
            (t = this.QGn(t)), this.wIn !== t && (this.uGn(), (this.wIn = t), (this.OTn |= aI));
        }
        Ch(t) {
            t !== this.mIn && (this.uGn(), (this.mIn = t), (this.Ywn = null), (this.OTn |= aI));
        }
        Sh(t) {
            this.Ch(this.S$s(t));
        }
        cs() {
            this.Ch(0);
        }
        a_n() {
            this.Ch(3);
        }
        ps(t, i, e, s) {
            const n = this.ATn;
            n._bs(t, i, e, s) || (n.dvs(t, i, e, s), (this.Ywn = null));
        }
        nu(t) {
            const i = this.ATn;
            i.getA() !== t && (i.yS(t), (this.Ywn = null));
        }
        Lo() {
            return this.ATn.getA();
        }
        Ki(t) {
            const i = this.ATn;
            i.equals(t) || (i.set(t), (this.Ywn = null));
        }
        ln() {
            this.ps(1, 1, 1, 1);
        }
        Zi() {
            return this.ATn;
        }
        wg(t) {
            t !== this.gIn && (this.uGn(), (this.gIn = t), (this.Ywn = null), (this.OTn |= aI));
        }
        h_n() {
            return this.gIn;
        }
        bg(t) {
            t !== this.yIn && (this.uGn(), (this.yIn = t), (this.Ywn = null), (this.OTn |= aI));
        }
        o_n() {
            return this.yIn;
        }
        Rect(t) {
            this.O3(t.un(), t.pn(), t.Rr(), t._r());
        }
        O3(t, i, e, s) {
            this.iyn(t, i, e, i, e, s, t, s);
        }
        iAn(t) {
            const i = this.PTn,
                e = this.GTn;
            (i[t++] = e), (i[t++] = e), (i[t++] = e), (i[t] = e);
        }
        Bi(t) {
            this.no(t, zI);
        }
        iyn(t, i, e, s, n, r, h, o) {
            this.l_n(4, 6), this.u_n();
            const a = this.sCn,
                l = this.oCn;
            this.oCn += 4;
            let u = 3 * l;
            const c = this.Qwn + this.tgn;
            (a[u++] = t),
                (a[u++] = i),
                (a[u++] = c),
                (a[u++] = e),
                (a[u++] = s),
                (a[u++] = c),
                (a[u++] = n),
                (a[u++] = r),
                (a[u++] = c),
                (a[u++] = h),
                (a[u++] = o),
                (a[u] = c),
                zI.jDe(this.rCn, 2 * l),
                0 !== (this.OTn & SI) && this.iAn(l),
                this.ATn.XDe(this.hCn, 4 * l);
        }
        Ts(t, i) {
            this.l_n(4, 6), this.u_n();
            const e = this.oCn;
            (this.oCn += 4),
                t.qFe(this.sCn, 3 * e, this.Qwn + this.tgn),
                i.SFe(this.rCn, 2 * e),
                0 !== (this.OTn & SI) && this.iAn(e),
                this.ATn.XDe(this.hCn, 4 * e);
        }
        no(t, i) {
            this.l_n(4, 6), this.u_n();
            const e = this.oCn;
            (this.oCn += 4),
                t.qFe(this.sCn, 3 * e, this.Qwn + this.tgn),
                i.jDe(this.rCn, 2 * e),
                0 !== (this.OTn & SI) && this.iAn(e),
                this.ATn.XDe(this.hCn, 4 * e);
        }
        c_n(t, i, e) {
            this.l_n(4, 6), this.u_n();
            const s = this.oCn;
            (this.oCn += 4),
                t.qFe(this.sCn, 3 * s, this.Qwn + this.tgn),
                i.jDe(this.rCn, 2 * s),
                0 !== (this.OTn & SI) && this.iAn(s),
                this.hCn.set(e, 4 * s);
        }
        Og(t, i, e, s, n, r, h, o, a, l, u, c, d) {
            this.l_n(4, 6), this.u_n();
            const f = this.sCn,
                p = this.oCn;
            this.oCn += 4;
            let m = 3 * p;
            const w = this.Qwn + this.tgn;
            (f[m++] = t),
                (f[m++] = i),
                (f[m++] = w + e),
                (f[m++] = s),
                (f[m++] = n),
                (f[m++] = w + r),
                (f[m++] = h),
                (f[m++] = o),
                (f[m++] = w + a),
                (f[m++] = l),
                (f[m++] = u),
                (f[m] = w + c),
                d.SFe(this.rCn, 2 * p),
                0 !== (this.OTn & SI) && this.iAn(p),
                this.ATn.XDe(this.hCn, 4 * p);
        }
        Dg(t, i, e, s, n, r, h, o, a, l, u, c, d) {
            this.l_n(4, 6), this.u_n();
            const f = this.sCn,
                p = this.oCn;
            this.oCn += 4;
            let m = 3 * p;
            const w = this.Qwn + this.tgn;
            (f[m++] = t),
                (f[m++] = i),
                (f[m++] = w + e),
                (f[m++] = s),
                (f[m++] = n),
                (f[m++] = w + r),
                (f[m++] = h),
                (f[m++] = o),
                (f[m++] = w + a),
                (f[m++] = l),
                (f[m++] = u),
                (f[m] = w + c),
                d.jDe(this.rCn, 2 * p),
                0 !== (this.OTn & SI) && this.iAn(p),
                this.ATn.XDe(this.hCn, 4 * p);
        }
        d_n(t, i, e, s, n, r, h, o, a, l, u, c, d, f) {
            this.l_n(4, 6), this.u_n();
            const p = this.sCn,
                m = this.oCn;
            this.oCn += 4;
            let w = 3 * m;
            const g = this.Qwn + this.tgn;
            (p[w++] = t),
                (p[w++] = i),
                (p[w++] = g + e),
                (p[w++] = s),
                (p[w++] = n),
                (p[w++] = g + r),
                (p[w++] = h),
                (p[w++] = o),
                (p[w++] = g + a),
                (p[w++] = l),
                (p[w++] = u),
                (p[w] = g + c),
                d.jDe(this.rCn, 2 * m),
                0 !== (this.OTn & SI) && this.iAn(m),
                this.hCn.set(f, 4 * m);
        }
        $l(t, i, e, s) {
            if (t.length % 3 != 0) throw new Error("vertex buffer length not multiple of 3");
            if (t.length > 3 * ZT) throw new Error(`too many vertices (${t.length / 3}, limit ${ZT})`);
            if (e.length % 3 != 0) throw new Error("index buffer length not multiple of 3");
            if (e.length > QT) throw new Error(`too many indices (${e.length}, limit ${QT})`);
            this.l_n(t.length, e.length);
            const n = this.oCn;
            this.sCn.set(t, 3 * n),
                this.rCn.set(i, 2 * n),
                0 !== (this.OTn & SI) && this.PTn.fill(this.GTn, n, n + t.length);
            const r = this.nCn;
            if (0 === n) r.set(e, this.aCn);
            else {
                let t = this.aCn;
                for (let i = 0, s = e.length; i < s; ++i) r[t++] = e[i] + n;
            }
            const h = this.hCn;
            if (null != s) h.set(s, 4 * n);
            else {
                const i = this.ATn,
                    e = i.getR(),
                    s = i.getG(),
                    r = i.getB(),
                    o = i.getA();
                let a = 4 * n;
                for (let i = 0, n = t.length; i < n; ++i) (h[a++] = e), (h[a++] = s), (h[a++] = r), (h[a++] = o);
            }
            (this.oCn += t.length / 3), (this.aCn += e.length);
        }
        bu(t) {
            this.KTn.equals(t) || (this.KTn.mn(t), this.gPn());
            const i = this.Qwn + this.tgn;
            this.qTn !== i && ((this.qTn = i), this.yPn()),
                this.HTn.equals(this.ATn) || (this.HTn.mn(this.ATn), this.vPn()),
                this.xg(this.ygn()),
                (this.LTn = 0),
                (this.OTn |= nI | oI);
        }
        xu() {
            this.LTn > 0 && this.uGn(), (this.OTn &= ~nI), (this.OTn |= oI);
        }
        Mp(t, i, e, s) {
            let n = this.lCn;
            n > eI && (this.eyn(), (n = 0)),
                0 !== (this.OTn & sI)
                    ? (this.LTn += 6)
                    : (null === this.MIn && this.eGn(), (this.OTn |= sI), (this.FTn = (n / 4) * 6), (this.LTn = 6));
            const r = this.Oli;
            (r[n++] = t), (r[n++] = i), (r[n++] = e), (r[n++] = s), (this.lCn = n);
        }
        w_n(t) {
            this.WTn.equals(t) || (this.WTn.mn(t), this.bPn());
        }
        g_n(t, i, e = 1) {
            const s = this.wTn,
                n = this.STn;
            VI.set(t, i),
                VI.BDe(n, s.eAn.offset / 4) || this.AGn(VI, s.eAn),
                n[s.sAn.offset / 4] !== Math.fround(e) && ((n[s.sAn.offset / 4] = e), this.GGn(s.sAn));
        }
        oI(t, i, e, s, n, r, h) {
            const o = this.wTn,
                a = this.STn;
            t.BDe(a, o.nAn.offset / 4) || (t.jDe(a, o.nAn.offset / 4), this.GGn(o.nAn)),
                VI.set(s / i, n / e),
                VI.BDe(a, o.rAn.offset / 4) || this.AGn(VI, o.rAn),
                VI.set(r / i, h / e),
                VI.BDe(a, o.hAn.offset / 4) || this.AGn(VI, o.hAn);
        }
        av(t, i, e, s, n, r, h) {
            const o = this.wTn,
                a = this.STn;
            VI.set(e, s),
                VI.BDe(a, o.rAn.offset / 4) || this.AGn(VI, o.rAn),
                a[o.sAn.offset / 4] !== Math.fround(n) && ((a[o.sAn.offset / 4] = n), this.GGn(o.sAn)),
                VI.set(r, h),
                VI.BDe(a, o.hAn.offset / 4) || this.AGn(VI, o.hAn);
        }
        y_n(t, i, e, s, n, r, h, o, a, l, u) {
            const c = this.xTn,
                d = this.pIn;
            (u %= 10800),
                d.Hrs() &&
                    (KT(null === t || this.mCn.Li() !== t, "setting back texture to current render target"),
                    this.qPn(t)),
                d.oAn() && (this.DGn(i, c.aAn), this.DGn(e, c.nAn), this.DGn(s, c.lAn), this.DGn(n, c.RLs)),
                this.RGn(o, c.devicePixelRatio),
                this.RGn(a, c.jLs),
                this.RGn(l, c.uAn),
                this.RGn(u, c.rUe),
                this.RGn(this.aX(), c.a8s),
                this.RGn(this.cX(), c.l8s);
        }
        b_n(t) {
            VT.qm(t, VT.bn.bhs), t && (t.YB() && (this.aGn(), t.cAn(this.xIn)), this.dAn(t.fAn()));
        }
        pAn(t) {
            this.OGn(t ? 1 : 0, this.xTn.mAn);
        }
        dAn(t) {
            t !== this.oIn && (this.uGn(), (this.oIn = t), (this.OTn |= wI));
        }
        wAn(t) {
            this.oIn === t && this.dAn(this.JTn);
        }
        C_n(t) {
            if ((KT(t !== this.mCn, "copying render target to itself"), t.iGn()))
                return this.mCn.vGn(!0), void this.mCn.yGn().set(t.yGn());
            t.aEn() >= 2 && this.mCn.aEn() < 2
                ? this.gAn(t)
                : (this.y$s(0, 0, 0, 0), this.a_n(), this.ln(), this.JVs(t));
        }
        JVs(t) {
            KT(t !== this.mCn, "drawing render target to itself"), this.xGn(t);
            const i = t.Li();
            this.vs(i), this.f_n();
        }
        f_n() {
            const t = this.WGn();
            t || this.VGn(!0), this.UL(0);
            const i = HI,
                e = WI;
            i.set(0, -1, 0, -1, 2, 1, 0, 1), e.set(0, -1, 2, 1), this.Ts(i, e), t || this.VGn(!1);
        }
        gAn(t) {
            this.xGn(t), this.aGn();
            this.xIn
                .beginRenderPass({
                    colorAttachments: [
                        { view: t.Li().gGn(), resolveTarget: this.mCn.Li().gGn(), loadOp: "load", storeOp: "store" },
                    ],
                })
                .end(),
                (this.OTn |= gI);
        }
        T_n() {
            this.aGn(), this.SL(!0), (this.OTn |= _I | II);
        }
        I_n(t = !1) {
            this.aGn(), this.SL(t), (this.OTn &= ~_I), (this.OTn |= TI);
        }
        P_n() {
            return this.DIn(TI);
        }
        G_n(t = !0) {
            this.aGn(), this.SL(t), (this.OTn &= ~TI);
        }
        VCn() {
            this.Ign([
                ["normal", "one", "one-minus-src-alpha"],
                ["additive", "one", "one"],
                ["xor", "one", "one-minus-src-alpha"],
                ["copy", "one", "zero"],
                ["destination-over", "one-minus-dst-alpha", "one"],
                ["source-in", "dst-alpha", "zero"],
                ["destination-in", "zero", "src-alpha"],
                ["source-out", "one-minus-dst-alpha", "zero"],
                ["destination-out", "zero", "one-minus-src-alpha"],
                ["source-atop", "dst-alpha", "one-minus-src-alpha"],
                ["destination-atop", "one-minus-dst-alpha", "src-alpha"],
            ]);
        }
        yAn() {
            return this.Bui ? [...this.Bui.features] : [];
        }
        bAn() {
            return this.W_n;
        }
        vAn() {
            const t = this.W_n;
            if (!t) return "unknown/unknown";
            const i = t.vendor || "unknown",
                e = t.architecture || "unknown",
                s = [];
            t.device && s.push(t.device),
                t.description && s.push(t.description),
                t.type && s.push(t.type),
                t.backend && s.push(t.backend);
            return i + "/" + e + (s.length > 0 ? ` (${s.join(", ")})` : "");
        }
    };
}
{
    const KI = self.t,
        qI = !0;
    KI.bn.kTn = class {
        constructor(t) {
            KI.Et(t, KI.bn.sq),
                (this.ci = t),
                (this.SAn = new Map()),
                (this.xAn = []),
                (this.MAn = []),
                (this.EAn = []),
                (this.CAn = 0),
                (this._An = 0),
                (this.TAn = 0),
                (this.IAn = 0),
                (this.PAn = 0),
                (this.GAn = 0);
        }
        Vi() {
            return this.ci;
        }
        je() {
            this.SAn.clear(), KI.yh(this.xAn), KI.yh(this.MAn), KI.yh(this.EAn);
        }
        AAn(t) {
            return Math.max(KI.Sn(t), 16);
        }
        RAn(t) {
            this.PAn++;
            const i = this.AAn(t);
            if (qI) {
                const t = this.SAn.get(i);
                if (void 0 !== t && t.length > 0) {
                    const e = t.pop();
                    return e.kAn(), 0 === t.length && this.SAn.delete(i), e;
                }
            }
            return this.CAn++, (this._An += i), this.TAn++, KI.m(KI.bn.OAn, this, i);
        }
        DAn(t) {
            this.GAn++;
            const i = t.su(),
                e = this.SAn.get(i);
            void 0 === e ? this.SAn.set(i, [t]) : e.push(t);
        }
        FAn(t) {
            this.EAn.push(t);
        }
        MGn() {
            for (const t of this.xAn) t.LAn();
            KI.yh(this.xAn);
            for (const t of this.MAn) this.CAn--, (this._An -= t.su()), t.Ut();
            KI.yh(this.MAn);
            for (const t of this.EAn) t.destroy();
            KI.yh(this.EAn);
        }
        sGn(t) {
            t % 30 == 0 && this.BAn(t);
        }
        BAn(t) {
            for (const [i, e] of this.SAn.entries()) {
                let s = 0;
                for (let i = 0, n = e.length; i < n; ++i) {
                    const n = e[i];
                    n.UAn(t) ? (this.CAn--, (this._An -= n.su()), n.Ut(), this.IAn++) : ((e[s] = n), ++s);
                }
                0 === s ? this.SAn.delete(i) : KI.Hc(e, s);
            }
            this.NAn();
        }
        FGn(t, i, e, s, n) {
            const r = this.RAn(n),
                h = r.mWe(),
                o = h.getMappedRange(0, n);
            new Uint8Array(o).set(new Uint8Array(e, s, n)),
                h.unmap(),
                t.copyBufferToBuffer(h, 0, i, s, n),
                qI ? this.xAn.push(r) : (r.jAn(), this.MAn.push(r));
        }
        NAn() {
            (this.TAn = 0), (this.IAn = 0), (this.PAn = 0), (this.GAn = 0);
        }
    };
}
{
    const XI = self.t,
        YI = self.GPUBufferUsage,
        JI = self.GPUMapMode,
        ZI = self.assert,
        QI = 0,
        tP = 1,
        iP = 2;
    XI.bn.OAn = class {
        constructor(t, i) {
            XI.Et(t, XI.bn.kTn),
                (this.RTn = t),
                (this.uli = tP),
                (this.lp = i),
                (this.eKe = this.Vi()
                    .PPn()
                    .createBuffer({ mappedAtCreation: !0, size: i, usage: YI.COPY_SRC | YI.MAP_WRITE })),
                (this.$An = 0);
        }
        Vi() {
            return this.RTn.Vi();
        }
        X3s() {
            return this.uli;
        }
        su() {
            return this.lp;
        }
        mWe() {
            return this.eKe;
        }
        kAn() {
            ZI(this.uli === QI, "expected buffer available"), (this.uli = tP);
        }
        async LAn() {
            ZI(this.uli === tP, "expected buffer in use"), (this.uli = iP);
            try {
                await this.eKe.mapAsync(JI.WRITE);
            } catch (t) {
                return void (() => {})("[WebGPU] Error recycling buffer, assuming device was lost: ", t);
            }
            this.Vi().fi() || ((this.uli = QI), (this.$An = this.Vi().syn()), this.RTn.DAn(this));
        }
        jAn() {
            this.uli = QI;
        }
        UAn(t) {
            return this.$An <= t - 25;
        }
        Ut() {
            ZI(this.uli === QI, "cannot destroy buffer"), this.eKe.destroy(), (this.eKe = null), (this.RTn = null);
        }
    };
}
{
    const eP = self.t,
        sP = self.assert,
        nP = self.GPUBufferUsage;
    eP.bn.bhs = class {
        constructor(t) {
            eP.Et(t, eP.bn.cTn), sP(t.yhs() > 0, "no custom params");
            const i = t.Vi();
            (this.$mn = t),
                (this.zAn = t.yhs()),
                (this.VAn = new ArrayBuffer(this.zAn)),
                (this.WAn = new Float32Array(this.VAn)),
                (this.kss = !1),
                (this.eKe = i.PPn().createBuffer({ size: this.zAn, usage: nP.UNIFORM | nP.COPY_DST })),
                (this.HAn = i.SPn(this.eKe));
        }
        Ut() {
            this.Vi().wAn(this.HAn),
                this.Vi().HPn().FAn(this.eKe),
                (this.eKe = null),
                (this.$mn = null),
                (this.VAn = null),
                (this.WAn = null),
                (this.HAn = null);
        }
        Vi() {
            return this.$mn.Vi();
        }
        ghs() {
            return this.$mn;
        }
        fAn() {
            return this.HAn;
        }
        Nne(t, i) {
            const e = this.$mn.KAn(t),
                s = e.type,
                n = e.offset / 4,
                r = this.WAn;
            if ("color" === s) {
                if (i.JDe(r, n)) return;
                i.YDe(r, n), (this.kss = !0);
            } else {
                if ("float" !== s && "percent" !== s) throw new Error(`unexpected shader param type '${s}'`);
                if (r[n] === Math.fround(i)) return;
                (r[n] = i), (this.kss = !0);
            }
        }
        YB() {
            return this.kss;
        }
        cAn(t) {
            this.Vi().HPn().FGn(t, this.eKe, this.VAn, 0, this.zAn), (this.kss = !1);
        }
    };
}
{
    const rP = self.t,
        hP = 4,
        oP = 2,
        aP = 4,
        lP = 2 * hP,
        uP = 4 * hP;
    function cP(t) {
        for (const i of Object.values(t)) i.end = i.offset + i.size;
    }
    const dP =
            "\nstruct Uniforms {\n\ttransform\t\t: mat4x4<f32>,\n\tpointTexStart\t: vec2<f32>,\n\tpointTexEnd\t\t: vec2<f32>,\n\tzElevation\t\t: f32\n};\n@binding(0) @group(0) var<uniform> uniforms : Uniforms;\n",
        fP = {
            transform: { offset: 0, size: 16 * hP, end: 0 },
            _Gn: { offset: 64, size: uP, end: 0 },
            qAn: { offset: 64, size: lP, end: 0 },
            XAn: { offset: 72, size: lP, end: 0 },
            fBs: { offset: 80, size: hP, end: 0 },
        };
    cP(fP);
    const pP = fP.fBs.end,
        mP =
            "\nstruct Uniforms {\n\tcolor2\t\t\t\t: vec4<f32>,\n\tpointColor \t\t\t: vec4<f32>,\n\ttileSize\t\t\t: vec2<f32>,\n\ttileSpacing\t\t\t: vec2<f32>,\n\tsrcRectStart\t\t: vec2<f32>,\n\tsrcRectEnd\t\t\t: vec2<f32>,\n\tpixelSize\t\t\t: vec2<f32>,\n\toutlineThickness\t: f32\n};\n@binding(1) @group(0) var<uniform> uniforms : Uniforms;\n",
        wP = {
            IGn: { offset: 0, size: uP, end: 0 },
            PGn: { offset: 16, size: uP, end: 0 },
            rAn: { offset: 32, size: lP, end: 0 },
            hAn: { offset: 40, size: lP, end: 0 },
            nAn: { offset: 48, size: uP, end: 0 },
            YAn: { offset: 48, size: lP, end: 0 },
            JAn: { offset: 56, size: lP, end: 0 },
            eAn: { offset: 64, size: lP, end: 0 },
            sAn: { offset: 72, size: hP, end: 0 },
        };
    cP(wP);
    const gP = wP.sAn.end,
        yP =
            "\nstruct C3Params {\n\tsrcStart\t\t\t: vec2<f32>,\n\tsrcEnd\t\t\t\t: vec2<f32>,\n\tsrcOriginStart\t\t: vec2<f32>,\n\tsrcOriginEnd\t\t: vec2<f32>,\n\tlayoutStart\t\t\t: vec2<f32>,\n\tlayoutEnd\t\t\t: vec2<f32>,\n\tdestStart\t\t\t: vec2<f32>,\n\tdestEnd\t\t\t\t: vec2<f32>,\n\tdevicePixelRatio\t: f32,\n\tlayerScale\t\t\t: f32,\n\tlayerAngle\t\t\t: f32,\n\tseconds\t\t\t\t: f32,\n\tzNear\t\t\t\t: f32,\n\tzFar\t\t\t\t: f32,\n\tisSrcTexRotated\t\t: u32\n};\n@binding(4) @group(0) var<uniform> c3Params : C3Params;\n\nfn c3_srcToNorm(p : vec2<f32>) -> vec2<f32>\n{\n\treturn (p - c3Params.srcStart) / (c3Params.srcEnd - c3Params.srcStart);\n}\n\nfn c3_normToSrc(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p, c3Params.srcEnd - c3Params.srcStart, c3Params.srcStart);\n}\n\nfn c3_clampToSrc(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.srcStart, c3Params.srcEnd), max(c3Params.srcStart, c3Params.srcEnd));\n}\n\nfn c3_srcOriginToNorm(p : vec2<f32>) -> vec2<f32>\n{\n\treturn (p - c3Params.srcOriginStart) / (c3Params.srcOriginEnd - c3Params.srcOriginStart);\n}\n\nfn c3_normToSrcOrigin(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p, c3Params.srcOriginEnd - c3Params.srcOriginStart, c3Params.srcOriginStart);\n}\n\nfn c3_clampToSrcOrigin(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.srcOriginStart, c3Params.srcOriginEnd), max(c3Params.srcOriginStart, c3Params.srcOriginEnd));\n}\n\nfn c3_getLayoutPos(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p - c3Params.srcOriginStart, (c3Params.layoutEnd - c3Params.layoutStart) / (c3Params.srcOriginEnd - c3Params.srcOriginStart), c3Params.layoutStart);\n}\n\nfn c3_srcToDest(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p - c3Params.srcStart, (c3Params.destEnd - c3Params.destStart) / (c3Params.srcEnd - c3Params.srcStart), c3Params.destStart);\n}\n\nfn c3_clampToDest(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.destStart, c3Params.destEnd), max(c3Params.destStart, c3Params.destEnd));\n}\n\nfn c3_linearizeDepth(depthSample : f32) -> f32\n{\n\treturn c3Params.zNear * c3Params.zFar / (c3Params.zFar + depthSample * (c3Params.zNear - c3Params.zFar));\n}\n",
        bP = [
            "srcStart",
            "srcEnd",
            "srcOriginStart",
            "srcOriginEnd",
            "c3_srcToNorm",
            "c3_normToSrc",
            "c3_clampToSrc",
            "c3_srcOriginToNorm",
            "c3_normToSrcOrigin",
            "c3_clampToSrcOrigin",
            "c3_getLayoutPos",
            "c3_srcToDest",
        ],
        vP = ["layoutStart", "layoutEnd", "destStart", "destEnd", "c3_clampToDest"],
        SP = {
            nAn: { offset: 0, size: uP, end: 0 },
            ZAn: { offset: 0, size: lP, end: 0 },
            QAn: { offset: 8, size: lP, end: 0 },
            lAn: { offset: 16, size: uP, end: 0 },
            tRn: { offset: 16, size: lP, end: 0 },
            iRn: { offset: 24, size: lP, end: 0 },
            RLs: { offset: 32, size: uP, end: 0 },
            eRn: { offset: 32, size: lP, end: 0 },
            sRn: { offset: 40, size: lP, end: 0 },
            aAn: { offset: 48, size: uP, end: 0 },
            nRn: { offset: 48, size: lP, end: 0 },
            rRn: { offset: 56, size: lP, end: 0 },
            devicePixelRatio: { offset: 64, size: hP, end: 0 },
            jLs: { offset: 68, size: hP, end: 0 },
            uAn: { offset: 72, size: hP, end: 0 },
            rUe: { offset: 76, size: hP, end: 0 },
            a8s: { offset: 80, size: hP, end: 0 },
            l8s: { offset: 84, size: hP, end: 0 },
            mAn: { offset: 88, size: aP, end: 0 },
        };
    cP(SP);
    const xP = SP.mAn.end;
    function MP(t) {
        return `\nstruct FragmentInput {\n\t@location(1) fragUV : vec2<f32>,\n\t@location(2) fragColor : vec4<${t ? "f16" : "f32"}>,\n\t@builtin(position) fragPos : vec4<f32>\n};\n\nfn c3_getBackUV(fragPos : vec2<f32>, texBack : texture_2d<f32>) -> vec2<f32>\n{\n\treturn fragPos / vec2<f32>(textureDimensions(texBack));\n}\n\nfn c3_getDepthUV(fragPos : vec2<f32>, texDepth : texture_depth_2d) -> vec2<f32>\n{\n\treturn fragPos / vec2<f32>(textureDimensions(texDepth));\n}\n`;
    }
    const EP = "\nstruct FragmentOutput {\n\t@location(0) color : vec4<f32>\n};\n",
        CP = new Map([
            ["float", 4],
            ["percent", 4],
            ["color", 12],
        ]),
        _P = new Map([
            ["float", 4],
            ["percent", 4],
            ["color", 16],
        ]),
        TP =
            "\nfn c3_premultiply(c : vec4<f32>) -> vec4<f32>\n{\n\treturn vec4<f32>(c.rgb * c.a, c.a);\n}\n\nfn c3_unpremultiply(c : vec4<f32>) -> vec4<f32>\n{\n\tif (c.a == 0.0)\n\t{\n\t\treturn vec4<f32>(0.0);\n\t}\n\t\n\treturn vec4<f32>(c.rgb / c.a, c.a);\n}\n\nfn c3_grayscale(rgb : vec3<f32>) -> f32\n{\n\treturn dot(rgb, vec3<f32>(0.299, 0.587, 0.114));\n}\n\nfn c3_getPixelSize(t : texture_2d<f32>) -> vec2<f32>\n{\n\treturn vec2<f32>(1.0) / vec2<f32>(textureDimensions(t));\n}\n\nfn c3_clamp2(v : vec2<f32>, l : f32, u : f32) -> vec2<f32>\n{\n\treturn clamp(v, vec2<f32>(l), vec2<f32>(u));\n}\n\nfn c3_mod(x : f32, y : f32) -> f32\n{\n\treturn x - y * floor(x / y);\n}\n\nfn c3_mod2(x : vec2<f32>, y : vec2<f32>) -> vec2<f32>\n{\n\treturn x - y * floor(x / y);\n}\n\nfn c3_RGBtoHSL(color : vec3<f32>) -> vec3<f32>\n{\n\tvar hsl : vec3<f32> = vec3<f32>(0.0);\n\t\n\tvar fmin : f32 = min(min(color.r, color.g), color.b);\n\tvar fmax : f32 = max(max(color.r, color.g), color.b);\n\tvar delta : f32 = fmax - fmin;\n\n\thsl.z = (fmax + fmin) / 2.0;\n\n\tif (delta == 0.0)\n\t{\n\t\thsl.x = 0.0;\n\t\thsl.y = 0.0;\n\t}\n\telse \n\t{\n\t\tif (hsl.z < 0.5)\n\t\t{\n\t\t\thsl.y = delta / (fmax + fmin);\n\t\t}\n\t\telse\n\t\t{\n\t\t\thsl.y = delta / (2.0 - fmax - fmin);\n\t\t}\n\t\t\n\t\tvar dR : f32 = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\n\t\tvar dG : f32 = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\n\t\tvar dB : f32 = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\n\n\t\tif (color.r == fmax)\n\t\t{\n\t\t\thsl.x = dB - dG;\n\t\t}\n\t\telse if (color.g == fmax)\n\t\t{\n\t\t\thsl.x = (1.0 / 3.0) + dR - dB;\n\t\t}\n\t\telse if (color.b == fmax)\n\t\t{\n\t\t\thsl.x = (2.0 / 3.0) + dG - dR;\n\t\t}\n\n\t\tif (hsl.x < 0.0)\n\t\t{\n\t\t\thsl.x = hsl.x + 1.0;\n\t\t}\n\t\telse if (hsl.x > 1.0)\n\t\t{\n\t\t\thsl.x = hsl.x - 1.0;\n\t\t}\n\t}\n\n\treturn hsl;\n}\n\nfn c3_hueToRGB(f1 : f32, f2 : f32, hue_ : f32) -> f32\n{\n\tvar hue : f32 = hue_;\n\tif (hue < 0.0)\n\t{\n\t\thue = hue + 1.0;\n\t}\n\telse if (hue > 1.0)\n\t{\n\t\thue = hue - 1.0;\n\t}\n\t\t\n\tvar ret : f32;\n\t\n\tif ((6.0 * hue) < 1.0)\n\t{\n\t\tret = f1 + (f2 - f1) * 6.0 * hue;\n\t}\n\telse if ((2.0 * hue) < 1.0)\n\t{\n\t\tret = f2;\n\t}\n\telse if ((3.0 * hue) < 2.0)\n\t{\n\t\tret = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\n\t}\n\telse\n\t{\n\t\tret = f1;\n\t}\n\t\n\treturn ret;\n}\n\nfn c3_HSLtoRGB(hsl : vec3<f32>) -> vec3<f32>\n{\n\tvar rgb : vec3<f32> = vec3<f32>(hsl.z);\n\t\n\tif (hsl.y != 0.0)\n\t{\n\t\tvar f2 : f32;\n\t\t\n\t\tif (hsl.z < 0.5)\n\t\t{\n\t\t\tf2 = hsl.z * (1.0 + hsl.y);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\n\t\t}\n\t\t\t\n\t\tvar f1 : f32 = 2.0 * hsl.z - f2;\n\t\t\n\t\trgb.r = c3_hueToRGB(f1, f2, hsl.x + (1.0 / 3.0));\n\t\trgb.g = c3_hueToRGB(f1, f2, hsl.x);\n\t\trgb.b = c3_hueToRGB(f1, f2, hsl.x - (1.0 / 3.0));\n\t}\n\t\n\treturn rgb;\n}\n";
    function IP(t, i, e, s, n) {
        return (t << 10) | (i << 7) | (e << 5) | (s << 4) | n;
    }
    rP.bn.cTn = class extends rP.bn.pyn {
        constructor(t, i) {
            if (
                (super(t, i),
                (this.hRn = i.oRn),
                (this.aRn = i.lRn),
                (this.uRn = i.cRn),
                (this.fIn = i.dRn),
                (this.fRn = new Map()),
                (this.pRn = new Map()),
                (this.mRn = !1),
                (this.wRn = !1),
                (this.BWs = []),
                (this.gRn = 0),
                i.parameters)
            ) {
                let t = 0;
                for (const e of i.parameters) {
                    const i = e[2];
                    if (!CP.has(i)) throw new Error(`unrecognized effect param type '${i}'`);
                    const s = CP.get(i),
                        n = _P.get(i),
                        r = t % n;
                    0 !== r && (t += n - r), this.BWs.push({ type: i, offset: t, size: s, end: t + s }), (t += s);
                }
                this.gRn = 16 * Math.ceil(t / 16);
            }
        }
        static async mF(t, i) {
            const e = t.PPn(),
                s = i.name,
                n = t.HIn(),
                r = t.Tvn(),
                h = i.src,
                o = rP.bn.cTn.yRn(h, n, r),
                a = e.createShaderModule({ label: s, code: o });
            let l,
                u = null;
            if (i.JIn) {
                const t = rP.bn.cTn.yRn(i.JIn, n, r);
                u = e.createShaderModule({ label: s, code: t });
            }
            a.getCompilationInfo().then((t) => rP.bn.cTn.qIn(s, "fragment", t));
            const c = rP.bn.cTn.KIn(i.yvn, n);
            let d;
            c
                ? ((l = e.createShaderModule({ label: s, code: c })),
                  l.getCompilationInfo().then((t) => rP.bn.cTn.qIn(s, "vertex", t)))
                : (l = t.GPn());
            const f = rP.bn.cTn.KIn(i.QIn, n);
            f
                ? ((d = e.createShaderModule({ label: s, code: f })),
                  d.getCompilationInfo().then((t) => rP.bn.cTn.qIn(s, "vertex (norm)", t)))
                : (d = t.APn());
            const p = rP.m(rP.bn.cTn, t, Object.assign({ oRn: a, lRn: u, cRn: l, dRn: d }, i));
            if (
                ((p.Gyn = h.includes("%%C3PARAMS_STRUCT%%") && bP.some((t) => h.includes(t))),
                (p.mRn = p.Gyn || (h.includes("%%C3PARAMS_STRUCT%%") && vP.some((t) => h.includes(t)))),
                (p.wRn = h.includes("%%C3PARAMS_STRUCT%%") && h.includes("isSrcTexRotated")),
                "<generate-mipmap>" !== s)
            ) {
                const i = p.bRn(0, 0, 0, 0, 0);
                let e = null;
                t.zPn() && (e = p.bRn(0, 1, 0, 0, 0));
                const [s, n] = await Promise.all([i, e]);
                p.fRn.set(IP(0, 0, 0, 0, 0), s), n && p.fRn.set(IP(0, 1, 0, 0, 0), n);
            }
            return p;
        }
        static vRn(t, i) {
            if (!t) return t;
            let e = "";
            return (e = i ? "enable f16;\nalias f16or32 = f16;\n" : "alias f16or32 = f32;\n"), e + t;
        }
        static yRn(t, i, e) {
            return (
                (t = rP.bn.cTn.vRn(t, i)),
                rP.qxe(t, {
                    "%%SAMPLERFRONT_BINDING%%": "@binding(0) @group(1)",
                    "%%TEXTUREFRONT_BINDING%%": "@binding(1) @group(1)",
                    "%%SAMPLERBACK_BINDING%%": "@binding(0) @group(2)",
                    "%%TEXTUREBACK_BINDING%%": "@binding(1) @group(2)",
                    "%%SAMPLERDEPTH_BINDING%%": "@binding(0) @group(3)",
                    "%%TEXTUREDEPTH_BINDING%%": "@binding(1) @group(3)",
                    "%%SHADERPARAMS_BINDING%%": "@binding(5) @group(0)",
                    "%%FRAGMENTINPUT_STRUCT%%": MP(e),
                    "%%FRAGMENTOUTPUT_STRUCT%%": EP,
                    "%%C3PARAMS_STRUCT%%": yP,
                    "%%C3_UTILITY_FUNCTIONS%%": TP,
                })
            );
        }
        static KIn(t, i) {
            return rP.bn.cTn.vRn(t, i);
        }
        static qIn(t, i, e) {
            for (const s of e.messages) {
                const e = `[WebGPU] Message (${s.type}) compiling ${i} shader '${t}': ${s.message} (line ${s.lineNum}, pos ${s.linePos})`;
                "error" === s.type ? console.error(e) : "warning" === s.type ? (() => {})(e) : console.log(e);
            }
        }
        Ut() {
            (this.hRn = null),
                (this.aRn = null),
                (this.uRn = null),
                (this.fIn = null),
                this.fRn.clear(),
                this.pRn.clear(),
                super.Ut();
        }
        PPn() {
            return this.ci.PPn();
        }
        LPn() {
            return this.ci.LPn();
        }
        Vi() {
            return this.ci;
        }
        oAn() {
            return this.mRn;
        }
        Nyn() {
            return this.wRn;
        }
        I$t() {
            return this.BWs.length;
        }
        fSn(t) {
            return t < 0 || t >= this.BWs.length ? null : this.BWs[t].type;
        }
        yhs() {
            return this.gRn;
        }
        KAn(t) {
            return this.BWs[t];
        }
        SRn(t, i, e, s, n) {
            const r = this.ci,
                h = r.Tvn(),
                [o, a] = r.Agn(t);
            let l = "none";
            switch (e) {
                case 1:
                    l = "back";
                    break;
                case 2:
                    l = "front";
            }
            const u = {
                label: `${this.Zn()} blendMode ${t} variant ${i} multisampleCount ${n}`,
                layout: this.LPn(),
                primitive: { cullMode: l, frontFace: 0 === s ? "cw" : "ccw" },
                vertex: {
                    module: 4 === i ? this.fIn : this.uRn,
                    entryPoint: "main",
                    buffers: [
                        { arrayStride: 3 * hP, attributes: [{ shaderLocation: 0, offset: 0, format: "float32x3" }] },
                        { arrayStride: 2 * hP, attributes: [{ shaderLocation: 1, offset: 0, format: "float32x2" }] },
                        {
                            arrayStride: 4 * (h ? oP : hP),
                            attributes: [{ shaderLocation: 2, offset: 0, format: h ? "float16x4" : "float32x4" }],
                        },
                        { arrayStride: aP, attributes: [{ shaderLocation: 3, offset: 0, format: "uint32" }] },
                    ],
                },
                fragment: {
                    module: this.hRn,
                    entryPoint: "main",
                    targets: [
                        {
                            format: r.RPn(),
                            blend: { color: { srcFactor: o, dstFactor: a }, alpha: { srcFactor: o, dstFactor: a } },
                        },
                    ],
                },
            };
            if ((n >= 2 && (u.multisample = { count: n }), 1 === i))
                (u.fragment.module = this.aRn || this.hRn),
                    (u.depthStencil = { format: r.CPn(), depthWriteEnabled: !0, depthCompare: "less-equal" });
            else if (2 === i) {
                (u.fragment.module = this.aRn || this.hRn), (u.fragment.targets = []);
                const t = { compare: "always", failOp: "keep", depthFailOp: "keep", passOp: "replace" };
                u.depthStencil = {
                    format: r.CPn(),
                    depthWriteEnabled: !0,
                    depthCompare: "less-equal",
                    stencilFront: t,
                    stencilBack: t,
                    stencilReadMask: 1,
                    stencilWriteMask: 1,
                };
            } else if (3 === i) {
                u.fragment.module = this.aRn || this.hRn;
                const t = { compare: "equal", failOp: "keep", depthFailOp: "keep", passOp: "keep" };
                u.depthStencil = {
                    format: r.CPn(),
                    depthWriteEnabled: !1,
                    depthCompare: "always",
                    stencilFront: t,
                    stencilBack: t,
                    stencilReadMask: 1,
                    stencilWriteMask: 0,
                };
            }
            return u;
        }
        xRn(t, i, e, s, n) {
            return this.PPn().createRenderPipeline(this.SRn(t, i, e, s, n));
        }
        bRn(t, i, e, s, n) {
            return this.PPn().createRenderPipelineAsync(this.SRn(t, i, e, s, n));
        }
        dGn(t, i, e, s, n) {
            const r = IP(t, i, e, s, n);
            let h = this.fRn.get(r);
            return h || ((h = this.xRn(t, i, e, s, n)), this.fRn.set(r, h), h);
        }
        static uTn() {
            return fP;
        }
        static fTn() {
            return 16 * Math.ceil(pP / 16);
        }
        static gTn() {
            return wP;
        }
        static bTn() {
            return 16 * Math.ceil(gP / 16);
        }
        static MTn() {
            return SP;
        }
        static CTn() {
            return 16 * Math.ceil(xP / 16);
        }
        static xSn(t) {
            const i = t ? "f16" : "f32";
            return `\n\t\t${dP}\n\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${i}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${i}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(input.position, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`;
        }
        static XIn(t) {
            const i = t ? "f16" : "f32";
            return `\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${i}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${i}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p = input.position;\n\t\t\tp.y = 1.0 - p.y;\n\t\t\toutput.Position = vec4<f32>(p.xy * 2.0 - 1.0, p.z, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\toutput.fragColor = input.color;\n\t\t\treturn output;\n\t\t}`;
        }
        static ZIn(t) {
            const i = t ? "f16" : "f32";
            return `\n\t\t${dP}\n\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${i}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${i}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(input.position, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`;
        }
        static tPn(t) {
            const i = t ? "f16" : "f32";
            return `\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${i}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${i}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p = input.position;\n\t\t\tp.y = 1.0 - p.y;\n\t\t\toutput.Position = vec4<f32>(p.xy * 2.0 - 1.0, p.z, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`;
        }
        static YIn(t, i) {
            return `\n\t\t@binding(0) @group(1) var sampler0 : sampler;\n\t\t@binding(1) @group(1) var texture0 : texture_2d<f32>;\n\t\t@binding(2) @group(1) var sampler1 : sampler;\n\t\t@binding(3) @group(1) var texture1 : texture_2d<f32>;\n\t\t@binding(4) @group(1) var sampler2 : sampler;\n\t\t@binding(5) @group(1) var texture2 : texture_2d<f32>;\n\t\t@binding(6) @group(1) var sampler3 : sampler;\n\t\t@binding(7) @group(1) var texture3 : texture_2d<f32>;\n\t\t@binding(8) @group(1) var sampler4 : sampler;\n\t\t@binding(9) @group(1) var texture4 : texture_2d<f32>;\n\t\t@binding(10) @group(1) var sampler5 : sampler;\n\t\t@binding(11) @group(1) var texture5 : texture_2d<f32>;\n\t\t@binding(12) @group(1) var sampler6 : sampler;\n\t\t@binding(13) @group(1) var texture6 : texture_2d<f32>;\n\t\t@binding(14) @group(1) var sampler7 : sampler;\n\t\t@binding(15) @group(1) var texture7 : texture_2d<f32>;\n\t\t@binding(16) @group(1) var sampler8 : sampler;\n\t\t@binding(17) @group(1) var texture8 : texture_2d<f32>;\n\t\t@binding(18) @group(1) var sampler9 : sampler;\n\t\t@binding(19) @group(1) var texture9 : texture_2d<f32>;\n\t\t@binding(20) @group(1) var sampler10 : sampler;\n\t\t@binding(21) @group(1) var texture10 : texture_2d<f32>;\n\t\t@binding(22) @group(1) var sampler11 : sampler;\n\t\t@binding(23) @group(1) var texture11 : texture_2d<f32>;\n\t\t@binding(24) @group(1) var sampler12 : sampler;\n\t\t@binding(25) @group(1) var texture12 : texture_2d<f32>;\n\t\t@binding(26) @group(1) var sampler13 : sampler;\n\t\t@binding(27) @group(1) var texture13 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${i ? "f16" : "f32"}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32,\n\t\t\t${t ? "@builtin(position) fragPos: vec4<f32>" : ""}\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t ? "@builtin(frag_depth) fragDepth: f32" : ""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar texXy : vec2<f32> = input.fragUV.xy;\n\t\t\tvar texIndex : u32 = input.texIndex;\n\t\t\tvar c : vec4<f32>;\n\n\t\t\tlet dx = dpdx(texXy);\n\t\t\tlet dy = dpdy(texXy);\n\t\t\t\n\t\t\tif (texIndex <= 6)\n\t\t\t{\n\t\t\t\tif (texIndex <= 2)\n\t\t\t\t{\n\t\t\t\t\tif (texIndex == 0)\t\t\t{\tc = textureSampleGrad(texture0, sampler0, texXy, dx, dy);\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 1)\t\t{\tc = textureSampleGrad(texture1, sampler1, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture2, sampler2, texXy, dx, dy);\t}\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (texIndex <= 4)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 3)\t\t{\tc = textureSampleGrad(texture3, sampler3, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture4, sampler4, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex <= 5)\t\t{\tc = textureSampleGrad(texture5, sampler5, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture6, sampler6, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (texIndex <= 9)\n\t\t\t\t{\n\t\t\t\t\tif (texIndex == 7)\t\t\t{\tc = textureSampleGrad(texture7, sampler7, texXy, dx, dy);\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 8)\t\t{\tc = textureSampleGrad(texture8, sampler8, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture9, sampler9, texXy, dx, dy);\t}\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (texIndex <= 11)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 10)\t\t{\tc = textureSampleGrad(texture10, sampler10, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture11, sampler11, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 12)\t\t{\tc = textureSampleGrad(texture12, sampler12, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture13, sampler13, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toutput.color = c * vec4<f32>(input.fragColor);\n\t\t\t${t ? "output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);" : ""}\n\t\t\treturn output;\n\t\t}`;
        }
        static iPn(t, i) {
            return `\n\t\t@binding(0) @group(1) var sampler0 : sampler;\n\t\t@binding(1) @group(1) var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${i ? "f16" : "f32"}>,\n\t\t\t${t ? "@builtin(position) fragPos: vec4<f32>" : ""}\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t ? "@builtin(frag_depth) fragDepth: f32" : ""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, input.fragUV) * vec4<f32>(input.fragColor);\n\t\t\t${t ? "output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);" : ""}\n\t\t\treturn output;\n\t\t}`;
        }
        static sPn() {
            return "\n\t\tstruct VertexInput {\n\t\t\t@builtin(vertex_index) VertexIndex : u32\n\t\t};\n\t\t\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(0) fragUV : vec2<f32>\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\n\t\t\tvar pos : array<vec2<f32>, 4> = array<vec2<f32>, 4>(\n\t\t\t\tvec2<f32>(-1.0, 1.0),\n\t\t\t\tvec2<f32>(1.0, 1.0),\n\t\t\t\tvec2<f32>(-1.0, -1.0),\n\t\t\t\tvec2<f32>(1.0, -1.0));\n\t\t\t\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p : vec2<f32> = pos[input.VertexIndex];\n\t\t\toutput.Position = vec4<f32>(p, 0.0, 1.0);\n\t\t\toutput.fragUV = p / 2.0 + 0.5;\n\t\t\treturn output;\n\t\t}";
        }
        static ePn() {
            return "\n\t\t@binding(0) @group(0) var sampler0 : sampler;\n\t\t@binding(1) @group(0) var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(0) fragUV : vec2<f32>\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>\n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, vec2<f32>(input.fragUV.x, 1.0 - input.fragUV.y));\n\t\t\treturn output;\n\t\t}";
        }
        mPn(t) {
            t || (t = this.ci.jPn());
            let i = this.pRn.get(t);
            return (
                i ||
                    ((i = this.PPn().createRenderPipeline({
                        label: "<mipmap generator>",
                        layout: "auto",
                        vertex: { module: this.uRn, entryPoint: "main" },
                        primitive: { topology: "triangle-strip", stripIndexFormat: "uint16" },
                        fragment: {
                            module: this.hRn,
                            entryPoint: "main",
                            targets: [
                                {
                                    format: t,
                                    blend: {
                                        color: { srcFactor: "one", dstFactor: "zero" },
                                        alpha: { srcFactor: "one", dstFactor: "zero" },
                                    },
                                },
                            ],
                        },
                    })),
                    this.pRn.set(t, i)),
                i
            );
        }
        static rPn() {
            return `\n\t\t${dP}\n\n\t\tstruct PointData {\n\t\t\tdata : array<vec4<f32>>\n\t\t};\n\t\t@binding(3) @group(0) var<storage> pointBuffer : PointData;\n\n\t\tstruct VertexInput {\n\t\t\t@builtin(vertex_index) VertexIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(0) fragUV : vec2<f32>,\n\t\t\t@location(1) pointOpacity : f32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\n\t\t\tvar normPos : array<vec2<f32>, 4> = array<vec2<f32>, 4>(\n\t\t\t\tvec2<f32>(-0.5, -0.5),\n\t\t\t\tvec2<f32>(0.5, -0.5),\n\t\t\t\tvec2<f32>(0.5, 0.5),\n\t\t\t\tvec2<f32>(-0.5, 0.5));\n\t\t\t\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p : vec2<f32> = normPos[input.VertexIndex % u32(4)];\n\t\t\tvar pointData : vec4<f32> = pointBuffer.data[input.VertexIndex / u32(4)];\n\n\t\t\tvar size : f32 = pointData.z;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(p * size + pointData.xy, uniforms.zElevation, 1.0);\n\t\t\toutput.pointOpacity = pointData.w;\n\n\t\t\tvar pointTexMin : vec2<f32> = min(uniforms.pointTexStart, uniforms.pointTexEnd);\n\t\t\tvar pointTexMax : vec2<f32> = max(uniforms.pointTexStart, uniforms.pointTexEnd);\n\t\t\tvar pn : vec2<f32> = p + vec2<f32>(0.5, 0.5);\n\t\t\tvar pointCoord : vec2<f32> = select(vec2<f32>(1.0 - pn.y, pn.x), pn, uniforms.pointTexEnd.x > uniforms.pointTexStart.x);\n\n\t\t\toutput.fragUV = mix(pointTexMin, pointTexMax, pointCoord);\n\t\t\treturn output;\n\t\t}`;
        }
        static nPn(t) {
            return `\n\t\t${mP}\n\n\t\t%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n\t\t%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(0) fragUV : vec2<f32>,\n\t\t\t@location(1) pointOpacity : f32,\n\t\t\t@builtin(position) fragPos : vec4<f32>\n\t\t};\n\t\t\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t ? "@builtin(frag_depth) fragDepth: f32" : ""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, input.fragUV) * uniforms.pointColor * input.pointOpacity;\n\t\t\t${t ? "output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);" : ""}\n\t\t\treturn output;\n\t\t}`;
        }
        static hPn(t) {
            return `\n\t\t${mP}\n\n\t\t%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n\t\t%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t ? "@builtin(frag_depth) fragDepth: f32" : ""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar halfPixelSize : vec2<f32> = vec2<f32>(0.5, 0.5) / vec2<f32>(textureDimensions(texture0));\n\n\t\t\tvar tile : vec2<f32> = floor(input.fragUV);\n\t\t\tvar tex : vec2<f32> = fract(input.fragUV);\n\t\t\tvar tileOrigin : vec2<f32> = uniforms.srcRectStart + tile * (uniforms.tileSize + uniforms.tileSpacing);\n\t\t\tvar lowerBound : vec2<f32> = tileOrigin + halfPixelSize;\n\t\t\tvar upperBound : vec2<f32> = tileOrigin + uniforms.tileSize - halfPixelSize;\n\n\t\t\toutput.color = textureSampleLevel(texture0, sampler0, clamp(tex, lowerBound, upperBound), 0.0) * vec4<f32>(input.fragColor);\n\t\t\t${t ? "output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);" : ""}\n\t\t\treturn output;\n\t\t}`;
        }
        static GSn(t) {
            return `\n${mP}\n\n%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n%%FRAGMENTINPUT_STRUCT%%\n\nstruct FragmentOutput {\n\t@location(0) color : vec4<f32>,\n\t${t ? "@builtin(frag_depth) fragDepth: f32" : ""} \n};\n\n%%C3_UTILITY_FUNCTIONS%%\n\nconst PI : f32 = 3.1415926;\n\nfn cospVec4(a : vec4<f32>, b : vec4<f32>, x : f32) -> vec4<f32>\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nfn randVec3(seed : vec2<f32>) -> vec3<f32>\n{\n\treturn vec3<f32>(\n\t\tfract(sin(dot(seed.xy, vec2<f32>(12.9898,78.233))) * 43758.5453),\n\t\tfract(sin(dot(seed.yx, vec2<f32>(12.9898,-78.233))) * 43758.5453),\n\t\tfract(sin(dot(seed.xy, vec2<f32>(-12.9898,-78.233))) * 43758.5453));\n}\n\nfn sampleTile(tile : vec2<f32>, uv : vec2<f32>, ddx : vec2<f32>, ddy : vec2<f32>) -> vec4<f32>\n{\n\tvar posRandom = uniforms.tileSize;\n\tvar angleRandom = uniforms.outlineThickness;\n\tvar pixelSize = c3_getPixelSize(texture0);\n\t\n\tvar rand = (randVec3(round(tile)) - 0.5) * 2.0;\n\t\n\tvar angle = angleRandom * rand.z * PI;\n\tvar sin_a = sin(angle);\n\tvar cos_a = cos(angle);\n\tvar aspect = pixelSize.x / pixelSize.y;\n\n\tvar mid = tile + vec2<f32>(0.5, 0.5);\n\tvar dp = uv - mid;\n\tdp.x /= aspect;\n\tvar r = vec2<f32>(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvar p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\treturn textureSampleGrad(texture0, sampler0, p, ddx, ddy);\n}\n\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\n\tvar output : FragmentOutput;\n\t\n\tvar blendMarginX = uniforms.tileSpacing.x;\n\tvar blendMarginY = uniforms.tileSpacing.y;\n\t\n\tvar tile = floor(input.fragUV);\n\tvar tex = fract(input.fragUV);\n\tvar ddx = dpdx(input.fragUV);\n\tvar ddy = dpdy(input.fragUV);\n\t\n\tvar curTile = sampleTile(tile, input.fragUV, ddx, ddy);\n\t\n\tvar inLeftMargin = (tex.x < blendMarginX);\n\tvar inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tvar inTopMargin = (tex.y < blendMarginY);\n\tvar inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tvar leftTile = sampleTile(tile + vec2<f32>(-1.0, 0.0), input.fragUV, ddx, ddy);\n\t\tvar leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tvar leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tvar topTile =     sampleTile(tile + vec2<f32>(0.0,  -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topLeftTile = sampleTile(tile + vec2<f32>(-1.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tvar bottomTile =     sampleTile(tile + vec2<f32>(0.0,  1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomLeftTile = sampleTile(tile + vec2<f32>(-1.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput.color = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tvar rightTile = sampleTile(tile + vec2(1.0, 0.0), input.fragUV, ddx, ddy);\n\t\tvar rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tvar rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tvar topTile =      sampleTile(tile + vec2<f32>(0.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topRightTile = sampleTile(tile + vec2<f32>(1.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tvar bottomTile =      sampleTile(tile + vec2<f32>(0.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomRightTile = sampleTile(tile + vec2<f32>(1.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput.color = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tvar topTile = sampleTile(tile + vec2<f32>(0.0, -1.0), input.fragUV, ddx, ddy);\n\t\toutput.color = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tvar bottomTile = sampleTile(tile + vec2<f32>(0.0, 1.0), input.fragUV, ddx, ddy);\n\t\toutput.color = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutput.color = curTile;\n\t}\n\t\n\toutput.color *= vec4<f32>(input.fragColor);\n\t${t ? "output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);" : ""}\n\treturn output;\n}\n`;
        }
        static oPn() {
            return "\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = vec4<f32>(input.fragColor);\n\t\t\treturn output;\n\t\t}";
        }
        static aPn() {
            return `\n\t\t${mP}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\tfn fromLinear(linearRGB : vec3<f32>) -> vec3<f32>\n\t\t{\n\t\t\tvar cutoff : vec3<bool> = (linearRGB < vec3<f32>(0.0031308));\n\t\t\tvar higher : vec3<f32> = vec3<f32>(1.055) * pow(abs(linearRGB), vec3<f32>(1.0/2.4)) - 0.055;\n\t\t\tvar lower : vec3<f32> = linearRGB * 12.92;\n\t\t\treturn select(higher, lower, cutoff);\n\t\t}\n\n\t\tfn toLinear(sRGB : vec3<f32>) -> vec3<f32>\n\t\t{\n\t\t\tvar cutoff : vec3<bool> = (sRGB < vec3<f32>(0.04045));\n\t\t\tvar higher : vec3<f32> = pow(abs((sRGB + 0.055) / 1.055), vec3<f32>(2.4));\n\t\t\tvar lower : vec3<f32> = sRGB / 12.92;\n\t\t\treturn select(higher, lower, cutoff);\n\t\t}\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar linearGrad : vec3<f32> = mix(toLinear(vec3<f32>(input.fragColor.rgb)), toLinear(uniforms.color2.rgb), vec3<f32>(input.fragUV.x));\n\n\t\t\tvar a : f32 = mix(f32(input.fragColor.a), uniforms.color2.a, input.fragUV.x);\n\t\t\toutput.color = vec4<f32>(fromLinear(linearGrad) * a, a);\n\t\t\treturn output;\n\t\t}\n\t\t`;
        }
        static lPn() {
            return `\n\t\t${mP}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar grad : f32 = input.fragUV.x / (1.0 - input.fragUV.y);\n\t\t\toutput.color = vec4<f32>(input.fragColor) * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);\n\t\t\treturn output;\n\t\t}\n\t\t`;
        }
        static uPn() {
            return "\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\n\t\t\tvar f : f32 = step(diffSq.x + diffSq.y, 0.25);\n\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}";
        }
        static cPn() {
            return `\n\t\t${mP}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar distSq : f32 = diffSq.x + diffSq.y;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\n\t\t\tvar innerF : f32 = step(distSq, 0.25);\n\n\t\t\tvar innerEdge : vec2<f32> = halfNorm - uniforms.pixelSize * norm * uniforms.outlineThickness;\n\t\t\tvar innerEdgeSq : vec2<f32> = innerEdge * innerEdge;\n\t\t\tvar outerF : f32 = step(innerEdgeSq.x + innerEdgeSq.y, distSq);\n\t\t\t\n\t\t\toutput.color = vec4<f32>(input.fragColor) * innerF * outerF;\n\t\t\treturn output;\n\t\t}`;
        }
        static dPn() {
            return `\n\t\t${mP}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\t\t\tvar halfNormSq : vec2<f32> = halfNorm * halfNorm;\n\n\t\t\tvar innerEdge : vec2<f32> = halfNorm - uniforms.pixelSize * norm;\n\t\t\tvar innerEdgeSq : vec2<f32> = innerEdge * innerEdge;\n\n\t\t\tvar f : f32 = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);\n\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}`;
        }
        static fPn() {
            return `\n\t\t${mP}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar distSq : f32 = diffSq.x + diffSq.y;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\t\t\tvar halfNormSq : vec2<f32> = halfNorm * halfNorm;\n\n\t\t\tvar pxNorm : vec2<f32> = uniforms.pixelSize * norm;\n\t\t\tvar innerEdge1 : vec2<f32> = halfNorm - pxNorm;\n\t\t\tvar innerEdge1Sq : vec2<f32> = innerEdge1 * innerEdge1;\n\n\t\t\tvar innerF : f32 = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);\n\n\t\t\tvar innerEdge2 : vec2<f32> = halfNorm - pxNorm * uniforms.outlineThickness;\n\t\t\tvar innerEdge2Sq : vec2<f32> = innerEdge2 * innerEdge2;\n\t\t\tvar innerEdge3 : vec2<f32> = halfNorm - pxNorm * (uniforms.outlineThickness + 1.0);\n\t\t\tvar innerEdge3Sq : vec2<f32> = innerEdge3 * innerEdge3;\n\n\t\t\tvar outerF : f32 = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);\n\t\t\t\n\t\t\toutput.color = vec4<f32>(input.fragColor) * innerF * outerF;\n\t\t\treturn output;\n\t\t}`;
        }
        static pPn() {
            return "\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar f : f32 = 1.0 - abs(input.fragUV.y - 0.5) * 2.0;\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}";
        }
    };
}
{
    const PP = self.t,
        GP = new Set(["nearest", "bilinear", "trilinear"]),
        AP = new Set(["clamp-to-edge", "repeat", "mirror-repeat"]),
        RP = self.GPUTextureUsage,
        kP = {
            ji: "clamp-to-edge",
            Ri: "clamp-to-edge",
            Oi: "trilinear",
            Pi: 0,
            _h: !0,
            MRn: !1,
            $Mn: !1,
            gq: !1,
            ERn: !1,
            VMn: 0,
            width: -1,
            height: -1,
        },
        OP = [
            [1, ["r8unorm", "r8snorm", "r8uint", "r8sint", "stencil8"]],
            [2, ["r16uint", "r16sint", "r16float", "rg8unorm", "rg8snorm", "rg8uint", "rg8sint", "depth16unorm"]],
            [3, ["depth24plus"]],
            [
                4,
                [
                    "r32uint",
                    "r32sint",
                    "r32float",
                    "rg16uint",
                    "rg16sint",
                    "rg16float",
                    "rgba8unorm",
                    "rgba8unorm-srgb",
                    "rgba8snorm",
                    "rgba8uint",
                    "rgba8sint",
                    "bgra8unorm",
                    "bgra8unorm-srgb",
                    "rgb9e5ufloat",
                    "rgb10a2uint",
                    "rgb10a2unorm",
                    "rg11b10ufloat",
                    "depth24plus-stencil8",
                    "depth32float",
                ],
            ],
            [8, ["rg32uint", "rg32sint", "rg32float", "rgba16uint", "rgba16sint", "rgba16float"]],
            [16, ["rgba32uint", "rgba32sint", "rgba32float"]],
            [5, ["depth32float-stencil8"]],
        ],
        DP = new Map();
    for (const [BP, UP] of OP) for (const NP of UP) DP.set(NP, BP);
    const FP = new Set(),
        LP = { SMn: !0, flipY: !1 };
    PP.bn.jIn = class {
        constructor(t, i) {
            (this.ci = t),
                (this.ii = null),
                (this.wln = ""),
                (this.CRn = null),
                (this._Rn = null),
                (this.TRn = null),
                (this.IRn = null),
                (this.RS = 0),
                (this._S = 0),
                (this.DHs = !0),
                (this.QC = "clamp-to-edge"),
                (this.KC = "clamp-to-edge"),
                (this.MMn = "trilinear"),
                (this.EMn = 0),
                (this._Mn = !1),
                (this.$Ke = 0),
                (this.PRn = !1),
                (this.JMn = !1),
                (this.GRn = !1),
                (this.ARn = !1),
                (this.ZMn = 0),
                (this.RRn = 0),
                (this.kRn = !0),
                (this.ORn = null),
                (this.DRn = 0),
                (this.FRn = !!i),
                this.FRn &&
                    ((this.wln = this.ci.RPn()),
                    (this.PRn = !0),
                    (this.JMn = this.ci.DPn()),
                    (this.MMn = this.ci.NPn()),
                    (this._Rn = this.ci._Pn({ Oi: this.MMn })));
        }
        LRn(t) {
            if (
                (PP.vu(t.ji),
                PP.vu(t.Ri),
                PP.wi(t.Pi),
                (this.QC = t.ji),
                (this.KC = t.Ri),
                (this.MMn = t.Oi),
                (this.EMn = t.Pi),
                (this._Mn = !!t._h && this.ci.hyn() && "nearest" !== t.Oi),
                (this.PRn = !!t.MRn),
                (this.JMn = !!t.$Mn),
                (this.GRn = !!t.gq),
                (this.ARn = !!t.ERn),
                (this.ZMn = this.ci.QGn(t.VMn)),
                !GP.has(this.MMn))
            )
                throw new Error("invalid sampling");
            if (!AP.has(this.QC) || !AP.has(this.KC)) throw new Error("invalid wrap mode");
            if (this.ZMn >= 2 && this.JMn) throw new Error("invalid use of multisampling");
            "nearest" === this.MMn && (this.EMn = 0),
                (this._Rn = this.ci._Pn({ ji: this.QC, Ri: this.KC, Oi: this.MMn, Pi: this.EMn })),
                this.BRn(),
                (this.$Ke = 1);
        }
        BRn() {
            const t = this.ci,
                i = t.PPn();
            (this.RRn = 0),
                this.PRn
                    ? ((this.RRn = RP.RENDER_ATTACHMENT),
                      this.JMn && (this.RRn |= RP.TEXTURE_BINDING),
                      this.ARn && (this.RRn |= RP.COPY_DST),
                      (this.wln = this.ci.RPn()))
                    : ((this.RRn = RP.COPY_DST | RP.TEXTURE_BINDING), (this.wln = this.ci.jPn())),
                this.GRn && (this.RRn |= RP.COPY_SRC),
                (this.ii = i.createTexture({
                    size: [this.RS, this._S, 1],
                    mipLevelCount: this.URn(),
                    format: this.wln,
                    usage: this.RRn,
                    sampleCount: this.ZMn >= 2 ? this.ZMn : 1,
                })),
                (this.CRn = this.ii.createView());
            const e = [],
                s = PP.bn.WIn.VIn();
            for (let t = 0; t < s; ++t)
                e.push({ binding: 2 * t, resource: this._Rn }, { binding: 2 * t + 1, resource: this.CRn });
            (this.PRn && !this.JMn) ||
                ((this.TRn = i.createBindGroup({ layout: t.BPn(), entries: e })),
                (this.IRn = i.createBindGroup({
                    layout: t.UPn(),
                    entries: [
                        { binding: 0, resource: this.ci._Pn({ Oi: this.ci.NPn() }) },
                        { binding: 1, resource: this.CRn },
                    ],
                }))),
                this.NRn() && this.XPn(!0),
                FP.add(this);
        }
        jRn() {
            FP.delete(this),
                this.ORn && this.ORn.Ut(),
                this.XPn(!1),
                this.ii.destroy(),
                (this.ii = null),
                (this.CRn = null),
                (this.TRn = null),
                (this.IRn = null);
        }
        static KPn(t) {
            return (
                t instanceof ImageBitmap ||
                ("undefined" != typeof HTMLVideoElement && t instanceof HTMLVideoElement) ||
                ("undefined" != typeof HTMLCanvasElement && t instanceof HTMLCanvasElement) ||
                ("undefined" != typeof OffscreenCanvas && t instanceof OffscreenCanvas)
            );
        }
        static $Rn(t) {
            return ("undefined" != typeof HTMLImageElement && t instanceof HTMLImageElement) || t instanceof ImageData;
        }
        zRn(t) {
            return [t.width || t.videoWidth, t.height || t.videoHeight];
        }
        mue(t, i) {
            if (t && !PP.bn.jIn.KPn(t)) throw new TypeError("invalid texture source");
            if ((PP.Crt(i), (i = Object.assign({}, kP, i)), this.ii)) throw new Error("already created texture");
            if (((this.DHs = !0), t)) {
                const [i, e] = this.zRn(t);
                (this.RS = i), (this._S = e);
            } else if (
                (PP.wi(i.width),
                PP.wi(i.height),
                (this.RS = i.width),
                (this._S = i.height),
                this.RS <= 0 || this._S <= 0)
            )
                throw new Error("invalid texture size");
            if ((this.LRn(i), this.PRn || this.JMn)) throw new Error("static texture cannot be render target");
            t && this.VRn(t);
        }
        VRn(t, i = !0) {
            if (this._Mn) this.WRn(t, this.URn(), i);
            else {
                const e = this.ci.PPn(),
                    s = e.createCommandEncoder(),
                    n = e.createTexture({
                        size: [this.RS, this._S, 1],
                        mipLevelCount: 1,
                        format: this.wln,
                        usage: RP.COPY_SRC | RP.COPY_DST | RP.RENDER_ATTACHMENT,
                    });
                this.HRn(n, t, 0, i),
                    s.copyTextureToTexture({ texture: n, mipLevel: 0 }, { texture: this.ii, mipLevel: 0 }, [
                        this.RS,
                        this._S,
                        1,
                    ]),
                    e.queue.submit([s.finish()]),
                    n.destroy();
            }
        }
        HRn(t, i, e, s = !0) {
            const [n, r] = this.zRn(i);
            this.ci
                .PPn()
                .queue.copyExternalImageToTexture({ source: i }, { texture: t, mipLevel: e, premultipliedAlpha: !!s }, [
                    n,
                    r,
                    1,
                ]);
        }
        URn() {
            return this._Mn ? Math.floor(Math.log2(Math.max(this.RS, this._S)) + 1) : 1;
        }
        WRn(t, i, e = !0) {
            const s = this.ci.PPn(),
                n = s.createTexture({
                    size: [this.RS, this._S, 1],
                    mipLevelCount: this.URn(),
                    format: this.wln,
                    usage: RP.COPY_DST | RP.COPY_SRC | RP.TEXTURE_BINDING | RP.RENDER_ATTACHMENT,
                }),
                r = this.ci.mPn(),
                h = r.getBindGroupLayout(0),
                o = this.ci._Pn({ Oi: "bilinear" }),
                a = s.createCommandEncoder();
            this.HRn(n, t, 0, e),
                a.copyTextureToTexture({ texture: n, mipLevel: 0 }, { texture: this.ii, mipLevel: 0 }, [
                    this.RS,
                    this._S,
                    1,
                ]);
            const l = [];
            for (let t = 0; t < i; ++t) l.push(n.createView({ baseMipLevel: t, mipLevelCount: 1 }));
            let u = this.RS,
                c = this._S;
            for (let t = 1; t < i; ++t) {
                (u /= 2), (c /= 2);
                const i = Math.max(Math.floor(u), 1),
                    e = Math.max(Math.floor(c), 1),
                    d = a.beginRenderPass({
                        colorAttachments: [{ view: l[t], loadOp: "clear", clearValue: [0, 0, 0, 0], storeOp: "store" }],
                    }),
                    f = s.createBindGroup({
                        layout: h,
                        entries: [
                            { binding: 0, resource: o },
                            { binding: 1, resource: l[t - 1] },
                        ],
                    });
                d.setPipeline(r),
                    d.setBindGroup(0, f),
                    d.draw(4),
                    d.end(),
                    a.copyTextureToTexture({ texture: n, mipLevel: t }, { texture: this.ii, mipLevel: t }, [i, e, 1]);
            }
            s.queue.submit([a.finish()]), n.destroy();
        }
        kMn(t, i, e) {
            if ((PP.wi(t), PP.wi(i), PP.Crt(e), (e = Object.assign({}, kP, e)), this.ii))
                throw new Error("already created texture");
            (this.DHs = !1), (this.RS = t), (this._S = i), this.LRn(e);
        }
        async C8t(t, i) {
            if (!PP.bn.jIn.KPn(t) && !PP.bn.jIn.$Rn(t)) throw new Error("invalid texture source");
            if (!this.ii || this.$Ke <= 0) throw new Error("texture not created");
            if (this.DHs) throw new Error("cannot update static texture");
            if (
                (PP.Crt(i),
                (i = Object.assign({}, LP, i)),
                (PP.bn.jIn.$Rn(t) || i.flipY || !i.SMn) &&
                    ((t = await createImageBitmap(t, {
                        premultiplyAlpha: i.SMn ? "premultiply" : "none",
                        imageOrientation: i.flipY ? "flipY" : "none",
                    })),
                    !this.ii))
            )
                return;
            this.ci.eyn();
            const [e, s] = this.zRn(t);
            (this.RS === e && this._S === s) ||
                (this.jRn(), (this.RS = e), (this._S = s), this.BRn(), this.ci.XGn(this)),
                this.VRn(t, i.SMn);
        }
        ygt() {
            if (this.$Ke > 0) throw new Error("texture still has references");
            if (!this.ii) throw new Error("already deleted texture");
            this.jRn();
        }
        EPn() {
            (this.kRn = !1), this.XPn(!1);
        }
        NRn() {
            return this.DHs && this.kRn && !this.PRn;
        }
        XPn(t) {
            this.ci.XPn(this, t);
        }
        KRn(t, i) {
            if (this.ORn) throw new Error("already in a group");
            (this.ORn = t), (this.DRn = i), this.XPn(!1);
        }
        qRn() {
            (this.ORn = null), (this.DRn = 0), this.NRn() && this.XPn(!0);
        }
        xPn() {
            return this.TRn;
        }
        MPn() {
            return this.IRn;
        }
        HGn() {
            return null !== this.ORn
                ? this.ORn.XRn()
                : this.NRn()
                  ? (this.ci.JPn(this), null !== this.ORn ? this.ORn.XRn() : null)
                  : null;
        }
        qGn() {
            return this.DRn;
        }
        rs() {
            return this.FRn ? this.ci.rs() : this.RS;
        }
        ls() {
            return this.FRn ? this.ci.ls() : this._S;
        }
        Vi() {
            return this.ci;
        }
        axn() {
            return this.ii;
        }
        gGn() {
            return this.CRn;
        }
        BGn() {
            return this.wln;
        }
        _Pn() {
            return this._Rn;
        }
        Ci() {
            return this.MMn;
        }
        Sq() {
            return "nearest" !== this.MMn;
        }
        WPn() {
            return this.PRn;
        }
        rEn() {
            return this.JMn;
        }
        UGn() {
            return this.GRn;
        }
        BMn() {
            this.$Ke++;
        }
        UMn() {
            if (this.$Ke <= 0) throw new Error("no more references");
            this.$Ke--;
        }
        NMn() {
            return this.$Ke;
        }
        ZGn() {
            return this.RRn;
        }
        TPn(t, i) {
            (this.RRn = t), (this.wln = i);
        }
        tGn() {
            const t = this.ci,
                i = t.PPn();
            (this.ii = t.kPn()),
                (this.CRn = t.OPn()),
                t.DPn() &&
                    (this.IRn = i.createBindGroup({
                        layout: t.UPn(),
                        entries: [
                            { binding: 0, resource: this._Rn },
                            { binding: 1, resource: this.CRn },
                        ],
                    }));
        }
        nGn() {
            (this.ii = null), (this.CRn = null), (this.IRn = null);
        }
        HX() {
            let t = this.rs() * this.ls() * PP.bn.jIn.$Pn(this.BGn());
            return this._Mn && (t += Math.floor(t / 3)), t;
        }
        static je() {}
        static jMn() {
            return FP.values();
        }
        static $Pn(t) {
            const i = DP.get(t);
            return "number" == typeof i ? i : NaN;
        }
    };
}
{
    const jP = self.t;
    jP.bn.WIn = class {
        constructor(t, i) {
            if ((jP._T(i), i.length < 2)) throw new Error("invalid multi-texture group");
            (this.ci = t), (this.YRn = i), (this.JRn = null);
            for (let t = 0, e = i.length; t < e; ++t) i[t].KRn(this, t);
            i.length < jP.bn.WIn.VIn() && this.ci.YPn(this, !0), this.ZRn();
        }
        Ut() {
            this.ci.YPn(this, !1);
            for (const t of this.YRn) t.qRn();
            this.QRn(), jP.yh(this.YRn), (this.ci = null);
        }
        ZRn() {
            this.QRn();
            const t = this.ci.PPn(),
                i = [],
                e = jP.bn.WIn.VIn();
            for (let t = 0; t < e; ++t) {
                const e = this.YRn[Math.min(t, this.YRn.length - 1)];
                i.push({ binding: 2 * t, resource: e._Pn() }, { binding: 2 * t + 1, resource: e.gGn() });
            }
            this.JRn = t.createBindGroup({ layout: this.ci.BPn(), entries: i });
        }
        QRn() {
            null !== this.JRn && this.ci.YGn(this.JRn), (this.JRn = null);
        }
        XRn() {
            return this.JRn;
        }
        static VIn() {
            return 14;
        }
    };
}
{
    const $P = self.t,
        zP = self.sG,
        VP = (zP.hG, zP.eG),
        WP = { Oi: "trilinear", alpha: !0, qJ: !1, $Mn: !0, gq: !1, ERn: !1, zMn: !0, VMn: 0 },
        HP = new Set();
    $P.bn.$In = class {
        constructor(t, i) {
            $P.Et(t, $P.bn.sq),
                (this.ci = t),
                (this.tkn = !!i),
                (this.hms = !!i && t.zPn()),
                (this.ikn = null),
                (this.XMn = !0),
                (this.ZMn = 0),
                (this.ekn = !1),
                (this.skn = $P.m($P.nr)),
                (this.QMn = VP.create()),
                (this.NG = 0),
                (this.VG = 0),
                (this.KG = 0),
                this.tkn && (this.ikn = $P.m($P.bn.jIn, t, !0));
        }
        mue(t, i, e) {
            if (
                ($P.wi(t),
                $P.wi(i),
                $P.Crt(e),
                (e = Object.assign({}, WP, e)),
                self.assert(!this.tkn, "do not create backbuffer"),
                this.ikn)
            )
                throw new Error("already created render target");
            if (((this.hms = !!e.qJ), (this.XMn = !!e.zMn), (this.ZMn = this.ci.QGn(e.VMn)), this.ZMn >= 2 && e.$Mn))
                throw new Error("invalid use of multisampling");
            (this.ikn = this.ci.DL(t, i, {
                Oi: e.Oi,
                _h: !1,
                MRn: !0,
                $Mn: e.$Mn,
                gq: e.gq,
                ERn: e.ERn,
                VMn: this.ZMn,
            })),
                this.tEn(),
                HP.add(this);
        }
        ygt() {
            HP.delete(this), this.ikn.jRn(), (this.ikn = null), (this.ci = null);
        }
        eEn(t, i) {
            if (t === this.rs() && i === this.ls()) return;
            const e = this.ikn.Ci(),
                s = this.ikn.rEn(),
                n = this.ikn.UGn();
            this.ikn.jRn(),
                (this.ikn = null),
                (this.ikn = this.ci.DL(t, i, { Oi: e, _h: !1, MRn: !0, $Mn: s, gq: n })),
                this.tEn();
        }
        gGn() {
            return this.tkn ? this.ci.OPn() : this.ikn.gGn();
        }
        tEn() {
            this.ci.fL(this.QMn, this.rs() / this.ls()),
                (this.NG = this.ci.fgn()),
                (this.VG = this.ci.aX()),
                (this.KG = this.ci.cX());
        }
        oEn() {
            return this.XMn;
        }
        VPn() {
            return this.tkn;
        }
        hEn() {
            return this.hms;
        }
        rs() {
            return this.tkn ? this.ci.rs() : this.ikn.rs();
        }
        ls() {
            return this.tkn ? this.ci.ls() : this.ikn.ls();
        }
        Li() {
            if (this.ikn) return this.ikn;
            throw new Error("no texture");
        }
        Vi() {
            return this.ci;
        }
        aEn() {
            return this.ZMn;
        }
        sEn() {
            return (
                (this.ci.fgn() === this.NG && this.ci.aX() === this.VG && this.ci.cX() === this.KG) || this.tEn(),
                this.QMn
            );
        }
        Sq() {
            return this.ikn.Sq();
        }
        rEn() {
            return this.ikn.rEn();
        }
        UGn() {
            return this.ikn.UGn();
        }
        lEn(t) {
            return (
                ("nearest" !== (t = Object.assign({}, WP, t)).Oi) === this.Sq() &&
                !!t.$Mn === this.rEn() &&
                !!t.gq === this.UGn() &&
                !!t.qJ === this.hEn() &&
                ("number" == typeof t.width || "number" == typeof t.height
                    ? !this.oEn() && this.rs() === Math.floor(t.width) && this.ls() === Math.floor(t.height)
                    : this.oEn())
            );
        }
        vGn(t) {
            this.ekn = !!t;
        }
        iGn() {
            return this.ekn;
        }
        yGn() {
            return this.skn;
        }
        static je() {}
        static fEn() {
            return HP.values();
        }
    };
}
{
    const KP = self.t;
    KP.bn.hGn = class {
        constructor(t, i) {
            KP.Et(t, KP.bn.sq), KP.wi(i), (this.ci = t), (this.hgn = this.ci.syn()), (this.nkn = i);
            const e = this.ci.PPn();
            this.rkn = e.createQuerySet({ count: this.nkn, type: "timestamp" });
            const s = self.GPUBufferUsage;
            (this.hkn = e.createBuffer({ size: this.okn(), usage: s.QUERY_RESOLVE | s.COPY_SRC })),
                (this.akn = e.createBuffer({ size: this.okn(), usage: s.COPY_DST | s.MAP_READ })),
                (this.VQs = null);
        }
        okn() {
            return 8 * this.nkn;
        }
        SGn() {
            return this.rkn;
        }
        W5s(t) {
            t.resolveQuerySet(this.rkn, 0, this.nkn, this.hkn, 0),
                t.copyBufferToBuffer(this.hkn, 0, this.akn, 0, this.okn());
        }
        async EGn() {
            const t = this.okn();
            await this.akn.mapAsync(self.GPUMapMode.READ, 0, t);
            const i = this.akn.getMappedRange(0, t);
            (this.VQs = new BigUint64Array(i.slice(0))),
                this.akn.destroy(),
                (this.akn = null),
                this.hkn.destroy(),
                (this.hkn = null),
                this.rkn.destroy(),
                (this.rkn = null);
        }
        SEn() {
            return null !== this.VQs;
        }
        M3s() {
            if (!this.VQs) throw new Error("not yet got result");
            return this.VQs;
        }
        syn() {
            return this.hgn;
        }
    };
}
{
    const qP = self.t,
        XP = { lkn: null, EJ: null, xJ: null, getTime: null, LJ: null };
    qP.bn.kJ = class {
        constructor(t) {
            (t = Object.assign({}, XP, t)),
                qP.kDt(t.lkn),
                qP.yp(t.EJ),
                qP.yp(t.xJ),
                qP.yp(t.getTime),
                qP.yp(t.LJ),
                (this.ukn = t.lkn),
                (this.ckn = t.EJ),
                (this.dkn = t.xJ),
                (this.fkn = t.getTime),
                (this.pkn = t.LJ),
                (this.mkn = null),
                (this.wkn = new Set());
        }
        gkn(t) {
            this.wkn.add(t);
        }
        ykn(t) {
            this.wkn.delete(t);
        }
        je() {
            this.mkn = null;
            for (const t of this.wkn) t.je();
        }
        bkn(t) {
            return this.ukn ? this.ukn(t) : [t.rs(), t.ls()];
        }
        $Vs(t) {
            return this.ckn(t);
        }
        vkn(t, i) {
            this.dkn(t, i);
        }
        Ul() {
            return this.fkn();
        }
        U1t(t) {
            this.pkn(t);
        }
        Skn(t, i, e) {
            return (
                (i = Math.floor(i)),
                (e = Math.floor(e)),
                !this.mkn || (this.mkn.rs() === i && this.mkn.ls() === e) || (t.mi(this.mkn), (this.mkn = null)),
                null === this.mkn && (this.mkn = t.ki(null, { width: i, height: e, Oi: "nearest", _h: !1 })),
                this.mkn
            );
        }
    };
}
{
    const YP = self.t,
        JP = self.assert,
        ZP = self.sG.eG,
        QP = YP.m(YP.Rect),
        tG = YP.m(YP.Rect),
        iG = YP.m(YP.Rect),
        eG = YP.m(YP.Rect),
        sG = ZP.create(),
        nG = ZP.create(),
        rG = { Nms: null, Vms: null, Jms: null, DLs: !1 },
        hG = { Dbs: null, Ubs: !1, xkn: !1, Vbs: !1, Lbs: !1, Bbs: !1, xLs: !1 };
    YP.bn.Rms = class {
        constructor(t, i) {
            YP.Et(t, YP.bn.kJ),
                (i = Object.assign({}, rG, i)),
                YP.yp(i.Nms),
                YP.kDt(i.Vms),
                YP.yp(i.Jms),
                (this.cYi = t),
                (this.Mkn = i.Nms),
                (this.Ekn = i.Vms),
                (this.Ckn = i.Jms),
                (this._kn = null),
                (this.Tkn = []),
                (this.Ikn = []),
                (this.Bhn = []),
                (this.Pkn = !1),
                (this.gms = 0),
                (this.Gkn = !1),
                (this.Akn = !1),
                (this.Rkn = !1),
                (this.kkn = !1),
                (this.Okn = !1),
                (this.Dkn = !1),
                (this.WEn = !1),
                (this.Fkn = !1),
                (this.Lkn = !1),
                (this.Bkn = !1),
                (this.Ukn = !1),
                (this.Nkn = !1),
                (this.jkn = 0),
                (this.$kn = [null, null, null]),
                (this.zkn = !!i.DLs),
                (this.Vkn = 0),
                (this.Wkn = 0),
                (this.Hkn = 0),
                (this.Kkn = 0),
                (this.qkn = null),
                (this.Xkn = null),
                (this.Ykn = YP.m(YP.Rect)),
                (this.Jkn = YP.m(YP.Rect)),
                (this.Zkn = YP.m(YP.Rect)),
                (this.Qkn = YP.m(YP.Rect)),
                (this.tOn = YP.m(YP.Rect)),
                (this.Ec = 1),
                (this.iOn = 1),
                (this.eOn = 0),
                (this.FV = 0),
                (this.sOn = null),
                (this.nOn = null),
                (this.rOn = 0),
                (this.hOn = 0),
                (this.oOn = 0),
                (this.aOn = 0),
                (this.lOn = !1),
                (this.QMn = ZP.create()),
                (this.uOn = ZP.create()),
                this.cYi.gkn(this);
        }
        Ut() {
            this.cYi.ykn(this),
                YP.yh(this.Bhn),
                YP.yh(this.Tkn),
                YP.yh(this.Ikn),
                (this.qkn = null),
                (this.Xkn = null),
                (this.Mkn = null),
                (this.Ekn = null),
                (this.Ckn = null);
        }
        je() {
            (this.Pkn = !0), YP.yh(this.Bhn), YP.yh(this.Tkn), YP.yh(this.Ikn);
        }
        Rbs() {
            return this.Pkn;
        }
        Nbs(t, i) {
            if (
                (YP._T(t),
                YP.Crt(i),
                (i = Object.assign({}, hG, i)),
                YP.yh(this.Bhn),
                (this.Vkn = 0),
                (this.Wkn = 0),
                (this.Gkn = !1),
                (this.Akn = !1),
                (this.Rkn = !1),
                (this.kkn = !1),
                (this.Okn = !1),
                (this.Dkn = !1),
                (this.jkn = 0),
                (this.Nkn = !!i.Lbs),
                (this.Ukn = !!i.xLs),
                (this.Pkn = !1),
                YP.Rm(this.Tkn, t),
                0 === t.length)
            )
                return;
            if (i.Dbs) {
                if ((YP._T(i.Dbs), i.Dbs.length !== t.length)) throw new Error("incorrect indexMap length");
                YP.Rm(this.Ikn, i.Dbs);
            } else {
                YP.yh(this.Ikn);
                for (let i = 0, e = t.length; i < e; ++i) this.Ikn.push(i);
            }
            for (const i of t)
                (this.Vkn += i.kyn()),
                    (this.Wkn += i.Oyn()),
                    i.Lyn() && (this.Gkn = !0),
                    i.zei() && (this.Akn = !0),
                    i.Hrs() && (this.Rkn = !0),
                    i.Jei() && (this.kkn = !0),
                    i.Nyn() && (this.Okn = !0);
            this.Dkn = this.cOn(t[0].Vi());
            const e = this.dOn(t[0], i),
                s = this.fOn(t.at(-1), i);
            if (1 === t.length && !e && !s) return void (this.Bkn = !0);
            this.Bkn = !1;
            let n = 0;
            e && ((this.jkn = 1), this.Bhn.push(YP.m(YP.bn.Rms.mOn.pOn, this, -1, 1)), (n = 1));
            for (let i = 0, r = t.length; i < r; ++i)
                if (0 !== i || e) {
                    let t = 1 === n ? 2 : 1;
                    i !== r - 1 || s || (t = 0),
                        (this.jkn = Math.max(this.jkn, t)),
                        this.Bhn.push(YP.m(YP.bn.Rms.mOn.wOn, this, n, t, i)),
                        (n = t);
                } else (this.jkn = 1), this.Bhn.push(YP.m(YP.bn.Rms.mOn.gOn, this, -1, 1, i)), (n = 1);
            s && this.Bhn.push(YP.m(YP.bn.Rms.mOn.yOn, this, n, 0));
        }
        dOn(t, i) {
            return (
                !!(
                    i.Ubs ||
                    t.wl() ||
                    (i.Vbs && !t.Fyn()) ||
                    (t.zei() && !this.Ukn) ||
                    0 !== this.Vkn ||
                    0 !== this.Wkn
                ) ||
                (t.Vi().ayn() ? (t.Hrs() && (i.Bbs || i.Lbs)) || (t.Byn() && i.Lbs) : t.Hrs() && !this.Dkn && i.Bbs)
            );
        }
        fOn(t, i) {
            return !!i.xkn || (t.Vi().ayn() ? t.Hrs() || t.Jei() : (t.Hrs() || t.Jei()) && this.bOn());
        }
        cOn(t) {
            return t.vp() && this.Rkn && !this.kkn;
        }
        FLs(t, i, e) {
            YP.Et(t, YP.bn.dS),
                YP.x$(e),
                t.vp() && null === i && (i = t.LGn()),
                (this.sOn = i),
                (this.qkn = e.TLs || null),
                (this.Xkn = e.OLs || null),
                (this.gms = e.MLs || 0),
                (this.Ec = e.devicePixelRatio || 1),
                (this.iOn = e.jLs || 1),
                (this.eOn = e.uAn || 0),
                (this.FV = "number" == typeof e.time ? e.time : this.cYi.Ul()),
                (this.WEn = !1),
                t.t_n(),
                this.Gkn && this.Y8i();
            let s = !1;
            if (
                (this.vOn() &&
                    (this.SOn(t, e),
                    (s = !0),
                    (this.nOn = this.cYi.Skn(t, this.Hkn, this.Kkn)),
                    QP.mn(this.Jkn),
                    QP.PFe(),
                    t.vp() && t.xGn(this.sOn),
                    t.JGn(this.sOn.Li(), this.nOn, QP.un(), QP.pn(), QP.width(), QP.height())),
                this.Bkn)
            )
                this.xOn(t, e);
            else if (
                (JP(this.Bhn.length > 0, "expected some steps"),
                s || this.SOn(t, e),
                0 !== this.Zkn.width() || 0 !== this.Zkn.height())
            ) {
                t.cs(),
                    t.Qi(),
                    t.ln(),
                    t.WL(0),
                    t.UL(0),
                    (this._kn = e.MOn || null),
                    (this.rOn = e.EOn || 0),
                    (this.hOn = e.COn || 0),
                    (this.oOn = e._On || 0),
                    (this.aOn = e.TOn || 0),
                    (this.lOn = !!e.IOn),
                    this.POn(t),
                    (this.$kn[0] = i),
                    (this.$kn[1] = this.jkn >= 1 ? this.GOn() : null),
                    (this.$kn[2] = 2 === this.jkn ? this.GOn() : null);
                for (const i of this.Bhn) {
                    const e = this.AOn(i.ROn()),
                        s = this.AOn(i.kOn());
                    t.vp() ? i.OOn(t, e, s) : i.DOn(t, e, s);
                }
                t.vs(null),
                    this.$kn[1] && this.FOn(this.$kn[1]),
                    this.$kn[2] && this.FOn(this.$kn[2]),
                    this.$kn.fill(null),
                    this.LOn(t),
                    (this.sOn = null),
                    (this.nOn = null),
                    (this.qkn = null),
                    (this.Xkn = null),
                    (this._kn = null);
            }
        }
        SOn(t, i) {
            const [e, s] = this.cYi.bkn(t);
            this.BOn(t, e, s), this.UOn(i);
        }
        BOn(t, i, e) {
            if (i <= 0 || e <= 0) throw new Error("invalid draw size");
            (this.Hkn === i && this.Kkn === e) || this.NOn(t, i, e, 0, 0, this.QMn, this.uOn),
                (this.Hkn = i),
                (this.Kkn = e);
        }
        NOn(t, i, e, s, n, r, h) {
            const o = i / 2 + s,
                a = e / 2 + n;
            t.fL(r, i / e);
            const l = t.Yz(o, a, t.Rn(e), o, a, 0, e);
            ZP.mn(h, l);
        }
        UOn(t) {
            if ((this.Ykn.mn(t.RLs), t.NLs ? this.Jkn.mn(t.NLs) : this.Jkn.set(0, 0, this.Hkn, this.Kkn), this.Bkn)) {
                const i = t.EOn ?? 0,
                    e = t.COn ?? 0;
                this.Jkn.offset(-i, -e);
            }
            this.Zkn.mn(this.Jkn), this.Zkn.Tg(this.Hkn, this.Kkn);
            const i = this.iOn * this.Ec;
            this.Jkn.mf(this.Vkn * i, this.Wkn * i),
                this.tOn.mn(this.Jkn),
                this.tOn.Tg(this.Hkn, this.Kkn),
                this.Jkn.GFe(0, 0, this.Hkn, this.Kkn),
                this.Qkn.mn(this.Jkn),
                this.Qkn.Tg(this.Hkn, this.Kkn);
        }
        POn(t) {
            if (((this.Fkn = t.v_n()), (this.Lkn = t.P_n()), this.Ukn)) t.SL(!1), this.Akn && t.S_n(!0);
            else {
                if ((QP.mn(this.Jkn), t.ayn())) {
                    const t = this.iOn * this.Ec;
                    QP.mf(Math.max(this.Vkn, 1) * t, Math.max(this.Wkn, 1) * t),
                        QP.PFe(),
                        QP.ft(0, 0, this.Hkn, this.Kkn);
                } else QP.PFe();
                t.x_n(QP.un(), QP.pn(), QP.width(), QP.height(), this.Kkn);
            }
        }
        jOn(t) {
            t.ln(), this.Ukn || (this.Lkn ? t.G_n(!1) : t.SL(!1), this.Akn && t.S_n(!0)), t.vp() && t.VGn(!0);
        }
        LOn(t) {
            t.S_n(!1),
                this.Lkn ? t.I_n(this.Fkn) : t.SL(this.Fkn),
                this.Ukn || t.M_n(),
                t.vp() && t.VGn(!1),
                (this.WEn = t.C$s());
        }
        $On() {
            this.tOn.ft(0, 0, 1, 1);
        }
        AOn(t) {
            return t < 0 ? null : this.$kn[t];
        }
        GOn() {
            return this.cYi.$Vs(this);
        }
        zOn() {
            return this.sOn;
        }
        FOn(t) {
            this.cYi.vkn(t, this);
        }
        VOn(t) {
            return this.Tkn[t];
        }
        WOn(t) {
            this._kn ? this._kn(this, t, () => this.Mkn(t, this)) : this.Mkn(t, this), this.Bkn || this.jOn(t);
        }
        HOn(t) {
            if (this.Ukn) return !0;
            if (0 !== this.rOn || 0 !== this.hOn || 0 !== this.oOn || 0 !== this.aOn) return !1;
            const [i, e] = t.p_n(t.$Vs());
            return i === this.Hkn && e === this.Kkn;
        }
        KOn(t, i) {
            let e = this.QMn,
                s = this.uOn;
            if (i && !this.HOn(t)) {
                let i, n;
                (e = sG),
                    (s = nG),
                    0 !== this.oOn && 0 !== this.aOn ? ([i, n] = [this.oOn, this.aOn]) : ([i, n] = t.p_n(t.$Vs())),
                    this.NOn(t, i, n, this.rOn, this.hOn, e, s),
                    this.Ukn || t.M_n();
            }
            t.Xz(e), t.Zz(s);
        }
        Y8i() {
            this.cYi.U1t(this);
        }
        qOn(t, i) {
            return this.Ckn(this.Ikn[t], i);
        }
        XOn(t, i) {
            let e = this.tOn,
                s = this.Qkn,
                n = this.Zkn;
            t.ayn() && (tG.mn(e), tG.EFe(1), (e = tG), iG.mn(s), iG.EFe(1), (s = iG), eG.mn(n), eG.EFe(1), (n = eG)),
                this.YOn(t, i, s, n, e, 1 / this.Hkn, 1 / this.Kkn);
        }
        JOn(t, i) {
            let e = this.Qkn,
                s = this.Zkn,
                n = 1 / this.Hkn,
                r = 1 / this.Kkn;
            if (this.Ekn) {
                let { Lms: t, Bms: i, $ms: h } = this.Ekn(this.qkn);
                t || (QP.set(0, 0, 0, 0), (t = QP)),
                    i || (i = this.Hkn),
                    h || (h = this.Kkn),
                    (e = t),
                    (s = t),
                    (n = 1 / i),
                    (r = 1 / h);
            } else t.ayn() && (iG.mn(e), iG.EFe(1), (e = iG), eG.mn(s), eG.EFe(1), (s = eG));
            let h = this.tOn;
            t.ayn() && ((h = tG), h.mn(this.tOn), h.EFe(1)),
                this.YOn(t, i, e, s, h, n, r),
                t.vp() && this.Okn && t.pAn(this.Nkn);
        }
        ZOn(t) {
            return this.Rkn ? (t.vp() ? (this.vOn() ? this.nOn : this.sOn.Li()) : this.sOn) : null;
        }
        YOn(t, i, e, s, n, r, h) {
            t.y_n(this.ZOn(t), n, e, s, this.Ykn, r, h, this.Ec, this.iOn, this.eOn, this.FV), t.b_n(this.qOn(i, t));
        }
        xOn(t, i) {
            const e = this.Tkn[0],
                s = t.v_n(),
                n = e.zei();
            n && (t.SL(!1), t.S_n(!0), this.tOn.set(0, 0, 1, 1), this.Zkn.set(0, 0, 1, 1)),
                t.xg(e),
                t.Ch(this.gms),
                t.vL(this.sOn),
                t.Qi();
            let r = 0,
                h = 1;
            if ((this.Zkn.set(0, 0, 1, 1), e.Byn() && this.Ekn)) {
                const { Lms: t, Bms: i, $ms: e } = this.Ekn(this.qkn);
                t && this.Zkn.mn(t), (r = Number.isFinite(i) ? 1 / i : 0), (h = Number.isFinite(e) ? 1 / e : 0);
            } else {
                const [i, e] = this.cYi.bkn(t);
                (r = 1 / i), (h = 1 / e);
            }
            i.RLs ? this.Ykn.mn(i.RLs) : this.Ykn.set(0, 0, 0, 0),
                t.y_n(this.ZOn(t), this.tOn, this.Zkn, this.Zkn, this.Ykn, r, h, this.Ec, this.iOn, this.eOn, this.FV),
                t.b_n(this.qOn(0, t)),
                t.vp() && this.Okn && t.pAn(this.Nkn),
                t.WL(0),
                this.WOn(t),
                n && (t.S_n(!1), t.SL(s));
        }
        vOn() {
            return this.Dkn;
        }
        bOn() {
            return !this.Dkn;
        }
        QOn() {
            return this.Rkn;
        }
        v$s() {
            return !!this.Bkn && !this.vOn();
        }
        tDn() {
            return this.Ukn;
        }
        Dms() {
            return this.qkn;
        }
        HJ() {
            return this.Xkn;
        }
        iDn() {
            return this.gms;
        }
        eDn() {
            return this.lOn;
        }
        C$s() {
            return this.WEn;
        }
        sDn() {
            return this.Jkn;
        }
        nDn() {
            return this.Qkn;
        }
        rDn() {
            return this.zkn;
        }
        async hDn(t, i, e) {}
    };
}
{
    const oG = self.t;
    oG.bn.Rms.mOn = class {
        constructor(t, i, e, s = -1) {
            (this.jms = t), (this.oDn = i), (this.aDn = e), (this.ksi = s);
        }
        Obs() {
            return this.jms;
        }
        ROn() {
            return this.oDn;
        }
        kOn() {
            return this.aDn;
        }
        Bv() {
            return this.ksi;
        }
        ghs() {
            return this.Obs().VOn(this.Bv());
        }
        DOn(t, i, e) {
            oG._2();
        }
        OOn(t, i, e) {
            oG._2();
        }
    };
}
{
    const aG = self.t;
    aG.bn.Rms.mOn.pOn = class extends aG.bn.Rms.mOn {
        constructor(t, i, e, s) {
            super(t, i, e, s);
        }
        DOn(t, i, e) {
            const s = this.Obs();
            t.cs(), t.Qi(), t.an(), t.vL(e, s.eDn()), t.y$s(0, 0, 0, 0), s.WOn(t), s.$On();
        }
        OOn(t, i, e) {
            const s = this.Obs();
            t.cs(), t.Qi(), t.an(), t.vL(e, !1), t.y$s(0, 0, 0, 0), s.WOn(t), s.$On();
        }
    };
}
{
    const lG = self.t,
        uG = lG.m(lG.Rect),
        cG = lG.m(lG.Bi);
    lG.bn.Rms.mOn.yOn = class extends lG.bn.Rms.mOn {
        constructor(t, i, e, s) {
            super(t, i, e, s);
        }
        DOn(t, i, e) {
            const s = this.Obs();
            t.an(),
                t.vL(e),
                s.KOn(t, !0),
                t.Ch(s.iDn()),
                t.vs(i.Li()),
                cG.gn(s.sDn()),
                uG.mn(s.nDn()),
                uG.EFe(1),
                t.Ts(cG, uG),
                s.rDn() && t.HVs(i);
        }
        OOn(t, i, e) {
            const s = this.Obs();
            t.an(),
                t.vL(e, !1),
                s.HOn(t) ? cG.gn(s.nDn()) : (t.VGn(!1), s.KOn(t, !0), cG.gn(s.sDn())),
                t.qPn(null),
                t.Ch(s.iDn()),
                t.vs(i.Li()),
                s.tDn() ? t.f_n() : t.Ts(cG, s.nDn());
        }
    };
}
{
    const dG = self.t;
    dG.bn.Rms.mOn.gOn = class extends dG.bn.Rms.mOn {
        constructor(t, i, e, s) {
            super(t, i, e, s);
        }
        DOn(t, i, e) {
            const s = this.Obs();
            t.vL(e, s.eDn()), t.y$s(0, 0, 0, 0), t.a_n(), t.xg(this.ghs()), s.JOn(t, this.Bv()), s.WOn(t), s.$On();
        }
        OOn(t, i, e) {
            const s = this.Obs();
            t.vL(e, !1), t.y$s(0, 0, 0, 0), t.a_n(), t.xg(this.ghs()), s.JOn(t, this.Bv()), s.WOn(t), s.$On();
        }
    };
}
{
    const fG = self.t,
        pG = fG.m(fG.Rect),
        mG = fG.m(fG.Bi);
    fG.bn.Rms.mOn.wOn = class extends fG.bn.Rms.mOn {
        constructor(t, i, e, s) {
            super(t, i, e, s);
        }
        DOn(t, i, e) {
            const s = this.Obs();
            t.vL(e);
            const n = 0 === this.kOn();
            n ? t.Ch(s.iDn()) : (t.y$s(0, 0, 0, 0), t.a_n()),
                t.xg(this.ghs()),
                s.XOn(t, this.Bv()),
                t.vs(i.Li()),
                s.KOn(t, n),
                mG.gn(s.sDn()),
                pG.mn(s.nDn()),
                pG.EFe(1),
                t.Ts(mG, pG),
                s.rDn() && t.HVs(i);
        }
        OOn(t, i, e) {
            const s = this.Obs();
            t.vL(e, !1);
            0 === this.kOn()
                ? (t.Ch(s.iDn()), t.qPn(null), s.HOn(t) ? mG.gn(s.nDn()) : (t.VGn(!1), s.KOn(t, !0), mG.gn(s.sDn())))
                : (t.y$s(0, 0, 0, 0), t.a_n(), mG.gn(s.nDn())),
                t.xg(this.ghs()),
                s.XOn(t, this.Bv()),
                t.vs(i.Li()),
                s.tDn() ? t.f_n() : t.Ts(mG, s.nDn());
        }
    };
}
{
    const wG = self.t;
    (wG.ON = {}),
        (wG.ON.x8s = 45802),
        (wG.ON.lDn = "stable"),
        (wG.ON.uDn = !0),
        (wG.ON.URL = {
            cDn: "https://www.construct.net/",
            dDn: { games: "make-games", animation: "animation-software" },
            LSe: "",
            fDn: "https://www.construct.net",
            pDn: "https://www.construct.net/about",
            mDn: "https://www.construct.net/register",
            wDn: "https://www.construct.net/privacy-policy",
            nrt: "https://www.construct.net/game-assets",
            gDn: {
                games: "https://www.construct.net/make-games/manuals/construct-3",
                animation: "https://www.construct.net/animation-software/manual",
            },
            rrt: "",
            yDn: "getting-started/using-an-account",
            bDn: "releases/",
            vDn: "https://www.construct.net/profile/edit",
            SDn: "https://www.construct.net/profile/licenses",
            xDn: "https://www.construct.net/make-games/buy-construct-3",
            MDn: "https://www.construct.net/store/checkout?editor=1",
            Pye: "https://www.construct.net/make-games/features",
            irt: "https://www.construct.net/tutorials",
            EDn: "https://www.construct.net/tutorials/beginners-guide-to-construct-3-1",
            PN: "https://www.construct.net/make-games/manuals/construct-3/scripting/guides/using-typescript",
            CDn: "https://www.construct.net/community",
            _Dn: "https://www.construct.net/forum",
            TDn: "https://www.construct.net/blogs",
            Que: "https://www.construct.net/make-games/addons",
            IDn: "https://www.construct.net/make-games/showcase",
            PDn: "https://www.construct.net/free-online-games",
            GDn: "https://github.com/Scirra/Construct-bugs",
            ADn: "https://github.com/Scirra/Construct-feature-requests",
            RDn: "https://www.construct.net/forum/construct-3/translations-11/how-to-help-translate-construc-128475",
        }),
        (wG.ON.kDn = function (t) {
            (wG.ON.URL.LSe = wG.ON.URL.cDn + wG.ON.URL.dDn[t] + "/"), (wG.ON.URL.rrt = wG.ON.URL.gDn[t]);
        }),
        (wG.uhi = function (t) {
            wG.wi(t);
            const i = t % 100;
            let e = "r" + Math.floor(t / 100);
            return 0 !== i && (e += "." + i), e;
        }),
        (wG.ODn = function (t) {
            return wG.GWt(wG.uhi(t), ".", "-");
        }),
        (wG.DDn = function (t) {
            wG.vu(t), (t = t.toLowerCase().trim()).startsWith("r") && (t = t.substr(1));
            const i = t.split(".");
            let e = -1;
            return (
                1 === i.length
                    ? (e = 100 * parseInt(i[0], 10))
                    : 2 === i.length && (e = 100 * parseInt(i[0], 10) + parseInt(i[1], 10)),
                isFinite(e) || (e = -1),
                e
            );
        }),
        (wG.ON.fhi = wG.uhi(wG.ON.x8s)),
        (wG.ON.FDn = wG.ODn(wG.ON.x8s));
}
globalThis.t.ti.QO.LDn = {
    BDn: [
        {
            id: "main",
            size: "1fr",
            name: "Main area",
            devicePixelRatio: 1,
            popup: !1,
            type: "Pane",
            activeTab: null,
            layout: {
                tabSide: !1,
                size: 1920,
                id: "middle",
                isHorizontal: !0,
                children: [
                    {
                        id: "propertiesBar",
                        size: "320px",
                        fixedSize: !0,
                        name: "Properties",
                        devicePixelRatio: 1,
                        popup: !1,
                        type: "CaptionPane",
                        activeTab: null,
                        caption: "Properties",
                        side: "left",
                        docked: !0,
                    },
                    {
                        id: "",
                        size: "1fr",
                        name: "middle2",
                        devicePixelRatio: 1,
                        type: "DockingPane",
                        activeTab: null,
                        side: "",
                        docked: !0,
                        layout: {
                            tabSide: !1,
                            size: 1024,
                            id: "middle3",
                            isHorizontal: !1,
                            children: [
                                {
                                    id: "midPane",
                                    size: "1fr",
                                    name: "Mid pane",
                                    devicePixelRatio: 1,
                                    popup: !1,
                                    type: "TabPane",
                                    activeTab: null,
                                    side: "",
                                    docked: !0,
                                    layout: { tabSide: "top", children: [] },
                                },
                                {
                                    id: "assetBrowserBar",
                                    size: "250px",
                                    name: "Asset Browser",
                                    devicePixelRatio: 1,
                                    type: "CaptionPane",
                                    activeTab: null,
                                    caption: "Asset Browser",
                                    side: "bottom",
                                    docked: !0,
                                },
                            ],
                        },
                    },
                    {
                        id: "",
                        size: "320px",
                        fixedSize: !0,
                        name: "middle2",
                        devicePixelRatio: 1,
                        type: "DockingPane",
                        activeTab: null,
                        side: "right",
                        docked: !0,
                        layout: {
                            tabSide: !1,
                            size: 1024,
                            id: "middle3",
                            isHorizontal: !1,
                            children: [
                                {
                                    id: "projectBar",
                                    size: "487px",
                                    name: "Project",
                                    devicePixelRatio: 1,
                                    popup: !1,
                                    type: "CaptionPane",
                                    activeTab: null,
                                    caption: "Project",
                                    side: "top",
                                    docked: !0,
                                },
                                {
                                    id: "",
                                    size: "487px",
                                    name: "middle4",
                                    devicePixelRatio: 1,
                                    type: "TabPane",
                                    activeTab: null,
                                    side: "bottom",
                                    docked: !0,
                                    layout: {
                                        tabSide: "bottom",
                                        children: [
                                            {
                                                id: "layersBar",
                                                size: "487px",
                                                name: "Layers",
                                                devicePixelRatio: 1,
                                                popup: !1,
                                                type: "CaptionPane",
                                                activeTab: !0,
                                                caption: "Layers",
                                                side: "bottom",
                                                docked: !0,
                                            },
                                            {
                                                id: "tilemapBar",
                                                size: "487px",
                                                name: "Tilemap",
                                                devicePixelRatio: 1,
                                                popup: !1,
                                                type: "CaptionPane",
                                                activeTab: !1,
                                                caption: "Tilemap",
                                                side: "bottom",
                                                docked: !0,
                                            },
                                        ],
                                    },
                                },
                            ],
                        },
                    },
                ],
            },
        },
    ],
    UDn: [
        {
            id: "main",
            size: "1fr",
            name: "Main area",
            devicePixelRatio: 1,
            popup: !1,
            type: "Pane",
            activeTab: null,
            layout: {
                tabSide: !1,
                size: 1920,
                id: "middle",
                isHorizontal: !0,
                children: [
                    {
                        id: "propertiesBar",
                        size: "320px",
                        fixedSize: !0,
                        name: "Properties",
                        devicePixelRatio: 1,
                        popup: !1,
                        type: "CaptionPane",
                        activeTab: null,
                        caption: "Properties",
                        side: "left",
                        docked: !0,
                    },
                    {
                        id: "midPane",
                        size: "1fr",
                        name: "Mid pane",
                        devicePixelRatio: 1,
                        popup: !1,
                        type: "TabPane",
                        activeTab: null,
                        side: "",
                        docked: !0,
                        layout: { tabSide: "top", children: [] },
                    },
                    {
                        size: "300px",
                        fixedSize: !0,
                        name: "middle2",
                        devicePixelRatio: 1,
                        popup: !1,
                        type: "DockingPane",
                        activeTab: null,
                        side: "right",
                        docked: !0,
                        layout: {
                            tabSide: !1,
                            size: 974,
                            id: "middle3",
                            isHorizontal: !1,
                            children: [
                                {
                                    id: "projectBar",
                                    size: "487px",
                                    name: "Project",
                                    devicePixelRatio: 1,
                                    popup: !1,
                                    type: "CaptionPane",
                                    activeTab: null,
                                    caption: "Project",
                                    side: "top",
                                    docked: !0,
                                },
                                {
                                    size: "300px",
                                    name: "middle4",
                                    devicePixelRatio: 1,
                                    popup: !1,
                                    type: "TabPane",
                                    activeTab: null,
                                    side: "bottom",
                                    docked: !0,
                                    layout: {
                                        tabSide: "bottom",
                                        children: [
                                            {
                                                id: "layersBar",
                                                size: "300px",
                                                name: "Layers",
                                                devicePixelRatio: 1,
                                                popup: !1,
                                                type: "CaptionPane",
                                                activeTab: !0,
                                                caption: "Layers",
                                                side: "bottom",
                                                docked: !0,
                                            },
                                            {
                                                id: "tilemapBar",
                                                size: "300px",
                                                name: "Tilemap",
                                                devicePixelRatio: 1,
                                                popup: !1,
                                                type: "CaptionPane",
                                                activeTab: !1,
                                                caption: "Tilemap",
                                                side: "bottom",
                                                docked: !0,
                                            },
                                        ],
                                    },
                                },
                            ],
                        },
                    },
                ],
            },
        },
    ],
    NDn: [
        {
            id: "main",
            size: "1fr",
            name: "Main area",
            devicePixelRatio: 1,
            popup: !1,
            type: "Pane",
            activeTab: null,
            layout: {
                tabSide: !1,
                size: 883,
                id: "middle",
                isHorizontal: !1,
                children: [
                    {
                        id: "",
                        size: "1fr",
                        name: "(no name)",
                        devicePixelRatio: 1,
                        popup: !1,
                        type: "Pane",
                        activeTab: null,
                        layout: {
                            tabSide: !1,
                            size: 1309,
                            id: "middle",
                            isHorizontal: !0,
                            children: [
                                {
                                    id: "propertiesBar",
                                    size: "320px",
                                    fixedSize: !0,
                                    name: "Properties",
                                    devicePixelRatio: 1,
                                    popup: !1,
                                    type: "CaptionPane",
                                    activeTab: null,
                                    caption: "Properties",
                                    side: "left",
                                    docked: !0,
                                },
                                {
                                    id: "midPane",
                                    size: "1fr",
                                    name: "Mid pane",
                                    devicePixelRatio: 1,
                                    popup: !1,
                                    type: "TabPane",
                                    activeTab: null,
                                    side: "",
                                    docked: !0,
                                    layout: { tabSide: "top", children: [] },
                                },
                                {
                                    id: "",
                                    size: "300px",
                                    fixedSize: !0,
                                    name: "middle2",
                                    devicePixelRatio: 1,
                                    popup: !1,
                                    type: "TabPane",
                                    activeTab: null,
                                    side: "right",
                                    docked: !0,
                                    layout: {
                                        tabSide: "bottom",
                                        children: [
                                            {
                                                id: "projectBar",
                                                size: "300px",
                                                name: "Project",
                                                devicePixelRatio: 1,
                                                popup: !1,
                                                type: "CaptionPane",
                                                activeTab: !0,
                                                caption: "Project",
                                                side: "right",
                                                docked: !0,
                                            },
                                            {
                                                id: "layersBar",
                                                size: "300px",
                                                name: "Layers",
                                                devicePixelRatio: 1,
                                                popup: !1,
                                                type: "CaptionPane",
                                                activeTab: !1,
                                                caption: "Layers",
                                                side: "right",
                                                docked: !0,
                                            },
                                        ],
                                    },
                                },
                            ],
                        },
                    },
                    {
                        id: "",
                        size: "250px",
                        name: "middle2",
                        devicePixelRatio: 1,
                        type: "TabPane",
                        activeTab: null,
                        side: "bottom",
                        docked: !0,
                        layout: {
                            tabSide: "bottom",
                            children: [
                                {
                                    id: "timelineBar",
                                    size: "250px",
                                    name: "Timeline",
                                    devicePixelRatio: 1,
                                    type: "CaptionPane",
                                    activeTab: !0,
                                    caption: "Timeline",
                                    side: "bottom",
                                    docked: !0,
                                },
                                {
                                    id: "assetBrowserBar",
                                    size: "250px",
                                    name: "Asset Browser",
                                    devicePixelRatio: 1,
                                    type: "CaptionPane",
                                    activeTab: !1,
                                    caption: "Asset Browser",
                                    side: "bottom",
                                    docked: !0,
                                },
                            ],
                        },
                    },
                ],
            },
        },
    ],
};
{
    const gG = self.t,
        yG = (gG.sj(import.meta.url), "workers/"),
        bG = "dispatchWorker.js",
        vG = "jobWorker.js";
    class SG extends gG.MV {
        constructor() {
            super(),
                (this.jDn = gG.E4s.ZRs("oneworker") ? 1 : Math.min(gG.hardwareConcurrency, 16)),
                (this.$Dn = null),
                (this.zDn = []),
                (this.VDn = new Map()),
                (this.WDn = 0),
                (this.HDn = !1),
                (this.KDn = !1),
                (this.qDn = !1),
                (this.HGt = null),
                (this.zGt = null);
        }
        Yc() {
            if (this.HDn) throw new Error("already initialised");
            return (
                gG.ZJ("JobSchedulerInit"),
                (this.$Dn = new Worker(yG + bG)),
                this.$Dn.addEventListener("message", (t) => this.XDn(t)),
                this.YDn(),
                (this.HDn = !0),
                (this.HGt = new Promise((t, i) => {
                    this.zGt = t;
                })),
                this.HGt
            );
        }
        YDn() {
            const t = new Worker(yG + vG);
            t.addEventListener("message", (t) => this.JDn(t));
            const i = new MessageChannel();
            this.$Dn.postMessage({ type: "_addJobWorker", port: i.port1 }, [i.port1]),
                t.postMessage({ type: "init", number: this.zDn.length, port: i.port2 }, [i.port2]),
                (this.KDn = !0),
                this.zDn.push(t);
        }
        $mt(t, i, e, s, n) {
            if ((gG.vu(t), gG.oN(i), gG.Pce(e), gG.kDt(s), gG.qm(n, gG.ebe), !this.HDn))
                throw new Error("not yet initialised");
            e || (e = []);
            const r = this.WDn++,
                h = { type: t, jobId: r, params: i, transferables: e },
                o = new Promise((t, i) => {
                    this.VDn.set(r, { resolve: t, ZDn: s, reject: i, QDn: !1 });
                });
            return n && n.oVe(() => this.tFn(r)), this.$Dn.postMessage(h, e), this.iFn(), o;
        }
        tFn(t) {
            gG.wi(t);
            const i = this.VDn.get(t);
            i &&
                ((i.QDn = !0),
                (i.resolve = null),
                (i.ZDn = null),
                (i.reject = null),
                this.$Dn.postMessage({ type: "_cancel", jobId: t }));
        }
        XDn(t) {
            const i = t.data,
                e = i.type;
            if ("error" !== e) throw new Error(`unknown message from dispatch worker '${e}'`);
            console.error("[Dispatch worker] Error: " + i.error);
        }
        JDn(t) {
            const i = t.data,
                e = i.type,
                s = i.jobId;
            switch (e) {
                case "result":
                    this.eFn(s, i.result);
                    break;
                case "progress":
                    this.sFn(s, i.progress);
                    break;
                case "error":
                    this.nFn(s, i.error);
                    break;
                case "ready":
                    this.rFn();
                    break;
                default:
                    throw new Error(`unknown message from worker '${e}'`);
            }
        }
        eFn(t, i) {
            const e = this.VDn.get(t);
            if (!e) throw new Error("invalid job ID");
            e.QDn || e.resolve(i), this.VDn.delete(t);
        }
        sFn(t, i) {
            const e = this.VDn.get(t);
            if (!e) throw new Error("invalid job ID");
            !e.QDn && e.ZDn && e.ZDn(i);
        }
        nFn(t, i) {
            const e = this.VDn.get(t);
            if (!e) throw new Error("invalid job ID");
            e.QDn || e.reject(i), this.VDn.delete(t);
        }
        rFn() {
            (this.KDn = !1),
                this.zGt && (this.zGt(), (this.zGt = null), (this.HGt = null), gG.dq("JobSchedulerInit")),
                this.iFn();
        }
        iFn() {
            if (!(this.zDn.length >= this.jDn || this.KDn || this.qDn || this.VDn.size <= this.zDn.length))
                try {
                    this.YDn();
                } catch (t) {
                    (this.qDn = !0),
                        console.error(
                            `[Construct] Failed to create job worker; stopping creating any more (created ${this.zDn.length} so far)`,
                            t
                        );
                }
        }
    }
    gG.Tmt = gG.m(SG);
}
{
    const xG = self.t;
    globalThis.hFn = class extends xG.MV {
        constructor() {
            super(), (this.oFn = null);
        }
        JD() {
            xG._2();
        }
        lmt() {
            xG._2();
        }
        Zn() {
            xG._2();
        }
        qte() {
            xG._2();
        }
        Ote() {
            xG._2();
        }
        FZt() {
            xG._2();
        }
        _Xs() {
            xG._2();
        }
        Fre() {
            xG._2();
        }
    };
}
{
    const MG = self.t;
    MG.h = class extends MG.MV {
        constructor() {
            super(), (this.uAe = new.target), (this.lt = null), (this.p = null), (this.aFn = null);
        }
        Ut() {
            (this.uAe = null), (this.lt = null), (this.p = null);
        }
        lFn(t) {
            MG.Et(t, self.Plugin), (this.lt = t);
        }
        ur() {
            return this.lt;
        }
        uFn(t) {
            MG.yp(t), (this.uAe = t);
        }
        mAe() {
            return this.uAe;
        }
        cFn(t) {
            MG.Et(t, self.v), (this.p = t);
        }
        GetInfo() {
            if (!this.p) throw new Error("plugin must set info");
            return this.p;
        }
        fa(t) {
            MG.vu(t), (this.aFn = t);
        }
        dFn() {
            return this.aFn;
        }
        Gf() {
            return this.lt.Gf();
        }
        Mi() {
            return this.ur().Mi();
        }
        OD(t) {
            return MG.Et(t, self.Jk), MG.m(this.mAe().Ft, this, t);
        }
        st() {
            const t = self.app;
            let i = [["instance-wait-for-signal", "timer"]];
            for (const [e, s] of i) this.lt.TYs(e) && this.lt.ot(e).nt(t.ht(s));
        }
        kt(t, i) {
            MG.vu(t), MG.yp(i), this.lt.jt(t).iee(i);
        }
        dC() {}
        async Sa(t) {}
    };
}
{
    const EG = self.t;
    EG.zt = class extends EG.MV {
        constructor(t, i) {
            EG.Et(t, EG.h),
                EG.Et(i, window.Jk),
                super(),
                (this.fFn = t),
                (this.ke = i),
                (this.mis = null),
                (this.pFn = null);
        }
        Ut() {
            this.mis && (self.app.We().removeEventListener("renderercontextlost", this.mis), (this.mis = null)),
                this.pFn && (self.app.We().removeEventListener("renderercontextrestored", this.pFn), (this.pFn = null)),
                (this.fFn = null),
                (this.ke = null),
                EG.Ut(this);
        }
        wv(t) {
            return EG.Et(t, window.bv), EG.m(this.jf().mAe().Instance, this, t);
        }
        Fe() {
            return this.ke;
        }
        jf() {
            return this.fFn;
        }
        ur() {
            return this.fFn.ur();
        }
        Mi() {
            return this.Fe().Mi();
        }
        yv() {}
        Ge() {
            this.mis ||
                ((this.mis = () => this.je()),
                (this.pFn = () => this.gC()),
                self.app.We().addEventListener("renderercontextlost", this.mis),
                self.app.We().addEventListener("renderercontextrestored", this.pFn));
        }
        je() {}
        gC() {}
        tv() {
            return null;
        }
        ev() {
            return "clamp-to-edge";
        }
        iv() {
            return "clamp-to-edge";
        }
    };
}
{
    const CG = self.t,
        _G = CG.m(CG.Rect, 0, 0, 1, 1),
        TG = CG.m(CG.Bi);
    TG.gn(_G),
        (CG.Bt = class extends CG.MV {
            constructor(t, i) {
                CG.Et(t, CG.zt),
                    CG.Et(i, window.bv),
                    super(),
                    (this.ei = t),
                    (this.Yi = i),
                    (this.Hi = !1),
                    (this.mFn = !1),
                    (this.wFn = !1),
                    (this.gFn = _G),
                    (this.yFn = TG),
                    (this.mis = null),
                    (this.pFn = null);
            }
            Ut() {
                this.mis && (self.app.We().removeEventListener("renderercontextlost", this.mis), (this.mis = null)),
                    this.pFn &&
                        (self.app.We().removeEventListener("renderercontextrestored", this.pFn), (this.pFn = null)),
                    (this.ei = null),
                    (this.Yi = null),
                    CG.Ut(this);
            }
            MM() {}
            Bg() {
                return this.ei;
            }
            Fe() {
                return this.ei.Fe();
            }
            jf() {
                return this.ei.jf();
            }
            ur() {
                return this.ei.ur();
            }
            Ht() {}
            Fy() {}
            hy(t) {}
            Wt(t, i) {}
            yl(t, i, e) {}
            hT(t, i) {}
            Xt(t, i) {
                return !1;
            }
            Mi() {
                return this.Yi.Mi();
            }
            _e() {
                return this.Yi;
            }
            Bs() {}
            xl() {
                return !1;
            }
            Sl() {
                CG._2();
            }
            Cl() {
                CG._2();
            }
            vl() {
                return null;
            }
            RC() {
                const t = this.Yi.qbs();
                if (t && t.Wes()) {
                    const i = t.Uss();
                    return [i.rs(), i.ls()];
                }
                return [100, 100];
            }
            _C() {
                const t = this.Yi.qbs();
                return t && t.Wes() ? t.hn() : null;
            }
            Zbs() {
                const t = this.Yi.qbs();
                return t && t.Wes() ? t.ro() : null;
            }
            XC() {
                const t = this.Yi.qbs();
                return !!t && t.f1t();
            }
            wl() {
                return !1;
            }
            Jn() {
                return this.Zbs();
            }
            Ps() {
                return !1;
            }
            Vs(t) {
                CG._2();
            }
            qi(t, i) {
                CG._2();
            }
            Ml() {
                return null;
            }
            ly(t, i) {
                const e = i.sn,
                    s = this.Yi,
                    n = s.yr(),
                    r = s.oh(),
                    h = s.If(),
                    o = h.Am();
                for (let i = 0; i < o; i++) {
                    const [s, o] = n.kf(e, h._I(i), h.DI(i), r),
                        [a, l] = n.kf(e, h._I(i + 1), h.DI(i + 1), r);
                    t.$n(s, o, a, l);
                }
            }
            Li(t) {
                if ((CG.qm(t, self.Jm), !t)) return null;
                let i = t.Fis();
                return i
                    ? ((this.gFn = t.hn()), (this.yFn = t.ro()), i)
                    : (this.Hi ||
                          ((this.mFn = !0),
                          t
                              .Tis()
                              .then((t) => {
                                  this.mFn = !1;
                              })
                              .catch((t) => {
                                  console.error("Error loading texture:", t), (this.wFn = !0);
                              })),
                      null);
            }
            hn() {
                return this.gFn;
            }
            ro() {
                return this.yFn;
            }
            zl() {
                return this.wFn;
            }
            Os() {}
            $i(t) {
                CG.vu(t);
                let i = 0,
                    e = 0;
                switch (t) {
                    case "top-left":
                        break;
                    case "top":
                        i = 0.5;
                        break;
                    case "top-right":
                        i = 1;
                        break;
                    case "left":
                        e = 0.5;
                        break;
                    case "center":
                        (i = 0.5), (e = 0.5);
                        break;
                    case "right":
                        (i = 1), (e = 0.5);
                        break;
                    case "bottom-left":
                        e = 1;
                        break;
                    case "bottom":
                        (i = 0.5), (e = 1);
                        break;
                    case "bottom-right":
                        (i = 1), (e = 1);
                        break;
                    default:
                        throw new Error("invalid origin");
                }
                this.Yi.Kh(i), this.Yi.Zh(e);
            }
            JI() {
                return null;
            }
            KI(t) {
                CG._2();
            }
            eT(t) {}
            Ge() {
                this.mis ||
                    ((this.mis = () => this.je()),
                    (this.pFn = () => this.gC()),
                    self.app.We().addEventListener("renderercontextlost", this.mis),
                    self.app.We().addEventListener("renderercontextrestored", this.pFn));
            }
            je() {}
            gC() {}
            async Il() {}
        });
}
{
    const IG = self.t;
    IG.Ra = class extends IG.Bt {
        constructor(t, i) {
            super(t, i), (this.bFn = !1), (this.vFn = () => this.Ro());
        }
        Ut() {
            this.bl(!1), (this.vFn = null);
        }
        Ht() {
            this.Yi.De("live-preview") && this.bl(!0);
        }
        SFn() {
            self.app.addEventListener("livepreviewstop", this.vFn);
        }
        xFn() {
            self.app.removeEventListener("livepreviewstop", this.vFn);
        }
        bl(t) {
            if (((t = !!t), this.bFn !== t))
                if (self.app.XB() && t) self.app.qB(this.Mi(), 10);
                else if (((this.bFn = t), this.bFn)) {
                    this.SFn(), this.Tl();
                    this.Yi.lB().nW(!0);
                } else {
                    this.Pl(), this.xFn();
                    const t = this.Yi.bw(),
                        i = t ? t.my() : null;
                    if (i) {
                        if (!i.kl() && !i.sAs() && !this.Yi.rys()) {
                            this.Yi.lB().nW(!1);
                        }
                    } else if (!this.Yi.rys()) {
                        this.Yi.lB().nW(!1);
                    }
                }
        }
        eo() {
            return this.bFn;
        }
        Tl() {}
        Pl() {}
        Ro() {
            this.bl(!1), this.Yi.ze("live-preview", !1);
        }
    };
}
{
    const PG = self.t,
        GG = self.lang,
        AG = new Set([
            "integer",
            "float",
            "percent",
            "angle",
            "text",
            "longtext",
            "check",
            "color",
            "font",
            "combo",
            "animation",
            "dynamiccombo",
            "link",
            "group",
            "info",
            "object",
            "projectfile",
        ]),
        RG = new Set(["for-each-instance", "once-for-type", "for-single-instance-or-type"]),
        kG = new WeakMap();
    window.$t = class t {
        constructor(t, i, e) {
            if ((PG.vu(t), PG.vu(i), !AG.has(t))) throw new Error(`invalid property type '${t}'`);
            if (!i) throw new Error("property id cannot be empty");
            if (
                ((this.dXt = {
                    initialValue: null,
                    $g: 1,
                    Hg: null,
                    ge: null,
                    be: "for-each-instance",
                    items: null,
                    Zs: null,
                    zs: null,
                    ye: !0,
                    minValue: null,
                    maxValue: null,
                    Qr: !0,
                    Kr: !0,
                    Es: "all",
                    hidden: !1,
                    Se: !0,
                    Ce: !1,
                    xe: !0,
                    Xh: null,
                    filter: "",
                    Zr: null,
                    sa: null,
                    $r: "",
                    Yr: "",
                    qr: "",
                    Jr: "",
                }),
                PG.Gat(e)
                    ? ((this.dXt = Object.assign(this.dXt, e)),
                      "color" === t &&
                          PG.vwt(e.initialValue) &&
                          ((this.dXt.initialValue = new PG.nr()), this.dXt.initialValue.Cp(e.initialValue)))
                    : "color" === t && PG.vwt(e)
                      ? ((this.dXt.initialValue = new PG.nr()), this.dXt.initialValue.Cp(e))
                      : (this.dXt.initialValue = e),
                !(
                    ("text" !== t && "longtext" !== t) ||
                    (void 0 !== this.dXt.initialValue && null !== this.dXt.initialValue)
                ))
            ) {
                const t = GG(`.${i}.initial-value`);
                t === PG.u.ia ? (this.dXt.initialValue = "") : (this.dXt.initialValue = t);
            }
            if (
                (void 0 === this.dXt.initialValue && (this.dXt.initialValue = null),
                (this.Osi = t),
                (this.nes = i),
                PG.kDt(this.dXt.Zs),
                (this.Gqt = GG(`.${i}.name`)),
                (this.mns = GG(`.${i}.desc`)),
                (this.MFn = ""),
                "link" === this.Osi && (this.MFn = GG(`.${i}.link-text`)),
                (this.DKs = []),
                (this.EFn = new Map()),
                ("object" !== this.Osi && "projectfile" !== this.Osi) || (this.dXt.initialValue = -1),
                (this.CFn = ""),
                (this.RKs = ""),
                "combo" === this.Osi)
            ) {
                PG._T(this.dXt.items);
                for (let t of this.dXt.items)
                    PG.vu(t),
                        this.EFn.set(t, this.DKs.length),
                        this.DKs.push({ value: t, displayName: GG(`.${i}.items.${t}`) });
            }
            this._Fn();
        }
        _Fn() {
            if (
                (PG.wi(this.dXt.$g),
                "link" === this.Osi && (PG.yp(this.dXt.ge), PG.kDt(this.dXt.Hg), !RG.has(this.dXt.be)))
            )
                throw new Error(`invalid link callback type '${this.dXt.be}'`);
            switch (this.Osi) {
                case "integer":
                case "float":
                case "percent":
                case "angle":
                    PG.PK(this.dXt.initialValue);
                    break;
                case "text":
                case "longtext":
                case "font":
                    PG.vu(this.dXt.initialValue);
                    break;
                case "check":
                    this.dXt.initialValue = !!this.dXt.initialValue;
                    break;
                case "animation":
                    if (null !== this.dXt.initialValue)
                        throw new Error("do not specify initial value for 'animation' property");
                    this.dXt.initialValue = "";
                    break;
                case "color":
                    PG.Et(this.dXt.initialValue, PG.nr);
                    break;
                case "combo":
                    if ((PG.vu(this.dXt.initialValue), !this.dXt.items.includes(this.dXt.initialValue)))
                        throw new Error("combo property initial value not in items list");
                    break;
                case "link":
                case "group":
                    break;
                case "info":
                    PG.yp(this.dXt.zs);
                    break;
                case "dynamiccombo":
                    if ((PG.yp(this.dXt.Zr), PG.yp(this.dXt.sa), null !== this.dXt.initialValue))
                        throw new Error("do not specify initial value for 'dynamiccombo' property");
                    this.dXt.initialValue = "";
            }
        }
        lmt() {
            return this.Osi;
        }
        JD() {
            return this.nes;
        }
        Zn() {
            return this.Gqt;
        }
        Gv() {
            return this.dXt.initialValue;
        }
        Zoe() {
            return this.dXt.Zs;
        }
        qte() {
            return this.mns;
        }
        are() {
            if ("combo" !== this.Osi) throw new Error("not a combo property type");
            return this.DKs;
        }
        sXs(t) {
            if ((PG.vu(t), "combo" !== this.Osi)) throw new Error("not a combo property type");
            for (let i of this.DKs) if (i.value === t) return !0;
            return !1;
        }
        rT(t) {
            if ((PG.vu(t), "combo" !== this.Osi)) throw new Error("not a combo property type");
            for (let i of this.DKs) if (i.value === t) return i.displayName;
            throw new Error("invalid combo item value");
        }
        Kps(t) {
            if ((PG.vu(t), "combo" !== this.Osi)) throw new Error("not a combo property type");
            let i = this.EFn.get(t);
            if (void 0 === i) throw new Error("invalid combo item value");
            return i;
        }
        cae() {
            if ("link" !== this.Osi) throw new Error("not a link property type");
            return this.MFn;
        }
        lae() {
            if ("link" !== this.Osi) throw new Error("not a link property type");
            return this.dXt.ge;
        }
        fae() {
            if ("link" !== this.Osi) throw new Error("not a link property type");
            return this.dXt.be;
        }
        hae() {
            if ("info" !== this.Osi) throw new Error("not an info property type");
            return this.dXt.zs;
        }
        LM() {
            if (!this.TNs()) throw new Error("not a numeric property type");
            return null !== this.dXt.minValue;
        }
        NM() {
            if (!this.TNs()) throw new Error("not a numeric property type");
            return this.dXt.minValue;
        }
        nre() {
            if (!this.TNs()) throw new Error("not a numeric property type");
            return null !== this.dXt.maxValue;
        }
        ore() {
            if (!this.TNs()) throw new Error("not a numeric property type");
            return this.dXt.maxValue;
        }
        Kre() {
            if (!this.TNs()) throw new Error("not a numeric property type");
            return this.dXt.Qr;
        }
        Jre() {
            if (!this.TNs()) throw new Error("not a numeric property type");
            return this.dXt.Kr;
        }
        TNs() {
            return "integer" === this.Osi || "float" === this.Osi || "percent" === this.Osi || "angle" === this.Osi;
        }
        Boe() {
            const t = this.Osi;
            return (
                !!this.dXt.Ce &&
                ("integer" === t ||
                    "float" === t ||
                    "percent" === t ||
                    "angle" === t ||
                    "text" === t ||
                    "longtext" === t ||
                    "check" === t ||
                    "combo" === t ||
                    "animation" === t ||
                    "dynamiccombo" === t ||
                    "color" === t)
            );
        }
        oIs() {
            return this.dXt.xe;
        }
        tre() {
            return this.dXt.ye;
        }
        Joe() {
            return self.app.xXs(this.dXt.Es);
        }
        Fre() {
            return this.dXt.hidden;
        }
        TFn(t) {
            PG.vu(t), (this.CFn = t);
        }
        IFn() {
            return this.CFn;
        }
        dae() {
            if ("object" !== this.Osi) throw new Error("not an object property type");
            return this.dXt.Xh;
        }
        gae() {
            if ("projectfile" !== this.Osi) throw new Error("not a projectfile property type");
            return this.dXt.filter;
        }
        PFn(t) {
            PG.vu(t), (this.RKs = t);
        }
        GFn() {
            return this.RKs;
        }
        aae() {
            if ("link" !== this.Osi) throw new Error("not a link property type");
            return this.dXt.Hg;
        }
        jne() {
            return (
                "integer" === this.Osi ||
                "float" === this.Osi ||
                "percent" === this.Osi ||
                "angle" === this.Osi ||
                "text" === this.Osi
            );
        }
        zne() {
            if ("integer" !== this.Osi && "float" !== this.Osi)
                throw new Error("property does not support a drag speed multiplier");
            return this.dXt.$g;
        }
        rae() {
            if ("dynamiccombo" !== this.Osi) throw new Error("property does not support a comboGetter");
            return this.dXt.Zr;
        }
        oae() {
            if ("dynamiccombo" !== this.Osi) throw new Error("property does not support a comboValidator");
            return this.dXt.sa;
        }
        Hre() {
            return this.dXt.$r;
        }
        Tre() {
            return this.dXt.Yr;
        }
        Lre() {
            return this.dXt.qr;
        }
        Ure() {
            return this.dXt.Jr;
        }
        w_t() {
            return !("link" === this.Osi || "group" === this.Osi || "info" === this.Osi);
        }
        Koe() {
            return !!this.dXt.Se;
        }
        static AFn(i) {
            const e = kG.get(i);
            if (e) return e;
            const s = i.lmt(),
                n = i.JD();
            let r = i.RFn();
            if (PG.Gat(r)) {
                if (
                    ((r = Object.assign(
                        {},
                        {
                            initialValue: null,
                            dragSpeedMultiplier: 1,
                            items: null,
                            minValue: null,
                            maxValue: null,
                            linkCallback: null,
                            callbackType: "for-each-instance",
                            infoCallback: null,
                            allowedPluginIds: null,
                            interpolatable: !1,
                            templatable: !1,
                            filter: null,
                        },
                        r
                    )),
                    (r = {
                        initialValue: r.initialValue,
                        $g: r.dragSpeedMultiplier,
                        items: r.items,
                        minValue: r.minValue,
                        maxValue: r.maxValue,
                        ge: r.linkCallback,
                        be: r.callbackType,
                        zs: r.infoCallback,
                        Xh: r.allowedPluginIds,
                        Ce: r.interpolatable,
                        xe: r.templatable,
                        filter: r.filter,
                    }),
                    "link" === s)
                )
                    if ("for-each-instance" === r.be) {
                        const t = r.ge;
                        r.ge = (i) => t(i.kFn());
                    } else {
                        if ("once-for-type" !== r.be) throw new Error("invalid callbackType");
                        {
                            const t = r.ge;
                            r.ge = (i) => t(i.OFn());
                        }
                    }
                if ("info" === s) {
                    const t = r.zs;
                    r.zs = (i) => t(i.ta().kFn());
                }
            }
            const h = new t(s, n, r);
            return kG.set(i, h), h;
        }
    };
}
{
    const OG = self.t,
        DG = new Set([
            "3d",
            "data-and-storage",
            "html-elements",
            "general",
            "input",
            "media",
            "monetisation",
            "platform-specific",
            "web",
            "other",
        ]),
        FG = new Set(["object", "world"]),
        LG = new Set(["", "module"]);
    window.v = class extends OG.MV {
        constructor(t) {
            OG.vu(t),
                super(),
                (this.nes = t),
                (this.Gqt = ""),
                (this.mns = ""),
                (this.Yqt = "1.0.0.0"),
                (this.DFn = !1),
                (this.uXs = "general"),
                (this.FFn = ""),
                (this.FAe = "http://"),
                (this.LFn = "object"),
                (this.TAe = "icon.svg"),
                (this.OAe = "image/svg+xml"),
                (this.BFn = ""),
                (this.UFn = [
                    "c3runtime/plugin.js",
                    "c3runtime/type.js",
                    "c3runtime/instance.js",
                    "c3runtime/conditions.js",
                    "c3runtime/actions.js",
                    "c3runtime/expressions.js",
                ]),
                (this.NFn = []),
                (this.$Je = !1),
                (this.jFn = !1),
                (this.$Fn = !1),
                (this.zFn = !1),
                (this.VFn = ""),
                (this.WFn = !1),
                (this.Em = null),
                (this.HFn = !1),
                (this.xss = !1),
                (this.IVe = !1),
                (this.KFn = !1),
                (this.dXs = !1),
                (this.qFn = !1),
                (this.XFn = !1),
                (this.YFn = !1),
                (this.JFn = !1),
                (this.ZFn = !1),
                (this.QFn = !1),
                (this.Syn = !1),
                (this.tLn = !0),
                (this.iLn = !0),
                (this.eLn = ""),
                (this.sLn = !0),
                (this.nLn = !1),
                (this.rLn = !1),
                (this.hLn = !1),
                (this.oLn = !1),
                (this.aLn = !1),
                (this.lLn = !1),
                (this.uLn = !1),
                (this.cLn = !1),
                (this.dLn = !1),
                (this.fLn = !1),
                (this.pLn = !1),
                (this.mLn = !1),
                (this.wLn = {}),
                (this.eBs = []),
                (this.gLn = new Map()),
                (this.yLn = []),
                (this.bLn = []),
                (this.vLn = []),
                (this.SLn = []),
                (this.xLn = !1),
                (this.MLn = ""),
                (this.ELn = []),
                (this.CLn = { de: "", objectType: "", Nie: "" }),
                (this._Ln = []),
                (this.TLn = new Map());
        }
        She() {
            return this.nes;
        }
        k(t) {
            OG.vu(t), (this.Gqt = t);
        }
        Zn() {
            return this.Gqt;
        }
        j(t) {
            OG.vu(t), (this.mns = t);
        }
        qte() {
            return this.mns;
        }
        _(t) {
            OG.vu(t), (this.Yqt = t), (this.DFn = !0);
        }
        Ote() {
            return this.Yqt;
        }
        ILn() {
            return this.DFn;
        }
        $(t) {
            OG.vu(t), "form-controls" === t && (t = "html-elements"), (this.uXs = t);
        }
        IXs() {
            return this.uXs;
        }
        q(t) {
            OG.vu(t), (this.FFn = t);
        }
        Ute() {
            return this.FFn;
        }
        tt(t) {
            OG.vu(t), (this.FAe = self.app.lne(t));
        }
        pD() {
            return this.FAe;
        }
        qt(t) {
            OG.vu(t), (this.LFn = t);
        }
        yE() {
            return this.LFn;
        }
        zD(t, i) {
            OG.vu(t), OG.vu(i), (this.TAe = t), (this.OAe = i);
        }
        jAe() {
            return this.TAe;
        }
        RAe() {
            return this.OAe;
        }
        Jt(t) {
            this.$Je = !!t;
        }
        h7() {
            return this.$Je;
        }
        Qt(t) {
            this.jFn = !!t;
        }
        d$() {
            return this.jFn;
        }
        ee(t) {
            this.$Fn = !!t;
        }
        Eie() {
            return this.$Fn;
        }
        Kt(t) {
            this.zFn = !!t;
        }
        Io() {
            return this.zFn;
        }
        Sy(t) {
            OG.vu(t), (this.VFn = t);
        }
        PLn() {
            return this.VFn;
        }
        ov(t) {
            OG.vu(t), (this.eLn = t);
        }
        GLn() {
            return this.eLn;
        }
        zr(t) {
            this.sLn = !!t;
        }
        Jsi() {
            return this.sLn;
        }
        zm(t) {
            this.WFn = !!t;
        }
        To() {
            return this.WFn;
        }
        Um(t) {
            if ((OG._T(t), 0 === t.length)) throw new Error("expected non-empty array");
            this.Em = t;
        }
        ORt() {
            return Array.isArray(this.Em);
        }
        Els() {
            return this.Em;
        }
        JC(t) {
            this.xss = !!t;
        }
        jss() {
            return this.xss;
        }
        Wh(t) {
            this.HFn = !!t;
        }
        aps() {
            return this.HFn;
        }
        xy(t) {
            this.IVe = !!t;
        }
        $F() {
            return this.IVe;
        }
        hv(t) {
            this.KFn = !!t;
        }
        vf() {
            return this.KFn;
        }
        Fs(t) {
            this.dXs = !!t;
        }
        _Xs() {
            return this.dXs;
        }
        Hr(t) {
            this.qFn = !!t;
        }
        ALn() {
            return this.qFn;
        }
        Ur(t) {
            this.XFn = !!t;
        }
        RLn() {
            return this.XFn;
        }
        et(t) {
            this.YFn = !!t;
        }
        gE() {
            return this.YFn;
        }
        Zt(t) {
            this.JFn = !!t;
        }
        nD() {
            return this.JFn;
        }
        Pn(t) {
            this.QFn = !!t;
        }
        jbs() {
            return this.QFn;
        }
        te(t) {
            this.ZFn = !!t;
        }
        voe() {
            return this.ZFn;
        }
        ie(t) {
            this.Syn = !!t;
        }
        wl() {
            return this.Syn;
        }
        kLn(t) {
            this.tLn = !!t;
        }
        Nei() {
            return this.tLn;
        }
        se(t) {
            this.iLn = !!t;
        }
        Koe() {
            return this.iLn;
        }
        re() {
            this.nLn = !0;
        }
        rri() {
            return this.nLn;
        }
        ae() {
            this.rLn = !0;
        }
        hri() {
            return this.rLn;
        }
        le() {
            this.hLn = !0;
        }
        OLn() {
            return this.hLn;
        }
        he() {
            this.oLn = !0;
        }
        ori() {
            return this.oLn;
        }
        oe() {
            this.aLn = !0;
        }
        ari() {
            return this.aLn;
        }
        qs() {
            this.lLn = !0;
        }
        lri() {
            return this.lLn;
        }
        Js() {
            this.uLn = !0;
        }
        cri() {
            return this.uLn;
        }
        Qs() {
            this.cLn = !0;
        }
        fri() {
            return this.cLn;
        }
        Ks(t) {
            this.wLn = t;
        }
        DLn() {
            return this.wLn;
        }
        ce() {
            this.dLn = !0;
        }
        dri() {
            return this.dLn;
        }
        zn() {
            this.fLn = !0;
        }
        pri() {
            return this.fLn;
        }
        Wr() {
            this.pLn = !0;
        }
        mri() {
            return this.pLn;
        }
        ue() {
            this.mLn = !0;
        }
        wri() {
            return this.mLn;
        }
        me(t) {
            OG._T(t), OG.Rm(this.eBs, t), this.gLn.clear();
            for (const t of this.eBs) this.gLn.set(t.JD(), t);
        }
        Doe() {
            return this.eBs;
        }
        cr(t) {
            return OG.vu(t), this.gLn.get(t) ?? null;
        }
        qps(t) {
            return OG.vu(t), this.gLn.has(t);
        }
        Gs(t) {
            const i = OG.m(self.FLn, t);
            return this.yLn.push(i), i;
        }
        zxe() {
            return this.yLn;
        }
        LLn(t) {
            const i = OG.m(self.BLn, t);
            return this.bLn.push(i), i;
        }
        ULn() {
            return this.bLn;
        }
        Nn(t) {
            this.vLn.push(OG.m(self.t_e, t));
        }
        sri() {
            return this.vLn;
        }
        Vr(t, i = "") {
            if ((OG.vu(t), t.startsWith("http:")))
                throw new Error("cannot use insecure remote script dependency, use HTTPS");
            if (!LG.has(i)) throw new Error("invalid type");
            this.SLn.push({ url: t, type: i });
        }
        tAe() {
            return this.SLn;
        }
        NLn(t) {
            this.xLn = !!t;
        }
        jLn() {
            return this.xLn;
        }
        $Ln(t, i) {
            if ((OG.vu(t), !t)) throw new Error("invalid component id");
            OG._T(i), (this.MLn = t), (this.ELn = i);
        }
        aAe() {
            return { hAe: this.MLn, oAe: this.ELn };
        }
        zLn(t) {
            this.UFn = t.slice(0);
        }
        ne(t) {
            OG.vu(t), this.UFn.push(t);
        }
        VLn() {
            const t = this.UFn.slice(0);
            return this.BFn && !t.includes(this.BFn) && t.push(this.BFn), t;
        }
        WLn(t) {
            OG.vu(t), (this.BFn = t);
        }
        Cxe() {
            return this.BFn;
        }
        js(t) {
            this.NFn = t.slice(0);
        }
        HLn() {
            return this.NFn;
        }
        pe(t) {
            OG.x$(t),
                OG.k$(t.de),
                OG.k$(t.objectType),
                OG.k$(t.Nie),
                t.de && (this.CLn.de = t.de),
                t.objectType && (this.CLn.objectType = t.objectType),
                t.Nie && (this.CLn.Nie = t.Nie);
        }
        m_s() {
            return this.CLn;
        }
        fe(t) {
            OG._T(t), (this._Ln = t);
        }
        d_s() {
            return this._Ln;
        }
        tr(t, i) {
            OG.vu(t), OG._T(i), this.TLn.set(t, i);
        }
        XIe(t) {
            return this.TLn.get(t);
        }
        m5s() {
            if (!this.nes) throw new Error("id can not be empty");
            if (!this.Gqt) throw new Error("name can not be empty");
            if (this.Gqt === OG.u.ia)
                throw new Error(
                    `failed to load addon name language string for addon '${this.nes}' - check the base key in the language file JSON is the lowercased plugin ID: "${this.nes.toLowerCase()}"`
                );
            if (!DG.has(this.uXs) && ("system" !== this.uXs || "system" !== this.nes))
                throw new Error(`invalid plugin category '${this.uXs}'`);
            if (!this.FFn) throw new Error("must specify author");
            if (!FG.has(this.LFn)) throw new Error(`invalid plugin type '${this.LFn}'`);
            if (this.FAe && !this.FAe.startsWith("http://") && !this.FAe.startsWith("https://"))
                throw new Error("help URL must begin with http:// or https://");
            if ("world" === this.LFn && this.YFn) throw new Error("plugin type 'world' cannot also be single-global");
            if ("object" === this.LFn && this.JFn) throw new Error("plugin type 'object' cannot support effects");
            if (this.jFn) {
                if ("object" === this.LFn) throw new Error("plugin type 'object' cannot also be rotatable");
                if (this.YFn) throw new Error("single-global plugins cannot also be rotatable");
            }
            if (this.$Je) {
                if ("object" === this.LFn) throw new Error("plugin type 'object' cannot also be resizable");
                if (this.YFn) throw new Error("single-global plugins cannot also be resizable");
            }
            if (this.zFn) {
                if ("object" === this.LFn) throw new Error("plugin type 'object' cannot have a texture");
                if (this.YFn) throw new Error("single-global plugins cannot have a texture");
            } else if (this.VFn) throw new Error("cannot specify default image URL if not using image");
            if (this.WFn) {
                if ("object" === this.LFn) throw new Error("plugin type 'object' cannot have animations");
                if (this.YFn) throw new Error("single-global plugins cannot have animations");
            } else if (this.ORt()) throw new Error("fixed animations mode requires animations");
            if (this.zFn && this.WFn) throw new Error("plugin cannot specify both texture and animations");
            if (this.xss && !this.zFn && !this.WFn)
                throw new Error("plugin cannot be tiled if it doesn't use texture or animations");
            if ("object" === this.LFn && (this.nLn || this.rLn || this.hLn || this.oLn || this.aLn))
                throw new Error("plugin type 'object' cannot use common ACEs");
            OG.HZ(this.eBs, self.$t);
            let t = new Set();
            for (let i of this.eBs) {
                let e = i.JD();
                if (t.has(e)) throw new Error(`duplicate plugin property ID '${e}'`);
                t.add(e);
            }
            if (!this.YFn && this.ELn.length > 0)
                throw new Error("wrapper export properties require plugin to be single-global");
            if (!this.ELn.every((i) => t.has(i))) throw new Error("invalid wrapper export property id");
        }
    };
}
{
    const BG = self.t,
        UG = BG.sj(import.meta.url),
        NG = BG.nj(UG.URL);
    BG.u.ij(NG + "lang"),
        (BG.KLn = function (t, i) {
            BG.Et(t, self.pYs), BG.Et(i, self.v), BG.u.o("plugins._common"), t.AYs(!0);
            const e = self.app,
                s = e.ht("effect"),
                n = e.ht("instance-variable"),
                r = e.ht("layers"),
                h = e.ht("z-order"),
                o = e.ht("template"),
                a = i.DLn();
            let l;
            i.OLn() &&
                (t.$("angle"),
                t.kYs({
                    id: "is-within-angle",
                    c2id: -11,
                    scriptName: "AngleWithin",
                    params: [
                        { id: "within", type: "number", initialValue: 0.5 },
                        { id: "angle", type: "number" },
                    ],
                }),
                t.kYs({
                    id: "is-clockwise-from",
                    c2id: -12,
                    scriptName: "IsClockwiseFrom",
                    params: [{ id: "angle", type: "number" }],
                }),
                t.kYs({
                    id: "is-between-angles",
                    c2id: -13,
                    scriptName: "IsBetweenAngles",
                    params: [
                        { id: "first-angle", type: "number" },
                        { id: "second-angle", type: "number", initialValue: 45 },
                    ],
                }),
                t.FYs({ id: "set-angle", c2id: -8, scriptName: "SetAngle", params: [{ id: "angle", type: "number" }] }),
                t.FYs({
                    id: "rotate-clockwise",
                    c2id: -18,
                    scriptName: "RotateClockwise",
                    params: [{ id: "degrees", type: "number" }],
                }),
                t.FYs({
                    id: "rotate-counter-clockwise",
                    c2id: -19,
                    scriptName: "RotateCounterclockwise",
                    params: [{ id: "degrees", type: "number" }],
                }),
                t.FYs({
                    id: "rotate-toward-angle",
                    c2id: -20,
                    scriptName: "RotateTowardAngle",
                    params: [
                        { id: "degrees", type: "number" },
                        { id: "angle", type: "number" },
                    ],
                }),
                t.FYs({
                    id: "rotate-toward-position",
                    c2id: -21,
                    scriptName: "RotateTowardPosition",
                    params: [
                        { id: "degrees", type: "number" },
                        { id: "x", type: "number" },
                        { id: "y", type: "number" },
                    ],
                }),
                t.FYs({
                    id: "set-angle-toward-position",
                    c2id: -22,
                    scriptName: "SetTowardPosition",
                    params: [
                        { id: "x", type: "number" },
                        { id: "y", type: "number" },
                    ],
                }),
                t.OYs({ id: "angle", c2id: -5, expressionName: "Angle", returnType: "number" })),
                i.ori() &&
                    (t.$("appearance"),
                    t.kYs({ id: "is-visible", c2id: -9, scriptName: "IsVisible" }),
                    t.kYs({
                        id: "compare-opacity",
                        c2id: -10,
                        scriptName: "CompareOpacity",
                        params: [
                            { id: "comparison", type: "cmp" },
                            { id: "opacity", type: "number" },
                        ],
                    }),
                    t.FYs({
                        id: "set-visible",
                        c2id: -15,
                        scriptName: "SetVisible",
                        params: [
                            {
                                id: "visibility",
                                type: "combo",
                                items: ["invisible", "visible", "toggle"],
                                initialValue: "visible",
                            },
                        ],
                    }),
                    t.FYs({
                        id: "set-opacity",
                        c2id: -16,
                        scriptName: "SetOpacity",
                        params: [{ id: "opacity", type: "number", initialValue: 100 }],
                    }),
                    i.voe() &&
                        (t.FYs({
                            id: "set-default-color",
                            scriptName: "SetDefaultColor",
                            params: [{ id: "color", type: "number", initialValue: "rgbEx(0, 0, 0)" }],
                        }),
                        t.OYs({ id: "color-value", expressionName: "ColorValue", returnType: "number" })),
                    t.OYs({ id: "opacity", c2id: -7, expressionName: "Opacity", returnType: "number" })),
                i.nD() &&
                    (t.$("appearance"),
                    t
                        .kYs({
                            id: "is-effect-enabled",
                            scriptName: "IsEffectEnabled",
                            hideInSimplifiedMode: !0,
                            params: [{ id: "effect", type: "objecteffect" }],
                        })
                        .nt(s),
                    t
                        .FYs({
                            id: "set-effect-enabled",
                            c2id: -27,
                            scriptName: "SetEffectEnabled",
                            hideInSimplifiedMode: !0,
                            params: [
                                { id: "mode", type: "combo", items: ["disable", "enable"] },
                                { id: "effect", type: "objecteffect" },
                            ],
                        })
                        .nt(s),
                    t
                        .FYs({
                            id: "set-effect-parameter",
                            c2id: -28,
                            scriptName: "SetEffectParam",
                            hideInSimplifiedMode: !0,
                            params: [
                                { id: "effect", type: "objecteffect" },
                                { id: "parameter-index", type: "number" },
                                { id: "value", type: "number" },
                            ],
                        })
                        .nt(s)),
                i.gE() ||
                    (t.$("instance-variables"),
                    t
                        .kYs({
                            id: "compare-instance-variable",
                            c2id: -7,
                            scriptName: "CompareInstanceVar",
                            params: [
                                { id: "instance-variable", type: "instancevar" },
                                { id: "comparison", type: "cmp" },
                                { id: "value", type: "any" },
                            ],
                        })
                        .nt(n),
                    t
                        .kYs({
                            id: "is-boolean-instance-variable-set",
                            c2id: -8,
                            scriptName: "IsBoolInstanceVarSet",
                            params: [{ id: "instance-variable", type: "instancevarbool" }],
                        })
                        .nt(n),
                    t
                        .kYs({
                            id: "pick-highestlowest",
                            c2id: -20,
                            scriptName: "PickInstVarHiLow",
                            params: [
                                { id: "which", type: "combo", items: ["lowest", "highest"] },
                                { id: "instance-variable", type: "instancevar" },
                            ],
                            isStatic: !0,
                            isInvertible: !1,
                        })
                        .nt(n),
                    t
                        .FYs({
                            id: "set-instvar-value",
                            c2id: -10,
                            scriptName: "SetInstanceVar",
                            params: [
                                { id: "instance-variable", type: "instancevar" },
                                { id: "value", type: "any" },
                            ],
                        })
                        .nt(n),
                    t
                        .FYs({
                            id: "add-to-instvar",
                            c2id: -11,
                            scriptName: "AddInstanceVar",
                            params: [
                                { id: "instance-variable", type: "instancevar" },
                                { id: "value", type: "any", initialValue: 1 },
                            ],
                        })
                        .nt(n),
                    t
                        .FYs({
                            id: "subtract-from-instvar",
                            c2id: -12,
                            scriptName: "SubInstanceVar",
                            params: [
                                { id: "instance-variable", type: "instancevar" },
                                { id: "value", type: "any", initialValue: 1 },
                            ],
                        })
                        .nt(n),
                    t
                        .FYs({
                            id: "set-boolean-instvar",
                            c2id: -13,
                            scriptName: "SetBoolInstanceVar",
                            params: [
                                { id: "instance-variable", type: "instancevarbool" },
                                { id: "value", type: "combo", items: ["false", "true"], initialValue: "true" },
                            ],
                        })
                        .nt(n),
                    t
                        .FYs({
                            id: "toggle-boolean-instvar",
                            c2id: -14,
                            scriptName: "ToggleBoolInstanceVar",
                            params: [{ id: "instance-variable", type: "instancevarbool" }],
                        })
                        .nt(n),
                    t.$("misc"),
                    t.kYs({
                        id: "pick-by-unique-id",
                        c2id: -14,
                        scriptName: "PickByUID",
                        hideInSimplifiedMode: !0,
                        params: [{ id: "unique-id", type: "number" }],
                        isStatic: !0,
                    }),
                    t.kYs({
                        id: "has-tags",
                        scriptName: "HasTags",
                        params: [{ id: "tags", type: "objectinsttags" }],
                        hideInSimplifiedMode: !0,
                    }),
                    t.kYs({ id: "on-created", c2id: -18, scriptName: "OnCreated", isTrigger: !0 }),
                    t.kYs({ id: "on-destroyed", c2id: -19, scriptName: "OnDestroyed", isTrigger: !0 }),
                    t.FYs({ id: "destroy", c2id: -9, scriptName: "Destroy" }),
                    t.FYs({
                        id: "change-tags",
                        params: [
                            { id: "action", type: "combo", items: ["add", "remove"] },
                            { id: "tags", type: "objectinsttags" },
                        ],
                        scriptName: "ChangeTags",
                        hideInSimplifiedMode: !0,
                    }),
                    t.OYs({ id: "count", c2id: -6, expressionName: "Count", returnType: "number" }),
                    t.OYs({
                        id: "pickedcount",
                        c2id: -14,
                        expressionName: "PickedCount",
                        hideInSimplifiedMode: !0,
                        returnType: "number",
                    }),
                    t.OYs({
                        id: "uid",
                        c2id: -9,
                        expressionName: "UID",
                        hideInSimplifiedMode: !0,
                        returnType: "number",
                    }),
                    t.OYs({
                        id: "iid",
                        c2id: -13,
                        expressionName: "IID",
                        hideInSimplifiedMode: !0,
                        returnType: "number",
                    }),
                    "object" !== i.yE() &&
                        (t.FYs({
                            id: "set-from-json",
                            c2id: -30,
                            scriptName: "LoadFromJsonString",
                            hideInSimplifiedMode: !0,
                            params: [{ id: "json", type: "string" }],
                        }),
                        t.OYs({
                            id: "asjson",
                            c2id: -19,
                            expressionName: "AsJSON",
                            hideInSimplifiedMode: !0,
                            returnType: "string",
                        })),
                    t.OYs({
                        id: "objecttypename",
                        expressionName: "ObjectTypeName",
                        hideInSimplifiedMode: !0,
                        returnType: "string",
                    }),
                    t.OYs({ id: "get-tags", expressionName: "Tags", returnType: "string", hideInSimplifiedMode: !0 }),
                    t.OYs({
                        id: "get-tags-count",
                        expressionName: "TagsCount",
                        returnType: "number",
                        hideInSimplifiedMode: !0,
                    }),
                    t.OYs({
                        id: "get-tag-at",
                        expressionName: "TagAt",
                        returnType: "string",
                        params: [{ id: "index", type: "number" }],
                        hideInSimplifiedMode: !0,
                    }),
                    t.kYs({
                        id: "on-instance-signal",
                        scriptName: "OnInstanceSignal",
                        isTrigger: !0,
                        canDebug: !1,
                        params: [{ id: "tag", type: "string", autocompleteId: "instance-signal" }],
                    }),
                    t.FYs({
                        id: "instance-signal",
                        scriptName: "InstanceSignal",
                        params: [{ id: "tag", type: "string", autocompleteId: "instance-signal" }],
                    }),
                    t.FYs({
                        id: "instance-wait-for-signal",
                        scriptName: "InstanceWaitForSignal",
                        isStatic: !0,
                        canBailOut: !0,
                        params: [{ id: "tag", type: "string", autocompleteId: "instance-signal" }],
                    })),
                i.rri() &&
                    (t.$("size-position"),
                    t.kYs({
                        id: "compare-x",
                        c2id: -1,
                        scriptName: "CompareX",
                        params: [
                            { id: "comparison", type: "cmp" },
                            { id: "x-co-ordinate", type: "number" },
                        ],
                    }),
                    t.kYs({
                        id: "compare-y",
                        c2id: -2,
                        scriptName: "CompareY",
                        params: [
                            { id: "comparison", type: "cmp" },
                            { id: "y-co-ordinate", type: "number" },
                        ],
                    }),
                    t.kYs({ id: "is-on-screen", c2id: -3, scriptName: "IsOnScreen" }),
                    t.kYs({ id: "is-outside-layout", c2id: -4, scriptName: "IsOutsideLayout" }),
                    t.kYs({
                        id: "pick-nearestfurthest",
                        c2id: -15,
                        scriptName: "PickDistance",
                        params: [
                            { id: "which", type: "combo", items: ["nearest", "furthest"] },
                            { id: "x", type: "number" },
                            { id: "y", type: "number" },
                        ],
                        isStatic: !0,
                        isInvertible: !1,
                    }),
                    t.FYs({ id: "set-x", c2id: -1, scriptName: "SetX", params: [{ id: "x", type: "number" }] }),
                    t.FYs({ id: "set-y", c2id: -2, scriptName: "SetY", params: [{ id: "y", type: "number" }] }),
                    t.FYs({
                        id: "set-position",
                        c2id: -3,
                        scriptName: "SetPos",
                        params: [
                            { id: "x", type: "number" },
                            { id: "y", type: "number" },
                        ],
                    }),
                    t.FYs({
                        id: "set-position-to-another-object",
                        c2id: -4,
                        scriptName: "SetPosToObject",
                        params: [
                            { id: "object", type: "object" },
                            { id: "image-point-optional", type: "any" },
                        ],
                    }),
                    i.OLn() &&
                        t.FYs({
                            id: "move-forward",
                            c2id: -17,
                            scriptName: "MoveForward",
                            params: [{ id: "distance", type: "number", initialValue: 1 }],
                        }),
                    t.FYs({
                        id: "move-at-angle",
                        c2id: -23,
                        scriptName: "MoveAtAngle",
                        params: [
                            { id: "angle", type: "number" },
                            { id: "distance", type: "number", initialValue: 1 },
                        ],
                    }),
                    t.OYs({ id: "x", c2id: -1, expressionName: "X", returnType: "number" }),
                    t.OYs({ id: "y", c2id: -2, expressionName: "Y", returnType: "number" }),
                    t.$("time"),
                    t.OYs({ id: "dt", c2id: -8, expressionName: "dt", returnType: "number" })),
                i.hri() &&
                    (t.$("size-position"),
                    t.kYs({
                        id: "compare-width",
                        c2id: -5,
                        scriptName: "CompareWidth",
                        params: [
                            { id: "comparison", type: "cmp" },
                            { id: "width", type: "number" },
                        ],
                    }),
                    t.kYs({
                        id: "compare-height",
                        c2id: -6,
                        scriptName: "CompareHeight",
                        params: [
                            { id: "comparison", type: "cmp" },
                            { id: "height", type: "number" },
                        ],
                    }),
                    t.FYs({
                        id: "set-width",
                        c2id: -5,
                        scriptName: "SetWidth",
                        params: [{ id: "width", type: "number" }],
                    }),
                    t.FYs({
                        id: "set-height",
                        c2id: -6,
                        scriptName: "SetHeight",
                        params: [{ id: "height", type: "number" }],
                    }),
                    t.FYs({
                        id: "set-size",
                        c2id: -7,
                        scriptName: "SetSize",
                        params: [
                            { id: "width", type: "number" },
                            { id: "height", type: "number" },
                        ],
                    }),
                    t.OYs({ id: "width", c2id: -3, expressionName: "Width", returnType: "number" }),
                    t.OYs({ id: "height", c2id: -4, expressionName: "Height", returnType: "number" }),
                    t.OYs({
                        id: "bboxleft",
                        c2id: -15,
                        expressionName: "BBoxLeft",
                        hideInSimplifiedMode: !0,
                        returnType: "number",
                    }),
                    t.OYs({
                        id: "bboxtop",
                        c2id: -16,
                        expressionName: "BBoxTop",
                        hideInSimplifiedMode: !0,
                        returnType: "number",
                    }),
                    t.OYs({
                        id: "bboxright",
                        c2id: -17,
                        expressionName: "BBoxRight",
                        hideInSimplifiedMode: !0,
                        returnType: "number",
                    }),
                    t.OYs({
                        id: "bboxbottom",
                        c2id: -18,
                        expressionName: "BBoxBottom",
                        hideInSimplifiedMode: !0,
                        returnType: "number",
                    }),
                    t.OYs({
                        id: "bboxmidx",
                        expressionName: "BBoxMidX",
                        hideInSimplifiedMode: !0,
                        returnType: "number",
                    }),
                    t.OYs({
                        id: "bboxmidy",
                        expressionName: "BBoxMidY",
                        hideInSimplifiedMode: !0,
                        returnType: "number",
                    })),
                i.ari() &&
                    (t.$("z-order"),
                    t
                        .kYs({
                            id: "is-on-layer",
                            c2id: -16,
                            scriptName: "IsOnLayer",
                            params: [{ id: "layer", type: "layer" }],
                        })
                        .nt(r),
                    t
                        .kYs({
                            id: "pick-topbottom",
                            c2id: -17,
                            scriptName: "PickTopBottom",
                            params: [{ id: "which", type: "combo", items: ["top", "bottom"] }],
                            isStatic: !0,
                        })
                        .nt(h),
                    t.FYs({ id: "move-to-top", c2id: -24, scriptName: "MoveToTop" }).nt(h),
                    t.FYs({ id: "move-to-bottom", c2id: -25, scriptName: "MoveToBottom" }).nt(h),
                    t
                        .FYs({
                            id: "move-to-layer",
                            c2id: -26,
                            scriptName: "MoveToLayer",
                            params: [{ id: "layer", type: "layer" }],
                        })
                        .nt(r),
                    t
                        .FYs({
                            id: "move-to-object",
                            c2id: -29,
                            scriptName: "ZMoveToObject",
                            params: [
                                { id: "where", type: "combo", items: ["in-front", "behind"] },
                                { id: "object", type: "object" },
                            ],
                        })
                        .nt(h),
                    t.OYs({ id: "layernumber", c2id: -10, expressionName: "LayerNumber", returnType: "number" }).nt(r),
                    t.OYs({ id: "layername", c2id: -11, expressionName: "LayerName", returnType: "string" }).nt(r),
                    t
                        .OYs({
                            id: "zindex",
                            c2id: -12,
                            expressionName: "ZIndex",
                            hideInSimplifiedMode: !0,
                            returnType: "number",
                        })
                        .nt(h),
                    i.Eie() &&
                        (t.kYs({
                            id: "compare-z-elevation",
                            scriptName: "CompareZElevation",
                            hideInSimplifiedMode: !0,
                            params: [
                                { id: "which", type: "combo", items: ["z-elevation", "total-z-elevation"] },
                                { id: "comparison", type: "cmp" },
                                { id: "z-elevation", type: "number" },
                            ],
                        }),
                        t.FYs({
                            id: "set-z-elevation",
                            scriptName: "SetZElevation",
                            hideInSimplifiedMode: !0,
                            params: [{ id: "z", type: "number" }],
                        }),
                        t.OYs({
                            id: "z-elevation",
                            expressionName: "ZElevation",
                            hideInSimplifiedMode: !0,
                            returnType: "number",
                        }),
                        t.OYs({
                            id: "total-z-elevation",
                            expressionName: "TotalZElevation",
                            hideInSimplifiedMode: !0,
                            returnType: "number",
                        }))),
                i.mri() &&
                    (t.$("collisions"),
                    t.kYs({
                        id: "on-collision-with-another-object",
                        c2id: 0,
                        scriptName: "OnCollision",
                        params: [{ id: "object", type: "object" }],
                        isFakeTrigger: !0,
                        canDebug: !0,
                        isStatic: !0,
                        highlight: !0,
                    }),
                    t.kYs({
                        id: "is-overlapping-another-object",
                        c2id: 1,
                        scriptName: "IsOverlapping",
                        params: [{ id: "object", type: "object" }],
                    }),
                    t.kYs({
                        id: "is-overlapping-at-offset",
                        c2id: 9,
                        scriptName: "IsOverlappingOffset",
                        hideInSimplifiedMode: !0,
                        params: [
                            { id: "object", type: "object" },
                            { id: "offset-x", type: "number" },
                            { id: "offset-y", type: "number" },
                        ],
                    })),
                i.dri() &&
                    (t.$("hierarchy"),
                    t.kYs({ id: "on-hierarchy-ready", scriptName: "OnHierarchyReady", isTrigger: !0 }),
                    t.kYs({ id: "has-parent", scriptName: "HasParent", hideInSimplifiedMode: !0 }),
                    t.kYs({ id: "has-children", scriptName: "HasChildren", hideInSimplifiedMode: !0 }),
                    t.kYs({
                        id: "pick-parent",
                        scriptName: "PickParent",
                        isStatic: !0,
                        isInvertible: !1,
                        hideInSimplifiedMode: !0,
                        params: [
                            { id: "parent", type: "object", allowedPluginIds: ["<scene-graph>"] },
                            { id: "which", type: "combo", items: ["own", "all", "top"] },
                        ],
                    }),
                    t.kYs({
                        id: "pick-children",
                        scriptName: "PickChildren",
                        isStatic: !0,
                        isInvertible: !1,
                        hideInSimplifiedMode: !0,
                        params: [
                            { id: "child", type: "object", allowedPluginIds: ["<scene-graph>"] },
                            { id: "which", type: "combo", items: ["own", "all", "bottom"] },
                        ],
                    }),
                    t.kYs({
                        id: "pick-nth-child",
                        scriptName: "PickNthChild",
                        isStatic: !0,
                        isInvertible: !1,
                        hideInSimplifiedMode: !0,
                        params: [
                            { id: "child", type: "object", allowedPluginIds: ["<scene-graph>"] },
                            { id: "index-type", type: "combo", items: ["all", "filtered"] },
                            { id: "instance", type: "number" },
                        ],
                    }),
                    t.kYs({
                        id: "compare-child-count",
                        scriptName: "CompareChildCount",
                        hideInSimplifiedMode: !0,
                        params: [
                            { id: "which", type: "combo", items: ["own", "all"] },
                            { id: "comparison", type: "cmp" },
                            { id: "count", type: "number" },
                        ],
                    }),
                    t.FYs({
                        id: "add-child",
                        scriptName: "AddChild",
                        hideInSimplifiedMode: !0,
                        params: [
                            { id: "child", type: "object", allowedPluginIds: ["<scene-graph>"] },
                            { id: "transform-x", type: "boolean", initialValue: "true" },
                            { id: "transform-y", type: "boolean", initialValue: "true" },
                            { id: "transform-w", type: "boolean", initialValue: "true" },
                            { id: "transform-h", type: "boolean", initialValue: "true" },
                            { id: "transform-a", type: "boolean", initialValue: "true" },
                            { id: "transform-o", type: "boolean", initialValue: "false" },
                            { id: "transform-z-elevation", type: "boolean", initialValue: "true" },
                            { id: "transform-visibility", type: "boolean", initialValue: "false" },
                            { id: "destroy-with-parent", type: "boolean" },
                        ],
                    }),
                    t.FYs({
                        id: "remove-child",
                        scriptName: "RemoveChild",
                        hideInSimplifiedMode: !0,
                        params: [{ id: "child", type: "object", allowedPluginIds: ["<scene-graph>"] }],
                    }),
                    t.FYs({ id: "remove-from-parent", scriptName: "RemoveFromParent", hideInSimplifiedMode: !0 }),
                    t.OYs({
                        id: "parent-uid",
                        expressionName: "ParentUID",
                        hideInSimplifiedMode: !0,
                        returnType: "number",
                    }),
                    t.OYs({
                        id: "child-count",
                        expressionName: "ChildCount",
                        hideInSimplifiedMode: !0,
                        returnType: "number",
                    }),
                    t.OYs({
                        id: "all-child-count",
                        expressionName: "AllChildCount",
                        hideInSimplifiedMode: !0,
                        returnType: "number",
                    })),
                i.pri() &&
                    (t.$("mesh"),
                    t.FYs({
                        id: "set-mesh-size",
                        scriptName: "SetMeshSize",
                        hideInSimplifiedMode: !0,
                        params: [
                            { id: "cols", type: "number" },
                            { id: "rows", type: "number" },
                        ],
                    }),
                    t.FYs({
                        id: "set-mesh-point",
                        scriptName: "SetMeshPoint",
                        hideInSimplifiedMode: !0,
                        params: [
                            { id: "col", type: "number" },
                            { id: "row", type: "number" },
                            { id: "mode", type: "combo", items: ["absolute", "relative"] },
                            { id: "posx", type: "number" },
                            { id: "posy", type: "number" },
                            { id: "z-elevation", type: "number" },
                            { id: "texx", type: "number", initialValue: "-1" },
                            { id: "texy", type: "number", initialValue: "-1" },
                        ],
                    }),
                    t.OYs({
                        id: "mesh-columns",
                        expressionName: "MeshColumns",
                        hideInSimplifiedMode: !0,
                        returnType: "number",
                    }),
                    t.OYs({
                        id: "mesh-rows",
                        expressionName: "MeshRows",
                        hideInSimplifiedMode: !0,
                        returnType: "number",
                    })),
                i.lri() &&
                    (t.$("html-element"),
                    t.kYs({ id: "is-visible", scriptName: "IsVisible" }),
                    (l = {
                        id: "set-visible",
                        scriptName: "SetVisible",
                        params: [{ id: "visibility", type: "combo", items: ["invisible", "visible", "toggle"] }],
                    }),
                    a.hasOwnProperty("set-visible") && (l.c2id = a["set-visible"]),
                    t.FYs(l),
                    (l = {
                        id: "set-css-style",
                        scriptName: "SetCSSStyle",
                        hideInSimplifiedMode: !0,
                        params: [
                            { id: "property-name", type: "string", initialValue: '"border"' },
                            { id: "value", type: "string", initialValue: '"1px solid red"' },
                        ],
                    }),
                    a.hasOwnProperty("set-css-style") && (l.c2id = a["set-css-style"]),
                    t.FYs(l),
                    t.FYs({
                        id: "set-elem-attribute",
                        scriptName: "SetElemAttribute",
                        hideInSimplifiedMode: !0,
                        params: [
                            { id: "attribute-name", type: "string" },
                            { id: "attribute-value", type: "any", initialValue: '""' },
                        ],
                    }),
                    t.FYs({
                        id: "remove-elem-attribute",
                        scriptName: "RemoveElemAttribute",
                        hideInSimplifiedMode: !0,
                        params: [{ id: "attribute-name", type: "string" }],
                    })),
                i.cri() &&
                    (t.$("html-element"),
                    t.kYs({ id: "is-focused", scriptName: "IsFocused" }),
                    (l = { id: "set-focused", scriptName: "SetFocus", hideInSimplifiedMode: !0 }),
                    a.hasOwnProperty("set-focused") && (l.c2id = a["set-focused"]),
                    t.FYs(l),
                    (l = { id: "set-unfocused", scriptName: "SetBlur", hideInSimplifiedMode: !0 }),
                    a.hasOwnProperty("set-unfocused") && (l.c2id = a["set-unfocused"]),
                    t.FYs(l)),
                i.fri() &&
                    (t.$("html-element"),
                    t.kYs({ id: "is-enabled", scriptName: "IsEnabled" }),
                    (l = {
                        id: "set-enabled",
                        scriptName: "SetEnabled",
                        params: [{ id: "mode", type: "combo", items: ["disabled", "enabled"] }],
                    }),
                    a.hasOwnProperty("set-enabled") && (l.c2id = a["set-enabled"]),
                    t.FYs(l)),
                i.wri() &&
                    (t.$("template"),
                    t.OYs({ id: "template-name", expressionName: "TemplateName", returnType: "string" }).nt(o)),
                BG.u.it(),
                t.AYs(!1);
        });
}
{
    const jG = self.t,
        $G = self.$t,
        zG = self.mVe,
        VG = (new Set(["default", "npm", "pgb"]), new Set(["all", "android", "ios", "windows"])),
        WG = { id: "", version: "", platform: "all" };
    class HG {
        constructor(t, i) {
            jG.vu(t), jG.vu(i), (this.Gqt = t), (this.Fvs = i);
        }
        qLn() {
            return "";
        }
        ppe() {
            return "";
        }
        kk(t) {
            return this.Fvs;
        }
        Zn() {
            return this.Gqt;
        }
        yrn() {
            return !0;
        }
        W5s(t) {
            return jG.Et(t, self.Ga), [this.Zn(), this.kk(t)];
        }
    }
    class KG extends HG {
        constructor(t, i, e) {
            jG.Et(e, $G), jG.Et(t, jG.h), super(i, ""), (this.Wjs = e), (this.lt = t), (this.XLn = !1);
        }
        qLn() {
            return this.lt.ur().Zn();
        }
        ppe() {
            return this.Wjs.Zn();
        }
        YLn() {
            this.XLn = !0;
        }
        yrn() {
            return !this.XLn;
        }
        kk(t) {
            return t.Iei(this.lt).Ne(this.Wjs.JD());
        }
    }
    class qG extends HG {
        constructor(t, i, e, s) {
            super(e, s), (this.lt = t), (this.JLn = i);
        }
        qLn() {
            return this.lt.ur().Zn();
        }
        nxe() {
            return this.JLn.nxe();
        }
        W5s(t) {
            return jG.Et(t, self.Ga), [this.Zn(), this.kk(t), this.nxe()];
        }
    }
    window.FLn = class extends jG.MV {
        constructor(t) {
            if (
                (super(),
                (t = Object.assign({}, WG, t)),
                jG.vu(t.id),
                jG.vu(t.version),
                jG.vu(t.platform),
                jG.Pce(t.ZLn),
                !t.id)
            )
                throw new Error("id cannot be empty");
            if (!VG.has(t.platform)) throw new Error("invalid platform");
            let i = t.Nie;
            if (
                (i instanceof window.SDK.IPluginBase && (i = t.Nie.QLn()),
                jG.qm(i, jG.h),
                (this.nes = t.id),
                (this.Yqt = t.version),
                (this.tBn = t.platform),
                (this.iBn = []),
                (this.eBn = []),
                t.ZLn)
            )
                for (const e of t.ZLn) {
                    jG._T(e);
                    let [t, s] = e;
                    s instanceof window.SDK.PluginProperty && (s = $G.AFn(s)), this.Rs(i, t, s);
                }
        }
        She() {
            return this.nes;
        }
        Ote() {
            return this.Yqt;
        }
        FZt() {
            return this.M5t;
        }
        nxe() {
            return this.tBn;
        }
        sBn(t) {
            if ((jG.Et(t, self.Ga), this.iBn.length > 0)) {
                const i = [];
                for (const e of this.iBn) {
                    const s = e.W5s(t);
                    if (e.yrn()) {
                        const t = s[1].toString();
                        if (!("" !== t.trim() || (t && jG.zBe(t))))
                            return zG.fVe(self.ej("ui.export.cordova-variable-required", e.ppe(), e.qLn()));
                    }
                    i.push(s);
                }
                return zG.Ok(i);
            }
            return zG.Ok(null);
        }
        nBn(t) {
            if ((jG.Et(t, self.Ga), this.eBn.length > 0)) {
                const i = [];
                for (const e of this.eBn) i.push(e.W5s(t));
                return zG.Ok(i);
            }
            return zG.Ok(null);
        }
        Rs(t, i, e) {
            jG.Et(t, jG.h), jG.Et(e, $G), jG.vu(i);
            const s = jG.m(KG, t, i, e);
            return this.iBn.push(s), s;
        }
        _s(t, i, e) {
            jG.Et(t, jG.h), jG.vu(i), jG.vu(e);
            const s = jG.m(qG, t, this, i, e);
            return this.eBn.push(s), s;
        }
        rBn(t, i) {
            jG.vu(t), jG.vu(i);
            const e = jG.m(HG, t, i);
            return this.iBn.push(e), e;
        }
        ur() {
            return this.lt;
        }
    };
}
{
    const XG = self.t,
        YG = new Set(["all", "android", "ios"]),
        JG = { src: "", target: "", platform: "all" };
    window.BLn = class extends XG.MV {
        constructor(t) {
            if (
                (super(),
                (t = Object.assign({}, JG, t)),
                XG.vu(t.src),
                XG.vu(t.target),
                XG.vu(t.platform),
                !YG.has(t.platform))
            )
                throw new Error("invalid platform");
            (this.hBn = t.src), (this.Hci = t.target), (this.tBn = t.platform);
        }
        oBn() {
            return this.hBn;
        }
        aBn() {
            return this.Hci;
        }
        nxe() {
            return this.tBn;
        }
    };
}
{
    const ZG = self.t,
        QG = new Set([
            "copy-to-output",
            "external-script",
            "external-dom-script",
            "external-runtime-script",
            "external-css",
            "wrapper-extension",
        ]),
        tA = new Set(["", "module"]),
        iA = { filename: "", Bh: "", lBn: "", type: "copy-to-output", platform: "all" };
    window.t_e = class extends ZG.MV {
        constructor(t) {
            if (
                (super(),
                (t = Object.assign({}, iA, t)),
                ZG.vu(t.filename),
                ZG.k$(t.Bh),
                ZG.k$(t.lBn),
                ZG.vu(t.type),
                ZG.vu(t.platform),
                !t.filename)
            )
                throw new Error("filename cannot be empty");
            if (!tA.has(t.lBn)) throw new Error("invalid script type");
            if (!QG.has(t.type)) throw new Error("invalid dependency type");
            if (!t.platform) throw new Error("platform cannot be empty");
            if (
                ((this.CIs = t.filename),
                (this.uBn = t.Bh),
                (this.cBn = t.lBn),
                (this.Osi = t.type),
                (this.tBn = t.platform),
                "external-script" === this.Osi && (this.Osi = "external-dom-script"),
                !this.uBn)
            )
                if (this.Osi.endsWith("-script")) this.uBn = "application/javascript";
                else if ("external-css" === this.Osi) this.uBn = "text/css";
                else {
                    if ("wrapper-extension" !== this.Osi)
                        throw new Error(`file dependency '${this.CIs}' must specify a fileType`);
                    this.uBn = "application/octet-stream";
                }
        }
        Pa() {
            return this.CIs;
        }
        dBn() {
            return this.uBn;
        }
        mxe() {
            return this.cBn;
        }
        lmt() {
            return this.Osi;
        }
        nxe() {
            return this.tBn;
        }
    };
}
{
    const eA = self.t,
        sA = "#00768E",
        nA = new Set([
            "CORDOVAIAP",
            "IAP",
            "Multiplayer",
            "admob",
            "advert",
            "pubcenter",
            "iad",
            "XboxLive",
            "InstantGames",
        ]);
    window.Plugin = class extends globalThis.hFn {
        constructor(t, i) {
            eA.Et(t, eA.h),
                super(),
                (this.hmn = t),
                (this.p = this.hmn.GetInfo()),
                (this.fBn = eA.m(self.pYs)),
                (this.M5t = i.source),
                (this.UFn = new Map()),
                (this.pBn = null),
                (this.Uas = null),
                (this.Vas = null),
                (this.Las = null),
                (this.mBn = null),
                (this.wBn = null),
                (this.gBn = null),
                (this.yBn = null),
                this.p.m5s(),
                this.hmn.lFn(this),
                i.bBn &&
                    (this.pBn = eA.m(eA.ti.KAe, self.app, null, {
                        name: "plugin-" + this.JD(),
                        color: sA,
                        o8e: i.bBn,
                    }));
        }
        Ut() {
            this.hmn.Ut(), (this.hmn = null), (this.p = null), this.fBn.Ut(), (this.fBn = null), this.UFn.clear();
        }
        vBn(t) {
            eA.x$(t), eA.KLn(this.fBn, this.p), eA.u.o("plugins." + this.JD().toLowerCase());
            const i = !!this.p._Xs();
            i && eA.u.As(!1);
            for (let [i, e] of Object.entries(t)) {
                if ("$schema" === i) continue;
                this.fBn.$(i);
                let t = e.conditions,
                    s = e.actions,
                    n = e.expressions;
                if (t) for (let i of t) this.fBn.kYs(i);
                if (s) for (let t of s) this.fBn.FYs(t);
                if (n) for (let t of n) this.fBn.OYs(t);
            }
            i && eA.u.As(!0), this.fBn.PYs(), eA.u.it(), this.hmn.st(), this.SBn();
        }
        SBn() {
            const t = [],
                i = [],
                e = [];
            this.dri() &&
                (t.push(
                    ["has-parent", "scene-graph"],
                    ["has-children", "scene-graph"],
                    ["pick-parent", "scene-graph"],
                    ["pick-children", "scene-graph"],
                    ["pick-nth-child", "scene-graph"],
                    ["compare-child-count", "scene-graph"]
                ),
                i.push(
                    ["add-child", "scene-graph"],
                    ["remove-child", "scene-graph"],
                    ["remove-from-parent", "scene-graph"]
                ),
                e.push(
                    ["parent-uid", "scene-graph"],
                    ["child-count", "scene-graph"],
                    ["all-child-count", "scene-graph"]
                )),
                this.pri() &&
                    (i.push(["set-mesh-size", "mesh"], ["set-mesh-point", "mesh"]),
                    e.push(["mesh-columns", "mesh"], ["mesh-rows", "mesh"]));
            const s = self.app;
            for (const [i, e] of t) this.rt(i).nt(s.ht(e));
            for (const [t, e] of i) this.ot(t).nt(s.ht(e));
            for (const [t, i] of e) this.ct(t).nt(s.ht(i));
        }
        JD() {
            return this.p.She();
        }
        lmt() {
            return "plugin";
        }
        Zn() {
            return this.p.Zn();
        }
        qte() {
            return this.p.qte();
        }
        Ote() {
            return this.p.Ote();
        }
        S_s() {
            return 1;
        }
        IXs() {
            return this.p.IXs();
        }
        Ute() {
            return this.p.Ute();
        }
        pD() {
            return this.p.pD();
        }
        FZt() {
            return this.M5t;
        }
        yE() {
            return this.p.yE();
        }
        d$() {
            return this.p.d$();
        }
        h7() {
            return this.p.h7();
        }
        gE() {
            return this.p.gE();
        }
        Eie() {
            return this.p.Eie();
        }
        Jsi() {
            return this.p.Jsi();
        }
        lws() {
            return "html-elements" === this.IXs();
        }
        Io() {
            return this.p.Io();
        }
        Als() {
            return null;
        }
        Gls() {
            return Promise.resolve([]);
        }
        To() {
            return this.p.To();
        }
        ORt() {
            return this.p.ORt();
        }
        Els() {
            return this.p.Els();
        }
        jss() {
            return this.p.jss();
        }
        aps() {
            return this.p.aps();
        }
        $F() {
            return this.p.$F();
        }
        vf() {
            return this.p.vf();
        }
        _Xs() {
            return this.p._Xs();
        }
        xBn() {
            this.p.Fs(!0);
        }
        ALn() {
            return this.p.ALn();
        }
        RLn() {
            return this.p.RLn();
        }
        Fre() {
            return this._Xs() || (this.RLn() && !self.app.MBn());
        }
        nD() {
            return this.p.nD();
        }
        jbs() {
            return this.p.jbs();
        }
        voe() {
            return this.p.voe();
        }
        wl() {
            return this.p.wl();
        }
        tD() {
            return !this.gE();
        }
        sD() {
            return !this.gE() && "world" === this.yE();
        }
        jcs() {
            return "object" === this.yE() && !this.gE();
        }
        rri() {
            return this.p.rri();
        }
        hri() {
            return this.p.hri();
        }
        OLn() {
            return this.p.OLn();
        }
        ori() {
            return this.p.ori();
        }
        ari() {
            return this.p.ari();
        }
        lri() {
            return this.p.lri();
        }
        cri() {
            return this.p.cri();
        }
        fri() {
            return this.p.fri();
        }
        dri() {
            return this.p.dri();
        }
        hU() {
            return this.dri();
        }
        pri() {
            return this.p.pri();
        }
        EU() {
            return this.pri();
        }
        mri() {
            return this.p.mri();
        }
        wri() {
            return this.p.wri();
        }
        Doe() {
            return this.p.Doe();
        }
        cr(t) {
            eA.vu(t);
            const i = this.p.cr(t);
            if (!i) throw new Error(`plugin property id '${t}' not found`);
            return i;
        }
        qps(t) {
            return eA.vu(t), this.p.qps(t);
        }
        zxe() {
            return this.p.zxe();
        }
        ULn() {
            return this.p.ULn();
        }
        EBn() {
            return this.p.jLn();
        }
        aAe() {
            return this.p.aAe();
        }
        WZ() {
            return this.hmn;
        }
        CBn() {
            return `plugins/${this.JD()}/`;
        }
        _Bn() {
            return eA.xis.t_s() + this.CBn();
        }
        Gxe() {
            return !!this.Cxe();
        }
        Cxe() {
            return this.p.Cxe();
        }
        async pxe(t, i) {
            eA._2();
        }
        async wxe(t, i, e) {
            eA._2();
        }
        sri() {
            return this.p.sri();
        }
        tAe() {
            return this.p.tAe();
        }
        m_s() {
            return this.p.m_s();
        }
        d_s() {
            return this.p.d_s();
        }
        Nei() {
            return this.p.Nei() && "dev" !== this.FZt();
        }
        Koe() {
            return this.p.Koe();
        }
        Rmn() {
            eA._2();
        }
        RAe() {
            return this.p.RAe();
        }
        TBn() {
            return "image/svg+xml" === this.RAe();
        }
        IBn() {
            !this.pBn &&
                this.TBn() &&
                (this.pBn = eA.m(eA.ti.KAe, self.app, this.Rmn(), { name: "plugin-" + this.JD(), color: sA }));
        }
        Gf() {
            if ((this.IBn(), !this.pBn)) throw new Error("no svg icon");
            return this.pBn.aEs();
        }
        KB() {
            return (
                this.Uas ||
                    (this.IBn(),
                    this.pBn
                        ? (this.Uas = this.pBn.KB())
                        : (this.Uas = eA.ti.zrt.XAe(this.Rmn(), self.app.Ent(), { Rf: this.TBn() }))),
                this.Uas
            );
        }
        Iue() {
            return (
                this.Vas ||
                    (this.IBn(),
                    this.pBn
                        ? (this.Vas = this.pBn.Iue())
                        : (this.Vas = eA.ti.zrt.XAe(this.Rmn(), self.app.bet(), { Rf: this.TBn() }))),
                this.Vas
            );
        }
        Wos() {
            return (
                this.Las ||
                    (this.IBn(),
                    this.pBn
                        ? (this.Las = this.pBn.Wos())
                        : (this.Las = eA.ti.zrt.XAe(this.Rmn(), self.app.IMt(), { Rf: this.TBn() }))),
                this.Las
            );
        }
        pps(t) {
            switch ((eA.vu(t), t)) {
                case "small":
                    return this.KB();
                case "medium":
                    return this.Iue();
                case "large":
                    return this.Wos();
                default:
                    throw new Error("invalid icon size specifier");
            }
        }
        nus() {
            return (
                this.mBn ||
                    ((this.mBn = eA.ti.zrt.mF(null, self.app.Ent(), { name: this.JD() + "-family" })),
                    this.mBn.Mde(),
                    this.mBn._de([
                        this.KB(),
                        { icon: self.app.ht("family-overlay-mask"), type: "mask" },
                        self.app.ht("family-overlay"),
                    ])),
                this.mBn
            );
        }
        rus() {
            return (
                this.wBn ||
                    ((this.wBn = eA.ti.zrt.mF(null, self.app.bet(), { name: this.JD() + "-family" })),
                    this.wBn.Mde(),
                    this.wBn._de([
                        this.Iue(),
                        { icon: self.app.krt("family-overlay-mask"), type: "mask" },
                        self.app.krt("family-overlay"),
                    ])),
                this.wBn
            );
        }
        hus() {
            return (
                this.gBn ||
                    ((this.gBn = eA.ti.zrt.mF(null, self.app.IMt(), { name: this.JD() + "-family" })),
                    this.gBn.Mde(),
                    this.gBn._de([
                        this.Wos(),
                        { icon: self.app.lcs("family-overlay-mask"), type: "mask" },
                        self.app.lcs("family-overlay"),
                    ])),
                this.gBn
            );
        }
        XIe(t) {
            return this.p.XIe(t);
        }
        rt(t) {
            return eA.vu(t), this.fBn.rt(t);
        }
        fKs(t) {
            return eA.wi(t), this.fBn.fKs(t);
        }
        mOt() {
            return this.fBn.mOt();
        }
        eIt() {
            return this.fBn.eIt();
        }
        TYs(t) {
            return this.fBn.TYs(t);
        }
        ot(t) {
            return eA.vu(t), this.fBn.ot(t);
        }
        CKs(t) {
            return eA.wi(t), this.fBn.CKs(t);
        }
        actions() {
            return this.fBn.actions();
        }
        xxt() {
            return this.fBn.xxt();
        }
        ct(t) {
            return eA.vu(t), this.fBn.ct(t);
        }
        MYs(t) {
            return eA.wi(t), this.fBn.MYs(t);
        }
        jt(t) {
            return eA.vu(t), this.fBn.jt(t);
        }
        uns(t) {
            return eA.vu(t), !!this.jt(t);
        }
        jYs() {
            return this.fBn.jYs();
        }
        RYs() {
            return this.fBn.RYs();
        }
        SEe(t) {
            if ((eA.vu(t), "conditions" === t)) return this.mOt();
            if ("actions" === t) return this.actions();
            if ("expressions" === t) return this.jYs();
            throw new Error("invalid ace type");
        }
        OD(t, i) {
            if ((eA.Et(t, self.Ga), eA.k$(i), this.gE() && t.UD().has(this)))
                throw new Error("single-global plugin already in project");
            if (i) {
                if (((i = self.wE.q$(i, !0)), t.LD(i))) throw new Error(`object type name '${i}' already used`);
            } else i = t.jD(this.Zn());
            let e = eA.m(self.Jk, t, this, i);
            return (
                (e.ei = this.hmn.OD(e)), this.gE() && e.nls(), this.Jsi() || "worker" !== t.zse() || t.w7s("auto"), e
            );
        }
        dwe() {
            return !nA.has(this.JD());
        }
        async Sa(t) {
            return await this.hmn.Sa(t);
        }
        static awe(t, i) {
            const e = (eA.q$t(t) ? t.PBn : t.Zn()).toLowerCase(),
                s = (eA.q$t(i) ? i.PBn : i.Zn()).toLowerCase();
            return e > s ? 1 : e < s ? -1 : 0;
        }
    };
}
{
    const rA = self.t,
        hA = [
            "c3runtime/plugin.js",
            "c3runtime/type.js",
            "c3runtime/instance.js",
            "c3runtime/conditions.js",
            "c3runtime/actions.js",
            "c3runtime/expressions.js",
        ];
    window.GBn = class extends self.Plugin {
        constructor(t, i) {
            if ((rA.Et(t, rA.h), super(t, i), rA.C7s())) {
                const t = this.p.VLn();
                rA.$gt(t, new Set(hA)), t.unshift("c3runtime/runtime.js"), this.p.zLn(t);
            }
            (this.Mmt = ""),
                i.path && ((this.Mmt = new URL(i.path, rA.xa()).toString()), t.fa(this.Mmt)),
                (this.yBn = null);
            const e = this.p.PLn();
            if (
                (this.p.Io() &&
                    e &&
                    rA
                        .ma(e)
                        .then((t) => (this.yBn = t))
                        .catch((t) => console.error("Error loading default image: ", t)),
                this.p.ORt())
            )
                for (const t of this.p.Els())
                    rA.ma(t.Bm)
                        .then((i) => (t._ls = i))
                        .catch((t) => console.error("Error loading default image: ", t));
            this.ABn = null;
            const s = this.p.GLn();
            s && (this.ABn = rA.MNt(s).catch((t) => console.error("Error loading default data: ", t)));
        }
        Ut() {
            (this.yBn = null), (this.ABn = null), super.Ut();
        }
        Als() {
            return this.yBn;
        }
        Gls() {
            return this.ABn ? this.ABn : super.Gls();
        }
        Jxe() {
            return this.p.VLn().map((t) => this.Mmt + t);
        }
        async uxe(t, i, e, s) {
            return await Promise.all(
                e.map(async (e) => {
                    if ("preview" === t) return this.Mmt + e;
                    {
                        const t = this._Bn() + e,
                            n = this.CBn() + e;
                        i.set(t, null);
                        const r = await this.RBn(e);
                        return i.set(t, r), s ? t : n;
                    }
                })
            );
        }
        async pxe(t, i) {
            return await this.uxe(t, i, this.p.HLn(), !0);
        }
        async wxe(t, i, e) {
            return await this.uxe(t, i, this.p.VLn(), !1);
        }
        async RBn(t) {
            rA.vu(t);
            const i = this.UFn.get(t);
            if (i) return i;
            const e = await fetch(this.Mmt + t),
                s = await e.text();
            return this.UFn.set(t, s), s;
        }
        Rmn() {
            return this.Mmt + this.p.jAe();
        }
        Gft() {
            return this.Mmt;
        }
        kBn(t) {
            return this.Mmt + t;
        }
        p_s(t) {
            return this.kBn(t);
        }
        Ote() {
            return rA.ON.fhi;
        }
    };
}
{
    const oA = self.t,
        aA = new Set([1, 2]);
    window.Mei = class extends self.Plugin {
        constructor(t, i) {
            t instanceof window.SDK.IPluginBase && (t = t.QLn()), oA.Et(t, oA.h), super(t, i);
            const e = i.OBn;
            if (((this.Eqt = i.files), (this.DBn = new Map()), (this.FBn = i.OBn["sdk-version"] ?? 1), 1 === this.FBn))
                throw new Error(`instantiating SDKv1 addon '${this.JD()}'`);
            if (!aA.has(this.FBn)) throw new Error(`addon ID '${this.JD()}' specifies invalid SDK version ${this.FBn}`);
            this.p.ILn() &&
                (() => {})(
                    `[Addon SDK] Addon ID '${this.JD()}' called SetVersion(). This is ignored in the Addon SDK v2 and the version set in addon.json is used instead. Remove the call to SetVersion() to clear this warning.`
                ),
                this.p._(e.version),
                this.p.zr(e["supports-worker-mode"] ?? !0),
                this.p.Cxe() || this.LBn(),
                (this.BBn = i.UBn),
                (this.yBn = null);
            const s = this.p.PLn();
            this.p.Io() && s && (this.yBn = this.Lxe(s));
        }
        vBn(t) {
            super.vBn(t);
            for (const t of [...this.mOt(), ...this.actions()])
                if (!t.CXs())
                    for (const i of t.parameters())
                        if (!i.qKs())
                            throw new Error(
                                `Addon '${this.JD()}' ACE '${t.JD()}' uses "${i.lmt()}" parameter which is not supported in the SDK. Refer to the SDK documentation for supported types. Note support for condition/action variadic parameters has been removed - see: https://www.construct.net/forum/construct-3/plugin-sdk-10/variadic-parameters-removed-143189`
                            );
        }
        Ut() {
            (this.Eqt = null), (this.yBn = null), super.Ut();
        }
        S_s() {
            return this.FBn;
        }
        Als() {
            return this.yBn;
        }
        LBn() {
            const t = "c3runtime/main.js";
            if (!this.Eqt.hasOwnProperty(t)) {
                const i = this.p
                    .VLn()
                    .map((t) => `import "./${t.startsWith("c3runtime/") ? t.substr(10) : t}";`)
                    .join("\n");
                this.Eqt[t] = new Blob([i], { type: "application/javascript" });
            }
            this.p.WLn(t);
        }
        Jxe() {
            return this.p.VLn().map((t) => this.kBn(t));
        }
        async pxe(t, i) {
            return await Promise.all(
                this.p.HLn().map(async (t) => {
                    const e = this._Bn() + t;
                    i.set(e, null);
                    const s = await this.RBn(t);
                    return i.set(e, s), e;
                })
            );
        }
        async wxe(t, i, e) {
            return (
                await Promise.all(
                    this.p.VLn().map(async (t) => {
                        const i = await this.RBn(t),
                            s = this._Bn() + t;
                        e.set(s, i);
                    })
                ),
                []
            );
        }
        async RBn(t) {
            oA.vu(t);
            const i = this.UFn.get(t);
            if (i) return i;
            self.assert(this.Eqt.hasOwnProperty(t), `missing addon '${this.JD()}' plugin runtime file`);
            const e = await oA.Cle(this.Eqt[t]);
            return this.UFn.set(t, e), e;
        }
        Rmn() {
            const t = this.p.jAe();
            try {
                return this.kBn(t);
            } catch (i) {
                return console.error(`Error loading addon '${this.JD()}' icon: `, i), t;
            }
        }
        kBn(t) {
            let i = this.DBn.get(t);
            if (i) return i;
            const e = this.Eqt[t];
            if (!e) throw new Error(`addon '${this.JD()}' missing file '${t}'`);
            return (i = URL.createObjectURL(e)), this.DBn.set(t, i), i;
        }
        Lxe(t) {
            const i = this.Eqt[t];
            if (!i) throw new Error(`addon '${this.JD()}' missing file '${t}'`);
            return i;
        }
        p_s(t) {
            return this.Lxe(t);
        }
        $ri() {
            return this.Eqt._c3addon;
        }
        async kke() {
            if ("dev" !== this.FZt() || !this.BBn) return;
            this.UFn.clear();
            const t = Object.keys(this.BBn),
                i = new Map();
            try {
                await Promise.all(
                    t.map(async (t) => {
                        const e = this.BBn[t],
                            s = await oA.ma(e);
                        i.set(t, s);
                    })
                );
            } catch (t) {
                return void console.error(`Error reloading developer addon '${this.JD()}' files: `, t);
            }
            for (const [t, e] of i)
                (this.Eqt[t] = e), this.DBn.has(t) && (URL.revokeObjectURL(this.DBn.get(t)), this.DBn.delete(t));
        }
    };
}
{
    const lA = self.t,
        uA = lA.sj(import.meta.url);
    lA.nj(uA.URL);
    class cA extends lA.Event.aG {
        constructor() {
            super(), (this.ZAe = null);
        }
        fjt(t) {
            return (this.ZAe = t), this.gYt();
        }
        async gYt() {
            const t = new lA.Event("load");
            (t.app = this.ZAe), await this.Aze(t);
            const i = new lA.Event("afterload");
            await this.Aze(i);
        }
        At(t, i) {
            lA.vu(t), lA.yp(i), lA.Aue.NBn("plugin", t, i);
        }
        yf(t, i) {
            return lA.vu(t), lA.qm(i, self.Ga), lA.Aue.yf("plugin", t, i);
        }
        prs(t, i) {
            return lA.vu(t), lA.qm(i, self.Ga), lA.Aue.prs("plugin", t, i);
        }
        vme(t) {
            return lA.Aue.vme("plugin", t);
        }
        *plugins(t, i) {
            lA.qm(t, self.Ga);
            for (const e of lA.Aue.addons("plugin", t, i)) {
                if (!lA.q$t(e)) {
                    if ("system" === e.JD()) continue;
                    if (lA.C7s() && e.ALn()) continue;
                }
                yield e;
            }
        }
        K5s() {
            return this.yf("system");
        }
    }
    (lA.Nt = lA.m(cA)), (lA.l = {});
}
{
    const dA = self.t;
    dA.sV = class extends dA.MV {
        constructor() {
            super(), (this.uAe = new.target), (this.Qns = null), (this.p = null), (this.aFn = null);
        }
        Ut() {
            (this.uAe = null), (this.Qns = null), (this.p = null);
        }
        jBn(t) {
            dA.Et(t, self.Zns), (this.Qns = t);
        }
        Woe() {
            return this.Qns;
        }
        uFn(t) {
            dA.yp(t), (this.uAe = t);
        }
        mAe() {
            return this.uAe;
        }
        cFn(t) {
            dA.Et(t, self.iV), (this.p = t);
        }
        GetInfo() {
            if (!this.p) throw new Error("behavior must set info");
            return this.p;
        }
        fa(t) {
            dA.vu(t), (this.aFn = t);
        }
        dFn() {
            return this.aFn;
        }
        mrs(t) {
            return dA.Et(t, self.Ste), dA.m(this.mAe().Ft, this, t);
        }
    };
}
{
    const fA = self.t;
    fA.nV = class extends fA.MV {
        constructor(t, i) {
            fA.Et(t, fA.sV), fA.Et(i, window.Ste), super(), (this.$Bn = t), (this.grs = i);
        }
        Ut() {
            fA.Ut(this);
        }
        wv(t) {
            return fA.Et(t, window.nrs), fA.m(this.zBn().mAe().Instance, this, t);
        }
        gCt() {
            return this.grs;
        }
        Voe() {
            return this.grs.Voe();
        }
        zBn() {
            return this.$Bn;
        }
        Woe() {
            return this.$Bn.Woe();
        }
    };
}
{
    const pA = self.t;
    pA.lV = class extends pA.MV {
        constructor(t, i) {
            pA.Et(t, pA.nV), pA.Et(i, window.nrs), super(), (this.ei = t), (this.rV = i), (this.Yi = this.rV.Cf());
        }
        Ut() {
            pA.Ut(this);
        }
        Ht() {}
        Wt(t, i) {}
        Xt(t, i) {
            return !1;
        }
    };
}
{
    const mA = self.t;
    mA.wV = class extends mA.lV {
        constructor(t, i) {
            mA.Et(t, mA.nV),
                mA.Et(i, window.nrs),
                super(t, i),
                (this.bFn = !1),
                (this.mw = null),
                (this.Vq = null),
                (this.PQ = (t) => this.yo(t.Th)),
                (this.vFn = () => this.Ro());
        }
        Ut() {
            this.bl(!1), (this.PQ = null), (this.vFn = null);
        }
        SFn() {
            self.app.addEventListener("livepreviewstop", this.vFn), this.Vq.addEventListener("beforerender", this.PQ);
        }
        xFn() {
            this.Vq && this.Vq.removeEventListener("beforerender", this.PQ),
                self.app.removeEventListener("livepreviewstop", this.vFn);
        }
        bl(t) {
            t = !!t;
            let i = self.app.We().bE();
            if ((i || (t = !1), this.bFn !== t))
                if (self.app.XB() && t) self.app.qB(i.Mi(), 10);
                else if (((this.bFn = t), this.Yi.Ol(this.bFn), this.bFn)) {
                    (this.mw = this.Yi.gw()), (this.Vq = i), this.SFn(), this.Tl();
                    this.Yi.lB().nW(!0);
                } else {
                    this.Pl(), this.Yi.Mw(this.mw), (this.mw = null), this.xFn(), (this.Vq = null);
                    const t = this.Yi.bw(),
                        i = t ? t.my() : null;
                    if (i) {
                        if (!i.kl() && !i.sAs() && !this.Yi.rys()) {
                            this.Yi.lB().nW(!1);
                        }
                    } else if (!this.Yi.rys()) {
                        this.Yi.lB().nW(!1);
                    }
                }
        }
        eo() {
            return this.bFn;
        }
        Tl() {}
        Pl() {}
        Ro() {
            this.bl(!1), this.rV.ze("live-preview", !1);
        }
        yo(t) {
            mA._2();
        }
    };
}
{
    const wA = self.t,
        gA = new Set(["attributes", "general", "movements", "other"]),
        yA = new Set(["", "module"]);
    window.iV = class extends wA.MV {
        constructor(t) {
            wA.vu(t),
                super(),
                (this.nes = t),
                (this.Gqt = ""),
                (this.mns = ""),
                (this.Yqt = "1.0.0.0"),
                (this.DFn = !1),
                (this.uXs = "general"),
                (this.FFn = ""),
                (this.FAe = "http://"),
                (this.TAe = "icon.svg"),
                (this.OAe = "image/svg+xml"),
                (this.BFn = ""),
                (this.UFn = [
                    "c3runtime/behavior.js",
                    "c3runtime/type.js",
                    "c3runtime/instance.js",
                    "c3runtime/conditions.js",
                    "c3runtime/actions.js",
                    "c3runtime/expressions.js",
                ]),
                (this.NFn = []),
                (this.VBn = !1),
                (this.dXs = !1),
                (this.qFn = !1),
                (this.XFn = !1),
                (this.tLn = !0),
                (this.iLn = !0),
                (this.sLn = !0),
                (this.eBs = []),
                (this.gLn = new Map()),
                (this.vLn = []),
                (this.SLn = []),
                (this.CLn = { de: "", Hee: "", behavior: "" }),
                (this._Ln = []);
        }
        She() {
            return this.nes;
        }
        k(t) {
            wA.vu(t), (this.Gqt = t);
        }
        Zn() {
            return this.Gqt;
        }
        j(t) {
            wA.vu(t), (this.mns = t);
        }
        qte() {
            return this.mns;
        }
        _(t) {
            wA.vu(t), (this.Yqt = t), (this.DFn = !0);
        }
        Ote() {
            return this.Yqt;
        }
        ILn() {
            return this.DFn;
        }
        $(t) {
            wA.vu(t), (this.uXs = t);
        }
        IXs() {
            return this.uXs;
        }
        q(t) {
            wA.vu(t), (this.FFn = t);
        }
        Ute() {
            return this.FFn;
        }
        zD(t, i) {
            wA.vu(t), wA.vu(i), (this.TAe = t), (this.OAe = i);
        }
        jAe() {
            return this.TAe;
        }
        RAe() {
            return this.OAe;
        }
        tt(t) {
            wA.vu(t), (this.FAe = self.app.lne(t));
        }
        pD() {
            return this.FAe;
        }
        cV(t) {
            this.VBn = !!t;
        }
        Ime() {
            return this.VBn;
        }
        Fs(t) {
            this.dXs = !!t;
        }
        _Xs() {
            return this.dXs;
        }
        Hr(t) {
            this.qFn = !!t;
        }
        ALn() {
            return this.qFn;
        }
        Ur(t) {
            this.XFn = !!t;
        }
        RLn() {
            return this.XFn;
        }
        me(t) {
            wA._T(t), wA.Rm(this.eBs, t), this.gLn.clear();
            for (const t of this.eBs) this.gLn.set(t.JD(), t);
        }
        Doe() {
            return this.eBs;
        }
        cr(t) {
            return wA.vu(t), this.gLn.get(t) ?? null;
        }
        qps(t) {
            return wA.vu(t), this.gLn.has(t);
        }
        Nn(t) {
            this.vLn.push(wA.m(self.t_e, t));
        }
        sri() {
            return this.vLn;
        }
        Vr(t, i = "") {
            if ((wA.vu(t), t.startsWith("http:")))
                throw new Error("cannot use insecure remote script dependency, use HTTPS");
            if (!yA.has(i)) throw new Error("invalid type");
            this.SLn.push({ url: t, type: i });
        }
        tAe() {
            return this.SLn;
        }
        kLn(t) {
            this.tLn = !!t;
        }
        Nei() {
            return this.tLn;
        }
        se(t) {
            this.iLn = !!t;
        }
        Koe() {
            return this.iLn;
        }
        zr(t) {
            this.sLn = !!t;
        }
        Jsi() {
            return this.sLn;
        }
        zLn(t) {
            this.UFn = t.slice(0);
        }
        ne(t) {
            wA.vu(t), this.UFn.push(t);
        }
        VLn() {
            const t = this.UFn.slice(0);
            return this.BFn && !t.includes(this.BFn) && t.push(this.BFn), t;
        }
        WLn(t) {
            wA.vu(t), (this.BFn = t);
        }
        Cxe() {
            return this.BFn;
        }
        js(t) {
            this.NFn = t.slice(0);
        }
        HLn() {
            return this.NFn;
        }
        pe(t) {
            wA.x$(t),
                wA.k$(t.de),
                wA.k$(t.Hee),
                wA.k$(t.behavior),
                t.de && (this.CLn.de = t.de),
                t.Hee && (this.CLn.Hee = t.Hee),
                t.behavior && (this.CLn.behavior = t.behavior);
        }
        m_s() {
            return this.CLn;
        }
        fe(t) {
            wA._T(t), (this._Ln = t);
        }
        d_s() {
            return this._Ln;
        }
        m5s() {
            if (!this.nes) throw new Error("id can not be empty");
            if (!this.Gqt) throw new Error("name can not be empty");
            if (!gA.has(this.uXs)) throw new Error(`invalid behavior category '${this.uXs}'`);
            if (!this.FFn) throw new Error("must specify author");
            if (this.FAe && !this.FAe.startsWith("http://") && !this.FAe.startsWith("https://"))
                throw new Error("help URL must begin with http:// or https://");
            wA.HZ(this.eBs, self.$t);
            let t = new Set();
            for (let i of this.eBs) {
                let e = i.JD();
                if (t.has(e)) throw new Error(`duplicate behavior property ID '${e}'`);
                t.add(e);
            }
        }
    };
}
{
    const bA = self.t,
        vA = "#D04100";
    window.Zns = class extends globalThis.hFn {
        constructor(t, i) {
            bA.Et(t, bA.sV),
                super(),
                (this.hmn = t),
                (this.p = this.hmn.GetInfo()),
                (this.fBn = bA.m(self.pYs)),
                (this.M5t = i.source),
                (this.UFn = new Map()),
                (this.pBn = null),
                (this.Uas = null),
                (this.Vas = null),
                (this.Las = null),
                this.p.m5s(),
                this.hmn.jBn(this),
                i.bBn &&
                    (this.pBn = bA.m(bA.ti.KAe, self.app, null, {
                        name: "behavior-" + this.JD(),
                        color: vA,
                        o8e: i.bBn,
                    }));
        }
        Ut() {
            this.hmn.Ut(), (this.hmn = null), (this.p = null), this.fBn.Ut(), (this.fBn = null), this.UFn.clear();
        }
        vBn(t) {
            bA.x$(t), bA.u.o("behaviors." + this.JD().toLowerCase());
            const i = !!this.p._Xs();
            i && bA.u.As(!1);
            for (let [i, e] of Object.entries(t)) {
                if ("$schema" === i) continue;
                this.fBn.$(i);
                let t = e.conditions,
                    s = e.actions,
                    n = e.expressions;
                if (t) for (let i of t) this.fBn.kYs(i);
                if (s) for (let t of s) this.fBn.FYs(t);
                if (n) for (let t of n) this.fBn.OYs(t);
            }
            i && bA.u.As(!0), this.fBn.PYs(), bA.u.it();
        }
        JD() {
            return this.p.She();
        }
        lmt() {
            return "behavior";
        }
        Zn() {
            return this.p.Zn();
        }
        qte() {
            return this.p.qte();
        }
        Ote() {
            return this.p.Ote();
        }
        S_s() {
            return 1;
        }
        IXs() {
            return this.p.IXs();
        }
        Ute() {
            return this.p.Ute();
        }
        pD() {
            return this.p.pD();
        }
        FZt() {
            return this.M5t;
        }
        Ime() {
            return this.p.Ime();
        }
        _Xs() {
            return this.p._Xs();
        }
        xBn() {
            this.p.Fs(!0);
        }
        ALn() {
            return this.p.ALn();
        }
        RLn() {
            return this.p.RLn();
        }
        Fre() {
            return this._Xs() || (this.RLn() && !self.app.MBn());
        }
        Jsi() {
            return this.p.Jsi();
        }
        Doe() {
            return this.p.Doe();
        }
        cr(t) {
            bA.vu(t);
            const i = this.p.cr(t);
            if (!i) throw new Error(`behavior property id '${t}' not found`);
            return i;
        }
        qps(t) {
            return bA.vu(t), this.p.qps(t);
        }
        WZ() {
            return this.hmn;
        }
        CBn() {
            return `behaviors/${this.JD()}/`;
        }
        _Bn() {
            return bA.xis.t_s() + this.CBn();
        }
        Gxe() {
            return !!this.Cxe();
        }
        Cxe() {
            return this.p.Cxe();
        }
        async pxe(t, i) {
            bA._2();
        }
        async wxe(t, i, e) {
            bA._2();
        }
        sri() {
            return this.p.sri();
        }
        tAe() {
            return this.p.tAe();
        }
        m_s() {
            return this.p.m_s();
        }
        d_s() {
            return this.p.d_s();
        }
        Nei() {
            return this.p.Nei() && "dev" !== this.FZt();
        }
        Koe() {
            return this.p.Koe();
        }
        RAe() {
            return this.p.RAe();
        }
        TBn() {
            return "image/svg+xml" === this.RAe();
        }
        IBn() {
            !this.pBn &&
                this.TBn() &&
                (this.pBn = bA.m(bA.ti.KAe, self.app, this.Rmn(), { name: "behavior-" + this.JD(), color: vA }));
        }
        KB() {
            return (
                this.Uas ||
                    (this.IBn(),
                    this.pBn
                        ? (this.Uas = this.pBn.KB())
                        : (this.Uas = bA.ti.zrt.XAe(this.Rmn(), self.app.Ent(), { Rf: this.TBn() }))),
                this.Uas
            );
        }
        Iue() {
            return (
                this.Vas ||
                    (this.IBn(),
                    this.pBn
                        ? (this.Vas = this.pBn.Iue())
                        : (this.Vas = bA.ti.zrt.XAe(this.Rmn(), self.app.bet(), { Rf: this.TBn() }))),
                this.Vas
            );
        }
        Wos() {
            return (
                this.Las ||
                    (this.IBn(),
                    this.pBn
                        ? (this.Las = this.pBn.Wos())
                        : (this.Las = bA.ti.zrt.XAe(this.Rmn(), self.app.IMt(), { Rf: this.TBn() }))),
                this.Las
            );
        }
        pps(t) {
            switch ((bA.vu(t), t)) {
                case "small":
                    return this.KB();
                case "medium":
                    return this.Iue();
                case "large":
                    return this.Wos();
                default:
                    throw new Error("invalid icon size specifier");
            }
        }
        rt(t) {
            return bA.vu(t), this.fBn.rt(t);
        }
        fKs(t) {
            return bA.wi(t), this.fBn.fKs(t);
        }
        mOt() {
            return this.fBn.mOt();
        }
        eIt() {
            return this.fBn.eIt();
        }
        ot(t) {
            return bA.vu(t), this.fBn.ot(t);
        }
        CKs(t) {
            return bA.wi(t), this.fBn.CKs(t);
        }
        actions() {
            return this.fBn.actions();
        }
        xxt() {
            return this.fBn.xxt();
        }
        ct(t) {
            return bA.vu(t), this.fBn.ct(t);
        }
        MYs(t) {
            return bA.wi(t), this.fBn.MYs(t);
        }
        jt(t) {
            return bA.vu(t), this.fBn.jt(t);
        }
        jYs() {
            return this.fBn.jYs();
        }
        RYs() {
            return this.fBn.RYs();
        }
        SEe(t) {
            if ((bA.vu(t), "conditions" === t)) return this.mOt();
            if ("actions" === t) return this.actions();
            if ("expressions" === t) return this.jYs();
            throw new Error("invalid ace type");
        }
        mrs(t, i) {
            if ((bA.Et(t, self.wE), bA.vu(i), (i = self.wE.q$(i, !0)), t.ur().uns(i))) {
                const e = new Error("expression name collision");
                throw ((e.type = "expression-name-collision"), (e.fns = "behavior"), (e.na = t), (e.name = i), e);
            }
            if (t.pns(i)) throw new Error(`behavior type name '${i}' already in namespace`);
            let e = bA.m(self.Ste, t, this, i);
            e.ei = this.hmn.mrs(e);
            const s = t.Mi();
            return this.Jsi() || "worker" !== s.zse() || s.w7s("auto"), e;
        }
        static _me(t, i) {
            const e = (bA.q$t(t) ? t.PBn : t.Zn()).toLowerCase(),
                s = (bA.q$t(i) ? i.PBn : i.Zn()).toLowerCase();
            return e > s ? 1 : e < s ? -1 : 0;
        }
    };
}
{
    const SA = self.t,
        xA = [
            "c3runtime/behavior.js",
            "c3runtime/type.js",
            "c3runtime/instance.js",
            "c3runtime/conditions.js",
            "c3runtime/actions.js",
            "c3runtime/expressions.js",
        ];
    window.WBn = class extends self.Zns {
        constructor(t, i) {
            if ((SA.Et(t, SA.sV), super(t, i), SA.C7s())) {
                const t = this.p.VLn();
                SA.$gt(t, new Set(xA)), t.unshift("c3runtime/runtime.js"), this.p.zLn(t);
            }
            (this.Mmt = ""), i.path && ((this.Mmt = new URL(i.path, SA.xa()).toString()), t.fa(this.Mmt));
        }
        Ut() {
            super.Ut();
        }
        Jxe() {
            return this.p.VLn().map((t) => this.Mmt + t);
        }
        async uxe(t, i, e, s) {
            return await Promise.all(
                e.map(async (e) => {
                    if ("preview" === t) return this.Mmt + e;
                    {
                        const t = this._Bn() + e,
                            n = this.CBn() + e;
                        i.set(t, null);
                        const r = await this.RBn(e);
                        return i.set(t, r), s ? t : n;
                    }
                })
            );
        }
        async pxe(t, i) {
            return await this.uxe(t, i, this.p.HLn(), !0);
        }
        async wxe(t, i, e) {
            return await this.uxe(t, i, this.p.VLn(), !1);
        }
        async RBn(t) {
            SA.vu(t);
            const i = this.UFn.get(t);
            if (i) return i;
            const e = await fetch(this.Mmt + t),
                s = await e.text();
            return this.UFn.set(t, s), s;
        }
        Rmn() {
            return this.Mmt + this.p.jAe();
        }
        Gft() {
            return this.Mmt;
        }
        kBn(t) {
            return this.Mmt + t;
        }
        p_s(t) {
            return this.kBn(t);
        }
        Ote() {
            return SA.ON.fhi;
        }
    };
}
{
    const MA = self.t,
        EA = new Set([1, 2]);
    window.jei = class extends self.Zns {
        constructor(t, i) {
            t instanceof window.SDK.IBehaviorBase && (t = t.HBn()), MA.Et(t, MA.sV), super(t, i);
            const e = i.OBn;
            if (((this.Eqt = i.files), (this.DBn = new Map()), (this.FBn = i.OBn["sdk-version"] ?? 1), 1 === this.FBn))
                throw new Error(`instantiating SDKv1 addon '${this.JD()}'`);
            if (!EA.has(this.FBn)) throw new Error(`addon ID '${this.JD()}' specifies invalid SDK version ${this.FBn}`);
            this.p.ILn() &&
                (() => {})(
                    `[Addon SDK] Addon ID '${this.JD()}' called SetVersion(). This is ignored in the Addon SDK v2 and the version set in addon.json is used instead. Remove the call to SetVersion() to clear this warning.`
                ),
                this.p._(e.version),
                this.p.zr(e["supports-worker-mode"] ?? !0),
                this.p.Cxe() || this.LBn(),
                (this.BBn = i.UBn);
        }
        vBn(t) {
            super.vBn(t);
            for (const t of [...this.mOt(), ...this.actions()])
                if (!t.CXs())
                    for (const i of t.parameters())
                        if (!i.qKs())
                            throw new Error(
                                `Addon '${this.JD()}' ACE '${t.JD()}' uses "${i.lmt()}" parameter which is not supported in the SDK. Refer to the SDK documentation for supported types. Note support for condition/action variadic parameters has been removed - see: https://www.construct.net/forum/construct-3/plugin-sdk-10/variadic-parameters-removed-143189`
                            );
        }
        Ut() {
            (this.Eqt = null), super.Ut();
        }
        S_s() {
            return this.FBn;
        }
        LBn() {
            const t = "c3runtime/main.js";
            if (!this.Eqt.hasOwnProperty(t)) {
                const i = this.p
                    .VLn()
                    .map((t) => `import "./${t.startsWith("c3runtime/") ? t.substr(10) : t}";`)
                    .join("\n");
                this.Eqt[t] = new Blob([i], { type: "application/javascript" });
            }
            this.p.WLn(t);
        }
        Jxe() {
            return this.p.VLn().map((t) => this.kBn(t));
        }
        async pxe(t, i) {
            return await Promise.all(
                this.p.HLn().map(async (t) => {
                    const e = this._Bn() + t;
                    i.set(e, null);
                    const s = await this.RBn(t);
                    return i.set(e, s), e;
                })
            );
        }
        async wxe(t, i, e) {
            return (
                await Promise.all(
                    this.p.VLn().map(async (t) => {
                        const i = await this.RBn(t),
                            s = this._Bn() + t;
                        e.set(s, i);
                    })
                ),
                []
            );
        }
        async RBn(t) {
            MA.vu(t);
            const i = this.UFn.get(t);
            if (i) return i;
            self.assert(this.Eqt.hasOwnProperty(t), `missing addon '${this.JD()}' plugin runtime file`);
            const e = await MA.Cle(this.Eqt[t]);
            return this.UFn.set(t, e), e;
        }
        Rmn() {
            return this.kBn(this.p.jAe());
        }
        kBn(t) {
            let i = this.DBn.get(t);
            if (i) return i;
            const e = this.Eqt[t];
            if (!e) throw new Error(`addon '${this.JD()}' missing file '${t}'`);
            return (i = URL.createObjectURL(e)), this.DBn.set(t, i), i;
        }
        Lxe(t) {
            const i = this.Eqt[t];
            if (!i) throw new Error(`addon '${this.JD()}' missing file '${t}'`);
            return i;
        }
        p_s(t) {
            return this.Lxe(t);
        }
        $ri() {
            return this.Eqt._c3addon;
        }
        async kke() {
            if ("dev" !== this.FZt() || !this.BBn) return;
            this.UFn.clear();
            const t = Object.keys(this.BBn),
                i = new Map();
            try {
                await Promise.all(
                    t.map(async (t) => {
                        const e = this.BBn[t],
                            s = await MA.ma(e);
                        i.set(t, s);
                    })
                );
            } catch (t) {
                return void console.error(`Error reloading developer addon '${this.JD()}' files: `, t);
            }
            for (const [t, e] of i)
                (this.Eqt[t] = e), this.DBn.has(t) && (URL.revokeObjectURL(this.DBn.get(t)), this.DBn.delete(t));
        }
    };
}
{
    const CA = self.t,
        _A = CA.sj(import.meta.url);
    CA.nj(_A.URL);
    class TA extends CA.Event.aG {
        constructor() {
            super(), (this.ZAe = null);
        }
        fjt(t) {
            return (this.ZAe = t), this.gYt();
        }
        async gYt() {
            const t = new CA.Event("load");
            (t.app = this.ZAe), await this.Aze(t);
            const i = new CA.Event("afterload");
            await this.Aze(i);
        }
        aV(t, i) {
            CA.vu(t), CA.yp(i), CA.Aue.NBn("behavior", t, i);
        }
        yf(t, i) {
            return CA.vu(t), CA.qm(i, self.Ga), CA.Aue.yf("behavior", t, i);
        }
        prs(t, i) {
            return CA.vu(t), CA.qm(i, self.Ga), CA.Aue.prs("behavior", t, i);
        }
        vme(t) {
            return CA.Aue.vme("behavior", t);
        }
        *Cme(t, i) {
            CA.qm(t, self.Ga);
            for (const e of CA.Aue.addons("behavior", t, i)) (!CA.q$t(e) && CA.C7s() && e.ALn()) || (yield e);
        }
    }
    (CA.xf = CA.m(TA)), (CA.tV = {});
}
{
    const IA = self.t,
        PA = self.lang,
        GA = self.assert,
        AA = new Set(["3d", "blend", "color", "distortion", "mask", "normal-mapping", "other", "tiling"]),
        RA = new Set();
    window.pJ = class t extends globalThis.hFn {
        constructor(t, i, e, s, n, r) {
            if (
                (super(),
                IA.vu(t),
                IA.x$(i),
                IA.k$(e),
                IA.k$(s),
                IA.k$(n),
                IA.Crt(r),
                IA.vu(i.id),
                IA.vu(i.category),
                IA.vu(i.author),
                IA.k$(i.version),
                IA.Pce(i["supported-renderers"]),
                IA.Crt(i["extend-box"]),
                i["extend-box"] && (IA.wi(i["extend-box"].horizontal), IA.wi(i["extend-box"].vertical)),
                IA._T(i.parameters),
                !AA.has(i.category))
            )
                throw new Error("invalid category");
            (this.Mmt = t),
                (this.M5t = "built-in"),
                (this.nes = i.id),
                (this.uXs = i.category),
                (this.FFn = i.author),
                (this.Yqt = i.version || "1.0.0.0"),
                (this.Syn = !!i["must-predraw"]),
                (this.Iyn = !!i["blends-background"]),
                (this.Pyn = !!i["uses-depth"]),
                (this.byn = !!i["cross-sampling"]),
                (this.Myn = !!i["preserves-opaqueness"]),
                (this.Cyn = !!i["supports-3d-direct-rendering"]),
                (this.Tyn = !!i.animated),
                (this.myn = 0),
                (this.gyn = 0),
                (this.dXs = !!i["is-deprecated"]),
                (this.Eqt = null),
                (this.BBn = null);
            const h = i["supported-renderers"];
            if (
                ((this.KBn = !h || h.includes("webgl")),
                (this.qBn = h && h.includes("webgl2")),
                (this.XBn = h && h.includes("webgpu")),
                i["extend-box"] && ((this.myn = i["extend-box"].horizontal), (this.gyn = i["extend-box"].vertical)),
                (this.YBn = e),
                (this.JBn = s),
                (this.ZBn = n),
                this.KBn && !this.YBn)
            )
                throw new Error(`effect ${this.nes} supports WebGL but has empty GLSL content`);
            if (this.qBn && !this.JBn) throw new Error(`effect ${this.nes} supports WebGL2 but has empty GLSL content`);
            if (this.XBn && !this.ZBn) throw new Error(`effect ${this.nes} supports WebGPU but has empty WGSL content`);
            if (this.Iyn && this.Pyn)
                throw new Error(`effect ${this.nes} cannot specify both background blending and depth`);
            (this.$mn = null),
                (this.QBn = null),
                (this.tUn = i.parameters),
                (this.BWs = []),
                (this.Gqt = ""),
                (this.mns = ""),
                (this.Oqt = !1),
                r && ((this.M5t = r.source), (this.Eqt = r.files), (this.BBn = r.UBn));
        }
        Ut() {
            (this.YBn = ""),
                (this.JBn = ""),
                (this.ZBn = ""),
                this.$mn && (this.$mn.Ut(), (this.$mn = null)),
                (this.Eqt = null);
        }
        static async XAe(i, e) {
            IA.vu(i), IA.vu(e), IA.u.ij(`${i}${e}\\lang`);
            const s = await IA.MNt(`${i}${e}\\${e}.json`),
                n = s["supported-renderers"],
                r = !n || n.includes("webgl"),
                h = n && n.includes("webgl2"),
                o = n && n.includes("webgpu");
            let a = "",
                l = "",
                u = "";
            return (
                r && (a = await IA.gAe(`${i}${e}\\${e}.fx`)),
                h && (l = await IA.gAe(`${i}${e}\\${e}.webgl2.fx`)),
                o && (u = await IA.gAe(`${i}${e}\\${e}.wgsl`)),
                IA.m(t, i, s, a, l, u)
            );
        }
        fjt() {
            if (this.Oqt) throw new Error("effect already ready");
            IA.u.o("effects." + this.nes.toLowerCase()),
                (this.Gqt = PA(".name")),
                (this.mns = PA(".description")),
                IA.u.o(".parameters");
            for (const t of this.tUn) {
                const i = new self.$t(t.type, t.id, { initialValue: t["initial-value"], Ce: t.interpolatable }),
                    e = t.uniform;
                if (IA.bn.wvn.vSn().has(e))
                    throw new Error(
                        `[Effects] Effect '${this.nes}' parameter '${t.id}' specifices a uniform '${e}', but this name is reserved for internal use by Construct. Please use a different uniform name.`
                    );
                i.TFn(e), t.hasOwnProperty("c2id") && i.PFn(t.c2id), this.BWs.push(i);
            }
            IA.yh(this.tUn), IA.u.it(), IA.u.it(), (this.Oqt = !0);
        }
        lmt() {
            return "effect";
        }
        JD() {
            return this.nes;
        }
        Zn() {
            return this.Gqt;
        }
        qte() {
            return this.mns;
        }
        IXs() {
            return this.uXs;
        }
        Ute() {
            return this.FFn;
        }
        Ote() {
            return "built-in" === this.FZt() ? IA.ON.fhi : this.Yqt;
        }
        iUn() {
            return this.KBn;
        }
        eUn() {
            return this.qBn;
        }
        Mse() {
            return this.XBn;
        }
        FZt() {
            return this.M5t;
        }
        _Xs() {
            return this.dXs;
        }
        Fre() {
            return this._Xs();
        }
        wl() {
            return this.Syn;
        }
        Hrs() {
            return this.Iyn;
        }
        zei() {
            return this.Pyn;
        }
        Jei() {
            return this.byn;
        }
        Dyn() {
            return this.Myn;
        }
        Fyn() {
            return this.Cyn;
        }
        Lyn() {
            return this.Tyn;
        }
        kyn() {
            return this.myn;
        }
        Oyn() {
            return this.gyn;
        }
        Ryn() {
            return 0 !== this.myn || 0 !== this.gyn;
        }
        Koe() {
            return !0;
        }
        xne() {
            return this.BWs;
        }
        zhi(t) {
            IA.vu(t);
            for (let i of this.BWs) if (i.JD() === t) return i;
            return null;
        }
        Whi(t) {
            IA.vu(t);
            for (let i of this.BWs)
                if ("color" === i.lmt()) {
                    let e = i.GFn().split(",").indexOf(t);
                    if (e >= 0) return { Ax: i, component: e };
                } else if (i.GFn() === t) return { Ax: i };
            return null;
        }
        Hae(t) {
            IA.vu(t);
            let i = this.zhi(t);
            if (!i) throw new Error(`effect parameter id '${t}' not found`);
            return i;
        }
        sUn() {
            return GA(this.KBn, "shader does not support WebGL"), this.YBn;
        }
        nUn() {
            return GA(this.qBn, "shader does not support WebGL 2"), this.JBn;
        }
        rUn() {
            return GA(this.XBn, "shader does not support WebGPU"), this.ZBn;
        }
        Gft() {
            return this.Mmt;
        }
        hUn() {
            if (this.$mn) return Promise.resolve(this.$mn);
            if (this.QBn) return this.QBn;
            const t = this.BWs.map((t) => [t.IFn(), 0, t.lmt()]);
            return (
                (this.QBn = (async () => {
                    try {
                        const i = await self.app.hC();
                        let e = "",
                            s = "";
                        if (i.vp()) {
                            if (!this.Mse()) throw new Error(`shader '${this.JD()}' does not support WebGPU`);
                            e = this.rUn();
                        } else if (this.eUn() && i.PMn() >= 2) (e = this.nUn()), (s = IA.bn.wvn.MSn());
                        else {
                            if (!this.iUn()) throw new Error(`shader '${this.JD()}' does not support WebGL 1`);
                            (e = this.sUn()), (s = IA.bn.wvn.xSn());
                        }
                        const n = await i.HCn({
                            src: e,
                            yvn: s,
                            name: this.JD(),
                            Bei: this.Hrs(),
                            Hei: this.zei(),
                            wyn: this.kyn(),
                            yyn: this.Oyn(),
                            vyn: this.Jei(),
                            xyn: this.wl(),
                            Eyn: this.Dyn(),
                            _yn: this.Fyn(),
                            animated: this.Lyn(),
                            parameters: t,
                        });
                        return RA.add(this), (this.$mn = n), (this.QBn = null), this.$mn;
                    } catch (t) {
                        console.error(`Failed to compile '${this.JD()}' shader program: `, t), (this.$mn = null);
                    }
                })()),
                this.QBn
            );
        }
        ghs() {
            return this.$mn;
        }
        static Rq() {
            for (const t of RA) t.$mn = null;
        }
        static async Tq() {
            await Promise.all([...RA].map((t) => t.hUn()));
        }
        async nhs(t, i) {
            IA.Et(t, self.Vrs), IA.vu(i);
            const e = t instanceof self.wE ? t : null;
            if (e) {
                if (e.ur().uns(i)) {
                    const t = new Error("expression name collision");
                    throw ((t.type = "expression-name-collision"), (t.fns = "effect"), (t.na = e), (t.name = i), t);
                }
                if (e.pns(i)) throw new Error(`effect type name '${i}' already in namespace`);
            }
            return await this.hUn(), IA.m(self.Gte, t, this, i);
        }
        static Lhs(t, i) {
            const e = (IA.q$t(t) ? t.PBn : t.Zn()).toLowerCase(),
                s = (IA.q$t(i) ? i.PBn : i.Zn()).toLowerCase();
            return e > s ? 1 : e < s ? -1 : 0;
        }
        $ri() {
            return this.Eqt._c3addon;
        }
        oUn(t) {
            const i = t.split("\n").map((t) => t.trim()),
                e = [];
            for (const t of i) t && "//" !== t.substr(0, 2) && e.push(t);
            return e.join("\n");
        }
        aUn() {
            return this.iUn() ? this.oUn(this.sUn()) : "";
        }
        lUn() {
            return this.eUn() ? this.oUn(this.nUn()) : "";
        }
        uUn() {
            return this.Mse() ? this.oUn(this.rUn()) : "";
        }
        cUn() {
            const t = [];
            for (const i of this.BWs) t.push([i.IFn(), 0, i.lmt()]);
            return t;
        }
        Sa(t) {
            return {
                glsl: this.aUn(),
                glslWebGL2: this.lUn(),
                wgsl: this.uUn(),
                blendsBackground: this.Hrs(),
                usesDepth: this.zei(),
                extendBoxHorizontal: this.kyn(),
                extendBoxVertical: this.Oyn(),
                crossSampling: this.Jei(),
                mustPreDraw: this.wl(),
                preservesOpaqueness: this.Dyn(),
                supports3dDirectRendering: this.Fyn(),
                animated: this.Lyn(),
                parameters: this.cUn(),
            };
        }
        async kke() {
            if ("dev" !== this.FZt() || !this.BBn) return;
            const t = ["effect.fx", "effect.webgl2.fx", "effect.wgsl"],
                i = new Map();
            try {
                await Promise.all(
                    t.map(async (t) => {
                        const e = this.BBn[t];
                        if (!e) return;
                        const s = await IA.gAe(e);
                        i.set(t, s);
                    })
                );
            } catch (t) {
                return void console.error(`Error reloading developer addon '${this.JD()}' files: `, t);
            }
            for (const [t, e] of i)
                (this.Eqt[t] = new Blob([e])),
                    "effect.fx" === t
                        ? (this.YBn = e)
                        : "effect.webgl2.fx" === t
                          ? (this.JBn = e)
                          : "effect.wgsl" === t && (this.ZBn = e);
        }
    };
}
{
    const kA = self.t,
        OA = self.pJ,
        DA = "effects/";
    class FA extends kA.Event.aG {
        constructor() {
            super(), (this.ZAe = null), (this.dUn = !1), (this.fUn = 0), (this.pUn = 0);
        }
        yf(t, i) {
            return kA.vu(t), kA.qm(i, self.Ga), kA.Aue.yf("effect", t, i);
        }
        prs(t, i) {
            return kA.vu(t), kA.qm(i, self.Ga), kA.Aue.prs("effect", t, i);
        }
        async gYt() {
            kA.C7s() ? await this.mUn() : await this.wUn();
        }
        wUn() {
            if (this.dUn) throw new Error("already loaded effects");
            this.dUn = !0;
            let t = DA;
            return kA
                .MNt(t + "defaultEffectList.json")
                .then((i) => {
                    let e = i.defaultEffects;
                    this.pUn = e.length;
                    let s = [];
                    for (let i of e) s.push(OA.XAe(t, i));
                    return kA.gke(s, (t, i) => this.gUn(t, i));
                })
                .then((t) => {
                    for (let i of t) kA.Aue.yUn(i.JD(), i);
                });
        }
        mUn() {
            if (this.dUn) throw new Error("already loaded effects");
            (this.dUn = !0), (this.pUn = 1);
            const t = DA;
            return kA.MNt(t + "allEffects.json").then((t) => {
                this.fUn = 1;
                for (const i of t.all) {
                    const t = kA.m(OA, "", i.json, i.glsl, i.glslWebGL2, i.wgsl);
                    kA.Aue.yUn(t.JD(), t);
                }
            });
        }
        gUn(t, i) {
            this.fUn = t;
        }
        bUn() {
            return this.fUn;
        }
        vUn() {
            return this.pUn;
        }
        fjt(t) {
            (this.ZAe = t), kA.Aue.SUn();
        }
        effects(t, i) {
            return kA.qm(t, self.Ga), kA.Aue.addons("effect", t, i);
        }
    }
    kA.ehs = kA.m(FA);
}
(window.SDK = {}), (window.SDK.Plugins = {}), (window.SDK.Behaviors = {}), (window.SDK.Gfx = {}), (window.SDK.UI = {});
{
    const LA = self.t;
    class BA {
        constructor() {}
        PushContext(t) {
            LA.u.o(t);
        }
        PopContext() {
            LA.u.it();
        }
        Get(t) {
            return LA.u.Ke(t);
        }
    }
    window.SDK.Lang = new BA();
}
{
    const UA = self.t;
    window.SDK.Rect = class {
        constructor(t, i, e, s) {
            (this.Kct = null), t instanceof UA.Rect ? (this.Kct = t) : (this.Kct = UA.m(UA.Rect, t, i, e, s));
        }
        set(t, i, e, s) {
            this.Kct.set(t, i, e, s);
        }
        copy(t) {
            UA.Et(t, window.SDK.Rect), this.Kct.mn(t.Kct);
        }
        clone() {
            const t = new window.SDK.Rect();
            return t.copy(this), t;
        }
        setLeft(t) {
            this.Kct.h3(t);
        }
        getLeft() {
            return this.Kct.un();
        }
        setTop(t) {
            this.Kct.n3(t);
        }
        getTop() {
            return this.Kct.pn();
        }
        setRight(t) {
            this.Kct.xS(t);
        }
        getRight() {
            return this.Kct.Rr();
        }
        setBottom(t) {
            this.Kct.r3(t);
        }
        getBottom() {
            return this.Kct._r();
        }
        width() {
            return this.Kct.width();
        }
        height() {
            return this.Kct.height();
        }
        midX() {
            return this.Kct.Dr();
        }
        midY() {
            return this.Kct.Lr();
        }
        offset(t, i) {
            this.Kct.offset(t, i);
        }
        inflate(t, i) {
            this.Kct.mf(t, i);
        }
        deflate(t, i) {
            this.Kct.fn(t, i);
        }
        multiply(t, i) {
            this.Kct.multiply(t, i);
        }
        divide(t, i) {
            this.Kct.Tg(t, i);
        }
        clamp(t, i, e, s) {
            this.Kct.ft(t, i, e, s);
        }
        normalize() {
            this.Kct.normalize();
        }
        intersectsRect(t) {
            return UA.Et(t, window.SDK.Rect), this.Kct.yu(t.Kct);
        }
        containsPoint(t, i) {
            return this.Kct.i6(t, i);
        }
    };
}
{
    const NA = self.t;
    window.SDK.Quad = class {
        constructor(t, i, e, s, n, r, h, o) {
            (this.ams = null), t instanceof NA.Bi ? (this.ams = t) : (this.ams = NA.m(NA.Bi, t, i, e, s, n, r, h, o));
        }
        set(t, i, e, s, n, r, h, o) {
            this.ams.set(t, i, e, s, n, r, h, o);
        }
        setRect(t, i, e, s) {
            this.ams.so(t, i, e, s);
        }
        copy(t) {
            NA.Et(t, window.SDK.Quad), this.ams.mn(t.ams);
        }
        setTlx(t) {
            this.ams.jg(t);
        }
        getTlx() {
            return this.ams.ss();
        }
        setTly(t) {
            this.ams.Rg(t);
        }
        getTly() {
            return this.ams.ns();
        }
        setTrx(t) {
            this.ams.NFe(t);
        }
        getTrx() {
            return this.ams.gg();
        }
        setTry(t) {
            this.ams.jFe(t);
        }
        getTry() {
            return this.ams.Cr();
        }
        setBrx(t) {
            this.ams.$Fe(t);
        }
        getBrx() {
            return this.ams.vr();
        }
        setBry(t) {
            this.ams.zFe(t);
        }
        getBry() {
            return this.ams.Mr();
        }
        setBlx(t) {
            this.ams.VFe(t);
        }
        getBlx() {
            return this.ams.ao();
        }
        setBly(t) {
            this.ams.WFe(t);
        }
        getBly() {
            return this.ams.lo();
        }
        offset(t, i) {
            this.ams.offset(t, i);
        }
        setFromRect(t) {
            NA.Et(t, window.SDK.Rect), this.ams.gn(t.Kct);
        }
        setFromRotatedRect(t, i) {
            NA.Et(t, window.SDK.Rect), this.ams.Ms(t.Kct, i);
        }
        getBoundingBox(t) {
            NA.Et(t, window.SDK.Rect), this.ams.kws(t.Kct);
        }
        containsPoint(t, i) {
            return this.ams.i6(t, i);
        }
        midX() {
            return this.ams.Dr();
        }
        midY() {
            return this.ams.Lr();
        }
        intersectsSegment(t, i, e, s) {
            return this.ams.XFe(t, i, e, s);
        }
        intersectsQuad(t) {
            return NA.Et(t, window.SDK.Quad), this.ams.YFe(t.ams);
        }
    };
}
{
    const jA = self.t;
    window.SDK.Color = class {
        constructor(t, i, e, s) {
            (this.zc = null), t instanceof jA.nr ? (this.zc = t) : (this.zc = jA.m(jA.nr, t, i, e, s));
        }
        setRgb(t, i, e) {
            this.zc.ih(t, i, e);
        }
        setRgba(t, i, e, s) {
            this.zc.dvs(t, i, e, s);
        }
        copy(t) {
            jA.Et(t, window.SDK.Color), this.zc.set(t.zc);
        }
        copyRgb(t) {
            jA.Et(t, window.SDK.Color), this.zc.rr(t.zc);
        }
        setR(t) {
            this.zc.HDe(t);
        }
        getR(t) {
            return this.zc.getR();
        }
        setG(t) {
            this.zc.KDe(t);
        }
        getG(t) {
            return this.zc.getG();
        }
        setB(t) {
            this.zc.qDe(t);
        }
        getB(t) {
            return this.zc.getB();
        }
        setA(t) {
            this.zc.yS(t);
        }
        getA(t) {
            return this.zc.getA();
        }
        clone() {
            const t = new window.SDK.Color();
            return t.copy(this), t;
        }
        equals(t) {
            return jA.Et(t, window.SDK.Color), this.zc.equals(t.zc);
        }
        equalsIgnoringAlpha(t) {
            return jA.Et(t, window.SDK.Color), this.zc.Xae(t.zc);
        }
        equalsRgb(t, i, e) {
            return this.zc.yDs(t, i, e);
        }
        equalsRgba(t, i, e, s) {
            return this.zc._bs(t, i, e, s);
        }
        premultiply() {
            this.zc.$h();
        }
        unpremultiply() {
            this.zc.ZDe();
        }
    };
}
{
    const $A = self.t,
        zA = new WeakMap();
    window.SDK.IZipFile = class {
        constructor(t) {
            $A.Et(t, $A.pRt), zA.set(this, t);
        }
        PathExists(t) {
            return zA.get(this).hts(t);
        }
        GetFileList() {
            return [...zA.get(this).dqe()];
        }
        GetFirstEntryWithExtension(t) {
            const i = zA.get(this).Q2t(t);
            return i ? new window.SDK.IZipFileEntry(i) : null;
        }
        GetEntry(t) {
            const i = zA.get(this).h4t(t);
            return i ? new window.SDK.IZipFileEntry(i) : null;
        }
        ReadText(t) {
            return zA.get(this).its(window.SDK.IZipFileEntry.uVe(t));
        }
        ReadJson(t) {
            return zA.get(this).ets(window.SDK.IZipFileEntry.uVe(t));
        }
        ReadBlob(t) {
            return zA.get(this).t4t(window.SDK.IZipFileEntry.uVe(t));
        }
    };
}
{
    const VA = self.t,
        WA = new WeakMap();
    window.SDK.IZipFileEntry = class {
        constructor(t) {
            WA.set(this, t);
        }
        static uVe(t) {
            return VA.Et(t, window.SDK.IZipFileEntry), WA.get(t);
        }
    };
}
{
    const HA = self.t;
    HA.xUn = class extends HA.h {
        constructor(t) {
            super(), HA.Et(t, window.SDK.IPluginBase), (this.MUn = t);
        }
        Ut() {
            this.MUn.Release(), (this.MUn = null), super.Ut();
        }
        OD(t) {
            HA.Et(t, self.Jk);
            let i = this.mAe().Type;
            !i && this.ur().S_s() >= 2 && (i = globalThis.SDK.ITypeBase);
            return HA.m(i, this.MUn, t.Tcs()).EUn(this, t);
        }
    };
}
{
    const KA = self.t;
    KA.CUn = class extends KA.zt {
        constructor(t, i, e) {
            super(t, i), KA.Et(e, window.SDK.ITypeBase), (this._Un = e);
        }
        wv(t) {
            KA.Et(t, window.bv);
            const i = "world" === this.ke.ur().yE() ? window.SDK.IWorldInstance : window.SDK.IObjectInstance;
            let e = this.jf().mAe().Instance;
            !e && this.ur().S_s() >= 2 && (e = globalThis.SDK.IInstanceBase);
            return KA.m(e, this._Un, new i(t)).TUn(this, t);
        }
        OFn() {
            return this._Un;
        }
    };
}
{
    const qA = self.t;
    qA.IUn = class extends qA.Bt {
        constructor(t, i, e) {
            qA.Et(e, window.SDK.IInstanceBase),
                super(t, i),
                (this.PUn = e),
                (this.GUn = null),
                qA.ca(this.Yi, self.Zg) &&
                    ((this.GUn = (t) => this.qa(t)), self.app.addEventListener("timelineeditablechange", this.GUn));
        }
        kFn() {
            return this.PUn;
        }
        Ut() {
            this.GUn && self.app.removeEventListener("timelineeditablechange", this.GUn),
                (this.GUn = null),
                this.PUn.Release(),
                super.Ut();
        }
        Ht() {
            this.PUn.OnCreate();
        }
        Fy() {
            this.PUn.OnAfterCreate();
        }
        Wt(t, i) {
            i && i instanceof qA.nr && (i = new window.SDK.Color(i.getR(), i.getG(), i.getB(), i.getA())),
                this.PUn.OnPropertyChanged(t, i);
        }
        yl(t, i, e) {
            let s;
            i && i instanceof qA.nr && (i = new window.SDK.Color(i.getR(), i.getG(), i.getB(), i.getA())),
                !0 === e.uy ? (s = "relative") : !0 === e.absolute && (s = "absolute"),
                this.PUn.OnTimelinePropertyChanged(t, i, { resultMode: s });
        }
        qa(t) {
            const i = t.timeline,
                e = i.Mi();
            this.Mi() === e &&
                (e.Kb() || (e.Vl() === i && i.Gl(this.Yi) && (i.kl() || this.PUn.OnExitTimelineEditMode())));
        }
        Xt(t, i) {
            return this.PUn.LoadC2Property(t, i);
        }
    };
}
{
    const XA = self.t;
    XA.AUn = class extends XA.IUn {
        constructor(t, i, e) {
            XA.Et(e, window.SDK.IWorldInstanceBase), super(t, i, e);
        }
        qi(t, i) {
            this.PUn.Draw(self.app.We().wq(), i.nR);
        }
        Bs() {
            this.PUn.OnPlacedInLayout();
        }
        xl() {
            return this.PUn.IsOriginalSizeKnown();
        }
        Sl() {
            return this.PUn.GetOriginalWidth();
        }
        Cl() {
            return this.PUn.GetOriginalHeight();
        }
        Ps() {
            return this.PUn.HasDoubleTapHandler();
        }
        Vs() {
            this.PUn.OnDoubleTap();
        }
    };
}
{
    const YA = globalThis.t;
    YA.RUn = class extends YA.sV {
        constructor(t) {
            super(), YA.Et(t, globalThis.SDK.IBehaviorBase), (this.kUn = t);
        }
        Ut() {
            this.kUn.Release(), (this.kUn = null), super.Ut();
        }
        mrs(t) {
            YA.Et(t, globalThis.Ste);
            let i = this.mAe().Type;
            !i && this.Woe().S_s() >= 2 && (i = globalThis.SDK.IBehaviorTypeBase);
            return YA.m(i, this.kUn, new globalThis.SDK.IBehaviorType(t)).OUn(this, t);
        }
    };
}
{
    const JA = self.t;
    JA.DUn = class extends JA.nV {
        constructor(t, i, e) {
            super(t, i), JA.Et(e, window.SDK.IBehaviorTypeBase), (this.FUn = e);
        }
        wv(t) {
            JA.Et(t, window.nrs);
            let i = this.zBn().mAe().Instance;
            !i && this.Woe().S_s() >= 2 && (i = globalThis.SDK.IBehaviorInstanceBase);
            return JA.m(i, this.FUn, new window.SDK.IBehaviorInstance(t)).LUn(this, t);
        }
    };
}
{
    const ZA = self.t;
    ZA.BUn = class extends ZA.lV {
        constructor(t, i, e) {
            super(t, i), ZA.Et(e, window.SDK.IBehaviorInstanceBase), (this.UUn = e);
        }
        NUn() {
            return this.UUn;
        }
        Ut() {
            this.UUn.Release(), super.Ut();
        }
        Ht() {
            this.UUn.OnCreate();
        }
        Wt(t, i) {
            i && i instanceof ZA.nr && (i = new window.SDK.Color(i.getR(), i.getG(), i.getB(), i.getA())),
                this.UUn.OnPropertyChanged(t, i);
        }
    };
}
{
    const QA = self.t,
        tR = new WeakMap();
    window.SDK.IPluginBase = class {
        constructor(t) {
            QA.vu(t), (this._class = new.target);
            const i = QA.m(self.v, t);
            this._info = new window.SDK.IPluginInfo(i);
            const e = QA.m(QA.xUn, this);
            e.uFn(this._class), e.cFn(i), tR.set(this, e);
        }
        Release() {
            (this._class = null), (this._info = null);
        }
        QLn() {
            return tR.get(this);
        }
        static Register(t, i) {
            QA.vu(t),
                QA.yp(i),
                QA.Nt.addEventListener("load", (e) => {
                    QA.Nt.At(t, i);
                });
        }
    };
}
{
    const iR = self.t,
        eR = new WeakMap();
    window.SDK.IPluginInfo = class {
        constructor(t) {
            iR.Et(t, self.v), eR.set(this, t);
        }
        SetName(t) {
            eR.get(this).k(t);
        }
        SetDescription(t) {
            eR.get(this).j(t);
        }
        SetVersion(t) {
            eR.get(this)._(t);
        }
        SetCategory(t) {
            eR.get(this).$(t);
        }
        SetAuthor(t) {
            eR.get(this).q(t);
        }
        SetHelpUrl(t) {
            eR.get(this).tt(t);
        }
        SetPluginType(t) {
            eR.get(this).qt(t);
        }
        SetIcon(t, i) {
            eR.get(this).zD(t, i);
        }
        SetIsResizable(t) {
            eR.get(this).Jt(t);
        }
        SetIsRotatable(t) {
            eR.get(this).Qt(t);
        }
        SetSupportsZElevation(t) {
            eR.get(this).ee(t);
        }
        SetHasImage(t) {
            eR.get(this).Kt(t);
        }
        SetDefaultImageURL(t) {
            eR.get(this).Sy(t);
        }
        SetHasAnimations(t) {
            eR.get(this).zm(t);
        }
        SetIsTiled(t) {
            eR.get(this).JC(t);
        }
        SetIsFont(t) {
            eR.get(this).xy(t);
        }
        SetHasTilemap(t) {
            eR.get(this).hv(t);
        }
        SetIsDeprecated(t) {
            eR.get(this).Fs(t);
        }
        SetIsSingleGlobal(t) {
            eR.get(this).et(t);
        }
        SetSupportsEffects(t) {
            eR.get(this).Zt(t);
        }
        SetMustPreDraw(t) {
            eR.get(this).ie(t);
        }
        SetIs3D(t) {
            eR.get(this).Pn(t);
        }
        SetSupportsColor(t) {
            eR.get(this).te(t);
        }
        SetCanBeBundled(t) {
            eR.get(this).kLn(t);
        }
        SetUsesJquery(t) {
            (() => {})("[SDK] SetUsesJquery() is deprecated and no longer has any effect");
        }
        AddCommonPositionACEs() {
            eR.get(this).re();
        }
        AddCommonSizeACEs() {
            eR.get(this).ae();
        }
        AddCommonAngleACEs() {
            eR.get(this).le();
        }
        AddCommonAppearanceACEs() {
            eR.get(this).he();
        }
        AddCommonZOrderACEs() {
            eR.get(this).oe();
        }
        AddCommonSceneGraphACEs() {
            eR.get(this).ce();
        }
        SetProperties(t) {
            eR.get(this).me(t.map((t) => self.$t.AFn(t)));
        }
        AddCordovaPluginReference(t) {
            eR.get(this).Gs({
                id: t.id,
                version: t.version || "",
                source: t.source || "default",
                platform: t.platform || "all",
                Nie: t.plugin,
                ZLn: t.variables,
            });
        }
        AddCordovaResourceFile(t) {
            eR.get(this).LLn({ src: t.src, target: t.target || "", platform: t.platform || "all" });
        }
        AddFileDependency(t) {
            eR.get(this).Nn({
                filename: t.filename,
                Bh: t.fileType || "",
                lBn: t.scriptType || "",
                type: t.type,
                platform: t.platform || "all",
            });
        }
        AddRemoteScriptDependency(t, i = "") {
            eR.get(this).Vr(t, i);
        }
        SetSupportedRuntimes() {
            (() => {})("[SDK] SetSupportedRuntimes() is deprecated and no longer has any effect");
        }
        SetRuntimeModuleMainScript(t) {
            eR.get(this).WLn(t);
        }
        AddC3RuntimeScript(t) {
            eR.get(this).ne(t);
        }
        SetC3RuntimeScripts(t) {
            eR.get(this).zLn(t);
        }
        SetDOMSideScripts(t) {
            eR.get(this).js(t);
        }
        SetAndroidXEnabled(t) {
            (() => {})("[SDK] SetAndroidXEnabled() is deprecated and no longer has any effect");
        }
        SetGooglePlayServicesEnabled(t) {
            eR.get(this).NLn(t);
        }
        SetWrapperExportProperties(t, i) {
            eR.get(this).$Ln(t, i);
        }
        SetScriptInterfaceNames(t) {
            eR.get(this).pe({ de: t.instance, objectType: t.objectType, Nie: t.plugin });
        }
        SetTypeScriptDefinitionFiles(t) {
            eR.get(this).fe(t);
        }
    };
}
window.SDK.PluginProperty = class {
    constructor(t, i, e) {
        (this.Osi = t), (this.nes = i), (this.dXt = e);
    }
    lmt() {
        return this.Osi;
    }
    JD() {
        return this.nes;
    }
    RFn() {
        return this.dXt;
    }
};
{
    const sR = self.t,
        nR = new WeakMap();
    window.SDK.ITypeBase = class {
        constructor(t, i) {
            (this._sdkPlugin = t), (this._objectType = i);
        }
        EUn(t, i) {
            const e = sR.m(sR.CUn, t, i, this);
            return nR.set(this, e), e;
        }
        GetObjectType() {
            return this._objectType;
        }
    };
}
{
    const rR = self.t,
        hR = new WeakMap();
    window.SDK.IInstanceBase = class {
        constructor(t, i) {
            (this._sdkType = t), (this._inst = i);
        }
        TUn(t, i) {
            const e = rR.m(rR.IUn, t, i, this);
            return this.iJe(e), e;
        }
        iJe(t) {
            hR.set(this, t);
        }
        Release() {}
        OnCreate() {}
        OnAfterCreate() {}
        OnPropertyChanged(t, i) {}
        OnTimelinePropertyChanged(t, i, e) {}
        OnExitTimelineEditMode() {}
        LoadC2Property(t, i) {
            return !1;
        }
        GetObjectType() {
            return this._sdkType.GetObjectType();
        }
        GetProject() {
            return this._inst.GetProject();
        }
        GetInstance() {
            return this._inst;
        }
    };
}
{
    const oR = self.t,
        aR = (new WeakMap(), new window.SDK.Rect(0, 0, 1, 1));
    window.SDK.IWorldInstanceBase = class extends window.SDK.IInstanceBase {
        constructor(t, i) {
            super(t, i),
                (this._isLoadingTexture = !1),
                (this._isWebGLTextureLoading = !1),
                (this._hadWebGLTextureError = !1),
                (this._webGLTexRect = aR),
                (this._onWebGLContextLost = null);
        }
        TUn(t, i) {
            const e = oR.m(oR.AUn, t, i, this);
            return this.iJe(e), e;
        }
        Draw(t, i) {
            oR._2();
        }
        OnPlacedInLayout() {}
        GetTexture(t) {
            if ((oR.qm(t, window.SDK.IAnimationFrame), !t)) return null;
            const i = t.GetCachedWebGLTexture();
            return i
                ? ((this._webGLTexRect = t.GetTexRect()), i)
                : (this._isLoadingTexture ||
                      ((this._isWebGLTextureLoading = !0),
                      t
                          .LoadWebGLTexture()
                          .then((t) => {
                              this._isWebGLTextureLoading = !1;
                          })
                          .catch((t) => {
                              console.error("Error loading texture:", t), (this._hadWebGLTextureError = !0);
                          })),
                  null);
        }
        GetTexRect() {
            return this._webGLTexRect;
        }
        HadTextureError() {
            return this._hadWebGLTextureError;
        }
        IsOriginalSizeKnown() {
            return !1;
        }
        GetOriginalWidth() {
            oR._2();
        }
        GetOriginalHeight() {
            oR._2();
        }
        HasDoubleTapHandler() {
            return !1;
        }
        OnDoubleTap() {
            oR._2();
        }
    };
}
{
    const lR = self.t,
        uR = new WeakMap();
    window.SDK.IBehaviorBase = class {
        constructor(t) {
            lR.vu(t), (this._class = new.target);
            const i = lR.m(self.iV, t);
            this._info = new window.SDK.IBehaviorInfo(i);
            const e = lR.m(lR.RUn, this);
            e.uFn(this._class), e.cFn(i), uR.set(this, e);
        }
        Release() {
            (this._class = null), (this._info = null);
        }
        HBn() {
            return uR.get(this);
        }
        static Register(t, i) {
            lR.vu(t),
                lR.yp(i),
                lR.xf.addEventListener("load", (e) => {
                    lR.xf.aV(t, i);
                });
        }
    };
}
{
    const cR = self.t,
        dR = new WeakMap();
    window.SDK.IBehaviorInfo = class {
        constructor(t) {
            cR.Et(t, self.iV), dR.set(this, t);
        }
        SetName(t) {
            dR.get(this).k(t);
        }
        SetDescription(t) {
            dR.get(this).j(t);
        }
        SetVersion(t) {
            dR.get(this)._(t);
        }
        SetCategory(t) {
            dR.get(this).$(t);
        }
        SetAuthor(t) {
            dR.get(this).q(t);
        }
        SetHelpUrl(t) {
            dR.get(this).tt(t);
        }
        SetIcon(t, i) {
            dR.get(this).zD(t, i);
        }
        SetIsOnlyOneAllowed(t) {
            dR.get(this).cV(t);
        }
        SetIsDeprecated(t) {
            dR.get(this).Fs(t);
        }
        SetCanBeBundled(t) {
            dR.get(this).kLn(t);
        }
        SetProperties(t) {
            dR.get(this).me(t.map((t) => self.$t.AFn(t)));
        }
        AddCordovaPluginReference(t) {
            dR.get(this).Gs({
                id: t.id,
                version: t.version || "",
                source: t.source || "default",
                platform: t.platform || "all",
            });
        }
        AddFileDependency(t) {
            dR.get(this).Nn({
                filename: t.filename,
                Bh: t.fileType || "",
                lBn: t.scriptType || "",
                type: t.type,
                platform: t.platform || "all",
            });
        }
        AddRemoteScriptDependency(t, i = "") {
            dR.get(this).Vr(t, i);
        }
        SetRuntimeModuleMainScript(t) {
            dR.get(this).WLn(t);
        }
        AddC3RuntimeScript(t) {
            dR.get(this).ne(t);
        }
        SetC3RuntimeScripts(t) {
            dR.get(this).zLn(t);
        }
        SetSupportedRuntimes() {
            (() => {})("[SDK] SetSupportedRuntimes() is deprecated and no longer has any effect");
        }
        SetScriptInterfaceNames(t) {
            dR.get(this).pe({ de: t.instance, Hee: t.behaviorType, behavior: t.behavior });
        }
        SetTypeScriptDefinitionFiles(t) {
            dR.get(this).fe(t);
        }
    };
}
{
    const fR = self.t,
        pR = new WeakMap();
    window.SDK.IBehaviorTypeBase = class {
        constructor(t, i) {
            (this._sdkBehavior = t), (this._behaviorType = i);
        }
        OUn(t, i) {
            const e = fR.m(fR.DUn, t, i, this);
            return pR.set(this, e), e;
        }
    };
}
{
    const mR = self.t,
        wR = new WeakMap();
    window.SDK.IBehaviorInstanceBase = class {
        constructor(t, i) {
            (this._sdkBehaviorType = t), (this._behaviorInstance = i);
        }
        LUn(t, i) {
            const e = mR.m(mR.BUn, t, i, this);
            return wR.set(this, e), e;
        }
        Release() {}
        OnCreate() {}
        OnPropertyChanged(t, i) {}
        GetBehaviorInstance() {
            return this._behaviorInstance;
        }
        GetSdkBehaviorType() {
            return this._sdkBehaviorType;
        }
    };
}
{
    const gR = self.t,
        yR = new WeakMap();
    window.SDK.IObjectClass = class {
        constructor(t) {
            gR.Et(t, window.wE), yR.set(this, t);
        }
        static uVe(t) {
            return gR.Et(t, window.SDK.IObjectClass), yR.get(t);
        }
        GetProject() {
            return yR.get(this).Mi().Vhi();
        }
        GetName() {
            return yR.get(this).Zn();
        }
        Delete() {
            yR.get(this).X_();
        }
    };
}
{
    const bR = self.t,
        vR = new WeakMap();
    window.SDK.IObjectType = class extends window.SDK.IObjectClass {
        constructor(t) {
            bR.Et(t, window.Jk), super(t), vR.set(this, t);
        }
        static uVe(t) {
            return bR.Et(t, window.SDK.IObjectType), vR.get(t);
        }
        GetImage() {
            return vR.get(this).yi().mps();
        }
        EditImage() {
            bR.ti.Ze.Ke("AnimationsEditor").Qe(vR.get(this));
        }
        GetAnimations() {
            return [...vR.get(this).ra()].map((t) => t.Bfs());
        }
        EditAnimations() {
            this.EditImage();
        }
        async AddAnimation(t, i, e, s) {
            bR.k$(t);
            const n = vR.get(this),
                r = bR.m(self.Uw, n, t || "Animation 1"),
                h = r.Bfs();
            return await h.AddFrame(i, e, s), n.ID().BD(r), h;
        }
        CreateWorldInstance(t) {
            const i = vR.get(this).TK(window.SDK.ILayer.uVe(t));
            return i.Ht(), i.Bs(), new window.SDK.IWorldInstance(i);
        }
        GetAllInstances() {
            return [...vR.get(this).Ae()].map((t) => new window.SDK.IWorldInstance(t));
        }
        IsInContainer() {
            return vR.get(this).R6();
        }
        GetContainer() {
            const t = vR.get(this).H6();
            return t ? t.ios() : null;
        }
        CreateContainer(t) {
            return vR
                .get(this)
                .Gre(t.map((t) => vR.get(t)))
                .ios();
        }
    };
}
{
    const SR = self.t,
        xR = new WeakMap();
    window.SDK.IFamily = class extends window.SDK.IObjectClass {
        constructor(t) {
            SR.Et(t, window.Co), super(t), xR.set(this, t);
        }
        GetMembers() {
            return [...xR.get(this).Mo()].map((t) => t.Tcs());
        }
        SetMembers(t) {
            const i = xR.get(this),
                e = [];
            for (const s of t) {
                const t = window.SDK.IObjectClass.uVe(s);
                if (!i.QF(t, !1)) throw new Error(`object type '${t.Zn()}' incompatible with family '${i.Zn()}`);
                e.push(t);
            }
            i.fD(e);
        }
    };
}
{
    const MR = self.t,
        ER = new WeakMap();
    window.SDK.IObjectInstance = class {
        constructor(t) {
            MR.Et(t, window.bv), ER.set(this, t);
        }
        static uVe(t) {
            return MR.Et(t, window.SDK.IObjectInstance), ER.get(t);
        }
        GetProject() {
            return ER.get(this).Mi().Vhi();
        }
        GetObjectType() {
            return ER.get(this).Fe().Tcs();
        }
        GetExternalSdkInstance() {
            const t = ER.get(this).ta();
            return t instanceof MR.IUn ? t.kFn() : null;
        }
        GetUID() {
            return ER.get(this).Sp();
        }
        GetPropertyValue(t) {
            let i = ER.get(this).Ne(t);
            return i && i instanceof MR.nr && (i = new window.SDK.Color(i.getR(), i.getG(), i.getB(), i.getA())), i;
        }
        GetTimelinePropertyValue(t) {
            let i = ER.get(this).De(t);
            return i && i instanceof MR.nr && (i = new window.SDK.Color(i.getR(), i.getG(), i.getB(), i.getA())), i;
        }
        SetPropertyValue(t, i) {
            i && i instanceof window.SDK.Color && (i = new MR.nr(i.getR(), i.getG(), i.getB(), i.getA())),
                ER.get(this).ze(t, i);
        }
    };
}
{
    const CR = self.t,
        _R = new WeakMap();
    window.SDK.IWorldInstance = class extends window.SDK.IObjectInstance {
        constructor(t) {
            CR.Et(t, window.Zg), super(t), _R.set(this, t);
        }
        GetBoundingBox() {
            return _R.get(this).kSs();
        }
        GetQuad() {
            return _R.get(this).FSs();
        }
        GetColor() {
            return _R.get(this).OSs();
        }
        GetOpacity() {
            return _R.get(this).Lo();
        }
        SetOpacity(t) {
            _R.get(this).nu(t);
        }
        SetX(t) {
            _R.get(this).eu(t);
        }
        GetX() {
            return _R.get(this).Yn();
        }
        SetY(t) {
            _R.get(this).iu(t);
        }
        GetY() {
            return _R.get(this).qn();
        }
        SetXY(t, i) {
            const e = _R.get(this);
            e.eu(t), e.iu(i);
        }
        SetZElevation(t) {
            _R.get(this).aie(t);
        }
        GetZElevation() {
            return _R.get(this).FL();
        }
        GetTotalZElevation() {
            return _R.get(this).oh();
        }
        SetWidth(t) {
            _R.get(this).My(t);
        }
        GetWidth() {
            return _R.get(this).rs();
        }
        SetHeight(t) {
            _R.get(this).Iy(t);
        }
        GetHeight() {
            return _R.get(this).ls();
        }
        SetSize(t, i) {
            _R.get(this).en(t, i);
        }
        SetOriginX(t) {
            _R.get(this).Kh(t);
        }
        GetOriginX() {
            return _R.get(this).Zm();
        }
        SetOriginY(t) {
            _R.get(this).Zh(t);
        }
        GetOriginY() {
            return _R.get(this).tg();
        }
        SetOrigin(t, i) {
            _R.get(this).Km(t, i);
        }
        GetAngle() {
            return _R.get(this).Is();
        }
        SetAngle(t) {
            _R.get(this).ru(t);
        }
        GetLayer() {
            return _R.get(this).yr().I$s();
        }
        GetLayout() {
            return _R.get(this).bf().BLs();
        }
        ApplyBlendMode(t) {
            _R.get(this).Ji(window.SDK.Gfx.IWebGLRenderer.uVe(t));
        }
    };
}
{
    const TR = self.t,
        IR = new WeakMap();
    window.SDK.IAnimation = class {
        constructor(t) {
            TR.Et(t, window.Uw), IR.set(this, t);
        }
        GetName() {
            return IR.get(this).Zn();
        }
        GetObjectType() {
            return IR.get(this).Fe().Tcs();
        }
        GetFrames() {
            return [...IR.get(this).frames()].map((t) => t.mps());
        }
        async AddFrame(t, i, e) {
            TR.qm(t, Blob), TR.HI(i), TR.HI(e);
            const s = IR.get(this),
                n = TR.m(self.Jm, s.Fe(), s);
            return (
                s.sJ(n),
                t ? ("number" == typeof i && "number" == typeof e ? n.iJ(t, i, e) : await n.xls(t)) : await n.Ils(i, e),
                n.mps()
            );
        }
        SetSpeed(t) {
            IR.get(this).gfs(t);
        }
        GetSpeed() {
            return IR.get(this).Tw();
        }
        SetLooping(t) {
            IR.get(this).mfs(!!t);
        }
        IsLooping() {
            return IR.get(this).Pw();
        }
        SetPingPong(t) {
            IR.get(this).dfe(!!t);
        }
        IsPingPong() {
            return IR.get(this).Ow();
        }
        SetRepeatCount(t) {
            IR.get(this).ufe(t);
        }
        GetRepeatCount() {
            return IR.get(this).kw();
        }
        SetRepeatTo(t) {
            IR.get(this).wfs(t);
        }
        GetRepeatTo() {
            return IR.get(this).Vw();
        }
        Delete() {
            const t = IR.get(this);
            if (t.Fe()._cs() < 2) throw new Error("cannot delete last animation");
            t.X_();
        }
    };
}
{
    const PR = self.t,
        GR = new WeakMap();
    window.SDK.IAnimationFrame = class {
        constructor(t) {
            PR.Et(t, window.Jm), GR.set(this, t);
        }
        GetObjectType() {
            return GR.get(this).Fe().Tcs();
        }
        GetWidth() {
            return GR.get(this).rs();
        }
        GetHeight() {
            return GR.get(this).ls();
        }
        GetCachedWebGLTexture() {
            return window.SDK.Gfx.IWebGLTexture.jUn(GR.get(this).Fis());
        }
        GetTexRect() {
            return GR.get(this).Kes();
        }
        async LoadWebGLTexture() {
            const t = await GR.get(this).Tis();
            return window.SDK.Gfx.IWebGLTexture.jUn(t);
        }
        GetBlob() {
            return GR.get(this).Nh();
        }
        ReplaceBlobAndDecode(t) {
            return GR.get(this).Y2t(t);
        }
        SetDuration(t) {
            GR.get(this).Ids(t);
        }
        GetDuration() {
            return GR.get(this).Iw();
        }
        GetOriginX() {
            return GR.get(this).Zm();
        }
        SetOriginX(t) {
            GR.get(this).Kh(t);
        }
        GetOriginY() {
            return GR.get(this).tg();
        }
        SetOriginY(t) {
            GR.get(this).Zh(t);
        }
        AddImagePoint(t, i, e) {
            return GR.get(this).Tds(t, i, e).Wus();
        }
        GetImagePoints() {
            return [...GR.get(this).zus()].map((t) => t.Wus());
        }
        GetCollisionPoly() {
            return GR.get(this).jus();
        }
        Delete() {
            const t = GR.get(this);
            if (t.Nb().qg() < 2) throw new Error("cannot delete last animation frame");
            t.X_();
        }
    };
}
{
    const AR = self.t,
        RR = new WeakMap();
    window.SDK.IImagePoint = class {
        constructor(t) {
            AR.Et(t, window.Dus), RR.set(this, t);
        }
        GetAnimationFrame() {
            return RR.get(this).ey().mps();
        }
        GetName() {
            return RR.get(this).Zn();
        }
        SetName(t) {
            RR.get(this).k(t);
        }
        GetX() {
            return RR.get(this).Yn();
        }
        SetX(t) {
            RR.get(this).eu(t);
        }
        GetY() {
            return RR.get(this).qn();
        }
        SetY(t) {
            return RR.get(this).iu(t);
        }
    };
}
{
    const kR = self.t,
        OR = new WeakMap();
    window.SDK.ICollisionPoly = class {
        constructor(t) {
            kR.Et(t, window.df), OR.set(this, t);
        }
        Reset() {
            OR.get(this).fm();
        }
        IsDefault() {
            return OR.get(this).Wv();
        }
        GetPoints() {
            return OR.get(this).gus();
        }
        SetPoints(t) {
            if ((kR._T(t), t.length < 6 || t.length % 2 != 0)) throw new Error("invalid points array");
            OR.get(this).mus(t);
        }
    };
}
{
    const DR = self.t,
        FR = new WeakMap();
    window.SDK.IContainer = class {
        constructor(t) {
            DR.Et(t, window.Uhs), FR.set(this, t);
        }
        IsActive() {
            return FR.get(this).gu();
        }
        GetMembers() {
            return [...FR.get(this).Mo()].map((t) => t.Tcs());
        }
        SetSelectMode(t) {
            FR.get(this).yre(t);
        }
        GetSelectMode() {
            return FR.get(this).r$();
        }
        RemoveObjectType(t) {
            const i = FR.get(this),
                e = window.SDK.IObjectClass.uVe(t);
            i.uD(e);
        }
    };
}
{
    const LR = self.t,
        BR = new WeakMap();
    window.SDK.IBehaviorType = class {
        constructor(t) {
            LR.Et(t, window.Ste), BR.set(this, t);
        }
        GetProject() {
            return BR.get(this).Mi().Vhi();
        }
        GetName() {
            return BR.get(this).Zn();
        }
    };
}
{
    const UR = self.t,
        NR = new WeakMap();
    window.SDK.IBehaviorInstance = class {
        constructor(t) {
            UR.Et(t, window.nrs), NR.set(this, t);
        }
        GetProject() {
            return NR.get(this).Mi().Vhi();
        }
        GetPropertyValue(t) {
            let i = NR.get(this).Ne(t);
            return i && i instanceof UR.nr && (i = new window.SDK.Color(i.getR(), i.getG(), i.getB(), i.getA())), i;
        }
        SetPropertyValue(t, i) {
            i && i instanceof window.SDK.Color && (i = new UR.nr(i.getR(), i.getG(), i.getB(), i.getA())),
                NR.get(this).ze(t, i);
        }
        GetObjectInstance() {
            const t = NR.get(this).Cf();
            return t instanceof self.Zg ? new window.SDK.IWorldInstance(t) : new window.SDK.IObjectInstance(t);
        }
        GetExternalSdkInstance() {
            const t = NR.get(this).ta();
            return t instanceof UR.BUn ? t.NUn() : null;
        }
    };
}
{
    const jR = self.t,
        $R = new WeakMap();
    window.SDK.IProject = class {
        constructor(t) {
            jR.Et(t, window.Ga), $R.set(this, t);
        }
        GetName() {
            return $R.get(this).Zn();
        }
        GetRuntime() {
            return (() => {})("[SDK] IProject.GetRuntime() is deprecated and always returns 'c3'"), "c3";
        }
        GetSystemType() {
            return $R.get(this).Xxt().Tcs();
        }
        GetSingleGlobalObjectType(t) {
            jR.vu(t);
            const i = $R.get(this).mTs(t);
            return i ? i.Tcs() : null;
        }
        async CreateObjectType(t, i) {
            const e = $R.get(this),
                s = jR.Nt.yf(t, e).OD(e, e.jD(i));
            return await s.Ils(), e.tB().BD(s), s.Tcs();
        }
        CreateFamily(t, i) {
            if ((jR.k$(t), jR.HZ(i, window.SDK.IObjectType), !i.length)) throw new Error("no family members provided");
            const e = $R.get(this);
            t = (t = self.wE.q$(t || "", !0)) ? e.jD(t) : e.oD();
            const s = window.SDK.IObjectType.uVe(i[0]).ur(),
                n = jR.m(self.Co, e, s, t);
            return n.fD(i.map((t) => window.SDK.IObjectType.uVe(t))), e.lD(n), n.lus();
        }
        GetObjectTypeByName(t) {
            jR.vu(t);
            const i = $R.get(this).KD(t);
            return i ? i.Tcs() : null;
        }
        GetFamilyByName(t) {
            jR.vu(t);
            const i = $R.get(this).GD(t);
            return i ? i.lus() : null;
        }
        GetObjectClassByName(t) {
            jR.vu(t);
            const i = $R.get(this).TWs(t);
            return i instanceof self.Jk ? i.Tcs() : i instanceof self.Co ? i.lus() : null;
        }
        GetObjectClassBySID(t) {
            jR.wi(t);
            const i = $R.get(this).So(t);
            return i instanceof self.Jk ? i.Tcs() : i instanceof self.Co ? i.lus() : null;
        }
        GetInstanceByUID(t) {
            jR.wi(t);
            const i = $R.get(this).Ups(t);
            return i
                ? i instanceof self.Zg
                    ? new window.SDK.IWorldInstance(i)
                    : new window.SDK.IObjectInstance(i)
                : null;
        }
        AddOrReplaceProjectFile(t, i, e = "general") {
            $R.get(this).oni(e).nJ(t, i);
        }
        GetProjectFileBySID(t) {
            jR.wi(t);
            const i = $R.get(this).ml(t);
            return i ? i.uEs() : null;
        }
        GetProjectFileByName(t) {
            jR.vu(t);
            const i = $R.get(this).net(t);
            return i ? i.uEs() : null;
        }
        GetProjectFileByExportPath(t) {
            jR.vu(t);
            const i = $R.get(this).fni(t);
            return i ? i.uEs() : null;
        }
        ShowImportAudioDialog(t) {
            const i = $R.get(this);
            jR.ti.Ze.Ke("ImportAudio").KRt(t, i, document.body);
        }
        EnsureFontLoaded(t) {
            return $R.get(this).DC(t);
        }
        UndoPointChangeObjectInstancesProperty(t, i) {
            (t = Array.isArray(t)
                ? t.map((t) => window.SDK.IObjectInstance.uVe(t))
                : [window.SDK.IObjectInstance.uVe(t)]),
                $R.get(this).dr(new self.gr.mr(t, i));
        }
    };
}
{
    const zR = self.t,
        VR = new WeakMap();
    window.SDK.ILayout = class {
        constructor(t) {
            zR.Et(t, window.QO), VR.set(this, t);
        }
        GetName() {
            return VR.get(this).Zn();
        }
        GetProject() {
            return VR.get(this).Mi().Vhi();
        }
        GetEventSheet() {
            const t = VR.get(this).pH();
            return t ? t.uJs() : null;
        }
        GetAllLayers() {
            return [...VR.get(this).uH()].map((t) => t.I$s());
        }
    };
}
{
    const WR = self.t,
        HR = new WeakMap();
    window.SDK.ILayer = class {
        constructor(t) {
            WR.Et(t, window.nH), HR.set(this, t);
        }
        static uVe(t) {
            return WR.Et(t, window.SDK.ILayer), HR.get(t);
        }
        GetName() {
            return HR.get(this).Zn();
        }
        GetLayout() {
            return HR.get(this).bf().BLs();
        }
    };
}
{
    const KR = self.t,
        qR = new WeakMap();
    window.SDK.IProjectFile = class {
        constructor(t) {
            KR.Et(t, window.Va), qR.set(this, t);
        }
        GetName() {
            return qR.get(this).Zn();
        }
        GetProject() {
            return qR.get(this).Mi().Vhi();
        }
        GetBlob() {
            return qR.get(this).Nh();
        }
    };
}
{
    const XR = self.t,
        YR = new WeakMap();
    window.SDK.IEventSheet = class {
        constructor(t) {
            XR.Et(t, window.Hk), YR.set(this, t);
        }
        GetName() {
            return YR.get(this).Zn();
        }
        GetProject() {
            return YR.get(this).Mi().Vhi();
        }
        GetRoot() {
            return YR.get(this).lB().mHs();
        }
    };
}
{
    const JR = self.t,
        ZR = new WeakMap();
    window.SDK.IEventParentRow = class {
        constructor(t) {
            JR.Et(t, window.pbt), ZR.set(this, t);
        }
        async AddEventBlock() {
            const t = ZR.get(this),
                i = JR.m(self.NEt, t);
            return await t.mB(i), i.mHs();
        }
    };
}
{
    const QR = self.t,
        tk = new WeakMap();
    function ik(t, i) {
        if ("string" == typeof i) return i;
        if ("number" == typeof i) return i.toString();
        if (i && i instanceof window.SDK.IObjectClass) return window.SDK.IObjectClass.uVe(i);
        if (t instanceof globalThis.q_t) return !!i;
        throw TypeError("unsupported event parameter");
    }
    window.SDK.IEventBlock = class extends window.SDK.IEventParentRow {
        constructor(t) {
            QR.Et(t, window.NEt), super(t), tk.set(this, t);
        }
        AddCondition(t, i, e, s) {
            if ((QR.Et(t, window.SDK.IObjectClass), QR.vu(e), QR.Pce(s), !QR.YI(i)))
                throw new Error("value passed for reserved parameter");
            const n = tk.get(this),
                r = window.SDK.IObjectClass.uVe(t),
                h = r.ur().rt(e),
                o = QR.m(self.HEt, n, r, null, h);
            for (const t of o.parameters()) {
                const i = t.Bv();
                if (i >= s.length) throw new RangeError("not enough parameters passed");
                t.Set(ik(t, s[i]));
            }
            n._xt(o);
        }
        AddAction(t, i, e, s) {
            if ((QR.Et(t, window.SDK.IObjectClass), QR.vu(e), QR.Pce(s), !QR.YI(i)))
                throw new Error("value passed for reserved parameter");
            const n = tk.get(this),
                r = window.SDK.IObjectClass.uVe(t),
                h = r.ur().ot(e),
                o = QR.m(self.Lxt, n, r, null, h);
            for (const t of o.parameters()) {
                const i = t.Bv();
                if (i >= s.length) throw new RangeError("not enough parameters passed");
                t.Set(ik(t, s[i]));
            }
            n.hxt(o);
        }
    };
}
{
    const ek = self.t,
        sk = new WeakMap();
    window.SDK.Gfx.IWebGLRenderer = class {
        constructor(t) {
            sk.set(this, t);
        }
        static uVe(t) {
            return sk.get(t);
        }
        SetAlphaBlend() {
            sk.get(this).cs();
        }
        SetColorFillMode() {
            sk.get(this).us();
        }
        SetTextureFillMode() {
            sk.get(this).an();
        }
        SetSmoothLineFillMode() {
            sk.get(this).uo();
        }
        SetColorRgba(t, i, e, s) {
            sk.get(this).ps(t, i, e, s);
        }
        SetColor(t) {
            ek.Et(t, window.SDK.Color), sk.get(this).Ki(t.zc);
        }
        SetOpacity(t) {
            sk.get(this).nu(t);
        }
        ResetColor() {
            sk.get(this).ln();
        }
        SetCurrentZ(t) {
            sk.get(this).UL(t);
        }
        GetCurrentZ() {
            return sk.get(this).Fgn();
        }
        Rect(t) {
            ek.Et(t, window.SDK.Rect), sk.get(this).Rect(t.Kct);
        }
        Rect2(t, i, e, s) {
            sk.get(this).O3(t, i, e, s);
        }
        Quad(t) {
            ek.Et(t, window.SDK.Quad), sk.get(this).Bi(t.ams);
        }
        Quad2(t, i, e, s, n, r, h, o) {
            sk.get(this).iyn(t, i, e, s, n, r, h, o);
        }
        Quad3(t, i) {
            ek.Et(t, window.SDK.Quad), ek.Et(i, window.SDK.Rect), sk.get(this).Ts(t.ams, i.Kct);
        }
        Quad4(t, i) {
            ek.Et(t, window.SDK.Quad), ek.Et(i, window.SDK.Quad), sk.get(this).no(t.ams, i.ams);
        }
        Quad3D(t, i, e, s, n, r, h, o, a, l, u, c, d) {
            ek.Et(d, window.SDK.Rect), sk.get(this).Og(t, i, e, s, n, r, h, o, a, l, u, c, d.Kct);
        }
        Quad3D2(t, i, e, s, n, r, h, o, a, l, u, c, d) {
            ek.Et(d, window.SDK.Quad), sk.get(this).Dg(t, i, e, s, n, r, h, o, a, l, u, c, d.ams);
        }
        ConvexPoly(t) {
            ek._T(t), sk.get(this).Mm(t);
        }
        Line(t, i, e, s) {
            sk.get(this).$n(t, i, e, s);
        }
        TexturedLine(t, i, e, s, n, r) {
            sk.get(this).ULs(t, i, e, s, n, r);
        }
        LineRect(t, i, e, s) {
            sk.get(this).C3(t, i, e, s);
        }
        LineRect2(t) {
            ek.Et(t, window.SDK.Rect), sk.get(this).dn(t.Kct);
        }
        LineQuad(t) {
            ek.Et(t, window.SDK.Quad), sk.get(this).rn(t.ams);
        }
        PushLineWidth(t) {
            sk.get(this).ho(t);
        }
        PopLineWidth() {
            sk.get(this).po();
        }
        PushLineCap(t) {
            sk.get(this).Zgn(t);
        }
        PopLineCap() {
            sk.get(this).fo();
        }
        SetTexture(t) {
            const i = window.SDK.Gfx.IWebGLTexture;
            ek.qm(t, i), sk.get(this).vs(t ? i.uVe(t) : null);
        }
        CreateWebGLText() {
            const t = sk.get(this).fyn();
            return new window.SDK.Gfx.IWebGLText(t);
        }
        CreateRendererText() {
            const t = sk.get(this).fyn();
            return new window.SDK.Gfx.IWebGLText(t);
        }
        CreateDynamicTexture(t, i, e) {
            const s = {
                ji: (e = e || {}).wrapX || "clamp-to-edge",
                Ri: e.wrapY || "clamp-to-edge",
                Oi: e.sampling || "trilinear",
                vMn: e.pixelFormat || "rgba8",
                _h: !e.hasOwnProperty("mipMap") || !!e.mipMap,
                Dh: e.mipMapQuality || "default",
            };
            e.isTiled &&
                (("repeat-x" !== e.tileType && "repeat" !== e.tileType && e.tileType) || (s.ji = "repeat"),
                ("repeat-y" !== e.tileType && "repeat" !== e.tileType && e.tileType) || (s.Ri = "repeat"));
            const n = sk.get(this).DL(t, i, s);
            return window.SDK.Gfx.IWebGLTexture.jUn(n);
        }
        UpdateTexture(t, i, e) {
            e = e || {};
            const s = window.SDK.Gfx.IWebGLTexture;
            ek.qm(i, s);
            const n = s.uVe(i);
            sk.get(this).HL(t, n, { SMn: !!e.premultiplyAlpha });
        }
        DeleteTexture(t) {
            const i = window.SDK.Gfx.IWebGLTexture;
            ek.qm(t, i);
            const e = i.uVe(t);
            sk.get(this).mi(e);
        }
        DrawMesh(t, i, e, s) {
            sk.get(this).$l(t, i, e, s);
        }
    };
}
{
    const nk = new WeakMap();
    window.SDK.Gfx.IDrawParams = class {
        constructor(t) {
            nk.set(this, t);
        }
        GetDt() {
            return nk.get(this).Th;
        }
        GetLayoutView() {
            return nk.get(this).sn.dJ();
        }
    };
}
{
    const rk = self.t,
        hk = new WeakMap(),
        ok = new WeakMap();
    window.SDK.Gfx.IWebGLTexture = class {
        constructor(t) {
            rk.UM(t, rk.bn.xMn, rk.bn.jIn), hk.set(this, t), ok.set(t, this);
        }
        static jUn(t) {
            if (!t) return null;
            const i = ok.get(t);
            return i || new window.SDK.Gfx.IWebGLTexture(t);
        }
        static uVe(t) {
            return rk.Et(t, window.SDK.Gfx.IWebGLTexture), hk.get(t);
        }
        GetWidth() {
            return hk.get(this).rs();
        }
        GetHeight() {
            return hk.get(this).ls();
        }
    };
}
{
    const ak = self.t,
        lk = new WeakMap();
    window.SDK.Gfx.IWebGLText = class {
        constructor(t) {
            ak.Et(t, ak.bn.wn), lk.set(this, t);
        }
        Release() {
            lk.get(this).Ut();
        }
        SetFontName(t) {
            lk.get(this).Or(t);
        }
        SetFontSize(t) {
            lk.get(this).xn(t);
        }
        SetLineHeight(t) {
            lk.get(this).$y(t);
        }
        SetBold(t) {
            lk.get(this).HC(t);
        }
        SetItalic(t) {
            lk.get(this).ar(t);
        }
        SetColor(t) {
            ak.Et(t, window.SDK.Color), lk.get(this).Ki(t.zc);
        }
        SetColorRgb(t, i, e) {
            lk.get(this).Tn(t, i, e);
        }
        SetHorizontalAlignment(t) {
            lk.get(this).vn(t);
        }
        SetVerticalAlignment(t) {
            lk.get(this).Mn(t);
        }
        SetWordWrapMode(t) {
            lk.get(this).By(t);
        }
        SetText(t) {
            lk.get(this).In(t);
        }
        SetSize(t, i, e) {
            lk.get(this).en(t, i, e);
        }
        GetTexture() {
            const t = lk.get(this).Li();
            return t ? window.SDK.Gfx.IWebGLTexture.jUn(t) : null;
        }
        GetTexRect() {
            return new window.SDK.Rect(lk.get(this).hn());
        }
        SetTextureUpdateCallback(t) {
            lk.get(this).yn = t;
        }
        ReleaseTexture() {
            lk.get(this).pis();
        }
        GetTextWidth() {
            return lk.get(this).OS();
        }
        GetTextHeight() {
            return lk.get(this).VS();
        }
    };
}
{
    const uk = self.t,
        ck = new WeakMap();
    window.SDK.UI.ILayoutView = class {
        constructor(t) {
            uk.Et(t, window.lG), ck.set(this, t);
        }
        GetProject() {
            return ck.get(this).Mi().Vhi();
        }
        GetZoomFactor() {
            return ck.get(this).Cn();
        }
        LayoutToClientDeviceX(t) {
            return ck.get(this).MX(t);
        }
        LayoutToClientDeviceY(t) {
            return ck.get(this).GX(t);
        }
        SetDeviceTransform(t) {
            return ck.get(this).Ir(window.SDK.Gfx.IWebGLRenderer.uVe(t));
        }
        SetDefaultTransform(t) {
            return ck.get(this).Tr(window.SDK.Gfx.IWebGLRenderer.uVe(t));
        }
        Refresh() {
            ck.get(this).uR();
        }
        GetLayout() {
            return ck.get(this).bf().BLs();
        }
        GetActiveLayer() {
            return ck.get(this).aH().I$s();
        }
    };
}
{
    const dk = self.t;
    new WeakMap();
    window.SDK.UI.Util = class {
        static ShowLongTextPropertyDialog(t, i) {
            const e = dk.ti.Ze.Ke("LongTextPropertyDialog");
            return e.hr(i), e.pr(t);
        }
        static AddDragDropFileImportHandler(t, i) {
            self.app.$Un(t, i);
        }
    };
}
{
    const fk = self.t,
        pk = self.lang;
    window.zUn = class extends globalThis.hFn {
        constructor(t, i) {
            super(),
                (this.nes = t.id),
                (this.Gqt = t.name),
                (this.Yqt = t.version),
                (this.FFn = t.author),
                (this.OAe = t["icon-type"] || "image/svg+xml"),
                (this.TAe = ""),
                (this.VUn = t.website),
                (this.FAe = self.app.lne(t.documentation)),
                (this.mns = t.description),
                (this.WUn = t.stylesheets),
                (this.M5t = i.source),
                (this.Eqt = i.files),
                (this.HUn = []),
                (this.KUn = []),
                (this.pBn = null),
                (this.Uas = null),
                (this.Vas = null),
                (this.Las = null),
                "built-in" === this.M5t &&
                    fk.C7s() &&
                    ((this.Gqt = pk(`themes.${this.nes}.name`)), (this.mns = pk(`themes.${this.nes}.description`)));
        }
        Ut() {
            (this.Eqt = null), this.TAe && (URL.revokeObjectURL(this.TAe), (this.TAe = ""));
            for (const t of this.HUn) URL.revokeObjectURL(t);
            fk.yh(this.HUn), super.Ut();
        }
        qUn() {
            if (!this.HUn.length) for (const t of this.WUn) this.HUn.push(URL.createObjectURL(this.Eqt[t]));
        }
        XUn(t) {
            return new Promise((i, e) => {
                const s = document.createElement("link");
                (s.rel = "stylesheet"),
                    (s.onload = () => i(s)),
                    (s.onerror = e),
                    (s.href = t),
                    s.setAttribute("data-theme", this.JD()),
                    document.head.appendChild(s);
            });
        }
        async AXe() {
            const t = [];
            this.qUn();
            for (const i of this.HUn) t.push(this.XUn(i).then((t) => this.KUn.push(t)));
            await Promise.all(t), fk.ti.VW.HXe();
        }
        async YUn() {
            const t = [];
            for (let i = 0, e = this.HUn.length; i < e; ++i) {
                const e = this.HUn[i],
                    s = this.KUn[i];
                t.push(this.JUn(e, s));
            }
            await Promise.all(t), fk.ti.VW.HXe();
        }
        async JUn(t, i) {
            const e = await this.XUn(t);
            fk.ti.Tz(i);
            const s = this.KUn.indexOf(i);
            self.assert(s >= 0, "cannot find stylesheet element"), (this.KUn[s] = e);
        }
        qYe() {
            return this.qUn(), this.HUn.slice(0);
        }
        JD() {
            return this.nes;
        }
        lmt() {
            return "theme";
        }
        Zn() {
            return this.Gqt;
        }
        qte() {
            return this.mns;
        }
        Ote() {
            return this.Yqt;
        }
        Ute() {
            return this.FFn;
        }
        pD() {
            return this.FAe;
        }
        FZt() {
            return this.M5t;
        }
        _Xs() {
            return !1;
        }
        Fre() {
            return this._Xs();
        }
        Koe() {
            return !0;
        }
        ZUn() {
            return "image/svg+xml" === this.RAe() ? "icon.svg" : "icon.png";
        }
        Rmn() {
            return this.TAe || (this.TAe = URL.createObjectURL(this.Eqt[this.ZUn()])), this.TAe;
        }
        RAe() {
            return this.OAe;
        }
        TBn() {
            return "image/svg+xml" === this.RAe();
        }
        IBn() {
            !this.pBn &&
                this.TBn() &&
                (this.pBn = fk.m(fk.ti.KAe, self.app, this.Rmn(), { name: "theme-" + this.JD() }));
        }
        KB() {
            return (
                this.Uas ||
                    (this.IBn(),
                    this.pBn
                        ? (this.Uas = this.pBn.KB())
                        : (this.Uas = fk.ti.zrt.XAe(this.Rmn(), self.app.Ent(), { Rf: this.TBn() }))),
                this.Uas
            );
        }
        Iue() {
            return (
                this.Vas ||
                    (this.IBn(),
                    this.pBn
                        ? (this.Vas = this.pBn.Iue())
                        : (this.Vas = fk.ti.zrt.XAe(this.Rmn(), self.app.bet(), { Rf: this.TBn() }))),
                this.Vas
            );
        }
        Wos() {
            return (
                this.Las ||
                    (this.IBn(),
                    this.pBn
                        ? (this.Las = this.pBn.Wos())
                        : (this.Las = fk.ti.zrt.XAe(this.Rmn(), self.app.IMt(), { Rf: this.TBn() }))),
                this.Las
            );
        }
        pps(t) {
            switch ((fk.vu(t), t)) {
                case "small":
                    return this.KB();
                case "medium":
                    return this.Iue();
                case "large":
                    return this.Wos();
                default:
                    throw new Error("invalid icon size specifier");
            }
        }
        $ri() {
            return this.Eqt._c3addon;
        }
        static Lhs(t, i) {
            let e = t.Zn().toLowerCase(),
                s = i.Zn().toLowerCase();
            return e > s ? 1 : e < s ? -1 : 0;
        }
    };
}
{
    const mk = self.t,
        wk = self.lang,
        gk = mk.sj(import.meta.url),
        yk = mk.nj(gk.URL);
    mk.u.ij(yk + "lang");
    const bk = new Set(["start-page-only", "project-file"]);
    window.QUn = class extends globalThis.hFn {
        constructor(t, i) {
            if (
                (super(),
                (this.nes = t.id),
                (this.Gqt = ""),
                (this.mns = ""),
                (this.Yqt = t.version),
                (this.FFn = t.author),
                (this.OAe = t["icon-type"] || "image/svg+xml"),
                (this.TAe = ""),
                (this.VUn = t.website),
                (this.tNn = t["default-ui-layout"] || "games"),
                (this.iNn = t["example-browser-tags"] || []),
                (this.eNn = t["starting-point"]),
                !bk.has(this.eNn))
            )
                throw new Error(`addon '${this.nes}' specifies invalid starting point '${this.eNn}'`);
            (this.sNn = t["starting-project-file"]), (this.Mmt = i.path), (this.M5t = i.source), (this.Eqt = i.files);
            const e = t["tour-file-list"];
            if (!Array.isArray(e)) throw new Error(`addon '${this.nes}' missing "tour-file-list" array`);
            for (const t of e) {
                if (this.Eqt.hasOwnProperty(t))
                    throw new Error(`addon '${this.nes}' "tour-file-list" specifies duplicate filename '${t}'`);
                this.Eqt[t] = null;
            }
            (this.pBn = null),
                (this.Uas = null),
                (this.Vas = null),
                (this.Las = null),
                (this.Oqt = !1),
                (this.A0e = !1),
                (this.nNn = null),
                (this.rNn = 1);
        }
        Ut() {
            (this.Eqt = null), this.TAe && (URL.revokeObjectURL(this.TAe), (this.TAe = "")), super.Ut();
        }
        fjt() {
            if (this.Oqt) throw new Error("tour already ready");
            mk.u.o(this.hNn()), (this.Gqt = wk(".name")), (this.mns = wk(".description")), mk.u.it(), (this.Oqt = !0);
        }
        async gYt() {
            if (this.A0e) return;
            if (
                (await Promise.all(
                    Object.keys(this.Eqt).map(async (t) => {
                        if (this.Eqt[t]) return;
                        if (mk.C7s() && t.endsWith("/en-US.json")) return;
                        const i = await mk.ma(this.Mmt + t);
                        this.Eqt[t] = i;
                    })
                ),
                mk.C7s() || (mk.Aue.oNn(this.nes, this.Eqt, "tourLang/"), await mk.u.gYt()),
                !this.Eqt.hasOwnProperty("tour.json"))
            )
                throw new Error(`tour addon '${this.nes}' missing tour.json file`);
            const t = (await mk.pts(this.Eqt["tour.json"])).sections;
            if (!Array.isArray(t)) throw new Error('missing "sections" array in tour addon');
            if (((this.nNn = t.map((t) => mk.m(self.aNn, this, t))), 0 === this.nNn.length))
                throw new Error("tour sections array is empty");
            this.A0e = !0;
        }
        JD() {
            return this.nes;
        }
        lmt() {
            return "tour";
        }
        hNn() {
            return `tours.${this.nes.toLowerCase()}`;
        }
        Zn() {
            return this.Gqt;
        }
        qte() {
            return this.mns;
        }
        Ote() {
            return this.Yqt;
        }
        Ute() {
            return this.FFn;
        }
        lNn() {
            return this.VUn;
        }
        uNn() {
            return this.iNn;
        }
        cNn() {
            return this.Mmt + "thumbnail.webp";
        }
        dNn() {
            return this.eNn;
        }
        fNn() {
            if ("project-file" !== this.dNn()) throw new Error("invalid starting point");
            const t = this.Eqt[this.sNn];
            if (!t) throw new Error("missing starting project file");
            return t;
        }
        FZt() {
            return this.M5t;
        }
        pNn() {
            return this.tNn;
        }
        _Xs() {
            return !1;
        }
        Fre() {
            return this._Xs();
        }
        mNn() {
            return this.rNn++;
        }
        wNn() {
            return this.rNn - 1;
        }
        gNn() {
            return this.nNn.values();
        }
        *yNn() {
            for (const t of this.gNn()) yield* t.jrn();
        }
        Koe() {
            return !0;
        }
        ZUn() {
            return "image/svg+xml" === this.RAe() ? "icon.svg" : "icon.png";
        }
        Rmn() {
            return this.TAe || (this.TAe = URL.createObjectURL(this.Eqt[this.ZUn()])), this.TAe;
        }
        RAe() {
            return this.OAe;
        }
        TBn() {
            return "image/svg+xml" === this.RAe();
        }
        IBn() {
            !this.pBn &&
                this.TBn() &&
                (this.pBn = mk.m(mk.ti.KAe, self.app, this.Rmn(), { name: "tour-" + this.JD() }));
        }
        KB() {
            return (
                this.Uas ||
                    (this.IBn(),
                    this.pBn
                        ? (this.Uas = this.pBn.KB())
                        : (this.Uas = mk.ti.zrt.XAe(this.Rmn(), self.app.Ent(), { Rf: this.TBn() }))),
                this.Uas
            );
        }
        Iue() {
            return (
                this.Vas ||
                    (this.IBn(),
                    this.pBn
                        ? (this.Vas = this.pBn.Iue())
                        : (this.Vas = mk.ti.zrt.XAe(this.Rmn(), self.app.bet(), { Rf: this.TBn() }))),
                this.Vas
            );
        }
        Wos() {
            return (
                this.Las ||
                    (this.IBn(),
                    this.pBn
                        ? (this.Las = this.pBn.Wos())
                        : (this.Las = mk.ti.zrt.XAe(this.Rmn(), self.app.IMt(), { Rf: this.TBn() }))),
                this.Las
            );
        }
        pps(t) {
            switch ((mk.vu(t), t)) {
                case "small":
                    return this.KB();
                case "medium":
                    return this.Iue();
                case "large":
                    return this.Wos();
                default:
                    throw new Error("invalid icon size specifier");
            }
        }
        $ri() {
            return this.Eqt._c3addon;
        }
        bNn(t) {
            return mk.vu(t), this.Eqt[t] || null;
        }
        static Lhs(t, i) {
            let e = t.Zn().toLowerCase(),
                s = i.Zn().toLowerCase();
            return e > s ? 1 : e < s ? -1 : 0;
        }
    };
}
{
    const vk = self.t;
    window.aNn = class extends vk.MV {
        constructor(t, i) {
            if ((vk.Et(t, self.QUn), vk.x$(i), super(), !Array.isArray(i.steps)))
                throw new Error('missing "steps" array in section');
            if (
                ((this.vNn = t),
                (this.nes = i.id),
                (this.izs = self.lang(this.hNn() + ".title")),
                (this.Bhn = i.steps.map((t) => self.SNn.mF(this, t)).flat()),
                0 === this.Bhn.length)
            )
                throw new Error("tour section steps array is empty");
        }
        hNn() {
            return `${this.vNn.hNn()}.sections.${this.nes}`;
        }
        xNn() {
            return this.vNn;
        }
        JD() {
            return this.nes;
        }
        jrn() {
            return this.Bhn.values();
        }
    };
}
{
    const Sk = self.t,
        xk = self.lang;
    window.MNn = class extends Sk.MV {
        constructor(t, i) {
            if (
                (super(),
                (this.ENn = t),
                (this.nes = i.id),
                (this.CNn = i["analytics-milestone"] || ""),
                "string" != typeof this.nes)
            )
                throw new Error("tour step missing 'id' property");
        }
        _Nn() {
            throw new Error(`invalid tour step '${this.JD()}' in section '${this.TNn().JD()}'`);
        }
        TNn() {
            return this.ENn;
        }
        xNn() {
            return this.TNn().xNn();
        }
        hNn() {
            return `${this.xNn().hNn()}.steps.${this.nes}`;
        }
        INn(t) {
            return xk(this.hNn() + t);
        }
        PNn(t) {
            const i = this.INn(t);
            return i === Sk.u.ia ? null : i;
        }
        GNn(t) {
            const i = this.INn(t);
            return i === Sk.u.ia ? xk(t) : i;
        }
        JD() {
            return this.nes;
        }
        ANn() {
            return this.CNn;
        }
    };
}
{
    const Mk = self.t;
    let Ek = null;
    function Ck() {
        if (!Ek) {
            const t = self.RNn,
                i = self.SNn;
            Ek = new Map([
                ["show-message", i.kNn],
                ["click-button", i.ONn],
                ["select-menu-item", i.DNn],
                ["create-object-type", i.OD],
                ["rename-object-type", i.FNn],
                ["wait-for-place-object", i.LNn],
                ["import-image", i.BNn],
                ["modify-image", i.UNn],
                ["get-to-dialog", i.NNn],
                ["pick-create-object-type", i.jNn],
                ["pick-timeline-instance", i.$Nn],
                ["pick-add-behavior", i.zNn],
                ["pick-event-object", i.VNn],
                ["pick-event-ac", i.WNn],
                ["enter-parameter", i.HNn],
                ["enter-script", i.KNn],
                ["edit-layout-view", i.qNn],
                ["wait", i.STi],
                ["select-project-bar-item", i.XNn],
                ["change-property", i.W_],
                ["create-default-new-project", t.YNn],
                ["create-singleglobal-object", t.JNn],
                ["create-object-with-image", t.ZNn],
                ["add-behaviors", t.QNn],
                ["add-event", t.abt],
                ["add-action", t.hxt],
            ]);
        }
        return Ek;
    }
    window.SNn = class extends self.MNn {
        constructor(t, i, e = {}) {
            if (
                (super(t, i),
                (this.tjn = this.xNn().mNn()),
                (this.ijn = e.message || this.INn(".text")),
                (this.ejn = i.links || []),
                (this.sjn = []),
                this.ijn.includes("[tip"))
            ) {
                const t = (t) => () => this.INn(`.text-tip${t + 1}`);
                for (let i = 0; i < 9; ++i) this.sjn.push(t(i));
            }
        }
        static mF(t, i) {
            Mk.Et(t, self.aNn), Mk.x$(i);
            const e = i["step-type"],
                s = Ck().get(e);
            if (!s) throw new Error(`invalid step-type '${e}'`);
            const n = Mk.m(s, t, i);
            return n instanceof self.RNn ? n.njn() : n;
        }
        rjn() {
            Mk._2();
        }
        hjn() {
            return this.tjn;
        }
        ojn() {
            return 1 === this.hjn();
        }
        ajn() {
            return this.hjn() === this.xNn().wNn();
        }
        ljn() {
            return Mk.m(Mk.nS, this.ijn, {
                mq: !0,
                links: this.ejn.map((t) => self.app.VEe(t, "GuidedTour-" + this.xNn().JD(), this.JD())),
                wUe: this.sjn,
            });
        }
        ujn() {
            return "string" == typeof this.ijn && this.ijn !== Mk.u.ia;
        }
        cjn() {
            return !1;
        }
    };
}
(window.SNn.kNn = class extends self.SNn {
    constructor(t, i, e = {}) {
        super(t, i, e), this.ujn() || this._Nn();
    }
    rjn() {
        return self.djn.kNn;
    }
    cjn() {
        return !0;
    }
}),
    (window.SNn.ONn = class extends self.SNn {
        constructor(t, i, e = {}) {
            super(t, i, e),
                (this.A$i = i.button),
                (this.fjn = !!i["can-skip"]),
                (this.pjn = i["event-tag"]),
                (this.mjn = i.menu),
                (this._ts = i.items),
                (this.wjn = i["created-event-tag"]),
                (this.ujn() && "string" == typeof this.A$i) || this._Nn();
        }
        gjn() {
            return this.A$i;
        }
        yjn() {
            return this.fjn;
        }
        bjn() {
            return this.pjn;
        }
        vjn() {
            return this.mjn;
        }
        L7t() {
            return this._ts;
        }
        Sjn() {
            return this.wjn;
        }
        rjn() {
            return self.djn.ONn;
        }
    });
{
    const _k = new Set(["layout-view-context-menu", "animations-editor-imagepoints"]);
    window.SNn.DNn = class extends self.SNn {
        constructor(t, i, e = {}) {
            super(t, i, e),
                (this.mjn = i.menu),
                (this._ts = i.items),
                (this.ujn() && "string" == typeof this.mjn && _k.has(this.mjn) && Array.isArray(this._ts)) ||
                    this._Nn();
        }
        vjn() {
            return this.mjn;
        }
        L7t() {
            return this._ts;
        }
        rjn() {
            return self.djn.DNn;
        }
    };
}
window.SNn.OD = class extends self.SNn {
    constructor(t, i, e = {}) {
        super(t, i, e), this.ujn() || this._Nn();
    }
    rjn() {
        return self.djn.OD;
    }
};
{
    const Tk = self.t;
    window.SNn.FNn = class extends self.SNn {
        constructor(t, i, e = {}) {
            super(t, i, e),
                (this.xjn = i["object-type-tag"]),
                (this.Mjn = e.Ejn || this.INn(".desired-name")),
                (this.ujn() && "string" == typeof this.xjn && this.Mjn && this.Mjn !== Tk.u.ia) || this._Nn();
        }
        Cjn() {
            return this.xjn;
        }
        _jn() {
            return this.Mjn;
        }
        rjn() {
            return self.djn.FNn;
        }
    };
}
window.SNn.LNn = class extends self.SNn {
    constructor(t, i, e = {}) {
        super(t, i, e), (this.Tjn = i["instance-tag"]), (this.t9 = 0), (this.i9 = 0);
        const s = i["initial-size"];
        Array.isArray(s) && (2 !== s.length && this._Nn(), (this.t9 = s[0]), (this.i9 = s[1])),
            this.ujn() || this._Nn();
    }
    rjn() {
        return self.djn.LNn;
    }
    Ijn() {
        return this.Tjn;
    }
    Pjn() {
        return 0 !== this.t9 || 0 !== this.i9;
    }
    VMi() {
        return this.t9;
    }
    LMi() {
        return this.i9;
    }
};
{
    const Ik = self.t;
    window.SNn.BNn = class extends self.SNn {
        constructor(t, i, e = {}) {
            if (
                (super(t, i, e),
                (this.Ui = i.image),
                (this.Yfs = i["collision-poly"] || ""),
                (this.ujn() && "string" == typeof this.Ui) || this._Nn(),
                (this.les = this.xNn().bNn(this.Ui)),
                !this.les)
            )
                throw new Error(`import image step file '${this.Ui}' missing`);
        }
        Gjn() {
            return Ik.dts(this.Ui);
        }
        Nh() {
            return this.les;
        }
        xI() {
            return this.Yfs;
        }
        rjn() {
            return self.djn.BNn;
        }
    };
}
window.SNn.UNn = class extends self.SNn {
    constructor(t, i, e = {}) {
        super(t, i, e), this.ujn() || this._Nn();
    }
    rjn() {
        return self.djn.UNn;
    }
};
{
    const Pk = self.t,
        Gk = new Set(["behaviors"]);
    window.SNn.NNn = class extends self.SNn {
        constructor(t, i, e = {}) {
            super(t, i, e),
                Pk.u.o("tours._common.go-to-dialog.behaviors"),
                (this.ijn = e.message || this.GNn(".text")),
                Pk.u.it(),
                (this.c8t = i.dialog),
                (this.xjn = i["object-type-tag"]),
                (this.ujn() && "string" == typeof this.c8t && Gk.has(this.c8t)) || this._Nn();
        }
        _8t() {
            return this.c8t;
        }
        Cjn() {
            return this.xjn;
        }
        rjn() {
            return self.djn.NNn;
        }
    };
}
(window.SNn.jNn = class extends self.SNn {
    constructor(t, i, e = {}) {
        super(t, i, e),
            (this.lt = i.plugin),
            (this.xjn = i["object-type-tag"]),
            (this.Ajn = e.Rjn || this.PNn(".assign-name")),
            (this.ujn() && "string" == typeof this.lt) || this._Nn();
    }
    ur() {
        return this.lt;
    }
    rjn() {
        return self.djn.jNn;
    }
    Cjn() {
        return this.xjn;
    }
    kjn() {
        return this.Ajn;
    }
}),
    (window.SNn.$Nn = class extends self.SNn {
        constructor(t, i, e = {}) {
            super(t, i, e), (this.Tjn = i["instance-tag"]), (this.ujn() && "string" == typeof this.Tjn) || this._Nn();
        }
        Ijn() {
            return this.Tjn;
        }
        rjn() {
            return self.djn.$Nn;
        }
    }),
    (window.SNn.zNn = class extends self.SNn {
        constructor(t, i, e = {}) {
            super(t, i, e),
                (this.Qns = i.behavior),
                (this.Ojn = i["behavior-type-tag"]),
                (this.ujn() && "string" == typeof this.Qns) || this._Nn();
        }
        rjn() {
            return self.djn.zNn;
        }
        Woe() {
            return this.Qns;
        }
        Djn() {
            return this.Ojn;
        }
    }),
    (window.SNn.VNn = class extends self.SNn {
        constructor(t, i, e = {}) {
            super(t, i, e),
                (this.xjn = i["object-type-tag"]),
                (this.pjn = i["event-tag"]),
                (this.ujn() && "string" == typeof this.xjn) || this._Nn();
        }
        Cjn() {
            return this.xjn;
        }
        bjn() {
            return this.pjn;
        }
        rjn() {
            return self.djn.VNn;
        }
    }),
    (window.SNn.WNn = class extends self.SNn {
        constructor(t, i, e = {}) {
            super(t, i, e), (this.Fjn = i["ac-id"]), (this.ujn() && "string" == typeof this.Fjn) || this._Nn();
        }
        Ljn() {
            return this.Fjn;
        }
        rjn() {
            return self.djn.WNn;
        }
    });
{
    const Ak = self.t;
    window.SNn.HNn = class extends self.SNn {
        constructor(t, i, e = {}) {
            super(t, i, e),
                (this.Bjn = i["param-id"]),
                (this.Ujn = e.Njn || i["param-value"] || this.INn(".param-value")),
                (this.ijn = e.message || this.PNn(".text") || self.ej("tours._common.enter-parameter.text", this.Ujn)),
                (this.jjn = e.$jn || this.PNn(".text2") || self.lang("tours._common.enter-parameter.pick-object")),
                (this.ujn() && "string" == typeof this.Bjn && this.Ujn && this.Ujn !== Ak.u.ia) || this._Nn();
        }
        zjn() {
            return this.Bjn;
        }
        qae() {
            return this.Ujn;
        }
        rjn() {
            return self.djn.HNn;
        }
        Vjn() {
            return Ak.m(Ak.nS, this.jjn, { mq: !0 });
        }
    };
}
self.t;
window.SNn.KNn = class extends self.SNn {
    constructor(t, i, e = {}) {
        super(t, i, e),
            (this.pjn = i["event-tag"]),
            (this.Wjn = null),
            new RegExp(i["script-regex"]),
            i["script-regex"]
                ? (this.Wjn = new RegExp(i["script-regex"]))
                : i["space-separated-script-regexes"] &&
                  (this.Wjn = new RegExp(i["space-separated-script-regexes"].join("\\s*"))),
            (this.ijn = e.message || this.INn(".text")),
            (this.ujn() && "string" == typeof this.pjn && this.Wjn) || this._Nn();
    }
    bjn() {
        return this.pjn;
    }
    Hjn() {
        return this.Wjn;
    }
    rjn() {
        return self.djn.KNn;
    }
    cjn() {
        return !0;
    }
};
(window.SNn.qNn = class extends self.SNn {
    constructor(t, i, e = {}) {
        super(t, i, e),
            (this.Kjn = i["allow-context-menu-items"] || []),
            (this.qjn = i["message-position"] || ""),
            this.ujn() || this._Nn();
    }
    Xjn() {
        return this.Kjn;
    }
    Yjn() {
        return this.qjn;
    }
    rjn() {
        return self.djn.qNn;
    }
}),
    (window.SNn.STi = class extends self.SNn {
        constructor(t, i, e = {}) {
            super(t, i, e), (this.FV = i.time);
        }
        Ul() {
            return this.FV;
        }
        rjn() {
            return self.djn.STi;
        }
    }),
    (window.SNn.XNn = class extends self.SNn {
        constructor(t, i, e = {}) {
            super(t, i, e), (this.Jjn = i["item-tag"]), (this.ujn() && "string" == typeof this.Jjn) || this._Nn();
        }
        Zjn() {
            return this.Jjn;
        }
        rjn() {
            return self.djn.XNn;
        }
    }),
    (window.SNn.W_ = class extends self.SNn {
        constructor(t, i, e = {}) {
            super(t, i, e),
                (this.Qjn = i["show-properties-tag"]),
                (this.t$n = i["property-id"]),
                (this.i$n = i["set-value-tag"]),
                (this.ujn() && "string" == typeof this.t$n) || this._Nn();
        }
        e$n() {
            return this.Qjn;
        }
        s$n() {
            return this.t$n;
        }
        n$n() {
            return this.i$n;
        }
        rjn() {
            return self.djn.W_;
        }
    });
{
    const Rk = self.t;
    window.RNn = class extends self.MNn {
        constructor(t, i) {
            super(t, i), (this.Bhn = []), (this.r$n = !0);
        }
        njn() {
            return this.Bhn;
        }
        h$n(t, i, e, s) {
            return (
                this.r$n && ((this.r$n = !1), e || (e = {}), (e["analytics-milestone"] = this.ANn())),
                Rk.m(t, this.TNn(), Object.assign({ id: this.JD() + i }, e), s)
            );
        }
    };
}
{
    const kk = self.t,
        Ok = self.SNn;
    window.RNn.YNn = class extends self.RNn {
        constructor(t, i) {
            super(t, i), kk.u.o("tours._common.create-default-new-project");
            const e = this.GNn(".start-page-message"),
                s = this.GNn(".create-button-message");
            kk.u.it(),
                (this.Bhn = [
                    this.h$n(Ok.ONn, "-sp", { button: "start-page-new-project" }, { message: e }),
                    this.h$n(Ok.ONn, "-create", { button: "new-project-dialog-create" }, { message: s }),
                ]);
        }
    };
}
{
    const Dk = self.t,
        Fk = self.SNn;
    window.RNn.JNn = class extends self.RNn {
        constructor(t, i) {
            super(t, i);
            const e = i.plugin;
            "string" != typeof e && this._Nn();
            const s = i["object-type-tag"];
            Dk.u.o("tours._common.create-object-with-image");
            const n = this.GNn(".create-message"),
                r = this.GNn(".pick-message");
            Dk.u.it();
            const h = this.PNn(".assign-name"),
                o = this.PNn(".desired-name");
            (this.Bhn = [
                this.h$n(Fk.OD, "-create", null, { message: n }),
                this.h$n(Fk.jNn, "-pick", { plugin: e, "object-type-tag": s }, { message: r, Rjn: h }),
            ]),
                o &&
                    this.Bhn.push(
                        this.h$n(
                            Fk.FNn,
                            "-rename",
                            { "object-type-tag": s },
                            { message: this.INn(".rename-message"), Ejn: o }
                        )
                    );
        }
    };
}
{
    const Lk = self.t,
        Bk = self.SNn;
    window.RNn.ZNn = class extends self.RNn {
        constructor(t, i) {
            super(t, i);
            const e = i.plugin,
                s = i.image;
            ("string" == typeof e && "string" == typeof s) || this._Nn();
            const n = i["object-type-tag"],
                r = i["instance-tag"],
                h = i["initial-size"];
            Lk.u.o("tours._common.create-object-with-image");
            const o = this.GNn(".create-message"),
                a = this.GNn(".pick-message"),
                l = this.GNn(".place-message"),
                u = this.GNn(".import-image-message"),
                c = this.GNn(".close-message");
            Lk.u.it();
            const d = this.PNn(".assign-name"),
                f = this.PNn(".desired-name");
            (this.Bhn = [
                this.h$n(Bk.OD, "-create", null, { message: o }),
                this.h$n(Bk.jNn, "-pick", { plugin: e, "object-type-tag": n }, { message: a, Rjn: d }),
                this.h$n(Bk.LNn, "-place", { "instance-tag": r, "initial-size": h }, { message: l }),
                this.h$n(Bk.BNn, "-import-image", { image: s }, { message: u }),
                this.h$n(Bk.ONn, "-close", { button: "animations-editor-close" }, { message: c }),
            ]),
                f &&
                    this.Bhn.push(
                        this.h$n(
                            Bk.FNn,
                            "-rename",
                            { "object-type-tag": n },
                            { message: this.INn(".rename-message"), Ejn: f }
                        )
                    );
        }
    };
}
{
    const Uk = self.t,
        Nk = self.SNn;
    window.RNn.QNn = class extends self.RNn {
        constructor(t, i) {
            super(t, i);
            const e = i["object-type-tag"],
                s = i.behaviors;
            ("string" == typeof e && Array.isArray(s)) || this._Nn(), Uk.u.o("tours._common.add-behaviors");
            const n = this.GNn(".add-edit-behaviors"),
                r = this.GNn(".add-button-first"),
                h = this.GNn(".add-button-next"),
                o = this.GNn(".close-behaviors-dialog");
            Uk.u.it(),
                (this.Bhn = [
                    this.h$n(Nk.NNn, "-getto", { dialog: "behaviors", "object-type-tag": e }, { message: n }),
                ]);
            let a = 0;
            for (const t of s) {
                const i = t.behavior,
                    e = t["behavior-type-tag"];
                "string" != typeof i && this._Nn(),
                    this.Bhn.push(
                        this.h$n(Nk.ONn, "-add", { button: "behaviors-dialog-add" }, { message: 0 === a ? r : h })
                    ),
                    this.Bhn.push(
                        this.h$n(
                            Nk.zNn,
                            "-pick",
                            { behavior: i, "behavior-type-tag": e },
                            { message: this.INn(`.pick-behavior-${a}`) }
                        )
                    ),
                    ++a;
            }
            this.Bhn.push(this.h$n(Nk.ONn, "-close", { button: "behaviors-dialog-close" }, { message: o }));
        }
    };
}
{
    const jk = self.t,
        $k = self.SNn;
    window.RNn.abt = class extends self.RNn {
        constructor(t, i) {
            super(t, i);
            const e = i["event-tag"],
                s = i["object-type-tag"],
                n = i["ac-id"],
                r = i.params;
            ("string" == typeof s && "string" == typeof n) || this._Nn(), jk.u.o("tours._common.add-event");
            const h = this.GNn(".click-add-link"),
                o = this.GNn(".pick-object"),
                a = this.GNn(".pick-condition"),
                l = this.GNn(".params-done");
            if (
                (jk.u.it(),
                (this.Bhn = [
                    this.h$n($k.ONn, "-add", { button: "event-sheet-add-event-link" }, { message: h }),
                    this.h$n($k.VNn, "-object", { "object-type-tag": s, "event-tag": e }, { message: o }),
                    this.h$n($k.WNn, "-condition", { "ac-id": n }, { message: a }),
                ]),
                Array.isArray(r) && r.length > 0)
            )
                for (const t of r) {
                    const i = t.id;
                    "string" != typeof i && this._Nn(),
                        this.Bhn.push(
                            this.h$n(
                                $k.HNn,
                                "-param-" + i,
                                { "param-id": i },
                                {
                                    Njn: t.value || this.INn(`.${i}-value`),
                                    message: this.PNn(`.${i}-text`),
                                    $jn: this.PNn(`.${i}-text2`),
                                }
                            )
                        );
                }
            this.Bhn.push(
                this.h$n($k.ONn, "-done", { button: "parameters-dialog-done", "can-skip": !0 }, { message: l })
            );
        }
    };
}
{
    const zk = self.t,
        Vk = self.SNn;
    window.RNn.hxt = class extends self.RNn {
        constructor(t, i) {
            super(t, i);
            const e = i["event-tag"],
                s = i["object-type-tag"],
                n = i["ac-id"],
                r = i.params;
            ("string" == typeof e && "string" == typeof s && "string" == typeof n) || this._Nn(),
                zk.u.o("tours._common.add-action");
            const h = this.GNn(".click-add-link"),
                o = this.GNn(".pick-object"),
                a = this.GNn(".pick-action"),
                l = this.GNn(".params-done");
            if (
                (zk.u.it(),
                (this.Bhn = [
                    this.h$n(Vk.ONn, "-add", { button: "add-action-link", "event-tag": e }, { message: h }),
                    this.h$n(Vk.VNn, "-object", { "object-type-tag": s }, { message: o }),
                    this.h$n(Vk.WNn, "-action", { "ac-id": n }, { message: a }),
                ]),
                Array.isArray(r) && r.length > 0)
            )
                for (const t of r) {
                    const i = t.id;
                    "string" != typeof i && this._Nn(),
                        this.Bhn.push(
                            this.h$n(
                                Vk.HNn,
                                "-param-" + i,
                                { "param-id": i },
                                {
                                    Njn: t.value || this.INn(`.${i}-value`),
                                    message: this.PNn(`.${i}-text`),
                                    $jn: this.PNn(`.${i}-text2`),
                                }
                            )
                        );
                }
            this.Bhn.push(
                this.h$n(Vk.ONn, "-done", { button: "parameters-dialog-done", "can-skip": !0 }, { message: l })
            );
        }
    };
}
{
    const Wk = self.t,
        Hk = self.lang,
        Kk = self.GBn,
        qk = self.Mei,
        Xk = self.WBn,
        Yk = self.jei,
        Jk = self.pJ,
        Zk = "c3-addon-files",
        Qk = "c3-addon-list",
        tO = "c3-dev-addon-list",
        iO = "c3-remembered-addons",
        eO = new Set(["plugin", "behavior", "effect", "theme", "tour"]),
        sO = new Set(["plugin", "behavior"]),
        nO = new Set(["conditions", "actions", "expressions"]),
        rO = { plugin: "plugins/", behavior: "behaviors/" },
        hO = { plugin: ["plugin.js", "type.js", "instance.js"], behavior: ["behavior.js", "type.js", "instance.js"] },
        oO = {
            plugin: { "built-in": Kk, addon: qk, project: qk, dev: qk },
            behavior: { "built-in": Xk, addon: Yk, project: Yk, dev: Yk },
            effect: { "built-in": Jk, addon: Jk, project: Jk, dev: Jk },
        };
    class aO extends Wk.Event.aG {
        constructor() {
            super(),
                (this.ZAe = null),
                (this.o$n = !1),
                (this.a$n = null),
                (this.l$n = null),
                (this.u$n = null),
                (this.c$n = null),
                (this.d$n = null),
                (this.f$n = {
                    plugin: new Map(),
                    behavior: new Map(),
                    effect: new Map(),
                    theme: new Map(),
                    tour: new Map(),
                }),
                (this.p$n = new Map()),
                (this.m$n = null),
                (this.w$n = 0),
                (this.g$n = 0);
        }
        y$n() {
            return this.o$n;
        }
        b$n(t, i) {
            return !(
                ("plugin" !== t && "behavior" !== t) ||
                ("addon" !== i.source && "dev" !== i.source && "project" !== i.source) ||
                1 !== (i.OBn["sdk-version"] ?? 1)
            );
        }
        yUn(t, i) {
            const e = { eJe: null, source: "built-in", path: null, de: i, v$n: null, bBn: null, files: null };
            this.f$n.effect.set(t, e);
        }
        async S$n(t) {
            (this.ZAe = t),
                (this.o$n = "animation" !== t.Mke() && Wk.E4s.ZRs("safe-mode")),
                await Promise.all([this.x$n(), this.M$n("theme")]),
                await Wk.u.gYt();
        }
        async E$n() {
            await Promise.all([this.C$n(), this.M$n("tour")]);
        }
        _$n() {
            for (const t of this.f$n.tour.values()) t.de && t.de.fjt();
        }
        async gYt() {
            let t;
            (t = Wk.C7s() ? this.T$n() : this.I$n()), await Promise.all([t, this.P$n()]), this.G$n();
        }
        I$n() {
            return Promise.all([this.A$n("plugin"), this.A$n("behavior")]);
        }
        async A$n(t) {
            const i = (await Wk.MNt(rO[t] + t + "List.json"))[t + "List"],
                e = [];
            for (const [s, n] of Object.entries(i)) {
                const i = n.productTypes || "all";
                self.app.xXs(i) && e.push(this.R$n(t, n, s, "dev"));
            }
            return Promise.all(e);
        }
        T$n() {
            return Promise.all([this.k$n("plugin"), this.k$n("behavior")]);
        }
        async k$n(t) {
            const i = rO[t],
                e = Wk.MNt(i + "allAces.json"),
                s = Wk.MNt(i + "allSvgIcons.json"),
                n = Wk.MNt(i + t + "List.json"),
                r = i + "allEditor" + ("plugin" === t ? "Plugins" : "Behaviors") + ".js";
            await Wk.ya(r);
            const h = (await n)[t + "List"],
                o = [];
            for (const [i, e] of Object.entries(h)) {
                const s = e.productTypes || "all";
                self.app.xXs(s) && o.push(this.R$n(t, e, i, "release"));
            }
            await Promise.all(o);
            const a = await e;
            for (const [i, e] of Object.entries(a)) this.f$n[t].get(i).v$n = e;
            const l = await s;
            for (const [i, e] of Object.entries(l)) this.f$n[t].get(i).bBn = e;
        }
        async R$n(t, i, e, s) {
            const n = rO[t] + i.path + "/";
            Wk.u.ij(n + "lang");
            let r = { eJe: null, source: "built-in", path: n, de: null, v$n: null, bBn: null, files: null };
            if ((this.f$n[t].set(e, r), "dev" === s)) {
                const e = [];
                e.push(Wk.MNt(n + "aces.json").then((t) => (r.v$n = t)));
                const s = i.editorScripts || hO[t];
                for (const t of s) e.push(Wk.ya(n + t));
                await Promise.all(e);
            }
            this.g$n++;
        }
        async P$n() {
            self.app.zue() &&
                (await Promise.all([this.M$n("plugin"), this.M$n("behavior"), this.M$n("effect")]), await Wk.u.gYt());
        }
        M$n(t) {
            const i = this.O$n(t).then((i) => Promise.all(i.map((i) => this.D$n(t, i)))),
                e = this.F$n(t).then((i) => Promise.all(Object.entries(i).map((i) => this.L$n(t, i[0], i[1]))));
            return Promise.all([i, e]);
        }
        async x$n() {
            const t = await fetch(Wk.xa() + "theme/defaultThemeList.json");
            if (!t.ok) throw new Error("unable to load theme list");
            const i = (await t.json()).themes;
            return Promise.all(i.map((t) => this.B$n(t)));
        }
        B$n(t) {
            return Wk.vu(t), this.L$n("theme", t, Wk.xa() + "theme/" + t + "/addon.json", !0);
        }
        async C$n() {
            const t = await fetch(Wk.xa() + "tours/defaultToursList.json");
            if (!t.ok) throw new Error("unable to load tours list");
            const i = (await t.json()).tours,
                e = [];
            for (const [t, s] of Object.entries(i)) {
                const i = s.productTypes || "all";
                self.app.xXs(i) && e.push(this.U$n(t));
            }
            await Promise.all(e);
        }
        U$n(t) {
            return Wk.vu(t), this.L$n("tour", t, Wk.xa() + "tours/" + t + "/addon.json", !0);
        }
        async D$n(t, i, e, s) {
            Wk.vu(t), Wk.vu(i);
            let n = null;
            if (
                (e
                    ? ((n = this.p$n.get(e)),
                      n || ((n = { plugin: new Map(), behavior: new Map(), effect: new Map() }), this.p$n.set(e, n)))
                    : (n = this.f$n),
                n[t].has(i))
            )
                throw new Error(`duplicate addon id '${i}'`);
            const r = e ? Promise.resolve(s) : Wk.Aue.N$n(t, i),
                h = await r;
            if (!h)
                return void console.error(
                    `[Addons] Missing addon file for ${t} '${i}' - addon not loaded. Try reinstalling the addon.`
                );
            const o = await Wk.pts(h["addon.json"]);
            if (o.hasOwnProperty("min-construct-version")) {
                const t = Wk.DDn(o["min-construct-version"]);
                if (t > Wk.ON.x8s)
                    return void console.error(
                        `[Addons] Addon '${i}' cannot be loaded in this version of Construct. The addon specifies a minimum Construct version of ${Wk.uhi(t)}, and you are currently using ${Wk.ON.fhi}.`
                    );
            }
            const a = {
                eJe: null,
                source: e ? "project" : "addon",
                path: null,
                de: null,
                OBn: o,
                v$n: null,
                bBn: null,
                files: h,
                Gb: e || null,
            };
            n[t].set(i, a), this.w$n++, await this.j$n(t, a, this.o$n), this.g$n++;
        }
        async L$n(t, i, e, s) {
            Wk.vu(t), Wk.vu(i), Wk.vu(e);
            const n = Wk.nj(e),
                r = this.f$n;
            if (r[t].has(i)) throw new Error(`duplicate addon id '${i}'`);
            const h = await Wk.MNt(e);
            if (h.hasOwnProperty("min-construct-version")) {
                const t = Wk.DDn(h["min-construct-version"]);
                if (t > Wk.ON.x8s)
                    return void console.error(
                        `[Addons] Addon '${i}' cannot be loaded in this version of Construct. The addon specifies a minimum Construct version of ${Wk.uhi(t)}, and you are currently using ${Wk.ON.fhi}.`
                    );
            }
            const o = {
                eJe: null,
                source: s ? "built-in" : "dev",
                path: n,
                de: null,
                OBn: h,
                v$n: null,
                bBn: null,
                files: {},
                UBn: {},
                Gb: null,
            };
            if ((r[t].set(i, o), this.w$n++, h.id !== i))
                throw new Error(
                    `addon.json specifies id '${h.id}' but expected id '${i}'; uninstall addons before changing the id`
                );
            if (!h.hasOwnProperty("file-list"))
                throw new Error(
                    `developer addon '${i}' is missing 'file-list' in addon.json - check the SDK documentation`
                );
            await Promise.all(
                h["file-list"].map(async (i) => {
                    if ("tour" === t && Wk.C7s() && i.endsWith("/en-US.json")) return;
                    const e = await Wk.ma(n + i);
                    (o.files[i] = e), (o.UBn[i] = n + i);
                })
            ),
                await this.j$n(t, o, (s && Wk.u.vje()) || this.o$n),
                s || console.log(`[Addons] Loaded developer ${t} '${i}' from ${e}`),
                this.g$n++;
        }
        j$n(t, i, e) {
            const s = [],
                n = i.OBn,
                r = n.id;
            if ("theme" === t) i.de = Wk.m(self.zUn, n, i);
            else if ("tour" === t)
                try {
                    i.de = Wk.m(self.QUn, n, i);
                } catch (t) {
                    console.error(`Error loading guided tour addon '${r}': `, t), (i.de = null);
                }
            else if ("effect" === t) {
                if (!this.o$n) {
                    if (!i.files["addon.json"]) throw new Error("effect addon missing file: addon.json");
                    s.push(
                        (async () => {
                            const t = await Wk.pts(i.files["addon.json"]),
                                e = t["supported-renderers"],
                                s = !e || e.includes("webgl"),
                                n = e && e.includes("webgl2"),
                                r = e && e.includes("webgpu");
                            if (s && !i.files["effect.fx"]) throw new Error("effect addon missing file: effect.fx");
                            if (n && !i.files["effect.webgl2.fx"])
                                throw new Error("effect addon missing file: effect.webgl2.fx");
                            if (r && !i.files["effect.wgsl"]) throw new Error("effect addon missing file: effect.wgsl");
                            let h = "",
                                o = "",
                                a = "";
                            s && (h = await Wk.Cle(i.files["effect.fx"])),
                                n && (o = await Wk.Cle(i.files["effect.webgl2.fx"])),
                                r && (a = await Wk.Cle(i.files["effect.wgsl"])),
                                (i.de = Wk.m(self.pJ, "", t, h, o, a, i));
                        })()
                    );
                }
            } else if (!this.o$n && !this.b$n(t, i)) {
                const e = n["editor-scripts"];
                for (const n of e) {
                    if (!i.files.hasOwnProperty(n))
                        throw new Error(`cannot find addon '${r}' "editor-scripts" file '${n}'`);
                    const e = URL.createObjectURL(i.files[n]);
                    s.push(Wk.ya(e).then((i) => i.setAttribute("data-comment", t + "-" + r)));
                }
                if (!i.files["aces.json"]) throw new Error("addon missing file: aces.json");
                s.push(Wk.pts(i.files["aces.json"]).then((t) => (i.v$n = t)));
            }
            return e || this.oNn(r, i.files, "lang/"), Promise.all(s);
        }
        oNn(t, i, e) {
            const s = `${e}en-US.json`;
            if (!i.hasOwnProperty(s)) throw new Error(`cannot find required en-US.json language file in addon '${t}'`);
            const n = URL.createObjectURL(i[s]);
            Wk.u.Cje(n);
            const r = self.app.Lmt();
            if ("en-US" !== r) {
                const t = `${e}${r}.json`;
                if (i.hasOwnProperty(t)) {
                    const e = URL.createObjectURL(i[t]);
                    Wk.u._je(e);
                }
            }
        }
        whi(t) {
            Wk.qm(t, self.Ga), (this.m$n = t);
        }
        NBn(t, i, e) {
            let s;
            if ((Wk.vu(i), Wk.yp(e), (s = this.m$n ? this.p$n.get(this.m$n)[t].get(i) : this.f$n[t].get(i)), !s))
                throw new Error(
                    `Failed to register addon ID '${i}' because no addon with that ID is loaded. It may have previously been installed with a different ID, or the ID in plugin.js may not match the one specified in addon.json. Uninstall addons before changing their ID. Loaded addon IDs are: ${[...this.f$n[t].keys()].join(", ")}`
                );
            if (s.eJe) throw new Error(`already registered addon id '${i}'`);
            if (((s.eJe = e), !this.o$n && !s.v$n)) throw new Error(`addon '${i}' missing aces.json`);
        }
        $$n() {
            const t = new Set();
            for (const i of sO) for (const [e, s] of this.f$n[i]) s.eJe || (t.add(e), this.f$n[i].delete(e));
            if (t.size) {
                const i = [...t];
                let e;
                (e = i.length > 10 ? i.slice(0, 10).join(", ") + "... (" + (i.length - 10) + " more)" : i.join(", ")),
                    self.app.P7s("AddonsFailedLoad", e);
                Wk.ti.Ze.Ke("OK").pr(new Wk.nS(self.ej("ui.errors.failed-to-load-addons", e), { mq: !0 }));
            }
        }
        bUn() {
            return this.g$n;
        }
        vUn() {
            return this.w$n;
        }
        z$n(t, i, e) {
            let s;
            if ((Wk.vu(t), Wk.vu(i), e)) {
                const n = this.p$n.get(e);
                n && (s = n[t].get(i));
            }
            if ((s || (s = this.f$n[t].get(i)), !s)) return null;
            if (
                "effect" !== t &&
                !s.de &&
                (!this.o$n || ("addon" !== s.source && "dev" !== s.source)) &&
                !this.b$n(t, s)
            ) {
                const e = Wk.m(oO[t][s.source], Wk.m(s.eJe), s);
                try {
                    e.vBn(s.v$n);
                } catch (e) {
                    console.error(`[Construct] Error loading addon '${i}': `, e), this.f$n[t].delete(i);
                }
                s.de = e;
            }
            return s;
        }
        yf(t, i, e) {
            const s = this.z$n(t, i, e);
            if (!s) throw new Error(`cannot find ${t} with id '${i}'`);
            return s.de;
        }
        prs(t, i, e, s) {
            const n = this.z$n(t, i, e);
            return !(!s && n && ((this.o$n && ("addon" === n.source || "dev" === n.source)) || this.b$n(t, n))) && !!n;
        }
        vme(t, i) {
            Wk.vu(t);
            let e = [];
            if (i) {
                if (this.p$n.get(i)) for (const s of this.f$n[t].keys()) e.push(Wk.Roe(() => this.z$n(t, s, i)));
            }
            for (const i of this.f$n[t].keys()) e.push(Wk.Roe(() => this.z$n(t, i, null)));
            return Promise.all(e);
        }
        *addons(t, i, e) {
            Wk.vu(t);
            const s = new Set();
            if (i) {
                const e = this.p$n.get(i);
                if (e)
                    for (const i of e[t].values()) {
                        const t = i.de;
                        if (!t) throw new Error("must load all addons before iterating");
                        t.Fre() || (s.add(t.JD()), yield t);
                    }
            }
            for (const [i, n] of this.f$n[t].entries()) {
                const r = n.de;
                if (!r) {
                    if (this.o$n || this.b$n(t, n)) {
                        e &&
                            (yield {
                                V$n: t,
                                PBn: i,
                                $6s: n.OBn.author,
                                version: n.OBn.version,
                                W$n: n.OBn["sdk-version"] ?? 1,
                                source: n.source,
                            });
                        continue;
                    }
                    if ("tour" === t) continue;
                    throw new Error("must load all addons before iterating");
                }
                (!e && r.Fre()) || s.has(r.JD()) || (self.app.sO() && !r.Koe()) || (yield r);
            }
        }
        *H$n(t) {
            Wk.vu(t);
            for (const [i, e] of this.f$n[t].entries()) "addon" === e.source && (yield i);
        }
        SUn() {
            for (const t of this.f$n.effect.values()) t.de && t.de.fjt();
        }
        K$n() {
            return this.a$n
                ? Promise.resolve(this.a$n)
                : (this.u$n ||
                      (this.u$n = Promise.all([localforage.getItem(Qk), localforage.getItem(tO)]).then(
                          (t) => ((this.a$n = t[0]), (this.l$n = t[1]), (this.u$n = null), this.a$n)
                      )),
                  this.u$n);
        }
        async O$n(t) {
            Wk.vu(t);
            const i = await this.K$n();
            return i && i[t] ? i[t] : [];
        }
        async F$n(t) {
            return Wk.vu(t), await this.K$n(), this.l$n && this.l$n[t] ? this.l$n[t] : {};
        }
        q$n() {
            return this.c$n || (this.c$n = localforage.OBe({ name: Zk })), this.c$n;
        }
        N$n(t, i) {
            return this.q$n().getItem(t + "-" + i);
        }
        X$n(t) {
            if (!0 !== t["is-c3-addon"]) throw new Error("not a C3 addon");
            if (!eO.has(t.type)) throw new Error("invalid addon type");
            if (!(t.name && t.id && t.version && t.author && t.website && t.documentation && t.description))
                throw new Error("invalid addon json");
        }
        async phi(t, i, e, s = !1) {
            Wk.Et(t, Blob), Wk.qm(i, self.Ga), Wk.Gmt(e);
            const n = !!i,
                r = new Wk.pRt();
            try {
                await r.q2t(t);
                const h = r.h4t("addon.json");
                if (!h) throw new Error("missing addon.json");
                const o = await r.ets(h);
                this.X$n(o);
                const a = o.id,
                    l = o.type,
                    u = o["sdk-version"] ?? 1;
                if (("plugin" === l || "behavior" === l) && 1 === u) {
                    const t = new Error("sdkv1-addon");
                    throw ((t.PBn = a), (t.Y$n = o.author), t);
                }
                if (o.hasOwnProperty("min-construct-version")) {
                    const t = Wk.DDn(o["min-construct-version"]);
                    if (t > Wk.ON.x8s) {
                        const i = new Error("min-version");
                        throw ((i.J$n = t), i);
                    }
                }
                if (!n && this.prs(l, a, null, !0)) {
                    if (!s) {
                        const t = Wk.ti.Ze.Ke("Confirm"),
                            i = this.f$n[l].get(a).de,
                            e = i ? i.Ote() : "(unknown)",
                            s = o.version;
                        Wk.u.o("ui.update-addon-prompt");
                        const n = t.pr({
                            caption: Hk(".caption"),
                            message: self.tG(".message", e, s),
                            jT: Hk(".update"),
                            vT: Hk("common.cancel"),
                        });
                        Wk.u.it();
                        if (null === (await n)) return;
                    }
                    await this.Z$n(l, a, "addon");
                }
                let c = !1;
                n && (c = await this.Q$n(t));
                let d = null;
                if (c || s) d = "allowed";
                else {
                    const t = Wk.ti.Ze.Ke("AddonConfirmInstall");
                    d = await t.pr(o, n, e);
                }
                if (null === d) {
                    if (n) throw new Error("addon install failed");
                    return !1;
                }
                if ("remember" === d)
                    try {
                        await this.tzn(t);
                    } catch (t) {
                        console.error("Error remembering addon: ", t);
                    }
                let f = t;
                n && Wk.nqt(t) && (f = await Wk.wts(t));
                const p = { _c3addon: f },
                    m = [];
                for (const t of r.cqe()) m.push(r.t4t(t).then((i) => (p[t.filename] = i)));
                if ((await Promise.all(m), n)) return await this.D$n(l, a, i, p), !0;
                {
                    const t = this.q$n();
                    try {
                        await t.setItem(l + "-" + a, p);
                        let i = await localforage.getItem(Qk);
                        return (
                            i
                                ? (i.theme || (i.theme = []), i.tour || (i.tour = []))
                                : (i = { plugin: [], behavior: [], effect: [], theme: [], tour: [] }),
                            i[l].includes(a) ? !1 : (i[l].push(a), await localforage.setItem(Qk, i), !0)
                        );
                    } catch (t) {
                        return self.app.cme(t), !1;
                    }
                }
            } finally {
                r.e4t();
            }
        }
        async izn(t, i, e) {
            if ((Wk.vu(t), Wk.x$(i), Wk.Gmt(e), !self.app.Hue())) throw new Error("developer mode not enabled");
            const s = i.id,
                n = i.type,
                r = i["sdk-version"] ?? 1;
            if (("plugin" === n || "behavior" === n) && 1 === r) {
                const t = new Error("sdkv1-addon");
                throw ((t.PBn = s), (t.Y$n = i.author), t);
            }
            if (this.prs(n, s, null, !0)) throw new Error(`addon id '${s}' already installed`);
            if (i.hasOwnProperty("min-construct-version")) {
                const t = Wk.DDn(i["min-construct-version"]);
                if (t > Wk.ON.x8s) {
                    console.error(
                        `[Construct] Cannot install dev mode addon: the minimum Construct version required is ${Wk.uhi(t)}, and you are currently using ${Wk.ON.fhi}.`
                    );
                    const i = new Error("min-version");
                    throw ((i.J$n = t), i);
                }
            }
            let h = await localforage.getItem(tO);
            if ((h || (h = {}), h[n] || (h[n] = {}), h[n].hasOwnProperty(s)))
                throw new Error(`dev addon '${s}' already installed; uninstall it first to reinstall`);
            h[n][s] = t;
            try {
                await localforage.setItem(tO, h);
            } catch (t) {
                self.app.cme(t);
            }
        }
        Z$n(t, i, e) {
            return "dev" === e ? this.ezn(t, i) : this.szn(t, i);
        }
        async szn(t, i) {
            const e = this.q$n();
            try {
                await e.removeItem(t + "-" + i);
            } catch (t) {
                (() => {})("Error removing addon files: ", t);
            }
            const s = await localforage.getItem(Qk);
            if (s) {
                Wk.xei(s[t], i);
                try {
                    await localforage.setItem(Qk, s);
                } catch (t) {
                    self.app.cme(t);
                }
            }
        }
        async ezn(t, i) {
            const e = await localforage.getItem(tO);
            if (!e || !e[t]) return;
            delete e[t][i];
            try {
                await localforage.setItem(tO, e);
            } catch (t) {
                self.app.cme(t);
            }
        }
        nzn(t) {
            const i = this.p$n.get(t);
            i && (this.rzn(i.plugin), this.rzn(i.behavior), this.rzn(i.effect), this.p$n.delete(t));
        }
        rzn(t) {
            for (const i of t.values()) i.de && i.de.Ut();
            t.clear();
        }
        async tzn(t) {
            const i = await Wk.iEs(t),
                e = await Wk.Crypto.eEs(i);
            let s = await localforage.getItem(iO);
            s || (s = []), s.includes(e) || (s.push(e), await localforage.setItem(iO, s));
        }
        async Q$n(t) {
            const i = await Wk.iEs(t),
                e = await Wk.Crypto.eEs(i);
            let s = await localforage.getItem(iO);
            return !!s && s.includes(e);
        }
        mhi(t) {
            Wk.Et(t, self.Ga);
            const i = this.p$n.get(t);
            if (i) for (const t of i.effect.values()) t.de.fjt();
        }
        async hzn() {
            Wk.ZJ("PreParseACDisplayTexts"),
                await Promise.all([this.ozn("plugin"), this.ozn("behavior")]),
                Wk.dq("PreParseACDisplayTexts");
        }
        ozn(t) {
            Wk.vu(t);
            const i = [];
            for (const e of this.f$n[t].values())
                ((!this.o$n && !this.b$n(t, e)) || e.de) &&
                    (self.assert(e.de, "expected addon instance to be created by now"),
                    i.push(Wk.Roe(() => this.azn(e.de))));
            return Promise.all(i);
        }
        azn(t) {
            return Promise.all([...t.mOt(), ...t.actions()].map((t) => Wk.Roe(() => t.RXs())));
        }
        async lzn() {
            const t = self.app.$J().theme;
            t && this.prs("theme", t) && ((this.d$n = this.yf("theme", t)), await this.d$n.AXe());
        }
        async uzn() {
            const t = self.app.$J().theme;
            t && this.prs("theme", t) && ((this.d$n = this.yf("theme", t)), await this.d$n.YUn(), await self.app.Amn());
        }
        KYe() {
            return this.d$n;
        }
        czn(t) {
            return eO.has(t);
        }
        G$n() {
            (self.C3SDK_ListAddonIDs = (t) => {
                this.dzn(t);
            }),
                (self.C3SDK_ListACEIDs = (t, i, e) => {
                    this.fzn(t, i, e);
                });
        }
        async dzn(t) {
            if (eO.has(t)) {
                await this.vme(t), console.log(`[SDK] Listing all installed ${t} IDs:`);
                for (const i of this.addons(t)) console.log(`"${i.JD()}" (${i.Zn()})`);
            } else (() => {})(`Invalid addon type: passed '${t}', must be one of: ${[...eO].join(",")}`);
        }
        async fzn(t, i, e) {
            if (!sO.has(t))
                return void (() => {})(`Invalid addon type: passed '${t}', must be one of: ${[...sO].join(",")}`);
            if ("string" != typeof i) return void (() => {})(`Invalid addon ID: expected string, got '${typeof i}'`);
            if (!this.prs(t, i)) return void (() => {})(`No '${t}' with ID '${i}' found`);
            if (!nO.has(e))
                return void (() => {})(`Invalid ACE type: passed '${e}', must be one of: ${[...nO].join(",")}`);
            const s = this.yf(t, i);
            for (const t of s.SEe(e)) {
                let i;
                i = t instanceof self.VWs ? t.UXs() : t.wWs();
                let e = `"${t.JD()}" (${i})`;
                if (t.EXs()) {
                    e += " - params: ";
                    const i = [];
                    for (let e = 0, s = t.I$t(); e < s; ++e) {
                        const s = t.BCt(e);
                        i.push(`${s.JD()} (${s.lmt()})`);
                    }
                    console.log(e, i);
                } else console.log(e);
            }
        }
    }
    Wk.Aue = Wk.m(aO);
}
{
    const lO = self.t,
        uO = self.lang,
        cO = self.ej,
        dO = lO.sj(import.meta.url),
        fO = dO.getElementById("aboutDialog"),
        pO = lO.nj(dO.URL);
    lO.u.ij(pO + "lang");
    const mO = "About",
        wO = (lO.ti.Tj.pzn = class extends lO.ti.Ze {
            constructor() {
                super(fO),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this.mzn = this.Jmt("localStorageQuota")),
                    (this.wzn = this.Jmt("localStoragePersistent")),
                    (this.gzn = this.Jmt("requestPersistentStorage")),
                    (this.gzn.onclick = () => this.yzn()),
                    (this.Jmt("viewReleaseNotes").onclick = () =>
                        self.app.SN(lO.ON.URL.LSe + lO.ON.URL.bDn + lO.ON.FDn, "ReleaseNotes")),
                    (this.Jmt("viewAccountInfo").onclick = function () {
                        lO.ti.Ze.Ke("AccountInfo").pr(self.app.vst("useraccount"));
                    }),
                    (this.Jmt("aboutShowPlatformInfo").onclick = function () {
                        lO.ti.Ze.Ke("PlatformInfo").pr();
                    }),
                    (this.Jmt("aboutShowLegalInfo").onclick = function () {
                        lO.ti.Ze.Ke("LegalInfo").pr();
                    }),
                    (this.Jmt("aboutShowLicenseAgreement").onclick = function () {
                        lO.ti.Ze.Ke("EULA").pr();
                    }),
                    (this.Jmt("aboutShowBundledGameLicense").onclick = function () {
                        lO.ti.Ze.Ke("BundledContentLicense").pr();
                    }),
                    (this.Jmt("privacyPolicy").onclick = function () {
                        lO.ti.Ze.Ke("PrivacyPolicy").pr();
                    });
                const t = lO.ti.VW.Eqe(),
                    i = this.Jmt("aboutDialogC3logo");
                let e = "";
                "animation" === self.app.Mke()
                    ? (i.classList.add("animation"), (e = t ? "loader/calogo-darkbg.svg" : "loader/calogo-lightbg.svg"))
                    : (i.classList.add("games"), (e = t ? "loader/c3logo-darkbg.svg" : "loader/c3logo-lightbg.svg")),
                    (i.src = e),
                    (i.alt = uO("ui.start-page.construct-logo"));
            }
            fgt() {
                const t = self.app;
                lO.u.o("ui.dialogs.about"),
                    (this.OWi.textContent = uO("common.ok")),
                    this.hr(uO(".caption")),
                    (this.Jmt("c3versioninfo").textContent = cO(".release-number-" + t.jke(), lO.ON.fhi)),
                    (this.Jmt("viewReleaseNotes").textContent = cO(".view-release-notes", lO.ON.fhi)),
                    (this.Jmt("aboutShowPlatformInfo").textContent = uO(".platform-information")),
                    (this.Jmt("accountHeader").textContent = uO(".account-header")),
                    (this.Jmt("viewAccountInfo").textContent = uO(".view-account-information")),
                    (this.Jmt("localStorageHeader").textContent = uO(".local-storage-header")),
                    (this.gzn.textContent = uO(".request-persistent-storage")),
                    (this.Jmt("aboutConstructHeader").textContent = uO(".about-construct-header")),
                    (this.Jmt("officialWebsite").textContent = uO(".official-website")),
                    (this.Jmt("editorCredit").textContent = uO(".editor-credit")),
                    (this.Jmt("websiteCredit").textContent = uO(".website-credit")),
                    (this.Jmt("designCredit").textContent = uO(".design-credit")),
                    (this.Jmt("thanksCredit").textContent = uO(".thanks-credit")),
                    (this.Jmt("aboutShowLicenseAgreement").textContent = uO(".eula")),
                    (this.Jmt("aboutShowBundledGameLicense").textContent = uO(".bundled-project-license")),
                    (this.Jmt("privacyPolicy").textContent = uO(".privacy-policy")),
                    (this.Jmt("aboutShowLegalInfo").textContent = uO(".legal-information")),
                    (this.Jmt("timeSpentInEditorLabel").textContent = uO(".time-spent-in-editor")),
                    (this.Jmt("thanksNote").textContent = uO(".thanks-note")),
                    lO.hrt(this.Jmt("quote"), self.Hpt(".quote")),
                    (this.Jmt("mainWebsiteLink").onclick = () => t.SN(lO.ON.URL.fDn, "AboutDialog", "OfficialWebsite"));
                const i = this.Jmt("storageCleanup");
                (i.textContent = uO(".storage-cleanup")),
                    (i.onclick = () => {
                        lO.ti.Ze.Ke("StorageCleanup").pr();
                    });
                const e = this.Jmt("aboutUsLink");
                (e.textContent = uO(".about-us")), (e.onclick = () => t.SN(lO.ON.URL.pDn, "AboutDialog", "AboutUs"));
                const s = this.Jmt("helpLink");
                (s.textContent = uO(".help")), (s.onclick = () => t.SN(lO.ON.URL.rrt, "AboutDialog", "Help"));
                const n = this.Jmt("forumsLink");
                (n.textContent = uO(".forums")), (n.onclick = () => t.SN(lO.ON.URL._Dn, "AboutDialog", "Forum"));
                const r = this.Jmt("tutorialsLink");
                (r.textContent = uO(".tutorials")), (r.onclick = () => t.SN(lO.ON.URL.irt, "AboutDialog", "Tutorials"));
                const h = this.Jmt("addonExchangeLink");
                (h.textContent = uO(".get-addons")), (h.onclick = () => t.SN(lO.ON.URL.Que, "AboutDialog", "Addons"));
                const o = this.Jmt("contributeTranslationsLink");
                (o.textContent = uO(".contribute-translations")),
                    (o.onclick = () => t.SN(lO.ON.URL.RDn, "AboutDialog", "ContributeTranslations"));
                const a = this.Jmt("suggestFeaturesLink");
                (a.textContent = uO(".suggest-features")), (a.onclick = () => t.SN(lO.ON.URL.ADn));
                const l = this.Jmt("reportIssuesLink");
                (l.textContent = uO(".report-issues")), (l.onclick = () => t.SN(lO.ON.URL.GDn)), lO.u.it();
            }
            pr(t) {
                return this.bzn(), this.vzn(), super.pr(t);
            }
            bzn() {
                lO.Y$.XRe
                    ? ((this.mzn.textContent = uO("common.ellipsis")),
                      navigator.storage
                          .estimate()
                          .then((t) => {
                              const i = t.quota,
                                  e = t.usage,
                                  s = Math.round((1e3 * e) / i) / 10;
                              this.mzn.textContent = cO("ui.dialogs.about.storage-usage", lO.nbe(e), lO.nbe(i), s);
                          })
                          .catch((t) => {
                              (() => {})("Error estimating storage usage: ", t),
                                  (this.mzn.textContent = uO("ui.dialogs.about.storage-usage-unavailable"));
                          }))
                    : (this.mzn.textContent = uO("ui.dialogs.about.storage-usage-unavailable")),
                    lO.Y$.qRe
                        ? ((this.wzn.textContent = ""),
                          this.wzn.classList.remove("storagePersisted"),
                          this.wzn.classList.remove("storageNotPersisted"),
                          this.gzn.setAttribute("hidden", ""),
                          navigator.storage.persisted().then((t) => {
                              t
                                  ? (this.wzn.classList.add("storagePersisted"),
                                    (this.wzn.textContent = uO("ui.dialogs.about.storage-persisted")))
                                  : (this.wzn.classList.add("storageNotPersisted"),
                                    (this.wzn.textContent = uO("ui.dialogs.about.storage-not-persisted-prefix")),
                                    this.gzn.removeAttribute("hidden"));
                          }))
                        : (this.wzn.textContent = uO("ui.dialogs.about.storage-status-unavailable"));
            }
            vzn() {
                localforage.getItem("c3-time-spent-in-editor").then((t) => {
                    "number" != typeof t && (t = 0);
                    const i = this.Jmt("timeSpentInEditor");
                    i.textContent = t >= 31536e5 ? "Very clever." : lO.hUe(t, { rUe: !1 });
                });
            }
            yzn() {
                navigator.storage.persist().then((t) => {
                    if ((this.bzn(), !t)) {
                        lO.ti.Ze.Ke("OK").pr(uO("ui.dialogs.about.persistent-storage-denied"));
                    }
                });
            }
            Cz() {}
        });
    lO.ti.SK.zgt.addEventListener("load", () => {
        lO.ti.Ze.Ugt(mO, wO);
    });
}
{
    const gO = self.t,
        yO = self.lang,
        bO = gO.sj(import.meta.url),
        vO = bO.getElementById("addonConfirmInstallDialog"),
        SO = gO.nj(bO.URL);
    gO.u.ij(SO + "lang");
    const xO = "AddonConfirmInstall",
        MO = (gO.ti.Tj.Szn = class extends gO.ti.Ze {
            constructor() {
                super(vO),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this._Wt = this.Jmt("cancelButton")),
                    (this._Wt.onclick = () => this.JLt()),
                    (this.xzn = this.Jmt("dontAskAgain")),
                    (this.Mzn = !1),
                    gO.m(gO.ti.met, self.app.krt("warning"), this.Jmt("iconWrap"));
            }
            fgt() {
                gO.u.o("ui.dialogs.addonConfirmInstall"),
                    this.hr(yO(".caption")),
                    gO.hrt(this.Jmt("headerText"), gO.m(gO.nS, yO(".header-text"), { mq: !0 })),
                    (this.Jmt("addonNameLabel").textContent = yO(".name")),
                    (this.Jmt("addonVersionLabel").textContent = yO(".version")),
                    (this.Jmt("addonTypeLabel").textContent = yO(".type")),
                    (this.Jmt("addonAuthorLabel").textContent = yO(".author")),
                    (this.Jmt("addonWebsiteLabel").textContent = yO(".website")),
                    (this.Jmt("addonDocumentationLabel").textContent = yO(".documentation")),
                    (this.Jmt("addonDescriptionLabel").textContent = yO(".description")),
                    (this.Jmt("dontAskAgainLabel").textContent = yO(".dont-ask-again")),
                    (this.OWi.textContent = yO(".install")),
                    (this._Wt.textContent = yO("common.cancel")),
                    gO.u.it();
            }
            pr(t, i, e) {
                gO.x$(t),
                    gO.u.o("ui.dialogs.addonConfirmInstall"),
                    (this.Jmt("addonName").textContent = t.name),
                    (this.Jmt("addonVersion").textContent = t.version),
                    (this.Jmt("addonType").textContent = yO(".type-" + t.type)),
                    (this.Jmt("addonAuthor").textContent = t.author);
                const s = this.Jmt("addonWebsite");
                (s.textContent = t.website), (s.href = t.website);
                const n = this.Jmt("addonDocumentation");
                return (
                    (n.textContent = t.documentation),
                    (n.href = t.documentation),
                    (this.Jmt("addonDescription").textContent = t.description),
                    (this.xzn.checked = !1),
                    (this.Mzn = i),
                    (this.Jmt("dontAskAgainWrap").style.display = i ? "" : "none"),
                    gO.u.it(),
                    super.pr(e)
                );
            }
            egt() {
                this.WD(!this.Mzn || this.xzn.checked ? "remember" : "forget");
            }
            Cz() {}
        });
    gO.ti.SK.zgt.addEventListener("load", () => {
        gO.ti.Ze.Ugt(xO, MO);
    });
}
{
    const EO = self.t,
        CO = self.lang,
        _O = EO.sj(import.meta.url),
        TO = _O.getElementById("addonUpdateReviewDialog"),
        IO = EO.nj(_O.URL);
    EO.u.ij(IO + "lang");
    const PO = "AddonUpdateReview",
        GO = (EO.ti.Tj.Ezn = class extends EO.ti.Ze {
            constructor() {
                super(TO),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this._Wt = this.Jmt("cancelButton")),
                    (this._Wt.onclick = () => this.JLt()),
                    (this._ht = this.Jmt("updateReviewContent"));
            }
            fgt() {
                const t = EO.u.z_("ui.dialogs.addonUpdateReview");
                (this.OWi.textContent = t(".update")), (this._Wt.textContent = CO("common.cancel"));
            }
            pr(t, i) {
                EO._T(t);
                const e = EO.u.z_("ui.dialogs.addonUpdateReview");
                return (
                    EO.hrt(
                        this.Jmt("headerWrap"),
                        EO.m(
                            EO.nS,
                            e.yT(".header.review-details", null, t.length) + "\n" + e(".header.bundled-addons-note"),
                            { mq: !0 }
                        )
                    ),
                    this.Czn(t),
                    super.pr(i)
                );
            }
            Czn(t) {
                for (const i of t) {
                    const t = document.createElement("div");
                    t.classList.add("addonUpdateWrap"), EO.hrt(t, this._zn(i)), this._ht.appendChild(t);
                }
            }
            _zn(t) {
                const i = EO.u.z_("ui.dialogs.addonUpdateReview"),
                    { version: e, Tzn: s, Izn: n, Pzn: r } = t.Gzn;
                let h = `[h2]${t.Azn}[/h2]\n`;
                (h += i.njt(".current-version", t.Rzn) + "\n"),
                    (h += i.njt(".update-version", e) + "\n"),
                    (h += i.njt(
                        ".published-date",
                        s.toLocaleString(self.app.Lmt(), { day: "numeric", month: "long", year: "numeric" })
                    )),
                    r && (h += `\n[a1]${i(".visit-addon-page")}[/a1]`);
                for (let t = n.length - 1; t >= 0; --t) {
                    const e = n[t];
                    (h += `\n\n[h3]${i.njt(".changes", e.version)}[/h3]\n`), (h += e.kzn);
                }
                return EO.m(EO.nS, h, { mq: !0, links: r ? [r] : [] });
            }
            Cz() {
                EO.ti.fMt(this._ht);
            }
        });
    EO.ti.SK.zgt.addEventListener("load", () => {
        EO.ti.Ze.Ugt(PO, GO);
    });
}
{
    const AO = self.t,
        RO = AO.sj(import.meta.url),
        kO = RO.getElementById("bundledContentLicenseDialog"),
        OO = (AO.nj(RO.URL), "BundledContentLicense"),
        DO = (AO.ti.Tj.Ozn = class extends AO.ti.Ze {
            constructor() {
                super(kO), (this.OWi = this.Jmt("okButton")), (this.OWi.onclick = () => this.egt());
            }
            fgt() {
                this.OWi.textContent = self.lang("common.close-dialog");
            }
            pr(t) {
                return super.pr(t);
            }
            Cz() {}
        });
    AO.ti.SK.zgt.addEventListener("load", () => {
        AO.ti.Ze.Ugt(OO, DO);
    });
}
{
    const FO = self.t,
        LO = FO.sj(import.meta.url),
        BO = LO.getElementById("eulaDialog"),
        UO = (FO.nj(LO.URL), "EULA"),
        NO = (FO.ti.Tj.Dzn = class extends FO.ti.Ze {
            constructor() {
                super(BO), (this.OWi = this.Jmt("okButton")), (this.OWi.onclick = () => this.egt());
            }
            fgt() {
                this.OWi.textContent = self.lang("common.close-dialog");
            }
            pr(t) {
                return super.pr(t);
            }
            Cz() {}
        });
    FO.ti.SK.zgt.addEventListener("load", () => {
        FO.ti.Ze.Ugt(UO, NO);
    });
}
{
    const jO = self.t,
        $O = self.lang,
        zO = jO.sj(import.meta.url),
        VO = zO.getElementById("exportSelectPlatformDialog"),
        WO = jO.nj(zO.URL);
    jO.u.ij(WO + "lang");
    const HO = "ExportSelectPlatform",
        KO = new Map([
            ["animation", 0],
            ["web", 1],
            ["apps", 2],
            ["mobile", 3],
            ["desktop", 4],
            ["mobile-and-desktop", 5],
            ["console", 6],
            ["other", 7],
            ["deprecated", 8],
        ]);
    function qO(t, i) {
        return KO.get(t[0]) - KO.get(i[0]);
    }
    const XO = (jO.ti.Tj.Fzn = class extends jO.ti.Ze {
        constructor() {
            super(VO),
                (this.kWt = this.Jmt("nextButton")),
                (this.kWt.onclick = () => this.egt()),
                (this._Wt = this.Jmt("cancelButton")),
                (this._Wt.onclick = () => this.JLt());
            let t = this.Jmt("exportPlatformIconView");
            (this.gMt = jO.m(jO.ti.Tj.yMt, t)),
                this.gMt.addEventListener("itemselect", (t) => this.YHi(t.item)),
                this.gMt.addEventListener("itemdoubletap", (t) => this.JP(t.item)),
                (this.bme = this.Jmt("exportPlatformDescription")),
                (this.tgt = null);
        }
        fgt() {
            jO.u.o("ui.dialogs.exportSelectPlatform"),
                this.hr($O(".caption")),
                (this.kWt.textContent = $O("common.next")),
                (this._Wt.textContent = $O("common.cancel"));
            const t = this.Jmt("helpLink");
            (t.textContent = $O("common.help")),
                (t.onclick = () => self.app.WO("overview/publishing-projects", "ExportSelectPlatformDialog")),
                jO.u.it();
        }
        pr(t, i) {
            jO.Et(t, self.Ga), (this.tgt = t);
            let e = super.pr(i);
            return (
                jO.xis
                    .gYt()
                    .then(() => this.Lzn())
                    .catch((t) => {
                        console.error("Error loading exporters: ", t);
                        jO.ti.Ze.Ke("OK").pr($O("ui.dialogs.exportSelectPlatform.error-loading-exporters"));
                    }),
                e
            );
        }
        Lzn() {
            const t = jO.xis,
                i = new Map();
            for (const e of t.bPe()) {
                let t = { WPe: e, Bzn: -1 },
                    s = e.IXs();
                i.has(s) ? i.get(s).push(t) : i.set(s, [t]);
                const n = e.DAe();
                for (let r = 0, h = n.length; r < h; ++r)
                    (t = { WPe: e, Bzn: r }), (s = n[r].IXs()), i.has(s) ? i.get(s).push(t) : i.set(s, [t]);
            }
            const e = [...i];
            e.sort(qO);
            for (const [t, i] of e) {
                const e = $O("model.exporter-category." + t);
                i.sort((t, i) => self.s_e.qAe(t.WPe, i.WPe));
                const s = this.gMt.Goe(e);
                for (const t of i) {
                    const i = t.WPe,
                        e = t.Bzn;
                    if (-1 === e) s.xO(i.Wos(i.Sm()), i.Zn(), { WPe: i, tag: i.Sm(), description: i.qte() });
                    else {
                        const t = i.DAe()[e];
                        s.xO(i.Wos(t.Sm()), t.Zn(), { WPe: i, tag: t.Sm(), description: i.SAe(t.Sm(), t.qte()) });
                    }
                }
            }
        }
        egt() {
            const t = this.gMt.sE();
            if (!t) return;
            const i = t.Zc();
            this.WD(i);
        }
        Cz() {
            this.gMt._x(), (this.tgt = null);
        }
        YHi(t) {
            t
                ? (this.kWt.removeAttribute("disabled"), jO.hrt(this.bme, t.Zc().description))
                : this.kWt.setAttribute("disabled", "");
        }
        JP(t) {
            this.egt();
        }
    });
    jO.ti.SK.zgt.addEventListener("load", () => {
        jO.ti.Ze.Ugt(HO, XO);
    });
}
{
    const YO = self.t,
        JO = self.lang,
        ZO = YO.sj(import.meta.url),
        QO = ZO.getElementById("exportStandardOptionsDialog"),
        tD = YO.nj(ZO.URL);
    YO.u.ij(tD + "lang");
    const iD = "ExportStandardOptions",
        eD = (YO.ti.Tj.Uzn = class extends YO.ti.Ze {
            constructor() {
                super(QO),
                    (this.kWt = this.Jmt("nextButton")),
                    (this.kWt.onclick = () => this.egt()),
                    (this._Wt = this.Jmt("cancelButton")),
                    (this._Wt.onclick = () => this.JLt()),
                    (this.Nzn = this.sti("exportDeduplicateImages")),
                    (this.jzn = this.sti("exportLosslessImageFormat")),
                    (this.$zn = this.sti("exportLossyImageFormat")),
                    (this.zzn = this.sti("exportOptimizeImages")),
                    (this.Vzn = this.sti("exportMinifyMode")),
                    (this.Wzn = this.Jmt("offlineSupportWrap")),
                    (this.Hzn = this.sti("exportOfflineSupport")),
                    (this.tgt = null),
                    (this.jzn.value = "webp"),
                    (this.$zn.value = "avif");
            }
            fgt() {
                YO.u.o("ui.dialogs.exportStandardOptions"),
                    this.hr(JO(".caption")),
                    (this.kWt.textContent = JO("common.next")),
                    (this._Wt.textContent = JO("common.cancel"));
                const t = this.Jmt("helpLink");
                (t.textContent = JO("common.help")),
                    (t.onclick = () => self.app.WO("overview/publishing-projects", "ExportStandardOptionsDialog")),
                    (this.Jmt("imageHeader").textContent = JO(".image-options")),
                    (this.Jmt("exportDeduplicateImagesLabel").textContent = JO(".deduplicate-images")),
                    (this.Jmt("exportLosslessImageFormatLabel").textContent = JO(".lossless-format")),
                    (this.Jmt("exportLossyImageFormatLabel").textContent = JO(".lossy-format")),
                    (this.Jmt("exportOptimizeImagesLabel").textContent = JO(".optimize-images")),
                    (this.Jmt("scriptHeader").textContent = JO(".script-options")),
                    YO.u.o(".minify-script"),
                    (this.Jmt("exportMinifyScriptDescription").textContent = JO(".description")),
                    (this.Jmt("exportMinifyModeLabel").textContent = JO(".mode.label"));
                for (let t = 0, i = this.Vzn.options.length; t < i; ++t) {
                    const i = this.Vzn.options[t];
                    i.textContent = JO(".mode." + i.value);
                }
                YO.u.it(),
                    (this.Jmt("otherHeader").textContent = JO(".other-options")),
                    (this.Jmt("exportOfflineSupportLabel").textContent = JO(".offline-support.label")),
                    YO.hrt(
                        this.Jmt("offlineSupportDescription"),
                        YO.m(YO.nS, JO(".offline-support.description"), {
                            links: [
                                () =>
                                    self.app.SN(
                                        "https://www.construct.net/tutorials/offline-games-construct-8",
                                        "ExportOfflineSupportLearnMore"
                                    ),
                            ],
                        })
                    ),
                    YO.u.it();
            }
            pr(t, i) {
                this.tgt = t.Gb;
                const e = t.KPe,
                    s = super.pr(i);
                YO.u.o("ui.dialogs.exportStandardOptions.minify-script");
                let n = JO(".description");
                const r = [];
                return (
                    this.tgt.yN() &&
                        ((n += " " + JO(".advanced-note")),
                        r.push(() =>
                            self.app.WO("scripting/guides/advanced-minification", "ExportMinifyAdvancedLearnMore")
                        )),
                    YO.hrt(this.Jmt("exportMinifyScriptDescription"), YO.m(YO.nS, n, { links: r })),
                    YO.u.it(),
                    (this.Wzn.style.display = e.M_e() ? "" : "none"),
                    (this.Hzn.checked = !0),
                    localforage
                        .getItem("export-std-options")
                        .then((t) => {
                            t &&
                                ((this.Nzn.checked = t.deduplicateImages),
                                (this.jzn.value = t.losslessFormat),
                                (this.$zn.value = t.lossyFormat),
                                (this.zzn.checked = t.optimizeImages || t.recompressImages),
                                (this.Vzn.value = t.minifyMode2 ?? "none"),
                                (this.Hzn.checked = "boolean" != typeof t.offlineSupport || t.offlineSupport));
                        })
                        .catch(YO.uC),
                    s
                );
            }
            async egt() {
                const t = self.app;
                "none" !== this.Vzn.value && (await t.iD())
                    ? t.qB(this.tgt, 28)
                    : (localforage
                          .setItem("export-std-options", {
                              deduplicateImages: this.Nzn.checked,
                              losslessFormat: this.jzn.value,
                              lossyFormat: this.$zn.value,
                              optimizeImages: this.zzn.checked,
                              minifyMode2: this.Vzn.value,
                              offlineSupport: this.Hzn.checked,
                          })
                          .catch(YO.uC),
                      this.WD({
                          YPe: this.Nzn.checked,
                          J_e: this.jzn.value,
                          H_e: this.$zn.value,
                          D_e: this.zzn.checked,
                          QPe: this.Vzn.value,
                          j_e: this.Hzn.checked,
                      }));
            }
            Cz() {
                this.tgt = null;
            }
        });
    YO.ti.SK.zgt.addEventListener("load", () => {
        YO.ti.Ze.Ugt(iD, eD);
    });
}
{
    const sD = self.t,
        nD = self.lang,
        rD = self.ej,
        hD = self.tG,
        oD = sD.sj(import.meta.url),
        aD = oD.getElementById("exportStatsDialog"),
        lD = sD.nj(oD.URL);
    sD.u.ij(lD + "lang");
    const uD = "ExportStats",
        cD = (sD.ti.Tj.Kzn = class extends sD.ti.Ze {
            constructor() {
                super(aD), (this.OWi = this.Jmt("okButton")), (this.OWi.onclick = () => this.egt()), (this.n_e = null);
            }
            fgt() {
                this.OWi.textContent = nD("common.done");
            }
            pr(t, i) {
                sD.x$(t), sD.Et(t.qzn, self.urs);
                const e = t.qzn,
                    s = e.Mi(),
                    n = e.LYt();
                (this.n_e = n),
                    sD.u.o("ui.dialogs.exportStats"),
                    this.hr(nD(".caption")),
                    sD.hrt(this.Jmt("exportDurationMessage"), hD(".duration-message", sD.hUe(Math.round(n.uke / 1e3)))),
                    sD.hrt(this.Jmt("scriptSizeInfo"), this.Xzn(n)),
                    sD.hrt(this.Jmt("dataSizeInfo"), this.Yzn(n)),
                    sD.hrt(this.Jmt("imageSizeInfo"), this.Jzn(n)),
                    sD.hrt(this.Jmt("deduplicationInfo"), this.Zzn(n)),
                    sD.hrt(this.Jmt("audioSizeInfo"), this.Qzn(s));
                let r = (n.fke || n.Gke || n.tke) + (n.dke || n.hke) + n.ZPe + s.Dri() + s.Nri() + (t.tVn || 0),
                    h = s.Nri();
                t.iVn ? (h = NaN) : s.fse() || (h += s.Dri()),
                    sD.hrt(this.Jmt("overallSizeInfo"), this.eVn(r, h)),
                    sD.hrt(this.Jmt("overallSizeSummary"), hD(".overall-size-summary", sD.nbe(r))),
                    sD.u.it();
                const o = this.Jmt("customSizeInfo");
                return t.sVn ? (sD.hrt(o, t.sVn), (o.style.display = "")) : (o.style.display = "none"), super.pr(i);
            }
            Xzn(t) {
                let i = "",
                    e = t.tke,
                    s = t.fke;
                if ("none" === t.QPe)
                    i = hD(".script-size-no-minify", sD.nbe(e), s ? sD.nbe(s) : nD(".not-applicable"));
                else {
                    let n = t.Gke;
                    i = hD(".script-size-minified", sD.nbe(e), sD.nbe(n), s ? sD.nbe(s) : nD(".not-applicable"));
                }
                return i;
            }
            Yzn(t) {
                let i = t.hke,
                    e = t.dke;
                return hD(".data-file-size", sD.nbe(i), e ? sD.nbe(e) : nD(".not-applicable"));
            }
            Jzn(t) {
                return hD(t.D_e ? ".optimized-image-size-message" : ".unoptimized-image-size-message", sD.nbe(t.ZPe));
            }
            Zzn(t) {
                let i = "";
                return (
                    (i = t.YPe ? hD(".deduplication-message", t.yke, sD.nbe(t.bke)) : hD(".no-deduplication-message")),
                    i
                );
            }
            Qzn(t) {
                return hD(".audio-size", sD.nbe(t.Dri()), sD.nbe(t.Nri()));
            }
            eVn(t, i) {
                return new sD.nS(rD(".overall-size", sD.nbe(t), isNaN(i) ? nD(".not-applicable") : sD.nbe(t - i)), {
                    links: [() => self.app.WO("tips-and-guides/download-size", "ExportStatsDialog")],
                });
            }
            Cz() {
                this.n_e = null;
            }
        });
    sD.ti.SK.zgt.addEventListener("load", () => {
        sD.ti.Ze.Ugt(uD, cD);
    });
}
{
    const dD = self.t,
        fD = self.mVe,
        pD = self.lang,
        mD = self.ej,
        wD = dD.sj(import.meta.url),
        gD = wD.getElementById("fileListDialog"),
        yD = "FileList",
        bD = dD.nj(wD.URL),
        vD = ["DROPBOX", "ONE DRIVE", "GOOGLE DRIVE", "LOCAL STORAGE"],
        SD = new Set(),
        xD = ["NAME_ASC", "NAME_DEC", "DATE_ASC", "DATE_DEC", "SIZE_ASC", "SIZE_DEC"];
    let MD = !1;
    function ED(t, i) {
        return dD.vu(t), dD.vu(i), dD.ti.Ze.Ke("Confirm").pr({ caption: t, message: i }, gD);
    }
    function CD(t) {
        return dD.vu(t), dD.ti.Ze.Ke("OK").pr(t, gD);
    }
    dD.u.ij(bD + "lang");
    const _D = (dD.ti.Tj.nVn = class extends dD.ti.Ze {
        constructor() {
            super(gD), dD.u.o("ui.dialogs.fileList");
            const t = dD.ti.Hde,
                i = (t) => self.app.ht(t);
            this.iTt = dD.m(t, this.XLt(), this);
            const e = t._Bt(28);
            (this.rTt = this.iTt.Qde("horizontalToolbar", e, [
                t.qde("refresh", i("reload"), pD(".refresh"), () => this.lgt(!0)),
                t.qde("add folder", i("add-folder"), pD(".add-folder"), () => this.PJi()),
                t.qde("upload", i("cloud-upload"), pD(".upload"), () => this.rVn()),
                t.qde("up", i("up-arrow"), pD(".up"), () => this.hVn()),
                t.YO(!1, "dividerA", !1),
                t.yTt(
                    "service",
                    [
                        { value: "", label: pD(".selectService"), selected: !0, disabled: !0 },
                        { value: "DROPBOX", label: "Dropbox" },
                        { value: "ONE DRIVE", label: "OneDrive" },
                        { value: "GOOGLE DRIVE", label: "Google Drive" },
                    ],
                    pD(".service"),
                    (t) => this.oVn(t),
                    !1,
                    !0
                ),
                t.qde("logout", i("account-logout"), pD(".logout"), () => this.aVn()),
                t.YO(!1, "dividerB", !1),
                t.xTt("filter", "", pD(".search"), (t) => this.UQt(t), !1, !0),
            ])),
                (this.lVn = xD[0]),
                this.iTt.QO();
            let s = this.iTt.tTt(),
                n = dD.m(dD.ti.hkt),
                r = document.createElement("input"),
                h = document.createElement("button"),
                o = dD.m(dD.ti.Tj.Table, s, { VIi: !1 }),
                a = document.createElement("div"),
                l = document.createElement("span");
            (this.jci = {
                service: this.rTt.Zde("service"),
                search: this.rTt.Zde("filter"),
                upload: this.rTt.Zde("upload"),
                refresh: this.rTt.Zde("refresh"),
                add: this.rTt.Zde("add folder"),
                up: this.rTt.Zde("up"),
                uVn: this.rTt.Zde("dividerA"),
                cVn: this.rTt.Zde("dividerB"),
                dVn: this.rTt.Zde("logout"),
                fVn: s,
                table: o,
                pVn: n,
                filename: r,
                mVn: h,
            }),
                (this.wVn = ["root"]),
                this.jci.table
                    .bnt()
                    .Nnt("icon", 20, "")
                    .Nnt("name", 160, pD(".name"))
                    .Nnt("date", 120, pD(".dateModified"))
                    .Cnt("size", pD(".size")),
                this.FO().setAttribute("loading", ""),
                (l.textContent = pD(".filename")),
                (a.className = "tray"),
                s.appendChild(n.element),
                a.appendChild(l),
                a.appendChild(r),
                a.appendChild(h),
                this.WZe().appendChild(a),
                (this.Ebe = dD.m(
                    dD.Ha,
                    dD.Xa.Wa(self.app, "settingschange", () => this.Pj()),
                    dD.Xa.Wa(dD.vF, "afterload", () => this.Pj()),
                    dD.Xa.Wa(o, "rowcontextmenu", (t) => this.Lnt(t)),
                    dD.Xa.Wa(o, "rowselected", (t) => this.gVn(t.rlt)),
                    dD.Xa.Wa(o, "rowdoubletapped", (t) => this.$me(t)),
                    dD.Xa.Wa(h, "pointerdown", (t) => this.yVn(t)),
                    dD.Xa.Wa(r, "input", () => this.bVn(r.value))
                )),
                (this.M6t = null),
                (this.vVn = null),
                (this.SVn = null),
                (this.xVn = !1),
                (this.Dci = new Map()),
                (this.MVn = !1),
                (this.EVn = null),
                (this.CVn = null),
                (this._Vn = null),
                (this.TVn = null),
                (this.IVn = null),
                this.jci.table.tO(!1),
                this.jci.pVn.ejt(),
                dD.u.it("ui.dialogs.fileList"),
                this.Pj();
        }
        Pj() {
            const t = self.app.$J();
            this.MVn = t.cloudCache || !1;
        }
        PVn() {
            this.mbe({
                service: "LOCAL STORAGE" === this.vVn ? this.SVn : this.vVn,
                table: this.jci.table._A(),
                sort: this.lVn,
            });
        }
        GVn(t, i) {
            self.assert(xD.includes(t), "invalid sort mode"),
                this.lVn !== t && ((this.lVn = t), i || (this.lgt(), this.PVn()));
        }
        AVn() {
            const t = this.dbe(),
                i = t && t.service,
                e = t && t.table,
                s = t && t.sort;
            i && !this.vVn && this.oVn(i, !0), s && this.GVn(s, !0), e && this.jci.table.xH(e);
        }
        UQt(t) {
            dD.vu(t), (t = t.trim().toLowerCase());
            for (let i of this.Dci.entries())
                i[0].name.toLowerCase().includes(t) ? i[1].tO(!0) : (i[1] === this.EVn && this.RVn(), i[1].tO(!1));
        }
        oVn(t, i) {
            if (!t) return this.jci.service.dTt(0), void (this.vVn = null);
            dD.vu(t),
                this.vVn !== t &&
                    vD.includes(t) &&
                    ((this.wVn.length = 1),
                    this.jci.service.LQt(t),
                    (this.vVn = t),
                    SD.has(t) || (SD.add(t), self.app.P7s("CloudSave", this.vVn)),
                    i || (this.lgt(), this.PVn()));
        }
        bVn(t) {
            dD.vu(t);
            const i = this.kVn(t.toLowerCase());
            if (i.aVe()) {
                const e = i.uVe();
                for (const i of this.Dci.entries()) if (i[0].name.toLowerCase() === e) return this.gVn(i[1], t), i;
            }
            this.EVn
                ? (this.EVn.xT(), "OPEN" === this.M6t && this.OVn(!1), (this.EVn = null), (this.CVn = null))
                : "SAVE" === this.M6t && this.OVn(0 !== t.length);
        }
        hVn() {
            this.wVn.length > 1 && (this.wVn.pop(), this.lgt());
        }
        async PJi() {
            const t = this.DVn(),
                i = dD.ti.Ze.Ke("Input");
            dD.u.o("ui.dialogs.fileList.add-folder-dialog");
            const e = { caption: pD(".caption"), message: pD(".message"), label: pD(".label"), j0e: "New folder" };
            dD.u.it();
            const s = await i.pr(e);
            if (null === s || 0 === s) return;
            const n = this.kVn(s, !0);
            if (!n.aVe()) return CD(n.cVe());
            {
                this.FVn(pD("ui.dialogs.fileList.creatingFolder"));
                const i = n.uVe();
                try {
                    await self.tj.LVn(i, t, this.vVn), this.lgt();
                } catch (t) {
                    return CD(pD("ui.dialogs.fileList.failedCreatingFolder"));
                }
                this.BVn();
            }
        }
        async rVn() {
            const t = await dD.ti.Eyi._yi(".c3p", null, !1, !1);
            if (null === t) return;
            const i = this.DVn(),
                e = this.kVn(t.name);
            if (e.lVe()) return void CD(e.cVe());
            const s = e.uVe();
            this.FVn(pD("ui.dialogs.fileList.uploading"));
            try {
                let e = null,
                    n = null;
                for (const t of this.Dci.keys())
                    if (t.name.toLowerCase() === s) {
                        e = t;
                        break;
                    }
                if (e) {
                    if (
                        !(await ED(
                            pD("ui.dialogs.fileList.overwriteFile"),
                            mD("ui.dialogs.fileList.confirmOverwrite", e.name)
                        ))
                    )
                        return;
                    n = e.id;
                }
                try {
                    await self.tj.UVn(t, n, s, i, this.vVn), this.lgt();
                } catch (t) {
                    throw t.message;
                }
            } catch (t) {
                this.BVn(), CD(t);
            }
        }
        NVn(t) {
            t && "folder" == t.type && (this.wVn.push(t.id), this.lgt());
        }
        jVn(t, i) {
            const e = t.shift();
            for (const s of i) if (s.id == e) return t.length > 0 ? this.jVn(t, s.children) : s.children;
            throw new Error("Invalid location");
        }
        async $Vn(t) {
            const i = this.DVn(),
                e = this.vVn;
            for (const s of t) {
                if (i != this.DVn()) return;
                if (e != this.vVn) return;
                if (!this.p8t) return;
                if ("folder" === s.type)
                    try {
                        await self.tj.Uls(e, !1, s.id);
                    } catch (t) {
                        return void console.error(`Failed to preload child entries of "${i}": `, t);
                    }
            }
        }
        async lgt(t) {
            if (this.vVn) {
                let i = this.jci.filename.value;
                this.FVn(mD("ui.dialogs.fileList.getFiles", dD.zEs(this.vVn)));
                try {
                    const e = this.DVn(),
                        s = await self.tj.Uls(this.vVn, t, e);
                    this.MVn && this.$Vn(s), this.zVn();
                    const n = new Set([".c3p", ".capx"]);
                    for (const t of this.VVn(s)) {
                        if ("folder" !== t.type && !n.has(t.ext)) continue;
                        const i = this.Zsn(t);
                        this.Dci.set(t, i);
                    }
                    this.bVn(i), this.BVn();
                } catch (t) {
                    console.error(t), this.WVn(t);
                }
            }
        }
        HVn(t, i) {
            if (t.type === i.type) {
                const e = t.name.toLowerCase(),
                    s = i.name.toLowerCase();
                return e > s ? 1 : s > e ? -1 : 0;
            }
            return "file" === t.type ? 1 : -1;
        }
        KVn(t, i) {
            if (t.type === i.type) {
                const e = new Date(t.date || 0).getTime() - new Date(i.date || 0).getTime();
                return e > 0 ? 1 : e < 0 ? -1 : 0;
            }
            return "file" === t.type ? 1 : -1;
        }
        qVn(t, i) {
            if (t.type === i.type) {
                const e = t.size - i.size;
                return e > 0 ? 1 : e < 0 ? -1 : 0;
            }
            return "file" === t.type ? 1 : -1;
        }
        VVn(t) {
            switch (this.lVn) {
                case "NAME_ASC":
                    return t.sort((t, i) => this.HVn(t, i));
                case "NAME_DEC":
                    return t.sort((t, i) => this.HVn(i, t));
                case "DATE_ASC":
                    return t.sort((t, i) => this.KVn(t, i));
                case "DATE_DEC":
                    return t.sort((t, i) => this.KVn(i, t));
                case "SIZE_ASC":
                    return t.sort((t, i) => this.qVn(t, i));
                case "SIZE_DEC":
                    return t.sort((t, i) => this.qVn(i, t));
            }
        }
        async aVn() {
            if (this.vVn) {
                this.FVn(mD("ui.dialogs.fileList.logging-out", dD.zEs(this.vVn))), this.zVn();
                try {
                    await self.tj.XVn(this.vVn), this.FVn(null, !0);
                } catch (t) {
                    this.WVn(t);
                }
                this.oVn("");
            }
        }
        WVn(t) {
            let i;
            (i = "string" == typeof t ? t : pD("ui.dialogs.fileList.failedToRefresh")),
                this.jci.refresh.lht(!0),
                this.jci.upload.lht(!0),
                this.jci.up.lht(!1),
                this.jci.add.lht(!1),
                this.jci.service.lht(!0),
                this.jci.table.tO(!1),
                this.jci.search.lht(!1),
                this.jci.pVn.tO(!0),
                this.YVn(i),
                this.FO().setAttribute("loading", ""),
                this.jci.pVn.ejt();
        }
        FVn(t, i) {
            i ? (t = pD("ui.dialogs.fileList.pleaseSelectService")) : dD.vu(t),
                this.jci.dVn.lht(!1),
                this.jci.upload.lht(!1),
                this.jci.refresh.lht(!1),
                this.jci.up.lht(!1),
                this.jci.add.lht(!1),
                this.jci.service.lht(i),
                this.jci.table.tO(!1),
                this.jci.search.lht(!1),
                this.jci.pVn.tO(!0),
                this.YVn(t),
                this.FO().setAttribute("loading", ""),
                i ? this.jci.pVn.ejt() : this.jci.pVn.rmn();
        }
        BVn() {
            this.jci.table.tO(!0),
                this.jci.up.lht(this.wVn.length > 1),
                this.jci.add.lht(!0),
                this.jci.refresh.lht(!0),
                this.jci.upload.lht(!0),
                this.jci.service.lht(!0),
                this.jci.search.lht(!0),
                this.jci.pVn.tO(!1),
                this.jci.dVn.lht(!0),
                this.FO().removeAttribute("loading");
        }
        RVn() {
            this.EVn && (this.EVn.xT(), this.OVn(!1), (this.EVn = null), (this.CVn = null));
        }
        gVn(t, i) {
            if (this.EVn === t) return;
            this.RVn();
            const e = t.Zc();
            e &&
                "file" == e.type &&
                (this.OVn(!0), (this.jci.filename.value = i || e.name), (this.EVn = t), (this.CVn = e), t.D_());
        }
        $me(t) {
            this.yVn(t);
        }
        Lnt(t) {
            const i = t.rlt,
                e = dD.m(dD.ti.LO, this.jci.fVn),
                s = i.Zc();
            s &&
                ("file" == s.type
                    ? e.xO(null, pD("ui.dialogs.fileList.downloadFile"), () => this.JVn(i))
                    : e.xO(null, pD("ui.dialogs.fileList.open"), () => this.NVn(s))),
                "name" === t.iat &&
                    (e.xO(null, pD("ui.dialogs.fileList.sortNameAscending"), () => this.GVn("NAME_ASC")),
                    e.xO(null, pD("ui.dialogs.fileList.sortNameDescending"), () => this.GVn("NAME_DEC"))),
                "date" === t.iat &&
                    (e.xO(null, pD("ui.dialogs.fileList.sortDateAscending"), () => this.GVn("DATE_ASC")),
                    e.xO(null, pD("ui.dialogs.fileList.sortDateDescending"), () => this.GVn("DATE_DEC"))),
                "size" === t.iat &&
                    (e.xO(null, pD("ui.dialogs.fileList.sortSizeAscending"), () => this.GVn("SIZE_ASC")),
                    e.xO(null, pD("ui.dialogs.fileList.sortSizeDescending"), () => this.GVn("SIZE_DEC"))),
                e.xO(null, pD("ui.dialogs.fileList.deleteFile"), () => this.ZVn(i)),
                e.xO(null, pD("ui.dialogs.fileList.renameFile"), () => this.QVn(i)),
                e.XO(t.clientX, t.clientY);
        }
        async ZVn(t) {
            const i = t.Zc();
            if (!i) return;
            if (!(await ED(pD("ui.dialogs.fileList.deleteFile"), mD("ui.dialogs.fileList.confirmDelete", i.name))))
                return;
            this.FVn(pD("ui.dialogs.fileList.deletingFile"));
            const e = this.DVn(i);
            try {
                await self.tj.X_(i.id, e, this.vVn);
                let s = this.jci.filename.value;
                this.CVn === i && ((this.CVn = null), t.xT(), (this.EVn = null)),
                    this.Dci.delete(i),
                    this.jci.table.kHt(t),
                    this.bVn(s),
                    !this.CVn && s && ((this.jci.filename.value = s), this.OVn(!0));
            } catch (t) {
                (() => {})("failed to delete file", t), CD(mD("ui.dialogs.fileList.failedDelete", i.name));
            } finally {
                this.BVn();
            }
        }
        OVn(t) {
            this.jci.mVn.disabled = !t;
        }
        DVn() {
            const t = this.wVn.length;
            return this.wVn[t - 1];
        }
        JVn(t) {
            let i = t.Zc();
            self.tj.xN(i.name, i.id, this.vVn);
        }
        tWn(t, i) {
            const e = t.Zc(),
                s = "file" == e.type;
            (e.id = i.id), (e.name = i.name), (e.date = i.date);
            const n = i.name,
                r = new Date(i.date).toLocaleString(self.app.Lmt(), {
                    day: "numeric",
                    month: "short",
                    year: "numeric",
                    hour: "numeric",
                    minute: "numeric",
                }),
                h = s
                    ? isNaN(e.size)
                        ? pD("ui.dialogs.fileList.unknown")
                        : dD.nbe(e.size)
                    : e.children.length.toString();
            t.znt("name").In(n), t.znt("date").In(r), t.znt("size").In(h);
        }
        async QVn(t) {
            const i = t.Zc();
            if (!i) return;
            const e = t.znt("name"),
                s = e.E_(),
                n = "folder" == i.type,
                r = this.DVn(i);
            let h = await e.__();
            if (null == h || h === s) return;
            const o = this.kVn(h, n);
            if (o.lVe()) return CD(o.cVe());
            const a = o.uVe();
            try {
                if (
                    !(await ED(
                        pD("ui.dialogs.fileList.renameFile"),
                        mD("ui.dialogs.fileList.confirmRename", i.name, a)
                    ))
                )
                    return;
                this.FVn(pD("ui.dialogs.fileList.renamingFile"));
                const e = await self.tj.T_(i.id, r, this.vVn, a);
                this.tWn(t, e), this.CVn === i && ((this.CVn = null), t.xT(), (this.EVn = null));
                const s = this.jci.filename.value;
                this.bVn(s), !this.CVn && s && ((this.jci.filename.value = s), this.OVn(!1));
            } catch (t) {
                (() => {})("Failed to rename file", t), CD(mD("ui.dialogs.fileList.failedRename", i.name, a));
            } finally {
                this.BVn();
            }
        }
        oQe(...t) {
            return this.PVn(), this.TVn && (this.TVn(null), (this.TVn = null)), super.oQe(...t);
        }
        egt() {
            dD.ti.LO.EQ() || this.yVn();
        }
        JLt() {
            this.jo();
        }
        yVn(t) {
            if (t) {
                const i = t.rlt,
                    e = i && i.Zc();
                if (e && "folder" == e.type) return void this.NVn(e);
            }
            "SAVE" === this.M6t ? this.iWn() : this.eWn();
        }
        eWn() {
            this.CVn && "file" == this.CVn.type && (this.TVn && this.TVn([this.vVn, this.CVn]), this.jo());
        }
        iWn() {
            if (this.CVn && "file" == this.CVn.type) {
                if (".capx" === this.CVn.ext) return void CD(pD("ui.dialogs.fileList.cannotSaveCAPX"));
                ED(
                    pD("ui.dialogs.fileList.overwriteFile"),
                    mD("ui.dialogs.fileList.confirmOverwrite", this.CVn.name)
                ).then((t) => {
                    t && (this.TVn && this.TVn([this.vVn, this.CVn.name, this.CVn.id, this.CVn.parent]), this.jo());
                });
            } else {
                const t = this.DVn(),
                    i = this.kVn(this.jci.filename.value);
                if (i.lVe()) return CD(i.cVe());
                this.TVn && this.TVn([this.vVn, i.uVe(), null, t]), this.jo();
            }
        }
        sWn(t) {
            dD.ti.Ze.Ke("OK").pr(t, this.jci.fVn);
        }
        kVn(t, i) {
            let e,
                s = t.trim(),
                n = /\.([^.]*)$/;
            if (0 === s.length) return fD.fVe(pD("ui.dialogs.fileList.filenameNone"));
            if ((e = /([\\/:\*\?"<>\|])/i.exec(s)))
                return fD.fVe(mD("ui.dialogs.fileList.filenameIllegalCharacter", e[1]));
            if ((e = /^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i.exec(s)))
                return fD.fVe(mD("ui.dialogs.fileList.filenameReservedName", e[1]));
            if ((e = /^\./.exec(s))) return fD.fVe(pD("ui.dialogs.fileList.filenamePrivate"));
            if (!i) {
                if (((e = n.exec(s)), e && "c3p" !== e[1]))
                    return fD.fVe(mD("ui.dialogs.fileList.filenameExtension", e[1]));
                e || (s += ".c3p");
            }
            return fD.Ok(s);
        }
        jo() {
            this.zVn(), this.igt();
        }
        zVn() {
            this.RVn(), this.jci.table._x(), this.Dci.clear(), this.jci.search.GHt("");
        }
        Zsn(t) {
            const i = "file" == t.type;
            let e;
            e = i ? "file" : t.isShared ? "shared-folder" : "open-folder";
            const s = self.app.ht(e);
            let n = "",
                r = "";
            return (
                i && (n = isNaN(t.size) ? pD("ui.dialogs.fileList.unknown") : dD.nbe(t.size)),
                t.date &&
                    (r = new Date(t.date).toLocaleString(self.app.Lmt(), {
                        day: "numeric",
                        month: "short",
                        year: "numeric",
                        hour: "numeric",
                        minute: "numeric",
                    })),
                this.jci.table.Snt(t).Pnt("icon", s).Gnt("name", t.name).Ont("date", r).Ont("size", n)
            );
        }
        P6t(t) {
            if ((dD.vu(t), "SAVE" == t))
                (this.jci.mVn.textContent = pD("ui.dialogs.fileList.save")),
                    this.hr(pD("ui.dialogs.fileList.saveProject"));
            else {
                if ("OPEN" != t) throw new Error("Invalid file list mode selected");
                (this.jci.mVn.textContent = pD("ui.dialogs.fileList.open")),
                    this.hr(pD("ui.dialogs.fileList.openProject")),
                    (this.jci.filename.value = "");
            }
            this.M6t = t;
        }
        YVn(t) {
            dD.vu(t), (this.jci.pVn.nkt = t);
        }
        nWn(t) {
            t
                ? this.xVn
                    ? this.lgt()
                    : ((this.xVn = !0),
                      (this.SVn = this.vVn),
                      this.oVn("LOCAL STORAGE"),
                      this.jci.refresh.tO(!1),
                      this.jci.uVn.tO(!1),
                      this.jci.cVn.tO(!1),
                      this.jci.service.tO(!1),
                      this.jci.dVn.tO(!1))
                : (this.xVn &&
                      ((this.xVn = !1),
                      this.oVn(null),
                      this.jci.refresh.tO(!0),
                      this.jci.uVn.tO(!0),
                      this.jci.cVn.tO(!0),
                      this.jci.service.tO(!0),
                      this.jci.dVn.tO(!0)),
                  this.vVn ? this.lgt() : this.SVn ? (this.oVn(this.SVn), (this.SVn = null)) : this.FVn(null, !0));
        }
        rWn(t, i) {
            return (
                (this.IVn = null),
                new Promise((i) => {
                    this.AVn(),
                        this.nWn(t),
                        (this.TVn = i),
                        this.P6t("OPEN"),
                        t ? this.hWn().then(() => this.pr()) : this.pr();
                })
            );
        }
        oWn(t, i, e) {
            dD.k$(t);
            const s = self.app.XM(),
                n = s.m_(),
                r = s.p_();
            return (
                (this.IVn = "cloud" === n ? r : null),
                new Promise((e) => {
                    (this.jci.filename.value = t),
                        this.AVn(),
                        this.nWn(i),
                        (this.TVn = e),
                        this.P6t("SAVE"),
                        i ? this.hWn().then(() => this.pr()) : this.pr();
                })
            );
        }
        H5t() {
            this.AVn();
        }
        hWn() {
            return MD
                ? Promise.resolve()
                : dD.Y$.qRe
                  ? navigator.storage.persisted().then((t) => {
                        if (((MD = !!t), !MD)) return this.yzn();
                    })
                  : Promise.resolve();
        }
        yzn() {
            return new Promise((t) => {
                let i = dD.ti.Ze.Ke("Confirm");
                i.pr({ message: self.Hpt("ui.dialogs.fileList.request-persistence") }).then((i) => {
                    i || t();
                }),
                    (i.OOe = () => {
                        const i = navigator.storage.persist().then((t) => {
                            if (((MD = !!t), !1 === t))
                                return dD.ti.Ze.Ke("OK").pr(pD("ui.dialogs.fileList.declined-persistence"));
                        });
                        t(i);
                    });
            });
        }
    });
    dD.ti.SK.zgt.addEventListener("load", () => {
        dD.ti.Ze.Ugt(yD, _D);
    });
}
{
    const TD = self.t,
        ID = TD.sj(import.meta.url),
        PD = ID.getElementById("iframeDialog"),
        GD = TD.nj(ID.URL);
    TD.u.ij(GD + "lang");
    const AD = "iframe",
        RD = (TD.ti.Tj.aWn = class extends TD.ti.Ze {
            constructor() {
                super(PD), (this.lWn = null), (this.tgt = null);
            }
            fgt() {}
            eD(t, i) {
                TD.k$(t);
                const e = super.eD(i);
                return (
                    (this.lWn = this.CF().createElement("iframe")),
                    (this.lWn.className = "dialogiframe"),
                    this.lWn.setAttribute("allowfullscreen", "true"),
                    this.lWn.setAttribute("scrolling", "no"),
                    this.lWn.setAttribute("noresize", "noresize"),
                    t && (this.lWn.src = t),
                    (this.lWn.style.pointerEvents = ""),
                    this.XLt().appendChild(this.lWn),
                    e
                );
            }
            uWn(t) {
                TD.Et(t, self.Ga), (this.tgt = t);
            }
            PJe() {
                this.cWn();
            }
            DJe() {
                this.dWn();
            }
            TJe() {
                this.cWn();
            }
            OJe() {
                this.dWn();
            }
            cWn() {
                this.lWn.style.pointerEvents = "none";
            }
            dWn() {
                this.lWn.style.pointerEvents = "";
            }
            fWn() {
                return this.lWn;
            }
            egt() {
                this.JLt();
            }
            JLt() {
                TD.xis.H7s() && TD.xis.K7s().W7s().pWn(this.tgt);
            }
            Cz() {
                this.lWn && ((this.lWn.src = ""), TD.ti.Tz(this.lWn), (this.lWn = null)), (this.tgt = null);
            }
        });
    TD.ti.SK.zgt.addEventListener("load", () => {
        TD.ti.Ze.Ugt(AD, RD);
    });
}
{
    const kD = self.t,
        OD = self.lang,
        DD = self.ej,
        FD = kD.sj(import.meta.url),
        LD = FD.getElementById("loginDialog"),
        BD = kD.nj(FD.URL);
    kD.u.ij(BD + "lang");
    const UD = "Login",
        ND = "https://account.construct.net",
        jD = "https://accountbeta.construct.net";
    let $D = null,
        zD = !1,
        VD = null,
        WD = null,
        HD = null;
    function KD(t) {
        const i = t.type,
            e = kD.ti.Ze.Ke("Login"),
            s = self.app.vst("useraccount");
        if ("cancel" === i) e.igt();
        else if ("init" === i)
            (zD = !0),
                kD.ti.Tz(e.mWn),
                kD.u.o("ui.dialogs.login"),
                $D({
                    type: "lang",
                    username: OD(".username"),
                    password: OD(".password"),
                    "keep-me-logged-in": OD(".keep-me-logged-in"),
                    cancel: OD("common.cancel"),
                    "log-in": OD(".log-in"),
                }),
                kD.u.it(),
                $D({ type: "auto-login" });
        else if ("login-error" === i) e.wWn("ManualLoginFailed"), e.gWn();
        else if ("login-ok" === i) e.wWn("ManualLoginOK"), VD(t), e.gu() && e.WD(!0);
        else if ("auto-login-ok" === i) VD(t);
        else if ("profile-picture" === i) s.yWn(t);
        else if ("auto-login-skipped" === i) s.bWn(t);
        else if ("auto-login-error" === i) {
            const i = t.reason;
            console.info("[Account] Auto-login failed: " + i),
                e.wWn(i ? "AutoLoginFailed-" + i : "AutoLoginFailed"),
                s.vWn(i || "fetch-error");
        } else if ("access-code-ok" === i) s.SWn(t);
        else if ("access-code-error" === i) {
            const i = t.reason;
            console.info("[Account] Access code failed: " + i),
                self.app.xWn() || e.wWn("AccessCodeFailed-" + i),
                s.MWn(i);
        } else
            "get-token-result" === i
                ? (WD && WD(t.data), (WD = null), (HD = null))
                : "get-token-error" === i
                  ? (HD && HD(), (WD = null), (HD = null))
                  : (() => {})("[Account] Invalid message from iframe");
    }
    const qD = (kD.ti.Tj.EWn = class extends kD.ti.Ze {
        constructor() {
            super(LD),
                this.mht.setAttribute("always-active", ""),
                (this.mWn = this.Jmt("loginOverlayContent")),
                (this.CWn = this.Jmt("overlayHeader")),
                (this._Wn = this.Jmt("overlayMessage")),
                (this.TWn = this.Jmt("overlayProgress")),
                (this.CWn.textContent = OD("ui.dialogs.login.please-wait"));
        }
        async IWn(t) {
            if (VD) throw new Error("security exception");
            kD.yp(t), (VD = t);
            const i = self.app,
                e = i.PWn() ? jD : ND,
                s = new URL(e + "/login"),
                n = new URLSearchParams(s.search);
            n.append("theme", i.$J().theme || "default"),
                n.append("lang", i.Lmt()),
                n.append("productType", i.Mke()),
                (s.search = n.toString()),
                kD.hrt(
                    this._Wn,
                    kD.m(kD.nS, DD("ui.dialogs.login.login-unavailable-message", e), { links: [e + "/test"] })
                ),
                window.setTimeout(() => {
                    zD ||
                        (i.vst("useraccount").GWn(),
                        this._Wn.removeAttribute("hidden"),
                        (this.CWn.textContent = OD("ui.dialogs.login.login-unavailable-header")),
                        kD.ti.Tz(this.TWn));
                }, 5e3);
            try {
                const t = await kD.LOe({
                    src: s.toString(),
                    BOe: e,
                    sandbox:
                        "allow-scripts allow-forms allow-same-origin allow-popups allow-storage-access-by-user-activation",
                    parent: this.XLt(),
                    UOe: (t) => KD(t.data),
                });
                t.br.setAttribute("scrolling", "no"),
                    (t.br.style.display = ""),
                    (t.br.style.border = "0"),
                    ($D = t.NOe);
            } catch (t) {
                console.error("Failed to load account iframe: ", t);
            }
        }
        fgt() {
            kD.u.o("ui.dialogs.login"), this.hr(OD(".caption")), kD.u.it();
        }
        pr(t) {
            return super.pr(t);
        }
        egt() {}
        async gWn() {
            this.igt(), await kD.ti.SK.wJe(), kD.u.o("ui.dialogs.login.failed-prompt");
            const t = kD.ti.Ze.Ke("Confirm");
            (t.OOe = () => {
                kD.ti.Ze.Ke("Login").pr();
            }),
                t.pr({ caption: OD(".caption"), message: OD(".message"), jT: OD(".try-again") }),
                kD.u.it();
        }
        AWn() {
            this.wWn("ManualLogout"), $D && $D({ type: "logout" });
        }
        RWn() {
            return zD;
        }
        kWn(t, i) {
            if ((kD.vu(t), kD.k$(i), !zD)) throw new Error("login service unavailable");
            $D({ type: "access-code", code: t, privateKey: i });
        }
        static OWn() {
            return zD
                ? new Promise((t, i) => {
                      (WD = t), (HD = i), $D({ type: "get-token" });
                  })
                : Promise.reject("login service unavailable");
        }
        PJe() {
            this.cWn();
        }
        DJe() {
            this.dWn();
        }
        TJe() {
            this.cWn();
        }
        OJe() {
            this.dWn();
        }
        cWn() {
            const t = this.XLt().querySelector("iframe");
            t && (t.style.pointerEvents = "none");
        }
        dWn() {
            const t = this.XLt().querySelector("iframe");
            t && (t.style.pointerEvents = "");
        }
        wWn(t) {
            self.app.P7s("Account", t);
        }
        Cz() {
            $D && $D({ type: "clear" });
        }
    });
    kD.ti.SK.zgt.addEventListener("load", () => {
        kD.ti.Ze.Ugt(UD, qD);
        kD.ti.Ze.Ke("Login").bQe();
    });
}
{
    const XD = self.t,
        YD = self.lang,
        JD = XD.sj(import.meta.url),
        ZD = JD.getElementById("newProjectDialog"),
        QD = XD.nj(JD.URL);
    XD.u.ij(QD + "lang");
    const tF = "NewProject",
        iF = (XD.ti.Tj.DWn = class extends XD.ti.Ze {
            constructor() {
                super(ZD),
                    (this.FWn = JD.getElementById("npProjectNameInput")),
                    (this.LWn = JD.getElementById("npPresetSelect")),
                    (this.BWn = JD.getElementById("npViewportWidthInput")),
                    (this.UWn = JD.getElementById("npViewportHeightInput")),
                    (this.NWn = this.Jmt("viewportAspectRatio")),
                    (this.jWn = JD.getElementById("npOrientationSelect")),
                    (this.$Wn = JD.getElementById("npStartWithSelect")),
                    (this.zWn = JD.getElementById("npPixelArtCheck")),
                    (this.VWn = () => this.WWn()),
                    (this.LWn.onchange = () => this.HWn()),
                    (this.BWn.onchange = this.VWn),
                    (this.UWn.onchange = this.VWn),
                    (this.KWn = null),
                    (this.qWn = null),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this._Wt = this.Jmt("cancelButton")),
                    (this._Wt.onclick = () => this.JLt());
            }
            fgt() {
                XD.u.o("ui.dialogs.newProject"),
                    this.hr(YD(".caption")),
                    (this.FWn.placeholder = YD(".new-project-name")),
                    (this.Jmt("projectNameLabel").textContent = YD(".project-name-label")),
                    (this.Jmt("presetLabel").textContent = YD(".preset-label")),
                    (this.Jmt("viewportSizeLabel").textContent = YD(".viewport-size-label")),
                    (this.Jmt("viewportSizeSeparator").textContent = YD(".viewport-size-separator")),
                    (this.Jmt("orientationLabel").textContent = YD(".orientations-label")),
                    (this.Jmt("startWithLabel").textContent = YD(".start-with-label")),
                    (this.Jmt("pixelArtLabel").textContent = YD(".pixel-art-label")),
                    (this.OWi.textContent = YD(".create")),
                    (this._Wt.textContent = YD("common.cancel"));
                const t = this.Jmt("helpLink");
                (t.textContent = YD("common.help")),
                    (t.onclick = () => self.app.WO("interface/dialogs/new-project", "NewProjectDialog")),
                    XD.u.o(".presets");
                for (let t = 0, i = this.LWn.options.length; t < i; ++t) {
                    const i = this.LWn.options[t];
                    i.textContent = YD("." + i.value);
                }
                XD.u.it(), XD.u.o(".orientations");
                for (let t = 0, i = this.jWn.options.length; t < i; ++t) {
                    const i = this.jWn.options[t];
                    i.textContent = YD("." + i.value);
                }
                XD.u.it(), XD.u.o(".start-with");
                for (let t = 0, i = this.$Wn.options.length; t < i; ++t) {
                    const i = this.$Wn.options[t];
                    i.textContent = YD("." + i.value);
                }
                XD.u.it(), XD.u.it();
            }
            pr(t) {
                const i = super.pr(t),
                    e = self.app;
                return (
                    e.P7s("NewProject", "NewProjectDialogOpened"),
                    this.XWn(),
                    (this.KWn = XD.mCi(this.BWn, this.VWn)),
                    (this.qWn = XD.mCi(this.UWn, this.VWn)),
                    (this.Jmt("startWithRow").style.display = e.sO() ? "none" : ""),
                    e.N5t() &&
                        localforage
                            .getItem("new-project-options")
                            .then((t) => {
                                if (t) {
                                    if (
                                        ((this.LWn.value = t.preset),
                                        (this.BWn.value = t.viewportWidth),
                                        (this.UWn.value = t.viewportHeight),
                                        this.WWn(),
                                        (this.jWn.value = t.orientations),
                                        !e.sO())
                                    ) {
                                        let i = t.startWith;
                                        "script" === i && (i = "javascript"), (this.$Wn.value = i);
                                    }
                                    this.zWn.checked = t.pixelArtMode;
                                }
                            })
                            .catch(XD.uC),
                    i
                );
            }
            XWn() {
                (this.FWn.value = ""),
                    (this.LWn.value = "sd-landscape-16-9"),
                    this.HWn(),
                    (this.$Wn.value = "event-sheet"),
                    (this.zWn.checked = !1);
            }
            egt() {
                if (this.lwe()) return;
                const t = self.app,
                    i = XD.vfs(this.FWn.value) || YD("ui.dialogs.newProject.new-project-name"),
                    e = parseInt(this.BWn.value, 10),
                    s = parseInt(this.UWn.value, 10);
                if (e < 2 || e > 32768 || !isFinite(e))
                    return (
                        XD.u.o("ui.dialogs.newProject.errors"),
                        XD.ti.Tj.UK.XO(this.BWn, "warning", YD(".invalid-width"), YD(".invalid-width-desc")),
                        void XD.u.it()
                    );
                if (s < 2 || s > 32768 || !isFinite(s))
                    return (
                        XD.u.o("ui.dialogs.newProject.errors"),
                        XD.ti.Tj.UK.XO(this.UWn, "warning", YD(".invalid-height"), YD(".invalid-height-desc")),
                        void XD.u.it()
                    );
                const n = this.WD(!0),
                    r = t.sO() ? "event-sheet" : this.$Wn.value;
                return (
                    t.P7s("NewProject", "NewProjectDialogOK-" + r),
                    t.YWn((t) => {
                        t.k(i),
                            t.mse(e),
                            t.wse(s),
                            t.jse(this.jWn.value),
                            this.zWn.checked &&
                                (t.Nse(!0), t.xse("letterbox-integer-scale"), t.Gse("low"), t.Ise("nearest"));
                        const n = t.ucs();
                        n.My(2 * t.Oz()), n.Iy(2 * t.jn());
                    }, r),
                    t.N5t() &&
                        localforage
                            .setItem("new-project-options", {
                                preset: this.LWn.value,
                                viewportWidth: e,
                                viewportHeight: s,
                                orientations: this.jWn.value,
                                startWith: r,
                                pixelArtMode: this.zWn.checked,
                            })
                            .catch(XD.uC),
                    n
                );
            }
            JLt() {
                return self.app.P7s("NewProject", "NewProjectDialogCancel"), this.igt();
            }
            Cz() {
                this.KWn.Ua(), (this.KWn = null), this.qWn.Ua(), (this.qWn = null);
            }
            HWn() {
                const t = this.LWn.value;
                if (((this.zWn.checked = "retro-style" === t), "retro-style" === t))
                    (this.BWn.value = 320), (this.UWn.value = 180), (this.jWn.value = "any");
                else if ("sd-landscape-4-3" === t)
                    (this.BWn.value = 640), (this.UWn.value = 480), (this.jWn.value = "landscape");
                else if ("sd-portrait-4-3" === t)
                    (this.BWn.value = 480), (this.UWn.value = 640), (this.jWn.value = "portrait");
                else if ("sd-landscape-16-9" === t)
                    (this.BWn.value = 854), (this.UWn.value = 480), (this.jWn.value = "landscape");
                else if ("sd-portrait-16-9" === t)
                    (this.BWn.value = 480), (this.UWn.value = 854), (this.jWn.value = "portrait");
                else if ("720p-landscape" === t)
                    (this.BWn.value = 1280), (this.UWn.value = 720), (this.jWn.value = "landscape");
                else if ("720p-portrait" === t)
                    (this.BWn.value = 720), (this.UWn.value = 1280), (this.jWn.value = "portrait");
                else if ("1080p-landscape" === t)
                    (this.BWn.value = 1920), (this.UWn.value = 1080), (this.jWn.value = "landscape");
                else if ("1080p-portrait" === t)
                    (this.BWn.value = 1080), (this.UWn.value = 1920), (this.jWn.value = "portrait");
                else if ("4k-landscape" === t)
                    (this.BWn.value = 3840), (this.UWn.value = 2160), (this.jWn.value = "landscape");
                else {
                    if ("4k-portrait" !== t) throw new Error("unknown preset");
                    (this.BWn.value = 2160), (this.UWn.value = 3840), (this.jWn.value = "portrait");
                }
                this.WWn();
            }
            WWn() {
                const t = parseInt(this.BWn.value, 10),
                    i = parseInt(this.UWn.value, 10);
                t < 2 ||
                    i < 2 ||
                    t > 32768 ||
                    i > 32768 ||
                    !isFinite(t) ||
                    !isFinite(i) ||
                    (this.NWn.textContent = self.ej("common.aspect-ratio", ...XD.bse(t, i)));
            }
        });
    XD.ti.SK.zgt.addEventListener("load", () => {
        XD.ti.Ze.Ugt(tF, iF);
    });
}
{
    const eF = self.t,
        sF = self.lang,
        nF = eF.sj(import.meta.url),
        rF = nF.getElementById("welcomeTourDialog"),
        hF = eF.nj(nF.URL);
    eF.u.ij(hF + "lang");
    const oF = "WelcomeTour",
        aF = (eF.ti.Tj.JWn = class extends eF.ti.Ze {
            constructor() {
                super(rF),
                    (this.ZWn = this.Jmt("tourButton")),
                    (this.ZWn.onclick = () => this.egt()),
                    (this.QWn = this.Jmt("noThanksLink")),
                    (this.QWn.onclick = () => this.JLt()),
                    (this.zJe = !1),
                    (this.tHn = !1);
            }
            fgt() {
                eF.u.o("ui.dialogs.welcomeTour"),
                    (this.QWn.textContent = sF(".no-thanks")),
                    this.hr(sF(".caption")),
                    (this.Jmt("welcomeMessage").textContent = sF(".welcome-title")),
                    eF.hrt(
                        this.Jmt("welcomeText"),
                        self.Hpt("animation" === self.app.Mke() ? ".animate-welcome-text" : ".welcome-text")
                    ),
                    (this.ZWn.textContent = sF(".tour-button-text") + " " + eF.ayt.ZUe),
                    eF.u.it();
            }
            pr(t) {
                return this.wWn("Show"), (this.ZWn.disabled = !1), super.pr(t);
            }
            wWn(t) {
                self.app.P7s("WelcomeTourDialog", t);
            }
            async egt() {
                if (this.tHn) return;
                (this.tHn = !0), (this.ZWn.disabled = !0), this.wWn("OK-StartTour"), await self.app.jpe(!0);
                const t = eF.Aue.yf(
                    "tour",
                    "animation" === self.app.Mke() ? "startWithTimelines" : "makeAPlatformGame"
                );
                await self.app.JIt().Bue(t), this.WD();
            }
            JLt() {
                this.tHn || ((this.tHn = !0), this.wWn("Cancel"), this.igt());
            }
        });
    eF.ti.SK.zgt.addEventListener("load", () => {
        eF.ti.Ze.Ugt(oF, aF);
    });
}
{
    const lF = self.t,
        uF = self.lang,
        cF = self.tG,
        dF = lF.sj(import.meta.url),
        fF = dF.getElementById("accountInfoDialog"),
        pF = lF.nj(dF.URL);
    lF.u.ij(pF + "lang");
    const mF = "AccountInfo",
        wF = new Set(["personal", "gamejam", "access-code", "educational", "startupbusiness", "business"]),
        gF = (lF.ti.Tj.iHn = class extends lF.ti.Ze {
            constructor() {
                super(fF),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this.eHn = 256),
                    (this.sHn = this.Jmt("profilePictureWrap")),
                    (this.sHn.style.width = this.eHn + "px"),
                    (this.sHn.style.height = this.eHn + "px"),
                    (this.nHn = ""),
                    (this.rHn = null),
                    (this.Jmt("registerAccount").onclick = () => this.hHn()),
                    (this.Jmt("loginLink").onclick = () => this.oHn()),
                    (this.Jmt("editProfile").onclick = () => this.aHn());
            }
            fgt() {
                lF.u.o("ui.dialogs.accountInfo"),
                    (this.OWi.textContent = uF("common.close-dialog")),
                    this.hr(uF(".caption")),
                    (this.Jmt("registerAccount").textContent = uF(".register-account")),
                    (this.Jmt("loginLink").textContent = uF(".log-in")),
                    (this.Jmt("editProfile").textContent = uF(".edit-profile")),
                    (this.Jmt("freeLimitHeader").textContent = uF(".free-section-header")),
                    (this.Jmt("maxEventsLabel").textContent = uF(".max-events-label")),
                    (this.Jmt("maxLayersLabel").textContent = uF(".max-layers-label")),
                    (this.Jmt("maxEffectsLabel").textContent = uF(".max-effects-label")),
                    (this.Jmt("maxWebFontsLabel").textContent = uF(".max-webfonts-label")),
                    (this.Jmt("freeLimitUseAccount").textContent = uF(".free-limit-register-account")),
                    (this.Jmt("licenseThankyou").textContent = uF(".license-thankyou"));
                const t = self.app,
                    i = this.Jmt("guestHelpLink");
                (i.textContent = uF("common.help")),
                    (i.onclick = () => t.WO(lF.ON.URL.yDn, "AccountInfoDialog", "GuestHelp"));
                const e = this.Jmt("accountHelpLink");
                (e.textContent = uF("common.help")),
                    (e.onclick = () => t.WO(lF.ON.URL.yDn, "AccountInfoDialog", "AccountHelp"));
                const s = this.Jmt("yourLicenses");
                (s.textContent = uF(".your-licenses")),
                    (s.onclick = () => t.SN(lF.ON.URL.SDn, "AccountInfoDialog", "YourLicenses")),
                    lF.u.it();
            }
            pr(t, i) {
                this.rHn = t;
                const e = super.pr(i);
                return this.lHn(), e;
            }
            lHn() {
                lF.u.o("ui.dialogs.accountInfo");
                const t = self.app;
                if (
                    ((this.Jmt("usernameTitle").textContent = this.rHn.uHn()),
                    (this.Jmt("guestSection").style.display = this.rHn.BDt() ? "none" : ""),
                    (this.Jmt("accountSection").style.display = this.rHn.BDt() ? "" : "none"),
                    (this.Jmt("freeLimitsSection").style.display = t.XB() ? "" : "none"),
                    (this.Jmt("freeLimitUseAccount").style.display = this.rHn.BDt() ? "none" : ""),
                    (this.Jmt("accessCodeSection").style.display = t.xWn() ? "" : "none"),
                    this.rHn.BDt() && this.rHn.cHn())
                ) {
                    this.Jmt("offlineSection").style.display = "";
                    const i = new Date(1e3 * t.dHn()),
                        e = i - Date.now();
                    lF.hrt(
                        this.Jmt("offlineText"),
                        cF(
                            ".offline-mode",
                            i.toLocaleDateString(t.Lmt(), {
                                weekday: "long",
                                day: "numeric",
                                month: "long",
                                year: "numeric",
                            }),
                            e > 0 ? lF.hUe(e / 1e3, { rUe: !1 }) : uF("common.time.a-short-while")
                        )
                    );
                } else this.Jmt("offlineSection").style.display = "none";
                lF.ti.fMt(this.sHn);
                const i = this.Jmt("licenseBadge");
                i.classList.remove("licenseBadgeFree"), i.classList.remove("licenseBadgeLicensed");
                const e = this.Jmt("licenseThankyou"),
                    s = this.Jmt("gameJamSection");
                if (t.XB())
                    i.classList.add("licenseBadgeFree"),
                        (i.textContent = uF(".license-type.free-edition")),
                        (e.style.display = "none"),
                        (s.style.display = "none"),
                        (this.Jmt("maxEventsCount").textContent = t.DDt()),
                        (this.Jmt("maxLayersCount").textContent = t.bLt()),
                        (this.Jmt("maxEffectsCount").textContent = t.xni()),
                        (this.Jmt("maxWebFontsCount").textContent = t.DN());
                else {
                    const n = t.fHn();
                    i.classList.add("licenseBadgeLicensed"),
                        (e.style.display = "gamejam" === n ? "none" : ""),
                        (s.style.display = "gamejam" === n ? "" : "none");
                    const r = wF.has(n) ? n : "other";
                    if (((i.textContent = uF(".license-type." + r)), "gamejam" === n)) {
                        const i = new Date(1e3 * t.dHn()),
                            e = i - Date.now();
                        lF.hrt(
                            this.Jmt("gameJamText"),
                            cF(
                                ".gamejam-info",
                                i.toLocaleDateString(t.Lmt(), {
                                    weekday: "long",
                                    day: "numeric",
                                    month: "long",
                                    year: "numeric",
                                }),
                                e > 0 ? lF.hUe(e / 1e3, { rUe: !1 }) : uF("common.time.a-short-while")
                            )
                        );
                    } else if ("access-code" === n) {
                        const i = new Date(1e3 * t.dHn()),
                            e = i - Date.now();
                        lF.hrt(
                            this.Jmt("accessCodeText"),
                            cF(
                                ".access-code-info",
                                i.toLocaleDateString(t.Lmt(), {
                                    weekday: "long",
                                    day: "numeric",
                                    month: "long",
                                    year: "numeric",
                                }),
                                e > 0 ? lF.hUe(e / 1e3, { rUe: !1 }) : uF("common.time.a-short-while")
                            )
                        );
                    }
                }
                this.rHn
                    .pHn()
                    .then((t) => {
                        this.nHn = URL.createObjectURL(t);
                        const i = new Image();
                        (i.src = this.nHn),
                            (i.style.width = this.eHn + "px"),
                            (i.style.height = this.eHn + "px"),
                            (i.alt = uF("user-account.user-avatar")),
                            this.sHn.appendChild(i);
                    })
                    .catch((t) => {
                        console.error("Error decoding profile picture: ", t);
                    }),
                    lF.u.it();
            }
            hHn() {
                this.rHn.ODt(), this.JLt();
            }
            oHn() {
                this.rHn.TDt(), this.JLt();
            }
            aHn() {
                self.app.SN(lF.ON.URL.vDn, "EditProfile"), this.JLt();
            }
            Cz() {
                (this.rHn = null), this.nHn && (URL.revokeObjectURL(this.nHn), (this.nHn = "")), lF.ti.fMt(this.sHn);
            }
        });
    lF.ti.SK.zgt.addEventListener("load", () => {
        lF.ti.Ze.Ugt(mF, gF);
    });
}
{
    const yF = self.t,
        bF = self.lang,
        vF = self.ej,
        SF = yF.sj(import.meta.url),
        xF = SF.getElementById("cordovaBuildReportDialog"),
        MF = yF.nj(SF.URL);
    yF.u.ij(MF + "lang");
    const EF = "CordovaBuildReport",
        CF = (yF.ti.Tj.mHn = class extends yF.ti.Ze {
            constructor() {
                super(xF),
                    (this.jci = {
                        ok: this.Jmt("okButton"),
                        download: this.Jmt("downloadBuiltProject"),
                        archive: this.Jmt("viewArchive"),
                        message: this.Jmt("buildFinishedMessage"),
                    }),
                    (this.jci.ok.onclick = (t) => this.egt()),
                    (this.jci.download.onclick = (t) => this.mRt()),
                    (this.jci.archive.onclick = (t) => this.wHn()),
                    (this.gHn = ""),
                    (this.CIs = ""),
                    (this.les = null);
            }
            Cz() {
                (this.gHn = ""), (this.CIs = ""), (this.les = null);
            }
            fgt() {
                yF.u.o("ui.dialogs.cordovaBuildReport");
                const t = this.jci;
                (t.ok.textContent = bF("common.ok")),
                    (t.message.textContent = bF(".build-finished")),
                    (t.download.textContent = vF(".download-link", this.CIs)),
                    (t.archive.textContent = bF(".view-archive-manager")),
                    this.hr(vF(".caption", this.gHn)),
                    yF.hrt(
                        this.Jmt("tutorialLink"),
                        new yF.nS(bF(".tutorial-link"), {
                            links: [self.app.VEe("https://www.construct.net/tutorials/how-to-publish-mobile-apps-26")],
                        })
                    ),
                    yF.u.it();
            }
            pr(t, i, e, s) {
                return (
                    yF.vu(t),
                    yF.vu(i),
                    yF.Et(e, Blob),
                    (this.gHn = t),
                    (this.CIs = i),
                    (this.les = e),
                    this.fgt(),
                    super.pr(s)
                );
            }
            wHn() {
                yF.ti.Ze.Ke("ArchiveManager").pr();
            }
            mRt() {
                yF.IRt(this.CIs, this.les);
            }
        });
    yF.ti.SK.zgt.addEventListener("load", () => {
        yF.ti.Ze.Ugt(EF, CF);
    });
}
{
    const _F = self.t,
        TF = self.lang,
        IF = self.ej,
        PF = _F.sj(import.meta.url),
        GF = PF.getElementById("cordovaOptionsDialog"),
        AF = _F.nj(PF.URL);
    _F.u.ij(AF + "lang");
    const RF = "CordovaOptions",
        kF = !1,
        OF = (_F.ti.Tj.yHn = class extends _F.ti.Ze {
            constructor() {
                super(GF),
                    (this.bHn = { vHn: this.SHn(), properties: this.xHn(), MHn: this.EHn() }),
                    (this.jSi = this.CHn()),
                    (this.tBn = null);
            }
            SHn() {
                const t = this.Jmt("generalSection"),
                    i = this.Jmt("generalHeading");
                let e, s, n, r, h;
                {
                    const t = this.Jmt("androidVersion"),
                        i = t.children[0],
                        s = t.children[1];
                    _F.Gct(i), _F.Gct(s), (e = { element: t, label: i, input: s });
                }
                {
                    const t = this.Jmt("androidTargetVersion"),
                        i = t.children[0],
                        e = t.children[1];
                    _F.Gct(i), _F.Gct(e), (s = { element: t, label: i, _Hn: e });
                }
                {
                    const t = this.Jmt("iosVersion"),
                        i = t.children[0],
                        e = t.children[1];
                    _F.Gct(i), _F.Gct(e), (n = { element: t, label: i, input: e });
                }
                {
                    const t = this.Jmt("androidTarget"),
                        i = t.children[0],
                        e = t.children[1];
                    _F.Gct(i),
                        _F.Gct(e),
                        e.addEventListener("change", (t) => {
                            const i = e.value,
                                s = this.THn(i);
                            this.IHn(s);
                        }),
                        (r = { element: t, label: i, input: e });
                }
                {
                    const t = this.Jmt("iosTarget"),
                        i = t.children[0],
                        e = t.children[1];
                    _F.Gct(i), _F.Gct(e), (h = { element: t, label: i, input: e });
                }
                return { container: t, title: i, PHn: e, GHn: s, AHn: r, RHn: n, kHn: h };
            }
            xHn() {
                const t = this.Jmt("propertiesSection"),
                    i = this.Jmt("propertiesHeading"),
                    e = { element: this.Jmt("whitelist"), label: null, input: null };
                (e.label = e.element.children[0]),
                    (e.input = e.element.children[1]),
                    _F.Gct(e.label, "span"),
                    _F.Gct(e.input, "input");
                const s = { element: this.Jmt("versionCode"), label: null, input: null };
                (s.label = s.element.children[0]),
                    (s.input = s.element.children[1]),
                    _F.Gct(s.label, "span"),
                    _F.Gct(s.input, "input");
                const n = { element: this.Jmt("appLicenseKey"), label: null, input: null };
                (n.label = n.element.children[0]),
                    (n.input = n.element.children[1]),
                    _F.Gct(n.label, "span"),
                    _F.Gct(n.input, "input");
                const r = { element: this.Jmt("hideStatusBar"), label: null, input: null };
                (r.input = r.element.children[1]),
                    (r.label = r.element.children[2]),
                    _F.Gct(r.label, "span"),
                    _F.Gct(r.input, "input");
                const h = { element: this.Jmt("vibratePermission"), label: null, input: null };
                (h.input = h.element.children[1]),
                    (h.label = h.element.children[2]),
                    _F.Gct(h.label, "span"),
                    _F.Gct(h.input, "input");
                const o = { element: this.Jmt("cameraPermission"), label: null, input: null };
                (o.input = o.element.children[1]),
                    (o.label = o.element.children[2]),
                    _F.Gct(o.label, "span"),
                    _F.Gct(o.input, "input");
                const a = { element: this.Jmt("microphonePermission"), label: null, input: null };
                (a.input = a.element.children[1]),
                    (a.label = a.element.children[2]),
                    _F.Gct(a.label, "span"),
                    _F.Gct(a.input, "input");
                const l = { element: this.Jmt("useAssetPack"), label: null, input: null };
                return (
                    (l.input = l.element.children[1]),
                    (l.label = l.element.children[2]),
                    _F.Gct(l.label, "span"),
                    _F.Gct(l.input, "input"),
                    { container: t, title: i, OHn: e, DHn: s, FHn: n, LHn: r, BHn: h, UHn: o, NHn: a, jHn: l }
                );
            }
            EHn() {
                const t = this.Jmt("signingSection"),
                    i = this.Jmt("propertyHeading");
                let e, s, n, r, h;
                {
                    const t = this.Jmt("keystore"),
                        i = t.children[0];
                    let s;
                    _F.Gct(i);
                    {
                        const e = t.children[1];
                        _F.Gct(i);
                        const n = e.children[0],
                            r = e.children[1];
                        _F.Gct(n), _F.Gct(r), (s = { element: e, input: n, label: r });
                    }
                    const n = t.children[2],
                        r = t.children[4],
                        h = t.children[5];
                    _F.Gct(n),
                        _F.Gct(r),
                        _F.Gct(h),
                        r.addEventListener("click", (t) => _F.ti.Ze.Ke("CreateKeystoreDialog").pr()),
                        h.addEventListener("click", (i) => {
                            (s.input.value = null), t.removeAttribute("keystore-selected");
                        }),
                        s.input.addEventListener("change", (i) => {
                            const e = s.input.files;
                            e[0]
                                ? (t.setAttribute("keystore-selected", ""), (n.textContent = e[0].name))
                                : (t.removeAttribute("keystore-selected"), (n.textContent = ""));
                        }),
                        (e = { element: t, title: i, select: s, name: n, create: r, clear: h });
                }
                {
                    const t = this.Jmt("keyalias"),
                        i = t.children[0],
                        e = t.children[1];
                    _F.Gct(i), _F.Gct(e), (s = { element: t, label: i, input: e });
                }
                {
                    const t = this.Jmt("passwordVisible"),
                        i = t.children[1],
                        e = t.children[2];
                    _F.Gct(e), _F.Gct(i), (n = { element: t, input: i, label: e });
                }
                {
                    const t = this.Jmt("keystorePassword"),
                        i = t.children[0],
                        e = t.children[1];
                    _F.Gct(i), _F.Gct(e), (r = { element: t, input: e, label: i });
                }
                {
                    const t = this.Jmt("keyPassword"),
                        i = t.children[0],
                        e = t.children[1];
                    _F.Gct(i), _F.Gct(e), (h = { element: t, input: e, label: i });
                }
                return (
                    n.input.addEventListener("change", (t) => {
                        const i = n.input.checked ? "text" : "password";
                        (r.input.type = i), (h.input.type = i);
                    }),
                    { container: t, title: i, $Hn: e, zHn: s, VHn: n, WHn: r, HHn: h }
                );
            }
            CHn() {
                const t = this.Jmt("helpLink"),
                    i = this.Jmt("nextButton"),
                    e = this.Jmt("cancelButton");
                return (
                    t.addEventListener("click", (t) =>
                        self.app.WO("interface/dialogs/cordova-options", "CordovaOptionsDialog")
                    ),
                    i.addEventListener("click", (t) => this.egt()),
                    e.addEventListener("click", (t) => this.JLt()),
                    { KHn: t, qHn: i, PT: e }
                );
            }
            fgt() {
                this.XHn(), this.YHn(), this.JHn(), this.ZHn();
            }
            THn(t) {
                return 0 === t.indexOf("signed");
            }
            QHn(t) {
                const i = t.indexOf("-");
                return i > -1 ? t.slice(i + 1) : t;
            }
            XHn() {
                const t = (t, i) => (t.textContent = TF(i)),
                    i = this.bHn.vHn;
                _F.u.o("ui.dialogs.cordovaOptions"),
                    t(i.title, ".general"),
                    t(i.PHn.label, ".min-version"),
                    t(i.GHn.label, ".target-version"),
                    t(i.AHn.label, ".android-build"),
                    t(i.RHn.label, ".min-version"),
                    t(i.kHn.label, ".ios-build"),
                    _F.u.o(".builds");
                const e = i.AHn.input;
                t(e.item(0), ".cordova-project"),
                    t(e.item(1), ".android-studio-project"),
                    t(e.item(2), ".debug-apk"),
                    t(e.item(3), ".unsigned-release-apk"),
                    t(e.item(4), ".unsigned-app-bundle"),
                    t(e.item(5), ".signed-debug-apk"),
                    t(e.item(6), ".signed-release-apk"),
                    t(e.item(7), ".signed-app-bundle");
                const s = i.kHn.input;
                t(s.item(0), ".cordova-project"), t(s.item(1), ".xcode-project"), _F.u.it(), _F.u.it();
            }
            YHn() {
                const t = (t, i) => (t.textContent = TF(i)),
                    i = this.bHn.properties;
                _F.u.o("ui.dialogs.cordovaOptions"),
                    t(i.title, ".properties"),
                    t(i.OHn.label, ".url-whitelist"),
                    t(i.LHn.label, ".hide-status-bar"),
                    t(i.DHn.label, ".android-version-code"),
                    t(i.BHn.label, ".permissions.vibrate"),
                    t(i.UHn.label, ".permissions.camera"),
                    t(i.NHn.label, ".permissions.microphone"),
                    _F.u.it();
            }
            JHn() {
                const t = (t, i) => (t.textContent = TF(i)),
                    i = this.bHn.MHn;
                _F.u.o("ui.dialogs.cordovaOptions"),
                    t(i.title, ".signing"),
                    t(i.$Hn.select.label, ".choose"),
                    t(i.$Hn.create, ".create"),
                    t(i.$Hn.clear, ".clear"),
                    t(i.$Hn, ".keystore"),
                    t(i.zHn.label, ".key-alias"),
                    t(i.VHn.label, ".show-passwords"),
                    t(i.WHn.label, ".keystore-password"),
                    t(i.HHn.label, ".key-password"),
                    _F.u.it();
            }
            ZHn() {
                _F.u.o("ui.dialogs.cordovaOptions"), this.hr(TF(".caption"));
                const t = (t, i) => (t.textContent = TF(i)),
                    i = this.jSi;
                t(i.KHn, "common.help"), t(i.qHn, "common.next"), t(i.PT, "common.cancel"), _F.u.it();
            }
            tKn(t) {
                var i, e;
                (i = this.bHn.properties.container), (e = t), (i.style.display = e ? "" : "none");
            }
            IHn(t) {
                const i = this.bHn.MHn;
                var e, s;
                (e = i.container),
                    (s = t),
                    (e.style.display = s ? "" : "none"),
                    t ||
                        ((i.HHn.input.value = ""),
                        (i.WHn.input.value = ""),
                        (i.zHn.input.value = ""),
                        (i.$Hn.select.input.value = null),
                        (i.$Hn.name.textContent = ""),
                        i.$Hn.element.removeAttribute("keystore-selected"));
            }
            iKn() {
                const t = this.bHn.vHn.AHn,
                    i = t.input.value,
                    e = "" === t.element.style.display,
                    s = this.THn(i);
                this.IHn(e && s);
            }
            async eKn(t, i, e) {
                _F.vu(t), _F.vu(i), _F.Gmt(e);
                const s = "android" !== t,
                    n = "ios" !== t,
                    r = await this.sKn(i);
                return this.nKn(r), (this.tBn = t), this.rKn(n, s, !1, !1), this.tKn(!1), this.iKn(), super.pr(e);
            }
            async pr(t, i) {
                _F.x$(t);
                const e = t.platform,
                    s = t.version,
                    n = !!t.hKn;
                _F.vu(e), _F.vu(s), _F.Gmt(i);
                const r = "android" === e,
                    h = "ios" === e,
                    o = await this.sKn(s);
                if ((this.nKn(o), (this.tBn = e), this.rKn(r, h, !0, !0), this.tKn(!0), this.iKn(), h)) {
                    const t = this.bHn.vHn.RHn.input;
                    n
                        ? (_F.ti.CT(t.options[0], "disabled", n), "1500" === t.value && (t.value = "1600"))
                        : _F.ti.CT(t.options[0], "disabled", !1);
                }
                return super.pr(i);
            }
            async sKn(t) {
                _F.vu(t);
                const i = (await localforage.getItem("cordova-export-options")) || {},
                    e = this.oKn(t);
                return {
                    androidVersion: Math.max(parseInt(i.androidVersion) || 700, 700),
                    androidTarget: "cordova",
                    iosVersion: Math.max(i.iosVersion || 1500, 1500),
                    iosTarget: "cordova",
                    hideStatusBar: i.hideStatusBar || !1,
                    permissionVibrate: i.permissionVibrate || !1,
                    permissionCamera: i.permissionCamera || !1,
                    permissionMicrophone: i.permissionMicrophone || !1,
                    whitelist: "http://*/* https://*/*",
                    versionCode: e,
                    useAssetPack: i.useAssetPack || !1,
                    generateAssetManifest: i.generateAssetManifest || !1,
                    assetPackLocation: "",
                };
            }
            oKn(t) {
                _F.vu(t);
                const i = /^(\d+)(?:\.(\d+))?(?:\.(\d+))?(?:\.(\d+))?$/.exec(t);
                if (!i) throw new Error("Invalid version number");
                return 100 * (100 * (100 * +i[1] + (+i[2] || 0)) + (+i[3] || 0)) + (+i[4] || 0);
            }
            aKn(t) {
                if ("number" !== t.type) throw new Error("Invalid type on input");
                const i = t.min ? parseFloat(t.min) : -1 / 0,
                    e = t.max ? parseFloat(t.max) : 1 / 0;
                if (i > e) throw new Error("Invalid min/max on input");
                const s = parseFloat(t.value);
                return isNaN(s) || s < i || s > e;
            }
            lKn() {
                const t = this.bHn.properties,
                    i = this.bHn.vHn;
                return {
                    androidVersion: i.PHn.input.value,
                    androidTarget: i.AHn.input.value,
                    iosVersion: i.RHn.input.value,
                    iosTarget: i.kHn.input.value,
                    hideStatusBar: t.LHn.input.checked,
                    permissionVibrate: t.BHn.input.checked,
                    permissionCamera: t.UHn.input.checked,
                    permissionMicrophone: t.NHn.input.checked,
                    whitelist: t.OHn.input.value,
                    versionCode: t.DHn.input.value,
                    useAssetPack: t.jHn.input.checked,
                    licenseKey: t.FHn.input.value,
                    keystore: null,
                    alias: null,
                    ksPassword: null,
                    kPassword: null,
                };
            }
            uKn(t) {
                const i = this.bHn.MHn;
                return (
                    (t.keystore = i.$Hn.select.input.files[0]),
                    (t.alias = i.zHn.input.value),
                    (t.ksPassword = i.WHn.input.value),
                    (t.kPassword = i.HHn.input.value || i.WHn.input.value),
                    t
                );
            }
            cKn(t) {
                if (!t.keystore) throw new Error("Please specify the keystore.");
                if (!t.alias) throw new Error("Please specify the alias.");
                if (!t.ksPassword) throw new Error("Please specify the keystore password.");
            }
            nKn(t) {
                const { vHn: i, properties: e } = this.bHn;
                i.PHn.input.value = t.androidVersion;
                const s = _F.Tke.fKn.dKn();
                (i.GHn._Hn.textContent = IF("ui.dialogs.cordovaOptions.android-target-version-info", s.PHn, s.pKn)),
                    (i.RHn.input.value = t.iosVersion),
                    (e.DHn.input.value = t.versionCode),
                    (e.LHn.input.checked = t.hideStatusBar),
                    (e.UHn.input.checked = t.permissionCamera),
                    (e.BHn.input.checked = t.permissionVibrate),
                    (e.NHn.input.checked = t.permissionMicrophone),
                    (e.OHn.input.value = t.whitelist);
            }
            rKn(t, i, e, s) {
                const n = (t, i) => (t.style.display = i ? "" : "none"),
                    r = this.bHn.vHn;
                n(r.AHn.element, t),
                    n(r.GHn.element, t),
                    n(r.PHn.element, s && t),
                    n(r.kHn.element, i),
                    n(r.RHn.element, s && i);
                const h = this.bHn.properties;
                n(h.jHn.element, kF && t), n(h.FHn.element, kF && t), n(h.DHn.element, t);
                const o = r.AHn.input.options,
                    a = r.kHn.input.options;
                e
                    ? (o[0].removeAttribute("hidden"), a[0].removeAttribute("hidden"))
                    : (o[0].setAttribute("hidden", ""),
                      0 == o.selectedIndex && (o.selectedIndex = 1),
                      a[0].setAttribute("hidden", ""),
                      0 == a.selectedIndex && (a.selectedIndex = 1));
            }
            egt() {
                if (this.aKn(this.bHn.properties.DHn.input)) {
                    return void _F.ti.Ze.Ke("OK").pr(self.Hpt("ui.dialogs.cordovaOptions.invalid-version-code"));
                }
                const t = this.lKn(),
                    i = "ios" !== this.tBn,
                    e = t.androidTarget,
                    s = this.THn(e),
                    n = i && s;
                if ((localforage.setItem("cordova-export-options", t).catch((t) => self.app.cme(t)), n)) {
                    const i = this.uKn(t);
                    try {
                        this.cKn(i);
                    } catch (t) {
                        return void (() => {})(t);
                    }
                }
                this.WD(t);
            }
            Cz() {}
        });
    _F.ti.SK.zgt.addEventListener("load", () => {
        _F.ti.Ze.Ugt(RF, OF);
    });
}
{
    const DF = self.t,
        FF = self.lang,
        LF = DF.sj(import.meta.url),
        BF = LF.getElementById("archiveManagerDialog"),
        UF = DF.nj(LF.URL),
        NF = "C3_Archive_Manager",
        jF = 10;
    DF.u.ij(UF + "lang");
    const $F = "ArchiveManager",
        zF = (DF.ti.Ze.mKn = class extends DF.ti.Ze {
            constructor() {
                super(BF), (this.iTt = DF.m(DF.ti.Hde, BF, this)), DF.u.o("ui.dialogs.archive-manager");
                const t = DF.ti.Hde._Bt(28),
                    i = self.app;
                this.hr(FF(".caption")),
                    (this.rTt = this.iTt.Qde("horizontalToolbar", t, [
                        DF.ti.Hde.qde("upload", i.ht("add"), FF(".toolbar.upload"), () => this.rVn(), !1),
                        DF.ti.Hde.qde("download", i.ht("download"), FF(".toolbar.download"), () => this.mRt(), !0),
                        DF.ti.Hde.YO(),
                        DF.ti.Hde.qde("delete", i.ht("delete"), FF(".toolbar.delete"), () => this.ygt(), !0),
                        DF.ti.Hde.YO(),
                        DF.ti.Hde.qde("build", i.ht("build"), FF(".toolbar.build"), () => this.wKn(), !0),
                    ])),
                    (this.dUn = !1),
                    (this.gKn = !1),
                    this.iTt.QO();
                const e = this.iTt.tTt(),
                    s = DF.m(DF.ti.Tj.Table, e, { VIi: !1 });
                (this.Izt = null),
                    (this.sqe = new Map()),
                    (this.jci = {
                        upload: this.rTt.Zde("upload"),
                        download: this.rTt.Zde("download"),
                        delete: this.rTt.Zde("delete"),
                        yKn: this.rTt.Zde("build"),
                        fVn: e,
                        table: s,
                    }),
                    s
                        .bnt()
                        .Nnt("project", 150, FF(".columns.project"))
                        .Nnt("version", 50, FF(".columns.version"))
                        .Nnt("exporter", 80, FF(".columns.exporter"))
                        .Nnt("created", 130, FF(".columns.created"))
                        .Nnt("type", 150, FF(".columns.type"))
                        .Cnt("size", FF(".columns.size")),
                    s.QLt(),
                    s.addEventListener("rowcontextmenu", (t) => this.fz(t)),
                    s.addEventListener("rowselected", (t) => this.bKn(t.rlt)),
                    s.addEventListener("rowunselected", (t) => this.vKn(t.rlt)),
                    DF.u.it();
            }
            async rVn() {
                if (await self.app.iD()) return void self.app.qB(null, 21);
                const t = new DF.ti.Eyi();
                let i = await t.pr(".zip");
                if (null === i) return;
                const e = new DF.pRt();
                let s;
                try {
                    await e.q2t(i);
                    const t = e.h4t("config.json");
                    s = await e.ets(t);
                } catch (t) {
                    console.error("Error processing zip file: ", t), e.e4t();
                    return void DF.ti.Ze.Ke("OK").pr(FF("ui.dialogs.archive-manager.error.invalid-file"));
                }
                const n = s.android,
                    r = s.ios;
                let h = null;
                if (n && r) h = "c2";
                else if (n) h = "android";
                else {
                    if (!r) {
                        return void DF.ti.Ze.Ke("OK").pr(FF("ui.dialogs.archive-manager.error.invalid-file"));
                    }
                    h = "ios";
                }
                if ("c2" == h)
                    try {
                        i = await this.SKn(i, e, JSON.stringify(s));
                    } catch (t) {
                        console.error("Error processing zip file: ", t);
                        return void DF.ti.Ze.Ke("OK").pr(FF("ui.dialogs.archive-manager.error.invalid-file"));
                    }
                return e.e4t(), this.xKn(i, s.name, h, "cordova", Date.now(), i.name, s.version);
            }
            async SKn(t, i, e) {
                const s = DF.ti.Ze.Ke("Progress");
                s.pr("");
                try {
                    const s = DF.Tke.fKn.ON.MKn(e);
                    if (s.q7s()) {
                        const t = new Map();
                        for (const e of i.cqe()) {
                            const s = await i.t4t(e);
                            t.set(e.filename, s);
                        }
                        s.EKn(!1),
                            s.CKn("cordova-plugin-statusbar", null),
                            s.CKn("cordova-plugin-fullscreen", null),
                            t.set("config.json", s._Kn());
                        const e = t.get("www/c2runtime.js");
                        if (!e) throw new Error("Unable to find runtime");
                        return t.set("www/c2runtime.js", new Blob([e, this.TKn()]), { type: e.type }), await i.bRt(t);
                    }
                    return t;
                } finally {
                    s.WD();
                }
            }
            TKn() {
                return ';\n(function () {\nvar previousWidth = -1;\nvar previousHeight = -1;\n\nfunction tick ()\n{\n\trequestAnimationFrame(tick);\n\n\tvar isPortrait = window.innerWidth < window.innerHeight;\n\n\tvar height = isPortrait ? window["screen"]["height"] : window["screen"]["width"];\n\tvar width = isPortrait ? window["screen"]["width"] : window["screen"]["height"];\n\n\tif (previousHeight == height && previousWidth == width)\n\t\treturn;\n\n\tpreviousHeight = height;\n\tpreviousWidth = width;\n\n\tvar docStyle = document["documentElement"].style;\n\tvar bodyStyle = document["body"].style;\n\n\tif (height && width)\n\t{\n\t\tbodyStyle["height"] = docStyle["height"] = height + "px";\n\t\tbodyStyle["width"] = docStyle["width"] = width + "px";\n\t}\n}\n\nfunction enterFullscreen ()\n{\n\t// ios - hide statusbar\n\tif (typeof window["StatusBar"] === "object")\n\t\twindow["StatusBar"]["hide"]();\n\n\t// android - hide status and nav bar\n\tif (typeof window["AndroidFullScreen"] === "object")\n\t\twindow["AndroidFullScreen"]["immersiveMode"]();\n}\n\ndocument.addEventListener("deviceready", function () {\n\tvar ua = navigator.userAgent;\n\tvar isMicrosoftEdge = /edge\\//i.test(ua);\n\tvar isIE = (/msie/i.test(ua) || /trident/i.test(ua) || /iemobile/i.test(ua)) && !isMicrosoftEdge;\n\tvar isiPhone = (/iphone/i.test(ua) || /ipod/i.test(ua)) && !isIE && !isMicrosoftEdge;\t// treat ipod as an iphone; IE mobile masquerades as iPhone\n\n\tenterFullscreen();\n\tif (isiPhone && window["screen"])\n\t\ttick();\n});\n})();';
            }
            mRt() {
                if (!this.Izt) throw new Error("No entry selected");
                DF.IRt(this.Izt.filename, this.Izt.blob);
            }
            ygt() {
                if (!this.Izt) throw new Error("No entry selected");
                const t = this.Izt;
                (this.Izt = null),
                    this.IKn().then(() => {
                        this.sqe.delete(t.uid), this.PKn(), this.GKn();
                    });
            }
            async wKn() {
                if (await self.app.iD()) return void self.app.qB(null, 21);
                const t = this.Izt;
                if (!t) throw new Error("No entry selected");
                const i = t.blob,
                    e = t.project,
                    s = t.exporter,
                    n = t.version,
                    r = DF.ti.Ze.Ke("CordovaOptions");
                let h;
                if (((h = "ios" === s ? { iosTarget: "project" } : await r.eKn(s, n)), !h)) return;
                const o = {};
                return (
                    ("c2" != s && "android" != s) || (o.android = h.androidTarget),
                    ("c2" != s && "ios" != s) || (o.ios = h.iosTarget),
                    o.android && 0 === o.android.indexOf("signed") && (o.sign = await this.AKn(h)),
                    this.igt(),
                    this.RKn(i, e, s, o, n)
                );
            }
            fz() {}
            bKn(t) {
                this.Izt = t.Zc();
                const i = "cordova" === this.Izt.type;
                this.jci.yKn.lht(i && !this.gKn), this.jci.download.lht(!0), this.jci.delete.lht(!0);
            }
            vKn() {
                (this.Izt = null), this.jci.yKn.lht(!1), this.jci.download.lht(!1), this.jci.delete.lht(!1);
            }
            fgt() {}
            kKn(t, i) {
                if ("cordova" === i) return "Cordova Project";
                if ("android" === t) {
                    const t = i.indexOf("-"),
                        e = 0 === i.indexOf("signed");
                    switch (t > -1 ? i.slice(t + 1) : i) {
                        case "signed":
                            return "Signed Release APK";
                        case "project":
                            return "Android Studio Project";
                        case "debug":
                            return e ? "Signed Debug APK" : "Debug APK";
                        case "release":
                            return e ? "Signed Release APK" : "Unsigned Release APK";
                        case "bundle":
                            return e ? "Signed App Bundle" : "Unsigned App Bundle";
                    }
                }
                return "ios" === t && "project" === i ? "Xcode Project" : DF.zEs(i);
            }
            OKn() {
                return localforage
                    .getItem(NF)
                    .catch(() => {})
                    .then((t) => {
                        (this.dUn = !0), (t = t || []);
                        for (const i of t) {
                            let t = this.sqe.get(i.uid);
                            t || (this.sqe.set(i.uid, i), (t = i)), (i.saved = !0);
                        }
                    });
            }
            async IKn() {
                await DF.xis.gYt(), this.dUn || (await this.OKn());
            }
            async PKn() {
                if (!this.dUn) throw new Error("Local entries not loaded");
                const t = Array.from(this.sqe.values());
                try {
                    await localforage.setItem(NF, t);
                    for (const t of this.sqe.values()) t.saved = !0;
                } catch (t) {}
            }
            DKn(t) {
                self.app.cme(t, FF("ui.dialogs.archive-manager.error.storage-fail"));
            }
            GKn() {
                const t = this.jci.table;
                t._x();
                const i = Array.from(this.sqe.values()).sort((t, i) => i.created - t.created);
                for (const e of i) {
                    const i = e.project,
                        s = "ios" == e.exporter ? "iOS" : DF.zEs(e.exporter),
                        n = new Date(e.created).toLocaleString(self.app.Lmt(), {
                            day: "numeric",
                            month: "short",
                            year: "numeric",
                            hour: "numeric",
                            minute: "numeric",
                        }),
                        r = this.kKn(e.exporter, e.type),
                        h = DF.nbe(e.size),
                        o = e.version;
                    t.Snt(e)
                        .Ont("project", i)
                        .Ont("version", o)
                        .Ont("exporter", s)
                        .Ont("created", n)
                        .Ont("type", r)
                        .Ont("size", h);
                }
            }
            async AKn(t) {
                DF.Et(t.keystore, Blob), DF.vu(t.alias), DF.vu(t.ksPassword), DF.vu(t.kPassword);
                const i = await DF.iEs(t.keystore),
                    e = new Uint8Array(i);
                return { keystore: DF.nDe(e), ksPassword: t.ksPassword, kPassword: t.kPassword, alias: t.alias };
            }
            async xKn(t, i, e, s, n, r, h) {
                DF.Et(t, Blob), DF.vu(i), DF.vu(e), DF.vu(s), DF.wi(n), DF.vu(h);
                const o = {
                    project: i,
                    exporter: e,
                    created: n,
                    type: s,
                    size: t.size,
                    saved: !1,
                    filename: r,
                    blob: t,
                    version: h,
                    uid: DF.jFi(),
                };
                if ((this.sqe.set(o.uid, o), await this.IKn(), this.sqe.size > jF)) {
                    const t = Array.from(this.sqe.values()).sort((t, i) => i.created - t.created);
                    for (; t.length > jF; ) {
                        const i = t.pop();
                        this.sqe.delete(i.uid);
                    }
                }
                return await this.PKn(), this.gu() && this.GKn(), o;
            }
            async RKn(t, i, e, s, n) {
                let r, h;
                DF.Et(t, Blob),
                    DF.vu(i),
                    DF.vu(e),
                    DF.Dpt(s),
                    DF.vu(n),
                    this.FKn(),
                    "c2" == e ? ((r = "multiple"), (h = `${i}.multiple`)) : ((r = s[e]), (h = `${i}.${e}.${r}`)),
                    s.android && 0 === s.android.indexOf("signed") && (s.android = s.android.slice(7));
                const o = DF.m(DF.ti.Ze.mKn.LKn, t, h, s);
                try {
                    const t = await o.BKn();
                    this.UKn(), this.NKn(t, i, e, r, n);
                    DF.ti.Ze.Ke("CordovaBuildReport").pr(i, t.name, t);
                } catch (t) {
                    this.UKn(t);
                }
            }
            async jKn(t, i, e, s, n, r) {
                DF.Et(t, Blob), DF.vu(i), DF.vu(e), DF.vu(s), DF.vu(n), DF.oN(r), this.FKn();
                const h = { [e]: s, sign: r },
                    o = `${i}.${e}.${s}`;
                h.android && 0 === h.android.indexOf("signed") && (h.android = h.android.slice(7));
                const a = DF.m(DF.ti.Ze.mKn.LKn, t, o, h);
                try {
                    const t = await a.BKn();
                    this.UKn(), this.NKn(t, i, e, s, n);
                    DF.ti.Ze.Ke("CordovaBuildReport").pr(i, t.name, t);
                } catch (t) {
                    this.UKn(t);
                }
            }
            PAe(t) {
                DF.Et(t, self.urs);
                const i = t.Mi(),
                    e = t.LYt(),
                    s = e.mke,
                    n = e.tag,
                    r = i.Zn(),
                    h = Date.now(),
                    o = i.Ote();
                return s ? this.xKn(s, r, n, "zip", h, `${r}.${n}.zip`, o) : Promise.resolve();
            }
            $Kn(t) {
                DF.Et(t, self.urs);
                const i = t.Mi(),
                    e = t.LYt(),
                    s = e.mke,
                    n = e.tag,
                    r = i.Zn(),
                    h = Date.now(),
                    o = i.Ote();
                return this.xKn(s, r, n, "cordova", h, `${r}.${n}.cordova.zip`, o);
            }
            NKn(t, i, e, s, n) {
                DF.VNt(t), DF.vu(i), DF.vu(e), DF.vu(s), DF.vu(n);
                const r = Date.now();
                return this.xKn(t, i, e, s, r, t.name, n);
            }
            async zKn(t) {
                DF.Et(t, self.urs);
                const i = t.Mi(),
                    e = t.LYt(),
                    s = e.mke,
                    n = e.tag,
                    r = e.XPe.cordova,
                    h = i.Zn(),
                    o = i.Ote();
                let a;
                if (("android" === n && (a = r.androidTarget), "ios" === n && (a = r.iosTarget), "cordova" === a)) {
                    this.$Kn(t);
                    DF.ti.Ze.Ke("CordovaExportReport").pr(t);
                } else {
                    let t = null;
                    0 === a.indexOf("signed") && (t = await this.AKn(r)), await this.jKn(s, h, n, a, o, t);
                }
            }
            sRs() {
                return this.gKn;
            }
            FKn() {
                if (this.gKn) throw new Error("Already building");
                this.jci.yKn.lht(!1), (this.gKn = !0);
            }
            UKn(t = null) {
                if (((this.gKn = !1), null !== t)) {
                    DF.u.o("ui.dialogs.archive-manager.error");
                    const i = FF(".build-fail"),
                        e = FF(".build-failure-message");
                    if ((DF.u.it(), t instanceof Error)) {
                        return DF.ti.Ze.Ke("ShellOutput").pr(i, e, t.message);
                    }
                    if ("string" == typeof t) {
                        return DF.ti.Ze.Ke("ShellOutput").pr(i, e, t);
                    }
                    return DF.ti.Ze.Ke("OK").pr(i);
                }
            }
            async pr(t) {
                return await this.IKn(), this.GKn(), super.pr(t);
            }
            oQe() {
                super.oQe();
            }
            egt() {}
            JLt() {
                super.JLt();
            }
            static VKn() {
                return NF;
            }
        });
    DF.ti.SK.zgt.addEventListener("load", function () {
        DF.ti.Ze.Ugt($F, zF);
    });
}
{
    const VF = self.t,
        WF = VF.u.z_("ui.build-service-status"),
        HF = new Map([
            ["Waiting to build", "waiting-to-build"],
            ["Preparing project", "preparing-project"],
            ["Building Android", "building-android"],
            ["Building iOS", "building-ios"],
            ["Compressing builds", "compressing-builds"],
            ["Project uploaded successfully", "upload-complete"],
            ["Connection restored", "connection-restored"],
            ["Build complete, beginning transfer", "build-complete"],
        ]);
    function KF(t) {
        const i = HF.get(t);
        return i ? WF("." + i) : t;
    }
    const qF = "wss://build.construct.net/",
        XF = 5,
        YF = 5e3,
        JF = Symbol("init"),
        ZF = Symbol("uploading"),
        QF = Symbol("downloading");
    VF.ti.Ze.mKn.LKn = class {
        constructor(t, i, e) {
            const s = !!e.ios,
                n = !!e.android;
            (this.KHe = null),
                (this.WKn = null),
                (this.HKn = null),
                (this.KKn = t),
                (this.qKn = 0),
                (this.XKn = 1),
                (this.uli = JF),
                (this.YKn = null),
                (this.JKn = i),
                (this.ZKn = null),
                (this.QKn = null),
                (this.tqn = null),
                (this.iqn = !1),
                (this.eqn = e),
                (this.tBn = null),
                (this._c = null),
                (this.sqn = -1),
                n && s ? (this.tBn = "c2") : n ? (this.tBn = "android") : s && (this.tBn = "ios"),
                (this.Osi = e[this.tBn] || null),
                (this.nqn = XF),
                (this.rqn = WF(".prefix"));
            let r = VF.ti.Tj,
                h = VF.m(r.rln);
            (this.mln = h),
                (this.hqn = VF.m(r.gln, h, this.rqn + WF(".transfer-progress"))),
                (this.oqn = VF.m(r.vln, h, ""));
        }
        Ut() {
            -1 !== this.sqn && (clearTimeout(this.sqn), (this.sqn = -1)),
                this.QKn && this.QKn.Ua(),
                this.tqn && this.tqn.Ua(),
                (this.QKn = null),
                (this.tqn = null),
                this.KHe && (this.KHe.Ist(), (this.KHe = null)),
                (this.WKn = null),
                (this.HKn = null),
                (this.KKn = null),
                this.hqn.PL(),
                this.mln.Ut(),
                (this.mln = null),
                (this.hqn = null),
                (this.oqn = null);
        }
        aqn() {
            return `${this.tBn}${this.Osi ? "-" + this.Osi : ""}`;
        }
        P7s(t) {
            self.app.P7s("BuildService", t + "-" + this.aqn());
        }
        async BV() {
            this.P7s("StartedBuild"),
                await this.lqn(this.KKn),
                await Promise.all([this.uqn(), this.cqn().then((t) => this.dqn())]);
        }
        async BKn() {
            try {
                await this.BV(), this.P7s("BuildCompleted");
                const t = this.JKn + this.ZKn;
                return VF.tN(this.HKn, t);
            } catch (t) {
                throw (this.P7s("BuildFailed"), t);
            } finally {
                this.Ut();
            }
        }
        fqn() {
            this.nqn--,
                (this.iqn = !1),
                this.QKn && (this.QKn.Ua(), (this.QKn = null)),
                this.nqn > 0
                    ? (this.pqn(WF(".lost-connection")),
                      -1 !== this.sqn && clearTimeout(this.sqn),
                      (this.sqn = setTimeout(() => this.mqn(), YF)))
                    : this._c();
        }
        wqn() {
            this.pqn(WF(".connected-to-server")),
                (this.iqn = !0),
                (this.QKn = VF.Xa.Wa(this.KHe, "close", () => this.fqn()));
        }
        async mqn() {
            try {
                await this.KHe.hKe(), await this.gqn();
            } catch (t) {
                return void (() => {})(t);
            }
        }
        t0e() {
            this.hqn.bln(this.qKn / this.XKn);
        }
        pqn(t) {
            (t = KF(t)), console.log(`${this.rqn} ${t}`), this.oqn && this.oqn.In(`${this.rqn} ${t}`);
        }
        async dqn() {
            const t = this.WKn;
            for (this.uli = ZF; t.length > 0; ) {
                const i = t.shift();
                try {
                    const e = 0 === t.length;
                    await this.KHe.bKe(e ? "END" : "CNK", i), (this.qKn += i.length), this.t0e();
                } catch (e) {
                    throw (t.unshift(i), e);
                }
            }
            this.hqn.PL();
        }
        async lqn() {
            this.XKn = this.KKn.size;
            const t = await VF.iEs(this.KKn);
            this.WKn = await VF.sDe(t, Uint8Array, 65536);
        }
        uqn() {
            return (
                (this.KHe = VF.m(VF.WebSocket, qF)),
                (this.tqn = VF.Xa.Wa(this.KHe, "open", () => this.wqn())),
                this.KHe.oKe("STS", (t) => this.pqn(t)),
                this.yqn()
            );
        }
        yqn() {
            return (
                this.KHe.fKe("SRT", (t) => {
                    (this.uli = QF), (this.HKn = []), (this.XKn = t.size), (this.ZKn = t.ext || ".zip");
                }),
                this.KHe.cKe("RES", (t) => {
                    this.HKn.push(t), (this.qKn += t.length), this.t0e();
                }),
                new Promise((t, i) => {
                    (this._c = () => i("Cannot connect to build server")),
                        this.KHe.oKe("ERR", i),
                        this.KHe.oKe("DON", t);
                })
            );
        }
        async cqn(t) {
            this.pqn(WF(".connecting"));
            try {
                return await this.bqn(t);
            } catch (t) {
                if (!(t instanceof VF.Event && "close" === t.type)) throw t;
                (() => {})("no connection");
            }
            let i = 1;
            for (; i < XF; ) {
                await VF.STi(YF);
                try {
                    return await this.KHe.hKe(), void (await this.bqn(t));
                } catch (t) {
                    if (!(t instanceof VF.Event && "close" === t.type)) throw t;
                    i++;
                }
            }
            this._c();
        }
        async bqn(t) {
            const i = Object.assign({}, this.eqn);
            t && (i.uuid = t);
            const e = self.app;
            (i.pt = e.Mke()), (i.rc = e.jke()), (i.lh = e.Rke());
            const s = this.KHe,
                [n, r] = await Promise.all([s.wKe("RDY"), s.EKe("CRT", i)]);
            this.YKn = n;
        }
        async gqn() {
            let t = this.YKn;
            await this.cqn(this.YKn),
                t !== this.YKn ? (await this.lqn(), await this.dqn()) : this.uli === ZF && (await this.dqn());
        }
        static async vqn(t) {
            const i = await VF.WebSocket._Ke(qF);
            try {
                await i.EKe("KEY", t);
                const e = await Promise.race([Promise.all([i.yKe("RES"), i.wKe("INF")]), i.wKe("ERR")]);
                if ("string" == typeof e) throw new Error(e);
                const s = /Certificate fingerprints\:[\s\S]+SHA1: ([^\n]+)/m.exec(e[1]);
                return [new Blob([e[0]]), s ? s[1] : "FAIL SIGNATURE"];
            } finally {
                i.Ist();
            }
        }
    };
}
{
    const tL = self.t,
        iL = self.lang,
        eL = tL.sj(import.meta.url),
        sL = eL.getElementById("audioPreviewDialog"),
        nL = tL.nj(eL.URL);
    tL.u.ij(nL + "lang");
    const rL = "AudioPreview",
        hL = (tL.ti.Tj.Sqn = class extends tL.ti.Ze {
            constructor() {
                super(sL),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this.lCe = null),
                    (this.uis = "");
            }
            fgt() {
                (this.OWi.textContent = iL("common.close-dialog")), this.hr(iL("ui.dialogs.audioPreview.caption"));
            }
            async pr(t, i) {
                const e = this.XLt(),
                    s = document.createElement("h3");
                s.textContent = self.ej("ui.dialogs.audioPreview.audio-title", this.xqn(t), this.Mqn(t), this.Eqn(t));
                const n = document.createElement("audio");
                return (
                    (n.src = await this.Cqn(t)),
                    (n.controls = !0),
                    (n.autoplay = !0),
                    (this.lCe = n),
                    e.appendChild(s),
                    e.appendChild(n),
                    super.pr(i)
                );
            }
            Mqn(t) {
                return tL.ca(t, globalThis.Va) ? t.JN().ZIs() : tL.MimeType.xEs(t).ZIs();
            }
            xqn(t) {
                return tL.ca(t, globalThis.Va) ? t.Pa() : t.name;
            }
            Eqn(t) {
                return tL.ca(t, globalThis.Va) ? tL.nbe(t.Nh().size) : tL.nbe(t.size);
            }
            async Cqn(t) {
                return tL.ca(t, globalThis.Va) ? t.EN() : ((this.uis = URL.createObjectURL(t)), this.uis);
            }
            Cz() {
                tL.ti.fMt(this.XLt()),
                    this.lCe.pause(),
                    (this.lCe = null),
                    this.uis && URL.revokeObjectURL(this.uis),
                    (this.uis = "");
            }
        });
    tL.ti.SK.zgt.addEventListener("load", () => {
        tL.ti.Ze.Ugt(rL, hL);
    });
}
{
    const oL = self.t,
        aL = self.lang,
        lL = oL.sj(import.meta.url),
        uL = lL.getElementById("chooseKeyDialog"),
        cL = oL.nj(lL.URL);
    oL.u.ij(cL + "lang");
    const dL = "ChooseKey",
        fL = (oL.ti.Tj._qn = class extends oL.ti.Ze {
            constructor() {
                super(uL),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this._Wt = this.Jmt("cancelButton")),
                    (this._Wt.onclick = () => this.JLt()),
                    (this.Tqn = this.Jmt("chooseKeyDisplay")),
                    (this.Iqn = this.Jmt("chooseKeyDropdown")),
                    this.Iqn.addEventListener("change", () => this.Pqn()),
                    (this.RR = (t) => this.Uj(t)),
                    (this.v0s = -1);
            }
            fgt() {
                oL.u.o("ui.dialogs.chooseKey"),
                    (this.OWi.textContent = aL("common.ok")),
                    (this._Wt.textContent = aL("common.cancel")),
                    this.hr(aL(".caption")),
                    (this.Jmt("chooseKeyNumLockNote").textContent = aL(".num-lock-note")),
                    (this.Jmt("chooseKeyOrUseDropdownNote").textContent = aL(".or-use-dropdown-note")),
                    (this.Iqn.item(0).textContent = aL(".dropdown-none")),
                    (this.Iqn.item(1).textContent = oL.fO.xCe(13)),
                    (this.Iqn.item(2).textContent = oL.fO.xCe(27)),
                    oL.u.it();
            }
            pr(t, i) {
                oL.HI(t),
                    (this.v0s = -1),
                    (this.Tqn.textContent = aL("ui.dialogs.chooseKey.no-key-placeholder")),
                    this.OWi.setAttribute("disabled", ""),
                    (this.Iqn.selectedIndex = 0),
                    t >= 0 && this.Gqn(t);
                let e = super.pr(i);
                return this.Aqn(), e;
            }
            Aqn() {
                this.CF().addEventListener("keydown", this.RR, !0);
            }
            Rqn() {
                this.CF().removeEventListener("keydown", this.RR, !0);
            }
            Uj(t) {
                t.preventDefault(), t.stopPropagation();
                let i = t.which;
                13 !== i ? (27 !== i ? this.Gqn(i) : this.JLt()) : this.egt();
            }
            Gqn(t) {
                (this.v0s = t), this.OWi.removeAttribute("disabled"), (this.Tqn.textContent = oL.fO.xCe(t));
            }
            Pqn() {
                let t = parseInt(this.Iqn.value, 10);
                t >= 0 && this.Gqn(t);
            }
            egt() {
                this.Rqn(), this.v0s >= 0 && this.WD(this.v0s);
            }
            JLt() {
                return this.Rqn(), super.JLt();
            }
            kqn() {
                return this.OWi;
            }
            Oqn() {
                return this.Tqn;
            }
            Cz() {}
        });
    oL.ti.SK.zgt.addEventListener("load", () => {
        oL.ti.Ze.Ugt(dL, fL);
    });
}
{
    const pL = self.t,
        mL = pL.sj(import.meta.url),
        wL = mL.getElementById("crashReportDialog"),
        gL = (pL.nj(mL.URL), "CrashReport");
    let yL = !1,
        bL = !1;
    function vL(t) {
        const i = t.reason;
        if (i) {
            if ("string" == typeof i) return i;
            if (void 0 !== self.HH && i instanceof self.HH) return i.NH() + ": " + i.MH();
            if ("string" == typeof i.message && (i.message || i.stack || (i.error && i.error.stack))) {
                const t = i.stack || (i.error ? i.error.stack : null);
                return "Error: " + i.message + (t ? " @ " + t : "");
            }
            if (i instanceof Event) return `Event '${i.type}'` + (i.name ? ` (${i.name})` : "") + ": " + i.toString();
            {
                let e = i.toString();
                if (e.startsWith("[object ")) {
                    let s = {},
                        n = 0;
                    for (const [t, e] of Object.entries(i)) {
                        if (n >= 3) break;
                        (s[t] = e), ++n;
                    }
                    let r = e;
                    try {
                        r = JSON.stringify(s);
                    } catch (t) {}
                    r.length > 250 && (r = r.substr(0, 250)), (e = r);
                }
                return e;
            }
        }
        return "" + i;
    }
    function SL(t) {
        if (!t) return !1;
        if ("string" == typeof t.filename) {
            const i = t.filename.toLowerCase();
            if (i.includes("safari-extension://") || i.includes("chrome-extension://")) return !0;
        }
        if (t.error && "string" == typeof t.error.stack) {
            const i = t.error.stack.toLowerCase();
            if (i.includes("safari-extension://") || i.includes("chrome-extension://")) return !0;
        }
        if ("string" == typeof t.message) {
            if (t.message.toLowerCase().startsWith("script error") && !t.filename && 0 === t.lineno) return !0;
            if (t.message.toLowerCase().includes("webkit.messagehandlers")) return !0;
            if (t.message.includes("ResizeObserver")) return !0;
            if (t.message.includes("3rdparty/monaco/") && t.message.includes("importScripts")) return !0;
        }
        return !1;
    }
    function xL(t) {
        if (!t) return !1;
        if (t.reason && "string" == typeof t.reason.stack) {
            if (t.reason.stack.toLowerCase().includes("3rdparty/monaco/")) return !0;
        }
        return !1;
    }
    const ML = (pL.ti.Tj.Dqn = class extends pL.ti.Ze {
        constructor() {
            super(wL),
                (this.RSe = this.Jmt("copyButton")),
                (this.RSe.onclick = () => this.Fqn()),
                (this.Lqn = this.Jmt("saveButton")),
                (this.Lqn.onclick = () => this.Bqn()),
                (this.Uqn = this.Jmt("reloadButton")),
                (this.Uqn.onclick = () => location.reload(!0)),
                (this.Nqn = this.Jmt("reportContent")),
                (this.iut = pL.m(pL.ti.met, self.app.lcs("error"), this.Jmt("iconWrap")));
        }
        fgt() {}
        pr(t, i, e) {
            const s = self.app;
            let n = `<h3>Error report information</h3>\n\t\t<p>\n\t\t<strong>Type:</strong> ${t}<br/>`;
            if ("unhandled exception" === t) {
                const t = i.error ? i.error.stack : null;
                s.P7s("Crash", "UnhandledException"),
                    s.jqn("Unhandled exception: " + t),
                    (n += `\n\t\t\t<strong>File:</strong> ${i.filename}, line ${i.lineno}, col ${i.colno}<br/>\n\t\t\t<strong>Message:</strong> ${i.message}<br/>\n\t\t\t<strong>Stack:</strong> ${t}<br/>\n\t\t\t`);
            } else if ("unhandled rejection" === t) {
                const t = vL(i);
                let e = t;
                s.P7s("Crash", "UnhandledRejection"),
                    (n += `<strong>Reason:</strong> ${t}<br/>`),
                    i.reason &&
                        i.reason.stack &&
                        ((n += `<strong>Stack:</strong> ${i.reason.stack}<br/>`), (e += "\n" + i.reason.stack)),
                    s.jqn("Unhandled rejection: " + e);
            } else
                s.P7s("Crash", "AssertFail"),
                    s.jqn("Assert fail: " + i.message + "\n" + i.stack),
                    (n += `\n\t\t\t<strong>Message:</strong> ${i.message}<br/>\n\t\t\t<strong>Stack:</strong> ${i.stack}<br/>\n\t\t\t`);
            n += `<strong>Construct version:</strong> ${pL.ON.fhi}<br/>\n\t\t<strong>URL:</strong> ${location.href}<br/>\n\t\t<strong>Date:</strong> ${new Date().toString()}<br/>\n\t\t<strong>Uptime:</strong> ${Math.round(performance.now() / 100) / 10} s\n\t\t</p>`;
            try {
                pL.ti.Ze.Ke("PlatformInfo")
                    .$qn(!0)
                    .then((t) => {
                        (n += t), (this.Nqn.innerHTML = n), (this.Nqn.scrollTop = 0);
                    })
                    .catch((t) => {
                        (n +=
                            "Unable to collect further diagnostic information because a promise rejection occurred while trying to collect it."),
                            (this.Nqn.innerHTML = n),
                            (this.Nqn.scrollTop = 0);
                    });
            } catch (t) {
                (n +=
                    "Unable to collect further diagnostic information because an exception was thrown while trying to collect it."),
                    (this.Nqn.innerHTML = n),
                    (this.Nqn.scrollTop = 0);
            }
            0 === s.Jrt() && this.Lqn.setAttribute("disabled", "");
            let r = super.pr(e);
            return pL.ti.jqe.g8e(), r;
        }
        egt() {}
        JLt() {}
        Cz() {
            pL.ti.fMt(this._ht);
        }
        gZe(t) {
            t.preventDefault();
        }
        Fqn() {
            let t = document.createRange();
            t.selectNodeContents(this.Nqn);
            let i = window.getSelection();
            i.removeAllRanges(), i.addRange(t), document.execCommand("copy");
        }
        Bqn() {
            self.app.zqn();
        }
        static Vqn() {
            return yL;
        }
        static Wqn() {
            window.addEventListener("error", (t) => {
                if (SL(t)) return void (() => {})("Ignored external unhandled exception: ", t);
                if (yL || bL) return;
                yL = !0;
                pL.ti.Ze.Ke("CrashReport").pr("unhandled exception", t, document.body);
            }),
                window.addEventListener("unhandledrejection", (t) => {
                    if (xL(t)) return void (() => {})("Ignored external unhandled rejection: ", t);
                    if (yL || bL) return;
                    yL = !0;
                    pL.ti.Ze.Ke("CrashReport").pr("unhandled rejection", t, document.body);
                }),
                window.addEventListener("beforeunload", () => (bL = !0), !0),
                window.addEventListener("unload", () => (bL = !0), !0);
        }
    });
    pL.ti.SK.zgt.addEventListener("load", () => {
        pL.ti.Ze.Ugt(gL, ML);
    });
}
{
    const EL = self.t,
        CL = self.lang,
        _L = EL.sj(import.meta.url),
        TL = _L.getElementById("createKeystoreDialog"),
        IL = EL.nj(_L.URL);
    EL.u.ij(IL + "lang");
    const PL = "CreateKeystoreDialog",
        GL = (EL.ti.Tj.Hqn = class extends EL.ti.Ze {
            constructor() {
                super(TL),
                    (this.jci = {
                        name: this.Kqn("name"),
                        unit: this.Kqn("unit"),
                        qqn: this.Kqn("organisation"),
                        city: this.Kqn("city"),
                        state: this.Kqn("state"),
                        country: this.Kqn("country"),
                        Xqn: this.Kqn("alias"),
                        validity: this.Kqn("validity"),
                        password: this.Kqn("password"),
                        Yqn: this.Kqn("passwordConfirm"),
                        Jqn: this.Kqn("passwordVisible"),
                    }),
                    this.jci.Jqn.addEventListener("change", () => {
                        const t = !this.jci.Jqn.value ? "password" : "text";
                        (this.jci.password.type = t), (this.jci.Yqn.type = t);
                    }),
                    (this.gme = this.Jmt("helpLink")),
                    (this.gme.onclick = () => self.app.WO("interface/dialogs/cordova-options", "CreateKeystoreDialog")),
                    (this.kWt = this.Jmt("nextButton")),
                    (this.kWt.onclick = () => this.egt()),
                    (this._Wt = this.Jmt("cancelButton")),
                    (this._Wt.onclick = () => this.JLt());
            }
            Kqn(t) {
                const i = this.Jmt(t),
                    e = this.Jmt(t + "Label");
                let s = !1;
                return {
                    get value() {
                        return "checkbox" == i.type ? i.checked : i.value;
                    },
                    set value(t) {
                        "checkbox" == i.type ? (i.checked = !!t) : (i.value = t);
                    },
                    set label(t) {
                        e.textContent = t;
                    },
                    get hidden() {
                        return s;
                    },
                    set hidden(t) {
                        s = !!t;
                        const n = s ? "none" : "";
                        (i.style.display = n), (e.style.display = n);
                    },
                    set type(t) {
                        i.type = t;
                    },
                    set placeholder(t) {
                        i.placeholder = t;
                    },
                    addEventListener: (t, e, s) => EL.Xa.Wa(i, t, e, s),
                };
            }
            pr(t) {
                return (
                    (this.jci.name.value = ""),
                    (this.jci.unit.value = ""),
                    (this.jci.qqn.value = ""),
                    (this.jci.city.value = ""),
                    (this.jci.state.value = ""),
                    (this.jci.country.value = ""),
                    (this.jci.Xqn.value = ""),
                    (this.jci.validity.value = 25),
                    (this.jci.password.value = ""),
                    (this.jci.Yqn.value = ""),
                    super.pr(t)
                );
            }
            lKn() {
                return {
                    name: this.jci.name.value.trim(),
                    unit: this.jci.unit.value.trim(),
                    organisation: this.jci.qqn.value.trim(),
                    city: this.jci.city.value.trim(),
                    state: this.jci.state.value.trim(),
                    country: this.jci.country.value.trim(),
                    alias: this.jci.Xqn.value.trim(),
                    validity: +this.jci.validity.value,
                    password: this.jci.password.value,
                    passwordConfirm: this.jci.Yqn.value,
                    keyPassword: this.jci.password.value,
                    keyPasswordConfirm: this.jci.Yqn.value,
                };
            }
            _Fn() {
                const t = this.lKn(),
                    i = "ui.dialogs.createKeystoreDialog.validation";
                if (!t.name) throw CL(i + ".name");
                if (!t.unit) throw CL(i + ".unit");
                if (!t.organisation) throw CL(i + ".organisation");
                if (!t.city) throw CL(i + ".city");
                if (!t.state) throw CL(i + ".state");
                if (2 !== t.country.length) throw CL(i + ".country");
                if (!t.alias) throw CL(i + ".alias");
                if (isNaN(t.validity) || t.validity < 1 || t.validity > 100) throw CL(i + ".validity");
                if (!t.password || t.password.length < 6) throw CL(i + ".password");
                if (!t.passwordConfirm) throw CL(i + ".password-confirm");
                if (t.password !== t.passwordConfirm) throw CL(i + ".password-match");
                return t;
            }
            fgt() {
                EL.u.o("ui.dialogs.createKeystoreDialog"),
                    this.hr(CL(".caption")),
                    (this.kWt.textContent = CL(".create")),
                    (this._Wt.textContent = CL("common.cancel")),
                    (this.gme.textContent = CL("common.help")),
                    (this.jci.name.placeholder = CL(".placeholder.name")),
                    (this.jci.name.label = CL(".label.name")),
                    (this.jci.unit.placeholder = CL(".placeholder.unit")),
                    (this.jci.unit.label = CL(".label.unit")),
                    (this.jci.qqn.placeholder = CL(".placeholder.organisation")),
                    (this.jci.qqn.label = CL(".label.organisation")),
                    (this.jci.city.placeholder = CL(".placeholder.city")),
                    (this.jci.city.label = CL(".label.city")),
                    (this.jci.state.placeholder = CL(".placeholder.state")),
                    (this.jci.state.label = CL(".label.state")),
                    (this.jci.country.placeholder = CL(".placeholder.country")),
                    (this.jci.country.label = CL(".label.country")),
                    (this.jci.Xqn.placeholder = CL(".placeholder.alias")),
                    (this.jci.Xqn.label = CL(".label.alias")),
                    (this.jci.password.placeholder = CL(".placeholder.password")),
                    (this.jci.password.label = CL(".label.password")),
                    (this.jci.Yqn.placeholder = CL(".placeholder.password-confirm")),
                    (this.jci.Yqn.label = CL(".label.password-confirm")),
                    (this.jci.validity.label = CL(".label.validity")),
                    (this.jci.Jqn.label = CL(".label.show-passwords")),
                    EL.u.it();
            }
            async egt() {
                const t = EL.ti.Ze.Ke("Progress");
                try {
                    const i = this._Fn();
                    (i.validity *= 365),
                        await super.egt(),
                        t.pr(CL("ui.dialogs.createKeystoreDialog.creating-keystore"));
                    const [e, s] = await EL.ti.Ze.mKn.LKn.vqn(i);
                    t.WD(), await EL.ti.Ze.Ke("CreateKeystoreReportDialog").pr(e, s);
                } catch (i) {
                    t.WD();
                    const e = EL.ti.Ze.Ke("ShellOutput");
                    EL.u.o("ui.dialogs.createKeystoreDialog.failure");
                    const s = CL(".caption"),
                        n = CL(".message");
                    return EL.u.it(), i instanceof Error ? e.pr(s, n, i.message) : e.pr(s, n, i.toString());
                }
            }
        });
    EL.ti.SK.zgt.addEventListener("load", () => {
        EL.ti.Ze.Ugt(PL, GL);
    });
}
{
    const AL = self.t,
        RL = self.Hpt,
        kL = "CreateKeystoreReportDialog",
        OL = AL.sj(import.meta.url),
        DL = OL.getElementById(kL),
        FL = AL.nj(OL.URL);
    AL.u.ij(FL + "lang");
    const LL = (AL.ti.Tj.Zqn = class extends AL.ti.Ze {
        constructor() {
            super(DL),
                (this.Qqn = null),
                (this.tXn = null),
                (this.iXn = this.Jmt("downloadKeystore")),
                (this.fZe = this.Jmt("okButton")),
                (this.fZe.onclick = () => this.WD());
        }
        pr(t, i, e) {
            AL.Et(t, Blob),
                AL.vu(i),
                AL.Gmt(e),
                (this.Qqn = t),
                (this.tXn = URL.createObjectURL(t)),
                (this.iXn.href = this.tXn),
                AL.u.o("ui.dialogs.create-keystore-report-dialog");
            return (
                (this.XLt().querySelectorAll("p")[5].innerHTML = self.tG(".signature", i).Ukt()), AL.u.it(), super.pr(e)
            );
        }
        fgt() {
            AL.u.o("ui.dialogs.create-keystore-report-dialog");
            const t = this.XLt().querySelectorAll("p");
            (t[0].innerHTML = RL(".keep-it-safe").Ukt()),
                (t[1].innerHTML = RL(".we-dont-store-it").Ukt()),
                (t[2].innerHTML = RL(".google-play-app-signing").Ukt()),
                (t[3].innerHTML = RL(".more-information").Ukt()),
                (this.iXn.textContent = RL(".download-keystore").Ukt()),
                this.hr(self.lang(".caption")),
                AL.u.it();
        }
        WD() {
            URL.revokeObjectURL(this.tXn), (this.Qqn = null), (this.tXn = null), super.WD();
        }
    });
    AL.ti.SK.zgt.addEventListener("load", () => {
        AL.ti.Ze.Ugt(kL, LL);
    });
}
{
    const BL = self.t,
        UL = self.lang,
        NL = BL.sj(import.meta.url),
        jL = NL.getElementById("fullscreenPromptDialog"),
        $L = BL.nj(NL.URL);
    BL.u.ij($L + "lang");
    const zL = "FullscreenPrompt",
        VL = (BL.ti.Tj.eXn = class extends BL.ti.Ze {
            constructor() {
                super(jL),
                    (this.OWi = this.Jmt("goFullscreen")),
                    (this.OWi.onclick = () => this.egt()),
                    (this._Wt = this.Jmt("cancelButton")),
                    (this._Wt.onclick = () => this.JLt()),
                    (this.sXn = this.Jmt("fullscreenMessage"));
            }
            fgt() {
                BL.u.o("ui.dialogs.fullscreen-prompt"),
                    this.hr(UL(".caption")),
                    (this.sXn.textContent = UL(".message")),
                    (this.OWi.textContent = UL(".go-fullscreen")),
                    (this._Wt.textContent = UL(".continue")),
                    BL.u.it();
            }
            egt() {
                super.egt(), self.app.P7s("MobileFullscreenPrompt", "Accepted"), BL.Lue(document.documentElement);
            }
            JLt() {
                super.JLt(), self.app.P7s("MobileFullscreenPrompt", "Declined");
            }
        });
    BL.ti.SK.zgt.addEventListener("load", () => {
        BL.ti.Ze.Ugt(zL, VL);
    });
}
{
    const WL = self.t,
        HL = WL.sj(import.meta.url),
        KL = HL.getElementById("legalInfoDialog"),
        qL = (WL.nj(HL.URL), "LegalInfo"),
        XL = (WL.ti.Tj.nXn = class extends WL.ti.Ze {
            constructor() {
                super(KL), (this.OWi = this.Jmt("okButton")), (this.OWi.onclick = () => this.egt());
            }
            fgt() {
                this.OWi.textContent = self.lang("common.close-dialog");
            }
            pr(t) {
                return super.pr(t);
            }
            Cz() {}
        });
    WL.ti.SK.zgt.addEventListener("load", () => {
        WL.ti.Ze.Ugt(qL, XL);
    });
}
{
    const YL = self.t,
        JL = YL.sj(import.meta.url),
        ZL = JL.getElementById("memoryInfoDialog"),
        QL = (YL.nj(JL.URL), "MemoryInfo"),
        tB = 2e3;
    function iB(t) {
        let i = t / 1048576;
        return YL.XU(i, 100);
    }
    const eB = (YL.ti.Tj.rXn = class extends YL.ti.Ze {
        constructor() {
            super(ZL),
                (this.OWi = this.Jmt("okButton")),
                (this.OWi.onclick = () => this.egt()),
                (this._ht = this.Jmt("memoryInfoContent")),
                (this.hXn = -1),
                (this.oXn = () => this.lln());
        }
        fgt() {}
        pr(t) {
            return this.lln(), (this.hXn = window.setInterval(this.oXn, tB)), super.pr(t);
        }
        async lln() {
            let t = await self.app.hC(),
                i = 0,
                e = 0;
            for (let t of YL.bn.xMn.jMn()) {
                let s = t.HX();
                (i += s), t.BHs() && (e += s);
            }
            let s = t.lyn();
            for (let t of YL.bn.WMn.fEn()) s += t.HX();
            let n = t.lyn() + t.uyn(),
                r = t.dyn(),
                h = self.app.We().HX(),
                o = 0,
                a = 0;
            performance.memory && ((o = performance.memory.aXn || 0), (a = performance.memory.lXn || 0));
            let l = 0,
                u = 0;
            for (let t of self.Nss.all()) (l += t.sns()), (u += t.ins());
            let c = 0;
            for (let t of YL.ti.C5e.all()) c += t.HX();
            let d = YL.bOe(),
                f = r + h + o + l + u + c + d,
                p = `<p>This view automatically refreshes. Note Construct is not able to determine memory usage of everything in the browser process. These values should be treated as estimated minimums.</p>\n\t\t\n\t\t<h3>Totals</h3>\n\t\t<p>\n\t\t<strong>WebGL memory:</strong> ${iB(r)} MB<br/>\n\t\t<strong>Layout view tabs:</strong> ${iB(h)} MB<br/>\n\t\t<strong>JS memory:</strong> ${iB(o)} MB<br/>\n\t\t<strong>Images:</strong> ${iB(l + u)} MB<br/>\n\t\t<strong>Icons:</strong> ${iB(c)} MB<br/>\n\t\t<strong>Library:</strong> ${iB(d)} MB<br/>\n\t\t<strong>Grand total: ${iB(f)} MB</strong>\n\t\t</p>\n\t\t\n\t\t<h3>WebGL memory</h3>\n\t\t<p>\n\t\t<strong>Texture memory usage:</strong> ${iB(i)} MB<br/>\n\t\tOf which static textures: ${iB(e)} MB (${0 === i ? 0 : Math.round((100 * e) / i)}%)<br/>\n\t\t<strong>Render targets</strong> (including textures): ${iB(s)} MB<br/>\n\t\tExluding textures: ${iB(n)} MB<br/>\n\t\t</p>\n\t\t\n\t\t<h3>Javascript memory</h3>\n\t\t<p><strong>Used JS heap size:</strong> `;
            (p += -1 === o ? "<em>unavailable</em>" : iB(o) + " MB"),
                (p += "<br/>\n\t\tTotal JS heap size: "),
                (p += -1 === a ? "<em>unavailable</em>" : iB(a) + " MB"),
                (p += `</p>\n\t\t<h3>Images</h3>\n\t\t<p>\n\t\t<strong>Compressed images:</strong> ${iB(l)} MB<br/>\n\t\t<strong>Decompressed images:</strong> ${iB(u)} MB<br/>\n\t\t<strong>Icons:</strong> ${iB(c)} MB\n\t\t</p>`),
                (this._ht.innerHTML = p);
        }
        Cz() {
            YL.ti.fMt(this._ht), window.clearInterval(this.hXn), (this.hXn = -1);
        }
    });
    YL.ti.SK.zgt.addEventListener("load", () => {
        YL.ti.Ze.Ugt(QL, eB);
    });
}
{
    const sB = self.t,
        nB = self.lang,
        rB = sB.sj(import.meta.url),
        hB = rB.getElementById("platformInfoDialog"),
        oB = (sB.nj(rB.URL), "PlatformInfo");
    let aB = !1,
        lB = 0,
        uB = 0,
        cB = "";
    function dB() {
        if (aB) return;
        const t = self.app.zNs();
        (lB = t.sampleRate),
            (uB = t.destination.maxChannelCount),
            (cB = t.destination.channelInterpretation || "(unavailable)"),
            (aB = !0),
            t.close && t.close();
    }
    const fB = (sB.ti.Tj.uXn = class extends sB.ti.Ze {
        constructor() {
            super(hB),
                (this.OWi = this.Jmt("okButton")),
                (this.OWi.textContent = nB("common.ok")),
                (this.OWi.onclick = () => this.egt()),
                (this.RSe = this.Jmt("copy")),
                (this.RSe.textContent = nB("common.copy")),
                (this.RSe.onclick = () => this.NSe()),
                (this._ht = this.Jmt("platformInfoContent"));
        }
        fgt() {}
        async $qn(t) {
            const i = { cXn: !1, persisted: !1, dXn: !1, usage: 0, fXn: 0 },
                e = [];
            return (
                sB.Y$.qRe &&
                    e.push(
                        navigator.storage
                            .persisted()
                            .then((t) => {
                                (i.cXn = !0), (i.persisted = t);
                            })
                            .catch((t) => {
                                (() => {})("Error requesting persistent storage: ", t), (i.cXn = !1);
                            })
                    ),
                sB.Y$.XRe &&
                    e.push(
                        navigator.storage
                            .estimate()
                            .then((t) => {
                                (i.dXn = !0), (i.usage = t.usage), (i.fXn = t.quota);
                            })
                            .catch((t) => {
                                (() => {})("Error estimating storage usage: ", t), (i.dXn = !1);
                            })
                    ),
                await Promise.all(e),
                await this.pXn(i, t)
            );
        }
        async pXn(t, i) {
            const e = self.app;
            let s = "(unavailable, defaulting to 2)";
            "number" == typeof navigator.hardwareConcurrency &&
                navigator.hardwareConcurrency > 0 &&
                (s = navigator.hardwareConcurrency);
            let n = "(unavailable)";
            "number" == typeof navigator.deviceMemory &&
                navigator.deviceMemory > 0 &&
                (n = navigator.deviceMemory + " GB"),
                await sB.fk.LRe();
            let r = `<h3>Platform information</h3>\n\t\t<p>\n\t\t<strong>Product:</strong> Construct ${"animation" === e.Mke() ? "Animate" : "3"} ${sB.ON.fhi} (${e.jke(!0)})<br/>\n\t\t<strong>Browser:</strong> ${sB.fk.$s} ${sB.fk.GRe}<br/>\n\t\t<strong>Browser engine:</strong> ${sB.fk.FRe}<br/>\n\t\t<strong>Context:</strong> ${sB.fk.Pue}<br/>\n\t\t<strong>Operating system:</strong> ${sB.fk.OS} ${sB.fk.PRe}<br/>\n\t\t<strong>Device type:</strong> ${sB.fk.Bj ? "desktop" : "mobile"}<br/>\n\t\t<strong>Device pixel ratio:</strong> ${self.devicePixelRatio}<br/>\n\t\t<strong><abbr title="Number of hardware threads supported by the device, which can be different to the number of physical cores.">Logical CPU cores</abbr>:</strong> ${s}<br/>\n\t\t<strong>Approx. device memory:</strong> ${n}<br/>\n\t\t<strong>User agent:</strong> ${navigator.userAgent}<br/>\n\t\t<strong>Language setting:</strong> ${e.Lmt()}\n\t\t</p>`,
                h = null;
            try {
                h = await e.hC();
            } catch (t) {}
            if (!i) {
                if (((r += "<h3>Local storage</h3>\n\t\t\t<p>"), t.dXn)) {
                    const i = Math.round((1e3 * t.usage) / t.fXn) / 10;
                    r += `\n\t\t\t\t<strong>Storage quota (approx):</strong> ${sB.nbe(t.fXn)}<br/>\n\t\t\t\t<strong>Storage usage (approx):</strong> ${sB.nbe(t.usage)} (${i}%)<br/>\n\t\t\t\t`;
                } else
                    r +=
                        "\n\t\t\t\t<strong>Storage quota (approx):</strong> (status unavailable)<br/>\n\t\t\t\t<strong>Storage usage (approx):</strong> (status unavailable)<br/>\n\t\t\t\t";
                t.cXn
                    ? (r += `\n\t\t\t\t<strong>Persistent storage:</strong> ${t.persisted ? "Yes" : "No"}\n\t\t\t\t`)
                    : (r += "\n\t\t\t\t<strong>Persistent storage:</strong> (status unavailable)\n\t\t\t\t"),
                    (r += "</p>"),
                    (r +=
                        "<h3>Browser support notes</h3>\n\t\t\t<p>This list contains missing features that are not required, but could improve performance or user experience if supported.</p>\n\t\t\t<ul>");
                let i = "";
                "Firefox" === sB.fk.$s &&
                    (i +=
                        '<li>Rendering multiple on-screen Layout Views is slow in Firefox due to <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1163426">bug 1163426</a></li>'),
                    CSS.supports("contain", "content") ||
                        (i +=
                            "<li>CSS containment is not supported. Editor performance may be significantly degraded.</li>"),
                    sB.Y$.h$i || (i += "<li>The &lt;dialog&gt; element is not supported. A polyfill is in use.</li>"),
                    sB.Y$.VRe ||
                        (i += "<li>The Clipboard API is not supported. Some clipboard features may be unavailable."),
                    sB.Y$.NRe || (i += "<li>Web Animations are not supported. Animations are disabled.</li>"),
                    void 0 === Intl.PluralRules &&
                        (i +=
                            "<li>This browser does not support pluralisation rules. Plural forms may not be correct.</li>"),
                    e.zQ() || (i += "<li>UI effects are disabled in settings.</li>"),
                    h &&
                        h.ayn() &&
                        h.PMn() < 2 &&
                        (i += "<li>WebGL 2+ is not supported. Rendering quality and features may be affected.</li>"),
                    h &&
                        h.oyn() &&
                        (i += `<li>${h.ayn() ? "WebGL" : "WebGPU"} indicates a major performance caveat. It is probably using software rendering.</li>`),
                    h ||
                        (i +=
                            "<li><strong>Failed to create WebGL renderer. Layout views cannot be opened.</strong></li>"),
                    sB.Y$.ImageBitmap ||
                        (i += "<li>ImageBitmap is not supported. Texture loading performance may be degraded.</li>"),
                    sB.Y$.ImageBitmap &&
                        !sB.Y$.$es &&
                        (i +=
                            "<li>ImageBitmapOptions is not supported. Texture loading performance may be degraded.</li>"),
                    sB.Y$.$Re ||
                        (i +=
                            "<li>Idle callbacks are not supported. Background loading performance may be degraded.</li>"),
                    "undefined" == typeof InputDeviceCapabilities &&
                        (i += "<li>Determining input device capabilities is not supported.</li>"),
                    sB.Y$.qRe ||
                        (i +=
                            "<li>Persistent storage is not available. Local storage could be deleted by the browser.</li>"),
                    sB.Y$.XRe || (i += "<li>Storage quota estimate is unavailable.</li>"),
                    CSS.supports("cursor", "-webkit-image-set(url(cursor.png) 1x), crosshair") ||
                        CSS.supports("cursor", "image-set(url(cursor.png) 1x), crosshair") ||
                        (i += "<li>image-set() is not supported. Mouse cursors may appear with reduced quality."),
                    i || (i = "<li>Nothing is missing. Everything is OK!</li>"),
                    (r += i),
                    (r += "</ul>");
            }
            if (h)
                if (h.ayn()) {
                    const t = new Set(h.B_n());
                    if (
                        ((r += `<h3>WebGL information</h3>\n\t\t\t\t<p>\n\t\t\t\t<strong>Version string:</strong> ${h.O_n()}<br/>\n\t\t\t\t<strong>Numeric version:</strong> ${h.PMn()}<br/>\n\t\t\t\t<strong>Supports <abbr title="non-power-of-two">NPOT</abbr> textures:</strong> ${h.cC() ? "yes" : "partial"}<br/>\n\t\t\t\t<strong>Supports GPU profiling:</strong> ${h.R_n() ? "yes" : "no"}<br/>\n\t\t\t\t<strong>Vendor:</strong> ${h.D_n()}<br/>\n\t\t\t\t<strong>Renderer:</strong> ${h.F_n()}<br/>\n\t\t\t\t<strong><abbr title="Indicates a performance problem such as use of a software renderer instead of graphics hardware.">Major performance caveat:</strong> ${h.oyn() ? "yes" : "no"}<br/>\n\t\t\t\t<strong>Maximum texture size:</strong> ${h._bn()}<br/>\n\t\t\t\t<strong>Point size range:</strong> ${h.Tp()} to ${h.Ip()}<br/>\n\t\t\t\t<strong>Extensions:</strong>`),
                        i)
                    )
                        r += " " + [...t].join(", ") + "</p>";
                    else {
                        r += "</p><ul>";
                        for (const i of t) r += `<li>${i}</li>`;
                        r += "</ul>";
                    }
                } else {
                    const t = h.yAn();
                    t.sort();
                    const e = h.bAn();
                    if (
                        ((r += `<h3>WebGPU information</h3>\n\t\t\t\t<p>\n\t\t\t\t<strong>Renderer:</strong> WebGPU<br/>\n\t\t\t\t<strong>Supports GPU profiling:</strong> ${h.R_n() ? "yes" : "no"}<br/>\n\t\t\t\t<strong><abbr title="Indicates a performance problem such as use of a software renderer instead of graphics hardware.">Major performance caveat:</strong> ${h.oyn() ? "yes" : "no"}<br/>\n\t\t\t\t<strong>Maximum texture size:</strong> ${h._bn()}<br/>\n\t\t\t\t<strong>Adapter vendor:</strong> \t\t${(e && e.vendor) || "(unavailable)"}<br/>\n\t\t\t\t<strong>Adapter architecture:</strong>\t${(e && e.architecture) || "(unavailable)"}<br/>\n\t\t\t\t<strong>Adapter device:</strong>\t\t${(e && e.device) || "(unavailable)"}<br/>\n\t\t\t\t<strong>Adapter description:</strong>\t${(e && e.description) || "(unavailable)"}<br/>\n\t\t\t\t<strong>Adapter type:</strong>\t\t\t${(e && e.type) || "(unavailable)"}<br/>\n\t\t\t\t<strong>Adapter backend:</strong>\t\t${(e && e.backend) || "(unavailable)"}<br/>\n\t\t\t\t<strong>Adapter features:</strong>`),
                        i)
                    )
                        r += " " + t.join(", ") + "</p>";
                    else {
                        r += "</p><ul>";
                        for (const i of t) r += `<li>${i}</li>`;
                        r += "</ul>";
                    }
                }
            else
                r +=
                    "<h3>WebGL information</h3>\n\t\t\t<p><strong>Failed to create WebGL renderer. Try installing any available software updates.</strong></p>";
            if (!i) {
                dB(),
                    (r += `<h3>Audio information</h3>\n\t\t\t<p>\n\t\t\t<strong>System sample rate:</strong> ${lB} Hz<br/>\n\t\t\t<strong>Output channels:</strong> ${uB}</br>\n\t\t\t<strong>Output interpretation:</strong> ${cB}<br/>\n\t\t\t<strong>Supported decode formats:</strong></p><ul>`);
                const t = new Audio(),
                    i = [
                        ["webm", "WebM"],
                        ["mp4", "MPEG-4"],
                    ],
                    e = [
                        ["opus", "Opus"],
                        ["vorbis", "Vorbis"],
                        ["mp4a.40.2", "AAC"],
                    ];
                for (const [s, n] of i)
                    for (const [i, h] of e) {
                        const e = `audio/${s};codecs=${i}`;
                        t.canPlayType(e) && (r += `<li>${n} ${h} (${e})</li>`);
                    }
                if (
                    (t.canPlayType("audio/mpeg") && (r += "<li>MP3 (audio/mpeg)</li>"),
                    t.canPlayType("audio/flac") && (r += "<li>FLAC (audio/flac)</li>"),
                    t.canPlayType("audio/wav;codecs=1") && (r += "<li>PCM WAV (audio/wav;codecs=1)</li>"),
                    (r += "</ul>\n\t\t\t<p>\n\t\t\t<strong>Supported encode formats:</strong> "),
                    "undefined" == typeof MediaRecorder || void 0 === MediaRecorder.isTypeSupported)
                )
                    r += "<em>(encoding not supported)</em></p>";
                else {
                    r += "</p><ul>";
                    for (const [t, s] of i)
                        for (const [i, n] of e) {
                            const e = `audio/${t};codecs=${i}`;
                            MediaRecorder.isTypeSupported(e) && (r += `<li>${s} ${n} (${e})</li>`);
                        }
                    MediaRecorder.isTypeSupported("audio/mpeg") && (r += "<li>MP3 (audio/mpeg)</li>"),
                        MediaRecorder.isTypeSupported("audio/flac") && (r += "<li>FLAC (audio/flac)</li>"),
                        MediaRecorder.isTypeSupported("audio/wav;codecs=1") &&
                            (r += "<li>PCM WAV (audio/wav;codecs=1)</li>"),
                        (r += "</ul>");
                }
                r += "<h3>Video information</h3>\n\t\t\t<p>\n\t\t\t<strong>Supported decode formats:</strong></p><ul>";
                const s = document.createElement("video"),
                    n = [
                        ["av01.0.00M.08", "AV1"],
                        ["vp9", "VP9"],
                        ["vp8", "VP8"],
                        ["hev1.1.2.L93.B0", "H.265"],
                        ["avc1.420034", "H.264"],
                    ];
                for (const [t, e] of i)
                    for (const [i, h] of n) {
                        const n = `video/${t};codecs=${i}`;
                        s.canPlayType(n) && (r += `<li>${e} ${h} (${n})</li>`);
                    }
                if (
                    ((r += "</ul>\n\t\t\t<p>\n\t\t\t<strong>Supported encode formats:</strong> "),
                    "undefined" == typeof MediaRecorder || void 0 === MediaRecorder.isTypeSupported)
                )
                    r += "<em>(encoding not supported)</em></p>";
                else {
                    r += "</p><ul>";
                    for (const [t, e] of i)
                        for (const [i, s] of n) {
                            const n = `video/${t};codecs=${i}`;
                            MediaRecorder.isTypeSupported(n) && (r += `<li>${e} ${s} (${n})</li>`);
                        }
                    r += "</ul>";
                }
            }
            return r;
        }
        pr(t) {
            return this.$qn().then((t) => (this._ht.innerHTML = t)), super.pr(t);
        }
        NSe() {
            const t = document.createRange();
            t.selectNodeContents(this._ht);
            const i = window.getSelection();
            i.removeAllRanges(), i.addRange(t), document.execCommand("copy");
        }
        Cz() {
            sB.ti.fMt(this._ht);
        }
    });
    sB.ti.SK.zgt.addEventListener("load", () => {
        sB.ti.Ze.Ugt(oB, fB);
    });
}
{
    const pB = self.t,
        mB = pB.sj(import.meta.url),
        wB = mB.getElementById("privacyPolicyDialog"),
        gB = (pB.nj(mB.URL), "PrivacyPolicy"),
        yB = (pB.ti.Tj.mXn = class extends pB.ti.Ze {
            constructor() {
                super(wB),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this.Jmt("eula").onclick = function () {
                        pB.ti.Ze.Ke("EULA").pr();
                    });
            }
            fgt() {
                this.OWi.textContent = self.lang("common.close-dialog");
            }
            pr(t) {
                return super.pr(t);
            }
            Cz() {}
        });
    pB.ti.SK.zgt.addEventListener("load", () => {
        pB.ti.Ze.Ugt(gB, yB);
    });
}
{
    const bB = self.t,
        vB = bB.sj(import.meta.url),
        SB = vB.getElementById("shellOutputDialog"),
        xB = bB.nj(vB.URL);
    bB.u.ij(xB + "lang");
    const MB = "ShellOutput",
        EB = [
            "rgb(0, 0, 0)",
            "rgb(194, 54, 33)",
            "rgb(37, 188, 36)",
            "rgb(173, 173, 39)",
            "rgb(73, 46, 225)",
            "rgb(211, 56, 211)",
            "rgb(51, 187, 200)",
            "rgb(203, 204, 205)",
        ],
        CB = (bB.ti.Tj.wXn = class extends bB.ti.Ze {
            constructor() {
                super(SB),
                    (this.gXn = this.Jmt("shell-block")),
                    (this.yXn = this.Jmt("shell-message")),
                    (this.bXn = this.Jmt("shell-summary"));
            }
            fgt() {
                this.bXn.textContent = self.lang("ui.dialogs.shell-output.build-log");
            }
            pr(t, i, e, s) {
                bB.vu(t), bB.vu(i), bB.vu(e), bB.Gmt(s), (this.yXn.textContent = i);
                const n = this.gXn;
                let r = 0,
                    h = null;
                bB.ti.fMt(n),
                    this.hr(t),
                    e.replace(/\[(\d+)m/g, (t, i, e, s) => {
                        const o = s.slice(r, e),
                            a = document.createElement("span");
                        h && (a.style.color = h),
                            (a.textContent = o),
                            n.appendChild(a),
                            0 == i && h && (h = null),
                            i > 29 && i < 38 && (h = EB[i - 30]),
                            (r = e + t.length);
                    });
                const o = e.slice(r),
                    a = document.createElement("span");
                h && (a.style.color = h), (a.textContent = o), n.appendChild(a), super.pr(s);
            }
        });
    bB.ti.SK.zgt.addEventListener("load", () => {
        bB.ti.Ze.Ugt(MB, CB);
    });
}
{
    const _B = self.t,
        TB = self.lang,
        IB = self.Hpt,
        PB = self.iG,
        GB = _B.sj(import.meta.url),
        AB = GB.getElementById("storageCleanupDialog"),
        RB = _B.nj(GB.URL);
    _B.u.ij(RB + "lang");
    const kB = "StorageCleanup",
        OB = (_B.ti.Tj.vXn = class extends _B.ti.Ze {
            constructor() {
                super(AB),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this._Wt = this.Jmt("cancelButton")),
                    (this._Wt.onclick = () => this.JLt()),
                    (this.SXn = this.Jmt("scanningWrap")),
                    (this.xXn = this.Jmt("readyWrap")),
                    (this.MXn = this.Jmt("storageUsageHeader")),
                    (this.EXn = this.Jmt("clearExportManagerStorage")),
                    (this.CXn = this.Jmt("clearExportManagerStorageLabel")),
                    (this._Xn = this.Jmt("clearExampleProjectsStorage")),
                    (this.TXn = this.Jmt("clearExampleProjectsStorageLabel")),
                    (this.IXn = this.Jmt("clearLinuxCefStorage")),
                    (this.PXn = this.Jmt("clearLinuxCefStorageLabel")),
                    (this.GXn = this.Jmt("clearC3Storage")),
                    (this.AXn = this.Jmt("clearC3StorageLabel")),
                    (this.RXn = this.Jmt("localBrowserSavesInfo")),
                    (this.kXn = this.Jmt("clearBrowserCacheInfo")),
                    (this.OXn = this.Jmt("privateBrowsingInfo")),
                    (this.DXn = this.Jmt("systemCleanupInfo")),
                    "animation" === self.app.Mke() && (this.Jmt("linuxcefwrap").style.display = "none"),
                    (this.FXn = new Map());
            }
            fgt() {
                _B.u.o("ui.dialogs.storageCleanup"),
                    this.hr(TB(".caption")),
                    (this.OWi.textContent = TB(".clear-storage")),
                    (this._Wt.textContent = TB("common.cancel"));
                const t = this.Jmt("helpLink");
                (t.textContent = TB("common.help")),
                    (t.onclick = () => self.app.WO("interface/dialogs/storage-cleanup", "StorageCleanupHelp")),
                    (this.SXn.textContent = TB(".scanning-storage")),
                    _B.hrt(this.Jmt("clearExportManagerStorageTip"), IB(".export-manager.tip")),
                    _B.hrt(this.Jmt("clearExampleProjectsStorageTip"), IB(".example-projects.tip")),
                    _B.hrt(this.Jmt("clearLinuxCefStorageTip"), IB(".linux-cef.tip")),
                    _B.hrt(this.Jmt("clearC3StorageTip"), IB(".c3-offline.tip")),
                    _B.u.o(".more-options"),
                    _B.hrt(this.Jmt("moreOptionsHeader"), IB(".header")),
                    _B.hrt(this.Jmt("moreOptionsText"), IB(".description")),
                    _B.hrt(this.RXn, IB(".local-browser-saves")),
                    _B.hrt(this.kXn, IB(".clear-browser-cache")),
                    _B.hrt(this.OXn, IB(".private-browsing")),
                    _B.hrt(this.DXn, IB(".system-storage-cleanup")),
                    _B.u.it(),
                    _B.u.it();
            }
            pr(t) {
                "browser" !== _B.fk.Pue && ((this.kXn.style.display = "none"), (this.OXn.style.display = "none")),
                    self.tj
                        .LXn()
                        .then((t) => {
                            t && (this.RXn.style.display = "none");
                        })
                        .catch((t) => console.error("[Storage cleanup] Error checking local browser storage: ", t));
                const i = super.pr(t);
                return (
                    self.app.P7s("StorageCleanupDialog", "Shown"),
                    this.OWi.setAttribute("disabled", ""),
                    (this.SXn.style.display = ""),
                    (this.xXn.style.display = "none"),
                    this.BXn(),
                    i
                );
            }
            async BXn() {
                await Promise.all([this.UXn(), this.NXn(), this.jXn(), this.$Xn(), this.zXn()]), this.VXn();
            }
            async UXn() {
                if (_B.Y$.XRe)
                    try {
                        const t = await navigator.storage.estimate(),
                            i = t.quota,
                            e = t.usage,
                            s = Math.round((1e3 * e) / i) / 10;
                        _B.hrt(
                            this.MXn,
                            self.tG("ui.dialogs.storageCleanup.storage-usage-header", _B.nbe(e), _B.nbe(i), s)
                        );
                    } catch (t) {
                        return (
                            (() => {})("Error estimating storage usage: ", t), void (this.MXn.style.display = "none")
                        );
                    }
                else this.MXn.style.display = "none";
            }
            async NXn() {
                await self.app.jpe(), await _B.xis.gYt();
                let t = 0,
                    i = 0;
                try {
                    const e = self.HXn.WXn(),
                        s = await e.keys(),
                        n = s.indexOf(self.HXn.KXn());
                    n >= 0 && s.splice(n, 1);
                    const r = await Promise.all(s.map((t) => e.getItem(t)));
                    (t = r.length),
                        (i = r.reduce((t, i) => t + i.size, 0)),
                        this.FXn.set("linux-cef", {
                            qXn: i,
                            XXn: t,
                            delete: () => Promise.all(s.map((t) => e.removeItem(t))),
                        });
                } catch (t) {
                    console.error("[Storage cleanup] Error scanning Linux CEF storage: ", t),
                        self.app.P7s("StorageCleanupDialog", "ScanError-LinuxCEF:" + t);
                }
                _B.hrt(this.PXn, PB("ui.dialogs.storageCleanup.linux-cef.label", { bT: !0 }, t, _B.nbe(i))),
                    (this.IXn.checked = !0);
            }
            async jXn() {
                let t = 0,
                    i = 0;
                try {
                    const e = _B.ti.Ze.mKn.VKn(),
                        s = await localforage.getItem(e);
                    if (s) for (const e of s) e.blob && (t++, (i += e.blob.size));
                    this.FXn.set("export-manager", { qXn: i, XXn: t, delete: () => localforage.removeItem(e) });
                } catch (t) {
                    console.error("[Storage cleanup] Error scanning export manager storage: ", t),
                        self.app.P7s("StorageCleanupDialog", "ScanError-exports:" + t);
                }
                _B.hrt(this.CXn, PB("ui.dialogs.storageCleanup.export-manager.label", { bT: !0 }, t, _B.nbe(i))),
                    (this.EXn.checked = !0);
            }
            async $Xn() {
                let t = 0,
                    i = 0;
                try {
                    const e = [],
                        s = await caches.keys();
                    await Promise.all(
                        s.map(async (s) => {
                            const n = await caches.open(s),
                                r = (await n.keys()).filter((t) => /example-?projects\/(.*)\.c3p/i.test(t.url));
                            t += r.length;
                            const h = await Promise.all(
                                r.map(async (t) => {
                                    const i = await n.match(t);
                                    return (await i.blob()).size;
                                })
                            );
                            (i += h.reduce((t, i) => t + i, 0)), e.push(() => Promise.all(r.map((t) => n.delete(t))));
                        })
                    ),
                        this.FXn.set("example-projects", {
                            qXn: i,
                            XXn: t,
                            delete: () => Promise.all(e.map((t) => t())),
                        });
                } catch (t) {
                    console.error("[Storage cleanup] Error scanning example projects storage: ", t),
                        self.app.P7s("StorageCleanupDialog", "ScanError-exampleprojs:" + t);
                }
                _B.hrt(this.TXn, PB("ui.dialogs.storageCleanup.example-projects.label", { bT: !0 }, t, _B.nbe(i))),
                    (this._Xn.checked = !0);
            }
            async zXn() {
                let t = 0,
                    i = 0;
                try {
                    const e = await caches.keys();
                    (t = e.length),
                        t >= 2 && t--,
                        await Promise.all(
                            e.map(async (t) => {
                                const e = await caches.open(t),
                                    s = await e.keys(),
                                    n = await Promise.all(
                                        s.map(async (t) => {
                                            const i = await e.match(t);
                                            return (await i.blob()).size;
                                        })
                                    );
                                i += n.reduce((t, i) => t + i, 0);
                            })
                        ),
                        this.FXn.set("c3-offline", {
                            qXn: i,
                            XXn: t,
                            delete: async () => {
                                await Promise.all(e.map((t) => caches.delete(t)));
                                const t = await navigator.serviceWorker.getRegistrations();
                                await Promise.all(t.map((t) => t.unregister()));
                            },
                        });
                } catch (t) {
                    console.error("[Storage cleanup] Error scanning C3 offline storage: ", t),
                        self.app.P7s("StorageCleanupDialog", "ScanError-c3:" + t);
                }
                _B.hrt(this.AXn, PB("ui.dialogs.storageCleanup.c3-offline.label", { bT: !0 }, t, _B.nbe(i))),
                    (this.GXn.checked = !1);
            }
            VXn() {
                this.gu() &&
                    (this.OWi.removeAttribute("disabled"),
                    (this.SXn.style.display = "none"),
                    (this.xXn.style.display = ""));
            }
            egt() {
                const t = self.app;
                if (!(this.IXn.checked || this.EXn.checked || this._Xn.checked || this.GXn.checked)) {
                    return void _B.ti.Ze.Ke("OK").pr(TB("ui.dialogs.storageCleanup.nothing-to-clear"));
                }
                this.OWi.setAttribute("disabled", ""),
                    (async () => {
                        const i = _B.ti.Ze.Ke("Progress");
                        i.pr(TB("ui.dialogs.storageCleanup.clearing-storage"));
                        let e = 0;
                        const s = [];
                        this.IXn.checked && s.push("linux-cef"),
                            this.EXn.checked && s.push("export-manager"),
                            this._Xn.checked && !this.GXn.checked && s.push("example-projects"),
                            this.GXn.checked && s.push("c3-offline");
                        let n = !1;
                        try {
                            await Promise.all(
                                s.map((t) => {
                                    const i = this.FXn.get(t);
                                    if (i) return (e += i.qXn), i.delete();
                                })
                            );
                        } catch (i) {
                            (n = !0),
                                console.error("[Storage cleanup] Error deleting storage: ", i),
                                t.P7s("StorageCleanupDialog", "DeleteError:" + i);
                        }
                        t.P7s("StorageCleanupDialog", "DidCleanup-" + (n ? "Error" : "Success")), i.WD(), super.egt();
                        _B.ti.Ze.Ke("OK").pr(
                            n
                                ? TB("ui.dialogs.storageCleanup.error-clearing")
                                : self.ej("ui.dialogs.storageCleanup.successfully-cleared", _B.nbe(e))
                        );
                    })();
            }
            JLt() {
                self.app.P7s("StorageCleanupDialog", "Cancelled"), super.JLt();
            }
            Cz() {}
        });
    _B.ti.SK.zgt.addEventListener("load", () => {
        _B.ti.Ze.Ugt(kB, OB);
    });
}
{
    const DB = self.t,
        FB = self.lang,
        LB = DB.sj(import.meta.url),
        BB = LB.getElementById("svgPreviewDialog"),
        UB = DB.nj(LB.URL);
    DB.u.ij(UB + "lang");
    const NB = "SVGPreview",
        jB = (DB.ti.Tj.YXn = class extends DB.ti.Ze {
            constructor() {
                super(BB),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this.JXn = this.Jmt("svgPreviewTitle")),
                    (this.ZXn = this.Jmt("svgPreviewEditXml")),
                    (this.ZXn.onclick = () => this.QXn()),
                    (this.tYn = null),
                    (this.Da = null),
                    (this.les = null),
                    (this.uis = ""),
                    (this.iYn = this.Jmt("headerWrap"));
            }
            fgt() {
                DB.u.o("ui.dialogs.svgPreview"),
                    this.hr(FB(".caption")),
                    (this.OWi.textContent = FB("common.close-dialog")),
                    DB.u.it();
            }
            async pr(t, i) {
                if (
                    ((this.ZXn.style.display = "none"),
                    (this.Jmt("svgPreviewDash").style.display = "none"),
                    DB.ca(t, globalThis.Va))
                ) {
                    let i;
                    this.Da = t;
                    let e = t.Nh();
                    if (((i = DB.nqt(e) ? e : DB.tN([e], this.Da.Zn(), { type: e.type })), !(await DB.hRt(i))))
                        throw new Error("expected image");
                    (await DB.wqt(i))
                        ? (this.hr(FB("ui.dialogs.svgPreview.caption")),
                          (this.ZXn.style.display = ""),
                          (this.Jmt("svgPreviewDash").style.display = ""),
                          (this.ZXn.textContent = FB("ui.dialogs.svgPreview.edit-xml")))
                        : (await DB.aRt(i))
                          ? this.hr(FB("ui.dialogs.svgPreview.caption-animation"))
                          : this.hr(FB("ui.dialogs.svgPreview.caption-image"));
                } else {
                    let i;
                    if (
                        ((this.les = t),
                        (i = DB.nqt(t) ? t : DB.tN([t], "", { type: t.type })),
                        (this.ZXn.textContent = FB(".view-xml")),
                        !(await DB.hRt(i)))
                    )
                        throw new Error("expected image");
                    (await DB.wqt(i))
                        ? (this.hr(FB("ui.dialogs.svgPreview.caption")),
                          (this.ZXn.style.display = ""),
                          (this.Jmt("svgPreviewDash").style.display = ""),
                          (this.ZXn.textContent = FB("ui.dialogs.svgPreview.view-xml")))
                        : (await DB.aRt(i))
                          ? this.hr(FB("ui.dialogs.svgPreview.caption-animation"))
                          : this.hr(FB("ui.dialogs.svgPreview.caption-image"));
                }
                (this.JXn.textContent = self.ej("ui.dialogs.svgPreview.svg-title", this.xqn(t), this.Eqn(t))),
                    (this.tYn = new Image()),
                    (this.tYn.className = "transparent-checkerboard-pattern"),
                    (this.tYn.src = await this.Cqn(t));
                const e = globalThis.app.XM();
                return e && this.tYn.setAttribute("sampling", e.Ci()), this.XLt().appendChild(this.tYn), super.pr(i);
            }
            QXn() {
                if (this.Da) {
                    const t = this.Da;
                    this.WD();
                    self.app.ZH().fN(t);
                }
                this.les && DB.ti.Ze.Ke("TextPreview").pr(this.les, this.les.type);
            }
            eYn(t) {
                return DB.ca(t, globalThis.Va) ? t.JN().GN() : DB.MimeType.xEs(t).GN();
            }
            xqn(t) {
                return DB.ca(t, globalThis.Va) ? t.Pa() : (t.name ?? "");
            }
            Eqn(t) {
                return DB.ca(t, globalThis.Va) ? DB.nbe(t.Nh().size) : DB.nbe(t.size);
            }
            async Cqn(t) {
                return DB.ca(t, globalThis.Va) ? t.EN() : ((this.uis = URL.createObjectURL(t)), this.uis);
            }
            Cz() {
                (this.Da = null),
                    (this.les = null),
                    DB.ti.Tz(this.tYn),
                    (this.tYn = null),
                    (this.JXn.textContent = ""),
                    this.uis && URL.revokeObjectURL(this.uis),
                    (this.uis = "");
            }
        });
    DB.ti.SK.zgt.addEventListener("load", () => {
        DB.ti.Ze.Ugt(NB, jB);
    });
}
{
    const $B = self.t,
        zB = self.lang,
        VB = $B.sj(import.meta.url),
        WB = VB.getElementById("videoPreviewDialog"),
        HB = $B.nj(VB.URL);
    $B.u.ij(HB + "lang");
    const KB = "VideoPreview",
        qB = ($B.ti.Tj.sYn = class extends $B.ti.Ze {
            constructor() {
                super(WB),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this.JXn = null),
                    (this.OEe = null),
                    (this.Da = null),
                    (this.les = null),
                    (this.uis = ""),
                    (this.iYn = this.Jmt("headerWrap"));
            }
            fgt() {
                (this.OWi.textContent = zB("common.close-dialog")), this.hr(zB("ui.dialogs.videoPreview.caption"));
            }
            async pr(t, i) {
                return (
                    (this.JXn = document.createElement("h3")),
                    (this.OEe = document.createElement("video")),
                    this.OEe.addEventListener("loadedmetadata", () => this.nYn()),
                    $B.ca(t, globalThis.Va) ? (this.Da = t) : (this.les = t),
                    (this.OEe.src = await this.Cqn()),
                    (this.OEe.controls = !0),
                    (this.OEe.autoplay = !0),
                    this.nYn(),
                    this.iYn.appendChild(this.JXn),
                    this.XLt().appendChild(this.OEe),
                    super.pr(i)
                );
            }
            nYn() {
                if (!this.OEe) return;
                const t = this.OEe.videoWidth || "?",
                    i = this.OEe.videoHeight || "?";
                this.JXn.textContent = self.ej(
                    "ui.dialogs.videoPreview.video-title",
                    this.xqn(),
                    this.Mqn(),
                    t,
                    i,
                    this.Eqn()
                );
            }
            Mqn() {
                return this.Da ? this.Da.JN().ZIs() : this.les ? $B.MimeType.xEs(this.les).ZIs() : void 0;
            }
            xqn() {
                return this.Da ? this.Da.Pa() : this.les ? this.les.name : void 0;
            }
            Eqn() {
                return this.Da ? $B.nbe(this.Da.Nh().size) : this.les ? $B.nbe(this.les.size) : void 0;
            }
            async Cqn() {
                return this.Da
                    ? this.Da.EN()
                    : this.les
                      ? ((this.uis = URL.createObjectURL(this.les)), this.uis)
                      : void 0;
            }
            Cz() {
                this.OEe.pause(),
                    (this.OEe.src = ""),
                    $B.ti.Tz(this.OEe),
                    (this.OEe = null),
                    (this.JXn = null),
                    (this.Da = null),
                    (this.les = null),
                    this.uis && URL.revokeObjectURL(this.uis),
                    (this.uis = ""),
                    $B.ti.fMt(this.iYn);
            }
        });
    $B.ti.SK.zgt.addEventListener("load", () => {
        $B.ti.Ze.Ugt(KB, qB);
    });
}
{
    const XB = self.t,
        YB = XB.sj(import.meta.url),
        JB = YB.getElementById("viewIconSheetsDialog"),
        ZB = (XB.nj(YB.URL), "ViewIconSheets"),
        QB = (XB.ti.Tj.rYn = class extends XB.ti.Ze {
            constructor() {
                super(JB),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this.hYn = this.Jmt("viewIconSheetsList")),
                    (this.oYn = []);
            }
            fgt() {}
            pr(t) {
                let i = -1,
                    e = null,
                    s = 0,
                    n = 0,
                    r = 0,
                    h = 0;
                for (let t of XB.ti.s6e.k6e()) {
                    let o = t.C6e();
                    if (!o) continue;
                    let a = t.O5e();
                    a !== i &&
                        ((i = a),
                        (h = 0),
                        e && this.hYn.appendChild(e),
                        (e = document.createElement("div")),
                        (e.className = "sizeWrap"),
                        e.insertAdjacentHTML("beforeend", `<h3>Icon size ${a} x ${a}</h3>`)),
                        ++n,
                        (r += t._6e());
                    let l = document.createElement("div");
                    l.className = "sheetWrap";
                    let u = t.$5e();
                    l.insertAdjacentHTML("beforeend", `<p>Sheet #${h} (${u} x ${u}, ${t._6e()} icons)`),
                        (o.className = "transparent-checkerboard-pattern"),
                        (o.style.width = t.N5e() + "px"),
                        (o.style.height = t.N5e() + "px"),
                        this.oYn.push(o),
                        l.appendChild(o),
                        e.appendChild(l),
                        (s += u * u),
                        ++h;
                }
                e && this.hYn.appendChild(e);
                let o = s / 1048576;
                return (
                    this.hYn.insertAdjacentHTML(
                        "afterbegin",
                        `<p>Total icon sheet area: ${Math.round(100 * o) / 100} megapixels (${r} images over ${n} sheets)</p>`
                    ),
                    super.pr(t)
                );
            }
            Cz() {
                XB.ti.fMt(this.hYn);
                for (let t of this.oYn) (t.style.width = ""), (t.style.height = ""), (t.className = "");
                XB.yh(this.oYn);
            }
        });
    XB.ti.SK.zgt.addEventListener("load", () => {
        XB.ti.Ze.Ugt(ZB, QB);
    });
}
{
    const tU = self.t,
        iU = self.lang,
        eU = self.ej,
        sU = self.tG,
        nU = tU.sj(import.meta.url),
        rU = nU.getElementById("viewSpritesheetsDialog"),
        hU = tU.nj(nU.URL);
    tU.u.ij(hU + "lang");
    const oU = "ViewSpritesheets",
        aU = [0.1, 1 / 4, 1 / 3, 0.5, 2 / 3, 3 / 4, 1, 1.5, 2],
        lU = (tU.ti.Tj.aYn = class extends tU.ti.Ze {
            constructor() {
                super(rU),
                    (this.lYn = this.Jmt("statusText")),
                    (this.uYn = this.Jmt("zoomSlider")),
                    this.uYn.addEventListener("input", () => this.cYn()),
                    (this.dYn = this.Jmt("zoomLabel")),
                    (this.tgt = null),
                    (this.fYn = 0),
                    (this.pYn = 0),
                    (this.mYn = 0),
                    (this.wYn = 0),
                    (this.gYn = []),
                    (this.yYn = new Map()),
                    (this.bYn = []),
                    (this.hYn = this.Jmt("viewSpritesheetsList"));
            }
            fgt() {}
            pr(t, i) {
                tU.Et(t, self.Ga),
                    tU.u.o("ui.dialogs.view-spritesheets"),
                    (this.tgt = t),
                    this.hr(eU(".caption", this.tgt.Zn())),
                    (this.lYn.textContent = self.lang(".loading")),
                    (this.uYn.value = 6),
                    this.cYn(),
                    tU.ti.fMt(this.hYn),
                    tU.yh(this.bYn),
                    localforage
                        .getItem("view-spritesheets-options")
                        .then((t) => {
                            t && ((this.uYn.value = t.zoomSetting ?? 6), this.cYn());
                        })
                        .catch(tU.uC),
                    (this.fYn = 0),
                    (this.pYn = 0);
                const e = [];
                for (const t of this.tgt.Pei()) this.fYn++, e.push(t.Jss().then(() => this.vYn()));
                return Promise.all(e).then(() => this.SYn()), tU.u.it(), super.pr(i);
            }
            vYn() {
                this.pYn++;
                const t = this.pYn / this.fYn;
                this.lYn.textContent = eU(
                    "ui.dialogs.view-spritesheets.building-spritesheets",
                    Math.round(1e3 * t) / 10
                );
            }
            SYn() {
                (this.mYn = 0), (this.wYn = 0);
                for (const t of this.tgt.Pei()) for (const i of t.tis()) this.mYn++, this.gYn.push(i);
                this.xYn().then(() => this.MYn());
            }
            xYn() {
                const t = this.gYn.map((t) =>
                    t.Gis().then(() => {
                        this.tgt && this.EYn(t);
                    })
                );
                return Promise.all(t);
            }
            EYn(t) {
                this.yYn.set(t, { blob: t.Ais(), CYn: t.Pis() }), this.wYn++;
                const i = this.wYn / this.mYn;
                this.lYn.textContent = eU(
                    "ui.dialogs.view-spritesheets.rendering-spritesheets",
                    Math.round(1e3 * i) / 10
                );
            }
            MYn() {
                if (!this.tgt) return;
                tU.u.o("ui.dialogs.view-spritesheets");
                let t = 0,
                    i = 0,
                    e = 0;
                for (const s of this.tgt.Aei()) {
                    const n = [...s.yis().tis()];
                    if (0 === n.length) continue;
                    const r = document.createElement("div");
                    r.className = "objectWrap";
                    const h = document.createElement("h3"),
                        o = s.Mss() ? iU(".lossless") : iU(".lossy");
                    (h.textContent = eU(".shared-collection-header", s.Zn(), s.ans(), o)), r.appendChild(h);
                    const a = document.createElement("div");
                    (a.className = "sheetCollectionWrap"), r.appendChild(a);
                    let l = 1;
                    for (const r of n) {
                        ++i, (e += r.vis());
                        const n = document.createElement("div");
                        if (((n.className = "sheetWrap"), !this.yYn.has(r))) throw new Error("missing spritesheet");
                        const { blob: h, CYn: o } = this.yYn.get(r),
                            u = s.Mss() ? iU(".lossless") : eU(".lossy-quality", Math.round(100 * r.bis())),
                            c = document.createElement("p"),
                            d = eU(".shared-sheet-number", l);
                        tU.hrt(
                            c,
                            sU(
                                ".sheet-details",
                                d,
                                r.rs(),
                                r.ls(),
                                tU.nbe(r.rs() * r.ls() * 4),
                                tU.nbe(h.size),
                                tU.MimeType.Ke(h.type).ZIs(),
                                u
                            )
                        ),
                            n.appendChild(c);
                        const f = new Image();
                        (f.className = "spriteSheet transparent-checkerboard-pattern"),
                            (f.src = o),
                            this.bYn.push({ _Yn: f, width: r.rs(), height: r.ls(), TYn: n }),
                            n.appendChild(f),
                            a.appendChild(n),
                            (t += r.rs() * r.ls()),
                            ++l;
                    }
                    this.hYn.appendChild(r);
                }
                for (const s of this.tgt.oa()) {
                    if (!s.Io() && !s.To()) continue;
                    if (s.Scs()) continue;
                    const n = document.createElement("div");
                    n.className = "objectWrap flex";
                    for (let r = 0; r < 2; ++r) {
                        const h = 0 === r,
                            o = s.ycs(h),
                            a = [...o.tis()];
                        if (0 === a.length) continue;
                        const l = iU(h ? ".lossless" : ".lossy"),
                            u = document.createElement("div");
                        (u.className = "objectCollectionWrap"), n.appendChild(u);
                        const c = document.createElement("h3");
                        (c.textContent = eU(".collection-header", o.Zn(), l)), u.appendChild(c);
                        const d = document.createElement("div");
                        (d.className = "sheetCollectionWrap"), u.appendChild(d);
                        let f = 1;
                        for (const s of a) {
                            ++i, (e += s.vis());
                            const n = document.createElement("div");
                            if (((n.className = "sheetWrap"), !this.yYn.has(s))) throw new Error("missing spritesheet");
                            const { blob: r, CYn: o } = this.yYn.get(s),
                                a = h ? iU(".lossless") : eU(".lossy-quality", Math.round(100 * s.bis())),
                                l = document.createElement("p"),
                                u = eU(".sheet-number", f);
                            tU.hrt(
                                l,
                                sU(
                                    ".sheet-details",
                                    u,
                                    s.rs(),
                                    s.ls(),
                                    tU.nbe(s.rs() * s.ls() * 4),
                                    tU.nbe(r.size),
                                    tU.MimeType.Ke(r.type).ZIs(),
                                    a
                                )
                            ),
                                n.appendChild(l);
                            const c = new Image();
                            (c.className = "spriteSheet transparent-checkerboard-pattern"),
                                (c.src = o),
                                this.bYn.push({ _Yn: c, width: s.rs(), height: s.ls(), TYn: n }),
                                n.appendChild(c),
                                d.appendChild(n),
                                (t += s.rs() * s.ls()),
                                ++f;
                        }
                    }
                    this.hYn.appendChild(n);
                }
                const s = t / 1048576;
                (this.lYn.textContent = eU(".summary", Math.round(100 * s) / 100, e, i)), tU.u.it(), this.cYn();
            }
            cYn() {
                const t = aU[this.uYn.value];
                this.dYn.textContent = eU("ui.dialogs.view-spritesheets.zoom-label", Math.floor(100 * t));
                for (const { _Yn: i, width: e, height: s, TYn: n } of this.bYn) {
                    const r = e * t,
                        h = s * t;
                    (i.width = r), (i.height = h), (n.style.width = r < 200 ? "200px" : "");
                }
            }
            egt() {
                this.BQt(), super.egt();
            }
            JLt() {
                this.BQt(), super.JLt();
            }
            BQt() {
                localforage.setItem("view-spritesheets-options", { zoomSetting: this.uYn.value }).catch(tU.uC);
            }
            Cz() {
                (this.tgt = null), tU.ti.fMt(this.hYn), tU.yh(this.bYn), this.yYn.clear(), tU.yh(this.gYn);
            }
        });
    tU.ti.SK.zgt.addEventListener("load", () => {
        tU.ti.Ze.Ugt(oU, lU);
    });
}
{
    const uU = self.t,
        cU = uU.sj(import.meta.url),
        dU = cU.getElementById("viewTileTexturesDialog"),
        fU = (uU.nj(cU.URL), "ViewTileTextures"),
        pU = (uU.ti.Tj.IYn = class extends uU.ti.Ze {
            constructor() {
                super(dU),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this.PYn = this.Jmt("previousButton")),
                    (this.PYn.onclick = () => this.GYn(-1)),
                    (this.kWt = this.Jmt("nextButton")),
                    (this.kWt.onclick = () => this.GYn(1)),
                    (this.xG = this.Jmt("tiles")),
                    (this.mXt = this.xG.getContext("2d")),
                    (this.jSi = this.Jmt("tileTexturesControls")),
                    (this.AYn = this.jSi.querySelector("span")),
                    (this.gnn = 1),
                    (this.ynn = 1);
            }
            fgt() {}
            pr() {
                return (this.gnn = 1), (this.ynn = 1), this.RYn(1), super.pr();
            }
            Cz() {}
            GYn(t) {
                (this.ynn += t),
                    this.ynn < 1 ? (this.ynn = 1) : this.ynn > this.gnn && (this.ynn = this.gnn),
                    this.RYn(this.ynn);
            }
            RYn(t) {
                (this.gnn = 1),
                    this.mXt.clearRect(0, 0, this.xG.width, this.xG.height),
                    this.mXt.setTransform(1, 0, 0, 1, 0, 0);
                let i = 0,
                    e = 0;
                for (let s of self.app.XM().oa()) {
                    if (!(s.ur().WZ() instanceof uU.l.lv)) continue;
                    let n = [...s.hos()];
                    if (!n.length) continue;
                    let r = n[0].ta().Bg(),
                        h = r.vv(),
                        o = r.Mv(),
                        a = r.Iv(),
                        l = r.Tv(),
                        u = r.Ov(),
                        c = r.Pv(),
                        d = r.xv();
                    for (let s of r.kYn()) {
                        let n = s.OYn() * (h + u) + a,
                            r = s.DYn() * (o + c) + l;
                        t === this.gnn && this.mXt.drawImage(d, n, r, h, o, i, e, h, o),
                            (i += h),
                            i > this.xG.width && ((i = 0), (e += o), e > this.xG.height && ((e = 0), this.gnn++));
                    }
                }
                this.AYn.textContent = `   ${this.ynn}/${this.gnn}  `;
            }
        });
    uU.ti.SK.zgt.addEventListener("load", () => {
        uU.ti.Ze.Ugt(fU, pU);
    });
}
{
    const mU = self.t,
        wU = self.lang,
        gU = self.Hpt,
        yU = self.tG,
        bU = self.ej,
        vU = mU.sj(import.meta.url),
        SU = vU.getElementById("viewUsedAddonsDialog"),
        xU = mU.nj(vU.URL);
    mU.u.ij(xU + "lang");
    const MU = "ViewUsedAddons",
        EU = 5,
        CU = (mU.ti.Tj.FYn = class extends mU.ti.Ze {
            constructor() {
                super(SU),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this.fnt = mU.m(mU.ti.Tj.Table, this.XLt(), { border: !0 }));
                let t = this.fnt.bnt();
                mU.u.o("ui.dialogs.viewUsedAddons"),
                    t.Nnt("icon", self.app.bet() + 4),
                    t.Nnt("name", 90, wU(".name")),
                    t.Nnt("type", 60, wU(".type")),
                    t.Nnt("author", 80, wU(".author")),
                    t.Nnt("source", 80, wU(".source")),
                    t.Nnt("version", 110, wU(".version")),
                    t.Cnt("references", wU(".references")),
                    mU.u.it(),
                    this.fnt.QLt(),
                    (this.tgt = null),
                    (this._a = mU.m(
                        mU.Ha,
                        mU.Xa.Wa(this.fnt, "rowcontextmenu", (t) => this.Lnt(t)),
                        mU.Xa.Wa(this.fnt, "tablecontextmenu", (t) => this.n$t(t))
                    ));
            }
            fgt() {
                this.OWi.textContent = wU("common.ok");
            }
            pr(t, i) {
                return (
                    this.hr(bU("ui.dialogs.viewUsedAddons.caption", t.Zn())), (this.tgt = t), this.LYn(t), super.pr(i)
                );
            }
            LYn(t) {
                mU.u.o("ui.dialogs.viewUsedAddons");
                let i = t.Cse(),
                    e = [...t.aOt()],
                    s = [...i.u_s].sort(self.Plugin.awe),
                    n = [...i.f_s].sort(self.Zns._me),
                    r = [...i.Ase].sort(self.pJ.Lhs);
                s.forEach((t) => this.BYn(t, e)),
                    n.forEach((t) => this.UYn(t, e)),
                    r.forEach((i) => this.NYn(i, t, e)),
                    mU.u.it();
            }
            BYn(t, i) {
                let e = this.fnt.Snt(t);
                if (
                    (e.Pnt("icon", t.Iue()),
                    e.Ont("name", t.Zn()),
                    e.Ont("type", wU(".addon-types.plugin")),
                    e.Ont("author", t.Ute()),
                    e.Ont("source", gU(".addon-sources." + t.FZt())),
                    "project" === t.FZt() && mU.Nt.prs(t.JD(), null))
                ) {
                    const i = t.Ote(),
                        s = mU.Nt.yf(t.JD(), null).Ote();
                    s === i
                        ? e.Ont("version", yU(".version-bundled-same-as-builtin", i, i))
                        : e.Ont("version", yU(".version-bundled-different-to-builtin", i, s));
                } else e.Ont("version", t.Ote());
                let s = this.jYn(t, i);
                e.Ont("references", this.$Yn(s));
            }
            UYn(t, i) {
                let e = this.fnt.Snt(t);
                if (
                    (e.Pnt("icon", t.Iue()),
                    e.Ont("name", t.Zn()),
                    e.Ont("type", wU(".addon-types.behavior")),
                    e.Ont("author", t.Ute()),
                    e.Ont("source", gU(".addon-sources." + t.FZt())),
                    "project" === t.FZt() && mU.xf.prs(t.JD(), null))
                ) {
                    const i = t.Ote(),
                        s = mU.xf.yf(t.JD(), null).Ote();
                    s === i
                        ? e.Ont("version", yU(".version-bundled-same-as-builtin", i, i))
                        : e.Ont("version", yU(".version-bundled-different-to-builtin", i, s));
                } else e.Ont("version", t.Ote());
                let s = this.zYn(t, i);
                e.Ont("references", this.$Yn(s));
            }
            NYn(t, i, e) {
                let s = this.fnt.Snt(t);
                if (
                    (s.Pnt("icon", self.app.krt("effect")),
                    s.Ont("name", t.Zn()),
                    s.Ont("type", wU(".addon-types.effect")),
                    s.Ont("author", t.Ute()),
                    s.Ont("source", gU(".addon-sources." + t.FZt())),
                    "project" === t.FZt() && mU.ehs.prs(t.JD(), null))
                ) {
                    const i = t.Ote(),
                        e = mU.ehs.yf(t.JD(), null).Ote();
                    e === i
                        ? s.Ont("version", yU(".version-bundled-same-as-builtin", i, i))
                        : s.Ont("version", yU(".version-bundled-different-to-builtin", i, e));
                } else s.Ont("version", t.Ote());
                let n = this.VYn(t, i, e);
                s.Ont("references", this.$Yn(n));
            }
            jYn(t, i) {
                return i.filter((i) => i.ur() === t).map((t) => t.Zn());
            }
            zYn(t, i) {
                let e = [];
                for (let s of i) if (s.ur().sD()) for (let i of s.aas()) i.Woe() === t && e.push(s.Zn());
                return e;
            }
            VYn(t, i, e) {
                let s = [];
                for (let i of e) if (i.ur().nD()) for (let e of i.oos()) e.vne() === t && s.push(i.Zn());
                for (let e of i.wT()) {
                    for (let i of e.oos())
                        if (i.vne() === t) {
                            s.push(bU(".layout-reference", e.Zn()));
                            break;
                        }
                    for (let i of e.uH())
                        for (let n of i.oos())
                            if (n.vne() === t) {
                                s.push(bU(".layer-reference", e.Zn(), i.Zn()));
                                break;
                            }
                }
                return s;
            }
            $Yn(t) {
                return t.length > EU
                    ? t.slice(0, EU).join(", ") + "... " + bU(".more-references", t.length - EU)
                    : t.join(", ");
            }
            n$t(t) {
                this.Qvt(null, t.clientX, t.clientY);
            }
            Lnt(t) {
                this.Qvt(t.rlt, t.clientX, t.clientY);
            }
            Qvt(t, i, e) {
                let s = mU.m(mU.ti.LO, this.XLt());
                if ((mU.u.o("ui.dialogs.viewUsedAddons.context-menu"), t)) {
                    const i = t.Zc();
                    if (
                        (s.xO("search", wU("common.find-all-references"), () => this.OT(i)),
                        s.YO(),
                        "project" === i.FZt() && mU.Aue.prs(i.lmt(), i.JD(), null))
                    ) {
                        const t = i.Ote(),
                            e = mU.Aue.yf(i.lmt(), i.JD(), null).Ote();
                        mU.oUe(t, e) < 0 &&
                            (s.xO("update", wU(".update-to-editor-version"), () => this.WYn(i, t, e)), s.YO());
                    }
                }
                s.xO("help", wU(".help"), () => this._$t()), s.XO(i, e), mU.u.it();
            }
            OT(t) {
                const i = this.tgt;
                this.egt(), self.yD.wD(t, i);
            }
            WYn(t, i, e) {
                this.tgt.Wei(t);
                mU.ti.Ze.Ke("OK").pr(yU("ui.dialogs.viewUsedAddons.update-confirmation", t.Zn(), i, e));
            }
            _$t() {
                self.app.WO("", "ViewUsedAddonsHelp");
            }
            Cz() {
                this.fnt._x(), (this.tgt = null);
            }
        });
    mU.ti.SK.zgt.addEventListener("load", () => {
        mU.ti.Ze.Ugt(MU, CU);
    });
}
{
    const _U = self.t,
        TU = self.lang,
        IU = self.ej,
        PU = _U.sj(import.meta.url),
        GU = PU.getElementById("textPreviewDialog"),
        AU = _U.nj(PU.URL);
    _U.u.ij(AU + "lang");
    const RU = "TextPreview",
        kU = new Map([
            ["application/javascript", "javascript"],
            ["text/javascript", "javascript"],
            ["application/typescript", "javascript"],
            ["text/typescript", "javascript"],
            ["text/css", "css"],
            ["text/markdown", "markdown"],
            ["text/html", "html"],
            ["application/json", "json"],
            ["text/xml", "xml"],
            ["image/svg+xml", "xml"],
        ]),
        OU = (_U.ti.Tj.HYn = class extends _U.ti.Ze {
            #z = null;
            #V = NaN;
            #W = null;
            #H = "";
            constructor() {
                super(GU),
                    (this.#z = null),
                    (this.#W = () => this.#K()),
                    this.addEventListener("resize", this.#W),
                    this.addEventListener("widthchange", this.#W),
                    this.addEventListener("heightchange", this.#W),
                    this.XLt().addEventListener("contextmenu", _U.ti.sue);
            }
            fgt() {}
            async pr(t, i) {
                _U.VNt(t),
                    _U.vu(i),
                    (this.#H = kU.get(i)),
                    _U.wRt(t.name) && (this.#H = "javascript"),
                    _U.fRt(t.name) && (this.#H = "javascript");
                const e = TU(`ui.dialogs.textPreview.${this.#H ?? "other"}`);
                this.hr(IU("ui.dialogs.textPreview.caption", e));
                const s = super.pr();
                await _U.Kyt.okt();
                let n = await _U.Cle(t);
                const r = globalThis.app.$J(),
                    h = {
                        dropIntoEditor: { enabled: !1 },
                        contextmenu: !1,
                        links: !1,
                        hover: { enabled: !1 },
                        theme: _U.Kyt.Xyt(),
                        fontSize: r.textEditorFontSize || 12,
                        autoIndent: r.textEditorAutoIndent ? "advanced" : "keep",
                        wordWrap: r.textEditorEnableWordWrap ? "on" : "off",
                        minimap: { enabled: r.textEditorEnableMinimap, scale: r.textEditorMinimapScale },
                        stickyScroll: { enabled: r.textEditorEnableStickyScrolling },
                        folding: r.textEditorEnableCodeFolding,
                        value: n,
                        readOnly: !0,
                    };
                this.#H && (h.language = this.#H), (this.#z = globalThis.monaco.editor.create(this.XLt(), h));
                const o = this.#z.getModel(),
                    a =
                        /\bhttps?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b(?:\/[-a-zA-Z0-9@:%_+.~#?&/=]*)?/gi;
                n = o.getValue();
                const l = [];
                let u = a.exec(n);
                for (; u; ) {
                    const t = u[0],
                        i = u.index,
                        e = i + t.length,
                        s = o.getPositionAt(i),
                        r = o.getPositionAt(e);
                    l.push({
                        range: new globalThis.monaco.Range(s.lineNumber, s.column, r.lineNumber, r.column),
                        options: { inlineClassName: "link-decoration" },
                    }),
                        (u = a.exec(n));
                }
                return (
                    this.#z.deltaDecorations([], l),
                    this.#z.onMouseDown((t) => {
                        const i = t.target.position;
                        if (!i) return;
                        const e = o.getOffsetAt(i);
                        let s = "",
                            r = a.exec(n);
                        for (; r; ) {
                            const t = r.index,
                                i = r.index + r[0].length;
                            if (e >= t && e <= i) {
                                s = r[0];
                                break;
                            }
                            r = a.exec(n);
                        }
                        s && globalThis.open(s, "_blank");
                    }),
                    globalThis.requestAnimationFrame(() => {
                        this.#z && this.#z.layout();
                    }),
                    s
                );
            }
            Cz() {
                this.#z && (this.#z.dispose(), (this.#z = null)), (this.#H = "");
            }
            #K() {
                _U.Xl(this.#V) ||
                    (this.#V = globalThis.requestAnimationFrame(() => {
                        this.#z && this.#z.layout(), (this.#V = NaN);
                    }));
            }
        });
    _U.ti.SK.zgt.addEventListener("load", () => {
        _U.ti.Ze.Ugt(RU, OU);
    });
}
{
    const DU = self.t,
        FU = self.lang,
        LU = self.ej,
        BU = DU.sj(import.meta.url),
        UU = BU.getElementById("addonManagerDialog"),
        NU = DU.nj(BU.URL);
    DU.u.ij(NU + "lang");
    const jU = "AddonManager";
    function $U(t, i) {
        const e = t
                .trim()
                .split(".")
                .map((t) => Number.parseInt(t, 10)),
            s = i
                .trim()
                .split(".")
                .map((t) => Number.parseInt(t, 10));
        for (; e.length < s.length; ) e.push(0);
        for (; s.length < e.length; ) s.push(0);
        for (let t = 0, i = e.length; t < i; ++t) {
            const i = e[t] - s[t];
            if (0 !== i) return i;
        }
        return 0;
    }
    let zU = !1;
    const VU = new Map(),
        WU = (DU.ti.Tj.que = class extends DU.ti.Ze {
            constructor() {
                super(UU),
                    (this.vj = this.Jmt("searchInput")),
                    this.vj.setAttribute("placeholder", FU("common.search-input-placeholder")),
                    this.vj.addEventListener("input", () => this.KYn()),
                    (this.qYn = this.Jmt("showBuiltInCheck")),
                    this.qYn.addEventListener("input", () => this.KYn()),
                    (this.XYn = this.Jmt("showUpdatesCheck")),
                    this.XYn.addEventListener("input", () => this.KYn()),
                    (this.YYn = this.Jmt("showOnlySdkV1")),
                    this.YYn.addEventListener("input", () => this.KYn()),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this.JYn = this.Jmt("installAddon")),
                    (this.JYn.onclick = () => this.ZYn()),
                    (this.QYn = this.Jmt("updateAll")),
                    (this.QYn.onclick = () => this.tJn([...VU.values()])),
                    (this.iJn = this.Jmt("installDevAddon")),
                    (this.iJn.onclick = () => this.eJn()),
                    (this.iJn.style.display = "none"),
                    (this.fnt = DU.m(DU.ti.Tj.Table, this.XLt(), { border: !0 })),
                    (this.sJn = 0);
                let t = this.fnt.bnt();
                DU.u.o("ui.dialogs.addonManager"),
                    t.Nnt("icon", self.app.bet() + 4),
                    t.Nnt("name", 110, FU(".name")),
                    t.Nnt("type", 70, FU(".type")),
                    t.Nnt("version", 100, FU(".version")),
                    t.Nnt("author", 100, FU(".author")),
                    t.Nnt("source", 100, FU(".source")),
                    t.Cnt("description", FU(".description")),
                    DU.u.it();
                let i = DU.m(DU.ti.met, self.app.ht("info")),
                    e = this.Jmt("restartPendingMessage");
                e.insertBefore(i.FO(), e.firstChild),
                    this.fnt.addEventListener("rowcontextmenu", (t) => this.fz(t, t.rlt)),
                    this.fnt.QLt();
            }
            fgt() {
                DU.u.o("ui.dialogs.addonManager"),
                    (this.OWi.textContent = FU("common.done")),
                    this.hr(FU(".caption")),
                    (this.Jmt("addonManagerHeaderText").textContent = FU(".loading-text")),
                    (this.Jmt("showBuiltInCheckLabel").textContent = FU(".show-built-in")),
                    (this.Jmt("showUpdatesLabel").textContent = FU(".show-updates-only")),
                    (this.Jmt("showOnlySdkV1Label").textContent = FU(".show-only-legacy-addons")),
                    (this.Jmt("restartPendingMessageText").textContent = FU(".restart-pending-message")),
                    (this.JYn.textContent = FU(".install-new-addon")),
                    (this.QYn.textContent = FU(".update-all")),
                    (this.iJn.textContent = FU(".add-dev-addon"));
                const t = this.Jmt("addonExchangeLink");
                (t.textContent = FU(".get-addons")),
                    (t.onclick = () => self.app.SN(DU.ON.URL.Que, "AddonManager", "GetAddons")),
                    DU.u.it();
            }
            pr(t) {
                (this.fnt.FO().style.display = "none"),
                    Promise.all([DU.Nt.vme(), DU.xf.vme()]).then(() => this.LYn()),
                    this.nJn(),
                    (this.vj.value = ""),
                    (this.qYn.checked = !0),
                    (this.XYn.checked = !1),
                    (this.YYn.checked = !1);
                const i = super.pr(t);
                return (
                    (this.iJn.style.display = self.app.Hue() ? "" : "none"),
                    localforage
                        .getItem("addon-manager-options")
                        .then((t) => {
                            t &&
                                ((this.qYn.checked = !!t.showBuiltIn),
                                (this.XYn.checked = !!t.showUpdatesOnly),
                                (this.YYn.checked = !!t.showOnlySdkV1),
                                this.KYn());
                        })
                        .catch(DU.uC),
                    i
                );
            }
            LYn() {
                DU.u.o("ui.dialogs.addonManager"),
                    (this.fnt.FO().style.display = ""),
                    (this.Jmt("addonManagerHeaderText").textContent = FU(".header-text"));
                const t = [DU.Nt.K5s(), ...DU.Nt.plugins(null, !0)];
                t.sort(self.Plugin.awe);
                const i = [...DU.xf.Cme(null, !0)];
                i.sort(self.Zns._me);
                const e = [...DU.ehs.effects(null, !0)];
                e.sort(self.pJ.Lhs);
                const s = [...DU.Aue.addons("theme", null)];
                s.sort(self.zUn.Lhs);
                const n = [...DU.Aue.addons("tour", null)];
                n.sort(self.QUn.Lhs);
                const r = [...n, ...s, ...t, ...i, ...e];
                for (const t of r) (DU.q$t(t) || "built-in" !== t.FZt()) && this.j$t(t);
                for (const t of r) DU.q$t(t) || "built-in" !== t.FZt() || this.j$t(t);
                DU.u.it(), DU.ti.CT(this.QYn, "hidden", 0 === VU.size), this.KYn();
            }
            j$t(t) {
                if (DU.q$t(t)) {
                    const i = this.fnt.Snt(t);
                    if (
                        (i.Pnt("icon", globalThis.app.krt("warning")),
                        i.Ont("name", t.PBn),
                        i.Ont("type", FU(".addon-types." + t.V$n)),
                        i.Ont("source", FU(".addon-sources." + t.source)),
                        i.Ont("author", t.$6s || ""),
                        DU.Aue.y$n())
                    )
                        i.Ont("description", FU(".safe-mode-deactivated"));
                    else {
                        let e = (t.version || "") + " (SDK v1)";
                        const s = VU.get(t.V$n + "," + t.PBn)?.Gzn;
                        s && (e += `\n[b]${LU("ui.dialogs.addonManager.available-version", s.version)}[/b]`),
                            i.Ont("version", new DU.nS(e, { mq: !0 })),
                            i.Ont("description", FU(".sdkv1-no-longer-supported"));
                    }
                    return;
                }
                const i = t.lmt();
                if ("plugin" === i) this.BYn(t);
                else if ("behavior" === i) this.UYn(t);
                else if ("effect" === i) this.NYn(t);
                else if ("theme" === i) this.rJn(t);
                else {
                    if ("tour" !== i) throw new Error(`unknown addon type '${i}'`);
                    this.hJn(t);
                }
            }
            BYn(t) {
                const i = this.fnt.Snt(t);
                i.Pnt("icon", t.Iue()),
                    i.Ont("name", t.Zn()),
                    i.Ont("type", FU(".addon-types.plugin")),
                    i.Ont("author", t.Ute()),
                    i.Ont("source", FU(".addon-sources." + t.FZt())),
                    i.Ont("description", t.qte());
                let e = t.Ote();
                const s = VU.get("plugin," + t.JD())?.Gzn;
                s && (e += `\n[b]${LU("ui.dialogs.addonManager.available-version", s.version)}[/b]`),
                    i.Ont("version", new DU.nS(e, { mq: !0 }));
            }
            UYn(t) {
                const i = this.fnt.Snt(t);
                i.Pnt("icon", t.Iue()),
                    i.Ont("name", t.Zn()),
                    i.Ont("type", FU(".addon-types.behavior")),
                    i.Ont("author", t.Ute()),
                    i.Ont("source", FU(".addon-sources." + t.FZt())),
                    i.Ont("description", t.qte());
                let e = t.Ote();
                const s = VU.get("behavior," + t.JD())?.Gzn;
                s && (e += `\n[b]${LU("ui.dialogs.addonManager.available-version", s.version)}[/b]`),
                    i.Ont("version", new DU.nS(e, { mq: !0 }));
            }
            NYn(t) {
                const i = this.fnt.Snt(t);
                i.Pnt("icon", self.app.krt("effect")),
                    i.Ont("name", t.Zn()),
                    i.Ont("type", FU(".addon-types.effect")),
                    i.Ont("author", t.Ute()),
                    i.Ont("source", FU(".addon-sources." + t.FZt())),
                    i.Ont("description", t.qte());
                let e = t.Ote();
                const s = VU.get("effect," + t.JD())?.Gzn;
                s && (e += `\n[b]${LU("ui.dialogs.addonManager.available-version", s.version)}[/b]`),
                    i.Ont("version", new DU.nS(e, { mq: !0 }));
            }
            rJn(t) {
                const i = this.fnt.Snt(t);
                i.Pnt("icon", t.Iue()),
                    i.Ont("name", t.Zn()),
                    i.Ont("type", FU(".addon-types.theme")),
                    i.Ont("author", t.Ute()),
                    i.Ont("source", FU(".addon-sources." + t.FZt())),
                    i.Ont("description", t.qte());
                let e = t.Ote();
                const s = VU.get("theme," + t.JD())?.Gzn;
                s && (e += `\n[b]${LU("ui.dialogs.addonManager.available-version", s.version)}[/b]`),
                    i.Ont("version", new DU.nS(e, { mq: !0 }));
            }
            hJn(t) {
                const i = this.fnt.Snt(t);
                i.Pnt("icon", t.Iue()),
                    i.Ont("name", t.Zn()),
                    i.Ont("type", FU(".addon-types.tour")),
                    i.Ont("author", t.Ute()),
                    i.Ont("source", FU(".addon-sources." + t.FZt())),
                    i.Ont("description", t.qte());
                let e = t.Ote();
                const s = VU.get("tour," + t.JD())?.Gzn;
                s && (e += `\n[b]${LU("ui.dialogs.addonManager.available-version", s.version)}[/b]`),
                    i.Ont("version", new DU.nS(e, { mq: !0 }));
            }
            KYn() {
                const t = this.vj.value.toLowerCase(),
                    i = this.qYn.checked,
                    e = this.XYn.checked,
                    s = this.YYn.checked;
                for (const n of this.fnt.rows()) {
                    const r = n.Zc();
                    let h = "",
                        o = "",
                        a = "",
                        l = "",
                        u = "",
                        c = !1,
                        d = 1;
                    DU.q$t(r)
                        ? ((h = r.PBn), (o = r.PBn), (a = r.V$n), (d = r.W$n))
                        : ((h = r.JD()),
                          (o = r.Zn()),
                          (a = r.lmt()),
                          (l = r.Ute()),
                          (u = r.qte()),
                          (c = "built-in" === r.FZt()),
                          (("plugin" === r.lmt() && r instanceof globalThis.Mei) ||
                              ("behavior" === r.lmt() && r instanceof globalThis.jei)) &&
                              (d = r.S_s()));
                    const f = FU("ui.dialogs.addonManager.addon-types." + a);
                    n.tO(
                        (!c || i) &&
                            (!e || VU.has(a + "," + h)) &&
                            (!s || (!c && 1 === d)) &&
                            (!t ||
                                o.toLowerCase().includes(t) ||
                                f.toLowerCase().includes(t) ||
                                l.toLowerCase().includes(t) ||
                                u.toLowerCase().includes(t))
                    );
                }
            }
            Cz() {
                this.fnt._x();
            }
            fz(t, i) {
                if (!i) return;
                const e = self.app;
                let s = this.XLt(),
                    n = i.Zc();
                DU.u.o("ui.dialogs.addonManager.menu");
                let r = DU.m(DU.ti.LO, s);
                this.oJn(n, r),
                    DU.q$t(n)
                        ? r.xO("delete", FU(".uninstall"), () => {
                              this.aJn(n.V$n, n.PBn, n.source, "").then((t) => {
                                  t && this.fnt.kHt(i);
                              });
                          })
                        : ("effect" === n.lmt()
                              ? r.xO("help", FU(".effects-help"), () =>
                                    e.WO("project-primitives/objects/effects", "AddonManager-EffectHelp")
                                )
                              : "tour" === n.lmt()
                                ? r.xO("help", FU(".visit-website"), () => e.SN(n.lNn(), "AddonManager-TourHelp"))
                                : r.xO("help", LU(".help", n.Zn()), () => e.WO(n.pD(), "AddonManager-AddonHelp")),
                          "addon" === n.FZt() && (r.xO("download", FU(".download-c3addon"), () => this.lJn(n)), r.YO()),
                          ("addon" !== n.FZt() && "dev" !== n.FZt()) ||
                              r.xO("delete", FU(".uninstall"), () => {
                                  this.aJn(n.lmt(), n.JD(), n.FZt(), n.Zn()).then((t) => {
                                      t && this.fnt.kHt(i);
                                  });
                              })),
                    r.XO(t.clientX, t.clientY),
                    DU.u.it();
            }
            oJn(t, i) {
                let e, s;
                DU.q$t(t) ? ((e = t.PBn), (s = t.V$n)) : ((e = t.JD()), (s = t.lmt()));
                const n = VU.get(s + "," + e);
                if (n) {
                    const t = n.Gzn;
                    i.xO("update", LU(".update", t.version), () => this.tJn([n])),
                        t.Pzn && i.xO("link", FU(".visit-addon-page"), () => globalThis.app.SN(t.Pzn)),
                        i.YO();
                }
            }
            async ZYn() {
                const t = this.XLt(),
                    i = new DU.ti.Eyi(),
                    e = await i.pr(".c3addon", t, !0);
                null !== e && this.xz() && DU.ti.Tj.que.YRt(e, this);
            }
            static async YRt(t, i, e = !1) {
                const s = i ? i.XLt() : null;
                i && i.uJn(!0);
                let n = !1;
                const r = [];
                for (const i of t)
                    try {
                        (await DU.Aue.phi(i, null, s, e)) && ((zU = !0), (n = !0), r.push(i));
                    } catch (t) {
                        console.error("Error installing addon: ", t);
                        const i = DU.ti.Ze.Ke("OK");
                        "min-version" === t.message
                            ? await i.pr(
                                  DU.m(
                                      DU.nS,
                                      LU(
                                          "ui.dialogs.addonManager.install-min-version-error-message",
                                          DU.uhi(t.J$n),
                                          DU.ON.fhi
                                      ),
                                      { links: [location.origin + "/" + DU.ODn(t.J$n)] }
                                  ),
                                  s
                              )
                            : "sdkv1-addon" === t.message
                              ? await i.pr(
                                    DU.m(
                                        DU.nS,
                                        LU("ui.dialogs.addonManager.install-sdkv1-error-message", t.PBn, t.Y$n),
                                        { links: [DU.ON.URL.LSe + "releases/lts"] }
                                    ),
                                    s
                                )
                              : await i.pr(FU("ui.dialogs.addonManager.install-error-message"), s),
                            r.push(t);
                    }
                if ((i && (i.nJn(), i.uJn(!1)), n && !e)) {
                    const t = DU.ti.Ze.Ke("OK");
                    t.hr(FU("ui.dialogs.addonManager.install-confirmation.title")),
                        await t.pr(FU("ui.dialogs.addonManager.install-confirmation.message"), s);
                }
                return r;
            }
            async aJn(t, i, e, s) {
                const n = this.XLt();
                DU.u.o("ui.dialogs.addonManager.uninstall-confirmation");
                const r = DU.ti.Ze.Ke("Confirm").pr(
                    { caption: FU(".caption"), message: LU(".message", s || i), jT: FU(".uninstall") },
                    n
                );
                DU.u.it();
                if (null === (await r)) return !1;
                this.uJn(!0);
                try {
                    await DU.Aue.Z$n(t, i, e), (zU = !0), this.nJn();
                    const s = DU.ti.Ze.Ke("OK");
                    return (
                        s.hr(FU("ui.dialogs.addonManager.uninstall-finished.title")),
                        await s.pr(FU("ui.dialogs.addonManager.uninstall-finished.message"), n),
                        !0
                    );
                } catch (t) {
                    console.error("Error uninstalling addon: ", t);
                    const i = DU.ti.Ze.Ke("OK");
                    return await i.pr(FU("ui.dialogs.addonManager.uninstall-error-message"), n), !1;
                } finally {
                    this.uJn(!1);
                }
            }
            lJn(t) {
                const i = t.$ri();
                DU.IRt(t.Zn() + ".c3addon", i);
            }
            nJn() {
                zU && this.Jmt("restartPendingMessage").removeAttribute("hidden");
            }
            async eJn() {
                DU.ti.Tj.que.Xue(this);
            }
            static async Xue(t) {
                const i = t ? t.XLt() : null,
                    e = DU.ti.Ze.Ke("Input");
                DU.u.o("ui.dialogs.addonManager.dev-addon-install");
                const s = e.pr({
                    caption: FU(".caption"),
                    message: FU(".message"),
                    label: FU(".url-label"),
                    j0e: "https://localhost:65432/addon.json",
                    spellcheck: !1,
                });
                DU.u.it();
                const n = await s;
                if (null !== n)
                    try {
                        const e = await DU.MNt(n);
                        DU.Aue.X$n(e), await DU.Aue.izn(n, e, i), (zU = !0), t && t.nJn();
                        DU.ti.Ze.Ke("OK").pr(LU("ui.dialogs.addonManager.dev-install-confirmation", e.id));
                    } catch (t) {
                        console.error("Error loading addon JSON: ", t);
                        DU.ti.Ze.Ke("OK").pr(FU("ui.dialogs.addonManager.dev-install-failed"));
                    }
            }
            uJn(t) {
                t ? this.sJn++ : this.sJn--, DU.ti.CT(this.OWi, "disabled", this.sJn > 0);
            }
            egt() {
                this.sJn > 0 ||
                    (localforage
                        .setItem("addon-manager-options", {
                            showBuiltIn: this.qYn.checked,
                            showUpdatesOnly: this.XYn.checked,
                            showOnlySdkV1: this.YYn.checked,
                        })
                        .catch(DU.uC),
                    super.egt());
            }
            Uj(t) {
                return t.which === DU.fO.oO && document.activeElement === this.vj
                    ? ((this.vj.value = ""), this.KYn(), t.preventDefault(), void t.stopPropagation())
                    : super.Uj(t);
            }
            static async cJn() {
                await globalThis.app.jpe();
                const t = ["plugin", "behavior", "effect", "theme"],
                    i = [];
                for (const e of t)
                    for (const t of DU.Aue.H$n(e)) {
                        const s = DU.Aue.z$n(e, t).OBn;
                        i.push({ V$n: e, PBn: t, version: s.version });
                    }
                const e = { addons: i.map((t) => ({ type: t.V$n, id: t.PBn, currentVersion: t.version })) };
                try {
                    const t = await fetch("/checkaddons.json", { method: "POST", body: JSON.stringify(e) });
                    if (!t.ok) throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`);
                    const i = await t.json();
                    if (!0 !== i.success || "object" != typeof i.data || !Array.isArray(i.data.foundAddons)) throw i;
                    for (const t of i.data.foundAddons) {
                        const i = t.type;
                        if (!DU.Aue.czn(i)) continue;
                        const e = t.id;
                        let s = "";
                        DU.Aue.prs(i, e) && (s = DU.Aue.yf(i, e)?.Zn()), s || (s = t.name || e);
                        const n = DU.Aue.z$n(i, e);
                        if (!n) continue;
                        const r = n.OBn.version,
                            h = t.releases.filter((t) => "Stable" === t.branch);
                        if (0 === h.length) continue;
                        h.sort((t, i) => $U(t.version, i.version));
                        const o = h.at(-1);
                        if ($U(r, o.version) >= 0) continue;
                        const a = {
                            version: o.version,
                            Tzn: new Date(o.date),
                            Izn: h.map((t) => ({ version: t.version, kzn: t.bbCodeReleaseNotes })),
                            dJn: o.downloadURL,
                            Pzn: t.url,
                        };
                        VU.set(i + "," + e, { V$n: i, PBn: e, Azn: s, Rzn: r, Gzn: a });
                    }
                    if (VU.size > 0) {
                        const t = DU.u.z_("ui.dialogs.addonManager.addon-updates-available-notification");
                        DU.ti.Notification.XO("info", t.yT(".title", null, VU.size), t(".message"), {
                            align: "bottom-left",
                            bjt: 1e4,
                            onclick: async () => {
                                DU.ti.Ze.Ke("AddonManager").pr();
                            },
                        });
                    }
                } catch (t) {
                    (() => {})("Failed to check for addon updates: ", t);
                }
            }
            async tJn(t) {
                const i = DU.u.z_("ui.dialogs.addonManager"),
                    e = DU.ti.Ze.Ke("AddonUpdateReview");
                if (null === (await e.pr(t, this.FO()))) return;
                const s = DU.ti.Ze.Ke("Progress");
                let n = 0;
                (s.onprogress = () => n), s.pr(i(".downloading-updates")), this.uJn(!0);
                try {
                    const e = await DU.gke(
                        t.map((t) => DU.ma(t.Gzn.dJn)),
                        (t, i) => (n = t / i)
                    );
                    s.WD(), await DU.ti.Tj.que.YRt(e, this, !0);
                    const r = DU.ti.Ze.Ke("OK");
                    r.hr(i(".update-confirmation.title")), r.pr(i(".update-confirmation.message"));
                    for (const { V$n: i, PBn: e } of t) VU.delete(i + "," + e);
                    DU.ti.CT(this.QYn, "hidden", 0 === VU.size), this.KYn();
                } catch (t) {
                    s.WD();
                    DU.ti.Ze.Ke("OK").pr(i(".update-error-message"));
                } finally {
                    this.uJn(!1);
                }
            }
        });
    DU.ti.SK.zgt.addEventListener("load", () => {
        DU.ti.Ze.Ugt(jU, WU);
    });
}
{
    const HU = self.t,
        KU = self.mNt,
        qU = self.lang,
        XU = HU.sj(import.meta.url),
        YU = XU.getElementById("settingsDialog"),
        JU = HU.nj(XU.URL);
    HU.u.ij(JU + "lang");
    const ZU = "Settings",
        QU = (HU.ti.Tj.fJn = class extends HU.ti.Ze {
            constructor() {
                super(YU),
                    (this.OWi = this.Jmt("okButton")),
                    (this.OWi.onclick = () => this.egt()),
                    (this.pJn = this.Jmt("resetUserInterface")),
                    (this.pJn.onclick = () => this.mJn()),
                    (this.wJn = this.Jmt("enableMultiMonitor")),
                    (this.wJn.onclick = () => this.gJn()),
                    (this.yJn = this.Jmt("enableMultiMonitorWrap")),
                    (this.bJn = this.Jmt("clearRecentProjects")),
                    (this.bJn.onclick = () => this.bJn.setAttribute("clearRecentProjects", "")),
                    (this.vJn = this.Jmt("downloadBrowserSaves")),
                    (this.vJn.onclick = () => this.SJn()),
                    (this.PHs = this.Jmt("languageSetting")),
                    (this.xJn = this.Jmt("uiMode")),
                    (this.MJn = this.Jmt("useSimplifiedMode")),
                    (this.EJn = this.Jmt("enableExampleBrowser")),
                    (this.CJn = this.Jmt("theme")),
                    (this._Jn = this.Jmt("useDefaultIconColor")),
                    (this.TJn = this.Jmt("iconColor")),
                    (this.IJn = this.Jmt("defaultSaveLocation")),
                    (this.PJn = this.Jmt("enableAutosave")),
                    (this.GJn = this.Jmt("autosaveDuration")),
                    (this.AJn = this.Jmt("autosaveLocation")),
                    this.AJn.addEventListener("change", () => this.RJn()),
                    (this.kJn = this.Jmt("localBackupFolderSection")),
                    (this.OJn = this.Jmt("localBackupFolderStatus")),
                    (this.DJn = this.Jmt("localBackupFolderChoose")),
                    this.DJn.addEventListener("click", () => this.FJn()),
                    (this.LJn = this.Jmt("textEditorFontSize")),
                    (this.BJn = this.Jmt("textEditorAutoIndent")),
                    (this.UJn = this.Jmt("textEditorWordWrap")),
                    (this.NJn = this.Jmt("textEditorShowMinimap")),
                    (this.jJn = this.Jmt("textEditorMinimapScale")),
                    (this.$Jn = this.Jmt("textEditorStickyScrolling")),
                    (this.zJn = this.Jmt("textEditorEnableCodeFolding")),
                    (this.VJn = this.Jmt("enableUIAnims")),
                    (this.WJn = this.Jmt("enableUIEffects")),
                    (this.HJn = this.Jmt("enableNotifications")),
                    (this.KJn = this.Jmt("showTakeBreakReminders")),
                    (this.qJn = this.Jmt("zoomMouseWheelOnly")),
                    (this.XJn = this.Jmt("useFakeClipboard")),
                    (this.YJn = this.Jmt("inProgressLanguages")),
                    (this.JJn = this.Jmt("experimentalFeatures")),
                    (this.ZJn = this.Jmt("enableDeveloperMode")),
                    (this.QJn = this.Jmt("cacheCloudMetadata")),
                    (this.tZn = this.Jmt("limitToWebGL1")),
                    (this.iZn = this.Jmt("enableWebGPUInEditor")),
                    (this.eZn = this.Jmt("showStartPage")),
                    (this.sZn = this.Jmt("autoHideStartPage")),
                    (this.nZn = this.Jmt("showStartPageMessageBanners")),
                    (this.rZn = this.Jmt("hideAddActionRows")),
                    (this.hZn = this.Jmt("translateExpressions")),
                    (this.oZn = this.Jmt("gpuPowerPreference")),
                    (this.aZn = this.Jmt("previewMode")),
                    (this.lZn = this.Jmt("updateChannel")),
                    (this.uZn = this.Jmt("enableAddonUpdateChecks")),
                    (this.cZn = this.Jmt("defaultProjectAuthor")),
                    (this.dZn = this.Jmt("defaultProjectEmail")),
                    (this.fZn = this.Jmt("defaultProjectWebsite")),
                    (this.pZn = this.Jmt("defaultAnimationSpeed")),
                    (this.mZn = () => this.wZn()),
                    (this.gZn = () => this.yZn()),
                    (this.bZn = () => this.vZn()),
                    (this._Jn.onclick = () => this.SZn()),
                    (this.PJn.onclick = () => this.xZn()),
                    (this.MZn = ""),
                    (this.EZn = 0),
                    this.J4i().addEventListener("pointerdown", () => this.CZn()),
                    globalThis.app.zue() || (this.Jmt("enableAddonUpdateChecksWrap").style.display = "none"),
                    HU.Xr &&
                        (this._Zn("synthetic-rockdots", " (synthetic-rockdots)"),
                        this._Zn("synthetic-leet", "|_337 (synthetic-leet)"),
                        this._Zn("synthetic-uppercase", "UPPERCASE (synthetic-uppercase)"),
                        this._Zn("synthetic-lowercase", "lowercase (synthetic-lowercase)"),
                        this._Zn("synthetic-repeat-2", "rreeppeeaatt22 (synthetic-repeat-2)"),
                        this._Zn("synthetic-repeat-3", "rrreeepppeeeaaattt333 (synthetic-repeat-3)"),
                        this._Zn("synthetic-repeat-4", "rrrreeeeppppeeeeaaaatttt4444 (synthetic-repeat-4)")),
                    (HU.Xr || self.app.$J().showInProgressLanguages) &&
                        (this._Zn("id-ID", "Bahasa Indonesia [incomplete]", "Indonesian"),
                        this._Zn("bs-BA", "Bosanski [incomplete]", "Bosnian"),
                        this._Zn("pl-PL", "Polski [incomplete]", "Polish"),
                        this._Zn("ro-RO", "Romn [incomplete]", "Romanian"),
                        this._Zn("ko-KR", " [incomplete]", "Korean"),
                        this._Zn("th-TH", " [incomplete]", "Thai"));
            }
            _Zn(t, i, e) {
                const s = document.createElement("option");
                (s.value = t), (s.text = i), e && s.setAttribute("title", e), this.PHs.add(s);
            }
            fgt() {
                const t = self.app;
                HU.u.o("ui.dialogs.settings"), this.hr(qU(".caption")), (this.OWi.textContent = qU(".close"));
                const i = this.Jmt("helpLink");
                (i.textContent = qU("common.help")),
                    (i.onclick = () => t.WO("interface/dialogs/settings", "SettingsDialog")),
                    (this.Jmt("settingsUIHeader").textContent = qU(".user-interface.header")),
                    HU.u.o(".editor-settings"),
                    (this.Jmt("languageLabel").textContent = qU(".language")),
                    (this.Jmt("uiModeLabel").textContent = qU(".ui-mode.label"));
                for (let t = 0, i = this.xJn.options.length; t < i; ++t) {
                    const i = this.xJn.options[t];
                    i.textContent = qU(".ui-mode." + i.value);
                }
                (this.Jmt("useSimplifiedModeLabel").textContent = qU(".simplified-mode")),
                    (this.Jmt("enableExampleBrowserLabel").textContent = qU(".enable-example-browser")),
                    (this.Jmt("themeLabel").textContent = qU(".theme.label"));
                const e = document.createElement("option");
                (e.value = ""), (e.textContent = qU(".theme.default")), this.CJn.add(e);
                const s = [...HU.Aue.addons("theme")].sort(self.zUn.Lhs);
                for (const t of s) {
                    const i = document.createElement("option");
                    (i.value = t.JD()), (i.textContent = t.Zn()), this.CJn.add(i);
                }
                (this.wJn.textContent = qU(".enable-multi-monitor-features")),
                    (this.pJn.textContent = qU(".reset-user-interface.label")),
                    (this.bJn.textContent = qU(".clear-recent-projects")),
                    (this.vJn.textContent = qU(".download-browser-saves")),
                    (this.Jmt("useDefaultIconColorLabel").textContent = qU(".use-default-icon-color")),
                    (this.Jmt("iconColorLabel").textContent = qU(".icon-color-label")),
                    (this.Jmt("enableUIAnimsLabel").textContent = qU(".enable-ui-animations")),
                    (this.Jmt("enableUIEffectsLabel").textContent = qU(".enable-ui-effects")),
                    (this.Jmt("enableNotificationsLabel").textContent = qU(".enable-notifications")),
                    (this.Jmt("showTakeBreakRemindersLabel").textContent = qU(".show-take-a-break-reminder")),
                    (this.Jmt("zoomMouseWheelOnlyLabel").textContent = qU(".zoom-mouse-wheel-only")),
                    (this.Jmt("useFakeClipboardLabel").textContent = qU(".use-in-app-clipboard")),
                    (this.Jmt("enableDeveloperModeLabel").textContent = qU(".enable-developer-mode")),
                    (this.Jmt("cacheCloudMetadataLabel").textContent = qU(".cache-cloud-meta")),
                    (this.Jmt("limitToWebGL1Label").textContent = qU(".limit-to-webgl1")),
                    HU.u.o(".gpu-power-preference"),
                    (this.Jmt("gpuPowerPreferenceLabel").textContent = qU(".label"));
                for (let t = 0, i = this.oZn.options.length; t < i; ++t) {
                    const i = this.oZn.options[t];
                    i.textContent = qU("." + i.value);
                }
                HU.u.it(),
                    HU.u.o(".enable-webgpu-in-editor"),
                    (this.Jmt("enableWebGPUInEditorLabel").textContent = qU(".label"));
                for (let t = 0, i = this.iZn.options.length; t < i; ++t) {
                    const i = this.iZn.options[t];
                    i.textContent = qU("." + i.value);
                }
                if (
                    (HU.u.it(),
                    HU.u.it(),
                    HU.u.o(".text-editor-settings"),
                    (this.Jmt("settingsTextEditorHeader").textContent = qU(".header")),
                    (this.Jmt("textEditorFontSizeLabel").textContent = qU(".font-size")),
                    (this.Jmt("textEditorAutoIndentLabel").textContent = qU(".auto-indent")),
                    (this.Jmt("textEditorWordWrapLabel").textContent = qU(".word-wrap")),
                    (this.Jmt("textEditorShowMinimapLabel").textContent = qU(".show-minimap")),
                    (this.Jmt("textEditorStickyScrollingLabel").textContent = qU(".use-sticky-scrolling")),
                    (this.Jmt("textEditorEnableCodeFoldingLabel").textContent = qU(".enable-code-folding")),
                    HU.u.o(".minimap-scale"),
                    (this.Jmt("textEditorMinimapScaleLabel").textContent = qU(".label")),
                    (this.jJn.item(0).textContent = qU(".1x")),
                    (this.jJn.item(1).textContent = qU(".2x")),
                    (this.jJn.item(2).textContent = qU(".3x")),
                    HU.u.it(),
                    HU.u.it(),
                    HU.u.o(".backup-settings"),
                    (this.Jmt("settingsSaveHeader").textContent = qU(".header")),
                    HU.u.o(".default-save-location"),
                    (this.Jmt("defaultSaveLocationLabel").textContent = qU(".label")),
                    (this.IJn.item(0).textContent = qU(".cloud")),
                    (this.IJn.item(1).textContent = qU(".local-browser")),
                    (this.IJn.item(2).textContent = qU(".download-a-copy")),
                    HU.Y$.bue)
                ) {
                    const t = document.createElement("option");
                    (t.value = "save-as"), (t.textContent = qU(".save-as")), this.IJn.add(t);
                }
                HU.u.it(),
                    (this.Jmt("enableAutosaveLabel").textContent = qU(".autosave")),
                    (this.Jmt("autosaveDurationLabel").textContent = qU(".autosave-duration")),
                    (this.Jmt("autosaveLocationLabel").textContent = qU(".autosave-location")),
                    (this.AJn.item(0).textContent = qU(".locations.browser")),
                    (this.AJn.item(4).textContent = qU(".locations.match")),
                    (this.AJn.item(5).textContent = qU(".locations.local-folder")),
                    HU.Y$.bue || (this.AJn.item(5).style.display = "none"),
                    HU.u.o(".local-backup-folder"),
                    (this.Jmt("localBackupFolderLabel").textContent = qU(".label")),
                    (this.DJn.textContent = qU(".choose")),
                    HU.u.it(),
                    HU.u.it(),
                    HU.u.o(".default-properties-settings"),
                    (this.Jmt("settingsDefaultPropsHeader").textContent = qU(".header")),
                    (this.Jmt("defaultProjectAuthorLabel").textContent = qU(".default-project-author")),
                    (this.Jmt("defaultProjectEmailLabel").textContent = qU(".default-project-email")),
                    (this.Jmt("defaultProjectWebsiteLabel").textContent = qU(".default-project-website")),
                    (this.Jmt("defaultAnimationSpeedLabel").textContent = qU(".default-animation-speed")),
                    HU.u.it(),
                    HU.u.o("ui.bars.properties.project"),
                    (this.dZn.placeholder = qU(".email.placeholder")),
                    (this.fZn.placeholder = qU(".website.placeholder")),
                    HU.u.it(),
                    HU.u.o(".update-settings"),
                    (this.Jmt("settingsUpdatesHeader").textContent = qU(".header")),
                    (this.Jmt("updatesDescription").textContent = qU(".beta-description")),
                    (this.Jmt("updateChannelLabel").textContent = qU(".notify-updates-label")),
                    (this.lZn.item(0).textContent = qU(".stable-releases")),
                    (this.lZn.item(1).textContent = qU(".beta-releases")),
                    (this.lZn.item(2).textContent = qU(".disable-update-notifications")),
                    (this.Jmt("enableAddonUpdateChecksLabel").textContent = qU(".check-for-addon-updates")),
                    HU.u.it(),
                    HU.u.o(".start-page-settings"),
                    (this.Jmt("startPageHeader").textContent = qU(".header")),
                    (this.Jmt("showStartPageLabel").textContent = qU(".show-start-page")),
                    (this.Jmt("autoHideStartPageLabel").textContent = qU(".auto-hide-start-page")),
                    (this.Jmt("showStartPageMessageBannersLabel").textContent = qU(".show-start-page-message-banners")),
                    HU.u.it(),
                    HU.u.o(".event-sheet-settings"),
                    (this.Jmt("eventSheetHeader").textContent = qU(".header")),
                    (this.Jmt("hideAddActionRowsLabel").textContent = qU(".hide-add-action-rows")),
                    (this.Jmt("translateExpressionsLabel").textContent = qU(".translate-expressions")),
                    HU.u.it(),
                    HU.u.o(".preview-settings"),
                    (this.Jmt("settingsPreviewHeader").textContent = qU(".header")),
                    (this.Jmt("previewModeLabel").textContent = qU(".preview-with.label"));
                for (let t = 0, i = this.aZn.options.length; t < i; ++t) {
                    const i = this.aZn.options[t];
                    i.textContent = qU(".preview-with." + i.value);
                }
                HU.u.it(),
                    HU.u.o(".advanced-settings"),
                    (this.Jmt("settingsAdvancedHeader").textContent = qU(".header")),
                    (this.Jmt("inProgressLanguagesLabel").textContent = qU(".show-in-progress-languages")),
                    (this.Jmt("experimentalFeaturesLabel").textContent = qU(".enable-experimental-features")),
                    HU.u.it(),
                    HU.u.it(),
                    t.JO().then((t) => {
                        t ||
                            ((this.IJn.item(1).style.display = "none"),
                            (this.AJn.item(0).style.display = "none"),
                            (this.vJn.style.display = "none"));
                    });
            }
            pr(t, i) {
                const e = super.pr(t),
                    s = self.app,
                    n = s.$J();
                return (
                    (this.PHs.value = n.language),
                    (this.xJn.value = n.uiMode),
                    (this.MJn.checked = n.useSimplifiedMode),
                    (this.EJn.checked = n.enableExampleBrowser),
                    (this.CJn.value = n.theme),
                    this.CJn.value !== n.theme && ((this.CJn.value = ""), (n.theme = "")),
                    (this.pJn.disabled = !1),
                    (this.yJn.style.display = "none"),
                    this.TZn(),
                    (this._Jn.checked = n.useDefaultIconColor),
                    (this.TJn.value = n.iconColor),
                    (this.IJn.value = n.defaultSaveLocation),
                    (this.PJn.checked = n.autoSave),
                    (this.LJn.value = n.textEditorFontSize),
                    (this.BJn.checked = n.textEditorAutoIndent),
                    (this.UJn.checked = n.textEditorEnableWordWrap),
                    (this.NJn.checked = n.textEditorEnableMinimap),
                    this.NJn.addEventListener("input", this.bZn),
                    (this.jJn.value = n.textEditorMinimapScale + "x"),
                    (this.$Jn.checked = n.textEditorEnableStickyScrolling),
                    (this.zJn.checked = n.textEditorEnableCodeFolding),
                    this.vZn(),
                    (this.GJn.value = n.autosaveDuration),
                    (this.AJn.value = n.autosaveLocation),
                    (this.VJn.checked = n.enableUIAnimations),
                    (this.WJn.checked = n.enableUIEffects),
                    (this.HJn.checked = n.enableNotifications),
                    (this.KJn.checked = n.showTakeBreakReminders),
                    (this.qJn.checked = n.zoomMouseWheelOnly),
                    (this.XJn.checked = n.useFakeClipboard),
                    (this.YJn.checked = n.showInProgressLanguages),
                    (this.JJn.checked = n.experimentalFeatures),
                    (this.ZJn.checked = n.developerMode),
                    (this.eZn.checked = n.showStartPageOnStartup),
                    (this.sZn.checked = n.autoHideStartPage),
                    (this.nZn.checked = n.showStartPageMessageBanners),
                    (this.rZn.checked = n.hideAddActionRows),
                    (this.hZn.checked = n.translateExpressions),
                    (this.oZn.value = n.gpuPowerPreference),
                    (this.aZn.value = n.previewMode),
                    (this.lZn.value = n.updateChannel),
                    (this.uZn.checked = n.checkForAddonUpdates),
                    (this.QJn.checked = n.cloudCache),
                    (this.tZn.checked = n.limitToWebGL1),
                    (this.iZn.value = n.enableWebGPUInEditor),
                    (this.cZn.value = n.defaultProjectAuthor),
                    (this.dZn.value = n.defaultProjectEmail),
                    (this.fZn.value = n.defaultProjectWebsite),
                    (this.pZn.value = n.defaultAnimationSpeed),
                    s.XB() && ((this.nZn.checked = !0), (this.nZn.disabled = !0)),
                    this.TJn.addEventListener("change", this.mZn),
                    this.WJn.addEventListener("change", this.gZn),
                    this.SZn(),
                    (this.MZn = s.p8e()),
                    (this.EZn = 0),
                    s.Hue() || (this.Jmt("developerModeWrap").style.display = "none"),
                    this.xZn(),
                    this.IZn(),
                    "backup" === i && (this.Jmt("settingsSaveHeader").scrollIntoView(!0), this.PJn.focus()),
                    e
                );
            }
            BQt() {
                const t = self.app,
                    i = t.$J(),
                    e = i.uiMode !== this.xJn.value || i.theme !== this.CJn.value,
                    s = this.bJn.hasAttribute("clearRecentProjects");
                this.bJn.removeAttribute("clearRecentProjects");
                const n = this.PHs.value || i.language,
                    r =
                        e ||
                        i.language !== n ||
                        i.developerMode !== !!this.ZJn.checked ||
                        i.gpuPowerPreference !== this.oZn.value ||
                        i.previewMode !== this.aZn.value ||
                        i.showInProgressLanguages !== this.YJn.checked ||
                        i.translateExpressions !== !!this.hZn.checked ||
                        i.limitToWebGL1 !== !!this.tZn.checked ||
                        i.enableWebGPUInEditor !== this.iZn.value;
                return (
                    (i.language = n),
                    (i.uiMode = this.xJn.value),
                    (i.useSimplifiedMode = !!this.MJn.checked),
                    (i.enableExampleBrowser = !!this.EJn.checked),
                    (i.theme = this.CJn.value),
                    (i.useDefaultIconColor = !!this._Jn.checked),
                    (i.iconColor = this.TJn.value),
                    (i.defaultSaveLocation = this.IJn.value),
                    (i.autoSave = !!this.PJn.checked),
                    (i.autosaveDuration = HU.ft(+this.GJn.value, 1, 60)),
                    (i.textEditorFontSize = HU.ft(this.LJn.value, 6, 100)),
                    (i.textEditorAutoIndent = !!this.BJn.checked),
                    (i.textEditorEnableWordWrap = !!this.UJn.checked),
                    (i.textEditorEnableMinimap = !!this.NJn.checked),
                    (i.textEditorMinimapScale = Number.parseInt(this.jJn.value, 10)),
                    (i.textEditorEnableStickyScrolling = !!this.$Jn.checked),
                    (i.textEditorEnableCodeFolding = !!this.zJn.checked),
                    (i.autosaveLocation = this.AJn.value),
                    (i.enableUIAnimations = !!this.VJn.checked),
                    (i.enableUIEffects = !!this.WJn.checked),
                    (i.enableNotifications = !!this.HJn.checked),
                    (i.showTakeBreakReminders = !!this.KJn.checked),
                    (i.zoomMouseWheelOnly = !!this.qJn.checked),
                    (i.useFakeClipboard = !!this.XJn.checked),
                    (i.showInProgressLanguages = !!this.YJn.checked),
                    (i.experimentalFeatures = !!this.JJn.checked),
                    (i.developerMode = !!this.ZJn.checked),
                    (i.showStartPageOnStartup = !!this.eZn.checked),
                    (i.autoHideStartPage = !!this.sZn.checked),
                    (i.showStartPageMessageBanners = !!this.nZn.checked),
                    (i.hideAddActionRows = !!this.rZn.checked),
                    (i.translateExpressions = !!this.hZn.checked),
                    (i.gpuPowerPreference = this.oZn.value),
                    (i.previewMode = this.aZn.value),
                    (i.updateChannel = this.lZn.value),
                    (i.checkForAddonUpdates = !!this.uZn.checked),
                    (i.cloudCache = !!this.QJn.checked),
                    (i.limitToWebGL1 = !!this.tZn.checked),
                    (i.enableWebGPUInEditor = this.iZn.value),
                    (i.defaultProjectAuthor = this.cZn.value),
                    (i.defaultProjectEmail = this.dZn.value),
                    (i.defaultProjectWebsite = this.fZn.value),
                    (i.defaultAnimationSpeed = HU.ft(+this.pZn.value, 0, 60)),
                    this.MZn !== t.p8e() && this.PZn(),
                    e && t.GZn(),
                    s && self.pue._x(),
                    t.y6i(),
                    r
                );
            }
            async TZn() {
                if (HU.ti.fXe())
                    try {
                        "prompt" === (await navigator.permissions.query({ name: "window-management" })).state &&
                            (this.yJn.style.display = "");
                    } catch (t) {
                        (() => {})("Unable to query 'window-management' permission state: ", t);
                    }
            }
            async gJn() {
                await HU.ti.pXe();
                try {
                    "prompt" !== (await navigator.permissions.query({ name: "window-management" })).state &&
                        (this.yJn.style.display = "none");
                } catch (t) {
                    (() => {})("Unable to query 'window-management' permission state: ", t);
                }
            }
            mJn() {
                (this.pJn.disabled = !0), globalThis.app.GZn();
                HU.ti.Ze.Ke("OK").pr(
                    qU("ui.dialogs.settings.editor-settings.reset-user-interface.confirmation-message")
                );
            }
            async AZn() {
                const t = new KU("C3_localFiles"),
                    i = await t.keys(),
                    e = new Map();
                for (const s of i)
                    try {
                        const i = await t.get(s),
                            n = await HU.tJ(i);
                        e.set(s, n);
                    } catch (t) {
                        (() => {})("Unable to read blob " + s + ", skipping");
                    }
                const s = new KU("localforage"),
                    n = await s.get("C3_localMeta");
                return e.set("metadata.json", new Blob([JSON.stringify(n)])), e;
            }
            async RZn() {
                const t = new HU.pRt(),
                    i = HU.ti.Ze.Ke("Progress");
                (i.onprogress = () => {
                    let i = t.oke(),
                        e = t.ake();
                    return 0 === e ? null : i / e;
                }),
                    i.pr();
                try {
                    const i = await this.AZn();
                    return await t.bRt(i);
                } catch (t) {
                    throw t;
                } finally {
                    i.WD();
                }
            }
            async SJn() {
                try {
                    const t = await this.RZn(),
                        i = new Date(),
                        e = `${i.getDate()}-${i.getMonth() + 1}-${i.getFullYear()}T${i.getHours()}-${i.getMinutes()}-${i.getSeconds()}`;
                    await HU.IRt("browser_saves_" + e + ".zip", t);
                } catch (t) {
                    console.error("Error downloading browser saves: ", t);
                    HU.ti.Ze.Ke("OK").pr(qU("ui.dialogs.settings.editor-settings.download-browser-saves-failed"));
                }
            }
            kZn() {
                if (self.app.$J().useSimplifiedMode) {
                    return HU.ti.Ze.Ke("OK").pr(qU("ui.dialogs.settings.simplified-mode-notification"));
                }
                return Promise.resolve();
            }
            OZn() {
                if (self.app.$J().showInProgressLanguages) {
                    return HU.ti.Ze.Ke("OK").pr(qU("ui.dialogs.settings.in-progress-languages-notification"));
                }
                return Promise.resolve();
            }
            egt() {
                const t = this.BQt();
                (async () => {
                    if ((await this.kZn(), await this.OZn(), this.DZn() && !(await this.FZn()))) {
                        const t = HU.ti.Ze.Ke("OK");
                        return void (await t.pr(
                            qU("ui.dialogs.settings.backup-settings.local-backup-folder.need-to-pick-folder"),
                            this.FO()
                        ));
                    }
                    if (t) {
                        const t = HU.ti.Ze.Ke("OK");
                        t.hr(qU("ui.dialogs.settings.restart-notification.caption")),
                            await t.pr(qU("ui.dialogs.settings.restart-notification.message"), this.FO());
                    }
                    this.WD(), self.app.Cmn("settingschange");
                })();
            }
            JLt() {
                this.egt();
            }
            Cz() {
                this.NJn.removeEventListener("input", this.bZn),
                    this.TJn.removeEventListener("change", this.mZn),
                    this.WJn.removeEventListener("change", this.gZn);
            }
            SZn() {
                HU.ti.CT(this.TJn, "disabled", this._Jn.checked),
                    HU.ti.CT(this.Jmt("iconColorLabel"), "disabled", this._Jn.checked);
            }
            xZn() {
                const t = !this.PJn.checked;
                HU.ti.CT(this.GJn, "disabled", t),
                    HU.ti.CT(this.AJn, "disabled", t),
                    HU.ti.CT(this.Jmt("autosaveLocationLabel"), "disabled", t),
                    HU.ti.CT(this.Jmt("autosaveDurationLabel"), "disabled", t),
                    this.RJn();
            }
            vZn() {
                HU.ti.CT(this.jJn, "disabled", !this.NJn.checked);
            }
            DZn() {
                return (
                    this.PJn.checked && HU.Y$.bue && ("MATCH" === this.AJn.value || "WEBFS FOLDER" === this.AJn.value)
                );
            }
            RJn() {
                this.kJn.style.display = this.DZn() ? "" : "none";
            }
            async FZn() {
                try {
                    return await localforage.getItem("local-backup-folder");
                } catch (t) {
                    return (() => {})("Error loading backup folder handle: ", t), null;
                }
            }
            async IZn() {
                if (!HU.Y$.bue) return;
                const t = await this.FZn();
                this.OJn.textContent = t
                    ? t.name
                    : qU("ui.dialogs.settings.backup-settings.local-backup-folder.none-chosen");
            }
            async FJn() {
                self.assert(HU.Y$.bue, "WebFS not supported");
                let t = null;
                try {
                    t = await window.showDirectoryPicker({ id: "local-backup-folder", mode: "readwrite" });
                } catch (t) {
                    return;
                }
                if (t)
                    try {
                        await localforage.setItem("local-backup-folder", t), (this.OJn.textContent = t.name);
                    } catch (t) {
                        (() => {})("Unable to save local backup folder: ", t);
                    }
            }
            wZn() {
                self.app.$J().iconColor = this.TJn.value;
            }
            async PZn() {
                const t = HU.ti.VW.zXe();
                self.app.Cmn("settingschange"), await t;
            }
            yZn() {
                (self.app.$J().enableUIEffects = !!this.WJn.checked), self.app.Tmn();
            }
            CZn() {
                if ((this.EZn++, this.EZn >= 10 && self.app.zue())) {
                    HU.ti.Ze.Ke("Confirm")
                        .pr({
                            caption: qU("ui.dialogs.settings.developer-mode-confirmation.caption"),
                            message: qU("ui.dialogs.settings.developer-mode-confirmation.message"),
                            jT: qU("common.ok"),
                            vT: qU("common.cancel"),
                        })
                        .then((t) => {
                            null !== t ? (this.Jmt("developerModeWrap").style.display = "") : (this.EZn = 0);
                        });
                }
            }
        });
    HU.ti.SK.zgt.addEventListener("load", () => {
        HU.ti.Ze.Ugt(ZU, QU);
    });
}
{
    const tN = self.t,
        iN = new Map(),
        eN = new Map(),
        sN = new Map();
    window.fj = class extends tN.MV {
        constructor(t, i, e, s, n, r = !0, h = void 0) {
            tN.Et(t, tN.ti.QO), tN.vu(i), tN.vu(e), tN.vu(s), tN.UAe(n, "#document"), super();
            const o = self.app;
            if (
                ((this.LZn = s),
                (this.Yut = !1),
                (this.BZn = !1),
                (this.UZn = !!r),
                (this.Met = () => {
                    (this.Yut = !0), this.Ut();
                }),
                (this.cj = t.fG(i, self.lang(e), this.LZn, h)),
                this.cj.addEventListener("remove", this.Met),
                this.tO(!1),
                this.UZn || this.cj.Y2e(),
                (this.vbi = this.CF()),
                this.UZn && o.Nq(s, this, n),
                iN.has(s))
            )
                throw new Error(`Component already exists with name ${s}`);
            this.UZn && (iN.set(s, this), o.NZn(this.LZn, this)),
                (this.Get = (t) => this.Bet(t)),
                (this.Iet = (t) => this.Uet(t)),
                o.addEventListener("next-tab", this.Get),
                o.addEventListener("previous-tab", this.Iet);
        }
        Ut() {
            const t = self.app;
            this.cj.removeEventListener("remove", this.Met),
                (this.Met = null),
                t.removeEventListener("next-tab", this.Get),
                (this.Get = null),
                t.removeEventListener("previous-tab", this.Iet),
                (this.Iet = null),
                this.UZn && (t.Smn(this.LZn), iN.delete(this.LZn)),
                (this.cj = null),
                (this.LZn = null),
                (this.vbi = null),
                (this.BZn = !0),
                tN.Ut(this);
        }
        QP(t) {
            tN._2();
        }
        Zn() {
            return this.LZn;
        }
        dF() {
            return this.cj;
        }
        s$t() {
            return this.cj.FO();
        }
        jj() {
            return this.cj.jj();
        }
        tO(t) {
            return this.cj.tO(t);
        }
        cO() {
            return this.cj && (this.cj.cO() || this.cj.LW());
        }
        PE() {
            return this.Yut;
        }
        upe() {
            return this.BZn;
        }
        Ist() {
            this.UZn && self.app.NZn(this.LZn, null), this.BZn || this.cj.Ist();
        }
        CF() {
            const t = this.cj.jj();
            return t ? ((this.vbi = t.ownerDocument), this.vbi) : this.vbi;
        }
        Az() {
            return this.CF().defaultView;
        }
        async b3t(t = !0) {
            self.app.Tit() || (await self.app.jpe(t));
        }
        async X0t(t) {
            return await this.b3t(), tN.ti.Ze.Ke(t);
        }
        async jZn(t, i) {
            return (await this.X0t(t)).eD(i);
        }
        async Y0t(t, i) {
            return (await this.X0t(t)).pr(i);
        }
        Bet(t) {
            if (!this.cj.hst()) return;
            if (!this.cj.LW()) return;
            let i = this.cj.zW().UW();
            if (!i) return;
            let e = i.WW(),
                s = i.Srt(e) + 1;
            s >= i.Trt() || i.Ert(s);
        }
        Uet(t) {
            if (!this.cj.hst()) return;
            if (!this.cj.LW()) return;
            let i = this.cj.zW().UW();
            if (!i) return;
            let e = i.WW(),
                s = i.Srt(e) - 1;
            s < 0 || i.Ert(s);
        }
        _Pt(t) {
            tN._2();
        }
        xPt(t) {
            tN._2();
        }
        hPt() {
            const t = this.cj.gzt();
            t && this._Pt(t);
        }
        lPt(t) {
            let i = this.cj.gzt();
            i || (i = {}), (i = this.xPt(i, t)), this.cj.b4i(i);
        }
        static $Zn(t) {
            if (tN.tet(t)) return iN.get(t);
            if (tN.GUt(t)) {
                const i = sN.get(t);
                return iN.get(i);
            }
            if (tN.ca(t, tN.ti.QO.drt)) for (const [i, e] of iN) if (e.dF() === t) return e;
        }
        static jF(t, i) {
            if (eN.has(t)) throw new Error(`Component constructor already exists with name ${t}`);
            eN.set(t, i), sN.set(i, t);
        }
        static l2e(t, i = !1) {
            const e = eN.get(t),
                s = iN.get(t);
            return s || (e ? e.mF(i) : null);
        }
    };
}
{
    const nN = self.t,
        rN = self.assert,
        hN = self.lang,
        oN = self.tG,
        aN = self.iG,
        lN = self.ej,
        uN = 2e3;
    function cN(t) {
        return t.map((t) => String.fromCharCode(t)).join("");
    }
    const dN = {}.toString().substr(4, 1);
    let fN = !1;
    const pN = 6e4,
        mN = [
            ["de-DE", "de"],
            ["en-US", "en"],
            ["fr-FR", "fr"],
            ["hr-HR", "hr"],
            ["hu-HU", "hu"],
            ["ru-RU", "ru"],
            ["cs-CZ", "cs"],
            ["es-ES", "es"],
            ["pt-BR", "pt"],
            ["nl-NL", "nl"],
            ["it-IT", "it"],
            ["sv-SE", "sv"],
            ["tr-TR", "tr"],
            ["uk-UA", "uk"],
            ["zh-CN", ""],
            ["zh-TW", ""],
        ],
        wN = new Set([]),
        gN = [
            ["be-BY", "be", "Belarusian"],
            ["bn-IN", "bn", "Bengali"],
            ["bs-BA", "bs", "Bosnian"],
            ["da-DK", "da", "Danish"],
            ["fil-PH", "fil", "Filipino"],
            ["el-GR", "el", "Greek"],
            ["hi-IN", "hi", "Hindi"],
            ["id-ID", "id", "Indonesian"],
            ["ja-JP", "ja", "Japanese"],
            ["ko-KR", "ko", "Korean"],
            ["ms-MY", "ms", "Malay"],
            ["pa-IN", "pa", "Punjabi"],
            ["pl-PL", "pl", "Polish"],
            ["ro-RO", "ro", "Romanian"],
            ["sr-RS", "sr", "Serbian"],
            ["sh", "sh", "Serbo-Croatian"],
            ["sl-SI", "sl", "Slovenian"],
            ["th-TH", "th", "Thai"],
            ["vi-VN", "vi", "Vietnamese"],
        ],
        yN = { isZipFormat: !0, toLayoutView: !0 },
        bN = { duplicate: !1, Chi: !1, zZn: !1, fileHandle: null, JRt: "(unknown)", jRt: !0 },
        vN = { showNotification: !0, VZn: !1, KJt: !1 },
        SN = cN([102, 114]) + dN + dN;
    let xN = null,
        MN = "games",
        EN = null,
        CN = "personal",
        _N = "",
        TN = !1,
        IN = -1,
        PN = !1,
        GN = "",
        AN = -1,
        RN = !1,
        kN = !1,
        ON = 25,
        DN = 2,
        FN = 2,
        LN = 1,
        BN = !1,
        UN = null;
    const NN = 6048e5,
        jN = 9e5;
    function $N() {
        EN.WZn();
    }
    function zN(t) {
        return Math.floor(Math.random() * t);
    }
    const VN = new Set(["free", "personal", "educational", "gamejam", "startupbusiness", "business"]);
    async function WN(t) {
        if (!t.verificationHash || !t.verificationDate) return !1;
        const i = t.verificationHash,
            e = t.verificationDate.toUpperCase().trim(),
            s = t.type.toUpperCase().trim(),
            n = Date.parse(e),
            r = Date.now(),
            h = Math.floor(3024e5);
        if (n < r - h || n > r + h) return !1;
        let o = cN([97, 118, 88, 84, 82, 51, 66, 77, 55, 75, 112, 117, 88, 66, 51, 115]),
            a = cN([99, 74, 70, 74, 101, 72, 119, 68, 89, 72, 108, 55, 108, 112, 77, 103]);
        s.length > 4 && (o += [...e].reduce((t, i) => t + ("5" === i ? 1 : 0), 0)),
            [...e].reduce((t, i) => t + ("0" === i ? 1 : 0), 0) > 6 && ((a += o.substring(0, 3)), (o = "_" + o));
        let l = 0;
        for (const t of e) {
            const i = Number(t);
            isFinite(i) && (l += i);
        }
        l % 3 == 0 && (a = a.substring(0, 5));
        const u = (o + "A" + e + "A" + s + "" + a).normalize(),
            c = await nN.Crypto.Zes(u);
        return i.toLowerCase() === c.toLowerCase();
    }
    async function HN(t) {
        if ((nN.oN(t), t && !VN.has(t.type) && (t.type = SN), !TN || !t || t.type !== SN)) {
            if (((PN = !1), (GN = ""), t)) {
                const i = t.type;
                if (await WN(t)) {
                    CN = t.type;
                    const e = CN === SN;
                    (_N = t.hash),
                        (RN = !!t.scriptingEnabled && !e),
                        (kN = !!t.canShareProject),
                        (TN = !!t.isAccessCode),
                        (BN = !!t.gamejamLicenseAvailable),
                        e
                            ? ("number" == typeof t.maxEvents && (ON = Math.min(t.maxEvents, 200)),
                              "number" == typeof t.maxLayers && (DN = Math.min(t.maxLayers, 10)),
                              "number" == typeof t.maxEffects && (FN = Math.min(t.maxEffects, 10)),
                              "number" == typeof t.maxWebFonts && (LN = Math.min(t.maxWebFonts, 5)))
                            : (ON = DN = FN = LN = 1 / 0),
                        (IN = t.expires ? t.expires : -1),
                        BN && t.hasOwnProperty("activeGamejamLicense")
                            ? ((UN = t.activeGamejamLicense),
                              "gamejam" === CN && -1 === IN && UN.hasOwnProperty("endTime") && (IN = UN.endTime))
                            : (UN = null),
                        t.suspended && ((PN = !0), (GN = t.suspensionReason || "unknown")),
                        i !== CN && (t = null);
                } else t = null;
            }
            (!t || PN || (!nN.Kyt.Pqe() && "function" == typeof self[cN([114, 101, 113, 117, 105, 114, 101])])) &&
                ((CN = SN),
                (_N = ""),
                (RN = !1),
                (kN = !1),
                (TN = !1),
                (IN = -1),
                (ON = 25),
                (DN = 2),
                (FN = 2),
                (LN = 1),
                (BN = !1),
                (UN = null)),
                TN
                    ? -1 === AN && (AN = window.setInterval($N, jN))
                    : -1 !== AN && (window.clearInterval(AN), (AN = -1)),
                self.app.HZn(),
                CN = "personal"
        }
    }
    async function KN(t, i) {
        const e = zN(86400),
            s = zN(NN),
            n = RN ? 22 : zN(14),
            r = zN(1e8),
            h = zN(365);
        if (TN || PN) return;
        if ("gamejam" === CN) return;
        const o = Date.now();
        let a = o + NN;
        if (IN > 0) {
            const t = 1e3 * IN;
            t < a && (a = t);
        }
        let l = DN * FN * LN;
        isFinite(l) || (l = ".");
        let u = ON;
        isFinite(u) || (u = ".");
        const c =
                "." +
                (r + i) +
                t +
                l +
                [...(h + nN.ON.x8s).toString()].reverse().join("") +
                "." +
                u +
                s +
                CN +
                n +
                Math.floor(o / 14 + a / 14 - s) +
                "203042",
            d = await nN.Crypto.Zes(c);
        localforage.removeItem(","),
            localforage
                .setItem(".", [h, DN, s, t, e, FN, o, i, n, CN, r, a, ON, nN.ON.x8s, LN, d])
                .catch((t) => self.app.cme(t));
    }
    async function qN(t) {
        const i = [localforage.removeItem("."), localforage.removeItem(",")];
        if (t) {
            const t = nN.ti.Ze.Ke("OK");
            i.push(t.pr(hN("ui.offline-login-expired")));
        }
        return await Promise.all(i), null;
    }
    async function XN() {
        const t = await localforage.getItem(".");
        if (!t) return null;
        if (EN.BDt()) return null;
        let i = t[0],
            e = t[1],
            s = t[2],
            n = t[3],
            r = (t[4], t[5]),
            h = t[6],
            o = t[7],
            a = t[8],
            l = t[9],
            u = t[10],
            c = t[11],
            d = t[12],
            f = t[13],
            p = t[14],
            m = t[15],
            w = e * r * p;
        isFinite(w) || (w = ".");
        let g = d;
        isFinite(g) || (g = ".");
        const y =
                "." +
                (u + o) +
                n +
                w +
                [...(i + nN.ON.x8s).toString()].reverse().join("") +
                "." +
                g +
                s +
                l +
                a +
                Math.floor(h / 14 + c / 14 - s) +
                "203042",
            b = await Promise.all([nN.Crypto.Zes(y), localforage.getItem(",")]);
        if (EN.BDt()) return null;
        const v = b[0],
            S = b[1];
        if (v !== m) return qN(!1);
        const x = Date.now();
        if ("number" == typeof S && S > x) return qN(!1);
        if ((localforage.setItem(",", x).catch((t) => self.app.cme(t)), x < h)) return qN(!1);
        if (x > c) return qN(!0);
        if (nN.ON.x8s !== f) return qN(!1);
        CN = l;
        return (
            (_N = ""),
            (TN = !1),
            (RN = 22 === a),
            CN === SN ? ((ON = d), (DN = e), (FN = r), (LN = p)) : (ON = DN = FN = LN = 1 / 0),
            (IN = Math.floor(c / 1e3)),
            self.app.HZn(),
            { username: n, KZn: o }
        );
    }
    let YN = null;
    (window.qZn = class extends nN.CJe {
        constructor() {
            if (
                (super(),
                (this.Gqt = "animation" === MN ? "Construct Animate" : "Construct 3"),
                nN.ON.kDn(MN),
                (this.XZn = null),
                (this.wJ = null),
                (this.mln = null),
                (this.hue = null),
                (this.YZn = null),
                (this.bG = null),
                (this.HAt = null),
                (this.iot = null),
                (this.JZn = null),
                (this.ZZn = null),
                (this.QZn = null),
                (this.tQn = null),
                (this.iQn = null),
                (this.I3t = null),
                (this.eQn = null),
                (this.sQn = null),
                (this.nQn = null),
                (this.rQn = null),
                (this.hQn = null),
                (this.oQn = null),
                (this.aQn = null),
                (this.lQn = null),
                (this.uQn = null),
                (this.cQn = null),
                (this.dQn = null),
                (this.fQn = null),
                (this.pQn = !1),
                (this.mQn = !1),
                (this.HNs = null),
                (this.wQn = null),
                (this.gQn = nN.m(nN.kj, () => this.yQn(), uN)),
                (this.bQn = []),
                (this.Nj = null),
                (this.vQn = null),
                (this.SQn = new Promise((t) => (this.vQn = t))),
                (this.xQn = !1),
                (this._a = nN.m(
                    nN.Ha,
                    nN.Xa.Wa(this, "undo", () => this.gjt()),
                    nN.Xa.Wa(this, "redo", () => this.mjt()),
                    nN.Xa.Wa(this, "settingschange", () => this.Gan()),
                    nN.Xa.Wa(window, "hashchange", (t) => this.MQn(t))
                )),
                (this.EQn = null),
                (this.CQn = null),
                (this._Qn = null),
                (this.TQn = null),
                (this.IQn = null),
                (this.PQn = null),
                (this.GQn = self.devicePixelRatio),
                (this.AQn = !1),
                (this.RQn = !1),
                (this.kQn = 1),
                (this.OQn = !1),
                (this.DQn = -1),
                (this.FQn = !1),
                (this.LQn = 0),
                (this.BQn = !1),
                (this.UQn = 0),
                (this.NQn = 0),
                (this.jQn = !1),
                (this.$Qn = new Set()),
                (this.zQn = nN.m(nN.BWe, () => this.vzn(), pN, { enabled: !1, LWe: !0 })),
                (this.VQn = nN.m(nN.BWe, () => this.WQn(), 72e5, { enabled: !1, LWe: !0 })),
                (this.HQn = !1),
                (this.KQn = !1),
                (this.qQn = []),
                (this.XQn = null),
                this.lpn ||
                    (window.C3_SetBeforeInstallPromptCallback((t) => this.YQn(t)),
                    window.C3_SetAppInstalledCallback((t) => this.JQn(t))),
                nN.GUt(window.ClaimAnalyticsSandbox) &&
                    (window.ClaimAnalyticsSandbox((t) => {
                        xN = t.securePostMessage;
                    }),
                    (window.C3_LogAnalyticsEvent = (...t) => this.P7s(...t))),
                this.lpn || window.addEventListener("beforeunload", (t) => this.ZQn(t)),
                "iOS" === nN.fk.OS)
            ) {
                let t = 0;
                document.addEventListener(
                    "touchend",
                    (i) => {
                        const e = Date.now();
                        e - t <= 500 && i.preventDefault(), (t = e);
                    },
                    !0
                );
            }
            document.addEventListener("gesturestart", nN.ti.uJt),
                document.addEventListener("gesturechange", nN.ti.uJt),
                document.addEventListener("gestureend", nN.ti.uJt),
                document.addEventListener("MSGestureStart", nN.ti.uJt),
                document.addEventListener("MSGestureChange", nN.ti.uJt),
                document.addEventListener("MSGestureEnd", nN.ti.uJt),
                document.addEventListener(
                    "touchmove",
                    (t) => {
                        "number" == typeof t.scale && 1 !== t.scale && t.preventDefault();
                    },
                    !1
                ),
                (YN = this);
        }
        async gYt(t) {
            if (
                (nN.ZJ("AppLoad"),
                !nN.C7s() &&
                    nN.E4s.ZRs("testanimationmode") &&
                    ((MN = "animation"), (this.Gqt = "Construct Animate"), nN.ON.kDn(MN), this.X7s()),
                (this.PQn = new nN.ti.opn(this)),
                this.PQn.cpn(self.QQn),
                this.lpn)
            )
                return Promise.resolve(!0);
            window.addEventListener("resize", () => this.lgi()), nN.Roe.ZAt(!0);
            const i = nN.ti.OF.PF("wait", document);
            this.Gmn();
            const e = nN.Aue.S$n(this);
            await Promise.all(nN.qTe()), await nN.ti.SK.EJe(this), this.t0n(), await t.i0n, await e;
            const s = nN.Aue.lzn();
            await nN.u.gYt(),
                await this.ymn(),
                (EN = this.vst("useraccount")),
                await this.e0n(),
                await EN.s0n(HN, KN, XN),
                await this.n0n(),
                await s,
                await this.gmn(),
                nN.Aue.$$n(),
                nN.Roe.ZAt(!1),
                nN.ti.OF.kF(i),
                window.addEventListener("dragover", (t) => t.preventDefault()),
                window.addEventListener("drop", (t) => {
                    t.preventDefault(), this.ngt(t);
                }),
                nN.dq("AppLoad");
        }
        r0n(t, i, e = !1) {
            nN.vu(t);
            const s = t.toLowerCase();
            for (const t of i) {
                const i = t[0],
                    n = i.toLowerCase(),
                    r = t[1].toLowerCase(),
                    h = e ? t[2] : i;
                if (s.startsWith(n)) return h;
                if (r && r === s) return h;
            }
            return null;
        }
        h0n() {
            const t = navigator.languages || [navigator.language];
            for (const i of t) {
                const t = this.r0n(i, mN);
                if (t) return t;
            }
            return "en-US";
        }
        o0n() {
            const t = navigator.languages || [navigator.language];
            for (const i of t) {
                if (this.r0n(i, mN)) return "";
                const t = this.r0n(i, gN, !0);
                if (t) return t;
            }
            return "";
        }
        xmn() {
            return {
                language: this.h0n(),
                uiMode: "auto",
                useSimplifiedMode: !1,
                enableExampleBrowser: !0,
                theme: window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "",
                useDefaultIconColor: !0,
                iconColor: "#000000",
                enableUIAnimations: !window.matchMedia("(prefers-reduced-motion: reduce)").matches,
                enableUIEffects: !0,
                enableNotifications: !0,
                showTakeBreakReminders: !0,
                zoomMouseWheelOnly: !1,
                useFakeClipboard: !1,
                experimentalFeatures: !1,
                developerMode: !1,
                showInProgressLanguages: !1,
                defaultSaveLocation: nN.Y$.bue ? "save-as" : "cloud",
                textEditorFontSize: 12,
                textEditorAutoIndent: !0,
                textEditorEnableMinimap: !0,
                textEditorMinimapScale: 1,
                textEditorEnableStickyScrolling: !0,
                textEditorEnableCodeFolding: !0,
                textEditorEnableWordWrap: !0,
                autoSave: !1,
                autosaveDuration: 10,
                autosaveLocation: "MATCH",
                cloudCache: !0,
                limitToWebGL1: !1,
                enableWebGPUInEditor: "auto",
                updateChannel: "stable",
                checkForAddonUpdates: !0,
                gpuPowerPreference: "default",
                previewMode: "popup-window",
                hideAddActionRows: !1,
                translateExpressions: !0,
                showStartPageOnStartup: !0,
                autoHideStartPage: !1,
                showStartPageMessageBanners: !0,
                defaultProjectAuthor: "",
                defaultProjectEmail: "",
                defaultProjectWebsite: "",
                defaultAnimationSpeed: 5,
            };
        }
        async Mmn() {
            const t = await super.Mmn();
            "boolean" == typeof t.enableWebGPUInEditor &&
                (t.enableWebGPUInEditor = t.enableWebGPUInEditor ? "yes" : "auto"),
                document.documentElement.setAttribute("lang", this.Lmt()),
                this.a0n();
        }
        Gan() {
            this.a0n();
            const t = this.l0n();
            t !== this.VQn.KWe() && (t ? this.VQn.BV() : this.VQn.XFs());
        }
        p8e() {
            const t = this.$J();
            return t.useDefaultIconColor ? nN.ti.VW.$Xe() : t.iconColor;
        }
        Cbt() {
            return nN.Y$.NRe && !!this.$J().enableUIAnimations && !nN.E4s.ZRs("disable-ui-animations");
        }
        a0n() {
            const t = document.body.parentElement,
                i = this.Cbt() ? "uianimationsenabled" : "uianimationsdisabled",
                e = this.Cbt() ? "uianimationsdisabled" : "uianimationsenabled";
            t.removeAttribute(e), t.setAttribute(i, "");
        }
        l0n() {
            return !!this.$J().showTakeBreakReminders;
        }
        zQ() {
            return !!this.$J().enableUIEffects;
        }
        nmn() {
            return !!this.$J().enableNotifications;
        }
        tF() {
            return !!this.$J().useFakeClipboard;
        }
        Hue() {
            return "animation" !== MN && !!this.$J().developerMode;
        }
        MBn() {
            return !!this.$J().experimentalFeatures;
        }
        sO() {
            return !!this.$J().useSimplifiedMode && !this.Skt();
        }
        Lmt() {
            let t = this.$J().language;
            return t.startsWith("synthetic-") && (t = "en-US"), t;
        }
        XXs() {
            return this.$J().translateExpressions;
        }
        u0n() {
            return "animation" === MN ? nN.ti.QO.LDn.NDn : nN.ti.QO.LDn.BDn;
        }
        c0n() {
            if (nN.fk.ZP) this.wQn = null;
            else {
                const t = this.XZn.L2e();
                !(t && t[0]) || nN.E4s.ZRs("default-layout") || t[0].devicePixelRatio !== window.devicePixelRatio
                    ? (this.wQn = this.u0n())
                    : (this.wQn = t);
            }
        }
        SF() {
            return !!this.wQn;
        }
        GZn() {
            this.XZn.q2e();
        }
        wde() {
            this.gQn.uE();
        }
        yQn() {
            if (((this.wQn = null), !this.wue().snt()))
                try {
                    this.XZn && this.pQn && !nN.fk.ZP && this.XZn.X2e();
                } catch (t) {
                    console.error("Error saving UI state: ", t);
                }
        }
        async e0n(t = !1) {
            const i = this.wQn;
            if (i) {
                nN.E4s.ZRs("log-pane") && console.info("Rebuilding with layout", JSON.stringify(i, null, 4));
                try {
                    nN.ti.QO.t2e(i);
                    const t = JSON.parse(JSON.stringify(i));
                    nN.ti.QO.r2e(t, this.XZn);
                } catch (e) {
                    if (((() => {})("Failed to restore layout", JSON.stringify(i)), console.error(e), t)) throw e;
                    (this.wQn = this.u0n()), this.e0n(!0);
                }
            }
            this.pQn = !0;
        }
        h4e() {
            this.wde();
        }
        t0n() {
            const t = cN([108, 111, 99, 97, 116, 105, 111, 110]),
                i = cN([104, 111, 115, 116, 110, 97, 109, 101]),
                e = self[t][i],
                s = cN([
                    101, 100, 105, 116, 111, 114, 46, 99, 111, 110, 115, 116, 114, 117, 99, 116, 46, 110, 101, 116,
                ]),
                n = cN([
                    101, 100, 105, 116, 111, 114, 46, 99, 111, 110, 115, 116, 114, 117, 99, 116, 100, 101, 118, 46, 110,
                    101, 116,
                ]),
                r = cN([
                    97, 110, 105, 109, 97, 116, 101, 46, 99, 111, 110, 115, 116, 114, 117, 99, 116, 46, 110, 101, 116,
                ]),
                h = cN([
                    97, 110, 105, 109, 97, 116, 101, 46, 99, 111, 110, 115, 116, 114, 117, 99, 116, 100, 101, 118, 46,
                    110, 101, 116,
                ]),
                o = "games" === MN ? e === s || e === n : e === r || e === h,
                a = e === cN([108, 111, 99, 97, 108, 104, 111, 115, 116]),
                l = location.port,
                u = parseInt(l, 10),
                c = (o && !l) || (a && (!nN.C7s() || (u >= 61e3 && u <= 61005)));
            this.wmn(),
                (this.XZn = this.omn.n1e("1fr", "Main area", "main")),
                this.XZn.tQt("main"),
                this.omn.gl(),
                this.c0n(),
                (this.mln = nN.m(nN.ti.Tj.rln)),
                nN.u.o("ui.status-indicators"),
                (this.EQn = new nN.ti.Tj.pln(this.mln, hN(".building-spritesheets"))),
                (this.CQn = new nN.ti.Tj.pln(this.mln, hN(".rendering-spritesheets"))),
                (this._Qn = new nN.ti.Tj.pln(this.mln, hN(".compressing-spritesheets"))),
                (this.TQn = new nN.ti.Tj.pln(this.mln, hN(".creating-textures"))),
                (this.IQn = new nN.ti.Tj.pln(this.mln, hN(".loading-fonts"))),
                nN.u.it(),
                c && self === self.top && (this.XZn.s1e(!0), (this.wJ = this.XZn.O1e("middle", !0)));
        }
        async n0n() {
            this.wJ.gl(),
                (this.hue = this.vst("mainMenu")),
                (this.YZn = this.vst("midPane")),
                (this.QZn = this.vst("propertiesBar")),
                (this.tQn = this.vst("projectBar")),
                (this.iQn = this.vst("layersBar")),
                (this.I3t = this.vst("tilemapBar")),
                (this.aQn = this.vst("startPage2")),
                (this.lQn = this.vst("exampleBrowser")),
                (this.uQn = this.vst("buyNowPage")),
                (this.cQn = this.vst("guidedtourcontroller")),
                (this.dQn = this.vst("remotePreviewBar")),
                (this.fQn = this.vst("assetBrowserBar")),
                nN.vF.addEventListener("registercomponent", (t) => {
                    this.NZn(t.component.JD(), t.component.WZ());
                }),
                nN.vF.addEventListener("unregistercomponent", (t) => {
                    this.NZn(t.component.JD(), null);
                }),
                this.XZn.addEventListener("replacesubgrid", (t) => {
                    this.wJ = t.H2e;
                }),
                await this.bmn();
        }
        F4e() {
            return this.mQn;
        }
        async Imn(t) {
            const i = self.app;
            if (this.lpn) return;
            (this.mQn = !0),
                (self.FOe = new self.EHe()),
                "Safari" === nN.fk.$s && self.FOe.xPi(),
                (this.GQn = self.devicePixelRatio),
                nN.C7s() &&
                    !this.Hue() &&
                    (nN.u.o("ui.console-warning"),
                    console.log(
                        "%c" + hN(".title"),
                        "color: red; font-size: 4em; font-weight: bold; -webkit-text-stroke: 1px black"
                    ),
                    console.log("%c" + hN(".message"), "font-size: 2em;"),
                    console.log("%c" + hN(".message2"), "font-size: 2em; font-weight: bold;"),
                    nN.u.it());
            const e = performance.now();
            nN.fDt && console.info(`[Perf] Startup time: ${Math.round(10 * e) / 10} ms`),
                this.zQn.BV(),
                this.l0n() && this.VQn.BV();
            const s = super.Imn();
            window.OfflineClientInfo && window.OfflineClientInfo.SetMessageCallback((t, i) => this.d0n(t, i)),
                this.f0n(t, s).catch((t) => window.C3_OnAppFatalLoadError(t)),
                "en-US" !== this.$J().language && this.X7s();
            const n = await Promise.all([
                    localforage.getItem("c3-done-first-run"),
                    localforage.getItem("c3-last-release"),
                    localforage.getItem("c3-launch-count"),
                ]),
                r = n[0],
                h = n[1];
            (this.kQn = n[2] || 1),
                localforage.setItem("c3-launch-count", this.kQn + 1).catch((t) => i.cme(t)),
                (this.RQn = !r || nN.E4s.ZRs("firstrun"));
            const o = !this.RQn && h && h < nN.ON.x8s,
                a = this.RQn ? "cold" : o ? "update-cold" : "warm";
            if ((this.p0n("StartUp", e, a), nN.Xr)) return this.YZn.Zet(!1), void this.m0n();
            if (wN.has(this.$J().language)) {
                const t = this.$J().language;
                this.P7s("LanguageUnderReviewPrompt", { event_label: "Shown", lang_tag: t }),
                    nN.u.o("ui.language-under-review-prompt");
                const e = nN.ti.Ze.Ke("Confirm").pr({
                    message: lN(".message", nN.u.zje()),
                    jT: lN(".continue", nN.u.zje()),
                    vT: hN(".switch-to-english"),
                    RQe: !0,
                });
                nN.u.it();
                null === (await e)
                    ? (this.P7s("LanguageUnderReviewPrompt", { event_label: "SwitchToEnglish", lang_tag: t }),
                      (this.$J().language = "en-US"),
                      await i.y6i(),
                      await nN.STi(100),
                      location.reload())
                    : this.P7s("LanguageUnderReviewPrompt", { event_label: "Confirmed", lang_tag: t });
            }
            if (this.Sue() && (this.RQn || nN.E4s.ZRs("startTour"))) {
                const t = nN.ti.Ze.Ke("WelcomeTour");
                await t.pr();
            }
            if (o) {
                try {
                    await localforage.setItem("c3-last-release", nN.ON.x8s);
                } catch (t) {
                    this.cme(t);
                }
                if (!this.Skt()) {
                    nN.u.o("ui.update-notification");
                    const t = nN.ti.Ze.Ke("Confirm");
                    t.OOe = () => this.SN(nN.ON.URL.LSe + nN.ON.URL.bDn + nN.ON.FDn, "ReleaseNotes");
                    const i = t.pr({
                        caption: hN(".caption"),
                        message: oN(".message", nN.uhi(h), nN.uhi(nN.ON.x8s)),
                        jT: hN(".view-release-notes"),
                        vT: hN(".not-now"),
                    });
                    nN.u.it(), await i;
                }
            } else if (!h)
                try {
                    await localforage.setItem("c3-last-release", nN.ON.x8s);
                } catch (t) {
                    this.cme(t);
                }
            if (
                (this.PWn()
                    ? localforage.setItem("c3-last-beta-release", nN.ON.FDn).catch((t) => this.cme(t))
                    : this.w0n() && localforage.setItem("c3-last-lts-release", nN.ON.FDn).catch((t) => this.cme(t)),
                nN.C7s() && "iOS" === nN.fk.OS && "Safari" === nN.fk.$s && "browser" === nN._Oe() && !this.Skt())
            ) {
                nN.u.o("ui.safari-a2hs-prompt");
                const t = nN.ti.Ze.Ke("OK");
                t.hr(hN(".title"));
                const i = t.pr(self.Hpt(".message"));
                nN.u.it(), await i;
            }
            if (
                nN.fk.ZP &&
                "browser" === nN.fk.Pue &&
                !nN.Due() &&
                nN.Y$.Vue &&
                window.matchMedia("(max-width: 500px), (max-height: 500px)").matches &&
                !this.Skt()
            ) {
                const t = nN.ti.Ze.Ke("FullscreenPrompt");
                await t.pr(document.body);
            }
            this.RQn && localforage.setItem("c3-done-first-run", !0).catch((t) => this.cme(t)),
                this.$J().showStartPageOnStartup && this.aQn.eD(),
                nN.IRe.ZRs("open-example-browser") && this.ort() && (this.lQn.eD(), nN.IRe.CRe()),
                this.YZn.Zet(!1),
                window.launchQueue &&
                    window.LaunchParams &&
                    "files" in window.LaunchParams.prototype &&
                    nN.Y$.bue &&
                    window.launchQueue.setConsumer(async (t) => {
                        if (1 !== t.files.length) return;
                        const i = t.files[0],
                            e = i.name;
                        if (e.toLowerCase().endsWith(".c3p"))
                            try {
                                const t = await i.getFile(),
                                    s = await this.ZRt(t, { JRt: "webfs-launch-queue" });
                                if (!nN.ca(s, self.Ga)) return;
                                s.r7s(e), await s.n7s("webfs-single-file", { fileHandle: i });
                            } catch (t) {
                                (() => {})("Failed to open file from launch queue: ", t);
                            }
                    }),
                await this.vst("useraccount").bst(),
                this.XB() && this.uQn.eD(!1),
                this.Skt() || (await this.g0n(), await this.y0n(), await this.b0n(), this.v0n()),
                this.S0n();
        }
        async f0n(t, i) {
            nN.ZJ("StartupBackgroundLoading");
            const e = self.app;
            let s = 0;
            const n = (t, i) => this.p0n("BackgroundLoad", performance.now() - i, t);
            let r = e.Oke(hN("ui.loading-screen.still-loading"));
            r.eD(), this.x0n(t).catch((t) => window.C3_OnAppFatalLoadError(t));
            const h = this.lQn.M0n();
            await Promise.all([i, this.SQn]),
                r.Ut(),
                await h,
                "Android" === nN.fk.OS && (nN.HHe.Oat(), nN.HHe.BD(() => this.E0n())),
                await Promise.all([nN.xis.gYt(), this.lQn.C0n()]),
                await nN.Roe(async () => {
                    if (!this.bG.Vn()) {
                        s = performance.now();
                        try {
                            await this.hC();
                        } catch (t) {}
                        n("CreateWebGLRenderer", s);
                    }
                }),
                (r = e.Oke(hN("ui.loading-screen.loading-icons"))),
                r.eD(),
                (s = performance.now()),
                await this.Pmn(),
                n("PrefetchAllIcons", s),
                r.In(hN("ui.loading-screen.loading-addons")),
                (s = performance.now()),
                await this.I7s(),
                n("PreloadAllAddons", s),
                r.In(hN("ui.loading-screen.loading-addon-events")),
                (s = performance.now()),
                await nN.Aue.hzn(),
                n("PreParseDisplayTexts", s),
                r.Ut(),
                this.p0n("StartUp", performance.now(), "AllBackgroundLoadingDone"),
                nN.dq("StartupBackgroundLoading"),
                this._0n(),
                nN.ti.Tj.Dqn.Wqn();
        }
        async x0n(t) {
            if (this.lpn) return;
            nN.ZJ("BackgroundLoadProjectResources");
            const i = nN.pRt.gYt(),
                e = nN.Tmt.Yc(),
                s = new nN.mDe("BLPR-ProjectResourcesImport");
            await nN.mPe("projectResources.html", !0),
                s.next("BLPR-ComponentImports"),
                await Promise.all([...t.T0n.values()].map((t) => nN.mPe(t, !1))),
                s.next("BLPR-LoadAddons"),
                await Promise.all([nN.Aue.E$n(), nN.Aue.gYt(), nN.ehs.gYt()]),
                s.next("BLPR-LoadLang1"),
                await nN.u.gYt(),
                s.next("BLPR-AddonsReady"),
                await Promise.all([nN.Aue._$n(), nN.Nt.fjt(this), nN.xf.fjt(this), nN.ehs.fjt(this)]),
                s.next("BLPR-WaitForJobScheduler"),
                await Promise.all([i, e]),
                s.next("BLPR-LoadLang2"),
                await nN.u.gYt(),
                s.next("BLPR-LoadComponents"),
                await this.ymn(),
                s.next("BLPR-AfterLoadComponents"),
                (this.bG = this.vst("layoutViewManager")),
                (this.HAt = this.vst("eventSheetViewManager")),
                (this.iot = this.vst("flowchartViewManager")),
                (this.JZn = this.vst("textEditorManager")),
                (this.ZZn = this.vst("dataEditorManager")),
                await this.bmn(),
                this.dispatchEvent(new nN.Event("allcomponentsloaded")),
                s.next("BLPR-LoadDialogs"),
                await Promise.all([nN.ti.SK.EJe(this), nN.Aue.uzn()]),
                (this.xQn = !0),
                this.p0n("StartUp", performance.now(), "ProjectResourcesLoadingDone"),
                s.end(),
                this.vQn(),
                (this.vQn = null),
                nN.dq("BackgroundLoadProjectResources");
        }
        async jpe(t) {
            let i = null;
            t && !this.xQn && ((i = nN.ti.Ze.Ke("Progress")), i.pr(hN("ui.loading-screen.still-loading"))),
                await this.SQn,
                i && i.WD();
        }
        Tit() {
            return this.xQn;
        }
        async _0n() {
            if (nN.C7s() && nN.ON.uDn && navigator.serviceWorker)
                try {
                    const t = await navigator.serviceWorker.register("sw.js");
                    console.log("Registered service worker on " + t.scope);
                } catch (t) {
                    console.error("Failed to register service worker: ", t);
                }
        }
        I0n() {
            if (this.KQn) return;
            this.KQn = !0;
            let t = document.createElement("iframe");
            const i = "https://preview.construct.net/local.html",
                e = new URL(i).origin,
                s = () => {
                    t && (t.parentElement.removeChild(t), (t = null));
                };
            t.addEventListener("load", () => {
                try {
                    t.contentWindow.postMessage({ type: "register-sw" }, e);
                } catch (t) {
                    s();
                }
            }),
                t.addEventListener("error", s),
                (t.style.display = "none"),
                (t.src = i),
                document.body.appendChild(t),
                window.setTimeout(s, 5e3);
        }
        d0n(t, i) {
            const e = t.data;
            "root" === i ? this.P0n(e) : "main" === i ? this.G0n(e) : (() => {})("Unknown broadcast source: ", i);
        }
        P0n(t) {
            switch (t.type) {
                case "downloading":
                    this.I0n();
                    break;
                case "update-pending":
                    this.A0n();
                    break;
                case "update-ready":
                    this.R0n(t.version);
            }
        }
        G0n(t) {
            switch (t.type) {
                case "downloading":
                    this.I0n();
                    break;
                case "offline-ready":
                    this.k0n();
            }
        }
        A0n() {
            nN.u.o("ui.update-alerts.update-pending"),
                nN.ti.Notification.XO("download", hN(".title"), hN(".message"), { align: "bottom-left", bjt: 1e4 }),
                nN.u.it();
        }
        R0n(t) {
            this.p0n("UpdateAvailable", performance.now() - 3e3),
                t > nN.ON.x8s && (this.DQn = t),
                this.FQn && (this.Jrt() > 0 || nN.ti.SK._K() ? this.O0n() : this.D0n());
        }
        k0n() {
            this.p0n("OfflineCached", performance.now() - 3e3, this.RQn ? "FirstRun" : "NotFirstRun", 6e5),
                nN.u.o("ui.update-alerts.offline-ready"),
                nN.ti.Notification.XO("download", hN(".title"), hN(".message"), { align: "bottom-left", bjt: 8e3 }),
                nN.u.it();
        }
        y0n() {
            return (
                rN(!this.FQn, "should only be called once"),
                (this.FQn = !0),
                this.F0n(this.$J().updateChannel),
                this.DQn >= 0 ? this.D0n() : Promise.resolve()
            );
        }
        D0n() {
            if (this.DQn < 0) return Promise.resolve();
            const t = nN.ti.Ze.Ke("Confirm");
            nN.u.o("ui.update-alerts.update-available-prompt"), (t.OOe = () => location.reload(!0));
            const i = t.pr({
                caption: hN(".title"),
                message: oN(".message", nN.ON.fhi, nN.uhi(this.DQn)),
                jT: hN(".update"),
                vT: hN(".not-now"),
            });
            return nN.u.it(), i;
        }
        O0n() {
            this.DQn < 0 ||
                (nN.u.o("ui.update-alerts.update-available-notification"),
                nN.ti.Notification.XO("download", hN(".title"), hN(".message"), { align: "bottom-left", bjt: 1e4 }),
                nN.u.it());
        }
        async b0n() {
            if (!nN.Y$.XRe) return;
            let t, i, e;
            try {
                const s = await navigator.storage.estimate();
                if (((t = s.quota), (i = s.usage), (e = Math.min(Math.round((100 * i) / t), 100)), e < 90)) return;
            } catch (t) {
                return void (() => {})("Error estimating storage usage: ", t);
            }
            this.P7s("StorageQuotaFullPrompt", "Shown"), nN.u.o("ui.storage-quota-full-prompt");
            const s = nN.ti.Ze.Ke("Confirm").pr({
                caption: hN(".caption"),
                message: oN(".message", e, nN.nbe(i), nN.nbe(t)),
                jT: hN(".storage-cleanup"),
            });
            nN.u.it();
            if (null === (await s)) return void this.P7s("StorageQuotaFullPrompt", "Cancelled");
            this.P7s("StorageQuotaFullPrompt", "OK-StorageCleanup");
            nN.ti.Ze.Ke("StorageCleanup").pr();
        }
        S0n() {
            this.sO() &&
                (nN.u.o("ui.simplified-mode-notification"),
                nN.ti.Notification.XO("info", hN(".title"), hN(".message"), { align: "bottom-left", bjt: 1e4 }),
                nN.u.it());
        }
        async F0n(t) {
            if ("none" === t) return;
            const i = this.jke();
            try {
                const e = await fetch("/versions.json");
                if (!e.ok) throw new Error(e.status + " " + e.statusText);
                const s = await e.json();
                let n = -1,
                    r = "",
                    h = -1,
                    o = "",
                    a = -1,
                    l = "";
                for (const t of s) {
                    const i = t.branchName;
                    "Stable" === i
                        ? ((h = nN.DDn(t.releaseName)), (o = t.launchURL))
                        : "Beta" === i
                          ? ((a = nN.DDn(t.releaseName)), (l = t.launchURL))
                          : "LTS" === i && ((n = nN.DDn(t.releaseName)), (r = t.launchURL));
                }
                if ("lts" === i) {
                    if (n > nN.ON.x8s) {
                        const t = nN.u.z_("ui.update-alerts.lts-update-available-prompt"),
                            i = nN.ti.Ze.Ke("Confirm");
                        (i.OOe = () => (location.href = r)),
                            await i.pr({
                                caption: t(".title"),
                                message: t.BIt(".message", nN.ON.fhi, nN.uhi(n)),
                                jT: t(".update"),
                                vT: t(".not-now"),
                            });
                    }
                } else if ("stable" === i) {
                    if ("beta" === t && a > nN.ON.x8s) {
                        const t = nN.u.z_("ui.update-alerts.beta-update-available-prompt"),
                            i = nN.ti.Ze.Ke("Confirm");
                        (i.OOe = () => (location.href = l)),
                            await i.pr({
                                caption: t(".title"),
                                message: t.BIt(".message", nN.ON.fhi, nN.uhi(a)),
                                jT: t(".update"),
                                vT: t(".not-now"),
                            });
                    } else if ("stable" === t && h > nN.ON.x8s && "/" !== location.pathname) {
                        const t = nN.u.z_("ui.update-alerts.update-available-prompt"),
                            i = nN.ti.Ze.Ke("Confirm");
                        (i.OOe = () => (location.href = location.origin)),
                            await i.pr({
                                caption: t(".title"),
                                message: t.BIt(".message", nN.ON.fhi, nN.uhi(h)),
                                jT: t(".update"),
                                vT: t(".not-now"),
                            });
                    }
                } else if (h > nN.ON.x8s && h > a) {
                    const t = nN.u.z_("ui.update-alerts.update-available-prompt"),
                        i = nN.ti.Ze.Ke("Confirm");
                    (i.OOe = () => (location.href = o)),
                        await i.pr({
                            caption: t(".title"),
                            message: t.BIt(".message", nN.ON.fhi, nN.uhi(h)),
                            jT: t(".update"),
                            vT: t(".not-now"),
                        });
                } else if (a > nN.ON.x8s) {
                    const t = nN.u.z_("ui.update-alerts.beta-update-available-prompt"),
                        i = nN.ti.Ze.Ke("Confirm");
                    (i.OOe = () => (location.href = l)),
                        await i.pr({
                            caption: t(".title"),
                            message: t.BIt(".message", nN.ON.fhi, nN.uhi(a)),
                            jT: t(".update"),
                            vT: t(".not-now"),
                        });
                }
            } catch (t) {
                (() => {})("Failed to check for beta update: ", t);
            }
        }
        async v0n() {
            if (this.$J().checkForAddonUpdates && !nN.Aue.y$n() && !this.sO() && this.zue())
                return await nN.ti.Tj.que.cJn();
        }
        YQn(t) {
            (this.XQn = t), this.P7s("WebAppInstall", "InstallAvailable");
        }
        JQn(t) {
            this.P7s("WebAppInstall", "AppInstalled");
        }
        Jue() {
            return !!this.XQn && "browser" === nN.fk.Pue;
        }
        async Kue() {
            const t = this.XQn;
            if (((this.XQn = null), !t)) return;
            t.prompt(), this.P7s("WebAppInstall", "InstallPromptShown");
            const i = await t.userChoice;
            this.P7s("WebAppInstall", "InstallPromptOutcome-" + i.outcome);
        }
        async I7s() {
            const t = new nN.mDe("PreloadAllAddons-ForceLoad");
            await Promise.all([nN.Nt.vme(), nN.xf.vme()]), t.next("PreloadAllAddons-LoadIcons");
            const i = [];
            i.push(nN.Roe(() => nN.Nt.K5s().Iue()));
            for (const t of nN.Nt.plugins()) i.push(nN.Roe(() => t.Iue()));
            for (const t of nN.xf.Cme()) i.push(nN.Roe(() => t.Iue()));
            await Promise.all(i), t.end();
        }
        MQn(t) {
            nN.IRe.TRe(location.hash), 0 === this.Jrt() && this.ort() && this.lQn.M0n();
        }
        BO() {
            return this.wJ;
        }
        L0n() {
            return this.hue;
        }
        B0n() {
            return this.hue.rue();
        }
        qrt() {
            return this.XZn;
        }
        wue() {
            return this.YZn;
        }
        ert() {
            return this.aQn;
        }
        ort() {
            return this.$J().enableExampleBrowser;
        }
        srt() {
            return this.lQn;
        }
        Drt() {
            return this.uQn;
        }
        JIt() {
            return this.cQn;
        }
        Skt() {
            const t = this.JIt();
            return !!t && t.U0n();
        }
        Sue() {
            return nN.fk.Bj;
        }
        N5t() {
            return !this.Skt();
        }
        Vrt(t, i) {
            this.YZn.Vrt(t, i);
        }
        yet() {
            this.YZn.yet();
        }
        NZn(t, i) {
            switch (t) {
                case "propertiesBar":
                    this.QZn = i;
                    break;
                case "projectBar":
                    this.tQn = i;
                    break;
                case "layersBar":
                    this.iQn = i;
                    break;
                case "tilemapBar":
                    this.I3t = i;
                    break;
                case "zOrderBar":
                    this.eQn = i;
                    break;
                case "bookmarksBar":
                    this.sQn = i;
                    break;
                case "findResultsBar":
                    this.nQn = i;
                    break;
                case "findReferencesBar":
                    this.rQn = i;
                    break;
                case "timelineBar":
                    this.hQn = i;
                    break;
                case "instanceBar":
                    this.oQn = i;
                    break;
                case "remotePreviewBar":
                    this.dQn = i;
                    break;
                case "assetBrowserBar":
                    this.fQn = i;
            }
        }
        ul() {
            return !(!this.QZn || this.QZn.upe()) || ((this.QZn = null), !1);
        }
        dl(t) {
            if (((t = void 0 === t), !this.QZn && t)) throw new Error("properties bar unavailable");
            return this.QZn;
        }
        Goi() {
            return !(!this.tQn || this.tQn.upe()) || ((this.tQn = null), !1);
        }
        Eue(t) {
            if (((t = void 0 === t), !this.tQn && t)) throw new Error("project bar unavailable");
            return this.tQn;
        }
        N0n() {
            return !(!this.iQn || this.iQn.upe()) || ((this.iQn = null), !1);
        }
        G8(t) {
            if (((t = void 0 === t), !this.iQn && t)) throw new Error("layers bar unavailable");
            return this.iQn;
        }
        HW() {
            return !(!this.I3t || this.I3t.upe()) || ((this.I3t = null), !1);
        }
        xW(t) {
            if (((t = void 0 === t), !this.I3t && t)) throw new Error("tilemap bar unavailable");
            return this.I3t;
        }
        mE() {
            return !(!this.eQn || this.eQn.upe()) || ((this.eQn = null), !1);
        }
        pE(t) {
            if (((t = void 0 === t), !this.eQn && t)) throw new Error("zorder bar unavailable");
            return this.eQn;
        }
        vA() {
            return !(!this.hQn || this.hQn.upe()) || ((this.hQn = null), !1);
        }
        BF(t) {
            if (((t = void 0 === t), !this.hQn && t)) throw new Error("timeline bar unavailable");
            return this.hQn;
        }
        j0n() {
            return !(!this.sQn || this.sQn.upe()) || ((this.sQn = null), !1);
        }
        Gue(t) {
            if (((t = void 0 === t), !this.sQn && t)) throw new Error("bookmarks bar unavailable");
            return this.sQn;
        }
        JU() {
            return !(!this.oQn || this.oQn.upe()) || ((this.oQn = null), !1);
        }
        C8(t) {
            if (((t = void 0 === t), !this.oQn && t)) throw new Error("hierarchy bar unavailable");
            return this.oQn;
        }
        $0n() {
            return !(!this.fQn || this.fQn.upe()) || ((this.fQn = null), !1);
        }
        Uue(t) {
            if (((t = void 0 === t), !this.fQn && t)) throw new Error("hierarchy bar unavailable");
            return this.fQn;
        }
        Y_e() {
            return this.dQn;
        }
        z0n() {
            let t = this.Y_e();
            return t || (t = self.V0n.mF()), t.tO(!0), t;
        }
        Oue() {
            return this.nQn;
        }
        ERe() {
            return this.rQn;
        }
        zIt() {
            if (this.ZH().Mjt()) return;
            let t = this.Oue();
            const i = this.srt(),
                e = i.dF() && i.dF().cO();
            (t && t.dF() && t.dF().cO()) || !e ? (t || (t = self.dde.mF()), t.tO(!0), t.dF().KW(), t.mQt()) : i.mQt();
        }
        W0n() {
            this.Eue().mO();
        }
        H0n(t, i, e = !0) {
            if ((nN.k$(i), (e = !!e), nN.fk.ZP)) {
                if (i && e) {
                    nN.ti.Ze.Ke("OK").pr(oN("ui.errors.feature-not-available-in-mobile", i));
                }
                return !1;
            }
            return !0;
        }
        MW(t) {
            return !!this.H0n(t);
        }
        zN(t) {
            const i = hN("ui.bars.project.items.timelines");
            return !!this.H0n(t, i);
        }
        aU() {
            return !this.sO();
        }
        Tue(t = !0) {
            return !0;
        }
        K0n() {
            return nN.Xr || this.PWn() || this.MBn();
        }
        async JO() {
            return !nN.Y$.bue || !(await self.tj.LXn());
        }
        Cit() {
            return !!this.bG;
        }
        We() {
            if (!this.bG) throw new Error("layout view manager unavailable");
            return this.bG;
        }
        yH() {
            if (!this.HAt) throw new Error("event sheet view manager unavailable");
            return this.HAt;
        }
        upt() {
            return !!this.iot;
        }
        Cot() {
            if (!this.iot) throw new Error("flowchart view manager unavailable");
            return this.iot;
        }
        Pke() {
            return this.We().Vn();
        }
        ui() {
            return this.We().Gn();
        }
        async hC() {
            return await self.app.jpe(), await this.We().hC();
        }
        eA(t) {
            nN.Et(t, self.iT);
            const i = t.Mi();
            if (this.zN(i)) return self.DW.eA(t);
        }
        lH(t) {
            return nN.Et(t, self.QO), this.bG.lH(t);
        }
        wH(t) {
            return nN.Et(t, self.Hk), this.HAt.wH(t);
        }
        kA(t) {
            return nN.Et(t, self.sT), this.iot.kA(t);
        }
        MN(t, i = null) {
            return nN.Et(t, window.Va), nN.oN(i), self.oj.MN(t, i);
        }
        _G(t, i, e) {
            t.U2e(), this.YZn.urt(t, i, e);
        }
        KJ(t) {
            this.YZn.jrt(t);
        }
        bE() {
            return this.bG ? this.We().bE() : null;
        }
        q0n() {
            return !!this.JZn;
        }
        ZH() {
            if (!this.JZn) throw new Error("text editor manager unavailable");
            return this.JZn;
        }
        X0n() {
            return !!this.ZZn;
        }
        JH() {
            if (!this.ZZn) throw new Error("data editor manager unavailable");
            return this.ZZn;
        }
        $Un(t, i) {
            nN.yp(t),
                nN.Crt(i),
                (i = Object.assign({}, yN, i)),
                this.qQn.push({ Ysn: t, Y0n: !!i.isZipFormat, J0n: !!i.toLayoutView });
        }
        async ngt(t) {
            if (nN.ti.SK._K()) return;
            if (this.Skt()) return;
            const i = t.dataTransfer.files,
                e = this.XM(),
                s = this.bE();
            if (1 === i.length) {
                const n = i[0],
                    r = { JRt: "drag-and-drop" };
                switch (nN.sl(n.name).toLowerCase().slice(1)) {
                    case "capx":
                        return void this.XRt(n, r);
                    case "caproj":
                        return void this.Z0n();
                    case "c3p": {
                        let i = null;
                        const e = t.dataTransfer.items[0];
                        if (e && e.getAsFileSystemHandle && nN.Y$.bue)
                            try {
                                (i = await e.getAsFileSystemHandle()), i && (r.JRt = "webfs-drag-and-drop");
                            } catch (t) {
                                (() => {})("Failed to get file system handle from drop: ", t), (i = null);
                            }
                        const s = await this.ZRt(n, r);
                        if (!nN.ca(s, self.Ga)) return;
                        if (i)
                            try {
                                s.r7s(n.name), await s.n7s("webfs-single-file", { fileHandle: i });
                            } catch (t) {
                                (() => {})("Failed to set origin file system from drop: ", t);
                            }
                        return;
                    }
                    case "c3proj":
                        return void this.Q0n();
                    case "zip":
                        return void this.t1n(n, t.clientX, t.clientY);
                    case "png":
                    case "apng":
                    case "webp":
                    case "avif":
                    case "avifs":
                    case "jpg":
                    case "gif":
                        return void (e && s && s.dF().cO() && s.X$(Array.from(i), t.clientX, t.clientY));
                    case "svg":
                        return void (e && s && s.dF().cO() && s.hJ(n, t.clientX, t.clientY));
                    case "wav":
                    case "webm":
                    case "flac":
                    case "opus":
                    case "ogg":
                    case "m4a": {
                        const t = nN.ti.Ze.Ke("ImportAudio");
                        return void (e && t.KRt([n], e, document.body));
                    }
                    case "c3addon":
                        return void (this.zue() && nN.ti.Tj.que.YRt([n], null));
                }
                if (await this.i1n(t)) return;
                this.e1n(n, t.clientX, t.clientY);
            } else if (i.length > 1) {
                let n = null,
                    r = !1;
                for (let t of i)
                    switch (nN.sl(t.name).toLowerCase().slice(1)) {
                        case "png":
                        case "apng":
                        case "webp":
                        case "avif":
                        case "avifs":
                        case "jpg":
                        case "gif":
                            null !== n && "image" !== n ? (r = !0) : (n = "image");
                            break;
                        case "wav":
                        case "webm":
                        case "flac":
                        case "opus":
                        case "ogg":
                        case "m4a":
                            null !== n && "audio" !== n ? (r = !0) : (n = "audio");
                            break;
                        case "c3addon":
                            null !== n && "c3addon" !== n ? (r = !0) : (n = "c3addon");
                            break;
                        default:
                            r = !0;
                    }
                if (r) (() => {})("[Construct] Cannot import mixed file types via drag-and-drop");
                else
                    switch (n) {
                        case "audio": {
                            const t = nN.ti.Ze.Ke("ImportAudio");
                            e && t.KRt(i, e, document.body);
                            break;
                        }
                        case "image":
                            s && s.dF().cO() && s.X$(Array.from(i), t.clientX, t.clientY);
                            break;
                        case "c3addon":
                            this.zue() && nN.ti.Tj.que.YRt(i, null);
                    }
            }
        }
        async i1n(t) {
            const i = t.dataTransfer.items[0];
            if (!i || !i.getAsFileSystemHandle || !nN.Y$.bue) return !1;
            let e = null;
            try {
                if (((e = await i.getAsFileSystemHandle()), !(e && e instanceof FileSystemDirectoryHandle))) return !1;
                if (!(await nN.vRt.Kqe(e, ".c3proj"))) return !1;
            } catch (t) {
                return !1;
            }
            const s = await this.s1n(e, { JRt: "webfs-drag-and-drop" });
            if (!nN.ca(s, self.Ga)) return !0;
            try {
                s.r7s(e.name), await s.n7s("webfs-local-folder", { folderHandle: e });
            } catch (t) {
                (() => {})("Failed to set origin file system from drop: ", t);
            }
            return !0;
        }
        async e1n(t, i, e) {
            const s = this.bE(),
                n = new nN.pRt();
            let r = !1,
                h = null;
            try {
                await n.q2t(t), (r = !0), (h = new window.SDK.IZipFile(n));
            } catch (t) {
                r = !1;
            }
            for (const { Ysn: n, Y0n: o, J0n: a } of this.qQn) {
                if (a && !s) continue;
                let l = !1,
                    u = {};
                a &&
                    (u = {
                        layoutView: s.dJ(),
                        clientX: i,
                        clientY: e,
                        layoutX: s.wW(i - s.vX()),
                        layoutY: s.yW(e - s.gX()),
                    });
                try {
                    o && r ? (l = await n(t.name, h, u)) : o || r || (l = await n(t.name, t, u));
                } catch (t) {
                    console.error("Error calling SDK import handler: ", t), (l = !1);
                }
                if (
                    ("boolean" != typeof l &&
                        (() => {})(
                            `[SDK] Import handler did not resolve with a boolean. Please make sure the callback passed to AddDragDropFileImportHandler() returns a promise that resolves with either true or false. (Returned: ${l})`
                        ),
                    l)
                )
                    break;
            }
            n.e4t();
        }
        Z0n() {
            nN.ti.Ze.Ke("OK").pr(hN("ui.errors.cannot-open-c2-folder-project"));
        }
        Q0n() {
            nN.ti.Ze.Ke("OK").pr(hN("ui.cannot-open-folder-project"));
        }
        async n1n(t) {
            const i = t.path;
            i.toLowerCase().endsWith(".c3p")
                ? await this.ZRt(t, { JRt: "desktopapp-activation" })
                : i.toLowerCase().endsWith(".c3proj")
                  ? this.Q0n()
                  : (() => {})("Unknown file extension to open for file: " + i);
        }
        r1n(t) {
            t.zZn || null === t.JRt || (this.P7s("OpenProjectMethod", t.JRt), (t.JRt = null));
        }
        async h1n(t, i) {
            nN.vu(t), nN.Crt(i), (i = Object.assign({}, bN, i)), this.r1n(i), this.YZn.Zet(!0);
            let e = nN.ti.Ze.Ke("Download");
            try {
                const s = await e.pr(t);
                return await this.XRt(s, i);
            } catch (t) {
                return (
                    console.error("[Project] Exception opening: ", t),
                    e.igt(),
                    (e = nN.ti.Ze.Ke("OK")),
                    e.pr(hN("ui.errors.failed-to-download-project")),
                    t
                );
            } finally {
                this.YZn.Zet(!1);
            }
        }
        async XRt(t, i) {
            nN.Et(t, Blob), nN.Crt(i), (i = Object.assign({}, bN, i)), this.r1n(i), this.YZn.Zet(!0), this.NQn++;
            const e = new nN.pRt();
            if (i.jRt) {
                let t = nN.ti.Ze.Ke("Progress");
                (t.onprogress = () => {
                    const t = e.K2t(),
                        i = e.Z2t();
                    return 0 === i ? 0 : t / i;
                }),
                    t.pr(hN("ui.projects.importing-caption"));
            }
            const s = performance.now();
            try {
                await e.q2t(t), await this.jpe(!1);
                const n = await self.Ga.Ehi(e, !!i.duplicate);
                return (
                    n.D7s(i.zZn),
                    i.jRt && nN.ti.Ze.Ke("Progress").WD(),
                    this.P7s("ImportC2Capx", { proj_id: n.nA() }),
                    i.zZn || (await this.o1n(n, !!i.Chi)),
                    nN.fDt && console.info(`[Project] Opened C2 Capx in ${performance.now() - s} ms`),
                    n
                );
            } catch (t) {
                return (
                    i.jRt && nN.ti.Ze.Ke("Progress").igt(), await this.a1n("ui.errors.failed-to-open-c2-project", t), t
                );
            } finally {
                this.NQn--, e.e4t(), this.YZn.Zet(!1);
            }
        }
        async l1n(t, i) {
            nN.vu(t), nN.Crt(i), (i = Object.assign({}, bN, i)), this.r1n(i), this.YZn.Zet(!0), this.NQn++;
            let e = nN.ti.Ze.Ke("Download");
            try {
                const s = await e.pr(t);
                i.u1n && i.u1n(s);
                return await this.ZRt(s, i);
            } catch (t) {
                return (
                    console.error("[Project] Exception opening: ", t),
                    e.igt(),
                    (e = nN.ti.Ze.Ke("OK")),
                    e.pr(hN("ui.errors.failed-to-download-project")),
                    t
                );
            } finally {
                this.YZn.Zet(!1), this.NQn--;
            }
        }
        async ZRt(t, i) {
            nN.Et(t, Blob), nN.Crt(i), (i = Object.assign({}, bN, i)), this.r1n(i), this.YZn.Zet(!0), this.NQn++;
            const e = new nN.pRt(),
                s = { indeterminate: !1, duplicate: !!i.duplicate, Chi: !!i.Chi, Ihi: !!i.Ihi };
            if (i.jRt) {
                let t = nN.ti.Ze.Ke("Progress");
                (t.onprogress = () => {
                    if (s.indeterminate) return t.hr(hN("ui.projects.opening-caption-no-progress")), null;
                    const i = e.K2t(),
                        n = e.Z2t();
                    return 0 === n ? 0 : i / n;
                }),
                    t.pr(hN("ui.projects.opening-caption"));
            }
            const n = performance.now();
            try {
                await e.q2t(t), await this.jpe(!1);
                const r = await self.Ga.nhi(e, s);
                if ((r.D7s(i.zZn), nN.nqt(t))) {
                    const i = t.name;
                    r.r7s(i);
                }
                return (
                    i.fileHandle && (await r.n7s("webfs-single-file", { fileHandle: i.fileHandle })),
                    i.zZn || (await this.o1n(r, !!i.Chi)),
                    nN.fDt && console.info(`[Project] Opened C3 project in ${performance.now() - n} ms`),
                    i.jRt && nN.ti.Ze.Ke("Progress").WD(),
                    r
                );
            } catch (t) {
                return (
                    i.jRt && nN.ti.Ze.Ke("Progress").igt(), await this.a1n("ui.errors.failed-to-open-c3-project", t), t
                );
            } finally {
                this.NQn--, e.e4t(), this.YZn.Zet(!1);
            }
        }
        async s1n(t, i) {
            nN.Et(t, FileSystemDirectoryHandle),
                rN(nN.Y$.bue, "web filesystem not supported"),
                nN.Crt(i),
                (i = Object.assign({}, bN, i)),
                this.r1n(i),
                this.YZn.Zet(!0),
                this.NQn++;
            const e = { indeterminate: !1, duplicate: !1 },
                s = nN.ti.Ze.Ke("Progress");
            s.pr(hN("ui.projects.opening-caption-no-progress"));
            try {
                await this.jpe(!1);
                const i = await nN.vRt.Kqe(t, ".c3proj"),
                    n = await i.getFile(),
                    r = nN.m(nN.ots, t),
                    h = await self.Ga.ghi(n, r, e);
                return (
                    h.r7s(t.name + "/"),
                    await h.n7s("webfs-local-folder", { folderHandle: t }),
                    await this.o1n(h),
                    await h.wni(t),
                    s.WD(),
                    h
                );
            } catch (t) {
                return s.igt(), this.a1n("ui.errors.failed-to-open-c3-folder-project", t), t;
            } finally {
                this.YZn.Zet(!1), this.NQn--;
            }
        }
        async t1n(t, i, e) {
            const s = new nN.pRt(),
                n = { JRt: "drag-and-drop" };
            try {
                if ((await s.q2t(t), s.Q2t(".c3proj"))) return await this.ZRt(t, n);
                const r = [...s.cqe()].filter((t) => !t.filename.toLowerCase().startsWith("__macosx")),
                    h = r.filter((t) => t.filename.toLowerCase().endsWith(".c3p"));
                if (1 === h.length) {
                    const t = h[0],
                        i = await s.t4t(t);
                    return await this.ZRt(i, n);
                }
                const o = r.filter((t) => t.filename.toLowerCase().endsWith(".capx"));
                if (1 === o.length) {
                    const t = o[0],
                        i = await s.t4t(t);
                    return await this.XRt(i, n);
                }
                this.e1n(t, i, e);
            } catch (t) {
                this.a1n("ui.errors.failed-to-open-c3-project", t);
            } finally {
                s.e4t();
            }
        }
        a1n(t, i) {
            if ("missing-addons" === i.type) {
                return nN.ti.Ze.Ke("MissingAddons").pr({ Uei: i.Uei, ahi: i.ahi });
            }
            if ("saved-with-future-release" === i.type) {
                const t = nN.ON.fhi,
                    e = nN.uhi(i.dhi),
                    s = nN.ODn(i.dhi);
                return nN.ti.Ze.Ke("OK").pr(
                    nN.m(nN.nS, lN("ui.errors.project-saved-in-newer-release", e, t), {
                        links: [location.origin + "/" + s],
                    })
                );
            }
            if ("expression-name-collision" === i.type) {
                const t = i.na,
                    e = i.name,
                    s = i.fns,
                    n = t.Mi().Lcs(),
                    r = nN.uhi(n),
                    h = nN.ODn(n),
                    o = nN.u.z_("ui.errors.expression-name-collision"),
                    a = nN.ti.Ze.Ke("OK");
                return (
                    a.hr(o(".title")),
                    a.pr(
                        nN.m(nN.nS, o.njt(".message", t.Zn(), o(".types." + s), e, t.ur().Zn(), r), {
                            links: [location.origin + "/" + h],
                        })
                    )
                );
            }
            if ("invalid-spaces-in-name" === i.type) {
                return nN.ti.Ze.Ke("OK").pr(
                    nN.m(nN.nS, lN("ui.errors.invalid-spaces-in-name", i.path), {
                        links: ["https://www.construct.net/tutorials/fix-open-project-errors-due-3139"],
                    })
                );
            }
            console.error("[Project] Exception opening: ", i);
            return nN.ti.Ze.Ke("OK").pr({ message: hN(t), xQe: !0 });
        }
        Qhi(t) {
            nN.vu(t);
            for (let i of this.bQn) if (i.nA() === t) return !0;
            return !1;
        }
        VO() {
            return nN.ti.Ze.Ke("NewProject").pr();
        }
        YWn(t, i = "event-sheet") {
            return this.LT(this.c1n(t, i));
        }
        async c1n(t, i) {
            this.YZn.Zet(!0), await this.jpe(!0);
            try {
                nN.kDt(t), nN.vu(i);
                const e = nN.m(self.Ga);
                let s = null;
                if ("event-sheet" === i) (s = nN.m(self.Hk, e)), e.iB().BD(s);
                else if ("javascript" === i) self.oj.VN(e);
                else {
                    if ("typescript" !== i) throw new Error("invalid parameter");
                    self.oj.$N(e);
                }
                const n = nN.m(self.QO, e),
                    r = nN.m(self.nH, n);
                r.iH(!1), n.oH().BD(r), e.nB().BD(n), s && n.sH(s);
                const h = e.ZN(e.oB()),
                    o = e.CA(e.fB()),
                    a = this.JIt().KIt();
                if (
                    (a &&
                        (a.XIt("<first-layout>", n),
                        s && a.XIt("<first-event-sheet>", s),
                        a.XIt("<first-layer>", r),
                        a.XIt("<first-timeline>", h),
                        a.XIt("<first-flowchart>", o)),
                    "animation" === this.Mke())
                ) {
                    const t = nN.Nt.yf("Timeline"),
                        i = t.OD(e, t.Zn());
                    await i.Ils(), e.tB().BD(i);
                }
                const l = this.$J();
                e.q(l.defaultProjectAuthor),
                    e.Wte(l.defaultProjectEmail),
                    e.Kte(l.defaultProjectWebsite),
                    await e.gni(),
                    t && t(e),
                    e.g7s(),
                    await this.o1n(e, !0, !1);
            } catch (t) {
                console.error("Error creating new project: ", t);
                nN.ti.Ze.Ke("OK").pr(hN("ui.errors.failed-to-create-project"));
            } finally {
                this.YZn.Zet(!1);
            }
        }
        async o1n(t, i = !1, e = !0) {
            if ((nN.Et(t, self.Ga), rN(!t.Kb(), "project still loading"), this.bQn.includes(t)))
                throw new Error("project already open");
            if (
                (1 === this.bQn.length && (await this.d1n(this.bQn[0])),
                this.$J().autoHideStartPage && this.aQn.Xrt(),
                this.bQn.push(t),
                this.h7s(t, "projectopen"),
                await this.f1n(t, "afterprojectopen"),
                e && t.E7s(),
                self.app.ul() && this.QZn.RD(!0),
                i)
            )
                if (this.YZn.Prt(t)) {
                    let i = this.YZn.grt(t),
                        e = this.YZn.Ort(t);
                    i ? await this.p1n(i) : e ? await this.m1n(e) : await this.p1n(t.ise() || t.ucs());
                } else await this.p1n(t.ise() || t.ucs());
            else this.YZn.Prt(t) || (await this.p1n(t.ise() || t.ucs()));
            self.app.ul() && this.QZn.RD(!1),
                await nN.ti.Tj.UB.BEe(t),
                this.w1n() && [...t.aOt()].length && !nN.Xr && this.g1n(t);
        }
        async p1n(t) {
            if (!t) return;
            const i = await this.lH(t),
                e = t.pH();
            if (e) this.wH(e);
            else {
                const i = nN.vo(t.Mi().GQt()),
                    e = this.ZH();
                i && !e.Cjt(i) && (await self.oj.MN(i));
            }
            i && this.KJ(i.dF());
        }
        async m1n(t) {
            if (!t) return;
            const i = this.wH(t),
                e = t.bf();
            e && (await this.lH(e)), this.KJ(i.dF());
        }
        async KO(t) {
            nN.Y$.bue ? await this.y1n() : await this.b1n(t);
        }
        async y1n() {
            let t = null;
            try {
                [t] = await window.showOpenFilePicker({
                    multiple: !1,
                    id: "open-project-file",
                    types: [
                        {
                            description: hN("ui.project-file-picker.c3-and-c2-single-file-projects"),
                            accept: { "application/x-construct-project": [".c3p", ".capx"] },
                        },
                        {
                            description: hN("ui.project-file-picker.c3-single-file-project"),
                            accept: { "application/x-construct3-project": [".c3p"] },
                        },
                        {
                            description: hN("ui.project-file-picker.c2-single-file-project"),
                            accept: { "application/x-construct2-project": [".capx"] },
                        },
                    ],
                });
            } catch (t) {
                return;
            }
            try {
                const i = await t.getFile(),
                    e = i.name.toLowerCase();
                if (e.endsWith(".c3p")) {
                    const e = await this.ZRt(i, { JRt: "webfs-file-picker" });
                    if (!nN.ca(e, self.Ga)) return;
                    e.r7s(i.name), await e.n7s("webfs-single-file", { fileHandle: t });
                } else if (e.endsWith(".capx")) this.XRt(i, { JRt: "webfs-file-picker" });
                else {
                    if (e.endsWith(".c3proj")) return void this.Q0n();
                    nN.ti.Ze.Ke("OK").pr(hN("ui.errors.unknown-file-extension"));
                }
            } catch (t) {
                this.a1n("ui.errors.failed-to-open-c3-project", t), console.error("File read error: ", t);
            }
        }
        async b1n(t) {
            const i = await nN.ti.Eyi._yi(".c3p,.c3proj,.capx,.caproj", t, !1, !1);
            if (null === i) return;
            const e = { JRt: "file-picker" };
            if (i.name.toLowerCase().endsWith(".c3p")) this.ZRt(i, e);
            else if (i.name.toLowerCase().endsWith(".capx")) this.XRt(i, e);
            else if (i.name.toLowerCase().endsWith(".caproj")) this.Z0n();
            else if (i.name.toLowerCase().endsWith(".c3proj")) this.Q0n();
            else {
                nN.ti.Ze.Ke("OK").pr(hN("ui.errors.unknown-file-extension"));
            }
        }
        async _ue() {
            let t = null;
            try {
                t = await window.showDirectoryPicker({ id: "open-project-folder", mode: "readwrite" });
            } catch (t) {
                return;
            }
            this.s1n(t, { JRt: "webfs-folder-picker" });
        }
        async NB(t, i = !1) {
            if ((rN(!t.Kb(), "project still loading"), t.PE())) return;
            if (t.ume() && !i) {
                const i = nN.ti.Ze.Ke("ConfirmMultiple"),
                    e = await i.pr(
                        {
                            message: lN("ui.unsaved-project-warning", t.Zn()),
                            options: [
                                { text: hN("ui.save-and-close"), tag: "save" },
                                { text: hN("ui.dont-save"), tag: "discard" },
                            ],
                            PT: !0,
                        },
                        document.body
                    );
                if (null === e) return "cancelled";
                if ("save" === e) {
                    if (null === (await self.app.HB(t))) return "cancelled";
                }
            }
            if (t.PE()) return;
            self.app.yet(), t.X9s(), this.h7s(t, "projectclose"), this.XM() === t && this.BE(null);
            const e = this.bQn.indexOf(t);
            e >= 0 && this.bQn.splice(e, 1),
                this.h7s(t, "afterprojectclose"),
                this.ul() && this.dl()._x(),
                t.Ut(),
                nN.Aue.nzn(t);
        }
        async v1n() {
            if (this.bQn.length) {
                const t = await this.NB(this.bQn[0]);
                return "cancelled" === t ? t : this.v1n();
            }
        }
        async d1n(t) {
            nN.Et(t, self.Ga);
            const i = self.app,
                e = "close-existing-project-dont-ask-again";
            if (await localforage.getItem(e)) return;
            i.P7s("CloseExistingProjectPrompt", "Shown"), nN.u.o("ui.confirm-open-second-project-prompt");
            const s = nN.ti.Ze.Ke("ConfirmCheck"),
                n = s.pr({
                    caption: hN(".caption"),
                    message: hN(".message"),
                    jT: hN(".close-project"),
                    vT: hN(".open-both"),
                    UQe: hN("common.dont-ask-again"),
                });
            nN.u.it();
            if (null === (await n)) {
                if (s.$Qe()) {
                    i.P7s("CloseExistingProjectPrompt", "Cancelled-DontAskAgain");
                    try {
                        await localforage.setItem(e, !0);
                    } catch (t) {
                        (() => {})('Failed to save "Don\'t ask again" preference: ', t);
                    }
                } else i.P7s("CloseExistingProjectPrompt", "Cancelled");
                return;
            }
            const r = await this.NB(t);
            i.P7s("CloseExistingProjectPrompt", "cancelled" === r ? "Cancelled-ClosingProject" : "Confirmed");
        }
        *MO() {
            for (let t of this.bQn) yield t;
        }
        Jrt() {
            return this.bQn.length;
        }
        S1n() {
            return this.UQn > 0;
        }
        x1n() {
            return this.NQn > 0;
        }
        async M1n(t, i) {
            nN.Et(t, self.Ga), (i = !!i), rN(!t.Kb(), "project still loading");
            const e = new nN.pRt();
            let s;
            i ||
                ((s = nN.ti.Ze.Ke("Progress")),
                (s.onprogress = () => {
                    let t = e.oke(),
                        i = e.ake();
                    return 0 === i ? null : t / i;
                }),
                s.pr());
            try {
                const i = await t.thi(),
                    s = await e.bRt(i.shi);
                if (0 === s.size) throw new Error("project save is zero size");
                return s;
            } catch (t) {
                throw (console.error("[Project] Exception saving project to blob: ", t), t);
            } finally {
                i || s.WD();
            }
        }
        async jue(t, i) {
            nN.Et(t, self.Ga);
            const e = t.Zn() + ".c3p";
            let s = e;
            if (i) {
                nN.u.o("ui.save-download-name-prompt");
                const t = nN.ti.Ze.Ke("Input").pr({
                    caption: hN(".caption"),
                    message: hN(".message"),
                    label: hN(".label"),
                    j0e: e,
                });
                nN.u.it();
                const i = await t;
                if (null === i) return;
                "string" == typeof i && i && ((s = i), s.toLowerCase().endsWith(".c3p") || (s += ".c3p"));
            }
            this.UQn++;
            try {
                const i = await this.M1n(t);
                await nN.IRt(s, i), t.l7s(), this.P7s("SaveProjectMethod", "download");
            } catch (t) {
                console.error("[Project] Exception saving: ", t);
                nN.ti.Ze.Ke("OK").pr(hN("ui.save-error"));
            } finally {
                this.UQn--;
            }
        }
        async fue(t) {
            nN.Et(t, self.Ga), this.UQn++;
            try {
                return await self.tj.Blt(t);
            } catch (t) {
                console.error("[Project] Exception saving: ", t);
                nN.ti.Ze.Ke("OK").pr(hN("ui.save-error"));
            } finally {
                this.UQn--;
            }
        }
        async kue(t) {
            nN.Et(t, self.Ga), this.UQn++;
            try {
                return await self.tj.Blt(t, !0);
            } catch (t) {
                console.error("[Project] Exception saving: ", t);
                nN.ti.Ze.Ke("OK").pr(hN("ui.save-error"));
            } finally {
                this.UQn--;
            }
        }
        async E1n(t) {
            nN.Et(t, self.Ga),
                rN(nN.Y$.bue, "web filesystem not supported"),
                rN("webfs-single-file" === t.m_(), "expected webfs-single-file project"),
                this.UQn++;
            try {
                const i = t.p_();
                if (!i) throw new Error("missing metadata");
                const e = i.fileHandle;
                if (!e) throw new Error("missing file handle");
                let s = await e.queryPermission({ mode: "readwrite" });
                if ("denied" === s) throw new Error("file write permission denied");
                if ("prompt" === s && ((s = await e.requestPermission({ mode: "readwrite" })), "granted" !== s))
                    throw new Error("file write permission denied");
                const n = await this.M1n(t);
                await nN.vRt.yRt(e, n),
                    await t.n7s("webfs-single-file", i),
                    t.l7s(),
                    this.P7s("SaveProjectMethod", "webfs-local-file");
            } catch (t) {
                console.error("[Project] Exception saving: ", t);
                nN.ti.Ze.Ke("OK").pr(hN("ui.save-error"));
            } finally {
                this.UQn--;
            }
        }
        async gue(t) {
            if ((nN.Et(t, self.Ga), rN(nN.Y$.bue, "web filesystem not supported"), await this.C1n())) return;
            let i = null;
            try {
                i = await window.showSaveFilePicker({
                    id: "save-project-file",
                    types: [
                        {
                            description: hN("ui.project-file-picker.c3-single-file-project"),
                            accept: { "application/x-construct3-project": [".c3p"] },
                        },
                    ],
                });
            } catch (t) {
                return;
            }
            this.UQn++;
            try {
                t.R7s();
                const e = await this.M1n(t);
                await nN.vRt.yRt(i, e),
                    t.r7s(i.name),
                    await t.n7s("webfs-single-file", { fileHandle: i }),
                    t.l7s(),
                    this.P7s("SaveProjectMethod", "webfs-local-file");
            } catch (t) {
                console.error("[Project] Exception saving: ", t);
                nN.ti.Ze.Ke("OK").pr(hN("ui.save-error"));
            } finally {
                this.UQn--;
            }
        }
        async _1n(t) {
            nN.Et(t, self.Ga),
                rN(nN.Y$.bue, "web filesystem not supported"),
                rN("webfs-local-folder" === t.m_(), "expected webfs-local-folder project"),
                this.UQn++;
            let i = null;
            try {
                const e = t.p_();
                if (!e) throw new Error("missing metadata");
                const s = e.folderHandle;
                if (!s) throw new Error("missing folder handle");
                await nN.vRt.Vqe(s);
                let n = -1;
                const r = (t, i) => (n = t / i);
                (i = nN.ti.Ze.Ke("Progress")), (i.onprogress = () => (-1 === n ? null : n)), i.pr();
                const h = await t.thi({ Sps: "save" }),
                    o = h.shi,
                    a = h.ihi,
                    l = h.ehi;
                await nN.vRt.Wqe(s, a),
                    await nN.vRt.Hqe(s, l),
                    await nN.vRt.b_s(s, o, r, !0),
                    (n = -1),
                    t.r7s(s.name + "/"),
                    await t.n7s("webfs-local-folder", e),
                    i.WD(),
                    t.l7s(),
                    this.P7s("SaveProjectMethod", "webfs-local-folder");
            } catch (t) {
                console.error("[Project] Exception saving: ", t), i && i.igt();
                nN.ti.Ze.Ke("OK").pr(hN("ui.save-error"));
            } finally {
                this.UQn--;
            }
        }
        async yue(t) {
            if ((nN.Et(t, self.Ga), rN(nN.Y$.bue, "web filesystem not supported"), await this.C1n())) return;
            let i = null;
            try {
                i = await window.showDirectoryPicker({ id: "save-project-folder", mode: "readwrite" });
            } catch (t) {
                return;
            }
            let e = null;
            try {
                await nN.vRt.Vqe(i);
                let s = -1;
                const n = (t, i) => (s = t / i);
                (e = nN.ti.Ze.Ke("Progress")),
                    (e.onprogress = () => (-1 === s ? null : s)),
                    e.pr(),
                    this.UQn++,
                    t.R7s();
                const r = await t.thi({ Sps: "save-as" });
                r.shi.set(".gitignore", "*.uistate.json\nts-defs"),
                    await nN.vRt.b_s(i, r.shi, n),
                    t.r7s(i.name + "/"),
                    await t.n7s("webfs-local-folder", { folderHandle: i }),
                    e.WD(),
                    t.l7s(),
                    this.P7s("SaveProjectMethod", "webfs-local-folder");
            } catch (t) {
                console.error("[Project] Exception saving: ", t), e && e.igt();
                nN.ti.Ze.Ke("OK").pr(hN("ui.save-error"));
            } finally {
                this.UQn--;
            }
        }
        async HB(t) {
            if ((nN.qm(t, self.Ga), !t)) return;
            if ((nN.Put() && (document.activeElement.blur(), await nN.pwe()), t.Gps())) {
                return void nN.ti.Ze.Ke("OK").pr(hN("ui.save-busy-autosaving"));
            }
            const i = t.M7s();
            if (null !== i) {
                const e = nN.ti.Ze.Ke("Confirm"),
                    s = oN("ui.save-autosave-to-original", i.name);
                if (!(await e.pr({ message: s }))) return;
                t.r7s(i.name), await t.n7s(i.mode, i.meta), t.R7s();
            }
            switch (t.m_()) {
                case "cloud":
                    return self.tj.T1n(t);
                case "webfs-single-file":
                    return this.E1n(t);
                case "webfs-local-folder":
                    return this._1n(t);
                default:
                    switch (this.$J().defaultSaveLocation) {
                        case "cloud":
                        default:
                            return this.fue(t);
                        case "local-browser":
                            return this.kue(t);
                        case "download":
                            return this.jue(t, !0);
                        case "save-as":
                            return nN.Y$.bue ? this.gue(t) : this.fue(t);
                    }
            }
        }
        async C1n() {
            if (this.$J().autoSave) return !1;
            let t = !1,
                i = await localforage.getItem("local-file-save-count");
            if (
                (("number" != typeof i || i >= 10) && ((i = 0), (t = !0)),
                localforage.setItem("local-file-save-count", i + 1).catch((t) => this.cme(t)),
                t)
            ) {
                this.P7s("PromptToSetUpBackupsDlg", "Shown");
                const t = nN.ti.Ze.Ke("Confirm"),
                    i = nN.u.z_("ui.configure-backups-prompt"),
                    e = await t.pr({
                        caption: i(".caption"),
                        message: nN.m(nN.nS, i(".message"), {
                            links: [() => this.WO("tips-and-guides/best-practices")],
                        }),
                        jT: i(".open-settings"),
                        vT: i(".save-anyway"),
                    });
                return (
                    e
                        ? (this.P7s("PromptToSetUpBackupsDlg", "OpenSettings"),
                          nN.ti.Ze.Ke("Settings").pr(null, "backup"))
                        : this.P7s("PromptToSetUpBackupsDlg", "SaveAnyway"),
                    !!e
                );
            }
            return !1;
        }
        async I1n(t) {
            const i = t.system;
            let e, s;
            this.NQn++;
            try {
                switch (i) {
                    case "cloud":
                        return await self.tj.P1n(t);
                    case "webfs-single-file":
                        const n = t.ref.fileHandle;
                        if (((s = await n.requestPermission({ mode: "readwrite" })), "granted" !== s))
                            throw new Error("user declined permission");
                        return (
                            (e = await n.getFile()),
                            await this.ZRt(e, { fileHandle: n, JRt: "webfs-recent-project-file" })
                        );
                    case "webfs-local-folder":
                        const r = t.ref.folderHandle;
                        if (((s = await r.requestPermission({ mode: "readwrite" })), "granted" !== s))
                            throw new Error("user declined permission");
                        return await this.s1n(r, { JRt: "webfs-recent-project-folder" });
                    default:
                        throw new Error(`bad origin ${i}`);
                }
            } finally {
                this.NQn--;
            }
        }
        zqn() {
            for (const t of this.bQn) nN.Y$.bue ? this.gue(t) : this.jue(t, !1);
        }
        ZQn(t) {
            if (!nN.Xr) {
                if (this.S1n()) {
                    const i = hN("ui.still-saving-warning");
                    return (t.returnValue = i), i;
                }
                if (self.tj.G1n()) {
                    const i = hN("ui.still-saving-warning");
                    return (t.returnValue = i), i;
                }
                for (let i of this.bQn)
                    if (i.ume()) {
                        let e = lN("ui.unsaved-changes-warning", i.Zn());
                        return (t.returnValue = e), e;
                    }
            }
        }
        E0n() {
            if (nN.fk.ZP && nN.ti.uz.U4e())
                return nN.ti.uz.N4e(!1), void Promise.resolve().then(() => nN.HHe.BD(() => this.E0n(), "app"));
            if (0 === this.Jrt()) return void nN.HHe.WHe();
            nN.u.o("ui.back-confirmation");
            nN.ti.Ze.Ke("Confirm")
                .pr({ caption: hN(".caption"), message: hN(".message"), jT: hN(".go-back"), vT: hN(".stay"), kQe: !0 })
                .then((t) => {
                    null === t ? Promise.resolve().then(() => nN.HHe.BD(() => this.E0n())) : nN.HHe.WHe();
                }),
                nN.u.it();
        }
        TB(t, i = "auto") {
            if ((nN.qm(t, self.Ga), t && !this.x1n() && !this.S1n() && (t.EB() || !nN.ti.SK._K())))
                return this.TPe(t, t.ise() || t.ucs(), { OPe: i });
        }
        FB(t) {
            if ((nN.qm(t, self.Ga), t && !this.x1n() && !this.S1n() && !nN.ti.SK._K())) {
                if (
                    !(
                        window.RTCDataChannel ||
                        window.webkitRTCDataChannel ||
                        window.mozRTCDataChannel ||
                        window.msRTCDataChannel
                    )
                ) {
                    return void nN.ti.Ze.Ke("OK").pr(hN("ui.errors.remote-preview-not-supported"));
                }
                return this.TPe(t, t.ise() || t.ucs(), { VPe: !0 });
            }
        }
        BB(t, i = "auto") {
            if ((nN.qm(t, self.Ga), t && !this.x1n() && !this.S1n() && !nN.ti.SK._K()))
                return this.TPe(t, t.ise() || t.ucs(), { Xr: !0, OPe: i });
        }
        bH(t, i = "auto") {
            if ((nN.qm(t, self.QO), !(this.x1n() || this.S1n() || nN.ti.SK._K()))) {
                if ((t || ((t = this.We().Lq()) && t.Mi() !== this.XM() && (t = null)), !t)) {
                    const i = this.XM();
                    i && (t = i.ucs());
                }
                if (t) return this.TPe(t.Mi(), t, { OPe: i });
            }
        }
        jH(t, i = "auto") {
            if ((nN.qm(t, self.QO), !(this.x1n() || this.S1n() || nN.ti.SK._K()))) {
                if ((t || ((t = this.We().Lq()) && t.Mi() !== this.XM() && (t = null)), !t)) {
                    const i = this.XM();
                    i && (t = i.ucs());
                }
                if (t) return this.TPe(t.Mi(), t, { Xr: !0, OPe: i });
            }
        }
        TPe(t, i, e) {
            nN.Et(t, self.Ga), nN.Et(i, self.QO), nN.Crt(e);
            if (((e = Object.assign({}, { Xr: !1, VPe: !1, OPe: !1, DPe: null }, e)), i.Mi() !== t))
                throw new Error("first layout from wrong project");
            return (
                "auto" === e.OPe && (e.OPe = nN.rE.aE(nN.fO.dX)),
                (e.OPe = !!e.OPe),
                this.x1n() || this.S1n() || (nN.ti.SK.fJe() && !e.DPe)
                    ? Promise.resolve(null)
                    : (this.FU(), nN.xis.TPe(t, i, e))
            );
        }
        async DB(t) {
            if ((nN.qm(t, self.Ga), t && !this.x1n() && !this.S1n() && !nN.ti.SK._K()))
                try {
                    await nN.xis.JPe(t);
                } catch (t) {
                    if ((console.error("Error exporting: ", t), t && "remote-minify-error" === t.type)) {
                        nN.ti.Ze.Ke("OK").pr(hN("ui.errors.failed-remote-minify"));
                    } else if (t && "minify-error" === t.type) {
                        nN.ti.Ze.Ke("MinifyError").pr(t.log);
                    } else {
                        nN.ti.Ze.Ke("OK").pr(hN("ui.errors.failed-to-export"));
                    }
                }
        }
        A1n(t, i) {
            return nN.Et(t, self.Ga), nN.x$(i), this.TPe(t, t.ise() || t.ucs(), { DPe: i });
        }
        async gjt(t) {
            t = Object.assign({}, vN, t);
            const i = nN.ti.SK.o$i();
            if (nN.ti.SK.K$i() && i && !i.rgt()) return;
            const e = nN.Put();
            if (!t.KJt && e && document.activeElement && !nN.ykt(document.activeElement, ["ui-propertygrid"]))
                return void this.PQn.dpn();
            const s = this.XM();
            if (!s) return;
            const n = this.ZH();
            if (!t.VZn) {
                const t = n.vjt(nN.ti.cE.Wq());
                if (t) {
                    if (t.Ejt()) return void t.gjt();
                    if (!t.sjt() && t.rjt()) return void n.Bc(t.mAt());
                }
            }
            if (!s.mei()) return;
            if (!s.dei()) return;
            await this.Odi();
            const r = (async () => {
                    if ((await this.R1n("beforeundo"), s.H1t())) return;
                    const t = this.We(),
                        i = t.uL();
                    i && t.Aq(!1);
                    const e = await s.gjt();
                    return i && t.Aq(!0), await this.R1n("afterundo"), s.AH(), e;
                })(),
                h = await this.LT(r);
            h &&
                (t.showNotification &&
                    nN.ti.Notification.XO("undo", hN("main-menu.undo"), h.Zn(), {
                        align: "bottom-left",
                        z4i: nN.ti.SK.K$i(),
                    }),
                this.MCs());
        }
        async mjt(t) {
            t = Object.assign({}, vN, t);
            const i = nN.ti.SK.o$i();
            if (nN.ti.SK.K$i() && i && !i.rgt()) return;
            const e = nN.Put();
            if (!t.KJt && e && document.activeElement && !nN.ykt(document.activeElement, ["ui-propertygrid"]))
                return void this.PQn.dpn();
            const s = this.XM();
            if (!s) return;
            const n = this.ZH();
            if (!t.VZn) {
                const t = n.vjt(nN.ti.cE.Wq());
                if (t && t.jjt()) return void t.mjt();
            }
            if (!s.mei()) return;
            if (!s.pei()) return;
            await this.Odi();
            const r = (async () => {
                    if ((await this.R1n("beforeundo"), s.H1t())) return;
                    const t = this.We(),
                        i = t.uL();
                    i && t.Aq(!1);
                    const e = await s.mjt();
                    return i && t.Aq(!0), await this.R1n("afterundo"), s.AH(), e;
                })(),
                h = await this.LT(r);
            h &&
                (t.showNotification &&
                    nN.ti.Notification.XO("redo", hN("main-menu.redo"), h.Zn(), {
                        align: "bottom-left",
                        z4i: nN.ti.SK.K$i(),
                    }),
                this.MCs());
        }
        async sme(t) {
            nN.wi(t),
                t <= 0 ||
                    (await this.FZi(t),
                    nN.ti.Notification.XO(
                        "undo",
                        hN("main-menu.undo"),
                        aN("main-menu.undo-multiple-changes", null, t),
                        { align: "bottom-left", z4i: nN.ti.SK.K$i() }
                    ));
        }
        async FZi(t) {
            if ((nN.wi(t), !(t <= 0))) return t--, await this.gjt({ showNotification: !1, VZn: !0 }), this.FZi(t);
        }
        async nme(t) {
            nN.wi(t),
                t <= 0 ||
                    (await this.VZi(t),
                    nN.ti.Notification.XO(
                        "redo",
                        hN("main-menu.undo"),
                        aN("main-menu.redo-multiple-changes", null, t),
                        { align: "bottom-left", z4i: nN.ti.SK.K$i() }
                    ));
        }
        async VZi(t) {
            if ((nN.wi(t), !(t <= 0))) return t--, await this.mjt({ showNotification: !1, VZn: !0 }), this.VZi(t);
        }
        DY() {
            for (let t of this.bQn) t.DY();
        }
        rTs(t) {
            nN.Et(t, window.QO);
            let i = self.app.We().m$(t);
            i && i.uR();
        }
        GM(t) {
            nN.Et(t, window.Zg), t.IZ() ? this.rTs(t._$().bf()) : this.rTs(t.bf());
        }
        He() {
            this.We().He(), this.ul() && this.dl()._o();
        }
        MCs() {
            this.We().He(), this.ul() && this.dl().pl();
        }
        BE(t) {
            if ((nN.qm(t, self.Ga), this.Nj !== t)) {
                if (t && !this.bQn.includes(t)) throw new Error("invalid active project");
                this.h7s(this.Nj, "beforeprojectactive"), (this.Nj = t), this.X7s(), this.h7s(this.Nj, "projectactive");
            }
        }
        Zn() {
            return this.PWn()
                ? lN("ui.title-beta", super.Zn())
                : this.w0n()
                  ? lN("ui.title-lts", super.Zn())
                  : super.Zn();
        }
        X7s() {
            let t;
            (t =
                "Chromium" === nN.fk.FRe && "standalone" === nN._Oe()
                    ? this.Nj
                        ? this.Nj.Zn()
                        : "animation" === this.Mke()
                          ? hN("ui.title-make-animations")
                          : hN("ui.title-make-games")
                    : this.Nj
                      ? this.Nj.Zn() + " - " + this.Zn()
                      : "animation" === this.Mke()
                        ? this.Zn() + " - " + hN("ui.title-make-animations")
                        : this.Zn() + " - " + hN("ui.title-make-games")),
                (document.title = t);
        }
        XM() {
            return this.bQn.length
                ? 1 === this.bQn.length
                    ? this.bQn[0]
                    : this.Nj
                      ? this.Nj
                      : this.bQn.length
                        ? this.bQn[0]
                        : null
                : null;
        }
        Tl() {
            (this.BQn = !0), (this.LQn = performance.now());
        }
        WJ() {
            return this.BQn;
        }
        bL() {
            return this.BQn ? performance.now() - this.LQn : 0;
        }
        FU() {
            (this.BQn = !1), this.Yrt("livepreviewstop");
        }
        async HZn() {
            if (await this.iD()) {
                const t = this.XM();
                t && t.iHs();
            } else this.yet();
            this.dispatchEvent(new nN.Event("accountstatechange"));
        }
        Mke() {
            return MN;
        }
        xXs(t) {
            return nN.vu(t), !t || "all" === t || MN === t;
        }
        XB() {
            return CN === SN;
        }
        iD() {
            return Promise.resolve(CN === SN);
        }
        xWn() {
            return TN;
        }
        zue() {
            return "animation" !== this.Mke();
        }
        g0n() {
            if ("gamejam" !== this.fHn()) return Promise.resolve();
            if (!UN) return Promise.resolve();
            const t = UN.name,
                i = new Date(1e3 * IN);
            nN.u.o("user-account.gamejam-license-warning");
            const e = nN.ti.Ze.Ke("OK");
            e.hr(hN(".title"));
            const s = e.pr(
                oN(
                    ".message",
                    i.toLocaleDateString(self.app.Lmt(), {
                        weekday: "long",
                        day: "numeric",
                        month: "long",
                        year: "numeric",
                    }),
                    t
                )
            );
            return nN.u.it(), s;
        }
        k1n() {
            if (!PN) return Promise.resolve();
            nN.u.o("user-account.subscription-suspended-notification");
            const t = nN.ti.Ze.Ke("OK");
            t.hr(hN(".title"));
            const i = t.pr(oN(".message", GN));
            return nN.u.it(), i;
        }
        fHn() {
            return TN ? "access-code" : CN;
        }
        Rke() {
            return _N;
        }
        dHn() {
            return IN;
        }
        YH() {
            return RN;
        }
        Hxt() {
            return Promise.resolve(RN);
        }
        xue() {
            return kN;
        }
        async Mue(t) {
            if ((nN.Et(t, self.Ga), !this.xue())) return;
            const i = t.Zn() + ".c3p";
            let e = i;
            const s = nN.u.z_("ui.share-with-sub-admin-prompt"),
                n = nN.ti.Ze.Ke("Input"),
                r = await n.pr({
                    caption: s(".caption"),
                    message: nN.m(nN.nS, s(".message"), { mq: !0, links: [nN.ON.URL.wDn] }),
                    label: s(".label"),
                    j0e: i,
                });
            if (null === r) return;
            "string" == typeof r && r && ((e = r), e.toLowerCase().endsWith(".c3p") || (e += ".c3p")), this.UQn++;
            let h = null,
                o = 0;
            try {
                const i = await this.M1n(t);
                if (((o = i.size), i.size > 104857600)) throw { responseCode: "FileTooLarge" };
                (h = this.O1n(s(".progress-status"))), h.bln(0);
                const n = await this.vst("useraccount").D1n(i, e, this.xWn(), (t) => {
                    h && h.bln(t);
                });
                if (!n.succeeded) throw n;
                nN.ti.Notification.XO("share-arrow", s(".completed.title"), s(".completed.message"), {
                    align: "bottom-left",
                    bjt: 1e4,
                }),
                    this.P7s("SaveProjectMethod", "share-with-admin");
            } catch (t) {
                console.error("[Project] Error sharing with subscription admin: ", t);
                let i = "";
                if (t && t.responseCode) {
                    const e = t.responseCode;
                    i =
                        "FileTooLarge" === e
                            ? s.njt(".errors.file-too-large", nN.nbe(o))
                            : "SubscriptionExpired" === e
                              ? s(".errors.subscription-expired")
                              : s.BIt(".errors.failed", e);
                } else i = s.BIt(".errors.failed", "unknown error");
                nN.ti.Ze.Ke("OK").pr(i);
            } finally {
                this.UQn--, h && h.Ut();
            }
        }
        DDt() {
            return ON;
        }
        kni() {
            return 1 / 0;
        }
        bLt() {
            return DN;
        }
        xni() {
            return FN;
        }
        DN() {
            return LN;
        }
        qB(t, i) {
            return (
                nN.wi(i),
                nN.qm(t, self.Ga),
                new Promise((e) => {
                    window.setTimeout(() => this.F1n(t, i), 20);
                })
            );
        }
        F1n(t, i) {
            nN.ti.Ze.Ke("FreeEditionLimit").pr(t, i);
        }
        XH(t, i) {
            return (
                nN.Et(t, self.Ga),
                nN.wi(i),
                new Promise((e) => {
                    window.setTimeout(() => this.L1n(t, i).then(e), 20);
                })
            );
        }
        L1n(t, i) {
            return nN.ti.Ze.Ke("ScriptingFeatureLimit").pr(t, i);
        }
        Yrt(t) {
            nN.vu(t);
            const i = new nN.Event(t);
            (i.app = this), this.dispatchEvent(i);
        }
        async Tqe(t) {
            nN.vu(t);
            const i = new nN.Event(t);
            (i.app = this), await this.Rze(i);
        }
        async R1n(t) {
            nN.vu(t);
            const i = new nN.Event(t);
            (i.app = this), await this.h8t(i);
        }
        h7s(t, i) {
            if ((nN.qm(t, self.Ga), nN.vu(i), t && t.Kb())) return;
            let e = new nN.Event(i);
            (e.Gb = t), this.dispatchEvent(e);
        }
        async f1n(t, i) {
            if ((nN.qm(t, self.Ga), nN.vu(i), t && t.Kb())) return;
            let e = new nN.Event(i);
            (e.Gb = t), await this.h8t(e);
        }
        yyt(t, i) {
            if ((nN.Et(t, self.dE), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.qj = t), this.dispatchEvent(e);
        }
        YVs(t, i) {
            if ((nN.Et(t, self.QO), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.layout = t), this.dispatchEvent(e);
        }
        ZLs(t, i) {
            if ((nN.Et(t, self.zO), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.tP = t), this.dispatchEvent(e);
        }
        TLt(t, i, e) {
            if ((nN.Et(t, self.nH), nN.vu(i), t.Mi().Kb())) return;
            let s = new nN.Event(i);
            (s.zX = t), this.dispatchEvent(Object.assign(s, e));
        }
        M$s(t, i) {
            if ((nN.Et(t, self.jVs), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.B1n = t), this.dispatchEvent(e);
        }
        Z$s(t, i) {
            if ((nN.Et(t, self.Hk), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.nP = t), this.dispatchEvent(e);
        }
        pJs(t, i) {
            if ((nN.Et(t, self.ZO), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.fP = t), this.dispatchEvent(e);
        }
        Tos(t, i) {
            if ((nN.Et(t, self.wE), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.na = t), this.dispatchEvent(e);
        }
        Qcs(t, i) {
            if ((nN.Et(t, self.Q_), nN.vu(i), t.Mi().Kb())) return;
            const e = new nN.Event(i);
            (e.kP = t), this.dispatchEvent(e);
        }
        Khs(t, i, e) {
            if ((nN.Et(t, self.Uhs), nN.qm(i, self.wE), nN.vu(e), t.Mi().Kb())) return;
            let s = new nN.Event(e);
            (s.container = t), (s.na = i), this.dispatchEvent(s);
        }
        zM(t, i, e) {
            if ((nN.Et(t, self.bv), nN.vu(i), t.Mi().Kb())) return;
            let s = new nN.Event(i);
            (s.j5 = t), this.dispatchEvent(Object.assign(s, e));
        }
        Sns(t, i) {
            if ((nN.Et(t, self.xte), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e._ee = t), this.dispatchEvent(e);
        }
        irs(t, i) {
            if ((nN.Et(t, self.Ste), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.Hee = t), this.dispatchEvent(e);
        }
        Xrs(t, i) {
            if ((nN.Et(t, self.Gte), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.Tee = t), this.dispatchEvent(e);
        }
        Zus(t, i, e) {
            if ((nN.Et(t, self.Uw), nN.vu(i), t.Mi().Kb())) return;
            let s = new nN.Event(i);
            (s.animation = t), this.dispatchEvent(Object.assign(s, e));
        }
        Fcs(t, i) {
            if ((nN.Et(t, self.Jm), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.Wm = t), this.dispatchEvent(e);
        }
        tfs(t, i) {
            if ((nN.Et(t, self.Kas), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.U1n = t), this.dispatchEvent(e);
        }
        UIs(t, i, e) {
            if ((nN.Et(t, self.Va), nN.vu(i), t.Mi().Kb())) return;
            const s = new nN.Event(i);
            (s.Ya = t), e && Object.assign(s, e), this.dispatchEvent(s);
        }
        PEs(t, i) {
            if ((nN.Et(t, self.Yk), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.HP = t), this.dispatchEvent(e);
        }
        gte(t, i) {
            nN.vu(t), nN.oN(i);
            let e = new nN.Event(t);
            (e.Cmt = self.app.dl()), this.dispatchEvent(Object.assign(e, i));
        }
        N1n(t) {
            if ((nN.vu(t), !self.app.vA())) return;
            let i = new nN.Event(t);
            (i.TF = self.app.BF()), this.dispatchEvent(i);
        }
        JPs(t, i, ...e) {
            if ((nN.Et(t, self.iT), nN.vu(i), t.Mi().Kb())) return;
            let s = new nN.Event(i);
            (s.timeline = t), (s.c0 = e), (s.my = () => t), this.dispatchEvent(s);
        }
        aFs(t, i, ...e) {
            if ((nN.Et(t, self._ce), nN.vu(i), t.Mi().Kb())) return;
            let s = new nN.Event(i);
            (s.track = t), (s.c0 = e), (s.my = () => t.my()), this.dispatchEvent(s);
        }
        WTs(t, i, ...e) {
            if ((nN.Et(t, self.Fce), nN.vu(i), t.Mi().Kb())) return;
            let s = new nN.Event(i);
            (s.Nee = t), (s.c0 = e), this.dispatchEvent(s);
        }
        YTs(t, i) {
            if ((nN.Et(t, self.D2), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.Eee = t), this.dispatchEvent(e);
        }
        qTs(t, i) {
            if ((nN.Et(t, self.M2), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.Vee = t), this.dispatchEvent(e);
        }
        QTs(t, i) {
            if ((nN.Et(t, self.Xk), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.yP = t), this.dispatchEvent(e);
        }
        zTs(t, i) {
            if ((nN.Et(t, self.Cce), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.Wee = t), (e.my = () => t.my()), this.dispatchEvent(e);
        }
        KTs(t, i) {
            if ((nN.Et(t, self.qce), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.$ee = t), (e.my = () => t.my()), this.dispatchEvent(e);
        }
        XTs(t, i) {
            if ((nN.Et(t, self.Lce), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.zee = t), this.dispatchEvent(e);
        }
        bUs(t, i) {
            if ((nN.Et(t, self.Zk), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.transition = t), this.dispatchEvent(e);
        }
        iVs(t, i) {
            if ((nN.Et(t, self.vUs), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.j1n = t), this.dispatchEvent(e);
        }
        xVs(t, i) {
            if ((nN.Et(t, self.Qk), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.SP = t), this.dispatchEvent(e);
        }
        N4s(t, i) {
            if ((nN.Et(t, self.sT), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.aP = t), this.dispatchEvent(e);
        }
        U6s(t, i) {
            if ((nN.Et(t, self.tE), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.uP = t), this.dispatchEvent(e);
        }
        R4s(t, i) {
            if ((nN.Et(t, self.sht), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.uot = t), this.dispatchEvent(e);
        }
        j6s(t, i) {
            if ((nN.Et(t, self.tlt), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.hat = t), this.dispatchEvent(e);
        }
        Lus(t, i) {
            if ((nN.Et(t, self.Dus), nN.vu(i), t.Mi().Kb())) return;
            let e = new nN.Event(i);
            (e.Sci = t), this.dispatchEvent(e);
        }
        nZ(t, i, e) {
            nN.Et(t, self.lG), nN.vu(i), nN.oN(e);
            let s = new nN.Event(i);
            (s.sn = t), this.dispatchEvent(Object.assign(s, e));
        }
        l3(t, i) {
            nN.vu(t), nN.oN(i);
            let e = new nN.Event(t);
            (e.Rtt = this.We().bE().tW()), (e.c0 = i), this.dispatchEvent(e);
        }
        EY(t, i) {
            nN.HZ(t, window.Zg),
                nN.vu(i),
                rN("topOfLayer" === i || "bottomOfLayer" === i || "otherLayer" === i, "invalid moveTo value");
            let e = new Map();
            for (let i of t) {
                let t = i.yr();
                e.has(t) ? e.get(t).push(i) : e.set(t, [i]);
            }
            for (let t of e.values()) t.sort(self.Zg.BSs);
            let s = new nN.Event("objectinstanceszorderchange");
            (s.moveTo = i), (s.Ytt = e), this.dispatchEvent(s);
        }
        Zti(t, i, e) {
            nN.vu(i), nN.oN(e);
            let s = new nN.Event(i);
            (s.$0s = t), e && (s.c0 = e), this.dispatchEvent(s);
        }
        $$s(t, i, e) {
            if ((nN.Et(t, self.NVs), nN.vu(i), t.Mi().Kb())) return;
            let s = new nN.Event(i);
            (s.$1n = t), this.dispatchEvent(Object.assign(s, e));
        }
        L6s(t, i, e) {
            if ((nN.Et(t, self.ggt), nN.vu(i), t.Mi().Kb())) return;
            let s = new nN.Event(i);
            (s.z1n = t), this.dispatchEvent(Object.assign(s, e));
        }
        Oke(t) {
            return nN.vu(t), new nN.ti.Tj.vln(this.mln, t);
        }
        O1n(t) {
            return nN.vu(t), new nN.ti.Tj.gln(this.mln, t);
        }
        zss() {
            return this.EQn;
        }
        Cis() {
            return this.CQn;
        }
        Eis() {
            return this._Qn;
        }
        Ris() {
            return this.TQn;
        }
        qIs() {
            return this.IQn;
        }
        async LT(t) {
            nN.Et(t, Promise), rN(!this.$Qn.has(t), "async work promise already added"), this.$Qn.add(t);
            try {
                return await t;
            } finally {
                this.$Qn.delete(t);
            }
        }
        Odi() {
            return Promise.all([...this.$Qn]);
        }
        UT() {
            return this.$Qn.size > 0;
        }
        lgi() {
            if (this.AQn) return;
            const t = self.devicePixelRatio;
            if (Math.abs(t - this.GQn) >= 0.01) {
                this.AQn = !0;
                nN.ti.Ze.Ke("OK").pr(hN("ui.zoom-level-changed-message"));
            }
        }
        lne(t) {
            return (
                nN.vu(t),
                t.startsWith("http:") ||
                    t.startsWith("https:") ||
                    (t && !t.startsWith("/") && (t = "/" + t), (t = nN.ON.URL.rrt + t)),
                t
            );
        }
        WO(t, i) {
            nN.vu(t), nN.k$(i), this.SN(this.lne(t), "OpenManualLink", i);
        }
        VEe(t, i, e) {
            let s = null;
            try {
                s = new URL(t);
            } catch (i) {
                return console.error(`Invalid URL '${t}': `, i), t;
            }
            if ("construct.net" === s.hostname || "www.construct.net" === s.hostname) {
                const t = new URLSearchParams(s.search);
                return (
                    t.append("utm_campaign", "C3Editor"),
                    t.append("utm_source", nN._Oe()),
                    t.append("utm_medium", nN.ON.fhi),
                    i && t.append("utm_term", i),
                    e && t.append("utm_content", e),
                    (s.search = t.toString()),
                    s.toString()
                );
            }
            return t;
        }
        SN(t, i, e) {
            nN.vu(t), nN.k$(i), nN.k$(e), (t = this.VEe(t, i, e)), window.open(t);
        }
        w1n() {
            return this.RQn;
        }
        V1n() {
            return this.kQn;
        }
        PWn() {
            return "beta" === this.jke();
        }
        w0n() {
            return "lts" === this.jke();
        }
        jke(t) {
            let i = nN.ON.lDn;
            return "lts" === i && t && (i = "LTS"), i;
        }
        g1n(t) {
            if (this.Skt()) return;
            if (this.OQn) return;
            const i = this.hue.uue().$de().Zde("preview");
            i &&
                (nN.u.o("ui.first-run.run-project-tip"),
                nN.ti.Tj.UK.XO(i.FO(), "info", hN(".title"), hN(".description"), { align: "bottom" }),
                nN.u.it(),
                (this.OQn = !0));
        }
        P7s(t, i) {
            let e;
            if ((nN.vu(t), "string" == typeof i)) e = { event_label: i };
            else {
                if ("object" != typeof i) throw new TypeError("invalid analytics label");
                e = i;
            }
            (this.Skt() && !t.startsWith("tutorial_")) || this.W1n({ type: "event", eventAction: t, eventData: e });
        }
        p0n(t, i, e, s = 3e5) {
            nN.vu(t),
                nN.wi(i),
                nN.k$(e),
                (i = Math.round(i)) >= s || this.W1n({ type: "timing", timingVar: t, timingValue: i, timingLabel: e });
        }
        jqn(t) {
            nN.vu(t),
                this.Hue() || this.W1n({ type: "crash", description: t, release_name: nN.ON.fhi, product_type: MN });
        }
        async H1n(t) {
            if (fN) this.P7s("LoginStateChanged", t);
            else {
                (fN = !0), await this.SQn, await this.bG.pq();
                let i = "(none)",
                    e = "no-webgl",
                    s = 0;
                if (this.Pke()) {
                    const t = this.ui();
                    t.ayn() ? ((i = "webgl" + t.PMn()), (e = t.L_n())) : ((i = "webgpu"), (e = "n/a")),
                        t.oyn() && (i += "-majorperfcaveat"),
                        (s = t._bn());
                }
                this.W1n({
                    type: "pageview",
                    page_title: document.title,
                    page_location: document.location.toString(),
                    page_referrer: document.referrer,
                    user_properties: { product_type: MN, login_state: t },
                    custom_dimensions: {
                        release_name: nN.ON.fhi + " (" + this.jke(!0) + ")",
                        language_setting: this.$J().language || "(unknown)",
                        theme: this.$J().theme || "(default)",
                        display_mode: nN._Oe(),
                        ui_mode: nN.fk.ZP ? "mobile" : "desktop",
                        webgl_support: i,
                        webgl_extensions: e,
                        webgl_max_texture_size: s,
                        device_pixel_ratio: Math.round(10 * (self.devicePixelRatio || 0)) / 10,
                    },
                });
            }
        }
        W1n(t) {
            xN ? xN(t) : (() => {})("[Analytics] Sandbox iframe unavailable, skipped logging");
        }
        async vzn() {
            let t = await localforage.getItem("c3-time-spent-in-editor");
            "number" != typeof t && (t = 0),
                localforage.setItem("c3-time-spent-in-editor", t + pN / 1e3).catch((t) => this.cme(t));
        }
        async WQn() {
            await nN.ti.SK.vJe();
            const t = nN.ti.Ze.Ke("OK");
            await t.pr(hN("ui.take-a-break-reminder"));
        }
        cme(t, i) {
            if ((nN.k$(i), (() => {})("Storage error:", t), this.HQn || this.Skt())) return;
            (this.HQn = !0),
                this.P7s("StorageError", t ? t.toString() : "<unknown>"),
                nN.u.o("ui.errors.storage-error");
            const e = nN.ti.Ze.Ke("Confirm");
            e.hr(),
                e
                    .pr({ caption: hN(".caption"), message: i || hN(".message"), jT: hN(".storage-cleanup") })
                    .then((t) => {
                        if (null === t) return void this.P7s("StorageErrorPrompt", "Cancelled");
                        this.P7s("StorageErrorPrompt", "OK-StorageCleanup");
                        nN.ti.Ze.Ke("StorageCleanup").pr();
                    }),
                nN.u.it();
        }
        IDt(t, i) {
            nN.k$(t),
                nN.k$(i),
                "UserAccountMenu" === t || "WelcomeDialog" === t || "ScriptingFeatureLimit" === t
                    ? this.SN(nN.ON.URL.xDn, t, i)
                    : this.uQn.xz()
                      ? (this.uQn.K1n(t, i), this.KJ(this.uQn.dF()))
                      : (this.uQn.K1n(t, i), this.uQn.eD(!0));
        }
        async m0n() {
            if (!new URLSearchParams(location.search).has("openmru")) return;
            const t = await self.pue.jr();
            if (0 === t.length) return;
            const i = nN.ti.Ze.Ke("OK");
            await i.pr("Click OK to open most recently used project, as this may need a user gesture."),
                await self.pue.$O(t[0]);
        }
        zNs() {
            return this.HNs || (this.HNs = new AudioContext()), this.HNs;
        }
    }),
        Object.freeze(window.qZn.prototype);
    const JN = window.qZn.prototype,
        ZN = [
            JN.XB,
            JN.fHn,
            JN.dHn,
            JN.DDt,
            JN.bLt,
            JN.xni,
            JN.DN,
            JN.iD,
            JN.xWn,
            JN.Rke,
            JN.YH,
            JN.Hxt,
            JN.Mke,
            JN.xXs,
        ],
        QN = new Set([
            "https://account.construct.net",
            "https://accountbeta.construct.net",
            "https://addons.construct.net",
            "https://cloud.construct.net",
            "https://stats.construct.net",
        ]),
        tj = new Map(),
        ij = 4e3;
    let ej = -1;
    const sj = window.setTimeout,
        nj = document.getElementsByTagName("iframe"),
        rj = document;
    function hj(t) {
        let i = t.parentNode;
        for (; i; ) {
            if (i === rj) return !0;
            i = i.parentNode;
        }
        return !1;
    }
    function oj() {
        throw (
            ((YN.XZn = null),
            (YN.wJ = null),
            (YN.mln = null),
            (YN.hue = null),
            (YN.YZn = null),
            (YN.bG = null),
            (YN.HAt = null),
            (YN.iot = null),
            (YN.QZn = null),
            (YN.tQn = null),
            (YN.iQn = null),
            (YN.I3t = null),
            (YN.eQn = null),
            (YN.sQn = null),
            (YN.nQn = null),
            (YN.rQn = null),
            (YN.hQn = null),
            (YN.oQn = null),
            (YN.aQn = null),
            (YN.lQn = null),
            (YN.cQn = null),
            (YN.dQn = null),
            (YN.fQn = null),
            (YN.PQn = null),
            (YN.bQn = []),
            (YN.Nj = null),
            YN._a && YN._a.Ut(),
            (YN._a = null),
            HN(null),
            new Error("security exception"))
        );
    }
    function aj() {
        (ej = -1), lj();
    }
    function lj() {
        if ((-1 !== ej && window.clearTimeout(ej), !nN.Lh())) return;
        ej = sj(aj, ij);
        const t = new Set();
        for (let i = 0, e = nj.length; i < e; ++i) {
            const e = nj[i];
            if (!e.src) continue;
            const s = new URL(e.src).origin.toLowerCase();
            if (QN.has(s)) {
                if (tj.has(s)) {
                    if (tj.get(s) !== e) return void oj();
                } else tj.set(s, e);
                if (t.has(s)) return void oj();
                t.add(s);
            }
        }
        for (const t of tj.values()) if (!hj(t)) return void oj();
        if (ZN) {
            const t = ZN,
                i = self.app;
            if (
                t[0] !== i.XB ||
                t[1] !== i.fHn ||
                t[2] !== i.dHn ||
                t[3] !== i.DDt ||
                t[4] !== i.bLt ||
                t[5] !== i.xni ||
                t[6] !== i.DN ||
                t[7] !== i.iD ||
                t[8] !== i.xWn ||
                t[9] !== i.Rke ||
                t[10] !== i.YH ||
                t[11] !== i.Hxt ||
                t[12] !== i.Mke ||
                t[13] !== i.xXs ||
                Object.getPrototypeOf(i) !== JN
            )
                return void oj();
        }
    }
    document.addEventListener("pointermove", lj, !0), sj(aj, ij);
}
{
    const uj = self.t;
    function cj(t, i, e = !0) {
        (e && uj.ti.SK.K$i()) || t.dispatchEvent(uj.m(uj.Event, i, !0));
    }
    function dj() {}
    const fj = uj.fk.q9t ? "meta" : "ctrl",
        pj = [
            new uj.ti.qfn(uj.fO.zdt, "delete"),
            new uj.ti.qfn(uj.fO.F2, "rename"),
            new uj.ti.qfn(uj.fO.o3, "edit"),
            new uj.ti.qfn(fj, uj.fO.A, "select-all"),
            new uj.ti.qfn(fj, uj.fO.D, "unselect"),
            new uj.ti.qfn(fj, uj.fO.c$e, "scroll-to-start"),
            new uj.ti.qfn(fj, uj.fO.u$e, "scroll-to-end"),
            new uj.ti.qfn("alt", "shift", uj.fO.W8, "back"),
            new uj.ti.qfn("alt", "shift", uj.fO.N8, "next"),
            new uj.ti.qfn("alt", "shift", uj.fO.B, "back").epn(),
            new uj.ti.qfn("alt", "shift", uj.fO.N, "next").epn(),
            new uj.ti.qfn(fj, uj.fO.Z, (t) => cj(t, "undo", !1)),
            new uj.ti.qfn(fj, uj.fO.Y, (t) => cj(t, "redo", !1)),
            new uj.ti.qfn(fj, uj.fO.OBt, "zoom-in").npn(),
            new uj.ti.qfn(fj, uj.fO.TBt, "zoom-out").npn(),
            new uj.ti.qfn(fj, "shift", uj.fO.OBt, "zoom-in-more").npn(),
            new uj.ti.qfn(fj, "shift", uj.fO.TBt, "zoom-out-more").npn(),
            new uj.ti.qfn(fj, uj.fO.K5t, "reset-zoom").npn(),
            new uj.ti.qfn(fj, uj.fO.F, (t) => t.zIt()).epn(),
            new uj.ti.qfn(fj, "shift", uj.fO.F, (t) => t.W0n()),
            new uj.ti.qfn(fj, uj.fO.P, (t) => cj(t, "print")),
            new uj.ti.qfn(fj, uj.fO.N, (t) => t.VO()),
            new uj.ti.qfn("alt", uj.fO.N, (t) => t.YWn()),
            new uj.ti.qfn(fj, uj.fO.O, (t) => t.KO(t.B0n())),
            new uj.ti.qfn(fj, uj.fO.S, (t) => t.HB(t.XM())).epn(),
            new uj.ti.qfn(uj.fO.F4, (t) => t.TB(t.XM(), !1)).epn(),
            new uj.ti.qfn("shift", uj.fO.F4, (t) => t.BB(t.XM(), !1)).epn(),
            new uj.ti.qfn(uj.fO.F5, (t) => t.bH(null, !1)).epn(),
            new uj.ti.qfn(fj, uj.fO.F5, (t) => t.jH(null, !1)).epn(),
            new uj.ti.qfn("shift", uj.fO.F5, (t) => t.jH(null, !1)).epn(),
            new uj.ti.qfn("alt", uj.fO.mVi, (t) => t.TB(t.XM(), !0)),
            new uj.ti.qfn("alt", "shift", uj.fO.mVi, (t) => t.BB(t.XM(), !0)),
            new uj.ti.qfn("alt", uj.fO.gVi, (t) => t.bH(null, !0)),
            new uj.ti.qfn("alt", "shift", uj.fO.gVi, (t) => t.jH(null, !0)),
            new uj.ti.qfn(uj.fO.F6, (t) => t.DB(t.XM())).epn(),
            new uj.ti.qfn(uj.fO.F9, (t) => {
                const i = t.XM();
                i && "webfs-local-folder" === i.m_() && i.mN(i.jB());
            }).epn(),
            new uj.ti.qfn(fj, uj.fO.E, "go-to-event-sheet"),
            new uj.ti.qfn("shift", uj.fO.S, "go-to-associated"),
            new uj.ti.qfn(fj, "shift", uj.fO.V8, "move-to-top"),
            new uj.ti.qfn(fj, "shift", uj.fO.K8, "move-to-bottom"),
            new uj.ti.qfn(fj, uj.fO.R, "start-all-live-previews"),
            new uj.ti.qfn(fj, "shift", uj.fO.R, (t) => t.FU()),
            new uj.ti.qfn(fj, uj.fO.L, "go-to-layout"),
            new uj.ti.qfn("ctrl", "shift", uj.fO.N8, (t) => cj(t, "next-tab")),
            new uj.ti.qfn("ctrl", "shift", uj.fO.W8, (t) => cj(t, "previous-tab")),
            new uj.ti.qfn("alt", uj.fO.W, (t) => cj(t, "close-current-tab")).epn(),
            new uj.ti.qfn(fj, uj.fO.j$e, (t) => cj(t, "replace-whole-hierarchy")),
            new uj.ti.qfn(fj, uj.fO.$$e, (t) => cj(t, "modify-existing-hierarchy")),
            new uj.ti.qfn("alt-gr", uj.fO.Q9t("open-square-bracket"), (t) => cj(t, "replace-whole-hierarchy")),
            new uj.ti.qfn("alt-gr", uj.fO.Q9t("close-square-bracket"), (t) => cj(t, "modify-existing-hierarchy")),
            new uj.ti.qfn("alt", uj.fO.N8, dj),
            new uj.ti.qfn("alt", uj.fO.W8, dj),
            new uj.ti.qfn("meta", uj.fO.N8, dj),
            new uj.ti.qfn("meta", uj.fO.W8, dj),
        ];
    window.QQn = pj;
}
{
    const mj = self.t;
    let wj = null;
    const gj = !!window.C3_IsPopupWindow,
        yj = new Map([
            ["propertiesbar", "components/bars/propertiesBar/propertiesBar.html"],
            ["midpane", "components/misc/midPane/midPane.html"],
            ["projectbar", "components/bars/projectBar/projectBar.html"],
            ["layersbar", "components/bars/layersBar/layersBar.html"],
            ["tilemapbar", "components/bars/tilemapBar/tilemapBar.html"],
            ["zorderbar", "components/bars/zOrderBar/zOrderBar.html"],
            ["instancebar", "components/bars/instanceBar/instanceBar.html"],
            ["bookmarksbar", "components/bars/bookmarksBar/bookmarksBar.html"],
            ["mainMenu", "components/misc/mainMenu/mainMenu.html"],
            ["findresultsbar", "components/bars/findResultsBar/findResultsBar.html"],
            ["findreferencesbar", "components/bars/findReferencesBar/findReferencesBar.html"],
            ["startpage2", "components/misc/startPage2/startPage2.html"],
            ["examplebrowser", "components/misc/exampleBrowser/exampleBrowser.html"],
            ["useraccount", "components/misc/userAccount/userAccount.html"],
            ["buynowpage", "components/misc/buyNowPage/buyNowPage.html"],
            ["timelineBar", "components/bars/timelineBar/timelineBar.html"],
            ["guidedtourcontroller", "components/misc/tourController/tourController.html"],
            ["remotePreviewBar", "components/bars/remotePreviewBar/remotePreviewBar.html"],
            ["assetBrowserBar", "components/bars/assetBrowserBar/assetBrowserBar.html"],
        ]),
        bj = new Map([
            ["layoutview", "components/editors/layoutView/layoutView.html"],
            ["eventsheetview", "components/editors/eventSheetView/eventSheetView.html"],
            ["flowchartview", "components/editors/flowchartView/flowchartView.html"],
            ["texteditor", "components/editors/textEditor/textEditor.html"],
            ["dataeditor", "components/editors/dataEditor/dataEditor.html"],
        ]);
    function vj(t) {
        self.C3_SetLoadingHTML(t);
    }
    window.C3_OnAppFatalLoadError = function (t) {
        if (window.C3_HadLoaderError) return;
        window.C3_HadLoaderError = !0;
        const i = document.createElement("div");
        i.classList.add("apploaderrorcontainer");
        const e = document.createElement("div");
        e.classList.add("apploadererrormessage"),
            (e.innerHTML =
                "<strong>Oops! There was an error loading Construct.</strong><br>Try the following:<ul ><li>Check your Internet connection is working.</li><li>Try disabling any browser addons you have installed. These can sometimes break Construct. In particular, Kaspersky Internet Security has been known to cause problems.</li><li>Check ad or tracking blocking settings which can also sometimes break Construct, including if you use a VPN. In particular, NordVPN has been known to cause problems.</li><li>Clear your browser cache and try again.</li><li>Press F12 and look for any additional errors in the browser console.</li></ul>Error details: " +
                t),
            i.appendChild(e),
            document.body.appendChild(i),
            wj && wj.P7s("LoadError", "" + t);
    };
    let Sj = 0,
        xj = 0;
    async function Mj() {
        mj.ZJ("Bootstrap"),
            mj.$Te(),
            gj || vj("Loading UI..."),
            (wj = mj.m(self.qZn)),
            (!mj.C7s() && mj.XTe) || Object.seal(wj),
            await wj.Mmn();
        const t = wj.$J().uiMode;
        "mobile" === t
            ? ((mj.fk.ZP = !0), (mj.fk.Bj = !1), mj.ti.dXe())
            : "desktop" === t && ((mj.fk.ZP = !1), (mj.fk.Bj = !0), mj.ti.dXe()),
            gj || (vj("Loading..."), Tj());
        const i = mj.u.Yc(wj.$J().language),
            e = mj.ti.VW.gYt("default"),
            s = Cj(yj);
        gj ||
            s.then(() => {
                Ij(), vj("Starting...");
            }),
            await Promise.all([i, e]),
            mj.dq("Bootstrap"),
            await Pj({ i0n: s, T0n: bj });
    }
    async function Ej(t, i) {
        await mj.mPe(i, !1), xj++;
    }
    function Cj(t) {
        const i = [];
        for (const [e, s] of t) i.push(Ej(0, s));
        return (Sj += i.length), Promise.all(i);
    }
    window.c3_mainLoadPromise = Mj().catch((t) => window.C3_OnAppFatalLoadError(t));
    let _j = -1;
    function Tj() {
        let t = -1;
        _j = window.setInterval(() => {
            const i = xj,
                e = Sj;
            if (0 === e) return;
            const s = Math.round((100 * i) / e);
            s !== t && (vj("Loading (" + s + "%)..."), (t = s));
        }, 100);
    }
    function Ij() {
        -1 !== _j && (window.clearInterval(_j), (_j = -1));
    }
    async function Pj(t) {
        if (
            !window.C3_HadLoaderError &&
            (await wj.gYt(t),
            gj
                ? mj.C7s() ||
                  (await mj.mPe("projectResources.html", !0),
                  await Promise.all([...t.T0n.values()].map((t) => mj.mPe(t, !1))))
                : (mj.ti.nXe(), await wj.Imn(t)),
            mj.Xr)
        ) {
            const t = mj.E4s.Ke("project");
            if (t) {
                if ("new" === t) return void wj.YWn();
                await wj.h1n(`exampleProjects/debug/${t}.capx`);
                const i = wj.bQn[0],
                    e = mj.E4s.Ke("layout");
                if (e) {
                    const t = i.eet(e);
                    t && wj.lH(t);
                } else {
                    const t = mj.E4s.Ke("eventsheet");
                    if (t) {
                        const e = i.ret(t);
                        e && wj.wH(e);
                    }
                }
            }
        }
    }
}
{
    const Gj = self.t,
        Aj = self.lang,
        Rj = "C3_RecentProjects",
        kj = 2,
        Oj = 10,
        Dj = new Set(["cloud", "webfs-single-file", "webfs-local-folder"]),
        Fj = new Set(["DROPBOX", "ONE DRIVE", "GOOGLE DRIVE", "LOCAL STORAGE"]);
    let Lj = [],
        Bj = null;
    function Uj(t) {
        const i = {};
        for (const [e, s] of t) Object.defineProperty(i, e, { writable: !1, value: s, enumerable: !0 });
        return i;
    }
    async function Nj(t, i) {
        Gj.Et(t, self.Ga), Gj.vu(i);
        const e = t.m_();
        if (!Dj.has(e)) return;
        const s = await t.e7s(),
            n = t.Zn(),
            r = t.nA(),
            h = t.Ote(),
            o = Date.now(),
            a = t.p_(),
            l = Uj([
                ["modified", o],
                ["system", e],
                ["project", n],
                ["version", h],
                ["name", i],
                ["uuid", s],
                ["project-id", r],
                ["ref", a],
            ]);
        if (!$j(l))
            throw (
                (console.error("[Construct] Invalid recent project entry: ", l),
                new Error("invalid recent project entry"))
            );
        let u;
        if (
            ((u =
                "webfs-single-file" === e
                    ? await Kj(a.fileHandle)
                    : "webfs-local-folder" === e
                      ? await qj(a.folderHandle)
                      : Hj(r) || Hj(s)),
            u)
        ) {
            const t = Lj.indexOf(u);
            Lj.splice(t, 1);
        }
        Lj.push(l), Lj.sort((t, i) => i.modified - t.modified), Lj.length > Oj && (Lj = Lj.slice(0, Oj)), await Yj();
    }
    async function jj(t, i) {
        if ((Gj.vu(t), Gj.k$(i), i))
            for (let e = 0, s = Lj.length; e < s; e++) {
                const s = Lj[e],
                    n = s.ref;
                if ("cloud" === s.system && (!n || (n.service === i && n.id === t))) {
                    Lj.splice(e, 1), await Yj();
                    break;
                }
            }
        else
            for (let i = 0, e = Lj.length; i < e; i++)
                if (Lj[i].uuid === t) {
                    Lj.splice(i, 1), await Yj();
                    break;
                }
    }
    function $j(t) {
        if (!Gj.q$t(t)) return !1;
        if (!("ref" in t)) return !1;
        const i = t.system;
        return (
            !!Dj.has(i) &&
            ("cloud" === i
                ? zj(t.ref)
                : "webfs-single-file" === i
                  ? Vj(t.ref)
                  : "webfs-local-folder" === i
                    ? Wj(t.ref)
                    : Gj.tet(t.ref))
        );
    }
    function zj(t) {
        if (!Gj.q$t(t)) return !1;
        const i = t.service,
            e = t.name,
            s = t.id,
            n = t.parent;
        return !!(Gj.tet(i) && Gj.tet(e) && Gj.tet(s) && Gj.tet(n)) && Fj.has(i);
    }
    function Vj(t) {
        return !!Gj.q$t(t) && t.fileHandle instanceof FileSystemFileHandle;
    }
    function Wj(t) {
        return !!Gj.q$t(t) && t.folderHandle instanceof FileSystemDirectoryHandle;
    }
    function Hj(t) {
        Gj.vu(t);
        for (const i of Lj) if (i.uuid === t) return i;
    }
    async function Kj(t) {
        try {
            for (const i of Lj)
                if ("webfs-single-file" === i.system) {
                    const e = i.ref.fileHandle;
                    if (await t.isSameEntry(e)) return i;
                }
            return null;
        } catch (t) {
            return (() => {})("Error looking for existing recent project file: ", t), null;
        }
    }
    async function qj(t) {
        try {
            for (const i of Lj)
                if ("webfs-local-folder" === i.system) {
                    const e = i.ref.folderHandle;
                    if (await t.isSameEntry(e)) return i;
                }
            return null;
        } catch (t) {
            return (() => {})("Error looking for existing recent project folder: ", t), null;
        }
    }
    async function Xj() {
        try {
            await Jj();
        } catch (t) {
            (() => {})("Failed to retrieve recent project meta data: ", t), (Lj = []);
        }
    }
    async function Yj() {
        try {
            await localforage.setItem(Rj, { version: kj, data: Lj });
        } catch (t) {
            (() => {})("Unable to store recent project meta data: ", t), await Jj();
        }
        self.app.Yrt("recentprojectschange");
    }
    async function Jj() {
        const t = await localforage.getItem(Rj);
        if (null === t) Lj = [];
        else {
            const i = t.version,
                e = t.data;
            i === kj && (Lj = e);
        }
    }
    (Bj = Xj()),
        (window.pue = {
            async gl(t, i) {
                Gj.Et(t, self.Ga), Gj.vu(i), await Bj;
                try {
                    await Nj(t, i);
                } catch (t) {
                    console.error("Failed to update recent projects", t);
                }
            },
            jr: async () => (await Bj, Lj.slice(0)),
            async zb(t, i) {
                Gj.vu(t), Gj.k$(i), await Bj, await jj(t, i);
            },
            async _x() {
                await Bj, (Lj.length = 0), await Yj();
            },
            async $O(t) {
                if (!self.app.x1n())
                    try {
                        await self.app.I1n(t);
                    } catch (i) {
                        let e;
                        (() => {})("Failed to open recent project: ", i),
                            "string" == typeof i
                                ? (e = i)
                                : 404 === i.code ||
                                    "ENOENT" === i.code ||
                                    "path/not_found/.." === i.message ||
                                    "path/not_found/." === i.message
                                  ? (await jj(t.uuid, null), (e = Aj("main-menu.project-menu.open-recent-not-found")))
                                  : (e =
                                        "aborted" === i.message
                                            ? Aj("main-menu.project-menu.open-recent-abort")
                                            : "webfs-single-file" === t.system || "webfs-local-folder" === t.system
                                              ? Aj("main-menu.project-menu.open-recent-webfs-error")
                                              : Aj("main-menu.project-menu.open-recent-fail"));
                        Gj.ti.Ze.Ke("OK").pr(e);
                    }
            },
        });
}
{
    const Zj = self.t,
        Qj = self.pue,
        t$ = self.lang;
    window.C3_IsPopupWindow ||
        (self.tj = class {
            static xN(t, i, e) {
                return (
                    Zj.vu(t),
                    Zj.vu(i),
                    Zj.vu(e),
                    this.X1n.Ke(e)
                        .q1n(i, t)
                        .then((i) => Zj.IRt(t, i))
                );
            }
            static async T_(t, i, e, s) {
                return Zj.vu(i), Zj.vu(t), Zj.vu(e), Zj.vu(s), await Qj.zb(t, this.Gqt), this.X1n.Ke(e).Y1n(t, s, i);
            }
            static LVn(t, i, e) {
                return Zj.vu(i), Zj.vu(e), Zj.vu(t), this.X1n.Ke(e).LVn(t, i);
            }
            static XVn(t) {
                return Zj.vu(t), this.X1n.Ke(t).XVn();
            }
            static async X_(t, i, e) {
                return Zj.vu(i), Zj.vu(t), Zj.vu(e), await Qj.zb(t, this.Gqt), this.X1n.Ke(e).J1n(t, i);
            }
            static UVn(t, i, e, s, n) {
                return Zj.nOe(t, Blob), Zj.k$(i), Zj.vu(s), Zj.vu(e), Zj.vu(n), this.X1n.Ke(n).Z1n(t, e, i, s);
            }
            static G1n(t) {
                return this.X1n.G1n(t);
            }
            static async LXn() {
                try {
                    return await this.X1n.Ke("LOCAL STORAGE").rB();
                } catch (t) {
                    return console.error(t), !1;
                }
            }
            static async $O(t) {
                t = !!t;
                const i = Zj.ti.Ze.Ke("FileList"),
                    e = await i.rWn(t, !1);
                if (!e) return null;
                const [s, n] = e;
                try {
                    return await this.X1n.Ke(s).o1n(n.id, n.name, n.parent);
                } catch (t) {
                    this.X1n.Q1n(t, t$("ui.errors.failed-to-open-c3-project"));
                }
            }
            static async Blt(t, i) {
                Zj.Et(t, self.Ga), (i = !!i);
                const e = Zj.ti.Ze.Ke("FileList"),
                    s = t.AO() || t.Zn() + ".c3p",
                    n = await e.oWn(s, i, !1);
                if (!n) return null;
                let [r, h, o, a] = n;
                return this.X1n.Ke(r).HB(t, h, o, a, !1, null);
            }
            static async P1n(t) {
                Zj.Dpt(t);
                const i = t.ref,
                    e = i.service,
                    s = i.id,
                    n = i.name || t.name,
                    r = i.parent,
                    h = this.X1n.Ke(e);
                if ("GOOGLE DRIVE" != e || (await h.t2n(s, r))) return h.o1n(s, n, r);
                throw { code: 404, message: "Not Found", response: "Not Found", status: "Not Found" };
            }
            static async T1n(t) {
                Zj.Et(t, self.Ga);
                const i = t.m_(),
                    e = t.p_();
                try {
                    if ("cloud" !== i)
                        throw new Error(
                            `${t.Zn()} does not originate from the cloud, and therefore cannot be quick saved`
                        );
                    const s = this.X1n.Ke(e.service),
                        n = e.id,
                        r = e.parent,
                        h = e.name;
                    await s.HB(t, h, n, r, !1, null);
                } catch (t) {
                    console.error("[Project] Exception saving: ", t);
                    Zj.ti.Ze.Ke("OK").pr(t$("ui.save-error"));
                }
            }
            static Uls(t, i, e) {
                return Zj.vu(t), Zj.k$(e), (i = !!i), this.X1n.Ke(t).Uls(i, e);
            }
        });
}
{
    const i$ = self.t,
        e$ = self.app,
        s$ = self.tj,
        n$ = self.lang,
        r$ = self.ej,
        h$ = new Set(["cloud", "webfs-single-file", "webfs-local-folder"]),
        o$ = new Set(["DROPBOX", "ONE DRIVE", "GOOGLE DRIVE", "LOCAL STORAGE"]);
    let a$ = 6e4,
        l$ = null,
        u$ = null;
    function c$() {
        i$.ti.Ze.Ke("Settings").pr();
    }
    async function d$(t) {
        const i = [...e$.MO()]
            .filter((i) => {
                if (s$.G1n(i)) return !1;
                const e = i.m_();
                return !("MATCH" === t && !h$.has(e)) && null === i.M7s() && !!i.AO() && i.o7s();
            })
            .map((i) => {
                let e = t;
                const s = i.m_(),
                    n = i.p_();
                return (
                    "MATCH" === e &&
                        (e = "webfs-single-file" === s || "webfs-local-folder" === s ? "WEBFS FOLDER" : n.service),
                    { Gb: i, location: e }
                );
            });
        if (0 === i.length) return;
        if (i.some((t) => "WEBFS FOLDER" === t.location)) {
            if (!(await f$())) return;
        }
        let e = !1;
        for (const s of i) {
            const i = s.Gb,
                n = s.location;
            if ("WEBFS FOLDER" === n) {
                (await p$(i)) || (e = !0);
            } else if (o$.has(n)) {
                const e = "MATCH" === t;
                await m$(i, n, e);
            }
        }
        if (e) {
            const t = i$.ti.Ze.Ke("OK");
            await t.pr(n$("ui.local-backup-folder-messages.folder-permission-denied")), c$();
        }
    }
    async function f$() {
        const t = i$.ti.Ze.Ke("OK");
        if (!l$ || !i$.Y$.bue) return await t.pr(n$("ui.local-backup-folder-messages.folder-unavailable")), c$(), !1;
        let i = await l$.queryPermission({ mode: "readwrite" });
        if ("denied" === i) return await t.pr(n$("ui.local-backup-folder-messages.folder-permission-denied")), c$(), !1;
        if ("prompt" === i) {
            await t.pr(n$("ui.local-backup-folder-messages.folder-permission-prompt")), i$.ti.jqe.eD();
            try {
                i = await l$.requestPermission({ mode: "readwrite" });
            } catch (t) {
                (() => {})("Backup folder permission prompt failed: ", t), (i = "declined");
            } finally {
                i$.ti.jqe.Xrt();
            }
            return (
                "granted" === i ||
                (await t.pr(n$("ui.local-backup-folder-messages.folder-permission-denied")), c$(), !1)
            );
        }
        return !0;
    }
    async function p$(t) {
        const i = t.m_(),
            e = t.AO(),
            s = i$.vfs(`${i$.hbe(e).name}-${t.nA()}.c3p`),
            n = n$("ui.local-backup-folder-messages.location"),
            r = s$.X1n.i2n(r$("ui.cloud-save.autosaving-project-to", t.Zn(), n));
        try {
            if (s$.X1n.G1n(t)) throw new Error(r$("ui.cloud-save.already-saving", t.Zn()));
            t.j7s({ mode: i, name: e }), t.N7s(!0);
            const r = await s$.X1n.e2n(t, !0);
            return (
                t.R7s(),
                t.N7s(!1),
                await i$.vRt.a_s(l$, s, r),
                i$.ti.Notification.XO("open-folder", n, r$("ui.cloud-save.save-succeeded", s), {
                    align: "bottom-left",
                }),
                !0
            );
        } catch (t) {
            return (() => {})("Error autosaving project to local backup folder: ", t), !1;
        } finally {
            r.Ut(), t.R7s(), t.N7s(!1);
        }
    }
    async function m$(t, i, e) {
        const s = t.m_(),
            n = t.p_(),
            r = t.AO(),
            h = i$.hbe(r).name + "._autosave_.c3p",
            o = s$.X1n.Ke(i),
            a = o.mCt(),
            l = s$.X1n.i2n(r$("ui.cloud-save.autosaving-project-to", t.Zn(), a));
        try {
            const i = e ? n.parent : "root",
                a = (await o.Uls(!1, i)).filter(({ name: t }) => t === h),
                l = 1 === a.length ? a[0].id : null,
                u = { mode: s, name: r, meta: n };
            if (o.G1n(t)) throw new Error(r$("ui.cloud-save.already-saving", t.Zn()));
            await o.HB(t, h, l, i, !0, u);
        } catch (i) {
            await s$.X1n.Q1n(i, r$("ui.cloud-save.unknown-error-while-saving", t.Zn(), a));
        } finally {
            l.Ut();
        }
    }
    async function w$() {
        const t = 60 * (e$.$J().autosaveDuration || 1) * 1e3;
        t !== a$ && u$.Ids(t), (a$ = t);
        try {
            l$ = await localforage.getItem("local-backup-folder");
        } catch (t) {
            (l$ = null), (() => {})("Failed to load local backup folder handle: ", t);
        }
    }
    window.C3_IsPopupWindow ||
        ((u$ = i$.m(
            i$.BWe,
            async () => {
                const t = e$.$J(),
                    i = t && t.autoSave,
                    e = i$.ti.Tj.Dqn;
                i && !e.Vqn() && (await i$.ti.SK.vJe(), await d$(t.autosaveLocation));
            },
            a$,
            { LWe: !0 }
        )),
        i$.Xa.Wa(e$, "settingschange", w$),
        i$.Xa.Wa(i$.vF, "afterload", w$));
}
window.s2n = function (t, i) {
    const e = new Map(),
        s = new Map();
    let n = 0;
    function r(t, i, e) {
        h("reply", t, i, e);
    }
    function h(i, e, s, n) {
        n instanceof Error && (n = { message: n.message, stack: n.stack }),
            t({ type: i, supplement: e, id: s, data: n });
    }
    return {
        n2n: async function (t) {
            const n = t.type,
                h = t.id,
                o = t.data;
            if ("reply" === n) {
                const i = e.get(h),
                    s = t.supplement;
                i &&
                    ("success" === s && (i.r2n(o), e.delete(h)),
                    "error" === s && (i.error(o), e.delete(h)),
                    "update" === s && i.update && i.update(o));
            }
            if ("request" === n) {
                const e = t.supplement,
                    n = (t) => r("update", h, t),
                    a = window.t ? window.t.ebe : new window.ebe();
                s.set(h, a);
                try {
                    const t = i ? await i(e, o, n, a) : null;
                    r("success", h, t);
                } catch (t) {
                    r("error", h, t);
                }
            }
            if ("cancel" === n) {
                const i = t.data,
                    e = s.get(i);
                try {
                    e && (await e.Ua()), r("success", h);
                } catch (t) {
                    r("error", h, t);
                }
            }
        },
        request: function (t, i, s, r) {
            return new Promise((o, a) => {
                const l = n++;
                e.set(l, { r2n: o, error: a, update: s }),
                    r &&
                        r.oVe(() => {
                            h("cancel", null, n++, l);
                        }),
                    (function (t, i, e) {
                        h("request", t, i, e);
                    })(t, l, i);
            });
        },
    };
};
{
    const g$ = self.t,
        y$ = self.app,
        b$ = self.tj,
        v$ = self.lang,
        S$ = "cloud/sandbox.html",
        x$ = g$.m(g$.ti.Tj.rln),
        M$ = new Map();
    let E$ = null,
        C$ = !1;
    function _$() {
        if (E$) return E$;
        const t = T$(
            S$,
            location.protocol + "//" + location.host,
            "allow-scripts allow-popups allow-modals allow-same-origin allow-popups-to-escape-sandbox",
            function (t, i) {
                if ("authenticate" === t) return I$(i);
                if ("sign-out" === t) return P$(i);
                throw new Error("Unknown request type");
            }
        );
        return (E$ = t), t;
    }
    async function T$(t, i, e, s) {
        let n;
        const { n2n: r, request: h } = self.s2n(function (t) {
            n.NOe(t);
        }, s);
        return (n = await g$.LOe({ src: t, BOe: i, UOe: (t) => r(t.data), sandbox: e })), h;
    }
    async function I$(t) {
        const i = t.auth,
            e = t.redirect,
            s = t.token;
        t.service;
        g$.vu(i), g$.vu(e), g$.vu(s);
        const n = window.screenX + window.outerWidth / 2 - 240,
            r = window.screenY + window.outerHeight / 2 - 320;
        let h = await g$.ti.LYe.tJe(i, {
            features: `width=480,height=640,left=${n},top=${r},menubar=no,toolbar=no,location=no,personalbar=no,status=no,dependent=yes,dialog=yes,resizable=yes,scrollbars=no`,
            name: "Cloud Auth",
        });
        if (!h) throw v$("ui.dialogs.fileList.popupBlocked");
        h = h.window;
        const o = v$("ui.cloud-save.awaiting-authentication"),
            a = g$.m(g$.ti.Tj.vln, x$, o);
        a.eD();
        const l = g$.ti.Ze.Ke("FileList");
        return (
            l.xz() && l.FVn(o),
            new Promise((t, i) => {
                const e = async () => {
                    let n;
                    try {
                        const r = await localforage.getItem("auth_" + s);
                        if (r) {
                            try {
                                await localforage.removeItem("auth_" + s);
                            } catch (t) {}
                            (n = r), a.Ut(), t(n);
                        } else {
                            let t = !1;
                            try {
                                h.closed && (t = !0);
                            } catch (t) {}
                            n ||
                                (t
                                    ? (a.Ut(), i(v$("ui.dialogs.fileList.userAuthenticationCancelled")))
                                    : setTimeout(e, 50));
                        }
                    } catch (t) {}
                };
                e();
            })
        );
    }
    async function P$(t) {
        const i = t.url;
        g$.vu(i);
        const e = window.screenX + window.outerWidth / 2 - 240,
            s = window.screenY + window.outerHeight / 2 - 320;
        if (
            !(await g$.ti.LYe.tJe(i, {
                features: `width=480,height=640,left=${e},top=${s},menubar=no,toolbar=no,location=no,personalbar=no,status=no,dependent=yes,dialog=yes,resizable=yes,scrollbars=no`,
                name: "Cloud Auth Signout",
            }))
        )
            throw v$("ui.dialogs.fileList.popupBlocked");
    }
    if (!window.C3_IsPopupWindow) {
        function G$() {
            const t = y$.$J();
            C$ = t.cloudCache || !1;
        }
        g$.Xa.Wa(y$, "settingschange", G$),
            g$.Xa.Wa(g$.vF, "afterload", G$),
            (b$.h2n = class {
                constructor(t) {
                    (this.Gqt = t), (this.o2n = new Map()), (this.a2n = null);
                }
                l2n(t) {
                    if (!C$) return null;
                    const i = this.o2n.get(t),
                        e = i && i.children;
                    return e || null;
                }
                u2n(t) {
                    this.o2n.get(t);
                }
                c2n(t) {
                    (t.detached = !0), this.o2n.set(t.id, t);
                }
                d2n(t) {
                    if ("folder" === t.type) {
                        const i = this.o2n.get(t.id);
                        if (i && !0 === i.stub) {
                            const e = i.children;
                            null !== e && (t.children = e);
                        }
                    }
                    this.o2n.set(t.id, t);
                }
                async f2n(t, i) {
                    if ((g$.Et(i, Promise), g$.vu(t), !C$)) return await i;
                    let e = this.o2n.get(t);
                    e ||
                        ("root" != t && (() => {})("Non root caching call"),
                        (e = {
                            type: "folder",
                            id: t,
                            name: "",
                            children: null,
                            date: "",
                            size: 0,
                            parent: null,
                            detached: !0,
                        }),
                        this.o2n.set(t, e)),
                        (e.children = i),
                        this.o2n.set(t, e);
                    try {
                        const t = await i;
                        e.children = t;
                        for (const i of t) this.d2n(i);
                        return t;
                    } catch (t) {
                        throw ((e.children = null), t);
                    }
                }
                p2n() {
                    return C$ ? this.a2n : null;
                }
                m2n(t) {
                    return g$.vu(t), (this.a2n = C$ ? t : null), t;
                }
                async w2n(t) {
                    let i = null;
                    try {
                        i = await t.children;
                    } catch (i) {
                        (() => {})("Unable to resolve entry list for " + t.id);
                    }
                    return i;
                }
                async g2n(t, i, ...e) {
                    g$.vu(t), g$.oN(i);
                    let { ZDn: s, cancel: n } = i || {};
                    g$.kDt(s), g$.qm(n, g$.ebe);
                    const r = { method: t, data: e };
                    return (await _$())(this.Gqt, r, s, n);
                }
                async y2n(t, i, e) {
                    await this.b2n(t, i), await this.v2n(e);
                }
                async b2n(t, i) {
                    if (C$) {
                        const e = this.o2n.get(t);
                        if (e) {
                            const t = await this.w2n(e);
                            if (t) {
                                const e = t.length;
                                let s = -1;
                                for (let n = 0; n < e; n++) {
                                    t[n].id === i && (s = n);
                                }
                                s > -1 && t.splice(s, 1);
                            }
                        }
                        this.o2n.delete(i);
                    }
                }
                async v2n(t) {
                    if (C$) {
                        const i = this.o2n.get(t.parent);
                        if (i) {
                            const e = await this.w2n(i);
                            e && (e.push(t), (i.children = this.VVn(e)));
                        }
                        if ("folder" === t.type) {
                            const i = this.o2n.get(t.id);
                            if (i && !0 === i.detached) {
                                const e = i.children;
                                null !== e && (t.children = e);
                            }
                        }
                        this.o2n.set(t.id, t);
                    }
                }
                VVn(t) {
                    return t.sort((t, i) =>
                        t.type === i.type
                            ? t.name === i.name
                                ? 0
                                : t.name.toLowerCase() > i.name.toLowerCase()
                                  ? 1
                                  : -1
                            : "file" === t.type
                              ? 1
                              : -1
                    );
                }
                async fbe(t) {
                    const i = await this.g2n("getFiles", null, t);
                    return this.VVn(i);
                }
                async t2n(t, i) {
                    if ((g$.vu(t), g$.vu(i), "GOOGLE DRIVE" != this.Gqt)) throw new Error("Method not implemented");
                    if (C$ && this.o2n.has(t)) return !0;
                    const e = await this.g2n("getMeta", null, t);
                    return e && 0 == e.trashed;
                }
                rB() {
                    if ("LOCAL STORAGE" != this.Gqt) throw new Error("Method not implemented");
                    return this.g2n("isEmpty");
                }
                async Uls(t, i) {
                    if ((g$.vu(i), !t)) {
                        const t = this.l2n(i);
                        if (t) return t;
                    }
                    const e = this.fbe(i);
                    return this.f2n(i, e);
                }
                async pHi(t, i, e) {
                    return g$.vu(t), g$.kDt(i), g$.qm(e, g$.ebe), await this.g2n("getFile", { ZDn: i, cancel: e }, t);
                }
                async S2n() {
                    const t = this.p2n();
                    if (t) return t;
                    const i = await this.g2n("getID");
                    return this.m2n(i);
                }
                async Z1n(t, i, e, s, n) {
                    g$.vu(t), g$.vu(e), g$.Et(i, Blob);
                    const r = await this.g2n("uploadFile", { ZDn: s, cancel: n }, t, e, i);
                    return await this.v2n(r), r;
                }
                async tN(t, i) {
                    g$.vu(t), g$.vu(i);
                    const e = await this.g2n("createFile", null, t, i);
                    return await this.v2n(e), e;
                }
                async LVn(t, i) {
                    g$.vu(t), g$.vu(i);
                    const e = await this.g2n("createFolder", null, t, i);
                    return await this.v2n(e), e;
                }
                async x2n(t, i, e, s, n) {
                    g$.vu(t), g$.Et(i, Blob), g$.vu(e), g$.kDt(s), g$.Et(n, g$.ebe);
                    const r = await this.g2n("updateFile", { ZDn: s, cancel: n }, t, i, e);
                    return await this.y2n(e, t, r), r;
                }
                async Y1n(t, i, e) {
                    g$.vu(t), g$.vu(i), g$.vu(e);
                    const s = await this.g2n("renameFile", null, t, i, e);
                    return await this.y2n(e, t, s), s;
                }
                async J1n(t, i) {
                    g$.vu(t), g$.vu(i), await this.g2n("deleteFile", null, t), await this.b2n(i, t);
                }
                async XVn() {
                    const t = await this.g2n("logout");
                    return this.o2n.clear(), (this.a2n = null), t;
                }
                static M2n(t) {
                    g$.vu(t);
                    let i = M$.get(t);
                    return i || ((i = g$.m(b$.h2n, t)), M$.set(t, i)), i;
                }
            });
    }
}
{
    const A$ = self.t,
        R$ = self.app,
        k$ = self.tj,
        O$ = self.ej,
        D$ = new WeakSet(),
        F$ = new Map();
    let L$ = 0;
    if (!window.C3_IsPopupWindow) {
        const B$ = A$.m(A$.ti.Tj.rln);
        k$.X1n = class t {
            constructor(t) {
                switch (
                    (A$.vu(t),
                    (this.Gqt = t),
                    (this.a2n = null),
                    (this.vVn = k$.h2n.M2n(this.Gqt)),
                    (this.UNt = null),
                    (this.E2n = new WeakSet()),
                    this.Gqt)
                ) {
                    case "GOOGLE DRIVE":
                        this.UNt = "google-drive";
                        break;
                    case "ONE DRIVE":
                        this.UNt = "onedrive";
                        break;
                    case "DROPBOX":
                        this.UNt = "dropbox";
                        break;
                    case "LOCAL STORAGE":
                        this.UNt = "open-folder";
                }
            }
            mCt() {
                return A$.zEs(this.Gqt);
            }
            async C2n() {
                const t = await this.vVn.S2n();
                return (this.a2n = t), this.a2n;
            }
            _2n(t) {
                A$.Et(t, self.Ga), L$++, this.E2n.add(t);
            }
            T2n(t) {
                A$.Et(t, self.Ga), L$--, this.E2n.delete(t);
            }
            G1n(t) {
                return this.E2n.has(t);
            }
            rB() {
                return this.vVn.rB();
            }
            async q1n(i, e, s) {
                A$.vu(i), A$.vu(e), (s = !!s);
                const n = O$("ui.cloud-save.downloading", this.mCt(), e);
                if (s) {
                    const t = A$.m(A$.ebe);
                    let e = 0,
                        s = A$.ti.Ze.Ke("Progress");
                    (s.onprogress = () => e), s.pr(n, null, () => t.Ua());
                    try {
                        return await this.vVn.pHi(i, (t) => (e = t), t);
                    } finally {
                        s.WD();
                    }
                } else {
                    const e = t.I2n(n + " {0}%");
                    try {
                        return await this.vVn.pHi(i, (t) => e.bln(t));
                    } finally {
                        e.Ut();
                    }
                }
            }
            Y1n(t, i, e) {
                return A$.vu(t), A$.vu(i), A$.vu(e), this.vVn.Y1n(t, i, e);
            }
            J1n(t, i) {
                return A$.vu(t), A$.vu(i), this.vVn.J1n(t, i);
            }
            LVn(t, i) {
                return A$.vu(t), A$.vu(i), this.vVn.LVn(t, i);
            }
            async Z1n(i, e, s, n) {
                A$.nOe(i, Blob), A$.vu(e), A$.k$(s), A$.vu(n);
                const r = this.mCt(),
                    h = t.I2n(O$("ui.cloud-save.uploading", r, e) + " {0}%"),
                    o = (t) => h.bln(t),
                    a = A$.m(A$.ebe);
                try {
                    s ? await this.vVn.x2n(s, i, n, o, a) : await this.vVn.Z1n(e, i, n, o, a),
                        A$.ti.Notification.XO(this.UNt, r, O$("ui.cloud-save.upload-succeeded", e), {
                            align: "bottom-left",
                        });
                } catch (i) {
                    await t.Q1n(i, O$("ui.cloud-save.unknown-error-while-saving", e, r));
                } finally {
                    h.Ut();
                }
            }
            async HB(i, e, s, n, r, h) {
                if ((A$.Et(i, self.Ga), A$.vu(e), A$.k$(s), A$.vu(n), A$.Crt(h), (r = !!r), this.G1n(i)))
                    return t.Q1n(new Error(O$("ui.cloud-save.already-saving", e)));
                this._2n(i);
                const o = A$.zEs(this.Gqt),
                    a = t.I2n(O$("ui.cloud-save.saving-project-to", e, this.mCt()) + " {0}%"),
                    l = (t) => a.bln(t),
                    u = A$.m(A$.ebe);
                try {
                    h ? (i.j7s(h), i.N7s(!0)) : (i.R7s(), i.N7s(!1));
                    const a = await t.e2n(i, r);
                    if ((i.R7s(), i.N7s(!1), s)) await this.vVn.x2n(s, a, n, l, u);
                    else {
                        s = (await this.vVn.Z1n(e, a, n, l, u)).id;
                    }
                    r || (i.r7s(e), await i.n7s("cloud", { parent: n, service: this.Gqt, name: e, id: s })),
                        R$.P7s("SaveProjectMethod", "LOCAL STORAGE" === this.Gqt ? "browser-storage" : "cloud"),
                        A$.ti.Notification.XO(this.UNt, o, O$("ui.cloud-save.save-succeeded", e), {
                            align: "bottom-left",
                        });
                } catch (i) {
                    await t.Q1n(i, O$("ui.cloud-save.unknown-error-while-saving", e, o));
                } finally {
                    a.Ut(), i.R7s(), i.N7s(!1), this.T2n(i);
                }
            }
            t2n(t, i) {
                return A$.vu(t), A$.vu(i), this.vVn.t2n(t, i);
            }
            async o1n(i, e, s) {
                A$.vu(e), A$.vu(i), A$.vu(s);
                const n = ".capx" === A$.sl(e).toLowerCase(),
                    r = [...R$.MO()]
                        .filter((t) => "cloud" === t.m_())
                        .map((t) => t.p_())
                        .filter((t) => t.service === this.Gqt && t.id === i);
                if (r[0]) return t.Q1n(new Error(O$("ui.cloud-save.already-open", e)));
                const h = await this.q1n(i, e, !0),
                    o = { JRt: "LOCAL STORAGE" === this.Gqt ? "browser-storage" : "cloud" };
                let a = null;
                (a = n ? await R$.XRt(h, o) : await R$.ZRt(h, o)),
                    A$.ca(a, self.Ga) &&
                        (n
                            ? a.r7s(e.slice(0, -4) + "c3p")
                            : (a.r7s(e), await a.n7s("cloud", { parent: s, service: this.Gqt, name: e, id: i })));
            }
            Uls(t, i) {
                return A$.vu(i), (t = !!t), this.vVn.Uls(t, i);
            }
            XVn() {
                return this.vVn.XVn();
            }
            static async e2n(t, i) {
                if ((A$.Et(t, self.Ga), (i = !!i), D$.has(t)))
                    throw new Error(self.lang("ui.cloud-save.already-archiving"));
                D$.add(t);
                const e = this.i2n(O$("ui.cloud-save.archiving-project", t.Zn()));
                try {
                    const e = await R$.M1n(t, !0);
                    return i || t.l7s(), e;
                } finally {
                    e.Ut(), D$.delete(t);
                }
            }
            static G1n(t) {
                if (t) {
                    for (const i of F$.values()) if (i.G1n(t)) return !0;
                    return !1;
                }
                return L$ > 0;
            }
            static Ke(i) {
                A$.vu(i);
                let e = F$.get(i);
                return e || (e = t.mF(i)), e;
            }
            static mF(i) {
                if ((A$.vu(i), F$.has(i))) throw new Error(`Interface "${i}" already exists`);
                const e = A$.m(t, i);
                return F$.set(i, e), e;
            }
            static i2n(t) {
                A$.vu(t);
                const i = A$.m(A$.ti.Tj.vln, B$, t);
                return i.eD(), i;
            }
            static Q1n(t, i) {
                console.error("Error saving: ", t);
                let e = t.message;
                return e || (e = i), A$.vu(e), A$.ti.Ze.Ke("OK").pr(e, document.body);
            }
            static I2n(t) {
                A$.vu(t);
                const i = A$.m(A$.ti.Tj.gln, B$, t);
                return i.bln(0), i;
            }
        };
    }
}
